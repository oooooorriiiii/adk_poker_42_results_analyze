2025-10-31 18:44:30,996 - poker_game - INFO - PokerGame initialized with SB=10, BB=20, initial_chips=2000
2025-10-31 18:44:30,997 - poker_game - INFO - === STARTING NEW HAND #1 ===
2025-10-31 18:44:30,997 - poker_game - INFO - Active players for new hand: 5
2025-10-31 18:44:30,998 - poker_game - INFO - Moving dealer button
2025-10-31 18:44:30,998 - poker_game - INFO - Posting blinds
2025-10-31 18:44:30,998 - poker_game - INFO - Dealing hole cards
2025-10-31 18:44:30,998 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:44:31,007 - poker_game - INFO - Started new hand in database: hand_id=1
2025-10-31 18:44:31,008 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:44:31,008 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:31,009 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:44:31,009 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:44:31,010 - poker_game - INFO - Last raiser: 1
2025-10-31 18:44:31,010 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:31,011 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:44:31,011 - poker_game - INFO - Community cards: []
2025-10-31 18:44:31,012 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=active
2025-10-31 18:44:31,013 - poker_game - INFO -   P1(Agent1): chips=1980, bet=20, status=active
2025-10-31 18:44:31,013 - poker_game - INFO -   P2(Agent2): chips=2000, bet=0, status=active
2025-10-31 18:44:31,013 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=active
2025-10-31 18:44:31,013 - poker_game - INFO -   P4(Agent4): chips=2000, bet=0, status=active
2025-10-31 18:44:31,013 - poker_game - INFO - ==================================================
2025-10-31 18:44:31,014 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "preflop",
  "your_cards": [
    "9♣",
    "A♠"
  ],
  "community": [],
  "your_chips": 2000,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 4,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1980,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 2000,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (2000)"
  ],
  "history": [
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20"
  ]
}
2025-10-31 18:44:31,520 - poker_game - DEBUG - Create Session: {'id': 'de05a54d-c55b-4cb6-a488-59eddf52bf84', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761903871.5168793}
2025-10-31 18:44:33,836 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "AA (エースエース) は最強のスタートハンドです。プリフロップ（フロップが開く前の最初のラウンド）で、相手がまだあまりベットしていない状況なので、積極的にレイズ（ベット額を上げる行為）をしてポットを大きくし、有利な状況を作り出します。コール（相手のベット額と同じ額をベットすること）よりもレイズを選択し、相手をプレッシャーにかけます。レイズ額は、最小レイズ額の2倍である60に設定しました。これにより、ポットをさらに大きくし、相手に高いベットを強いることができます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 153, 'promptTokenCount': 652, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 652}], 'totalTokenCount': 805}, 'invocationId': 'e-441bd5f4-38f3-4c9f-ac3f-0b802ec167f3', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'b8XXvih3', 'timestamp': 1761903871.535231}]
2025-10-31 18:44:33,837 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:44:33,837 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 60,
  "reasoning": "AA (エースエース) は最強のスタートハンドです。プリフロップ（フロップが開く前の最初のラウンド）で、相手がまだあまりベットしていない状況なので、積極的にレイズ（ベット額を上げる行為）をしてポットを大きくし、有利な状況を作り出します。コール（相手のベット額と同じ額をベットすること）よりもレイズを選択し、相手をプレッシャーにかけます。レイズ額は、最小レイズ額の2倍である60に設定しました。これにより、ポットをさらに大きくし、相手に高いベットを強いることができます。"
}
```
2025-10-31 18:44:33,837 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:44:33,838 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "AA (エースエース) は最強のスタートハンドです。プリフロップ（フロップが開く前の最初のラウンド）で、相手がまだあまりベットしていない状況なので、積極的にレイズ（ベット額を上げる行為）をしてポットを大きくし、有利な状況を作り出します。コール（相手のベット額と同じ額をベットすること）よりもレイズを選択し、相手をプレッシャーにかけます。レイズ額は、最小レイズ額の2倍である60に設定しました。これにより、ポットをさらに大きくし、相手に高いベットを強いることができます。"\n}\n```'
2025-10-31 18:44:33,838 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:44:33,839 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "AA (エースエース) は最強のスタートハンドです。プリフロップ（フロップが開く前の最初のラウンド）で、相手がまだあまりベットしていない状況なので、積極的にレイズ（ベット額を上げる行為）をしてポットを大きくし、有利な状況を作り出します。コール（相手のベット額と同じ額をベットすること）よりもレイズを選択し、相手をプレッシャーにかけます。レイズ額は、最小レイズ額の2倍である60に設定しました。これにより、ポットをさらに大きくし、相手に高いベットを強いることができます。"\n}'
2025-10-31 18:44:33,840 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "raise",
  "amount": 60,
  "reasoning": "AA (エースエース) は最強のスタートハンドです。プリフロップ（フロップが開く前の最初のラウンド）で、相手がまだあまりベットしていない状況なので、積極的にレイズ（ベット額を上げる行為）をしてポットを大きくし、有利な状況を作り出します。コール（相手のベット額と同じ額をベットすること）よりもレイズを選択し、相手をプレッシャーにかけます。レイズ額は、最小レイズ額の2倍である60に設定しました。これにより、ポットをさらに大きくし、相手に高いベットを強いることができます。"
}
2025-10-31 18:44:33,841 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'raise', 'amount': 60, 'reasoning': 'AA (エースエース) は最強のスタートハンドです。プリフロップ（フロップが開く前の最初のラウンド）で、相手がまだあまりベットしていない状況なので、積極的にレイズ（ベット額を上げる行為）をしてポットを大きくし、有利な状況を作り出します。コール（相手のベット額と同じ額をベットすること）よりもレイズを選択し、相手をプレッシャーにかけます。レイズ額は、最小レイズ額の2倍である60に設定しました。これにより、ポットをさらに大きくし、相手に高いベットを強いることができます。'}
2025-10-31 18:44:33,841 - poker_game - DEBUG - [Agent2] Extracted values - action: 'raise', amount: 60
2025-10-31 18:44:33,841 - poker_game - DEBUG - [Agent2] Processing raise action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (2000)']
2025-10-31 18:44:33,842 - poker_game - DEBUG - [Agent2] Minimum raise amount extracted from 'raise (min 40)': 40
2025-10-31 18:44:33,842 - poker_game - DEBUG - [Agent2] Raise amount 60 is valid (min: 40)
2025-10-31 18:44:33,842 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'raise', 'amount': 60}
2025-10-31 18:44:33,843 - poker_game - INFO - [Agent2] Successfully parsed decision: raise, 60, AA (エースエース) は最強のスタートハンドです。プリフロップ（フロップが開く前の最初のラウンド）で、相手がまだあまりベットしていない状況なので、積極的にレイズ（ベット額を上げる行為）をしてポットを大きくし、有利な状況を作り出します。コール（相手のベット額と同じ額をベットすること）よりもレイズを選択し、相手をプレッシャーにかけます。レイズ額は、最小レイズ額の2倍である60に設定しました。これにより、ポットをさらに大きくし、相手に高いベットを強いることができます。
2025-10-31 18:44:33,844 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'raise' with amount 60
2025-10-31 18:44:33,844 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:44:33,845 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:33,845 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:44:33,846 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:44:33,846 - poker_game - INFO - Last raiser: 1
2025-10-31 18:44:33,847 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:33,847 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:44:33,847 - poker_game - INFO - Community cards: []
2025-10-31 18:44:33,848 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=active
2025-10-31 18:44:33,848 - poker_game - INFO -   P1(Agent1): chips=1980, bet=20, status=active
2025-10-31 18:44:33,848 - poker_game - INFO -   P2(Agent2): chips=2000, bet=0, status=active
2025-10-31 18:44:33,848 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=active
2025-10-31 18:44:33,849 - poker_game - INFO -   P4(Agent4): chips=2000, bet=0, status=active
2025-10-31 18:44:33,849 - poker_game - INFO - ==================================================
2025-10-31 18:44:33,849 - poker_game - INFO - ACTION_EXECUTED: Player 2 raised to 80
2025-10-31 18:44:33,862 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:44:33,863 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:33,863 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:44:33,863 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:44:33,864 - poker_game - INFO - Last raiser: 2
2025-10-31 18:44:33,864 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:33,865 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:44:33,865 - poker_game - INFO - Community cards: []
2025-10-31 18:44:33,865 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=active
2025-10-31 18:44:33,866 - poker_game - INFO -   P1(Agent1): chips=1980, bet=20, status=active
2025-10-31 18:44:33,866 - poker_game - INFO -   P2(Agent2): chips=1920, bet=80, status=active
2025-10-31 18:44:33,867 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=active
2025-10-31 18:44:33,867 - poker_game - INFO -   P4(Agent4): chips=2000, bet=0, status=active
2025-10-31 18:44:33,867 - poker_game - INFO - Extra: Action: Player 2 raised to 80
2025-10-31 18:44:33,868 - poker_game - INFO - ==================================================
2025-10-31 18:44:33,868 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:44:33,869 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:44:33,869 - poker_game - DEBUG - Active players: [0, 1, 2, 3, 4]
2025-10-31 18:44:33,869 - poker_game - INFO - Advanced from player 2 to player 3 (seat order)
2025-10-31 18:44:33,870 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:44:33,870 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:44:33,870 - poker_game - DEBUG - Active: 5, All-in: 0
2025-10-31 18:44:33,870 - poker_game - DEBUG - Player bets: [10, 20, 80, 0, 0], Current bet: 80, All same: False
2025-10-31 18:44:33,871 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:44:33,871 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:44:33,871 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:33,872 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:44:33,873 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:44:33,874 - poker_game - INFO - Last raiser: 2
2025-10-31 18:44:33,875 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:33,875 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:44:33,878 - poker_game - INFO - Community cards: []
2025-10-31 18:44:33,881 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=active
2025-10-31 18:44:33,881 - poker_game - INFO -   P1(Agent1): chips=1980, bet=20, status=active
2025-10-31 18:44:33,882 - poker_game - INFO -   P2(Agent2): chips=1920, bet=80, status=active
2025-10-31 18:44:33,882 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=active
2025-10-31 18:44:33,882 - poker_game - INFO -   P4(Agent4): chips=2000, bet=0, status=active
2025-10-31 18:44:33,883 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:44:33,883 - poker_game - INFO - ==================================================
2025-10-31 18:44:33,984 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "9♥",
    "4♠"
  ],
  "community": [],
  "your_chips": 2000,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 110,
  "to_call": 80,
  "dealer_button": 4,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1980,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1920,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 2000,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (80)",
    "raise (min 100)",
    "all-in (2000)"
  ],
  "history": [
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 raised to 80"
  ]
}
2025-10-31 18:44:34,002 - poker_game - DEBUG - Create Session: {'id': '869e4d61-4215-4686-be7e-db9dee1a5cbc', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761903874.000132}
2025-10-31 18:44:36,195 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、私の手札は9ハイ（9と4）で、あまり強くありません。前のプレイヤーが80にレイズ（ベット額を上げる）しており、コール（相手のベット額と同額をベットする）するには80必要です。この手札でコールするのはリスクが高いため、フォールド（ゲームから降りる）を選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 119, 'promptTokenCount': 667, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 667}], 'totalTokenCount': 786}, 'invocationId': 'e-9552c1ab-d966-405f-91a1-fcd71302a896', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'dx7RDKI6', 'timestamp': 1761903874.01438}]
2025-10-31 18:44:36,195 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:44:36,196 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、私の手札は9ハイ（9と4）で、あまり強くありません。前のプレイヤーが80にレイズ（ベット額を上げる）しており、コール（相手のベット額と同額をベットする）するには80必要です。この手札でコールするのはリスクが高いため、フォールド（ゲームから降りる）を選択します。"
}
```
2025-10-31 18:44:36,196 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:44:36,196 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、私の手札は9ハイ（9と4）で、あまり強くありません。前のプレイヤーが80にレイズ（ベット額を上げる）しており、コール（相手のベット額と同額をベットする）するには80必要です。この手札でコールするのはリスクが高いため、フォールド（ゲームから降りる）を選択します。"\n}\n```'
2025-10-31 18:44:36,196 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:44:36,196 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、私の手札は9ハイ（9と4）で、あまり強くありません。前のプレイヤーが80にレイズ（ベット額を上げる）しており、コール（相手のベット額と同額をベットする）するには80必要です。この手札でコールするのはリスクが高いため、フォールド（ゲームから降りる）を選択します。"\n}'
2025-10-31 18:44:36,197 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、私の手札は9ハイ（9と4）で、あまり強くありません。前のプレイヤーが80にレイズ（ベット額を上げる）しており、コール（相手のベット額と同額をベットする）するには80必要です。この手札でコールするのはリスクが高いため、フォールド（ゲームから降りる）を選択します。"
}
2025-10-31 18:44:36,197 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、私の手札は9ハイ（9と4）で、あまり強くありません。前のプレイヤーが80にレイズ（ベット額を上げる）しており、コール（相手のベット額と同額をベットする）するには80必要です。この手札でコールするのはリスクが高いため、フォールド（ゲームから降りる）を選択します。'}
2025-10-31 18:44:36,197 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 18:44:36,197 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 18:44:36,197 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:44:36,197 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、私の手札は9ハイ（9と4）で、あまり強くありません。前のプレイヤーが80にレイズ（ベット額を上げる）しており、コール（相手のベット額と同額をベットする）するには80必要です。この手札でコールするのはリスクが高いため、フォールド（ゲームから降りる）を選択します。
2025-10-31 18:44:36,198 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 18:44:36,199 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:44:36,199 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:36,200 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:44:36,200 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:44:36,200 - poker_game - INFO - Last raiser: 2
2025-10-31 18:44:36,201 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:36,201 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:44:36,201 - poker_game - INFO - Community cards: []
2025-10-31 18:44:36,202 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=active
2025-10-31 18:44:36,202 - poker_game - INFO -   P1(Agent1): chips=1980, bet=20, status=active
2025-10-31 18:44:36,202 - poker_game - INFO -   P2(Agent2): chips=1920, bet=80, status=active
2025-10-31 18:44:36,203 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=active
2025-10-31 18:44:36,203 - poker_game - INFO -   P4(Agent4): chips=2000, bet=0, status=active
2025-10-31 18:44:36,203 - poker_game - INFO - ==================================================
2025-10-31 18:44:36,204 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 18:44:36,214 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:44:36,215 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:36,215 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:44:36,216 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:44:36,216 - poker_game - INFO - Last raiser: 2
2025-10-31 18:44:36,217 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:36,217 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:44:36,218 - poker_game - INFO - Community cards: []
2025-10-31 18:44:36,218 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=active
2025-10-31 18:44:36,218 - poker_game - INFO -   P1(Agent1): chips=1980, bet=20, status=active
2025-10-31 18:44:36,219 - poker_game - INFO -   P2(Agent2): chips=1920, bet=80, status=active
2025-10-31 18:44:36,219 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:36,220 - poker_game - INFO -   P4(Agent4): chips=2000, bet=0, status=active
2025-10-31 18:44:36,220 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 18:44:36,221 - poker_game - INFO - ==================================================
2025-10-31 18:44:36,221 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:44:36,222 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:44:36,222 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:44:36,222 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:44:36,222 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:44:36,223 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:44:36,223 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:44:36,223 - poker_game - DEBUG - Player bets: [10, 20, 80, 0], Current bet: 80, All same: False
2025-10-31 18:44:36,223 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:44:36,224 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:44:36,224 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:36,225 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:44:36,225 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:44:36,225 - poker_game - INFO - Last raiser: 2
2025-10-31 18:44:36,225 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:36,226 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:44:36,226 - poker_game - INFO - Community cards: []
2025-10-31 18:44:36,226 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=active
2025-10-31 18:44:36,227 - poker_game - INFO -   P1(Agent1): chips=1980, bet=20, status=active
2025-10-31 18:44:36,227 - poker_game - INFO -   P2(Agent2): chips=1920, bet=80, status=active
2025-10-31 18:44:36,227 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:36,228 - poker_game - INFO -   P4(Agent4): chips=2000, bet=0, status=active
2025-10-31 18:44:36,228 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:44:36,228 - poker_game - INFO - ==================================================
2025-10-31 18:44:36,333 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "10♥",
    "9♠"
  ],
  "community": [],
  "your_chips": 2000,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 110,
  "to_call": 80,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1980,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1920,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (80)",
    "raise (min 100)",
    "all-in (2000)"
  ],
  "history": [
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 raised to 80",
    "Player 3 folded"
  ]
}
2025-10-31 18:44:36,343 - poker_game - DEBUG - Create Session: {'id': '3fca7d3f-752e-40c6-ab09-4e76fb182dbf', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761903876.3406806}
2025-10-31 18:44:46,483 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:44:51,401 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_NQfJ36XaNFyd0t3hK36Wia2X', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 999, 'totalTokenCount': 1016}, 'invocationId': 'e-1758f257-a0d8-4e0a-bf3c-273375c6fd9d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '9cRphsfL', 'timestamp': 1761903883.41642}, {'content': {'parts': [{'functionResponse': {'id': 'call_NQfJ36XaNFyd0t3hK36Wia2X', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-1758f257-a0d8-4e0a-bf3c-273375c6fd9d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'OlCLgwjh', 'timestamp': 1761903885.259247}, {'content': {'parts': [{'functionCall': {'id': 'call_fRdLEdd8NVGTfHmz65tubKfh', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1523, 'totalTokenCount': 1543}, 'invocationId': 'e-1758f257-a0d8-4e0a-bf3c-273375c6fd9d', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'BM0UXyun', 'timestamp': 1761903885.261058}, {'content': {'parts': [{'functionResponse': {'id': 'call_fRdLEdd8NVGTfHmz65tubKfh', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-1758f257-a0d8-4e0a-bf3c-273375c6fd9d', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'TltAWJjd', 'timestamp': 1761903886.548198}, {'content': {'parts': [{'functionCall': {'id': 'call_LQCLGX1hZkoc8hPWvgsjnA5D', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1085, 'totalTokenCount': 1102}, 'invocationId': 'e-1758f257-a0d8-4e0a-bf3c-273375c6fd9d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'ySffz0Ir', 'timestamp': 1761903886.55035}, {'content': {'parts': [{'functionResponse': {'id': 'call_LQCLGX1hZkoc8hPWvgsjnA5D', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-1758f257-a0d8-4e0a-bf3c-273375c6fd9d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '5OjIHbJG', 'timestamp': 1761903887.496294}, {'content': {'parts': [{'functionCall': {'id': 'call_IAFUR6xUCsvYthr3dC2iYhQo', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['10♥', '9♠'], 'community': [], 'your_chips': 2000, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 0, 'pot': 110, 'to_call': 80, 'dealer_button': 4, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1990, 'bet': 10, 'status': 'active'}, {'id': 1, 'chips': 1980, 'bet': 20, 'status': 'active'}, {'id': 2, 'chips': 1920, 'bet': 80, 'status': 'active'}, {'id': 3, 'chips': 2000, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'call (80)', 'raise (min 100)', 'all-in (2000)'], 'history': ['Player 0 posted small blind 10', 'Player 1 posted big blind 20', 'Player 2 raised to 80', 'Player 3 folded']}, 'call_amount': 80, 'pot_after_call': 190, 'equity': 0.5}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 231, 'promptTokenCount': 1615, 'totalTokenCount': 1846}, 'invocationId': 'e-1758f257-a0d8-4e0a-bf3c-273375c6fd9d', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '8ufmwTZE', 'timestamp': 1761903887.498117}, {'content': {'parts': [{'functionResponse': {'id': 'call_IAFUR6xUCsvYthr3dC2iYhQo', 'name': 'action_decision', 'response': {'action': 'call', 'amount': 80, 'reasoning': 'ポットオッズを満たしており（55.00(ポットに対して50.00%）、コールが妥当と判断。コール額: 80'}}}], 'role': 'user'}, 'invocationId': 'e-1758f257-a0d8-4e0a-bf3c-273375c6fd9d', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'JPq63V3u', 'timestamp': 1761903889.614895}, {'content': {'parts': [{'text': '{"action":"call","amount":80,"reasoning":"ポットオッズを満たしており（55.00(ポットに対して50.00%）、コールが妥当と判断。コール額: 80"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 54, 'promptTokenCount': 1913, 'totalTokenCount': 1967}, 'invocationId': 'e-1758f257-a0d8-4e0a-bf3c-273375c6fd9d', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'AhBLcXGF', 'timestamp': 1761903889.618663}]
2025-10-31 18:44:51,402 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:44:51,403 - poker_game - DEBUG - {"action":"call","amount":80,"reasoning":"ポットオッズを満たしており（55.00(ポットに対して50.00%）、コールが妥当と判断。コール額: 80"}
2025-10-31 18:44:51,403 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:44:51,404 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"call","amount":80,"reasoning":"ポットオッズを満たしており（55.00(ポットに対して50.00%）、コールが妥当と判断。コール額: 80"}'
2025-10-31 18:44:51,404 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:44:51,404 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"call","amount":80,"reasoning":"ポットオッズを満たしており（55.00(ポットに対して50.00%）、コールが妥当と判断。コール額: 80"}
2025-10-31 18:44:51,404 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'call', 'amount': 80, 'reasoning': 'ポットオッズを満たしており（55.00(ポットに対して50.00%）、コールが妥当と判断。コール額: 80'}
2025-10-31 18:44:51,404 - poker_game - DEBUG - [Agent4] Extracted values - action: 'call', amount: 80
2025-10-31 18:44:51,405 - poker_game - DEBUG - [Agent4] Processing call action - available actions: ['fold', 'call (80)', 'raise (min 100)', 'all-in (2000)']
2025-10-31 18:44:51,405 - poker_game - DEBUG - [Agent4] Call amount extracted from 'call (80)': 80
2025-10-31 18:44:51,406 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'call', 'amount': 80}
2025-10-31 18:44:51,406 - poker_game - INFO - [Agent4] Successfully parsed decision: call, 80, ポットオッズを満たしており（55.00(ポットに対して50.00%）、コールが妥当と判断。コール額: 80
2025-10-31 18:44:51,407 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'call' with amount 80
2025-10-31 18:44:51,408 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:44:51,408 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:51,409 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:44:51,409 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:44:51,410 - poker_game - INFO - Last raiser: 2
2025-10-31 18:44:51,410 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:51,410 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:44:51,411 - poker_game - INFO - Community cards: []
2025-10-31 18:44:51,411 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=active
2025-10-31 18:44:51,412 - poker_game - INFO -   P1(Agent1): chips=1980, bet=20, status=active
2025-10-31 18:44:51,412 - poker_game - INFO -   P2(Agent2): chips=1920, bet=80, status=active
2025-10-31 18:44:51,413 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:51,413 - poker_game - INFO -   P4(Agent4): chips=2000, bet=0, status=active
2025-10-31 18:44:51,414 - poker_game - INFO - ==================================================
2025-10-31 18:44:51,414 - poker_game - INFO - ACTION_EXECUTED: Player 4 called 80
2025-10-31 18:44:51,431 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:44:51,431 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:51,432 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:44:51,432 - poker_game - INFO - Pot: 190, Current bet: 80
2025-10-31 18:44:51,433 - poker_game - INFO - Last raiser: 2
2025-10-31 18:44:51,433 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:51,433 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:44:51,434 - poker_game - INFO - Community cards: []
2025-10-31 18:44:51,434 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=active
2025-10-31 18:44:51,434 - poker_game - INFO -   P1(Agent1): chips=1980, bet=20, status=active
2025-10-31 18:44:51,435 - poker_game - INFO -   P2(Agent2): chips=1920, bet=80, status=active
2025-10-31 18:44:51,435 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:51,435 - poker_game - INFO -   P4(Agent4): chips=1920, bet=80, status=active
2025-10-31 18:44:51,436 - poker_game - INFO - Extra: Action: Player 4 called 80
2025-10-31 18:44:51,437 - poker_game - INFO - ==================================================
2025-10-31 18:44:51,437 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:44:51,437 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:44:51,438 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:44:51,438 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:44:51,438 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:44:51,438 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:44:51,439 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:44:51,439 - poker_game - DEBUG - Player bets: [10, 20, 80, 80], Current bet: 80, All same: False
2025-10-31 18:44:51,439 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:44:51,439 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:44:51,439 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:51,440 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:44:51,441 - poker_game - INFO - Pot: 190, Current bet: 80
2025-10-31 18:44:51,441 - poker_game - INFO - Last raiser: 2
2025-10-31 18:44:51,441 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:51,442 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:44:51,442 - poker_game - INFO - Community cards: []
2025-10-31 18:44:51,443 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=active
2025-10-31 18:44:51,443 - poker_game - INFO -   P1(Agent1): chips=1980, bet=20, status=active
2025-10-31 18:44:51,444 - poker_game - INFO -   P2(Agent2): chips=1920, bet=80, status=active
2025-10-31 18:44:51,445 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:51,445 - poker_game - INFO -   P4(Agent4): chips=1920, bet=80, status=active
2025-10-31 18:44:51,446 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:44:51,447 - poker_game - INFO - ==================================================
2025-10-31 18:44:51,549 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "2♦",
    "5♣"
  ],
  "community": [],
  "your_chips": 1990,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 190,
  "to_call": 70,
  "dealer_button": 4,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1980,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1920,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 80,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (70)",
    "raise (min 100)",
    "all-in (1990)"
  ],
  "history": [
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 raised to 80",
    "Player 3 folded",
    "Player 4 called 80"
  ]
}
2025-10-31 18:44:51,559 - poker_game - DEBUG - Create Session: {'id': '57de0534-0299-4e63-8ebb-7a60d62fa814', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761903891.5560322}
2025-10-31 18:44:53,792 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（全てのコミュニティカードが開かれる前の段階）で、私の手札は2♦5♣であり、これは非常に弱いハンドです。既に他のプレイヤーがレイズ（ベット額を引き上げること）しており、コール（相手のベット額と同額を支払うこと）するには70チップ必要ですが、このハンドで勝つ可能性は低いです。したがって、フォールド（ゲームから降りること）が最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 124, 'promptTokenCount': 688, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 688}], 'totalTokenCount': 812}, 'invocationId': 'e-1495f09c-e5c7-4234-921d-8da2b7f36064', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'DtmJPaQo', 'timestamp': 1761903891.572298}]
2025-10-31 18:44:53,793 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:44:53,793 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（全てのコミュニティカードが開かれる前の段階）で、私の手札は2♦5♣であり、これは非常に弱いハンドです。既に他のプレイヤーがレイズ（ベット額を引き上げること）しており、コール（相手のベット額と同額を支払うこと）するには70チップ必要ですが、このハンドで勝つ可能性は低いです。したがって、フォールド（ゲームから降りること）が最善の選択です。"
}
```
2025-10-31 18:44:53,794 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:44:53,794 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（全てのコミュニティカードが開かれる前の段階）で、私の手札は2♦5♣であり、これは非常に弱いハンドです。既に他のプレイヤーがレイズ（ベット額を引き上げること）しており、コール（相手のベット額と同額を支払うこと）するには70チップ必要ですが、このハンドで勝つ可能性は低いです。したがって、フォールド（ゲームから降りること）が最善の選択です。"\n}\n```'
2025-10-31 18:44:53,794 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:44:53,794 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（全てのコミュニティカードが開かれる前の段階）で、私の手札は2♦5♣であり、これは非常に弱いハンドです。既に他のプレイヤーがレイズ（ベット額を引き上げること）しており、コール（相手のベット額と同額を支払うこと）するには70チップ必要ですが、このハンドで勝つ可能性は低いです。したがって、フォールド（ゲームから降りること）が最善の選択です。"\n}'
2025-10-31 18:44:53,795 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（全てのコミュニティカードが開かれる前の段階）で、私の手札は2♦5♣であり、これは非常に弱いハンドです。既に他のプレイヤーがレイズ（ベット額を引き上げること）しており、コール（相手のベット額と同額を支払うこと）するには70チップ必要ですが、このハンドで勝つ可能性は低いです。したがって、フォールド（ゲームから降りること）が最善の選択です。"
}
2025-10-31 18:44:53,795 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（全てのコミュニティカードが開かれる前の段階）で、私の手札は2♦5♣であり、これは非常に弱いハンドです。既に他のプレイヤーがレイズ（ベット額を引き上げること）しており、コール（相手のベット額と同額を支払うこと）するには70チップ必要ですが、このハンドで勝つ可能性は低いです。したがって、フォールド（ゲームから降りること）が最善の選択です。'}
2025-10-31 18:44:53,795 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 18:44:53,795 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 18:44:53,795 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:44:53,796 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップ（全てのコミュニティカードが開かれる前の段階）で、私の手札は2♦5♣であり、これは非常に弱いハンドです。既に他のプレイヤーがレイズ（ベット額を引き上げること）しており、コール（相手のベット額と同額を支払うこと）するには70チップ必要ですが、このハンドで勝つ可能性は低いです。したがって、フォールド（ゲームから降りること）が最善の選択です。
2025-10-31 18:44:53,797 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 18:44:53,797 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:44:53,797 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:53,798 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:44:53,798 - poker_game - INFO - Pot: 190, Current bet: 80
2025-10-31 18:44:53,798 - poker_game - INFO - Last raiser: 2
2025-10-31 18:44:53,799 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:53,799 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:44:53,800 - poker_game - INFO - Community cards: []
2025-10-31 18:44:53,801 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=active
2025-10-31 18:44:53,801 - poker_game - INFO -   P1(Agent1): chips=1980, bet=20, status=active
2025-10-31 18:44:53,802 - poker_game - INFO -   P2(Agent2): chips=1920, bet=80, status=active
2025-10-31 18:44:53,803 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:53,804 - poker_game - INFO -   P4(Agent4): chips=1920, bet=80, status=active
2025-10-31 18:44:53,804 - poker_game - INFO - ==================================================
2025-10-31 18:44:53,805 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 18:44:53,819 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:44:53,820 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:53,821 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:44:53,821 - poker_game - INFO - Pot: 190, Current bet: 80
2025-10-31 18:44:53,822 - poker_game - INFO - Last raiser: 2
2025-10-31 18:44:53,822 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:53,822 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:44:53,823 - poker_game - INFO - Community cards: []
2025-10-31 18:44:53,823 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=folded
2025-10-31 18:44:53,823 - poker_game - INFO -   P1(Agent1): chips=1980, bet=20, status=active
2025-10-31 18:44:53,824 - poker_game - INFO -   P2(Agent2): chips=1920, bet=80, status=active
2025-10-31 18:44:53,824 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:53,825 - poker_game - INFO -   P4(Agent4): chips=1920, bet=80, status=active
2025-10-31 18:44:53,825 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 18:44:53,826 - poker_game - INFO - ==================================================
2025-10-31 18:44:53,827 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:44:53,828 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:44:53,829 - poker_game - DEBUG - Active players: [1, 2, 4]
2025-10-31 18:44:53,829 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:44:53,830 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:44:53,830 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:44:53,831 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:44:53,831 - poker_game - DEBUG - Player bets: [20, 80, 80], Current bet: 80, All same: False
2025-10-31 18:44:53,831 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:44:53,832 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:44:53,832 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:53,833 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:44:53,834 - poker_game - INFO - Pot: 190, Current bet: 80
2025-10-31 18:44:53,834 - poker_game - INFO - Last raiser: 2
2025-10-31 18:44:53,834 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:53,835 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:44:53,835 - poker_game - INFO - Community cards: []
2025-10-31 18:44:53,835 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=folded
2025-10-31 18:44:53,836 - poker_game - INFO -   P1(Agent1): chips=1980, bet=20, status=active
2025-10-31 18:44:53,836 - poker_game - INFO -   P2(Agent2): chips=1920, bet=80, status=active
2025-10-31 18:44:53,837 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:53,837 - poker_game - INFO -   P4(Agent4): chips=1920, bet=80, status=active
2025-10-31 18:44:53,838 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:44:53,838 - poker_game - INFO - ==================================================
2025-10-31 18:44:53,940 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "4♦",
    "5♥"
  ],
  "community": [],
  "your_chips": 1980,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 190,
  "to_call": 60,
  "dealer_button": 4,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 10,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 1920,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 80,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (60)",
    "raise (min 100)",
    "all-in (1980)"
  ],
  "history": [
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 raised to 80",
    "Player 3 folded",
    "Player 4 called 80",
    "Player 0 folded"
  ]
}
2025-10-31 18:44:53,948 - poker_game - DEBUG - Create Session: {'id': '18747206-ac79-4c99-8394-acd297e2df74', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761903893.946059}
2025-10-31 18:44:56,167 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "フロップ前の状況（プリフロップ）です。あなたの手札は4♦5♥で、これはストレートやフラッシュの可能性を秘めたスーテッドコネクター（同じスートで連続した数字）です。しかし、現時点ではまだ弱いハンドです。ポットには190チップがあり、コールするには60チップが必要です。相手のプレイヤー2と4がレイズ（ベット額を上げる）しており、彼らが強いハンドを持っている可能性があります。しかし、60チップのコールはポットサイズに対してそれほど大きくなく、フロップでハンドが改善される可能性に賭ける価値はあります。したがって、コールを選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 165, 'promptTokenCount': 696, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 696}], 'totalTokenCount': 861}, 'invocationId': 'e-b4f237e5-78c6-4854-b6c9-07c02c4bca64', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'd6Q155px', 'timestamp': 1761903893.958914}]
2025-10-31 18:44:56,167 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:44:56,168 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 60,
  "reasoning": "フロップ前の状況（プリフロップ）です。あなたの手札は4♦5♥で、これはストレートやフラッシュの可能性を秘めたスーテッドコネクター（同じスートで連続した数字）です。しかし、現時点ではまだ弱いハンドです。ポットには190チップがあり、コールするには60チップが必要です。相手のプレイヤー2と4がレイズ（ベット額を上げる）しており、彼らが強いハンドを持っている可能性があります。しかし、60チップのコールはポットサイズに対してそれほど大きくなく、フロップでハンドが改善される可能性に賭ける価値はあります。したがって、コールを選択します。"
}
```
2025-10-31 18:44:56,168 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:44:56,168 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "フロップ前の状況（プリフロップ）です。あなたの手札は4♦5♥で、これはストレートやフラッシュの可能性を秘めたスーテッドコネクター（同じスートで連続した数字）です。しかし、現時点ではまだ弱いハンドです。ポットには190チップがあり、コールするには60チップが必要です。相手のプレイヤー2と4がレイズ（ベット額を上げる）しており、彼らが強いハンドを持っている可能性があります。しかし、60チップのコールはポットサイズに対してそれほど大きくなく、フロップでハンドが改善される可能性に賭ける価値はあります。したがって、コールを選択します。"\n}\n```'
2025-10-31 18:44:56,169 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:44:56,169 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "フロップ前の状況（プリフロップ）です。あなたの手札は4♦5♥で、これはストレートやフラッシュの可能性を秘めたスーテッドコネクター（同じスートで連続した数字）です。しかし、現時点ではまだ弱いハンドです。ポットには190チップがあり、コールするには60チップが必要です。相手のプレイヤー2と4がレイズ（ベット額を上げる）しており、彼らが強いハンドを持っている可能性があります。しかし、60チップのコールはポットサイズに対してそれほど大きくなく、フロップでハンドが改善される可能性に賭ける価値はあります。したがって、コールを選択します。"\n}'
2025-10-31 18:44:56,169 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 60,
  "reasoning": "フロップ前の状況（プリフロップ）です。あなたの手札は4♦5♥で、これはストレートやフラッシュの可能性を秘めたスーテッドコネクター（同じスートで連続した数字）です。しかし、現時点ではまだ弱いハンドです。ポットには190チップがあり、コールするには60チップが必要です。相手のプレイヤー2と4がレイズ（ベット額を上げる）しており、彼らが強いハンドを持っている可能性があります。しかし、60チップのコールはポットサイズに対してそれほど大きくなく、フロップでハンドが改善される可能性に賭ける価値はあります。したがって、コールを選択します。"
}
2025-10-31 18:44:56,169 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 60, 'reasoning': 'フロップ前の状況（プリフロップ）です。あなたの手札は4♦5♥で、これはストレートやフラッシュの可能性を秘めたスーテッドコネクター（同じスートで連続した数字）です。しかし、現時点ではまだ弱いハンドです。ポットには190チップがあり、コールするには60チップが必要です。相手のプレイヤー2と4がレイズ（ベット額を上げる）しており、彼らが強いハンドを持っている可能性があります。しかし、60チップのコールはポットサイズに対してそれほど大きくなく、フロップでハンドが改善される可能性に賭ける価値はあります。したがって、コールを選択します。'}
2025-10-31 18:44:56,169 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 60
2025-10-31 18:44:56,170 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (60)', 'raise (min 100)', 'all-in (1980)']
2025-10-31 18:44:56,170 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (60)': 60
2025-10-31 18:44:56,170 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 60}
2025-10-31 18:44:56,170 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 60, フロップ前の状況（プリフロップ）です。あなたの手札は4♦5♥で、これはストレートやフラッシュの可能性を秘めたスーテッドコネクター（同じスートで連続した数字）です。しかし、現時点ではまだ弱いハンドです。ポットには190チップがあり、コールするには60チップが必要です。相手のプレイヤー2と4がレイズ（ベット額を上げる）しており、彼らが強いハンドを持っている可能性があります。しかし、60チップのコールはポットサイズに対してそれほど大きくなく、フロップでハンドが改善される可能性に賭ける価値はあります。したがって、コールを選択します。
2025-10-31 18:44:56,171 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 60
2025-10-31 18:44:56,172 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:44:56,174 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:56,175 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:44:56,177 - poker_game - INFO - Pot: 190, Current bet: 80
2025-10-31 18:44:56,178 - poker_game - INFO - Last raiser: 2
2025-10-31 18:44:56,178 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:56,180 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:44:56,181 - poker_game - INFO - Community cards: []
2025-10-31 18:44:56,181 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=folded
2025-10-31 18:44:56,181 - poker_game - INFO -   P1(Agent1): chips=1980, bet=20, status=active
2025-10-31 18:44:56,182 - poker_game - INFO -   P2(Agent2): chips=1920, bet=80, status=active
2025-10-31 18:44:56,182 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:56,183 - poker_game - INFO -   P4(Agent4): chips=1920, bet=80, status=active
2025-10-31 18:44:56,183 - poker_game - INFO - ==================================================
2025-10-31 18:44:56,183 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 60
2025-10-31 18:44:56,196 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:44:56,197 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:56,197 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:44:56,198 - poker_game - INFO - Pot: 250, Current bet: 80
2025-10-31 18:44:56,199 - poker_game - INFO - Last raiser: 2
2025-10-31 18:44:56,200 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:56,200 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:44:56,201 - poker_game - INFO - Community cards: []
2025-10-31 18:44:56,201 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=folded
2025-10-31 18:44:56,202 - poker_game - INFO -   P1(Agent1): chips=1920, bet=80, status=active
2025-10-31 18:44:56,202 - poker_game - INFO -   P2(Agent2): chips=1920, bet=80, status=active
2025-10-31 18:44:56,202 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:56,203 - poker_game - INFO -   P4(Agent4): chips=1920, bet=80, status=active
2025-10-31 18:44:56,204 - poker_game - INFO - Extra: Action: Player 1 called 60
2025-10-31 18:44:56,204 - poker_game - INFO - ==================================================
2025-10-31 18:44:56,204 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:44:56,205 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:44:56,205 - poker_game - DEBUG - Active players: [1, 2, 4]
2025-10-31 18:44:56,205 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:44:56,206 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:44:56,206 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:44:56,207 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:44:56,207 - poker_game - DEBUG - Player bets: [80, 80, 80], Current bet: 80, All same: True
2025-10-31 18:44:56,207 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:44:56,207 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:44:56,208 - poker_game - INFO - Hand #1, Phase: preflop
2025-10-31 18:44:56,208 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:44:56,209 - poker_game - INFO - Pot: 250, Current bet: 80
2025-10-31 18:44:56,209 - poker_game - INFO - Last raiser: 2
2025-10-31 18:44:56,209 - poker_game - INFO - Betting round complete: True
2025-10-31 18:44:56,210 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:44:56,210 - poker_game - INFO - Community cards: []
2025-10-31 18:44:56,211 - poker_game - INFO -   P0(Agent0): chips=1990, bet=10, status=folded
2025-10-31 18:44:56,212 - poker_game - INFO -   P1(Agent1): chips=1920, bet=80, status=active
2025-10-31 18:44:56,213 - poker_game - INFO -   P2(Agent2): chips=1920, bet=80, status=active
2025-10-31 18:44:56,213 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:56,214 - poker_game - INFO -   P4(Agent4): chips=1920, bet=80, status=active
2025-10-31 18:44:56,214 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:44:56,215 - poker_game - INFO - ==================================================
2025-10-31 18:44:56,316 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:44:56,317 - poker_game - INFO - Betting round complete: True
2025-10-31 18:44:56,318 - poker_game - INFO - Remaining players: 3
2025-10-31 18:44:56,318 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:44:56,319 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:44:56,319 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:44:56,319 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:44:56,330 - poker_game - INFO - Starting new betting round
2025-10-31 18:44:56,331 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:44:56,332 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:44:56,332 - poker_game - DEBUG - Active players for new betting round: [1, 2, 4]
2025-10-31 18:44:56,333 - poker_game - DEBUG - Dealer button: 4
2025-10-31 18:44:56,333 - poker_game - INFO - First actor: Player 1 (by phase rule), was 2
2025-10-31 18:44:56,333 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:44:56,334 - poker_game - INFO - Hand #1, Phase: flop
2025-10-31 18:44:56,334 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:44:56,334 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:44:56,335 - poker_game - INFO - Last raiser: None
2025-10-31 18:44:56,336 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:56,336 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:44:56,337 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥']
2025-10-31 18:44:56,337 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:44:56,338 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=active
2025-10-31 18:44:56,338 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:44:56,339 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:56,339 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:44:56,340 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:44:56,340 - poker_game - INFO - ==================================================
2025-10-31 18:44:56,341 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "flop",
  "your_cards": [
    "4♦",
    "5♥"
  ],
  "community": [
    "Q♦",
    "A♣",
    "K♥"
  ],
  "your_chips": 1920,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 250,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 1920,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1920)"
  ],
  "history": [
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 raised to 80",
    "Player 3 folded",
    "Player 4 called 80",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: Q♦, A♣, K♥"
  ]
}
2025-10-31 18:44:56,360 - poker_game - DEBUG - Create Session: {'id': 'f7468cd8-af23-4738-811c-da3794610c67', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761903896.3557637}
2025-10-31 18:44:58,674 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "フロップ（コミュニティカードが開かれた後）で、私の手札（4♦, 5♥）は、コミュニティカード（Q♦, A♣, K♥）と何もペアになっておらず、ストレートやフラッシュといった強い役を作る可能性も低い（バックドア・ストレート・ドローやバックドア・フラッシュ・ドローもありません）。ポットには250チップありますが、相手のプレイヤー2（ID: 2）とプレイヤー4（ID: 4）がすでにベットしており、コールするには最低でも60チップ（プレイヤー1のコール分）が必要で、さらに相手がレイズする可能性も高いです。現状では勝てる確率が非常に低いため、これ以上のチップを失わないようにフォールドするのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 193, 'promptTokenCount': 734, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 734}], 'totalTokenCount': 927}, 'invocationId': 'e-69aab0d2-e584-4752-8e4a-ba94115a7756', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'lhHanTwi', 'timestamp': 1761903896.375714}]
2025-10-31 18:44:58,675 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:44:58,675 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "フロップ（コミュニティカードが開かれた後）で、私の手札（4♦, 5♥）は、コミュニティカード（Q♦, A♣, K♥）と何もペアになっておらず、ストレートやフラッシュといった強い役を作る可能性も低い（バックドア・ストレート・ドローやバックドア・フラッシュ・ドローもありません）。ポットには250チップありますが、相手のプレイヤー2（ID: 2）とプレイヤー4（ID: 4）がすでにベットしており、コールするには最低でも60チップ（プレイヤー1のコール分）が必要で、さらに相手がレイズする可能性も高いです。現状では勝てる確率が非常に低いため、これ以上のチップを失わないようにフォールドするのが最善です。"
}
```
2025-10-31 18:44:58,676 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:44:58,676 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "フロップ（コミュニティカードが開かれた後）で、私の手札（4♦, 5♥）は、コミュニティカード（Q♦, A♣, K♥）と何もペアになっておらず、ストレートやフラッシュといった強い役を作る可能性も低い（バックドア・ストレート・ドローやバックドア・フラッシュ・ドローもありません）。ポットには250チップありますが、相手のプレイヤー2（ID: 2）とプレイヤー4（ID: 4）がすでにベットしており、コールするには最低でも60チップ（プレイヤー1のコール分）が必要で、さらに相手がレイズする可能性も高いです。現状では勝てる確率が非常に低いため、これ以上のチップを失わないようにフォールドするのが最善です。"\n}\n```'
2025-10-31 18:44:58,676 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:44:58,676 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "フロップ（コミュニティカードが開かれた後）で、私の手札（4♦, 5♥）は、コミュニティカード（Q♦, A♣, K♥）と何もペアになっておらず、ストレートやフラッシュといった強い役を作る可能性も低い（バックドア・ストレート・ドローやバックドア・フラッシュ・ドローもありません）。ポットには250チップありますが、相手のプレイヤー2（ID: 2）とプレイヤー4（ID: 4）がすでにベットしており、コールするには最低でも60チップ（プレイヤー1のコール分）が必要で、さらに相手がレイズする可能性も高いです。現状では勝てる確率が非常に低いため、これ以上のチップを失わないようにフォールドするのが最善です。"\n}'
2025-10-31 18:44:58,676 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "フロップ（コミュニティカードが開かれた後）で、私の手札（4♦, 5♥）は、コミュニティカード（Q♦, A♣, K♥）と何もペアになっておらず、ストレートやフラッシュといった強い役を作る可能性も低い（バックドア・ストレート・ドローやバックドア・フラッシュ・ドローもありません）。ポットには250チップありますが、相手のプレイヤー2（ID: 2）とプレイヤー4（ID: 4）がすでにベットしており、コールするには最低でも60チップ（プレイヤー1のコール分）が必要で、さらに相手がレイズする可能性も高いです。現状では勝てる確率が非常に低いため、これ以上のチップを失わないようにフォールドするのが最善です。"
}
2025-10-31 18:44:58,677 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'フロップ（コミュニティカードが開かれた後）で、私の手札（4♦, 5♥）は、コミュニティカード（Q♦, A♣, K♥）と何もペアになっておらず、ストレートやフラッシュといった強い役を作る可能性も低い（バックドア・ストレート・ドローやバックドア・フラッシュ・ドローもありません）。ポットには250チップありますが、相手のプレイヤー2（ID: 2）とプレイヤー4（ID: 4）がすでにベットしており、コールするには最低でも60チップ（プレイヤー1のコール分）が必要で、さらに相手がレイズする可能性も高いです。現状では勝てる確率が非常に低いため、これ以上のチップを失わないようにフォールドするのが最善です。'}
2025-10-31 18:44:58,677 - poker_game - DEBUG - [Agent1] Extracted values - action: 'fold', amount: 0
2025-10-31 18:44:58,677 - poker_game - DEBUG - [Agent1] Action 'fold' normalized - amount set to 0
2025-10-31 18:44:58,677 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:44:58,677 - poker_game - INFO - [Agent1] Successfully parsed decision: fold, 0, フロップ（コミュニティカードが開かれた後）で、私の手札（4♦, 5♥）は、コミュニティカード（Q♦, A♣, K♥）と何もペアになっておらず、ストレートやフラッシュといった強い役を作る可能性も低い（バックドア・ストレート・ドローやバックドア・フラッシュ・ドローもありません）。ポットには250チップありますが、相手のプレイヤー2（ID: 2）とプレイヤー4（ID: 4）がすでにベットしており、コールするには最低でも60チップ（プレイヤー1のコール分）が必要で、さらに相手がレイズする可能性も高いです。現状では勝てる確率が非常に低いため、これ以上のチップを失わないようにフォールドするのが最善です。
2025-10-31 18:44:58,678 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'fold' with amount 0
2025-10-31 18:44:58,678 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:44:58,679 - poker_game - INFO - Hand #1, Phase: flop
2025-10-31 18:44:58,679 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:44:58,680 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:44:58,680 - poker_game - INFO - Last raiser: None
2025-10-31 18:44:58,681 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:58,681 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:44:58,681 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥']
2025-10-31 18:44:58,682 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:44:58,682 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=active
2025-10-31 18:44:58,683 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:44:58,683 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:58,683 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:44:58,684 - poker_game - INFO - ==================================================
2025-10-31 18:44:58,684 - poker_game - INFO - ACTION_EXECUTED: Player 1 folded
2025-10-31 18:44:58,698 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:44:58,699 - poker_game - INFO - Hand #1, Phase: flop
2025-10-31 18:44:58,699 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:44:58,700 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:44:58,700 - poker_game - INFO - Last raiser: None
2025-10-31 18:44:58,701 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:58,701 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:44:58,702 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥']
2025-10-31 18:44:58,702 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:44:58,703 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:44:58,703 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:44:58,703 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:58,704 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:44:58,704 - poker_game - INFO - Extra: Action: Player 1 folded
2025-10-31 18:44:58,704 - poker_game - INFO - ==================================================
2025-10-31 18:44:58,705 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:44:58,705 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:44:58,705 - poker_game - DEBUG - Active players: [2, 4]
2025-10-31 18:44:58,705 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:44:58,706 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:44:58,706 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:44:58,706 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:44:58,707 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:44:58,707 - poker_game - DEBUG - Active player indices: [2, 4]
2025-10-31 18:44:58,707 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:44:58,707 - poker_game - DEBUG - Current player index: 2
2025-10-31 18:44:58,707 - poker_game - DEBUG - First actor index: 2
2025-10-31 18:44:58,708 - poker_game - INFO - Betting complete: Back to first actor 2 (all players have acted)
2025-10-31 18:44:58,708 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:44:58,709 - poker_game - INFO - Hand #1, Phase: flop
2025-10-31 18:44:58,709 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:44:58,709 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:44:58,710 - poker_game - INFO - Last raiser: None
2025-10-31 18:44:58,710 - poker_game - INFO - Betting round complete: True
2025-10-31 18:44:58,710 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:44:58,711 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥']
2025-10-31 18:44:58,711 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:44:58,712 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:44:58,712 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:44:58,713 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:58,713 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:44:58,714 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:44:58,714 - poker_game - INFO - ==================================================
2025-10-31 18:44:58,818 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:44:58,819 - poker_game - INFO - Betting round complete: True
2025-10-31 18:44:58,819 - poker_game - INFO - Remaining players: 2
2025-10-31 18:44:58,820 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:44:58,820 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:44:58,820 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 18:44:58,831 - poker_game - INFO - Starting new betting round
2025-10-31 18:44:58,832 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:44:58,833 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:44:58,833 - poker_game - DEBUG - Active players for new betting round: [2, 4]
2025-10-31 18:44:58,833 - poker_game - DEBUG - Dealer button: 4
2025-10-31 18:44:58,834 - poker_game - INFO - First actor: Player 2 (by phase rule), was 2
2025-10-31 18:44:58,834 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:44:58,835 - poker_game - INFO - Hand #1, Phase: turn
2025-10-31 18:44:58,836 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:44:58,836 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:44:58,837 - poker_game - INFO - Last raiser: None
2025-10-31 18:44:58,837 - poker_game - INFO - Betting round complete: False
2025-10-31 18:44:58,837 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:44:58,838 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠']
2025-10-31 18:44:58,839 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:44:58,839 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:44:58,839 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:44:58,840 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:44:58,840 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:44:58,840 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 18:44:58,840 - poker_game - INFO - ==================================================
2025-10-31 18:44:58,841 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "turn",
  "your_cards": [
    "9♣",
    "A♠"
  ],
  "community": [
    "Q♦",
    "A♣",
    "K♥",
    "7♠"
  ],
  "your_chips": 1920,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 250,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1920)"
  ],
  "history": [
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 raised to 80",
    "Player 3 folded",
    "Player 4 called 80",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: Q♦, A♣, K♥",
    "Player 1 folded",
    "Turn dealt: 7♠"
  ]
}
2025-10-31 18:44:58,853 - poker_game - DEBUG - Create Session: {'id': '3aa9bd04-03ed-4d45-90a8-6e068fcdbe08', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761903898.8499758}
2025-10-31 18:45:01,059 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "この状況では、あなたの手札はAペア（A♣とA♠）で、ボードのQ♦、A♣、K♥、7♠と合わせて非常に強いハンド（スリーカード）です。しかし、対戦相手は一人（プレイヤー4）で、そのプレイヤーはすでにフロップ（最初の3枚のコミュニティカード）でコールしており、ターン（4枚目のコミュニティカード）でもまだアクションを起こしていません。ポットは250で、コール額は0なので、チェックをして相手のアクションを見るのが最善です。もし相手がベットしてきたら、その額に応じてレイズするかどうかを判断します。現時点では、相手がより良いハンドを持っている可能性は低いですが、完全に排除することはできません。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 185, 'promptTokenCount': 758, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 758}], 'totalTokenCount': 943}, 'invocationId': 'e-76bded03-06fa-4cf4-aade-abfabb9c9df6', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'ytz8sSAo', 'timestamp': 1761903898.867171}]
2025-10-31 18:45:01,060 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:45:01,060 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "この状況では、あなたの手札はAペア（A♣とA♠）で、ボードのQ♦、A♣、K♥、7♠と合わせて非常に強いハンド（スリーカード）です。しかし、対戦相手は一人（プレイヤー4）で、そのプレイヤーはすでにフロップ（最初の3枚のコミュニティカード）でコールしており、ターン（4枚目のコミュニティカード）でもまだアクションを起こしていません。ポットは250で、コール額は0なので、チェックをして相手のアクションを見るのが最善です。もし相手がベットしてきたら、その額に応じてレイズするかどうかを判断します。現時点では、相手がより良いハンドを持っている可能性は低いですが、完全に排除することはできません。"
}
```
2025-10-31 18:45:01,061 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:45:01,061 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "この状況では、あなたの手札はAペア（A♣とA♠）で、ボードのQ♦、A♣、K♥、7♠と合わせて非常に強いハンド（スリーカード）です。しかし、対戦相手は一人（プレイヤー4）で、そのプレイヤーはすでにフロップ（最初の3枚のコミュニティカード）でコールしており、ターン（4枚目のコミュニティカード）でもまだアクションを起こしていません。ポットは250で、コール額は0なので、チェックをして相手のアクションを見るのが最善です。もし相手がベットしてきたら、その額に応じてレイズするかどうかを判断します。現時点では、相手がより良いハンドを持っている可能性は低いですが、完全に排除することはできません。"\n}\n```'
2025-10-31 18:45:01,061 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:45:01,062 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "この状況では、あなたの手札はAペア（A♣とA♠）で、ボードのQ♦、A♣、K♥、7♠と合わせて非常に強いハンド（スリーカード）です。しかし、対戦相手は一人（プレイヤー4）で、そのプレイヤーはすでにフロップ（最初の3枚のコミュニティカード）でコールしており、ターン（4枚目のコミュニティカード）でもまだアクションを起こしていません。ポットは250で、コール額は0なので、チェックをして相手のアクションを見るのが最善です。もし相手がベットしてきたら、その額に応じてレイズするかどうかを判断します。現時点では、相手がより良いハンドを持っている可能性は低いですが、完全に排除することはできません。"\n}'
2025-10-31 18:45:01,062 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "この状況では、あなたの手札はAペア（A♣とA♠）で、ボードのQ♦、A♣、K♥、7♠と合わせて非常に強いハンド（スリーカード）です。しかし、対戦相手は一人（プレイヤー4）で、そのプレイヤーはすでにフロップ（最初の3枚のコミュニティカード）でコールしており、ターン（4枚目のコミュニティカード）でもまだアクションを起こしていません。ポットは250で、コール額は0なので、チェックをして相手のアクションを見るのが最善です。もし相手がベットしてきたら、その額に応じてレイズするかどうかを判断します。現時点では、相手がより良いハンドを持っている可能性は低いですが、完全に排除することはできません。"
}
2025-10-31 18:45:01,062 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'この状況では、あなたの手札はAペア（A♣とA♠）で、ボードのQ♦、A♣、K♥、7♠と合わせて非常に強いハンド（スリーカード）です。しかし、対戦相手は一人（プレイヤー4）で、そのプレイヤーはすでにフロップ（最初の3枚のコミュニティカード）でコールしており、ターン（4枚目のコミュニティカード）でもまだアクションを起こしていません。ポットは250で、コール額は0なので、チェックをして相手のアクションを見るのが最善です。もし相手がベットしてきたら、その額に応じてレイズするかどうかを判断します。現時点では、相手がより良いハンドを持っている可能性は低いですが、完全に排除することはできません。'}
2025-10-31 18:45:01,063 - poker_game - DEBUG - [Agent2] Extracted values - action: 'check', amount: 0
2025-10-31 18:45:01,063 - poker_game - DEBUG - [Agent2] Action 'check' normalized - amount set to 0
2025-10-31 18:45:01,063 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:45:01,063 - poker_game - INFO - [Agent2] Successfully parsed decision: check, 0, この状況では、あなたの手札はAペア（A♣とA♠）で、ボードのQ♦、A♣、K♥、7♠と合わせて非常に強いハンド（スリーカード）です。しかし、対戦相手は一人（プレイヤー4）で、そのプレイヤーはすでにフロップ（最初の3枚のコミュニティカード）でコールしており、ターン（4枚目のコミュニティカード）でもまだアクションを起こしていません。ポットは250で、コール額は0なので、チェックをして相手のアクションを見るのが最善です。もし相手がベットしてきたら、その額に応じてレイズするかどうかを判断します。現時点では、相手がより良いハンドを持っている可能性は低いですが、完全に排除することはできません。
2025-10-31 18:45:01,065 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'check' with amount 0
2025-10-31 18:45:01,065 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:45:01,066 - poker_game - INFO - Hand #1, Phase: turn
2025-10-31 18:45:01,066 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:45:01,066 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:45:01,067 - poker_game - INFO - Last raiser: None
2025-10-31 18:45:01,068 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:01,069 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:01,069 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠']
2025-10-31 18:45:01,069 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:01,070 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:45:01,070 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:45:01,071 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:01,071 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:01,072 - poker_game - INFO - ==================================================
2025-10-31 18:45:01,072 - poker_game - INFO - ACTION_EXECUTED: Player 2 checked
2025-10-31 18:45:01,083 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:45:01,084 - poker_game - INFO - Hand #1, Phase: turn
2025-10-31 18:45:01,084 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:45:01,085 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:45:01,085 - poker_game - INFO - Last raiser: None
2025-10-31 18:45:01,085 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:01,086 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:01,086 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠']
2025-10-31 18:45:01,087 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:01,087 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:45:01,088 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:45:01,088 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:01,088 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:01,089 - poker_game - INFO - Extra: Action: Player 2 checked
2025-10-31 18:45:01,089 - poker_game - INFO - ==================================================
2025-10-31 18:45:01,090 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:45:01,090 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:45:01,090 - poker_game - DEBUG - Active players: [2, 4]
2025-10-31 18:45:01,090 - poker_game - INFO - Advanced from player 2 to player 4 (seat order)
2025-10-31 18:45:01,091 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:45:01,091 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:45:01,091 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:45:01,091 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:45:01,092 - poker_game - DEBUG - Active player indices: [2, 4]
2025-10-31 18:45:01,092 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:45:01,092 - poker_game - DEBUG - Current player index: 4
2025-10-31 18:45:01,092 - poker_game - DEBUG - First actor index: 2
2025-10-31 18:45:01,093 - poker_game - DEBUG - Betting continues: Current player 4 != first actor 2
2025-10-31 18:45:01,093 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:45:01,093 - poker_game - INFO - Hand #1, Phase: turn
2025-10-31 18:45:01,093 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:45:01,093 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:45:01,093 - poker_game - INFO - Last raiser: None
2025-10-31 18:45:01,094 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:01,094 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:01,095 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠']
2025-10-31 18:45:01,095 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:01,095 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:45:01,095 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:45:01,096 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:01,096 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:01,096 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:45:01,097 - poker_game - INFO - ==================================================
2025-10-31 18:45:01,199 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "turn",
  "your_cards": [
    "10♥",
    "9♠"
  ],
  "community": [
    "Q♦",
    "A♣",
    "K♥",
    "7♠"
  ],
  "your_chips": 1920,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 250,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 1920,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1920)"
  ],
  "history": [
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 raised to 80",
    "Player 3 folded",
    "Player 4 called 80",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: Q♦, A♣, K♥",
    "Player 1 folded",
    "Turn dealt: 7♠",
    "Player 2 checked"
  ]
}
2025-10-31 18:45:01,261 - poker_game - DEBUG - Create Session: {'id': 'e7f27707-80e9-4a77-8de7-1895fc1bbb7b', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761903901.2581272}
2025-10-31 18:45:11,476 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:45:14,172 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_9q1dlXtLSovQjVs1b5bOgEx7', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1086, 'totalTokenCount': 1103}, 'invocationId': 'e-a7fa3c45-4b5d-4f2c-9ed4-38ff54504d93', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'S3rw1Dpj', 'timestamp': 1761903901.273402}, {'content': {'parts': [{'functionResponse': {'id': 'call_9q1dlXtLSovQjVs1b5bOgEx7', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-a7fa3c45-4b5d-4f2c-9ed4-38ff54504d93', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '8j3bqpdv', 'timestamp': 1761903902.31196}, {'content': {'parts': [{'functionCall': {'id': 'call_1WRuxkQFGYPg7udkOBhnhgtF', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1610, 'totalTokenCount': 1630}, 'invocationId': 'e-a7fa3c45-4b5d-4f2c-9ed4-38ff54504d93', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'OiCPG8yw', 'timestamp': 1761903902.316385}, {'content': {'parts': [{'functionResponse': {'id': 'call_1WRuxkQFGYPg7udkOBhnhgtF', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-a7fa3c45-4b5d-4f2c-9ed4-38ff54504d93', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'RehjGLLh', 'timestamp': 1761903904.186202}, {'content': {'parts': [{'functionCall': {'id': 'call_JXxjMIK7cHZCWMS20qXKhvhb', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1172, 'totalTokenCount': 1189}, 'invocationId': 'e-a7fa3c45-4b5d-4f2c-9ed4-38ff54504d93', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'jN322yX3', 'timestamp': 1761903904.190417}, {'content': {'parts': [{'functionResponse': {'id': 'call_JXxjMIK7cHZCWMS20qXKhvhb', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-a7fa3c45-4b5d-4f2c-9ed4-38ff54504d93', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'OrokOJDA', 'timestamp': 1761903905.156767}, {'content': {'parts': [{'functionCall': {'id': 'call_Bw2B7pBGyMGftLfWaLOwevcn', 'args': {'game_state': {'your_id': 4, 'phase': 'turn', 'your_cards': ['10♥', '9♠'], 'community': ['Q♦', 'A♣', 'K♥', '7♠'], 'your_chips': 1920, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 80, 'pot': 250, 'to_call': 0, 'dealer_button': 4, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1990, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 1920, 'bet': 0, 'status': 'folded'}, {'id': 2, 'chips': 1920, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 2000, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (1920)'], 'history': ['Player 0 posted small blind 10', 'Player 1 posted big blind 20', 'Player 2 raised to 80', 'Player 3 folded', 'Player 4 called 80', 'Player 0 folded', 'Player 1 called 60', 'Flop dealt: Q♦, A♣, K♥', 'Player 1 folded', 'Turn dealt: 7♠', 'Player 2 checked']}, 'call_amount': 0, 'pot_after_call': 250, 'equity': 0.2}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 293, 'promptTokenCount': 1702, 'totalTokenCount': 1995}, 'invocationId': 'e-a7fa3c45-4b5d-4f2c-9ed4-38ff54504d93', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '3YiPxO9u', 'timestamp': 1761903905.162853}, {'content': {'parts': [{'functionResponse': {'id': 'call_Bw2B7pBGyMGftLfWaLOwevcn', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（50.00(ポットに対して20.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'e-a7fa3c45-4b5d-4f2c-9ed4-38ff54504d93', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'qOjNVOlH', 'timestamp': 1761903912.140402}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い（50.00(ポットに対して20.00%）ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 38, 'promptTokenCount': 2046, 'totalTokenCount': 2084}, 'invocationId': 'e-a7fa3c45-4b5d-4f2c-9ed4-38ff54504d93', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'QU3T5nsW', 'timestamp': 1761903912.142741}]
2025-10-31 18:45:14,172 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:45:14,172 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い（50.00(ポットに対して20.00%）ため、チェックします"}
2025-10-31 18:45:14,173 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:45:14,173 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い（50.00(ポットに対して20.00%）ため、チェックします"}'
2025-10-31 18:45:14,173 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:45:14,173 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い（50.00(ポットに対して20.00%）ため、チェックします"}
2025-10-31 18:45:14,173 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（50.00(ポットに対して20.00%）ため、チェックします'}
2025-10-31 18:45:14,173 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 18:45:14,173 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 18:45:14,173 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:45:14,173 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い（50.00(ポットに対して20.00%）ため、チェックします
2025-10-31 18:45:14,174 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 18:45:14,174 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:45:14,174 - poker_game - INFO - Hand #1, Phase: turn
2025-10-31 18:45:14,175 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:45:14,175 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:45:14,175 - poker_game - INFO - Last raiser: None
2025-10-31 18:45:14,175 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:14,175 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:14,175 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠']
2025-10-31 18:45:14,175 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:14,176 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:45:14,176 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:45:14,176 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:14,176 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:14,176 - poker_game - INFO - ==================================================
2025-10-31 18:45:14,176 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 18:45:14,189 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:45:14,190 - poker_game - INFO - Hand #1, Phase: turn
2025-10-31 18:45:14,190 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:45:14,190 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:45:14,191 - poker_game - INFO - Last raiser: None
2025-10-31 18:45:14,191 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:14,191 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:14,191 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠']
2025-10-31 18:45:14,192 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:14,192 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:45:14,192 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:45:14,192 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:14,192 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:14,193 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 18:45:14,193 - poker_game - INFO - ==================================================
2025-10-31 18:45:14,193 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:45:14,193 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:45:14,193 - poker_game - DEBUG - Active players: [2, 4]
2025-10-31 18:45:14,194 - poker_game - INFO - Advanced from player 4 to player 2 (seat order)
2025-10-31 18:45:14,194 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:45:14,194 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:45:14,194 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:45:14,194 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:45:14,194 - poker_game - DEBUG - Active player indices: [2, 4]
2025-10-31 18:45:14,195 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:45:14,195 - poker_game - DEBUG - Current player index: 2
2025-10-31 18:45:14,195 - poker_game - DEBUG - First actor index: 2
2025-10-31 18:45:14,195 - poker_game - INFO - Betting complete: Back to first actor 2 (all players have acted)
2025-10-31 18:45:14,195 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:45:14,195 - poker_game - INFO - Hand #1, Phase: turn
2025-10-31 18:45:14,196 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:45:14,196 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:45:14,196 - poker_game - INFO - Last raiser: None
2025-10-31 18:45:14,196 - poker_game - INFO - Betting round complete: True
2025-10-31 18:45:14,196 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:14,196 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠']
2025-10-31 18:45:14,197 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:14,197 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:45:14,197 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:45:14,198 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:14,198 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:14,198 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:45:14,198 - poker_game - INFO - ==================================================
2025-10-31 18:45:14,300 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 18:45:14,302 - poker_game - INFO - Betting round complete: True
2025-10-31 18:45:14,303 - poker_game - INFO - Remaining players: 2
2025-10-31 18:45:14,305 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:45:14,305 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:45:14,305 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 18:45:14,317 - poker_game - INFO - Starting new betting round
2025-10-31 18:45:14,318 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:45:14,318 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:45:14,319 - poker_game - DEBUG - Active players for new betting round: [2, 4]
2025-10-31 18:45:14,319 - poker_game - DEBUG - Dealer button: 4
2025-10-31 18:45:14,319 - poker_game - INFO - First actor: Player 2 (by phase rule), was 2
2025-10-31 18:45:14,319 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:45:14,320 - poker_game - INFO - Hand #1, Phase: river
2025-10-31 18:45:14,320 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:45:14,321 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:45:14,321 - poker_game - INFO - Last raiser: None
2025-10-31 18:45:14,322 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:14,322 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:14,322 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠', '8♥']
2025-10-31 18:45:14,324 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:14,325 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:45:14,325 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:45:14,325 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:14,326 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:14,326 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 18:45:14,327 - poker_game - INFO - ==================================================
2025-10-31 18:45:14,328 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "river",
  "your_cards": [
    "9♣",
    "A♠"
  ],
  "community": [
    "Q♦",
    "A♣",
    "K♥",
    "7♠",
    "8♥"
  ],
  "your_chips": 1920,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 250,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1920)"
  ],
  "history": [
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 raised to 80",
    "Player 3 folded",
    "Player 4 called 80",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: Q♦, A♣, K♥",
    "Player 1 folded",
    "Turn dealt: 7♠",
    "Player 2 checked",
    "Player 4 checked",
    "River dealt: 8♥"
  ]
}
2025-10-31 18:45:14,341 - poker_game - DEBUG - Create Session: {'id': '8e186777-add8-458b-93a1-e4d077e53e3e', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761903914.33833}
2025-10-31 18:45:17,111 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、あなたの手札はA♠ 9♣、コミュニティカードはQ♦ A♣ K♥ 7♠ 8♥です。これであなたのハンドはAハイ（エースが一番強いカード）ですが、コミュニティカードにはQ、K、8があり、相手もエースを持っている可能性があります。しかし、これまでの履歴を見ると、相手（Player 4）はプリフロップ（最初のカードが開かれる前）でレイズ（ベット額を上げる）した後、フロップ（最初の3枚のカードが開かれる）でチェックし、ターン（4枚目のカードが開かれる）でもチェックしています。これは、相手が強いハンドを持っていないか、またはブラフ（はったり）をしている可能性を示唆します。あなたもチェックしているので、ショーダウン（手札を開けて勝者を決める）に進みます。相手がベットしてきた場合、そのベット額を見てコールするかフォールドするか判断します。現時点では、追加でベットするメリットは低いと判断し、チェックを選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 243, 'promptTokenCount': 790, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 790}], 'totalTokenCount': 1033}, 'invocationId': 'e-4c9a2002-bbe2-497b-9d3d-9072524759b1', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '18WEumuo', 'timestamp': 1761903914.354331}]
2025-10-31 18:45:17,111 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:45:17,112 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ストリート）で、あなたの手札はA♠ 9♣、コミュニティカードはQ♦ A♣ K♥ 7♠ 8♥です。これであなたのハンドはAハイ（エースが一番強いカード）ですが、コミュニティカードにはQ、K、8があり、相手もエースを持っている可能性があります。しかし、これまでの履歴を見ると、相手（Player 4）はプリフロップ（最初のカードが開かれる前）でレイズ（ベット額を上げる）した後、フロップ（最初の3枚のカードが開かれる）でチェックし、ターン（4枚目のカードが開かれる）でもチェックしています。これは、相手が強いハンドを持っていないか、またはブラフ（はったり）をしている可能性を示唆します。あなたもチェックしているので、ショーダウン（手札を開けて勝者を決める）に進みます。相手がベットしてきた場合、そのベット額を見てコールするかフォールドするか判断します。現時点では、追加でベットするメリットは低いと判断し、チェックを選択します。"
}
```
2025-10-31 18:45:17,112 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:45:17,112 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、あなたの手札はA♠ 9♣、コミュニティカードはQ♦ A♣ K♥ 7♠ 8♥です。これであなたのハンドはAハイ（エースが一番強いカード）ですが、コミュニティカードにはQ、K、8があり、相手もエースを持っている可能性があります。しかし、これまでの履歴を見ると、相手（Player 4）はプリフロップ（最初のカードが開かれる前）でレイズ（ベット額を上げる）した後、フロップ（最初の3枚のカードが開かれる）でチェックし、ターン（4枚目のカードが開かれる）でもチェックしています。これは、相手が強いハンドを持っていないか、またはブラフ（はったり）をしている可能性を示唆します。あなたもチェックしているので、ショーダウン（手札を開けて勝者を決める）に進みます。相手がベットしてきた場合、そのベット額を見てコールするかフォールドするか判断します。現時点では、追加でベットするメリットは低いと判断し、チェックを選択します。"\n}\n```'
2025-10-31 18:45:17,112 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:45:17,112 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、あなたの手札はA♠ 9♣、コミュニティカードはQ♦ A♣ K♥ 7♠ 8♥です。これであなたのハンドはAハイ（エースが一番強いカード）ですが、コミュニティカードにはQ、K、8があり、相手もエースを持っている可能性があります。しかし、これまでの履歴を見ると、相手（Player 4）はプリフロップ（最初のカードが開かれる前）でレイズ（ベット額を上げる）した後、フロップ（最初の3枚のカードが開かれる）でチェックし、ターン（4枚目のカードが開かれる）でもチェックしています。これは、相手が強いハンドを持っていないか、またはブラフ（はったり）をしている可能性を示唆します。あなたもチェックしているので、ショーダウン（手札を開けて勝者を決める）に進みます。相手がベットしてきた場合、そのベット額を見てコールするかフォールドするか判断します。現時点では、追加でベットするメリットは低いと判断し、チェックを選択します。"\n}'
2025-10-31 18:45:17,112 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ストリート）で、あなたの手札はA♠ 9♣、コミュニティカードはQ♦ A♣ K♥ 7♠ 8♥です。これであなたのハンドはAハイ（エースが一番強いカード）ですが、コミュニティカードにはQ、K、8があり、相手もエースを持っている可能性があります。しかし、これまでの履歴を見ると、相手（Player 4）はプリフロップ（最初のカードが開かれる前）でレイズ（ベット額を上げる）した後、フロップ（最初の3枚のカードが開かれる）でチェックし、ターン（4枚目のカードが開かれる）でもチェックしています。これは、相手が強いハンドを持っていないか、またはブラフ（はったり）をしている可能性を示唆します。あなたもチェックしているので、ショーダウン（手札を開けて勝者を決める）に進みます。相手がベットしてきた場合、そのベット額を見てコールするかフォールドするか判断します。現時点では、追加でベットするメリットは低いと判断し、チェックを選択します。"
}
2025-10-31 18:45:17,112 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最終ストリート）で、あなたの手札はA♠ 9♣、コミュニティカードはQ♦ A♣ K♥ 7♠ 8♥です。これであなたのハンドはAハイ（エースが一番強いカード）ですが、コミュニティカードにはQ、K、8があり、相手もエースを持っている可能性があります。しかし、これまでの履歴を見ると、相手（Player 4）はプリフロップ（最初のカードが開かれる前）でレイズ（ベット額を上げる）した後、フロップ（最初の3枚のカードが開かれる）でチェックし、ターン（4枚目のカードが開かれる）でもチェックしています。これは、相手が強いハンドを持っていないか、またはブラフ（はったり）をしている可能性を示唆します。あなたもチェックしているので、ショーダウン（手札を開けて勝者を決める）に進みます。相手がベットしてきた場合、そのベット額を見てコールするかフォールドするか判断します。現時点では、追加でベットするメリットは低いと判断し、チェックを選択します。'}
2025-10-31 18:45:17,113 - poker_game - DEBUG - [Agent2] Extracted values - action: 'check', amount: 0
2025-10-31 18:45:17,113 - poker_game - DEBUG - [Agent2] Action 'check' normalized - amount set to 0
2025-10-31 18:45:17,113 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:45:17,113 - poker_game - INFO - [Agent2] Successfully parsed decision: check, 0, リバー（最終ストリート）で、あなたの手札はA♠ 9♣、コミュニティカードはQ♦ A♣ K♥ 7♠ 8♥です。これであなたのハンドはAハイ（エースが一番強いカード）ですが、コミュニティカードにはQ、K、8があり、相手もエースを持っている可能性があります。しかし、これまでの履歴を見ると、相手（Player 4）はプリフロップ（最初のカードが開かれる前）でレイズ（ベット額を上げる）した後、フロップ（最初の3枚のカードが開かれる）でチェックし、ターン（4枚目のカードが開かれる）でもチェックしています。これは、相手が強いハンドを持っていないか、またはブラフ（はったり）をしている可能性を示唆します。あなたもチェックしているので、ショーダウン（手札を開けて勝者を決める）に進みます。相手がベットしてきた場合、そのベット額を見てコールするかフォールドするか判断します。現時点では、追加でベットするメリットは低いと判断し、チェックを選択します。
2025-10-31 18:45:17,113 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'check' with amount 0
2025-10-31 18:45:17,114 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:45:17,114 - poker_game - INFO - Hand #1, Phase: river
2025-10-31 18:45:17,114 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:45:17,114 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:45:17,114 - poker_game - INFO - Last raiser: None
2025-10-31 18:45:17,115 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:17,115 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:17,115 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠', '8♥']
2025-10-31 18:45:17,115 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:17,115 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:45:17,115 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:45:17,115 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:17,115 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:17,115 - poker_game - INFO - ==================================================
2025-10-31 18:45:17,115 - poker_game - INFO - ACTION_EXECUTED: Player 2 checked
2025-10-31 18:45:17,126 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:45:17,126 - poker_game - INFO - Hand #1, Phase: river
2025-10-31 18:45:17,126 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:45:17,126 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:45:17,127 - poker_game - INFO - Last raiser: None
2025-10-31 18:45:17,127 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:17,127 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:17,127 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠', '8♥']
2025-10-31 18:45:17,128 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:17,128 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:45:17,128 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:45:17,128 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:17,128 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:17,128 - poker_game - INFO - Extra: Action: Player 2 checked
2025-10-31 18:45:17,129 - poker_game - INFO - ==================================================
2025-10-31 18:45:17,129 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:45:17,129 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:45:17,129 - poker_game - DEBUG - Active players: [2, 4]
2025-10-31 18:45:17,129 - poker_game - INFO - Advanced from player 2 to player 4 (seat order)
2025-10-31 18:45:17,129 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:45:17,130 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:45:17,130 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:45:17,130 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:45:17,130 - poker_game - DEBUG - Active player indices: [2, 4]
2025-10-31 18:45:17,130 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:45:17,130 - poker_game - DEBUG - Current player index: 4
2025-10-31 18:45:17,130 - poker_game - DEBUG - First actor index: 2
2025-10-31 18:45:17,130 - poker_game - DEBUG - Betting continues: Current player 4 != first actor 2
2025-10-31 18:45:17,130 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:45:17,130 - poker_game - INFO - Hand #1, Phase: river
2025-10-31 18:45:17,131 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:45:17,131 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:45:17,131 - poker_game - INFO - Last raiser: None
2025-10-31 18:45:17,131 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:17,131 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:17,132 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠', '8♥']
2025-10-31 18:45:17,135 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:17,135 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:45:17,135 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:45:17,136 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:17,136 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:17,136 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:45:17,136 - poker_game - INFO - ==================================================
2025-10-31 18:45:17,237 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "river",
  "your_cards": [
    "10♥",
    "9♠"
  ],
  "community": [
    "Q♦",
    "A♣",
    "K♥",
    "7♠",
    "8♥"
  ],
  "your_chips": 1920,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 250,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 1920,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1920)"
  ],
  "history": [
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 raised to 80",
    "Player 3 folded",
    "Player 4 called 80",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: Q♦, A♣, K♥",
    "Player 1 folded",
    "Turn dealt: 7♠",
    "Player 2 checked",
    "Player 4 checked",
    "River dealt: 8♥",
    "Player 2 checked"
  ]
}
2025-10-31 18:45:17,252 - poker_game - DEBUG - Create Session: {'id': '34c206ac-e902-408f-a2d4-874adf53e95a', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761903917.2484043}
2025-10-31 18:45:26,633 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_jjMZ3AC8ncBUE52d1J2jmRcO', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1114, 'totalTokenCount': 1131}, 'invocationId': 'e-20183242-8bf2-4ef5-852a-5aa44d424962', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '3Ay6jiJk', 'timestamp': 1761903917.265444}, {'content': {'parts': [{'functionResponse': {'id': 'call_jjMZ3AC8ncBUE52d1J2jmRcO', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-20183242-8bf2-4ef5-852a-5aa44d424962', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'K9lmlqBM', 'timestamp': 1761903916.35717}, {'content': {'parts': [{'functionCall': {'id': 'call_9CeFytZjiddmnMGBkZVEaUFK', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1638, 'totalTokenCount': 1655}, 'invocationId': 'e-20183242-8bf2-4ef5-852a-5aa44d424962', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'tQrvL6ZE', 'timestamp': 1761903916.361909}, {'content': {'parts': [{'functionResponse': {'id': 'call_9CeFytZjiddmnMGBkZVEaUFK', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-20183242-8bf2-4ef5-852a-5aa44d424962', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'SISPWdqg', 'timestamp': 1761903917.450234}, {'content': {'parts': [{'functionCall': {'id': 'call_I7dqTNYPfrRPaBdLOB1qSriU', 'args': {'game_state': {'your_id': 4, 'phase': 'river', 'your_cards': ['10♥', '9♠'], 'community': ['Q♦', 'A♣', 'K♥', '7♠', '8♥'], 'your_chips': 1920, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 80, 'pot': 250, 'to_call': 0, 'dealer_button': 4, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1990, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 1920, 'bet': 0, 'status': 'folded'}, {'id': 2, 'chips': 1920, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 2000, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (1920)'], 'history': ['Player 0 posted small blind 10', 'Player 1 posted big blind 20', 'Player 2 raised to 80', 'Player 3 folded', 'Player 4 called 80', 'Player 0 folded', 'Player 1 called 60', 'Flop dealt: Q♦, A♣, K♥', 'Player 1 folded', 'Turn dealt: 7♠', 'Player 2 checked', 'Player 4 checked', 'River dealt: 8♥', 'Player 2 checked']}, 'call_amount': 0, 'pot_after_call': 250, 'equity': 0.5}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 329, 'promptTokenCount': 1669, 'totalTokenCount': 1998}, 'invocationId': 'e-20183242-8bf2-4ef5-852a-5aa44d424962', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'DT9NUHvn', 'timestamp': 1761903917.452518}, {'content': {'parts': [{'functionResponse': {'id': 'call_I7dqTNYPfrRPaBdLOB1qSriU', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（125.00(ポットに対して50.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'e-20183242-8bf2-4ef5-852a-5aa44d424962', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Sdv4iaC2', 'timestamp': 1761903924.890629}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い（125.00(ポットに対して50.00%）ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 38, 'promptTokenCount': 2033, 'totalTokenCount': 2071}, 'invocationId': 'e-20183242-8bf2-4ef5-852a-5aa44d424962', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'lE5Bc9Ir', 'timestamp': 1761903924.897846}]
2025-10-31 18:45:26,634 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:45:26,635 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い（125.00(ポットに対して50.00%）ため、チェックします"}
2025-10-31 18:45:26,635 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:45:26,636 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い（125.00(ポットに対して50.00%）ため、チェックします"}'
2025-10-31 18:45:26,636 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:45:26,636 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い（125.00(ポットに対して50.00%）ため、チェックします"}
2025-10-31 18:45:26,637 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（125.00(ポットに対して50.00%）ため、チェックします'}
2025-10-31 18:45:26,637 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 18:45:26,637 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 18:45:26,638 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:45:26,638 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い（125.00(ポットに対して50.00%）ため、チェックします
2025-10-31 18:45:26,644 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 18:45:26,651 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:45:26,651 - poker_game - INFO - Hand #1, Phase: river
2025-10-31 18:45:26,652 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:45:26,652 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:45:26,653 - poker_game - INFO - Last raiser: None
2025-10-31 18:45:26,653 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:26,653 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:26,654 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠', '8♥']
2025-10-31 18:45:26,654 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:26,654 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:45:26,655 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:45:26,655 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:26,656 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:26,656 - poker_game - INFO - ==================================================
2025-10-31 18:45:26,657 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 18:45:26,673 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:45:26,674 - poker_game - INFO - Hand #1, Phase: river
2025-10-31 18:45:26,675 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:45:26,675 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:45:26,676 - poker_game - INFO - Last raiser: None
2025-10-31 18:45:26,676 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:26,677 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:26,677 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠', '8♥']
2025-10-31 18:45:26,678 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:26,678 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:45:26,679 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:45:26,680 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:26,680 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:26,681 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 18:45:26,681 - poker_game - INFO - ==================================================
2025-10-31 18:45:26,682 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:45:26,682 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:45:26,682 - poker_game - DEBUG - Active players: [2, 4]
2025-10-31 18:45:26,683 - poker_game - INFO - Advanced from player 4 to player 2 (seat order)
2025-10-31 18:45:26,683 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:45:26,683 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:45:26,684 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:45:26,684 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:45:26,684 - poker_game - DEBUG - Active player indices: [2, 4]
2025-10-31 18:45:26,684 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:45:26,684 - poker_game - DEBUG - Current player index: 2
2025-10-31 18:45:26,685 - poker_game - DEBUG - First actor index: 2
2025-10-31 18:45:26,685 - poker_game - INFO - Betting complete: Back to first actor 2 (all players have acted)
2025-10-31 18:45:26,685 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:45:26,685 - poker_game - INFO - Hand #1, Phase: river
2025-10-31 18:45:26,686 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:45:26,686 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:45:26,687 - poker_game - INFO - Last raiser: None
2025-10-31 18:45:26,687 - poker_game - INFO - Betting round complete: True
2025-10-31 18:45:26,687 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:26,688 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠', '8♥']
2025-10-31 18:45:26,688 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:26,688 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:45:26,689 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:45:26,689 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:26,689 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:26,690 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:45:26,690 - poker_game - INFO - ==================================================
2025-10-31 18:45:26,791 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 18:45:26,791 - poker_game - INFO - Betting round complete: True
2025-10-31 18:45:26,792 - poker_game - INFO - Remaining players: 2
2025-10-31 18:45:26,792 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:45:26,793 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:45:26,793 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 18:45:26,794 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:45:26,794 - poker_game - INFO - Hand #1, Phase: showdown
2025-10-31 18:45:26,795 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:45:26,795 - poker_game - INFO - Pot: 250, Current bet: 0
2025-10-31 18:45:26,796 - poker_game - INFO - Last raiser: None
2025-10-31 18:45:26,796 - poker_game - INFO - Betting round complete: True
2025-10-31 18:45:26,797 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:26,797 - poker_game - INFO - Community cards: ['Q♦', 'A♣', 'K♥', '7♠', '8♥']
2025-10-31 18:45:26,798 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:26,799 - poker_game - INFO -   P1(Agent1): chips=1920, bet=0, status=folded
2025-10-31 18:45:26,799 - poker_game - INFO -   P2(Agent2): chips=1920, bet=0, status=active
2025-10-31 18:45:26,799 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:26,800 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:26,800 - poker_game - INFO - ==================================================
2025-10-31 18:45:26,801 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:45:26,801 - poker_game - INFO - Pot: 250, Community cards: ['Q♦', 'A♣', 'K♥', '7♠', '8♥']
2025-10-31 18:45:26,802 - poker_game - INFO -   Player 2 status=active cards=['9♣', 'A♠']
2025-10-31 18:45:26,802 - poker_game - INFO -   Player 4 status=active cards=['10♥', '9♠']
2025-10-31 18:45:26,805 - poker_game - INFO -   Player 2 hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣ cards=['9♣', 'A♠']
2025-10-31 18:45:26,805 - poker_game - INFO -   Player 4 hand=High Card: A♣ - A♣, K♥, Q♦, 10♥, 9♠ cards=['10♥', '9♠']
2025-10-31 18:45:26,806 - poker_game - INFO - Pot layer 0: amount=40, contributors=[0, 1, 2, 4]
2025-10-31 18:45:26,807 - poker_game - INFO - Pot layer 1: amount=210, contributors=[1, 2, 4]
2025-10-31 18:45:26,808 - poker_game - INFO - Showdown total awarded: 250 (game.pot=250)
2025-10-31 18:45:26,808 - poker_game - INFO - Showdown winners (aggregated): [2]
2025-10-31 18:45:26,809 - poker_game - INFO -   Awarded 250 to Player 2 (hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣)
2025-10-31 18:45:26,809 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:45:26,835 - poker_game - INFO - === STARTING NEW HAND #2 ===
2025-10-31 18:45:26,836 - poker_game - INFO - Active players for new hand: 5
2025-10-31 18:45:26,837 - poker_game - INFO - Moving dealer button
2025-10-31 18:45:26,837 - poker_game - INFO - Posting blinds
2025-10-31 18:45:26,854 - poker_game - INFO - Dealing hole cards
2025-10-31 18:45:26,855 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:45:26,862 - poker_game - INFO - Started new hand in database: hand_id=2
2025-10-31 18:45:26,862 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:45:26,863 - poker_game - INFO - Hand #2, Phase: preflop
2025-10-31 18:45:26,863 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:45:26,864 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:26,864 - poker_game - INFO - Last raiser: 2
2025-10-31 18:45:26,865 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:26,865 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:45:26,866 - poker_game - INFO - Community cards: []
2025-10-31 18:45:26,866 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:45:26,867 - poker_game - INFO -   P1(Agent1): chips=1910, bet=10, status=active
2025-10-31 18:45:26,867 - poker_game - INFO -   P2(Agent2): chips=2150, bet=20, status=active
2025-10-31 18:45:26,867 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=active
2025-10-31 18:45:26,868 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:26,868 - poker_game - INFO - ==================================================
2025-10-31 18:45:26,869 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "5♦",
    "4♦"
  ],
  "community": [],
  "your_chips": 2000,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1910,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2150,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (2000)"
  ],
  "history": [
    "Player 1 posted big blind 20",
    "Player 2 raised to 80",
    "Player 3 folded",
    "Player 4 called 80",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: Q♦, A♣, K♥",
    "Player 1 folded",
    "Turn dealt: 7♠",
    "Player 2 checked",
    "Player 4 checked",
    "River dealt: 8♥",
    "Player 2 checked",
    "Player 4 checked",
    "Showdown: Player 2 hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣ cards=9♣, A♠",
    "Showdown: Player 4 hand=High Card: A♣ - A♣, K♥, Q♦, 10♥, 9♠ cards=10♥, 9♠",
    "Side pot layer 0: amount=40, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20"
  ]
}
2025-10-31 18:45:26,878 - poker_game - DEBUG - Create Session: {'id': '521dfe80-e0e2-43e1-a8e5-16dd3c375a8e', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761903926.8765697}
2025-10-31 18:45:28,096 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで5♦4♦というハンドは非常に弱いため、フォールドします。ポットにはすでに多くのベットが入っており、コールするにはコストが高すぎます。また、対戦相手のレイズ額も大きいため、勝てる可能性は低いです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 85, 'promptTokenCount': 959, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 959}], 'totalTokenCount': 1044}, 'invocationId': 'e-9f58016f-4385-4897-9f5b-f60fa9a79d50', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '2jRq4XrM', 'timestamp': 1761903926.888904}]
2025-10-31 18:45:28,097 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:45:28,098 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで5♦4♦というハンドは非常に弱いため、フォールドします。ポットにはすでに多くのベットが入っており、コールするにはコストが高すぎます。また、対戦相手のレイズ額も大きいため、勝てる可能性は低いです。"
}
```
2025-10-31 18:45:28,098 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:45:28,098 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで5♦4♦というハンドは非常に弱いため、フォールドします。ポットにはすでに多くのベットが入っており、コールするにはコストが高すぎます。また、対戦相手のレイズ額も大きいため、勝てる可能性は低いです。"\n}\n```'
2025-10-31 18:45:28,099 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:45:28,099 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで5♦4♦というハンドは非常に弱いため、フォールドします。ポットにはすでに多くのベットが入っており、コールするにはコストが高すぎます。また、対戦相手のレイズ額も大きいため、勝てる可能性は低いです。"\n}'
2025-10-31 18:45:28,099 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで5♦4♦というハンドは非常に弱いため、フォールドします。ポットにはすでに多くのベットが入っており、コールするにはコストが高すぎます。また、対戦相手のレイズ額も大きいため、勝てる可能性は低いです。"
}
2025-10-31 18:45:28,099 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップで5♦4♦というハンドは非常に弱いため、フォールドします。ポットにはすでに多くのベットが入っており、コールするにはコストが高すぎます。また、対戦相手のレイズ額も大きいため、勝てる可能性は低いです。'}
2025-10-31 18:45:28,100 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 18:45:28,100 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 18:45:28,100 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:45:28,100 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップで5♦4♦というハンドは非常に弱いため、フォールドします。ポットにはすでに多くのベットが入っており、コールするにはコストが高すぎます。また、対戦相手のレイズ額も大きいため、勝てる可能性は低いです。
2025-10-31 18:45:28,102 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 18:45:28,102 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:45:28,103 - poker_game - INFO - Hand #2, Phase: preflop
2025-10-31 18:45:28,104 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:45:28,104 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:28,105 - poker_game - INFO - Last raiser: 2
2025-10-31 18:45:28,105 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:28,106 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:45:28,106 - poker_game - INFO - Community cards: []
2025-10-31 18:45:28,106 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:45:28,106 - poker_game - INFO -   P1(Agent1): chips=1910, bet=10, status=active
2025-10-31 18:45:28,106 - poker_game - INFO -   P2(Agent2): chips=2150, bet=20, status=active
2025-10-31 18:45:28,107 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=active
2025-10-31 18:45:28,107 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:28,108 - poker_game - INFO - ==================================================
2025-10-31 18:45:28,109 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 18:45:28,122 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:45:28,123 - poker_game - INFO - Hand #2, Phase: preflop
2025-10-31 18:45:28,123 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:45:28,124 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:28,124 - poker_game - INFO - Last raiser: 2
2025-10-31 18:45:28,125 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:28,125 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:45:28,125 - poker_game - INFO - Community cards: []
2025-10-31 18:45:28,126 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:45:28,126 - poker_game - INFO -   P1(Agent1): chips=1910, bet=10, status=active
2025-10-31 18:45:28,127 - poker_game - INFO -   P2(Agent2): chips=2150, bet=20, status=active
2025-10-31 18:45:28,127 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:28,128 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:28,128 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 18:45:28,128 - poker_game - INFO - ==================================================
2025-10-31 18:45:28,129 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:45:28,129 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:45:28,130 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:45:28,130 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:45:28,130 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:45:28,131 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:45:28,131 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:45:28,132 - poker_game - DEBUG - Player bets: [0, 10, 20, 0], Current bet: 20, All same: False
2025-10-31 18:45:28,132 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:45:28,132 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:45:28,133 - poker_game - INFO - Hand #2, Phase: preflop
2025-10-31 18:45:28,134 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:45:28,134 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:28,134 - poker_game - INFO - Last raiser: 2
2025-10-31 18:45:28,135 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:28,135 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:45:28,135 - poker_game - INFO - Community cards: []
2025-10-31 18:45:28,136 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:45:28,137 - poker_game - INFO -   P1(Agent1): chips=1910, bet=10, status=active
2025-10-31 18:45:28,137 - poker_game - INFO -   P2(Agent2): chips=2150, bet=20, status=active
2025-10-31 18:45:28,138 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:28,138 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:28,138 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:45:28,139 - poker_game - INFO - ==================================================
2025-10-31 18:45:28,240 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "A♦",
    "5♠"
  ],
  "community": [],
  "your_chips": 1920,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1910,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2150,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1920)"
  ],
  "history": [
    "Player 2 raised to 80",
    "Player 3 folded",
    "Player 4 called 80",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: Q♦, A♣, K♥",
    "Player 1 folded",
    "Turn dealt: 7♠",
    "Player 2 checked",
    "Player 4 checked",
    "River dealt: 8♥",
    "Player 2 checked",
    "Player 4 checked",
    "Showdown: Player 2 hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣ cards=9♣, A♠",
    "Showdown: Player 4 hand=High Card: A♣ - A♣, K♥, Q♦, 10♥, 9♠ cards=10♥, 9♠",
    "Side pot layer 0: amount=40, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded"
  ]
}
2025-10-31 18:45:28,253 - poker_game - DEBUG - Create Session: {'id': '44558839-e726-474b-85e5-6624401475d3', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761903928.2506194}
2025-10-31 18:45:38,291 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:45:40,310 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_BjH7BvmbTWafmOHDpeMgjToB', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1273, 'totalTokenCount': 1290}, 'invocationId': 'e-c1d4ce78-2077-46c9-9dd9-5fb3ed2c187a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'cyAUcxs1', 'timestamp': 1761903928.266324}, {'content': {'parts': [{'functionResponse': {'id': 'call_BjH7BvmbTWafmOHDpeMgjToB', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-c1d4ce78-2077-46c9-9dd9-5fb3ed2c187a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'AnfzNpfr', 'timestamp': 1761903929.343617}, {'content': {'parts': [{'functionCall': {'id': 'call_XRbbVC4Wx6VjxW3y4HrhVHl2', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['A♦', '5♠'], 'community': [], 'your_chips': 1920, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 0, 'pot': 30, 'to_call': 20, 'dealer_button': 0, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1990, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 1910, 'bet': 10, 'status': 'active'}, {'id': 2, 'chips': 2150, 'bet': 20, 'status': 'active'}, {'id': 3, 'chips': 2000, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'call (20)', 'raise (min 40)', 'all-in (1920)'], 'history': ['Player 2 raised to 80', 'Player 3 folded', 'Player 4 called 80', 'Player 0 folded', 'Player 1 called 60', 'Flop dealt: Q♦, A♣, K♥', 'Player 1 folded', 'Player 2 checked', 'Player 4 checked', 'River dealt: 8♥', 'Player 2 checked', 'Player 4 checked', 'Showdown: Player 2 hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣ cards=9♣, A♠', 'Showdown: Player 4 hand=High Card: A♣ - A♣, K♥, Q♦, 10♥, 9♠ cards=10♥, 9♠', 'Side pot layer 0: amount=40, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣', 'Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣', 'Player 1 posted small blind 10', 'Player 2 posted big blind 20', 'Player 3 folded']}, 'call_amount': 20, 'pot_after_call': 50, 'equity': 0.3}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 481, 'promptTokenCount': 1797, 'totalTokenCount': 2278}, 'invocationId': 'e-c1d4ce78-2077-46c9-9dd9-5fb3ed2c187a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '6tNe55QE', 'timestamp': 1761903929.347436}, {'content': {'parts': [{'functionResponse': {'id': 'call_XRbbVC4Wx6VjxW3y4HrhVHl2', 'name': 'action_decision', 'response': {'action': 'fold', 'amount': 0, 'reasoning': '期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド'}}}], 'role': 'user'}, 'invocationId': 'e-c1d4ce78-2077-46c9-9dd9-5fb3ed2c187a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'clUsBKEG', 'timestamp': 1761903938.425295}, {'content': {'parts': [{'text': '{"action":"fold","amount":0,"reasoning":"期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 39, 'promptTokenCount': 2314, 'totalTokenCount': 2353}, 'invocationId': 'e-c1d4ce78-2077-46c9-9dd9-5fb3ed2c187a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'HJuOi4jQ', 'timestamp': 1761903938.42835}]
2025-10-31 18:45:40,310 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:45:40,310 - poker_game - DEBUG - {"action":"fold","amount":0,"reasoning":"期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド"}
2025-10-31 18:45:40,312 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:45:40,312 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"fold","amount":0,"reasoning":"期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド"}'
2025-10-31 18:45:40,312 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:45:40,312 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"fold","amount":0,"reasoning":"期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド"}
2025-10-31 18:45:40,312 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': '期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド'}
2025-10-31 18:45:40,312 - poker_game - DEBUG - [Agent4] Extracted values - action: 'fold', amount: 0
2025-10-31 18:45:40,312 - poker_game - DEBUG - [Agent4] Action 'fold' normalized - amount set to 0
2025-10-31 18:45:40,312 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:45:40,312 - poker_game - INFO - [Agent4] Successfully parsed decision: fold, 0, 期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド
2025-10-31 18:45:40,314 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'fold' with amount 0
2025-10-31 18:45:40,315 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:45:40,315 - poker_game - INFO - Hand #2, Phase: preflop
2025-10-31 18:45:40,315 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:45:40,315 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:40,315 - poker_game - INFO - Last raiser: 2
2025-10-31 18:45:40,315 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:40,315 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:45:40,316 - poker_game - INFO - Community cards: []
2025-10-31 18:45:40,316 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:45:40,316 - poker_game - INFO -   P1(Agent1): chips=1910, bet=10, status=active
2025-10-31 18:45:40,316 - poker_game - INFO -   P2(Agent2): chips=2150, bet=20, status=active
2025-10-31 18:45:40,316 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:40,316 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:40,317 - poker_game - INFO - ==================================================
2025-10-31 18:45:40,318 - poker_game - INFO - ACTION_EXECUTED: Player 4 folded
2025-10-31 18:45:40,346 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:45:40,346 - poker_game - INFO - Hand #2, Phase: preflop
2025-10-31 18:45:40,346 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:45:40,346 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:40,346 - poker_game - INFO - Last raiser: 2
2025-10-31 18:45:40,346 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:40,347 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:45:40,347 - poker_game - INFO - Community cards: []
2025-10-31 18:45:40,347 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:45:40,347 - poker_game - INFO -   P1(Agent1): chips=1910, bet=10, status=active
2025-10-31 18:45:40,347 - poker_game - INFO -   P2(Agent2): chips=2150, bet=20, status=active
2025-10-31 18:45:40,347 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:40,348 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:40,348 - poker_game - INFO - Extra: Action: Player 4 folded
2025-10-31 18:45:40,348 - poker_game - INFO - ==================================================
2025-10-31 18:45:40,348 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:45:40,348 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:45:40,348 - poker_game - DEBUG - Active players: [0, 1, 2]
2025-10-31 18:45:40,349 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:45:40,349 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:45:40,349 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:45:40,349 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:45:40,349 - poker_game - DEBUG - Player bets: [0, 10, 20], Current bet: 20, All same: False
2025-10-31 18:45:40,349 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:45:40,349 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:45:40,349 - poker_game - INFO - Hand #2, Phase: preflop
2025-10-31 18:45:40,350 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:45:40,350 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:40,350 - poker_game - INFO - Last raiser: 2
2025-10-31 18:45:40,350 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:40,350 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:45:40,351 - poker_game - INFO - Community cards: []
2025-10-31 18:45:40,351 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:45:40,351 - poker_game - INFO -   P1(Agent1): chips=1910, bet=10, status=active
2025-10-31 18:45:40,351 - poker_game - INFO -   P2(Agent2): chips=2150, bet=20, status=active
2025-10-31 18:45:40,352 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:40,352 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:40,352 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:45:40,352 - poker_game - INFO - ==================================================
2025-10-31 18:45:40,454 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "Q♥",
    "3♠"
  ],
  "community": [],
  "your_chips": 1990,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1910,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2150,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1990)"
  ],
  "history": [
    "Player 3 folded",
    "Player 4 called 80",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: Q♦, A♣, K♥",
    "Player 1 folded",
    "Turn dealt: 7♠",
    "Player 2 checked",
    "Player 4 checked",
    "River dealt: 8♥",
    "Player 2 checked",
    "Player 4 checked",
    "Showdown: Player 2 hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣ cards=9♣, A♠",
    "Showdown: Player 4 hand=High Card: A♣ - A♣, K♥, Q♦, 10♥, 9♠ cards=10♥, 9♠",
    "Side pot layer 0: amount=40, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded"
  ]
}
2025-10-31 18:45:40,465 - poker_game - DEBUG - Create Session: {'id': 'c7c1f1c3-239a-42fe-9672-4f7736bdd4de', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761903940.4625978}
2025-10-31 18:45:42,256 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札はQハイ（クイーンが一番強いカード）のオフスート（違うマーク）で、これは非常に弱いハンドです。ポットには20をコールする必要があり、これは私のハンドの強さに対してリスクに見合わないと判断しました。この状況ではフォールド（降りる）が最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 112, 'promptTokenCount': 950, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 950}], 'totalTokenCount': 1062}, 'invocationId': 'e-aeb232ca-9caa-42f2-a8c9-9f7fb6083f07', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '09EfYuhK', 'timestamp': 1761903940.473533}]
2025-10-31 18:45:42,256 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:45:42,256 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札はQハイ（クイーンが一番強いカード）のオフスート（違うマーク）で、これは非常に弱いハンドです。ポットには20をコールする必要があり、これは私のハンドの強さに対してリスクに見合わないと判断しました。この状況ではフォールド（降りる）が最善です。"
}
```
2025-10-31 18:45:42,257 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:45:42,257 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札はQハイ（クイーンが一番強いカード）のオフスート（違うマーク）で、これは非常に弱いハンドです。ポットには20をコールする必要があり、これは私のハンドの強さに対してリスクに見合わないと判断しました。この状況ではフォールド（降りる）が最善です。"\n}\n```'
2025-10-31 18:45:42,257 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:45:42,257 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札はQハイ（クイーンが一番強いカード）のオフスート（違うマーク）で、これは非常に弱いハンドです。ポットには20をコールする必要があり、これは私のハンドの強さに対してリスクに見合わないと判断しました。この状況ではフォールド（降りる）が最善です。"\n}'
2025-10-31 18:45:42,257 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札はQハイ（クイーンが一番強いカード）のオフスート（違うマーク）で、これは非常に弱いハンドです。ポットには20をコールする必要があり、これは私のハンドの強さに対してリスクに見合わないと判断しました。この状況ではフォールド（降りる）が最善です。"
}
2025-10-31 18:45:42,257 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（最初のカードが配られた後）で、私の手札はQハイ（クイーンが一番強いカード）のオフスート（違うマーク）で、これは非常に弱いハンドです。ポットには20をコールする必要があり、これは私のハンドの強さに対してリスクに見合わないと判断しました。この状況ではフォールド（降りる）が最善です。'}
2025-10-31 18:45:42,257 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 18:45:42,257 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 18:45:42,258 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:45:42,258 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップ（最初のカードが配られた後）で、私の手札はQハイ（クイーンが一番強いカード）のオフスート（違うマーク）で、これは非常に弱いハンドです。ポットには20をコールする必要があり、これは私のハンドの強さに対してリスクに見合わないと判断しました。この状況ではフォールド（降りる）が最善です。
2025-10-31 18:45:42,258 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 18:45:42,259 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:45:42,259 - poker_game - INFO - Hand #2, Phase: preflop
2025-10-31 18:45:42,259 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:45:42,259 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:42,259 - poker_game - INFO - Last raiser: 2
2025-10-31 18:45:42,260 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:42,260 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:45:42,260 - poker_game - INFO - Community cards: []
2025-10-31 18:45:42,260 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:45:42,261 - poker_game - INFO -   P1(Agent1): chips=1910, bet=10, status=active
2025-10-31 18:45:42,261 - poker_game - INFO -   P2(Agent2): chips=2150, bet=20, status=active
2025-10-31 18:45:42,261 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:42,261 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:42,261 - poker_game - INFO - ==================================================
2025-10-31 18:45:42,262 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 18:45:42,274 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:45:42,274 - poker_game - INFO - Hand #2, Phase: preflop
2025-10-31 18:45:42,274 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:45:42,274 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:42,275 - poker_game - INFO - Last raiser: 2
2025-10-31 18:45:42,275 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:42,275 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:42,275 - poker_game - INFO - Community cards: []
2025-10-31 18:45:42,275 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:42,276 - poker_game - INFO -   P1(Agent1): chips=1910, bet=10, status=active
2025-10-31 18:45:42,276 - poker_game - INFO -   P2(Agent2): chips=2150, bet=20, status=active
2025-10-31 18:45:42,276 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:42,276 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:42,276 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 18:45:42,277 - poker_game - INFO - ==================================================
2025-10-31 18:45:42,277 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:45:42,277 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:45:42,277 - poker_game - DEBUG - Active players: [1, 2]
2025-10-31 18:45:42,277 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:45:42,277 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:45:42,277 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:45:42,278 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:45:42,278 - poker_game - DEBUG - Player bets: [10, 20], Current bet: 20, All same: False
2025-10-31 18:45:42,278 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:45:42,278 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:45:42,278 - poker_game - INFO - Hand #2, Phase: preflop
2025-10-31 18:45:42,278 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:45:42,278 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:42,278 - poker_game - INFO - Last raiser: 2
2025-10-31 18:45:42,278 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:42,278 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:42,278 - poker_game - INFO - Community cards: []
2025-10-31 18:45:42,279 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:42,279 - poker_game - INFO -   P1(Agent1): chips=1910, bet=10, status=active
2025-10-31 18:45:42,279 - poker_game - INFO -   P2(Agent2): chips=2150, bet=20, status=active
2025-10-31 18:45:42,279 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:42,279 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:42,279 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:45:42,280 - poker_game - INFO - ==================================================
2025-10-31 18:45:42,382 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "K♠",
    "3♥"
  ],
  "community": [],
  "your_chips": 1910,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 30,
  "to_call": 10,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 2150,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (1910)"
  ],
  "history": [
    "Player 4 called 80",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: Q♦, A♣, K♥",
    "Player 1 folded",
    "Turn dealt: 7♠",
    "Player 2 checked",
    "Player 4 checked",
    "River dealt: 8♥",
    "Player 2 checked",
    "Player 4 checked",
    "Showdown: Player 2 hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣ cards=9♣, A♠",
    "Showdown: Player 4 hand=High Card: A♣ - A♣, K♥, Q♦, 10♥, 9♠ cards=10♥, 9♠",
    "Side pot layer 0: amount=40, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded"
  ]
}
2025-10-31 18:45:42,391 - poker_game - DEBUG - Create Session: {'id': '1c8420b6-8cd2-4b0b-a791-602944421dc9', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761903942.3892975}
2025-10-31 18:45:43,947 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、あなたの手札はK♠3♥で、これは弱いハンドです。ポットを大きくする価値はありません。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 58, 'promptTokenCount': 951, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 951}], 'totalTokenCount': 1009}, 'invocationId': 'e-f05317c3-6640-475e-a13e-7bec479ee300', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '9g93oCJI', 'timestamp': 1761903942.402071}]
2025-10-31 18:45:43,948 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:45:43,948 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで、あなたの手札はK♠3♥で、これは弱いハンドです。ポットを大きくする価値はありません。"
}
```
2025-10-31 18:45:43,948 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:45:43,948 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、あなたの手札はK♠3♥で、これは弱いハンドです。ポットを大きくする価値はありません。"\n}\n```'
2025-10-31 18:45:43,948 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:45:43,948 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、あなたの手札はK♠3♥で、これは弱いハンドです。ポットを大きくする価値はありません。"\n}'
2025-10-31 18:45:43,948 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで、あなたの手札はK♠3♥で、これは弱いハンドです。ポットを大きくする価値はありません。"
}
2025-10-31 18:45:43,948 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップで、あなたの手札はK♠3♥で、これは弱いハンドです。ポットを大きくする価値はありません。'}
2025-10-31 18:45:43,948 - poker_game - DEBUG - [Agent1] Extracted values - action: 'fold', amount: 0
2025-10-31 18:45:43,949 - poker_game - DEBUG - [Agent1] Action 'fold' normalized - amount set to 0
2025-10-31 18:45:43,949 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:45:43,949 - poker_game - INFO - [Agent1] Successfully parsed decision: fold, 0, プリフロップで、あなたの手札はK♠3♥で、これは弱いハンドです。ポットを大きくする価値はありません。
2025-10-31 18:45:43,950 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'fold' with amount 0
2025-10-31 18:45:43,950 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:45:43,950 - poker_game - INFO - Hand #2, Phase: preflop
2025-10-31 18:45:43,950 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:45:43,950 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:43,950 - poker_game - INFO - Last raiser: 2
2025-10-31 18:45:43,951 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:43,951 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:45:43,951 - poker_game - INFO - Community cards: []
2025-10-31 18:45:43,951 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:43,951 - poker_game - INFO -   P1(Agent1): chips=1910, bet=10, status=active
2025-10-31 18:45:43,952 - poker_game - INFO -   P2(Agent2): chips=2150, bet=20, status=active
2025-10-31 18:45:43,952 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:43,952 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:43,952 - poker_game - INFO - ==================================================
2025-10-31 18:45:43,952 - poker_game - INFO - ACTION_EXECUTED: Player 1 folded
2025-10-31 18:45:43,963 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:45:43,963 - poker_game - INFO - Hand #2, Phase: preflop
2025-10-31 18:45:43,963 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:45:43,963 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:43,964 - poker_game - INFO - Last raiser: 2
2025-10-31 18:45:43,964 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:43,964 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 4
2025-10-31 18:45:43,964 - poker_game - INFO - Community cards: []
2025-10-31 18:45:43,964 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:43,965 - poker_game - INFO -   P1(Agent1): chips=1910, bet=10, status=folded
2025-10-31 18:45:43,965 - poker_game - INFO -   P2(Agent2): chips=2150, bet=20, status=active
2025-10-31 18:45:43,965 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:43,965 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:43,965 - poker_game - INFO - Extra: Action: Player 1 folded
2025-10-31 18:45:43,966 - poker_game - INFO - ==================================================
2025-10-31 18:45:43,966 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:45:43,967 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:45:43,967 - poker_game - DEBUG - Active players: [2]
2025-10-31 18:45:43,967 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:45:43,968 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:45:43,968 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:45:43,968 - poker_game - DEBUG - Active: 1, All-in: 0
2025-10-31 18:45:43,968 - poker_game - INFO - Betting complete: Only 1 or fewer players remaining
2025-10-31 18:45:43,968 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:45:43,968 - poker_game - INFO - Hand #2, Phase: preflop
2025-10-31 18:45:43,969 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:45:43,969 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:43,969 - poker_game - INFO - Last raiser: 2
2025-10-31 18:45:43,969 - poker_game - INFO - Betting round complete: True
2025-10-31 18:45:43,969 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 4
2025-10-31 18:45:43,970 - poker_game - INFO - Community cards: []
2025-10-31 18:45:43,970 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:43,970 - poker_game - INFO -   P1(Agent1): chips=1910, bet=10, status=folded
2025-10-31 18:45:43,970 - poker_game - INFO -   P2(Agent2): chips=2150, bet=20, status=active
2025-10-31 18:45:43,970 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:43,971 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:43,971 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:45:43,971 - poker_game - INFO - ==================================================
2025-10-31 18:45:44,072 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:45:44,073 - poker_game - INFO - Betting round complete: True
2025-10-31 18:45:44,073 - poker_game - INFO - Remaining players: 1
2025-10-31 18:45:44,074 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:45:44,074 - poker_game - INFO - Going to SHOWDOWN - only 1 or fewer players remaining
2025-10-31 18:45:44,074 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:45:44,075 - poker_game - INFO - Hand #2, Phase: showdown
2025-10-31 18:45:44,075 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:45:44,076 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:44,076 - poker_game - INFO - Last raiser: 2
2025-10-31 18:45:44,076 - poker_game - INFO - Betting round complete: True
2025-10-31 18:45:44,077 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 4
2025-10-31 18:45:44,077 - poker_game - INFO - Community cards: []
2025-10-31 18:45:44,077 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:44,078 - poker_game - INFO -   P1(Agent1): chips=1910, bet=10, status=folded
2025-10-31 18:45:44,078 - poker_game - INFO -   P2(Agent2): chips=2150, bet=20, status=active
2025-10-31 18:45:44,079 - poker_game - INFO -   P3(Agent3): chips=2000, bet=0, status=folded
2025-10-31 18:45:44,079 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:44,079 - poker_game - INFO - ==================================================
2025-10-31 18:45:44,080 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:45:44,080 - poker_game - INFO - Pot: 30, Community cards: []
2025-10-31 18:45:44,080 - poker_game - INFO -   Player 2 status=active cards=['6♥', '6♣']
2025-10-31 18:45:44,081 - poker_game - INFO - Showdown winner by default: Player 2 awarded 30
2025-10-31 18:45:44,082 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:45:44,083 - poker_game - INFO - === STARTING NEW HAND #3 ===
2025-10-31 18:45:44,083 - poker_game - INFO - Active players for new hand: 5
2025-10-31 18:45:44,084 - poker_game - INFO - Moving dealer button
2025-10-31 18:45:44,085 - poker_game - INFO - Posting blinds
2025-10-31 18:45:44,106 - poker_game - INFO - Dealing hole cards
2025-10-31 18:45:44,107 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:45:44,117 - poker_game - INFO - Started new hand in database: hand_id=3
2025-10-31 18:45:44,118 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:45:44,118 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:45:44,119 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:45:44,119 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:44,120 - poker_game - INFO - Last raiser: 3
2025-10-31 18:45:44,120 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:44,120 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:45:44,121 - poker_game - INFO - Community cards: []
2025-10-31 18:45:44,121 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:45:44,122 - poker_game - INFO -   P1(Agent1): chips=1910, bet=0, status=active
2025-10-31 18:45:44,122 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=active
2025-10-31 18:45:44,122 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:45:44,122 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:44,123 - poker_game - INFO - ==================================================
2025-10-31 18:45:44,124 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "2♣",
    "K♥"
  ],
  "community": [],
  "your_chips": 1920,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1910,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2170,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1980,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1920)"
  ],
  "history": [
    "Player 1 folded",
    "Turn dealt: 7♠",
    "Player 2 checked",
    "Player 4 checked",
    "River dealt: 8♥",
    "Player 2 checked",
    "Player 4 checked",
    "Showdown: Player 2 hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣ cards=9♣, A♠",
    "Showdown: Player 4 hand=High Card: A♣ - A♣, K♥, Q♦, 10♥, 9♠ cards=10♥, 9♠",
    "Side pot layer 0: amount=40, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 2 won 30",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20"
  ]
}
2025-10-31 18:45:44,134 - poker_game - DEBUG - Create Session: {'id': 'ccd3b35f-cd22-4589-ac91-ddaa9f3aa6e7', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761903944.1325228}
2025-10-31 18:45:54,154 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:45:54,897 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_d6wyw1TBSBhynzBsMnl0b1O3', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1269, 'totalTokenCount': 1286}, 'invocationId': 'e-e2c27894-dffc-40e5-8ce1-6496d4c8fc81', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'SE9MJcMh', 'timestamp': 1761903944.144115}, {'content': {'parts': [{'functionResponse': {'id': 'call_d6wyw1TBSBhynzBsMnl0b1O3', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-e2c27894-dffc-40e5-8ce1-6496d4c8fc81', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'rXgTp9U0', 'timestamp': 1761903945.106736}, {'content': {'parts': [{'functionCall': {'id': 'call_bHN1DFCyouYNvaA5vphhxDzD', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}, {'functionCall': {'id': 'call_tbDxhntyTmAhalC9gGkkoV7b', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['2♣', 'K♥'], 'community': [], 'your_chips': 1920, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 0, 'pot': 30, 'to_call': 20, 'dealer_button': 1, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1990, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 1910, 'bet': 0, 'status': 'active'}, {'id': 2, 'chips': 2170, 'bet': 10, 'status': 'active'}, {'id': 3, 'chips': 1980, 'bet': 20, 'status': 'active'}], 'actions': ['fold', 'call (20)', 'raise (min 40)', 'all-in (1920)'], 'history': ['Player 1 folded', 'Turn dealt: 7♠', 'Player 2 checked', 'Player 4 checked', 'River dealt: 8♥', 'Player 2 checked', 'Player 4 checked', 'Showdown: Player 2 hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣ cards=9♣, A♠', 'Showdown: Player 4 hand=High Card: A♣ - A♣, K♥, Q♦, 10♥, 9♠ cards=10♥, 9♠', 'Side pot layer 0: amount=40, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣', 'Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣', 'Player 1 posted small blind 10', 'Player 2 posted big blind 20', 'Player 3 folded', 'Player 4 folded', 'Player 0 folded', 'Player 1 folded', 'Showdown: Player 2 won 30', 'Player 2 posted small blind 10', 'Player 3 posted big blind 20']}, 'call_amount': 20, 'pot_after_call': 50, 'equity': 0.3}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 505, 'promptTokenCount': 1793, 'totalTokenCount': 2298}, 'invocationId': 'e-e2c27894-dffc-40e5-8ce1-6496d4c8fc81', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '2Wst6P2S', 'timestamp': 1761903945.110747}, {'content': {'parts': [{'functionResponse': {'id': 'call_bHN1DFCyouYNvaA5vphhxDzD', 'name': 'transfer_to_agent', 'response': {'result': None}}}, {'functionResponse': {'id': 'call_tbDxhntyTmAhalC9gGkkoV7b', 'name': 'action_decision', 'response': {'action': 'fold', 'amount': 0, 'reasoning': '期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド'}}}], 'role': 'user'}, 'invocationId': 'q9I3OkT8', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'm7a1Zp6n', 'timestamp': 1761903952.75109}, {'content': {'parts': [{'text': '{"action":"fold","amount":0,"reasoning":"期待値が1.00(ポットに対し3.33%で、マイナスなのでフォールド)"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 40, 'promptTokenCount': 2424, 'totalTokenCount': 2464}, 'invocationId': 'e-e2c27894-dffc-40e5-8ce1-6496d4c8fc81', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'glp3z9O6', 'timestamp': 1761903952.753716}]
2025-10-31 18:45:54,898 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:45:54,898 - poker_game - DEBUG - {"action":"fold","amount":0,"reasoning":"期待値が1.00(ポットに対し3.33%で、マイナスなのでフォールド)"}
2025-10-31 18:45:54,899 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:45:54,899 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"fold","amount":0,"reasoning":"期待値が1.00(ポットに対し3.33%で、マイナスなのでフォールド)"}'
2025-10-31 18:45:54,899 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:45:54,899 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"fold","amount":0,"reasoning":"期待値が1.00(ポットに対し3.33%で、マイナスなのでフォールド)"}
2025-10-31 18:45:54,899 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': '期待値が1.00(ポットに対し3.33%で、マイナスなのでフォールド)'}
2025-10-31 18:45:54,899 - poker_game - DEBUG - [Agent4] Extracted values - action: 'fold', amount: 0
2025-10-31 18:45:54,899 - poker_game - DEBUG - [Agent4] Action 'fold' normalized - amount set to 0
2025-10-31 18:45:54,899 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:45:54,900 - poker_game - INFO - [Agent4] Successfully parsed decision: fold, 0, 期待値が1.00(ポットに対し3.33%で、マイナスなのでフォールド)
2025-10-31 18:45:54,901 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'fold' with amount 0
2025-10-31 18:45:54,901 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:45:54,901 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:45:54,901 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:45:54,902 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:54,902 - poker_game - INFO - Last raiser: 3
2025-10-31 18:45:54,902 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:54,902 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:45:54,903 - poker_game - INFO - Community cards: []
2025-10-31 18:45:54,903 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:45:54,903 - poker_game - INFO -   P1(Agent1): chips=1910, bet=0, status=active
2025-10-31 18:45:54,903 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=active
2025-10-31 18:45:54,903 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:45:54,903 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=active
2025-10-31 18:45:54,903 - poker_game - INFO - ==================================================
2025-10-31 18:45:54,904 - poker_game - INFO - ACTION_EXECUTED: Player 4 folded
2025-10-31 18:45:54,921 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:45:54,922 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:45:54,922 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:45:54,923 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:54,923 - poker_game - INFO - Last raiser: 3
2025-10-31 18:45:54,923 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:54,923 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:45:54,924 - poker_game - INFO - Community cards: []
2025-10-31 18:45:54,924 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:45:54,925 - poker_game - INFO -   P1(Agent1): chips=1910, bet=0, status=active
2025-10-31 18:45:54,925 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=active
2025-10-31 18:45:54,925 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:45:54,926 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:54,926 - poker_game - INFO - Extra: Action: Player 4 folded
2025-10-31 18:45:54,926 - poker_game - INFO - ==================================================
2025-10-31 18:45:54,926 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:45:54,927 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:45:54,927 - poker_game - DEBUG - Active players: [0, 1, 2, 3]
2025-10-31 18:45:54,927 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:45:54,927 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:45:54,928 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:45:54,928 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:45:54,928 - poker_game - DEBUG - Player bets: [0, 0, 10, 20], Current bet: 20, All same: False
2025-10-31 18:45:54,928 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:45:54,928 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:45:54,929 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:45:54,929 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:45:54,929 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:54,929 - poker_game - INFO - Last raiser: 3
2025-10-31 18:45:54,930 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:54,930 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:45:54,930 - poker_game - INFO - Community cards: []
2025-10-31 18:45:54,930 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:45:54,931 - poker_game - INFO -   P1(Agent1): chips=1910, bet=0, status=active
2025-10-31 18:45:54,931 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=active
2025-10-31 18:45:54,931 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:45:54,932 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:54,932 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:45:54,932 - poker_game - INFO - ==================================================
2025-10-31 18:45:55,034 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "6♥",
    "10♦"
  ],
  "community": [],
  "your_chips": 1990,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1910,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2170,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1980,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1990)"
  ],
  "history": [
    "Turn dealt: 7♠",
    "Player 2 checked",
    "Player 4 checked",
    "River dealt: 8♥",
    "Player 2 checked",
    "Player 4 checked",
    "Showdown: Player 2 hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣ cards=9♣, A♠",
    "Showdown: Player 4 hand=High Card: A♣ - A♣, K♥, Q♦, 10♥, 9♠ cards=10♥, 9♠",
    "Side pot layer 0: amount=40, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 2 won 30",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded"
  ]
}
2025-10-31 18:45:55,046 - poker_game - DEBUG - Create Session: {'id': 'e46f3895-3110-48e8-8843-67d2c15d9a59', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761903955.043541}
2025-10-31 18:45:57,362 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（各プレイヤーに2枚のカードが配られた直後）で、私の手札は6♥10♦です。これは「コネクター」と呼ばれる、数字が隣り合っている手札ですが、スート（マーク）が揃っていません。まだフロップ（3枚のコミュニティカード）も開かれていない状況で、すでにポットには30、コールするには20必要です。他のプレイヤーはまだアクションを起こしていませんが、この手札では勝負するには弱すぎると判断しました。フォールド（降りる）が最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 152, 'promptTokenCount': 953, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 953}], 'totalTokenCount': 1105}, 'invocationId': 'e-ec36f4b0-d955-4ccb-a907-dbc5d2f63589', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Gz1UmHIW', 'timestamp': 1761903955.059428}]
2025-10-31 18:45:57,362 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:45:57,362 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（各プレイヤーに2枚のカードが配られた直後）で、私の手札は6♥10♦です。これは「コネクター」と呼ばれる、数字が隣り合っている手札ですが、スート（マーク）が揃っていません。まだフロップ（3枚のコミュニティカード）も開かれていない状況で、すでにポットには30、コールするには20必要です。他のプレイヤーはまだアクションを起こしていませんが、この手札では勝負するには弱すぎると判断しました。フォールド（降りる）が最善です。"
}
```
2025-10-31 18:45:57,362 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:45:57,363 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（各プレイヤーに2枚のカードが配られた直後）で、私の手札は6♥10♦です。これは「コネクター」と呼ばれる、数字が隣り合っている手札ですが、スート（マーク）が揃っていません。まだフロップ（3枚のコミュニティカード）も開かれていない状況で、すでにポットには30、コールするには20必要です。他のプレイヤーはまだアクションを起こしていませんが、この手札では勝負するには弱すぎると判断しました。フォールド（降りる）が最善です。"\n}\n```'
2025-10-31 18:45:57,363 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:45:57,363 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（各プレイヤーに2枚のカードが配られた直後）で、私の手札は6♥10♦です。これは「コネクター」と呼ばれる、数字が隣り合っている手札ですが、スート（マーク）が揃っていません。まだフロップ（3枚のコミュニティカード）も開かれていない状況で、すでにポットには30、コールするには20必要です。他のプレイヤーはまだアクションを起こしていませんが、この手札では勝負するには弱すぎると判断しました。フォールド（降りる）が最善です。"\n}'
2025-10-31 18:45:57,363 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（各プレイヤーに2枚のカードが配られた直後）で、私の手札は6♥10♦です。これは「コネクター」と呼ばれる、数字が隣り合っている手札ですが、スート（マーク）が揃っていません。まだフロップ（3枚のコミュニティカード）も開かれていない状況で、すでにポットには30、コールするには20必要です。他のプレイヤーはまだアクションを起こしていませんが、この手札では勝負するには弱すぎると判断しました。フォールド（降りる）が最善です。"
}
2025-10-31 18:45:57,363 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（各プレイヤーに2枚のカードが配られた直後）で、私の手札は6♥10♦です。これは「コネクター」と呼ばれる、数字が隣り合っている手札ですが、スート（マーク）が揃っていません。まだフロップ（3枚のコミュニティカード）も開かれていない状況で、すでにポットには30、コールするには20必要です。他のプレイヤーはまだアクションを起こしていませんが、この手札では勝負するには弱すぎると判断しました。フォールド（降りる）が最善です。'}
2025-10-31 18:45:57,363 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 18:45:57,363 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 18:45:57,363 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:45:57,364 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップ（各プレイヤーに2枚のカードが配られた直後）で、私の手札は6♥10♦です。これは「コネクター」と呼ばれる、数字が隣り合っている手札ですが、スート（マーク）が揃っていません。まだフロップ（3枚のコミュニティカード）も開かれていない状況で、すでにポットには30、コールするには20必要です。他のプレイヤーはまだアクションを起こしていませんが、この手札では勝負するには弱すぎると判断しました。フォールド（降りる）が最善です。
2025-10-31 18:45:57,364 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 18:45:57,365 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:45:57,365 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:45:57,365 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:45:57,365 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:57,366 - poker_game - INFO - Last raiser: 3
2025-10-31 18:45:57,366 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:57,366 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:45:57,366 - poker_game - INFO - Community cards: []
2025-10-31 18:45:57,367 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:45:57,367 - poker_game - INFO -   P1(Agent1): chips=1910, bet=0, status=active
2025-10-31 18:45:57,367 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=active
2025-10-31 18:45:57,367 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:45:57,367 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:57,368 - poker_game - INFO - ==================================================
2025-10-31 18:45:57,368 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 18:45:57,378 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:45:57,379 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:45:57,379 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:45:57,379 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:57,380 - poker_game - INFO - Last raiser: 3
2025-10-31 18:45:57,380 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:57,380 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:45:57,380 - poker_game - INFO - Community cards: []
2025-10-31 18:45:57,381 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:57,381 - poker_game - INFO -   P1(Agent1): chips=1910, bet=0, status=active
2025-10-31 18:45:57,381 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=active
2025-10-31 18:45:57,381 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:45:57,382 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:57,382 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 18:45:57,383 - poker_game - INFO - ==================================================
2025-10-31 18:45:57,384 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:45:57,384 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:45:57,384 - poker_game - DEBUG - Active players: [1, 2, 3]
2025-10-31 18:45:57,384 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:45:57,384 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:45:57,384 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:45:57,385 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:45:57,385 - poker_game - DEBUG - Player bets: [0, 10, 20], Current bet: 20, All same: False
2025-10-31 18:45:57,385 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:45:57,385 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:45:57,385 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:45:57,386 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:45:57,386 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:57,386 - poker_game - INFO - Last raiser: 3
2025-10-31 18:45:57,386 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:57,387 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:45:57,387 - poker_game - INFO - Community cards: []
2025-10-31 18:45:57,387 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:57,387 - poker_game - INFO -   P1(Agent1): chips=1910, bet=0, status=active
2025-10-31 18:45:57,388 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=active
2025-10-31 18:45:57,388 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:45:57,388 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:57,388 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:45:57,389 - poker_game - INFO - ==================================================
2025-10-31 18:45:57,490 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "J♠",
    "8♠"
  ],
  "community": [],
  "your_chips": 1910,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 2170,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1980,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1910)"
  ],
  "history": [
    "Player 2 checked",
    "Player 4 checked",
    "River dealt: 8♥",
    "Player 2 checked",
    "Player 4 checked",
    "Showdown: Player 2 hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣ cards=9♣, A♠",
    "Showdown: Player 4 hand=High Card: A♣ - A♣, K♥, Q♦, 10♥, 9♠ cards=10♥, 9♠",
    "Side pot layer 0: amount=40, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 2 won 30",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded"
  ]
}
2025-10-31 18:45:57,505 - poker_game - DEBUG - Create Session: {'id': 'ca8182cc-3a40-4615-9ca3-806ab6ce41c3', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761903957.5020056}
2025-10-31 18:45:59,270 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップ（preflop）で、J♠8♠というハンドは、コール（call）するには十分な強さを持っています。ポット（pot）のサイズと、コールに必要な金額（to_call）を考慮すると、このハンドでコールするのは合理的な選択です。フロップ（flop）以降の展開を見て、さらに意思決定を行います。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 106, 'promptTokenCount': 950, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 950}], 'totalTokenCount': 1056}, 'invocationId': 'e-24a7e4a2-d872-42e6-a7c7-d35e6772cada', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'nMfHCauL', 'timestamp': 1761903957.515317}]
2025-10-31 18:45:59,271 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:45:59,271 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップ（preflop）で、J♠8♠というハンドは、コール（call）するには十分な強さを持っています。ポット（pot）のサイズと、コールに必要な金額（to_call）を考慮すると、このハンドでコールするのは合理的な選択です。フロップ（flop）以降の展開を見て、さらに意思決定を行います。"
}
```
2025-10-31 18:45:59,272 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:45:59,272 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップ（preflop）で、J♠8♠というハンドは、コール（call）するには十分な強さを持っています。ポット（pot）のサイズと、コールに必要な金額（to_call）を考慮すると、このハンドでコールするのは合理的な選択です。フロップ（flop）以降の展開を見て、さらに意思決定を行います。"\n}\n```'
2025-10-31 18:45:59,272 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:45:59,273 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップ（preflop）で、J♠8♠というハンドは、コール（call）するには十分な強さを持っています。ポット（pot）のサイズと、コールに必要な金額（to_call）を考慮すると、このハンドでコールするのは合理的な選択です。フロップ（flop）以降の展開を見て、さらに意思決定を行います。"\n}'
2025-10-31 18:45:59,273 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップ（preflop）で、J♠8♠というハンドは、コール（call）するには十分な強さを持っています。ポット（pot）のサイズと、コールに必要な金額（to_call）を考慮すると、このハンドでコールするのは合理的な選択です。フロップ（flop）以降の展開を見て、さらに意思決定を行います。"
}
2025-10-31 18:45:59,273 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'プリフロップ（preflop）で、J♠8♠というハンドは、コール（call）するには十分な強さを持っています。ポット（pot）のサイズと、コールに必要な金額（to_call）を考慮すると、このハンドでコールするのは合理的な選択です。フロップ（flop）以降の展開を見て、さらに意思決定を行います。'}
2025-10-31 18:45:59,273 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 20
2025-10-31 18:45:59,274 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1910)']
2025-10-31 18:45:59,274 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (20)': 20
2025-10-31 18:45:59,274 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:45:59,274 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 20, プリフロップ（preflop）で、J♠8♠というハンドは、コール（call）するには十分な強さを持っています。ポット（pot）のサイズと、コールに必要な金額（to_call）を考慮すると、このハンドでコールするのは合理的な選択です。フロップ（flop）以降の展開を見て、さらに意思決定を行います。
2025-10-31 18:45:59,275 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 20
2025-10-31 18:45:59,276 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:45:59,276 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:45:59,277 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:45:59,278 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:45:59,279 - poker_game - INFO - Last raiser: 3
2025-10-31 18:45:59,279 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:59,280 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:45:59,281 - poker_game - INFO - Community cards: []
2025-10-31 18:45:59,282 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:59,283 - poker_game - INFO -   P1(Agent1): chips=1910, bet=0, status=active
2025-10-31 18:45:59,283 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=active
2025-10-31 18:45:59,284 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:45:59,285 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:59,285 - poker_game - INFO - ==================================================
2025-10-31 18:45:59,286 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 20
2025-10-31 18:45:59,301 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:45:59,301 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:45:59,302 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:45:59,302 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:45:59,303 - poker_game - INFO - Last raiser: 3
2025-10-31 18:45:59,303 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:59,304 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:45:59,304 - poker_game - INFO - Community cards: []
2025-10-31 18:45:59,305 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:59,305 - poker_game - INFO -   P1(Agent1): chips=1890, bet=20, status=active
2025-10-31 18:45:59,306 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=active
2025-10-31 18:45:59,306 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:45:59,306 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:59,307 - poker_game - INFO - Extra: Action: Player 1 called 20
2025-10-31 18:45:59,307 - poker_game - INFO - ==================================================
2025-10-31 18:45:59,307 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:45:59,308 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:45:59,308 - poker_game - DEBUG - Active players: [1, 2, 3]
2025-10-31 18:45:59,308 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:45:59,309 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:45:59,309 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:45:59,310 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:45:59,310 - poker_game - DEBUG - Player bets: [20, 10, 20], Current bet: 20, All same: False
2025-10-31 18:45:59,310 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:45:59,311 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:45:59,311 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:45:59,311 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:45:59,312 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:45:59,312 - poker_game - INFO - Last raiser: 3
2025-10-31 18:45:59,313 - poker_game - INFO - Betting round complete: False
2025-10-31 18:45:59,313 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:45:59,314 - poker_game - INFO - Community cards: []
2025-10-31 18:45:59,314 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:45:59,315 - poker_game - INFO -   P1(Agent1): chips=1890, bet=20, status=active
2025-10-31 18:45:59,315 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=active
2025-10-31 18:45:59,315 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:45:59,316 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:45:59,316 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:45:59,317 - poker_game - INFO - ==================================================
2025-10-31 18:45:59,419 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "preflop",
  "your_cards": [
    "J♦",
    "6♣"
  ],
  "community": [],
  "your_chips": 2170,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 50,
  "to_call": 10,
  "dealer_button": 1,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 1890,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1980,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (2170)"
  ],
  "history": [
    "Player 4 checked",
    "River dealt: 8♥",
    "Player 2 checked",
    "Player 4 checked",
    "Showdown: Player 2 hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣ cards=9♣, A♠",
    "Showdown: Player 4 hand=High Card: A♣ - A♣, K♥, Q♦, 10♥, 9♠ cards=10♥, 9♠",
    "Side pot layer 0: amount=40, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 2 won 30",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 20"
  ]
}
2025-10-31 18:45:59,428 - poker_game - DEBUG - Create Session: {'id': '14b4df08-7d7c-493b-b1e9-fb08326844d6', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761903959.4264538}
2025-10-31 18:46:01,197 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、Jと6という弱いハンドを持っています。ポットのサイズは50で、コールするには10必要ですが、レイズするとさらに多くのお金が必要になります。J6オフスーツ（異なるスート）は、フロップ（コミュニティカード）で強い役を作る可能性が低いため、この状況ではフォールド（降りる）のが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 119, 'promptTokenCount': 955, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 955}], 'totalTokenCount': 1074}, 'invocationId': 'e-799ae6c1-31d2-4dc3-8c41-485733b7c48d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'X7BrVYiN', 'timestamp': 1761903959.438821}]
2025-10-31 18:46:01,197 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:46:01,197 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後）で、Jと6という弱いハンドを持っています。ポットのサイズは50で、コールするには10必要ですが、レイズするとさらに多くのお金が必要になります。J6オフスーツ（異なるスート）は、フロップ（コミュニティカード）で強い役を作る可能性が低いため、この状況ではフォールド（降りる）のが最善です。"
}
```
2025-10-31 18:46:01,198 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:46:01,198 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、Jと6という弱いハンドを持っています。ポットのサイズは50で、コールするには10必要ですが、レイズするとさらに多くのお金が必要になります。J6オフスーツ（異なるスート）は、フロップ（コミュニティカード）で強い役を作る可能性が低いため、この状況ではフォールド（降りる）のが最善です。"\n}\n```'
2025-10-31 18:46:01,198 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:46:01,198 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、Jと6という弱いハンドを持っています。ポットのサイズは50で、コールするには10必要ですが、レイズするとさらに多くのお金が必要になります。J6オフスーツ（異なるスート）は、フロップ（コミュニティカード）で強い役を作る可能性が低いため、この状況ではフォールド（降りる）のが最善です。"\n}'
2025-10-31 18:46:01,198 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後）で、Jと6という弱いハンドを持っています。ポットのサイズは50で、コールするには10必要ですが、レイズするとさらに多くのお金が必要になります。J6オフスーツ（異なるスート）は、フロップ（コミュニティカード）で強い役を作る可能性が低いため、この状況ではフォールド（降りる）のが最善です。"
}
2025-10-31 18:46:01,199 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（最初のカードが配られた後）で、Jと6という弱いハンドを持っています。ポットのサイズは50で、コールするには10必要ですが、レイズするとさらに多くのお金が必要になります。J6オフスーツ（異なるスート）は、フロップ（コミュニティカード）で強い役を作る可能性が低いため、この状況ではフォールド（降りる）のが最善です。'}
2025-10-31 18:46:01,199 - poker_game - DEBUG - [Agent2] Extracted values - action: 'fold', amount: 0
2025-10-31 18:46:01,199 - poker_game - DEBUG - [Agent2] Action 'fold' normalized - amount set to 0
2025-10-31 18:46:01,199 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:46:01,199 - poker_game - INFO - [Agent2] Successfully parsed decision: fold, 0, プリフロップ（最初のカードが配られた後）で、Jと6という弱いハンドを持っています。ポットのサイズは50で、コールするには10必要ですが、レイズするとさらに多くのお金が必要になります。J6オフスーツ（異なるスート）は、フロップ（コミュニティカード）で強い役を作る可能性が低いため、この状況ではフォールド（降りる）のが最善です。
2025-10-31 18:46:01,200 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'fold' with amount 0
2025-10-31 18:46:01,200 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:01,200 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:46:01,201 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:46:01,201 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:46:01,201 - poker_game - INFO - Last raiser: 3
2025-10-31 18:46:01,201 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:01,201 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:46:01,201 - poker_game - INFO - Community cards: []
2025-10-31 18:46:01,202 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:01,202 - poker_game - INFO -   P1(Agent1): chips=1890, bet=20, status=active
2025-10-31 18:46:01,202 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=active
2025-10-31 18:46:01,202 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:46:01,203 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:01,203 - poker_game - INFO - ==================================================
2025-10-31 18:46:01,203 - poker_game - INFO - ACTION_EXECUTED: Player 2 folded
2025-10-31 18:46:01,217 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:01,218 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:46:01,218 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:46:01,218 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:46:01,218 - poker_game - INFO - Last raiser: 3
2025-10-31 18:46:01,218 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:01,219 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:01,219 - poker_game - INFO - Community cards: []
2025-10-31 18:46:01,219 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:01,219 - poker_game - INFO -   P1(Agent1): chips=1890, bet=20, status=active
2025-10-31 18:46:01,219 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=folded
2025-10-31 18:46:01,219 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:46:01,219 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:01,220 - poker_game - INFO - Extra: Action: Player 2 folded
2025-10-31 18:46:01,220 - poker_game - INFO - ==================================================
2025-10-31 18:46:01,220 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:01,220 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:01,221 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:46:01,221 - poker_game - INFO - Advanced from player 2 to player 3 (seat order)
2025-10-31 18:46:01,221 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:01,221 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:01,221 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:46:01,221 - poker_game - DEBUG - Player bets: [20, 20], Current bet: 20, All same: True
2025-10-31 18:46:01,221 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 18:46:01,222 - poker_game - DEBUG - Last raiser index: 3
2025-10-31 18:46:01,222 - poker_game - DEBUG - Current player index: 3
2025-10-31 18:46:01,222 - poker_game - DEBUG - Next after last raiser 3: 1
2025-10-31 18:46:01,222 - poker_game - DEBUG - Betting continues: Current player 3 != next after raiser 1
2025-10-31 18:46:01,222 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:01,222 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:46:01,222 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:01,223 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:46:01,223 - poker_game - INFO - Last raiser: 3
2025-10-31 18:46:01,223 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:01,223 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:01,224 - poker_game - INFO - Community cards: []
2025-10-31 18:46:01,224 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:01,224 - poker_game - INFO -   P1(Agent1): chips=1890, bet=20, status=active
2025-10-31 18:46:01,224 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=folded
2025-10-31 18:46:01,224 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:46:01,225 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:01,225 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:46:01,225 - poker_game - INFO - ==================================================
2025-10-31 18:46:01,326 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "8♦",
    "A♣"
  ],
  "community": [],
  "your_chips": 1980,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 50,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 1890,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2170,
      "bet": 10,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 40)",
    "all-in (1980)"
  ],
  "history": [
    "River dealt: 8♥",
    "Player 2 checked",
    "Player 4 checked",
    "Showdown: Player 2 hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣ cards=9♣, A♠",
    "Showdown: Player 4 hand=High Card: A♣ - A♣, K♥, Q♦, 10♥, 9♠ cards=10♥, 9♠",
    "Side pot layer 0: amount=40, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 2 won 30",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 20",
    "Player 2 folded"
  ]
}
2025-10-31 18:46:01,341 - poker_game - DEBUG - Create Session: {'id': 'e9799ae9-7940-4d5e-888b-22171983a366', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761903961.3370888}
2025-10-31 18:46:02,845 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "プリフロップ（preflop）で、まだ誰にもベットがない状況です。私はAと8という強いハンド（手札）を持っているので、参加する価値があります。ポット（pot：これまでの賭け金の合計）は50で、コール（call：相手のベット額と同額を支払うこと）する必要はありません。したがって、チェック（check：ベットせずに自分の番を次に回すこと）を選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 120, 'promptTokenCount': 951, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 951}], 'totalTokenCount': 1071}, 'invocationId': 'e-547ff88b-b080-4b68-9f64-8fc5360bf262', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'FffogloW', 'timestamp': 1761903961.355103}]
2025-10-31 18:46:02,845 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:46:02,845 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "プリフロップ（preflop）で、まだ誰にもベットがない状況です。私はAと8という強いハンド（手札）を持っているので、参加する価値があります。ポット（pot：これまでの賭け金の合計）は50で、コール（call：相手のベット額と同額を支払うこと）する必要はありません。したがって、チェック（check：ベットせずに自分の番を次に回すこと）を選択します。"
}
```
2025-10-31 18:46:02,845 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:46:02,846 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "プリフロップ（preflop）で、まだ誰にもベットがない状況です。私はAと8という強いハンド（手札）を持っているので、参加する価値があります。ポット（pot：これまでの賭け金の合計）は50で、コール（call：相手のベット額と同額を支払うこと）する必要はありません。したがって、チェック（check：ベットせずに自分の番を次に回すこと）を選択します。"\n}\n```'
2025-10-31 18:46:02,846 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:46:02,846 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "プリフロップ（preflop）で、まだ誰にもベットがない状況です。私はAと8という強いハンド（手札）を持っているので、参加する価値があります。ポット（pot：これまでの賭け金の合計）は50で、コール（call：相手のベット額と同額を支払うこと）する必要はありません。したがって、チェック（check：ベットせずに自分の番を次に回すこと）を選択します。"\n}'
2025-10-31 18:46:02,846 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "プリフロップ（preflop）で、まだ誰にもベットがない状況です。私はAと8という強いハンド（手札）を持っているので、参加する価値があります。ポット（pot：これまでの賭け金の合計）は50で、コール（call：相手のベット額と同額を支払うこと）する必要はありません。したがって、チェック（check：ベットせずに自分の番を次に回すこと）を選択します。"
}
2025-10-31 18:46:02,846 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'プリフロップ（preflop）で、まだ誰にもベットがない状況です。私はAと8という強いハンド（手札）を持っているので、参加する価値があります。ポット（pot：これまでの賭け金の合計）は50で、コール（call：相手のベット額と同額を支払うこと）する必要はありません。したがって、チェック（check：ベットせずに自分の番を次に回すこと）を選択します。'}
2025-10-31 18:46:02,846 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 0
2025-10-31 18:46:02,846 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'check', 'raise (min 40)', 'all-in (1980)']
2025-10-31 18:46:02,846 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:46:02,846 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 0, プリフロップ（preflop）で、まだ誰にもベットがない状況です。私はAと8という強いハンド（手札）を持っているので、参加する価値があります。ポット（pot：これまでの賭け金の合計）は50で、コール（call：相手のベット額と同額を支払うこと）する必要はありません。したがって、チェック（check：ベットせずに自分の番を次に回すこと）を選択します。
2025-10-31 18:46:02,847 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 0
2025-10-31 18:46:02,847 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:02,847 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:46:02,848 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:02,848 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:46:02,848 - poker_game - INFO - Last raiser: 3
2025-10-31 18:46:02,848 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:02,848 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:02,849 - poker_game - INFO - Community cards: []
2025-10-31 18:46:02,849 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:02,849 - poker_game - INFO -   P1(Agent1): chips=1890, bet=20, status=active
2025-10-31 18:46:02,849 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=folded
2025-10-31 18:46:02,849 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:46:02,849 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:02,849 - poker_game - INFO - ==================================================
2025-10-31 18:46:02,849 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 18:46:02,862 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:02,862 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:46:02,863 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:02,863 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:46:02,864 - poker_game - INFO - Last raiser: 3
2025-10-31 18:46:02,864 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:02,864 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:02,864 - poker_game - INFO - Community cards: []
2025-10-31 18:46:02,864 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:02,865 - poker_game - INFO -   P1(Agent1): chips=1890, bet=20, status=active
2025-10-31 18:46:02,865 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=folded
2025-10-31 18:46:02,865 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:46:02,865 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:02,865 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 18:46:02,866 - poker_game - INFO - ==================================================
2025-10-31 18:46:02,866 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:02,866 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:02,866 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:46:02,866 - poker_game - INFO - Advanced from player 3 to player 1 (seat order)
2025-10-31 18:46:02,866 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:02,867 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:02,867 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:46:02,867 - poker_game - DEBUG - Player bets: [20, 20], Current bet: 20, All same: True
2025-10-31 18:46:02,867 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 18:46:02,867 - poker_game - DEBUG - Last raiser index: 3
2025-10-31 18:46:02,867 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:46:02,867 - poker_game - DEBUG - Next after last raiser 3: 1
2025-10-31 18:46:02,867 - poker_game - INFO - Betting complete: Back to player 1 after last raiser 3
2025-10-31 18:46:02,868 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:02,868 - poker_game - INFO - Hand #3, Phase: preflop
2025-10-31 18:46:02,868 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:46:02,868 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:46:02,868 - poker_game - INFO - Last raiser: 3
2025-10-31 18:46:02,869 - poker_game - INFO - Betting round complete: True
2025-10-31 18:46:02,869 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:02,869 - poker_game - INFO - Community cards: []
2025-10-31 18:46:02,869 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:02,869 - poker_game - INFO -   P1(Agent1): chips=1890, bet=20, status=active
2025-10-31 18:46:02,869 - poker_game - INFO -   P2(Agent2): chips=2170, bet=10, status=folded
2025-10-31 18:46:02,870 - poker_game - INFO -   P3(Agent3): chips=1980, bet=20, status=active
2025-10-31 18:46:02,870 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:02,870 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:46:02,870 - poker_game - INFO - ==================================================
2025-10-31 18:46:02,971 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:46:02,972 - poker_game - INFO - Betting round complete: True
2025-10-31 18:46:02,972 - poker_game - INFO - Remaining players: 2
2025-10-31 18:46:02,972 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:46:02,973 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:46:02,973 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:46:02,983 - poker_game - INFO - Starting new betting round
2025-10-31 18:46:02,984 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:46:02,984 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:46:02,984 - poker_game - DEBUG - Active players for new betting round: [1, 3]
2025-10-31 18:46:02,985 - poker_game - DEBUG - Dealer button: 1
2025-10-31 18:46:02,985 - poker_game - INFO - First actor: Player 3 (by phase rule), was 1
2025-10-31 18:46:02,985 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:46:02,986 - poker_game - INFO - Hand #3, Phase: flop
2025-10-31 18:46:02,986 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:02,986 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:02,987 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:02,987 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:02,987 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:02,988 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦']
2025-10-31 18:46:02,988 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:02,989 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:02,989 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:02,989 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:02,990 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:02,990 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:46:02,991 - poker_game - INFO - ==================================================
2025-10-31 18:46:02,992 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "flop",
  "your_cards": [
    "8♦",
    "A♣"
  ],
  "community": [
    "5♣",
    "K♣",
    "3♦"
  ],
  "your_chips": 1980,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 50,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 1890,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2170,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1980)"
  ],
  "history": [
    "Player 4 checked",
    "Showdown: Player 2 hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣ cards=9♣, A♠",
    "Showdown: Player 4 hand=High Card: A♣ - A♣, K♥, Q♦, 10♥, 9♠ cards=10♥, 9♠",
    "Side pot layer 0: amount=40, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 2 won 30",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 checked",
    "Flop dealt: 5♣, K♣, 3♦"
  ]
}
2025-10-31 18:46:03,003 - poker_game - DEBUG - Create Session: {'id': '97bd237e-bb28-4789-9f90-1a32937201d9', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761903963.0004559}
2025-10-31 18:46:04,832 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（ボードに出た3枚のカード）は5♣ K♣ 3♦です。あなたの手札はA♣ 8♦です。あなたはAハイ（エースが一番強いカード）ですが、ボードにはペアはありません。フラッシュ（同じマークのカードが3枚揃うこと）の可能性はありますが、あなたにはクラブのカードが1枚しかありません。相手がベットしてきた場合にコールするのに十分な強さではないため、チェック（ベットせずに次のアクションを待つこと）を選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 139, 'promptTokenCount': 976, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 976}], 'totalTokenCount': 1115}, 'invocationId': 'e-ddae334d-d224-45a0-824f-667e03205522', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'qWuXIUOs', 'timestamp': 1761903963.013474}]
2025-10-31 18:46:04,850 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:46:04,850 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（ボードに出た3枚のカード）は5♣ K♣ 3♦です。あなたの手札はA♣ 8♦です。あなたはAハイ（エースが一番強いカード）ですが、ボードにはペアはありません。フラッシュ（同じマークのカードが3枚揃うこと）の可能性はありますが、あなたにはクラブのカードが1枚しかありません。相手がベットしてきた場合にコールするのに十分な強さではないため、チェック（ベットせずに次のアクションを待つこと）を選択します。"
}
```
2025-10-31 18:46:04,851 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:46:04,851 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（ボードに出た3枚のカード）は5♣ K♣ 3♦です。あなたの手札はA♣ 8♦です。あなたはAハイ（エースが一番強いカード）ですが、ボードにはペアはありません。フラッシュ（同じマークのカードが3枚揃うこと）の可能性はありますが、あなたにはクラブのカードが1枚しかありません。相手がベットしてきた場合にコールするのに十分な強さではないため、チェック（ベットせずに次のアクションを待つこと）を選択します。"\n}\n```'
2025-10-31 18:46:04,851 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:46:04,851 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（ボードに出た3枚のカード）は5♣ K♣ 3♦です。あなたの手札はA♣ 8♦です。あなたはAハイ（エースが一番強いカード）ですが、ボードにはペアはありません。フラッシュ（同じマークのカードが3枚揃うこと）の可能性はありますが、あなたにはクラブのカードが1枚しかありません。相手がベットしてきた場合にコールするのに十分な強さではないため、チェック（ベットせずに次のアクションを待つこと）を選択します。"\n}'
2025-10-31 18:46:04,851 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（ボードに出た3枚のカード）は5♣ K♣ 3♦です。あなたの手札はA♣ 8♦です。あなたはAハイ（エースが一番強いカード）ですが、ボードにはペアはありません。フラッシュ（同じマークのカードが3枚揃うこと）の可能性はありますが、あなたにはクラブのカードが1枚しかありません。相手がベットしてきた場合にコールするのに十分な強さではないため、チェック（ベットせずに次のアクションを待つこと）を選択します。"
}
2025-10-31 18:46:04,852 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'フロップ（ボードに出た3枚のカード）は5♣ K♣ 3♦です。あなたの手札はA♣ 8♦です。あなたはAハイ（エースが一番強いカード）ですが、ボードにはペアはありません。フラッシュ（同じマークのカードが3枚揃うこと）の可能性はありますが、あなたにはクラブのカードが1枚しかありません。相手がベットしてきた場合にコールするのに十分な強さではないため、チェック（ベットせずに次のアクションを待つこと）を選択します。'}
2025-10-31 18:46:04,852 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 18:46:04,852 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 18:46:04,852 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:46:04,852 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, フロップ（ボードに出た3枚のカード）は5♣ K♣ 3♦です。あなたの手札はA♣ 8♦です。あなたはAハイ（エースが一番強いカード）ですが、ボードにはペアはありません。フラッシュ（同じマークのカードが3枚揃うこと）の可能性はありますが、あなたにはクラブのカードが1枚しかありません。相手がベットしてきた場合にコールするのに十分な強さではないため、チェック（ベットせずに次のアクションを待つこと）を選択します。
2025-10-31 18:46:04,853 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 18:46:04,854 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:04,854 - poker_game - INFO - Hand #3, Phase: flop
2025-10-31 18:46:04,854 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:04,854 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:04,854 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:04,854 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:04,854 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:04,854 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦']
2025-10-31 18:46:04,854 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:04,855 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:04,855 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:04,855 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:04,855 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:04,855 - poker_game - INFO - ==================================================
2025-10-31 18:46:04,855 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 18:46:04,868 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:04,868 - poker_game - INFO - Hand #3, Phase: flop
2025-10-31 18:46:04,868 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:04,869 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:04,869 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:04,869 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:04,869 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:04,869 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦']
2025-10-31 18:46:04,870 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:04,870 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:04,870 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:04,870 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:04,870 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:04,871 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 18:46:04,871 - poker_game - INFO - ==================================================
2025-10-31 18:46:04,871 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:04,871 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:04,871 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:46:04,871 - poker_game - INFO - Advanced from player 3 to player 1 (seat order)
2025-10-31 18:46:04,871 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:04,872 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:04,872 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:46:04,872 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:46:04,872 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 18:46:04,872 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:46:04,872 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:46:04,872 - poker_game - DEBUG - First actor index: 3
2025-10-31 18:46:04,872 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 3
2025-10-31 18:46:04,872 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:04,873 - poker_game - INFO - Hand #3, Phase: flop
2025-10-31 18:46:04,873 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:46:04,877 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:04,877 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:04,877 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:04,878 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:04,879 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦']
2025-10-31 18:46:04,879 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:04,879 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:04,879 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:04,880 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:04,880 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:04,882 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:46:04,882 - poker_game - INFO - ==================================================
2025-10-31 18:46:04,983 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "flop",
  "your_cards": [
    "J♠",
    "8♠"
  ],
  "community": [
    "5♣",
    "K♣",
    "3♦"
  ],
  "your_chips": 1890,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 50,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 2170,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1980,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1890)"
  ],
  "history": [
    "Showdown: Player 2 hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣ cards=9♣, A♠",
    "Showdown: Player 4 hand=High Card: A♣ - A♣, K♥, Q♦, 10♥, 9♠ cards=10♥, 9♠",
    "Side pot layer 0: amount=40, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 2 won 30",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 checked",
    "Flop dealt: 5♣, K♣, 3♦",
    "Player 3 checked"
  ]
}
2025-10-31 18:46:04,996 - poker_game - DEBUG - Create Session: {'id': '37ea7ccc-cae4-4de4-b8af-275c5fb3bf11', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761903964.9943094}
2025-10-31 18:46:07,277 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（ボードに開かれた3枚のカード）では、私の手札（J♠, 8♠）とコミュニティカード（5♣, K♣, 3♦）を合わせても、まだ強い役（強いペアやフラッシュなど）はできていません。しかし、相手（プレイヤー3）もチェックしているので、現時点ではリスクを冒さずに次のカード（ターン）を見るのが最善です。フロップでチェックすることは、自分の手札が強くないことを相手に悟られずに、次のカードを見る機会を得ることです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 147, 'promptTokenCount': 976, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 976}], 'totalTokenCount': 1123}, 'invocationId': 'e-79709ef7-5056-46b0-a482-39b202077385', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'MLV83WDt', 'timestamp': 1761903965.009292}]
2025-10-31 18:46:07,277 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:46:07,277 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（ボードに開かれた3枚のカード）では、私の手札（J♠, 8♠）とコミュニティカード（5♣, K♣, 3♦）を合わせても、まだ強い役（強いペアやフラッシュなど）はできていません。しかし、相手（プレイヤー3）もチェックしているので、現時点ではリスクを冒さずに次のカード（ターン）を見るのが最善です。フロップでチェックすることは、自分の手札が強くないことを相手に悟られずに、次のカードを見る機会を得ることです。"
}
```
2025-10-31 18:46:07,277 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:46:07,278 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（ボードに開かれた3枚のカード）では、私の手札（J♠, 8♠）とコミュニティカード（5♣, K♣, 3♦）を合わせても、まだ強い役（強いペアやフラッシュなど）はできていません。しかし、相手（プレイヤー3）もチェックしているので、現時点ではリスクを冒さずに次のカード（ターン）を見るのが最善です。フロップでチェックすることは、自分の手札が強くないことを相手に悟られずに、次のカードを見る機会を得ることです。"\n}\n```'
2025-10-31 18:46:07,278 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:46:07,278 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（ボードに開かれた3枚のカード）では、私の手札（J♠, 8♠）とコミュニティカード（5♣, K♣, 3♦）を合わせても、まだ強い役（強いペアやフラッシュなど）はできていません。しかし、相手（プレイヤー3）もチェックしているので、現時点ではリスクを冒さずに次のカード（ターン）を見るのが最善です。フロップでチェックすることは、自分の手札が強くないことを相手に悟られずに、次のカードを見る機会を得ることです。"\n}'
2025-10-31 18:46:07,278 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（ボードに開かれた3枚のカード）では、私の手札（J♠, 8♠）とコミュニティカード（5♣, K♣, 3♦）を合わせても、まだ強い役（強いペアやフラッシュなど）はできていません。しかし、相手（プレイヤー3）もチェックしているので、現時点ではリスクを冒さずに次のカード（ターン）を見るのが最善です。フロップでチェックすることは、自分の手札が強くないことを相手に悟られずに、次のカードを見る機会を得ることです。"
}
2025-10-31 18:46:07,278 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'フロップ（ボードに開かれた3枚のカード）では、私の手札（J♠, 8♠）とコミュニティカード（5♣, K♣, 3♦）を合わせても、まだ強い役（強いペアやフラッシュなど）はできていません。しかし、相手（プレイヤー3）もチェックしているので、現時点ではリスクを冒さずに次のカード（ターン）を見るのが最善です。フロップでチェックすることは、自分の手札が強くないことを相手に悟られずに、次のカードを見る機会を得ることです。'}
2025-10-31 18:46:07,278 - poker_game - DEBUG - [Agent1] Extracted values - action: 'check', amount: 0
2025-10-31 18:46:07,278 - poker_game - DEBUG - [Agent1] Action 'check' normalized - amount set to 0
2025-10-31 18:46:07,278 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:46:07,279 - poker_game - INFO - [Agent1] Successfully parsed decision: check, 0, フロップ（ボードに開かれた3枚のカード）では、私の手札（J♠, 8♠）とコミュニティカード（5♣, K♣, 3♦）を合わせても、まだ強い役（強いペアやフラッシュなど）はできていません。しかし、相手（プレイヤー3）もチェックしているので、現時点ではリスクを冒さずに次のカード（ターン）を見るのが最善です。フロップでチェックすることは、自分の手札が強くないことを相手に悟られずに、次のカードを見る機会を得ることです。
2025-10-31 18:46:07,279 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'check' with amount 0
2025-10-31 18:46:07,279 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:07,280 - poker_game - INFO - Hand #3, Phase: flop
2025-10-31 18:46:07,280 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:46:07,280 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:07,280 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:07,280 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:07,281 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:07,281 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦']
2025-10-31 18:46:07,282 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:07,282 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:07,282 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:07,282 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:07,282 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:07,283 - poker_game - INFO - ==================================================
2025-10-31 18:46:07,283 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:46:07,300 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:07,300 - poker_game - INFO - Hand #3, Phase: flop
2025-10-31 18:46:07,301 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:46:07,301 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:07,301 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:07,301 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:07,301 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:07,301 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦']
2025-10-31 18:46:07,302 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:07,302 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:07,302 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:07,302 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:07,302 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:07,302 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:46:07,302 - poker_game - INFO - ==================================================
2025-10-31 18:46:07,302 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:07,303 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:07,303 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:46:07,303 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 18:46:07,303 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:07,303 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:07,303 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:46:07,303 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:46:07,303 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 18:46:07,303 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:46:07,303 - poker_game - DEBUG - Current player index: 3
2025-10-31 18:46:07,303 - poker_game - DEBUG - First actor index: 3
2025-10-31 18:46:07,303 - poker_game - INFO - Betting complete: Back to first actor 3 (all players have acted)
2025-10-31 18:46:07,304 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:07,304 - poker_game - INFO - Hand #3, Phase: flop
2025-10-31 18:46:07,304 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:07,304 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:07,304 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:07,304 - poker_game - INFO - Betting round complete: True
2025-10-31 18:46:07,304 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:07,304 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦']
2025-10-31 18:46:07,305 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:07,305 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:07,305 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:07,305 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:07,305 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:07,305 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:46:07,305 - poker_game - INFO - ==================================================
2025-10-31 18:46:07,406 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:46:07,406 - poker_game - INFO - Betting round complete: True
2025-10-31 18:46:07,407 - poker_game - INFO - Remaining players: 2
2025-10-31 18:46:07,407 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:46:07,408 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:46:07,408 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 18:46:07,418 - poker_game - INFO - Starting new betting round
2025-10-31 18:46:07,418 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:46:07,419 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:46:07,419 - poker_game - DEBUG - Active players for new betting round: [1, 3]
2025-10-31 18:46:07,419 - poker_game - DEBUG - Dealer button: 1
2025-10-31 18:46:07,419 - poker_game - INFO - First actor: Player 3 (by phase rule), was 3
2025-10-31 18:46:07,420 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:46:07,420 - poker_game - INFO - Hand #3, Phase: turn
2025-10-31 18:46:07,421 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:07,421 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:07,421 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:07,421 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:07,422 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:07,422 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣']
2025-10-31 18:46:07,422 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:07,423 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:07,423 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:07,423 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:07,424 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:07,424 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 18:46:07,424 - poker_game - INFO - ==================================================
2025-10-31 18:46:07,426 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "turn",
  "your_cards": [
    "8♦",
    "A♣"
  ],
  "community": [
    "5♣",
    "K♣",
    "3♦",
    "10♣"
  ],
  "your_chips": 1980,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 50,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 1890,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2170,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1980)"
  ],
  "history": [
    "Side pot layer 0: amount=40, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 2 won 30",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 checked",
    "Flop dealt: 5♣, K♣, 3♦",
    "Player 3 checked",
    "Player 1 checked",
    "Turn dealt: 10♣"
  ]
}
2025-10-31 18:46:07,438 - poker_game - DEBUG - Create Session: {'id': '5e7b9d39-4cc4-4fff-b77c-dc3b2413182a', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761903967.435731}
2025-10-31 18:46:09,861 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在のターンでは、コミュニティカードにA（エース）がないため、あなたのA♣はフロップでトップペア（最も強いペア）を作っています。しかし、フロップでK（キング）も出ているため、相手がKを持っている可能性もあります。ターンで10♣が出たことで、フラッシュ（同じマークのカードが5枚揃うこと）の可能性が生まれました。あなたがフラッシュを持っているわけではありませんが、相手がフラッシュを持っている可能性はあります。現時点では、相手がベットしてきたわけではなく、コール（相手のベット額と同額を支払うこと）も必要ないため、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択するのが安全です。これにより、次のカード（リバー）を見てから判断できます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 190, 'promptTokenCount': 919, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 919}], 'totalTokenCount': 1109}, 'invocationId': 'e-f7c789f3-f73d-4661-b4d0-23fa61523d34', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'TPth0gvz', 'timestamp': 1761903967.448914}]
2025-10-31 18:46:09,861 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:46:09,861 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "現在のターンでは、コミュニティカードにA（エース）がないため、あなたのA♣はフロップでトップペア（最も強いペア）を作っています。しかし、フロップでK（キング）も出ているため、相手がKを持っている可能性もあります。ターンで10♣が出たことで、フラッシュ（同じマークのカードが5枚揃うこと）の可能性が生まれました。あなたがフラッシュを持っているわけではありませんが、相手がフラッシュを持っている可能性はあります。現時点では、相手がベットしてきたわけではなく、コール（相手のベット額と同額を支払うこと）も必要ないため、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択するのが安全です。これにより、次のカード（リバー）を見てから判断できます。"
}
```
2025-10-31 18:46:09,862 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:46:09,862 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在のターンでは、コミュニティカードにA（エース）がないため、あなたのA♣はフロップでトップペア（最も強いペア）を作っています。しかし、フロップでK（キング）も出ているため、相手がKを持っている可能性もあります。ターンで10♣が出たことで、フラッシュ（同じマークのカードが5枚揃うこと）の可能性が生まれました。あなたがフラッシュを持っているわけではありませんが、相手がフラッシュを持っている可能性はあります。現時点では、相手がベットしてきたわけではなく、コール（相手のベット額と同額を支払うこと）も必要ないため、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択するのが安全です。これにより、次のカード（リバー）を見てから判断できます。"\n}\n```'
2025-10-31 18:46:09,862 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:46:09,862 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在のターンでは、コミュニティカードにA（エース）がないため、あなたのA♣はフロップでトップペア（最も強いペア）を作っています。しかし、フロップでK（キング）も出ているため、相手がKを持っている可能性もあります。ターンで10♣が出たことで、フラッシュ（同じマークのカードが5枚揃うこと）の可能性が生まれました。あなたがフラッシュを持っているわけではありませんが、相手がフラッシュを持っている可能性はあります。現時点では、相手がベットしてきたわけではなく、コール（相手のベット額と同額を支払うこと）も必要ないため、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択するのが安全です。これにより、次のカード（リバー）を見てから判断できます。"\n}'
2025-10-31 18:46:09,862 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "現在のターンでは、コミュニティカードにA（エース）がないため、あなたのA♣はフロップでトップペア（最も強いペア）を作っています。しかし、フロップでK（キング）も出ているため、相手がKを持っている可能性もあります。ターンで10♣が出たことで、フラッシュ（同じマークのカードが5枚揃うこと）の可能性が生まれました。あなたがフラッシュを持っているわけではありませんが、相手がフラッシュを持っている可能性はあります。現時点では、相手がベットしてきたわけではなく、コール（相手のベット額と同額を支払うこと）も必要ないため、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択するのが安全です。これにより、次のカード（リバー）を見てから判断できます。"
}
2025-10-31 18:46:09,862 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '現在のターンでは、コミュニティカードにA（エース）がないため、あなたのA♣はフロップでトップペア（最も強いペア）を作っています。しかし、フロップでK（キング）も出ているため、相手がKを持っている可能性もあります。ターンで10♣が出たことで、フラッシュ（同じマークのカードが5枚揃うこと）の可能性が生まれました。あなたがフラッシュを持っているわけではありませんが、相手がフラッシュを持っている可能性はあります。現時点では、相手がベットしてきたわけではなく、コール（相手のベット額と同額を支払うこと）も必要ないため、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択するのが安全です。これにより、次のカード（リバー）を見てから判断できます。'}
2025-10-31 18:46:09,862 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 18:46:09,862 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 18:46:09,862 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:46:09,862 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, 現在のターンでは、コミュニティカードにA（エース）がないため、あなたのA♣はフロップでトップペア（最も強いペア）を作っています。しかし、フロップでK（キング）も出ているため、相手がKを持っている可能性もあります。ターンで10♣が出たことで、フラッシュ（同じマークのカードが5枚揃うこと）の可能性が生まれました。あなたがフラッシュを持っているわけではありませんが、相手がフラッシュを持っている可能性はあります。現時点では、相手がベットしてきたわけではなく、コール（相手のベット額と同額を支払うこと）も必要ないため、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択するのが安全です。これにより、次のカード（リバー）を見てから判断できます。
2025-10-31 18:46:09,863 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 18:46:09,864 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:09,864 - poker_game - INFO - Hand #3, Phase: turn
2025-10-31 18:46:09,864 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:09,864 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:09,865 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:09,865 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:09,865 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:09,865 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣']
2025-10-31 18:46:09,865 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:09,865 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:09,866 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:09,866 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:09,866 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:09,866 - poker_game - INFO - ==================================================
2025-10-31 18:46:09,866 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 18:46:09,879 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:09,879 - poker_game - INFO - Hand #3, Phase: turn
2025-10-31 18:46:09,879 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:09,880 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:09,880 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:09,880 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:09,880 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:09,881 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣']
2025-10-31 18:46:09,881 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:09,881 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:09,881 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:09,881 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:09,882 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:09,882 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 18:46:09,882 - poker_game - INFO - ==================================================
2025-10-31 18:46:09,882 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:09,882 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:09,883 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:46:09,883 - poker_game - INFO - Advanced from player 3 to player 1 (seat order)
2025-10-31 18:46:09,883 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:09,883 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:09,883 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:46:09,883 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:46:09,883 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 18:46:09,883 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:46:09,883 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:46:09,883 - poker_game - DEBUG - First actor index: 3
2025-10-31 18:46:09,883 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 3
2025-10-31 18:46:09,883 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:09,883 - poker_game - INFO - Hand #3, Phase: turn
2025-10-31 18:46:09,884 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:46:09,884 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:09,884 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:09,884 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:09,884 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:09,884 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣']
2025-10-31 18:46:09,885 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:09,885 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:09,885 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:09,885 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:09,885 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:09,886 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:46:09,886 - poker_game - INFO - ==================================================
2025-10-31 18:46:09,987 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "turn",
  "your_cards": [
    "J♠",
    "8♠"
  ],
  "community": [
    "5♣",
    "K♣",
    "3♦",
    "10♣"
  ],
  "your_chips": 1890,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 50,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 2170,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1980,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1890)"
  ],
  "history": [
    "Side pot layer 1: amount=210, winners=2 best_hand=One Pair: As - A♠, A♣, K♥, Q♦, 9♣",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 2 won 30",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 checked",
    "Flop dealt: 5♣, K♣, 3♦",
    "Player 3 checked",
    "Player 1 checked",
    "Turn dealt: 10♣",
    "Player 3 checked"
  ]
}
2025-10-31 18:46:09,999 - poker_game - DEBUG - Create Session: {'id': 'bf4dff4b-4747-4982-b337-373d5d4f27af', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761903969.9964333}
2025-10-31 18:46:12,119 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "あなたの手札はJ♠8♠です。コミュニティカードは5♣ K♣ 3♦ 10♣で、フラッシュ（同じマークが5枚揃うこと）の可能性ができています。あなたはスペードを2枚持っていますが、コミュニティカードにはスペードはありません。しかし、相手（プレイヤー3）はチェックを続けているため、大きなハンドを持っていない可能性が高いです。ポットは50で、コールするためにベットする必要はありません（to_callが0）。そのため、チェックをして次のカード（リバー）を見るのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 150, 'promptTokenCount': 885, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 885}], 'totalTokenCount': 1035}, 'invocationId': 'e-ed85c3f5-6906-4d83-8732-a721896589c8', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'I1AklFf9', 'timestamp': 1761903970.010051}]
2025-10-31 18:46:12,120 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:46:12,120 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "あなたの手札はJ♠8♠です。コミュニティカードは5♣ K♣ 3♦ 10♣で、フラッシュ（同じマークが5枚揃うこと）の可能性ができています。あなたはスペードを2枚持っていますが、コミュニティカードにはスペードはありません。しかし、相手（プレイヤー3）はチェックを続けているため、大きなハンドを持っていない可能性が高いです。ポットは50で、コールするためにベットする必要はありません（to_callが0）。そのため、チェックをして次のカード（リバー）を見るのが最善です。"
}
```
2025-10-31 18:46:12,120 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:46:12,120 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "あなたの手札はJ♠8♠です。コミュニティカードは5♣ K♣ 3♦ 10♣で、フラッシュ（同じマークが5枚揃うこと）の可能性ができています。あなたはスペードを2枚持っていますが、コミュニティカードにはスペードはありません。しかし、相手（プレイヤー3）はチェックを続けているため、大きなハンドを持っていない可能性が高いです。ポットは50で、コールするためにベットする必要はありません（to_callが0）。そのため、チェックをして次のカード（リバー）を見るのが最善です。"\n}\n```'
2025-10-31 18:46:12,120 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:46:12,120 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "あなたの手札はJ♠8♠です。コミュニティカードは5♣ K♣ 3♦ 10♣で、フラッシュ（同じマークが5枚揃うこと）の可能性ができています。あなたはスペードを2枚持っていますが、コミュニティカードにはスペードはありません。しかし、相手（プレイヤー3）はチェックを続けているため、大きなハンドを持っていない可能性が高いです。ポットは50で、コールするためにベットする必要はありません（to_callが0）。そのため、チェックをして次のカード（リバー）を見るのが最善です。"\n}'
2025-10-31 18:46:12,120 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "あなたの手札はJ♠8♠です。コミュニティカードは5♣ K♣ 3♦ 10♣で、フラッシュ（同じマークが5枚揃うこと）の可能性ができています。あなたはスペードを2枚持っていますが、コミュニティカードにはスペードはありません。しかし、相手（プレイヤー3）はチェックを続けているため、大きなハンドを持っていない可能性が高いです。ポットは50で、コールするためにベットする必要はありません（to_callが0）。そのため、チェックをして次のカード（リバー）を見るのが最善です。"
}
2025-10-31 18:46:12,122 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'あなたの手札はJ♠8♠です。コミュニティカードは5♣ K♣ 3♦ 10♣で、フラッシュ（同じマークが5枚揃うこと）の可能性ができています。あなたはスペードを2枚持っていますが、コミュニティカードにはスペードはありません。しかし、相手（プレイヤー3）はチェックを続けているため、大きなハンドを持っていない可能性が高いです。ポットは50で、コールするためにベットする必要はありません（to_callが0）。そのため、チェックをして次のカード（リバー）を見るのが最善です。'}
2025-10-31 18:46:12,122 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 0
2025-10-31 18:46:12,122 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1890)']
2025-10-31 18:46:12,122 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:46:12,122 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 0, あなたの手札はJ♠8♠です。コミュニティカードは5♣ K♣ 3♦ 10♣で、フラッシュ（同じマークが5枚揃うこと）の可能性ができています。あなたはスペードを2枚持っていますが、コミュニティカードにはスペードはありません。しかし、相手（プレイヤー3）はチェックを続けているため、大きなハンドを持っていない可能性が高いです。ポットは50で、コールするためにベットする必要はありません（to_callが0）。そのため、チェックをして次のカード（リバー）を見るのが最善です。
2025-10-31 18:46:12,123 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 0
2025-10-31 18:46:12,123 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:12,123 - poker_game - INFO - Hand #3, Phase: turn
2025-10-31 18:46:12,124 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:46:12,124 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:12,124 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:12,125 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:12,125 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:12,125 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣']
2025-10-31 18:46:12,125 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:12,125 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:12,125 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:12,126 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:12,126 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:12,126 - poker_game - INFO - ==================================================
2025-10-31 18:46:12,126 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:46:12,139 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:12,139 - poker_game - INFO - Hand #3, Phase: turn
2025-10-31 18:46:12,139 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:46:12,139 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:12,140 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:12,140 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:12,140 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:12,140 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣']
2025-10-31 18:46:12,141 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:12,141 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:12,141 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:12,141 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:12,141 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:12,142 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:46:12,142 - poker_game - INFO - ==================================================
2025-10-31 18:46:12,142 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:12,142 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:12,143 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:46:12,143 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 18:46:12,143 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:12,143 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:12,143 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:46:12,143 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:46:12,143 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 18:46:12,144 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:46:12,144 - poker_game - DEBUG - Current player index: 3
2025-10-31 18:46:12,144 - poker_game - DEBUG - First actor index: 3
2025-10-31 18:46:12,144 - poker_game - INFO - Betting complete: Back to first actor 3 (all players have acted)
2025-10-31 18:46:12,147 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:12,147 - poker_game - INFO - Hand #3, Phase: turn
2025-10-31 18:46:12,148 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:12,149 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:12,151 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:12,151 - poker_game - INFO - Betting round complete: True
2025-10-31 18:46:12,151 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:12,152 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣']
2025-10-31 18:46:12,153 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:12,153 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:12,154 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:12,154 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:12,154 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:12,154 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:46:12,155 - poker_game - INFO - ==================================================
2025-10-31 18:46:12,255 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 18:46:12,256 - poker_game - INFO - Betting round complete: True
2025-10-31 18:46:12,256 - poker_game - INFO - Remaining players: 2
2025-10-31 18:46:12,257 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:46:12,257 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:46:12,257 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 18:46:12,282 - poker_game - INFO - Starting new betting round
2025-10-31 18:46:12,283 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:46:12,283 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:46:12,283 - poker_game - DEBUG - Active players for new betting round: [1, 3]
2025-10-31 18:46:12,284 - poker_game - DEBUG - Dealer button: 1
2025-10-31 18:46:12,284 - poker_game - INFO - First actor: Player 3 (by phase rule), was 3
2025-10-31 18:46:12,284 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:46:12,285 - poker_game - INFO - Hand #3, Phase: river
2025-10-31 18:46:12,285 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:12,285 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:12,286 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:12,286 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:12,286 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:12,286 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣', '2♥']
2025-10-31 18:46:12,287 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:12,287 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:12,287 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:12,287 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:12,288 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:12,288 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 18:46:12,288 - poker_game - INFO - ==================================================
2025-10-31 18:46:12,289 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "river",
  "your_cards": [
    "8♦",
    "A♣"
  ],
  "community": [
    "5♣",
    "K♣",
    "3♦",
    "10♣",
    "2♥"
  ],
  "your_chips": 1980,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 50,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 1890,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2170,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1980)"
  ],
  "history": [
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 2 won 30",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 checked",
    "Flop dealt: 5♣, K♣, 3♦",
    "Player 3 checked",
    "Player 1 checked",
    "Turn dealt: 10♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 2♥"
  ]
}
2025-10-31 18:46:12,301 - poker_game - DEBUG - Create Session: {'id': '11f65de1-ca52-430a-bb75-0a894d5efc42', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761903972.29922}
2025-10-31 18:46:11,841 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札はAハイ（エースが一番強いカード）ですが、コミュニティカードにはフラッシュ（同じマークのカードが5枚揃うこと）が完成しています（K♣、10♣、5♣）。あなたの手札のA♣は、このフラッシュよりも強いカードではありません。対戦相手がベットしていない（チェックしている）ため、こちらもチェックしてショーダウン（カードを見せ合うこと）に進みます。無理にレイズ（ベット額を上げる）をする必要はありません。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 143, 'promptTokenCount': 853, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 853}], 'totalTokenCount': 996}, 'invocationId': 'e-54079680-a677-49c0-9c31-9c28698fb26d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'LQNHYJrF', 'timestamp': 1761903972.311327}]
2025-10-31 18:46:11,841 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:46:11,841 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ラウンド）で、あなたの手札はAハイ（エースが一番強いカード）ですが、コミュニティカードにはフラッシュ（同じマークのカードが5枚揃うこと）が完成しています（K♣、10♣、5♣）。あなたの手札のA♣は、このフラッシュよりも強いカードではありません。対戦相手がベットしていない（チェックしている）ため、こちらもチェックしてショーダウン（カードを見せ合うこと）に進みます。無理にレイズ（ベット額を上げる）をする必要はありません。"
}
```
2025-10-31 18:46:11,842 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:46:11,842 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札はAハイ（エースが一番強いカード）ですが、コミュニティカードにはフラッシュ（同じマークのカードが5枚揃うこと）が完成しています（K♣、10♣、5♣）。あなたの手札のA♣は、このフラッシュよりも強いカードではありません。対戦相手がベットしていない（チェックしている）ため、こちらもチェックしてショーダウン（カードを見せ合うこと）に進みます。無理にレイズ（ベット額を上げる）をする必要はありません。"\n}\n```'
2025-10-31 18:46:11,842 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:46:11,842 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札はAハイ（エースが一番強いカード）ですが、コミュニティカードにはフラッシュ（同じマークのカードが5枚揃うこと）が完成しています（K♣、10♣、5♣）。あなたの手札のA♣は、このフラッシュよりも強いカードではありません。対戦相手がベットしていない（チェックしている）ため、こちらもチェックしてショーダウン（カードを見せ合うこと）に進みます。無理にレイズ（ベット額を上げる）をする必要はありません。"\n}'
2025-10-31 18:46:11,842 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ラウンド）で、あなたの手札はAハイ（エースが一番強いカード）ですが、コミュニティカードにはフラッシュ（同じマークのカードが5枚揃うこと）が完成しています（K♣、10♣、5♣）。あなたの手札のA♣は、このフラッシュよりも強いカードではありません。対戦相手がベットしていない（チェックしている）ため、こちらもチェックしてショーダウン（カードを見せ合うこと）に進みます。無理にレイズ（ベット額を上げる）をする必要はありません。"
}
2025-10-31 18:46:11,842 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最終ラウンド）で、あなたの手札はAハイ（エースが一番強いカード）ですが、コミュニティカードにはフラッシュ（同じマークのカードが5枚揃うこと）が完成しています（K♣、10♣、5♣）。あなたの手札のA♣は、このフラッシュよりも強いカードではありません。対戦相手がベットしていない（チェックしている）ため、こちらもチェックしてショーダウン（カードを見せ合うこと）に進みます。無理にレイズ（ベット額を上げる）をする必要はありません。'}
2025-10-31 18:46:11,842 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 18:46:11,842 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 18:46:11,842 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:46:11,843 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, リバー（最終ラウンド）で、あなたの手札はAハイ（エースが一番強いカード）ですが、コミュニティカードにはフラッシュ（同じマークのカードが5枚揃うこと）が完成しています（K♣、10♣、5♣）。あなたの手札のA♣は、このフラッシュよりも強いカードではありません。対戦相手がベットしていない（チェックしている）ため、こちらもチェックしてショーダウン（カードを見せ合うこと）に進みます。無理にレイズ（ベット額を上げる）をする必要はありません。
2025-10-31 18:46:11,843 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 18:46:11,843 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:11,844 - poker_game - INFO - Hand #3, Phase: river
2025-10-31 18:46:11,844 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:11,844 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:11,844 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:11,844 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:11,844 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:11,845 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣', '2♥']
2025-10-31 18:46:11,845 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:11,845 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:11,845 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:11,845 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:11,845 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:11,845 - poker_game - INFO - ==================================================
2025-10-31 18:46:11,846 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 18:46:11,861 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:11,861 - poker_game - INFO - Hand #3, Phase: river
2025-10-31 18:46:11,861 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:11,862 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:11,862 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:11,862 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:11,862 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:11,862 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣', '2♥']
2025-10-31 18:46:11,863 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:11,863 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:11,863 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:11,863 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:11,864 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:11,864 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 18:46:11,864 - poker_game - INFO - ==================================================
2025-10-31 18:46:11,864 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:11,865 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:11,865 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:46:11,865 - poker_game - INFO - Advanced from player 3 to player 1 (seat order)
2025-10-31 18:46:11,865 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:11,865 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:11,866 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:46:11,866 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:46:11,866 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 18:46:11,866 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:46:11,866 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:46:11,866 - poker_game - DEBUG - First actor index: 3
2025-10-31 18:46:11,866 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 3
2025-10-31 18:46:11,866 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:11,867 - poker_game - INFO - Hand #3, Phase: river
2025-10-31 18:46:11,868 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:46:11,868 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:11,868 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:11,868 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:11,868 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:11,869 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣', '2♥']
2025-10-31 18:46:11,869 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:11,869 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:11,869 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:11,869 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:11,869 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:11,870 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:46:11,870 - poker_game - INFO - ==================================================
2025-10-31 18:46:11,971 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "river",
  "your_cards": [
    "J♠",
    "8♠"
  ],
  "community": [
    "5♣",
    "K♣",
    "3♦",
    "10♣",
    "2♥"
  ],
  "your_chips": 1890,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 50,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1990,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 2170,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1980,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1920,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1890)"
  ],
  "history": [
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 2 won 30",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 checked",
    "Flop dealt: 5♣, K♣, 3♦",
    "Player 3 checked",
    "Player 1 checked",
    "Turn dealt: 10♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 2♥",
    "Player 3 checked"
  ]
}
2025-10-31 18:46:11,991 - poker_game - DEBUG - Create Session: {'id': '817417b2-e03f-4c23-9361-da4465cafc2c', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761903971.986021}
2025-10-31 18:46:14,097 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、ボードにクラブが3枚（K♣、10♣、5♣）あり、フラッシュの可能性があります。しかし、私の手札にはスペードのJと8（J♠、8♠）しかなく、クラブはありません。したがって、フラッシュは完成しません。相手（プレイヤー3）はチェックしたので、こちらもチェックし、ショーダウン（カードを開いて勝者を決めること）に進みます。現時点での勝負の可能性は低いですが、無理にベットして負けを増やす必要はありません。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 148, 'promptTokenCount': 848, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 848}], 'totalTokenCount': 996}, 'invocationId': 'e-a55abe9a-8317-43fe-81a5-71768376879f', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '8ikNFSKa', 'timestamp': 1761903972.004547}]
2025-10-31 18:46:14,098 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:46:14,098 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ストリート）で、ボードにクラブが3枚（K♣、10♣、5♣）あり、フラッシュの可能性があります。しかし、私の手札にはスペードのJと8（J♠、8♠）しかなく、クラブはありません。したがって、フラッシュは完成しません。相手（プレイヤー3）はチェックしたので、こちらもチェックし、ショーダウン（カードを開いて勝者を決めること）に進みます。現時点での勝負の可能性は低いですが、無理にベットして負けを増やす必要はありません。"
}
```
2025-10-31 18:46:14,099 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:46:14,100 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、ボードにクラブが3枚（K♣、10♣、5♣）あり、フラッシュの可能性があります。しかし、私の手札にはスペードのJと8（J♠、8♠）しかなく、クラブはありません。したがって、フラッシュは完成しません。相手（プレイヤー3）はチェックしたので、こちらもチェックし、ショーダウン（カードを開いて勝者を決めること）に進みます。現時点での勝負の可能性は低いですが、無理にベットして負けを増やす必要はありません。"\n}\n```'
2025-10-31 18:46:14,100 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:46:14,100 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、ボードにクラブが3枚（K♣、10♣、5♣）あり、フラッシュの可能性があります。しかし、私の手札にはスペードのJと8（J♠、8♠）しかなく、クラブはありません。したがって、フラッシュは完成しません。相手（プレイヤー3）はチェックしたので、こちらもチェックし、ショーダウン（カードを開いて勝者を決めること）に進みます。現時点での勝負の可能性は低いですが、無理にベットして負けを増やす必要はありません。"\n}'
2025-10-31 18:46:14,100 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ストリート）で、ボードにクラブが3枚（K♣、10♣、5♣）あり、フラッシュの可能性があります。しかし、私の手札にはスペードのJと8（J♠、8♠）しかなく、クラブはありません。したがって、フラッシュは完成しません。相手（プレイヤー3）はチェックしたので、こちらもチェックし、ショーダウン（カードを開いて勝者を決めること）に進みます。現時点での勝負の可能性は低いですが、無理にベットして負けを増やす必要はありません。"
}
2025-10-31 18:46:14,101 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最終ストリート）で、ボードにクラブが3枚（K♣、10♣、5♣）あり、フラッシュの可能性があります。しかし、私の手札にはスペードのJと8（J♠、8♠）しかなく、クラブはありません。したがって、フラッシュは完成しません。相手（プレイヤー3）はチェックしたので、こちらもチェックし、ショーダウン（カードを開いて勝者を決めること）に進みます。現時点での勝負の可能性は低いですが、無理にベットして負けを増やす必要はありません。'}
2025-10-31 18:46:14,101 - poker_game - DEBUG - [Agent1] Extracted values - action: 'check', amount: 0
2025-10-31 18:46:14,101 - poker_game - DEBUG - [Agent1] Action 'check' normalized - amount set to 0
2025-10-31 18:46:14,101 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:46:14,101 - poker_game - INFO - [Agent1] Successfully parsed decision: check, 0, リバー（最終ストリート）で、ボードにクラブが3枚（K♣、10♣、5♣）あり、フラッシュの可能性があります。しかし、私の手札にはスペードのJと8（J♠、8♠）しかなく、クラブはありません。したがって、フラッシュは完成しません。相手（プレイヤー3）はチェックしたので、こちらもチェックし、ショーダウン（カードを開いて勝者を決めること）に進みます。現時点での勝負の可能性は低いですが、無理にベットして負けを増やす必要はありません。
2025-10-31 18:46:14,102 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'check' with amount 0
2025-10-31 18:46:14,102 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:14,103 - poker_game - INFO - Hand #3, Phase: river
2025-10-31 18:46:14,103 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:46:14,103 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:14,103 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:14,103 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:14,104 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:14,104 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣', '2♥']
2025-10-31 18:46:14,104 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:14,104 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:14,104 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:14,105 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:14,105 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:14,105 - poker_game - INFO - ==================================================
2025-10-31 18:46:14,105 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:46:14,140 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:14,141 - poker_game - INFO - Hand #3, Phase: river
2025-10-31 18:46:14,141 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:46:14,141 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:14,141 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:14,141 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:14,142 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:14,142 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣', '2♥']
2025-10-31 18:46:14,142 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:14,142 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:14,143 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:14,143 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:14,143 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:14,143 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:46:14,143 - poker_game - INFO - ==================================================
2025-10-31 18:46:14,144 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:14,144 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:14,144 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:46:14,144 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 18:46:14,144 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:14,144 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:14,145 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:46:14,145 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:46:14,145 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 18:46:14,145 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:46:14,145 - poker_game - DEBUG - Current player index: 3
2025-10-31 18:46:14,146 - poker_game - DEBUG - First actor index: 3
2025-10-31 18:46:14,146 - poker_game - INFO - Betting complete: Back to first actor 3 (all players have acted)
2025-10-31 18:46:14,146 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:14,146 - poker_game - INFO - Hand #3, Phase: river
2025-10-31 18:46:14,147 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:14,147 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:14,147 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:14,147 - poker_game - INFO - Betting round complete: True
2025-10-31 18:46:14,148 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:14,148 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣', '2♥']
2025-10-31 18:46:14,148 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:14,149 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:14,149 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:14,149 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:14,149 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:14,149 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:46:14,150 - poker_game - INFO - ==================================================
2025-10-31 18:46:14,250 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 18:46:14,251 - poker_game - INFO - Betting round complete: True
2025-10-31 18:46:14,252 - poker_game - INFO - Remaining players: 2
2025-10-31 18:46:14,254 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:46:14,254 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:46:14,255 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 18:46:14,255 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:46:14,256 - poker_game - INFO - Hand #3, Phase: showdown
2025-10-31 18:46:14,256 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:46:14,256 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:46:14,257 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:14,257 - poker_game - INFO - Betting round complete: True
2025-10-31 18:46:14,258 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:46:14,258 - poker_game - INFO - Community cards: ['5♣', 'K♣', '3♦', '10♣', '2♥']
2025-10-31 18:46:14,258 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=folded
2025-10-31 18:46:14,259 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:14,259 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=folded
2025-10-31 18:46:14,260 - poker_game - INFO -   P3(Agent3): chips=1980, bet=0, status=active
2025-10-31 18:46:14,260 - poker_game - INFO -   P4(Agent4): chips=1920, bet=0, status=folded
2025-10-31 18:46:14,260 - poker_game - INFO - ==================================================
2025-10-31 18:46:14,261 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:46:14,261 - poker_game - INFO - Pot: 50, Community cards: ['5♣', 'K♣', '3♦', '10♣', '2♥']
2025-10-31 18:46:14,262 - poker_game - INFO -   Player 1 status=active cards=['J♠', '8♠']
2025-10-31 18:46:14,262 - poker_game - INFO -   Player 3 status=active cards=['8♦', 'A♣']
2025-10-31 18:46:14,267 - poker_game - INFO -   Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=['J♠', '8♠']
2025-10-31 18:46:14,268 - poker_game - INFO -   Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=['8♦', 'A♣']
2025-10-31 18:46:14,269 - poker_game - INFO - Pot layer 0: amount=30, contributors=[1, 2, 3]
2025-10-31 18:46:14,271 - poker_game - INFO - Pot layer 1: amount=20, contributors=[1, 3]
2025-10-31 18:46:14,273 - poker_game - INFO - Showdown total awarded: 50 (game.pot=50)
2025-10-31 18:46:14,273 - poker_game - INFO - Showdown winners (aggregated): [3]
2025-10-31 18:46:14,274 - poker_game - INFO -   Awarded 50 to Player 3 (hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣)
2025-10-31 18:46:14,274 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:46:14,310 - poker_game - INFO - === STARTING NEW HAND #4 ===
2025-10-31 18:46:14,311 - poker_game - INFO - Active players for new hand: 5
2025-10-31 18:46:14,311 - poker_game - INFO - Moving dealer button
2025-10-31 18:46:14,312 - poker_game - INFO - Posting blinds
2025-10-31 18:46:14,335 - poker_game - INFO - Dealing hole cards
2025-10-31 18:46:14,336 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:46:14,349 - poker_game - INFO - Started new hand in database: hand_id=4
2025-10-31 18:46:14,349 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:46:14,351 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:14,353 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:46:14,355 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:46:14,355 - poker_game - INFO - Last raiser: 4
2025-10-31 18:46:14,356 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:14,356 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:46:14,356 - poker_game - INFO - Community cards: []
2025-10-31 18:46:14,357 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:46:14,357 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:14,358 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=active
2025-10-31 18:46:14,358 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=active
2025-10-31 18:46:14,358 - poker_game - INFO -   P4(Agent4): chips=1900, bet=20, status=active
2025-10-31 18:46:14,359 - poker_game - INFO - ==================================================
2025-10-31 18:46:14,360 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "10♦",
    "A♥"
  ],
  "community": [],
  "your_chips": 1990,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 2,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1890,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2170,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1900,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1990)"
  ],
  "history": [
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 checked",
    "Flop dealt: 5♣, K♣, 3♦",
    "Player 3 checked",
    "Player 1 checked",
    "Turn dealt: 10♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 2♥",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠",
    "Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣",
    "Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20"
  ]
}
2025-10-31 18:46:14,386 - poker_game - DEBUG - Create Session: {'id': '486c9757-d94c-4b5c-bef1-92d0db4df018', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761903974.3805566}
2025-10-31 18:46:16,118 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "私はエースと10のハンドを持っており、これは非常に強力なハンドです。プリフロップ（フロップが出る前）の状況で、ポットは30、コールには20必要です。相手のレイズ（ベット額を上げる行為）やコール（相手のベット額と同額を支払う行為）の状況を見て、私はより大きなポットにするためにレイズ（ベット額を上げる行為）を選択します。最小レイズ額は40なので、私はベット額を60に上げます。これは、相手にプレッシャーを与え、より有利な状況を作り出すためです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 159, 'promptTokenCount': 962, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 962}], 'totalTokenCount': 1121}, 'invocationId': 'e-0d101015-e0b7-406f-9b75-bbd261da845b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'k1sHQHCo', 'timestamp': 1761903974.404838}]
2025-10-31 18:46:16,118 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:46:16,119 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 60,
  "reasoning": "私はエースと10のハンドを持っており、これは非常に強力なハンドです。プリフロップ（フロップが出る前）の状況で、ポットは30、コールには20必要です。相手のレイズ（ベット額を上げる行為）やコール（相手のベット額と同額を支払う行為）の状況を見て、私はより大きなポットにするためにレイズ（ベット額を上げる行為）を選択します。最小レイズ額は40なので、私はベット額を60に上げます。これは、相手にプレッシャーを与え、より有利な状況を作り出すためです。"
}
```
2025-10-31 18:46:16,119 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:46:16,119 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "私はエースと10のハンドを持っており、これは非常に強力なハンドです。プリフロップ（フロップが出る前）の状況で、ポットは30、コールには20必要です。相手のレイズ（ベット額を上げる行為）やコール（相手のベット額と同額を支払う行為）の状況を見て、私はより大きなポットにするためにレイズ（ベット額を上げる行為）を選択します。最小レイズ額は40なので、私はベット額を60に上げます。これは、相手にプレッシャーを与え、より有利な状況を作り出すためです。"\n}\n```'
2025-10-31 18:46:16,120 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:46:16,120 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "私はエースと10のハンドを持っており、これは非常に強力なハンドです。プリフロップ（フロップが出る前）の状況で、ポットは30、コールには20必要です。相手のレイズ（ベット額を上げる行為）やコール（相手のベット額と同額を支払う行為）の状況を見て、私はより大きなポットにするためにレイズ（ベット額を上げる行為）を選択します。最小レイズ額は40なので、私はベット額を60に上げます。これは、相手にプレッシャーを与え、より有利な状況を作り出すためです。"\n}'
2025-10-31 18:46:16,120 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "raise",
  "amount": 60,
  "reasoning": "私はエースと10のハンドを持っており、これは非常に強力なハンドです。プリフロップ（フロップが出る前）の状況で、ポットは30、コールには20必要です。相手のレイズ（ベット額を上げる行為）やコール（相手のベット額と同額を支払う行為）の状況を見て、私はより大きなポットにするためにレイズ（ベット額を上げる行為）を選択します。最小レイズ額は40なので、私はベット額を60に上げます。これは、相手にプレッシャーを与え、より有利な状況を作り出すためです。"
}
2025-10-31 18:46:16,120 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'raise', 'amount': 60, 'reasoning': '私はエースと10のハンドを持っており、これは非常に強力なハンドです。プリフロップ（フロップが出る前）の状況で、ポットは30、コールには20必要です。相手のレイズ（ベット額を上げる行為）やコール（相手のベット額と同額を支払う行為）の状況を見て、私はより大きなポットにするためにレイズ（ベット額を上げる行為）を選択します。最小レイズ額は40なので、私はベット額を60に上げます。これは、相手にプレッシャーを与え、より有利な状況を作り出すためです。'}
2025-10-31 18:46:16,121 - poker_game - DEBUG - [Agent0] Extracted values - action: 'raise', amount: 60
2025-10-31 18:46:16,121 - poker_game - DEBUG - [Agent0] Processing raise action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1990)']
2025-10-31 18:46:16,121 - poker_game - DEBUG - [Agent0] Minimum raise amount extracted from 'raise (min 40)': 40
2025-10-31 18:46:16,121 - poker_game - DEBUG - [Agent0] Raise amount 60 is valid (min: 40)
2025-10-31 18:46:16,121 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'raise', 'amount': 60}
2025-10-31 18:46:16,121 - poker_game - INFO - [Agent0] Successfully parsed decision: raise, 60, 私はエースと10のハンドを持っており、これは非常に強力なハンドです。プリフロップ（フロップが出る前）の状況で、ポットは30、コールには20必要です。相手のレイズ（ベット額を上げる行為）やコール（相手のベット額と同額を支払う行為）の状況を見て、私はより大きなポットにするためにレイズ（ベット額を上げる行為）を選択します。最小レイズ額は40なので、私はベット額を60に上げます。これは、相手にプレッシャーを与え、より有利な状況を作り出すためです。
2025-10-31 18:46:16,122 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'raise' with amount 60
2025-10-31 18:46:16,123 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:16,123 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:16,123 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:46:16,124 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:46:16,124 - poker_game - INFO - Last raiser: 4
2025-10-31 18:46:16,124 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:16,125 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:46:16,125 - poker_game - INFO - Community cards: []
2025-10-31 18:46:16,125 - poker_game - INFO -   P0(Agent0): chips=1990, bet=0, status=active
2025-10-31 18:46:16,126 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:16,126 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=active
2025-10-31 18:46:16,127 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=active
2025-10-31 18:46:16,127 - poker_game - INFO -   P4(Agent4): chips=1900, bet=20, status=active
2025-10-31 18:46:16,127 - poker_game - INFO - ==================================================
2025-10-31 18:46:16,128 - poker_game - INFO - ACTION_EXECUTED: Player 0 raised to 80
2025-10-31 18:46:16,143 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:16,143 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:16,144 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:46:16,144 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:46:16,145 - poker_game - INFO - Last raiser: 0
2025-10-31 18:46:16,145 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:16,146 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:46:16,146 - poker_game - INFO - Community cards: []
2025-10-31 18:46:16,146 - poker_game - INFO -   P0(Agent0): chips=1910, bet=80, status=active
2025-10-31 18:46:16,147 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:16,147 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=active
2025-10-31 18:46:16,147 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=active
2025-10-31 18:46:16,147 - poker_game - INFO -   P4(Agent4): chips=1900, bet=20, status=active
2025-10-31 18:46:16,148 - poker_game - INFO - Extra: Action: Player 0 raised to 80
2025-10-31 18:46:16,148 - poker_game - INFO - ==================================================
2025-10-31 18:46:16,148 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:16,149 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:16,149 - poker_game - DEBUG - Active players: [0, 1, 2, 3, 4]
2025-10-31 18:46:16,149 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:46:16,149 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:16,149 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:16,150 - poker_game - DEBUG - Active: 5, All-in: 0
2025-10-31 18:46:16,150 - poker_game - DEBUG - Player bets: [80, 0, 0, 10, 20], Current bet: 80, All same: False
2025-10-31 18:46:16,150 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:46:16,150 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:16,150 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:16,150 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:46:16,150 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:46:16,151 - poker_game - INFO - Last raiser: 0
2025-10-31 18:46:16,151 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:16,151 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:46:16,151 - poker_game - INFO - Community cards: []
2025-10-31 18:46:16,152 - poker_game - INFO -   P0(Agent0): chips=1910, bet=80, status=active
2025-10-31 18:46:16,152 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:16,152 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=active
2025-10-31 18:46:16,152 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=active
2025-10-31 18:46:16,153 - poker_game - INFO -   P4(Agent4): chips=1900, bet=20, status=active
2025-10-31 18:46:16,153 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:46:16,156 - poker_game - INFO - ==================================================
2025-10-31 18:46:16,259 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "3♦",
    "Q♦"
  ],
  "community": [],
  "your_chips": 1890,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 110,
  "to_call": 80,
  "dealer_button": 2,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1910,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2170,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1900,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (80)",
    "raise (min 100)",
    "all-in (1890)"
  ],
  "history": [
    "Player 0 folded",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 checked",
    "Flop dealt: 5♣, K♣, 3♦",
    "Player 3 checked",
    "Player 1 checked",
    "Turn dealt: 10♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 2♥",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠",
    "Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣",
    "Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80"
  ]
}
2025-10-31 18:46:16,272 - poker_game - DEBUG - Create Session: {'id': '39af4f53-cf56-4a74-af56-56e0a3a69824', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761903976.269982}
2025-10-31 18:46:18,045 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 80,\n  "reasoning": "プリフロップの段階で、あなたの手札はQ♦3♦です。これはフロップ前にアクションを起こすにはそれほど強くないハンドですが、コールしてフロップを見る価値はあります。ポットオッズ（コールに必要な金額に対するポットの大きさ）を考慮すると、コールしてフロップを見ることは利益的です。相手のアクションやスタックサイズなどの追加情報がないため、ここではコールを選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 117, 'promptTokenCount': 968, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 968}], 'totalTokenCount': 1085}, 'invocationId': 'e-40638473-5512-4c85-935a-abeb2cb4d417', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '9bLMgnND', 'timestamp': 1761903976.284583}]
2025-10-31 18:46:18,046 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:46:18,046 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 80,
  "reasoning": "プリフロップの段階で、あなたの手札はQ♦3♦です。これはフロップ前にアクションを起こすにはそれほど強くないハンドですが、コールしてフロップを見る価値はあります。ポットオッズ（コールに必要な金額に対するポットの大きさ）を考慮すると、コールしてフロップを見ることは利益的です。相手のアクションやスタックサイズなどの追加情報がないため、ここではコールを選択します。"
}
```
2025-10-31 18:46:18,047 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:46:18,047 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 80,\n  "reasoning": "プリフロップの段階で、あなたの手札はQ♦3♦です。これはフロップ前にアクションを起こすにはそれほど強くないハンドですが、コールしてフロップを見る価値はあります。ポットオッズ（コールに必要な金額に対するポットの大きさ）を考慮すると、コールしてフロップを見ることは利益的です。相手のアクションやスタックサイズなどの追加情報がないため、ここではコールを選択します。"\n}\n```'
2025-10-31 18:46:18,047 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:46:18,048 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 80,\n  "reasoning": "プリフロップの段階で、あなたの手札はQ♦3♦です。これはフロップ前にアクションを起こすにはそれほど強くないハンドですが、コールしてフロップを見る価値はあります。ポットオッズ（コールに必要な金額に対するポットの大きさ）を考慮すると、コールしてフロップを見ることは利益的です。相手のアクションやスタックサイズなどの追加情報がないため、ここではコールを選択します。"\n}'
2025-10-31 18:46:18,048 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 80,
  "reasoning": "プリフロップの段階で、あなたの手札はQ♦3♦です。これはフロップ前にアクションを起こすにはそれほど強くないハンドですが、コールしてフロップを見る価値はあります。ポットオッズ（コールに必要な金額に対するポットの大きさ）を考慮すると、コールしてフロップを見ることは利益的です。相手のアクションやスタックサイズなどの追加情報がないため、ここではコールを選択します。"
}
2025-10-31 18:46:18,048 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 80, 'reasoning': 'プリフロップの段階で、あなたの手札はQ♦3♦です。これはフロップ前にアクションを起こすにはそれほど強くないハンドですが、コールしてフロップを見る価値はあります。ポットオッズ（コールに必要な金額に対するポットの大きさ）を考慮すると、コールしてフロップを見ることは利益的です。相手のアクションやスタックサイズなどの追加情報がないため、ここではコールを選択します。'}
2025-10-31 18:46:18,049 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 80
2025-10-31 18:46:18,049 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (80)', 'raise (min 100)', 'all-in (1890)']
2025-10-31 18:46:18,049 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (80)': 80
2025-10-31 18:46:18,049 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 80}
2025-10-31 18:46:18,049 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 80, プリフロップの段階で、あなたの手札はQ♦3♦です。これはフロップ前にアクションを起こすにはそれほど強くないハンドですが、コールしてフロップを見る価値はあります。ポットオッズ（コールに必要な金額に対するポットの大きさ）を考慮すると、コールしてフロップを見ることは利益的です。相手のアクションやスタックサイズなどの追加情報がないため、ここではコールを選択します。
2025-10-31 18:46:18,051 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 80
2025-10-31 18:46:18,051 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:18,052 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:18,052 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:46:18,052 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:46:18,053 - poker_game - INFO - Last raiser: 0
2025-10-31 18:46:18,053 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:18,054 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:46:18,054 - poker_game - INFO - Community cards: []
2025-10-31 18:46:18,055 - poker_game - INFO -   P0(Agent0): chips=1910, bet=80, status=active
2025-10-31 18:46:18,056 - poker_game - INFO -   P1(Agent1): chips=1890, bet=0, status=active
2025-10-31 18:46:18,056 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=active
2025-10-31 18:46:18,057 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=active
2025-10-31 18:46:18,058 - poker_game - INFO -   P4(Agent4): chips=1900, bet=20, status=active
2025-10-31 18:46:18,059 - poker_game - INFO - ==================================================
2025-10-31 18:46:18,059 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 80
2025-10-31 18:46:18,072 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:18,072 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:18,073 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:46:18,073 - poker_game - INFO - Pot: 190, Current bet: 80
2025-10-31 18:46:18,074 - poker_game - INFO - Last raiser: 0
2025-10-31 18:46:18,074 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:18,075 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:46:18,075 - poker_game - INFO - Community cards: []
2025-10-31 18:46:18,076 - poker_game - INFO -   P0(Agent0): chips=1910, bet=80, status=active
2025-10-31 18:46:18,076 - poker_game - INFO -   P1(Agent1): chips=1810, bet=80, status=active
2025-10-31 18:46:18,076 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=active
2025-10-31 18:46:18,077 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=active
2025-10-31 18:46:18,077 - poker_game - INFO -   P4(Agent4): chips=1900, bet=20, status=active
2025-10-31 18:46:18,078 - poker_game - INFO - Extra: Action: Player 1 called 80
2025-10-31 18:46:18,078 - poker_game - INFO - ==================================================
2025-10-31 18:46:18,078 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:18,079 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:18,079 - poker_game - DEBUG - Active players: [0, 1, 2, 3, 4]
2025-10-31 18:46:18,079 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:46:18,080 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:18,080 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:18,080 - poker_game - DEBUG - Active: 5, All-in: 0
2025-10-31 18:46:18,081 - poker_game - DEBUG - Player bets: [80, 80, 0, 10, 20], Current bet: 80, All same: False
2025-10-31 18:46:18,081 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:46:18,081 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:18,084 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:18,085 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:46:18,086 - poker_game - INFO - Pot: 190, Current bet: 80
2025-10-31 18:46:18,087 - poker_game - INFO - Last raiser: 0
2025-10-31 18:46:18,088 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:18,089 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:46:18,090 - poker_game - INFO - Community cards: []
2025-10-31 18:46:18,091 - poker_game - INFO -   P0(Agent0): chips=1910, bet=80, status=active
2025-10-31 18:46:18,091 - poker_game - INFO -   P1(Agent1): chips=1810, bet=80, status=active
2025-10-31 18:46:18,092 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=active
2025-10-31 18:46:18,092 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=active
2025-10-31 18:46:18,093 - poker_game - INFO -   P4(Agent4): chips=1900, bet=20, status=active
2025-10-31 18:46:18,093 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:46:18,094 - poker_game - INFO - ==================================================
2025-10-31 18:46:18,197 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "preflop",
  "your_cards": [
    "A♣",
    "9♦"
  ],
  "community": [],
  "your_chips": 2170,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 190,
  "to_call": 80,
  "dealer_button": 2,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1910,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1810,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1900,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (80)",
    "raise (min 100)",
    "all-in (2170)"
  ],
  "history": [
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 checked",
    "Flop dealt: 5♣, K♣, 3♦",
    "Player 3 checked",
    "Player 1 checked",
    "Turn dealt: 10♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 2♥",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠",
    "Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣",
    "Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80"
  ]
}
2025-10-31 18:46:18,217 - poker_game - DEBUG - Create Session: {'id': '836ebb08-3167-49f9-b54d-17e4162f3737', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761903978.2136629}
2025-10-31 18:46:20,931 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 80,\n  "reasoning": "プリフロップ（フロップが開く前の段階）で、私はA♣9♦というハンドを持っています。これは、エース（A）と9の組み合わせで、スーテッド（同じマーク）ではないため、あまり強力なハンドではありません。しかし、ポットにはすでに190チップがあり、コールするには80チップが必要です。他のプレイヤーのアクションを見ると、プレイヤー0が80にレイズし、プレイヤー1がそれにコールしています。私のポジションはボタン（ディーラー）の後ろであり、まだ2人のプレイヤーがアクションを起こしていません。この状況では、A9オフスーテッド（異なるマーク）は、フロップでドロー（役ができる可能性）を期待するには少し弱いですが、ポットオッズ（コールに必要な金額とポットの比率）を考えると、コールしてフロップを見る価値はあると判断しました。もしフロップで強力なハンドができれば、さらにプレイを続けることができます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 220, 'promptTokenCount': 972, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 972}], 'totalTokenCount': 1192}, 'invocationId': 'e-edfcaac4-aa37-4eb9-8608-3a7675be161d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'N28XXOVp', 'timestamp': 1761903978.231114}]
2025-10-31 18:46:20,931 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:46:20,932 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 80,
  "reasoning": "プリフロップ（フロップが開く前の段階）で、私はA♣9♦というハンドを持っています。これは、エース（A）と9の組み合わせで、スーテッド（同じマーク）ではないため、あまり強力なハンドではありません。しかし、ポットにはすでに190チップがあり、コールするには80チップが必要です。他のプレイヤーのアクションを見ると、プレイヤー0が80にレイズし、プレイヤー1がそれにコールしています。私のポジションはボタン（ディーラー）の後ろであり、まだ2人のプレイヤーがアクションを起こしていません。この状況では、A9オフスーテッド（異なるマーク）は、フロップでドロー（役ができる可能性）を期待するには少し弱いですが、ポットオッズ（コールに必要な金額とポットの比率）を考えると、コールしてフロップを見る価値はあると判断しました。もしフロップで強力なハンドができれば、さらにプレイを続けることができます。"
}
```
2025-10-31 18:46:20,932 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:46:20,932 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 80,\n  "reasoning": "プリフロップ（フロップが開く前の段階）で、私はA♣9♦というハンドを持っています。これは、エース（A）と9の組み合わせで、スーテッド（同じマーク）ではないため、あまり強力なハンドではありません。しかし、ポットにはすでに190チップがあり、コールするには80チップが必要です。他のプレイヤーのアクションを見ると、プレイヤー0が80にレイズし、プレイヤー1がそれにコールしています。私のポジションはボタン（ディーラー）の後ろであり、まだ2人のプレイヤーがアクションを起こしていません。この状況では、A9オフスーテッド（異なるマーク）は、フロップでドロー（役ができる可能性）を期待するには少し弱いですが、ポットオッズ（コールに必要な金額とポットの比率）を考えると、コールしてフロップを見る価値はあると判断しました。もしフロップで強力なハンドができれば、さらにプレイを続けることができます。"\n}\n```'
2025-10-31 18:46:20,933 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:46:20,933 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 80,\n  "reasoning": "プリフロップ（フロップが開く前の段階）で、私はA♣9♦というハンドを持っています。これは、エース（A）と9の組み合わせで、スーテッド（同じマーク）ではないため、あまり強力なハンドではありません。しかし、ポットにはすでに190チップがあり、コールするには80チップが必要です。他のプレイヤーのアクションを見ると、プレイヤー0が80にレイズし、プレイヤー1がそれにコールしています。私のポジションはボタン（ディーラー）の後ろであり、まだ2人のプレイヤーがアクションを起こしていません。この状況では、A9オフスーテッド（異なるマーク）は、フロップでドロー（役ができる可能性）を期待するには少し弱いですが、ポットオッズ（コールに必要な金額とポットの比率）を考えると、コールしてフロップを見る価値はあると判断しました。もしフロップで強力なハンドができれば、さらにプレイを続けることができます。"\n}'
2025-10-31 18:46:20,933 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "call",
  "amount": 80,
  "reasoning": "プリフロップ（フロップが開く前の段階）で、私はA♣9♦というハンドを持っています。これは、エース（A）と9の組み合わせで、スーテッド（同じマーク）ではないため、あまり強力なハンドではありません。しかし、ポットにはすでに190チップがあり、コールするには80チップが必要です。他のプレイヤーのアクションを見ると、プレイヤー0が80にレイズし、プレイヤー1がそれにコールしています。私のポジションはボタン（ディーラー）の後ろであり、まだ2人のプレイヤーがアクションを起こしていません。この状況では、A9オフスーテッド（異なるマーク）は、フロップでドロー（役ができる可能性）を期待するには少し弱いですが、ポットオッズ（コールに必要な金額とポットの比率）を考えると、コールしてフロップを見る価値はあると判断しました。もしフロップで強力なハンドができれば、さらにプレイを続けることができます。"
}
2025-10-31 18:46:20,933 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'call', 'amount': 80, 'reasoning': 'プリフロップ（フロップが開く前の段階）で、私はA♣9♦というハンドを持っています。これは、エース（A）と9の組み合わせで、スーテッド（同じマーク）ではないため、あまり強力なハンドではありません。しかし、ポットにはすでに190チップがあり、コールするには80チップが必要です。他のプレイヤーのアクションを見ると、プレイヤー0が80にレイズし、プレイヤー1がそれにコールしています。私のポジションはボタン（ディーラー）の後ろであり、まだ2人のプレイヤーがアクションを起こしていません。この状況では、A9オフスーテッド（異なるマーク）は、フロップでドロー（役ができる可能性）を期待するには少し弱いですが、ポットオッズ（コールに必要な金額とポットの比率）を考えると、コールしてフロップを見る価値はあると判断しました。もしフロップで強力なハンドができれば、さらにプレイを続けることができます。'}
2025-10-31 18:46:20,933 - poker_game - DEBUG - [Agent2] Extracted values - action: 'call', amount: 80
2025-10-31 18:46:20,934 - poker_game - DEBUG - [Agent2] Processing call action - available actions: ['fold', 'call (80)', 'raise (min 100)', 'all-in (2170)']
2025-10-31 18:46:20,934 - poker_game - DEBUG - [Agent2] Call amount extracted from 'call (80)': 80
2025-10-31 18:46:20,934 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'call', 'amount': 80}
2025-10-31 18:46:20,934 - poker_game - INFO - [Agent2] Successfully parsed decision: call, 80, プリフロップ（フロップが開く前の段階）で、私はA♣9♦というハンドを持っています。これは、エース（A）と9の組み合わせで、スーテッド（同じマーク）ではないため、あまり強力なハンドではありません。しかし、ポットにはすでに190チップがあり、コールするには80チップが必要です。他のプレイヤーのアクションを見ると、プレイヤー0が80にレイズし、プレイヤー1がそれにコールしています。私のポジションはボタン（ディーラー）の後ろであり、まだ2人のプレイヤーがアクションを起こしていません。この状況では、A9オフスーテッド（異なるマーク）は、フロップでドロー（役ができる可能性）を期待するには少し弱いですが、ポットオッズ（コールに必要な金額とポットの比率）を考えると、コールしてフロップを見る価値はあると判断しました。もしフロップで強力なハンドができれば、さらにプレイを続けることができます。
2025-10-31 18:46:20,935 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'call' with amount 80
2025-10-31 18:46:20,936 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:20,936 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:20,937 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:46:20,937 - poker_game - INFO - Pot: 190, Current bet: 80
2025-10-31 18:46:20,937 - poker_game - INFO - Last raiser: 0
2025-10-31 18:46:20,938 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:20,938 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:46:20,938 - poker_game - INFO - Community cards: []
2025-10-31 18:46:20,939 - poker_game - INFO -   P0(Agent0): chips=1910, bet=80, status=active
2025-10-31 18:46:20,939 - poker_game - INFO -   P1(Agent1): chips=1810, bet=80, status=active
2025-10-31 18:46:20,939 - poker_game - INFO -   P2(Agent2): chips=2170, bet=0, status=active
2025-10-31 18:46:20,940 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=active
2025-10-31 18:46:20,940 - poker_game - INFO -   P4(Agent4): chips=1900, bet=20, status=active
2025-10-31 18:46:20,942 - poker_game - INFO - ==================================================
2025-10-31 18:46:20,943 - poker_game - INFO - ACTION_EXECUTED: Player 2 called 80
2025-10-31 18:46:20,962 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:20,962 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:20,963 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:46:20,963 - poker_game - INFO - Pot: 270, Current bet: 80
2025-10-31 18:46:20,964 - poker_game - INFO - Last raiser: 0
2025-10-31 18:46:20,964 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:20,965 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:46:20,965 - poker_game - INFO - Community cards: []
2025-10-31 18:46:20,966 - poker_game - INFO -   P0(Agent0): chips=1910, bet=80, status=active
2025-10-31 18:46:20,966 - poker_game - INFO -   P1(Agent1): chips=1810, bet=80, status=active
2025-10-31 18:46:20,966 - poker_game - INFO -   P2(Agent2): chips=2090, bet=80, status=active
2025-10-31 18:46:20,967 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=active
2025-10-31 18:46:20,967 - poker_game - INFO -   P4(Agent4): chips=1900, bet=20, status=active
2025-10-31 18:46:20,968 - poker_game - INFO - Extra: Action: Player 2 called 80
2025-10-31 18:46:20,968 - poker_game - INFO - ==================================================
2025-10-31 18:46:20,968 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:20,969 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:20,969 - poker_game - DEBUG - Active players: [0, 1, 2, 3, 4]
2025-10-31 18:46:20,970 - poker_game - INFO - Advanced from player 2 to player 3 (seat order)
2025-10-31 18:46:20,970 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:20,971 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:20,971 - poker_game - DEBUG - Active: 5, All-in: 0
2025-10-31 18:46:20,971 - poker_game - DEBUG - Player bets: [80, 80, 80, 10, 20], Current bet: 80, All same: False
2025-10-31 18:46:20,971 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:46:20,972 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:20,972 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:20,973 - poker_game - INFO - Current player: 3, Dealer: 2
2025-10-31 18:46:20,974 - poker_game - INFO - Pot: 270, Current bet: 80
2025-10-31 18:46:20,974 - poker_game - INFO - Last raiser: 0
2025-10-31 18:46:20,975 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:20,976 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:46:20,977 - poker_game - INFO - Community cards: []
2025-10-31 18:46:20,977 - poker_game - INFO -   P0(Agent0): chips=1910, bet=80, status=active
2025-10-31 18:46:20,977 - poker_game - INFO -   P1(Agent1): chips=1810, bet=80, status=active
2025-10-31 18:46:20,978 - poker_game - INFO -   P2(Agent2): chips=2090, bet=80, status=active
2025-10-31 18:46:20,978 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=active
2025-10-31 18:46:20,979 - poker_game - INFO -   P4(Agent4): chips=1900, bet=20, status=active
2025-10-31 18:46:20,980 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:46:20,980 - poker_game - INFO - ==================================================
2025-10-31 18:46:21,082 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "9♥",
    "6♥"
  ],
  "community": [],
  "your_chips": 2020,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 270,
  "to_call": 70,
  "dealer_button": 2,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1910,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1810,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2090,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1900,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (70)",
    "raise (min 100)",
    "all-in (2020)"
  ],
  "history": [
    "Player 2 folded",
    "Player 3 checked",
    "Flop dealt: 5♣, K♣, 3♦",
    "Player 3 checked",
    "Player 1 checked",
    "Turn dealt: 10♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 2♥",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠",
    "Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣",
    "Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80",
    "Player 2 called 80"
  ]
}
2025-10-31 18:46:21,090 - poker_game - DEBUG - Create Session: {'id': '1afada6e-ac99-4782-863b-12d25d5b82cb', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761903981.0891078}
2025-10-31 18:46:23,320 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（Preflop - カードが配られた直後の最初のベットラウンド）で、私の手札は9♥6♥です。これは「スーテッドコネクター」（同じスートで数字が近いカード）ですが、接続性は低く、バリューもそれほど高くありません。ポットにはすでに70をコールする必要がありますが、私の手札の強さを考えると、これは十分ではありません。特に、他のプレイヤーがすでにレイズ（Raise - ベット額を上げる行為）しており、ポットが大きくなっている状況では、より強い手札でなければコールするのはリスクが高いです。そのため、フォールド（Fold - ゲームから降りること）が最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 172, 'promptTokenCount': 974, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 974}], 'totalTokenCount': 1146}, 'invocationId': 'e-716fe0ea-bbf4-4441-b50f-34d28c0777bd', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'viEcGLqm', 'timestamp': 1761903981.100427}]
2025-10-31 18:46:23,320 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:46:23,320 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（Preflop - カードが配られた直後の最初のベットラウンド）で、私の手札は9♥6♥です。これは「スーテッドコネクター」（同じスートで数字が近いカード）ですが、接続性は低く、バリューもそれほど高くありません。ポットにはすでに70をコールする必要がありますが、私の手札の強さを考えると、これは十分ではありません。特に、他のプレイヤーがすでにレイズ（Raise - ベット額を上げる行為）しており、ポットが大きくなっている状況では、より強い手札でなければコールするのはリスクが高いです。そのため、フォールド（Fold - ゲームから降りること）が最善の選択です。"
}
```
2025-10-31 18:46:23,320 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:46:23,321 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（Preflop - カードが配られた直後の最初のベットラウンド）で、私の手札は9♥6♥です。これは「スーテッドコネクター」（同じスートで数字が近いカード）ですが、接続性は低く、バリューもそれほど高くありません。ポットにはすでに70をコールする必要がありますが、私の手札の強さを考えると、これは十分ではありません。特に、他のプレイヤーがすでにレイズ（Raise - ベット額を上げる行為）しており、ポットが大きくなっている状況では、より強い手札でなければコールするのはリスクが高いです。そのため、フォールド（Fold - ゲームから降りること）が最善の選択です。"\n}\n```'
2025-10-31 18:46:23,321 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:46:23,321 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（Preflop - カードが配られた直後の最初のベットラウンド）で、私の手札は9♥6♥です。これは「スーテッドコネクター」（同じスートで数字が近いカード）ですが、接続性は低く、バリューもそれほど高くありません。ポットにはすでに70をコールする必要がありますが、私の手札の強さを考えると、これは十分ではありません。特に、他のプレイヤーがすでにレイズ（Raise - ベット額を上げる行為）しており、ポットが大きくなっている状況では、より強い手札でなければコールするのはリスクが高いです。そのため、フォールド（Fold - ゲームから降りること）が最善の選択です。"\n}'
2025-10-31 18:46:23,321 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（Preflop - カードが配られた直後の最初のベットラウンド）で、私の手札は9♥6♥です。これは「スーテッドコネクター」（同じスートで数字が近いカード）ですが、接続性は低く、バリューもそれほど高くありません。ポットにはすでに70をコールする必要がありますが、私の手札の強さを考えると、これは十分ではありません。特に、他のプレイヤーがすでにレイズ（Raise - ベット額を上げる行為）しており、ポットが大きくなっている状況では、より強い手札でなければコールするのはリスクが高いです。そのため、フォールド（Fold - ゲームから降りること）が最善の選択です。"
}
2025-10-31 18:46:23,321 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（Preflop - カードが配られた直後の最初のベットラウンド）で、私の手札は9♥6♥です。これは「スーテッドコネクター」（同じスートで数字が近いカード）ですが、接続性は低く、バリューもそれほど高くありません。ポットにはすでに70をコールする必要がありますが、私の手札の強さを考えると、これは十分ではありません。特に、他のプレイヤーがすでにレイズ（Raise - ベット額を上げる行為）しており、ポットが大きくなっている状況では、より強い手札でなければコールするのはリスクが高いです。そのため、フォールド（Fold - ゲームから降りること）が最善の選択です。'}
2025-10-31 18:46:23,321 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 18:46:23,321 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 18:46:23,322 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:46:23,322 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップ（Preflop - カードが配られた直後の最初のベットラウンド）で、私の手札は9♥6♥です。これは「スーテッドコネクター」（同じスートで数字が近いカード）ですが、接続性は低く、バリューもそれほど高くありません。ポットにはすでに70をコールする必要がありますが、私の手札の強さを考えると、これは十分ではありません。特に、他のプレイヤーがすでにレイズ（Raise - ベット額を上げる行為）しており、ポットが大きくなっている状況では、より強い手札でなければコールするのはリスクが高いです。そのため、フォールド（Fold - ゲームから降りること）が最善の選択です。
2025-10-31 18:46:23,322 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 18:46:23,322 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:23,323 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:23,323 - poker_game - INFO - Current player: 3, Dealer: 2
2025-10-31 18:46:23,323 - poker_game - INFO - Pot: 270, Current bet: 80
2025-10-31 18:46:23,323 - poker_game - INFO - Last raiser: 0
2025-10-31 18:46:23,323 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:23,323 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:46:23,323 - poker_game - INFO - Community cards: []
2025-10-31 18:46:23,323 - poker_game - INFO -   P0(Agent0): chips=1910, bet=80, status=active
2025-10-31 18:46:23,324 - poker_game - INFO -   P1(Agent1): chips=1810, bet=80, status=active
2025-10-31 18:46:23,324 - poker_game - INFO -   P2(Agent2): chips=2090, bet=80, status=active
2025-10-31 18:46:23,324 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=active
2025-10-31 18:46:23,324 - poker_game - INFO -   P4(Agent4): chips=1900, bet=20, status=active
2025-10-31 18:46:23,324 - poker_game - INFO - ==================================================
2025-10-31 18:46:23,324 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 18:46:23,333 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:23,334 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:23,334 - poker_game - INFO - Current player: 3, Dealer: 2
2025-10-31 18:46:23,334 - poker_game - INFO - Pot: 270, Current bet: 80
2025-10-31 18:46:23,334 - poker_game - INFO - Last raiser: 0
2025-10-31 18:46:23,334 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:23,334 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:23,335 - poker_game - INFO - Community cards: []
2025-10-31 18:46:23,335 - poker_game - INFO -   P0(Agent0): chips=1910, bet=80, status=active
2025-10-31 18:46:23,335 - poker_game - INFO -   P1(Agent1): chips=1810, bet=80, status=active
2025-10-31 18:46:23,335 - poker_game - INFO -   P2(Agent2): chips=2090, bet=80, status=active
2025-10-31 18:46:23,335 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=folded
2025-10-31 18:46:23,335 - poker_game - INFO -   P4(Agent4): chips=1900, bet=20, status=active
2025-10-31 18:46:23,336 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 18:46:23,336 - poker_game - INFO - ==================================================
2025-10-31 18:46:23,336 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:23,336 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:23,336 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:46:23,336 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:46:23,337 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:23,337 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:23,337 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:46:23,337 - poker_game - DEBUG - Player bets: [80, 80, 80, 20], Current bet: 80, All same: False
2025-10-31 18:46:23,337 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:46:23,337 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:23,337 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:23,337 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:46:23,338 - poker_game - INFO - Pot: 270, Current bet: 80
2025-10-31 18:46:23,338 - poker_game - INFO - Last raiser: 0
2025-10-31 18:46:23,338 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:23,338 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:23,338 - poker_game - INFO - Community cards: []
2025-10-31 18:46:23,338 - poker_game - INFO -   P0(Agent0): chips=1910, bet=80, status=active
2025-10-31 18:46:23,339 - poker_game - INFO -   P1(Agent1): chips=1810, bet=80, status=active
2025-10-31 18:46:23,339 - poker_game - INFO -   P2(Agent2): chips=2090, bet=80, status=active
2025-10-31 18:46:23,339 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=folded
2025-10-31 18:46:23,339 - poker_game - INFO -   P4(Agent4): chips=1900, bet=20, status=active
2025-10-31 18:46:23,339 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:46:23,339 - poker_game - INFO - ==================================================
2025-10-31 18:46:23,441 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "8♠",
    "5♣"
  ],
  "community": [],
  "your_chips": 1900,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 270,
  "to_call": 60,
  "dealer_button": 2,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1910,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1810,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2090,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 10,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (60)",
    "raise (min 100)",
    "all-in (1900)"
  ],
  "history": [
    "Player 3 checked",
    "Flop dealt: 5♣, K♣, 3♦",
    "Player 3 checked",
    "Player 1 checked",
    "Turn dealt: 10♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 2♥",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠",
    "Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣",
    "Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80",
    "Player 2 called 80",
    "Player 3 folded"
  ]
}
2025-10-31 18:46:23,454 - poker_game - DEBUG - Create Session: {'id': 'f91679c4-8422-46d4-8698-95a171f14452', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761903983.4518373}
2025-10-31 18:46:28,499 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_bv022MApr5LqQ4QBQYWjAOkZ', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1296, 'totalTokenCount': 1313}, 'invocationId': 'e-64b69a93-66e7-4f96-9171-4e3e109466bb', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'lgDi5yR5', 'timestamp': 1761903983.464504}, {'content': {'parts': [{'functionResponse': {'id': 'call_bv022MApr5LqQ4QBQYWjAOkZ', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64b69a93-66e7-4f96-9171-4e3e109466bb', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '4XXa0X7C', 'timestamp': 1761903984.438594}, {'content': {'parts': [{'functionCall': {'id': 'call_tQwZJ4Jila2g4NCdBk674xUy', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1820, 'totalTokenCount': 1840}, 'invocationId': 'e-64b69a93-66e7-4f96-9171-4e3e109466bb', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'Ec0oBhFd', 'timestamp': 1761903984.440232}, {'content': {'parts': [{'functionResponse': {'id': 'call_tQwZJ4Jila2g4NCdBk674xUy', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64b69a93-66e7-4f96-9171-4e3e109466bb', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'ClFbGNIE', 'timestamp': 1761903986.240721}, {'content': {'parts': [{'text': '{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "My hand consists of 8♠ and 5♣, which is a weak hand. However, given the situation with a pot size of 270 and needing to call 60 to stay in the game, I can afford a small call to see if my hand improves on later streets."\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 83, 'promptTokenCount': 1382, 'totalTokenCount': 1465}, 'invocationId': 'e-64b69a93-66e7-4f96-9171-4e3e109466bb', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'abAdcFgL', 'timestamp': 1761903986.242287}]
2025-10-31 18:46:28,499 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:46:28,505 - poker_game - DEBUG - {
  "action": "call",
  "amount": 60,
  "reasoning": "My hand consists of 8♠ and 5♣, which is a weak hand. However, given the situation with a pot size of 270 and needing to call 60 to stay in the game, I can afford a small call to see if my hand improves on later streets."
}
2025-10-31 18:46:28,505 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:46:28,505 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "My hand consists of 8♠ and 5♣, which is a weak hand. However, given the situation with a pot size of 270 and needing to call 60 to stay in the game, I can afford a small call to see if my hand improves on later streets."\n}'
2025-10-31 18:46:28,505 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:46:28,506 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "call",
  "amount": 60,
  "reasoning": "My hand consists of 8♠ and 5♣, which is a weak hand. However, given the situation with a pot size of 270 and needing to call 60 to stay in the game, I can afford a small call to see if my hand improves on later streets."
}
2025-10-31 18:46:28,506 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'call', 'amount': 60, 'reasoning': 'My hand consists of 8♠ and 5♣, which is a weak hand. However, given the situation with a pot size of 270 and needing to call 60 to stay in the game, I can afford a small call to see if my hand improves on later streets.'}
2025-10-31 18:46:28,506 - poker_game - DEBUG - [Agent4] Extracted values - action: 'call', amount: 60
2025-10-31 18:46:28,506 - poker_game - DEBUG - [Agent4] Processing call action - available actions: ['fold', 'call (60)', 'raise (min 100)', 'all-in (1900)']
2025-10-31 18:46:28,506 - poker_game - DEBUG - [Agent4] Call amount extracted from 'call (60)': 60
2025-10-31 18:46:28,506 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'call', 'amount': 60}
2025-10-31 18:46:28,506 - poker_game - INFO - [Agent4] Successfully parsed decision: call, 60, My hand consists of 8♠ and 5♣, which is a weak hand. However, given the situation with a pot size of 270 and needing to call 60 to stay in the game, I can afford a small call to see if my hand improves on later streets.
2025-10-31 18:46:28,510 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'call' with amount 60
2025-10-31 18:46:28,510 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:28,511 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:28,511 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:46:28,511 - poker_game - INFO - Pot: 270, Current bet: 80
2025-10-31 18:46:28,511 - poker_game - INFO - Last raiser: 0
2025-10-31 18:46:28,511 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:28,511 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:28,512 - poker_game - INFO - Community cards: []
2025-10-31 18:46:28,512 - poker_game - INFO -   P0(Agent0): chips=1910, bet=80, status=active
2025-10-31 18:46:28,512 - poker_game - INFO -   P1(Agent1): chips=1810, bet=80, status=active
2025-10-31 18:46:28,512 - poker_game - INFO -   P2(Agent2): chips=2090, bet=80, status=active
2025-10-31 18:46:28,512 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=folded
2025-10-31 18:46:28,512 - poker_game - INFO -   P4(Agent4): chips=1900, bet=20, status=active
2025-10-31 18:46:28,513 - poker_game - INFO - ==================================================
2025-10-31 18:46:28,513 - poker_game - INFO - ACTION_EXECUTED: Player 4 called 60
2025-10-31 18:46:28,535 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:28,536 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:28,536 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:46:28,536 - poker_game - INFO - Pot: 330, Current bet: 80
2025-10-31 18:46:28,536 - poker_game - INFO - Last raiser: 0
2025-10-31 18:46:28,537 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:28,537 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:28,537 - poker_game - INFO - Community cards: []
2025-10-31 18:46:28,537 - poker_game - INFO -   P0(Agent0): chips=1910, bet=80, status=active
2025-10-31 18:46:28,537 - poker_game - INFO -   P1(Agent1): chips=1810, bet=80, status=active
2025-10-31 18:46:28,538 - poker_game - INFO -   P2(Agent2): chips=2090, bet=80, status=active
2025-10-31 18:46:28,538 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=folded
2025-10-31 18:46:28,538 - poker_game - INFO -   P4(Agent4): chips=1840, bet=80, status=active
2025-10-31 18:46:28,538 - poker_game - INFO - Extra: Action: Player 4 called 60
2025-10-31 18:46:28,538 - poker_game - INFO - ==================================================
2025-10-31 18:46:28,538 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:28,539 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:28,539 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:46:28,539 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:46:28,539 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:28,539 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:28,539 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:46:28,539 - poker_game - DEBUG - Player bets: [80, 80, 80, 80], Current bet: 80, All same: True
2025-10-31 18:46:28,539 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:46:28,539 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:28,539 - poker_game - INFO - Hand #4, Phase: preflop
2025-10-31 18:46:28,539 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:46:28,540 - poker_game - INFO - Pot: 330, Current bet: 80
2025-10-31 18:46:28,540 - poker_game - INFO - Last raiser: 0
2025-10-31 18:46:28,540 - poker_game - INFO - Betting round complete: True
2025-10-31 18:46:28,540 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:28,540 - poker_game - INFO - Community cards: []
2025-10-31 18:46:28,541 - poker_game - INFO -   P0(Agent0): chips=1910, bet=80, status=active
2025-10-31 18:46:28,541 - poker_game - INFO -   P1(Agent1): chips=1810, bet=80, status=active
2025-10-31 18:46:28,541 - poker_game - INFO -   P2(Agent2): chips=2090, bet=80, status=active
2025-10-31 18:46:28,541 - poker_game - INFO -   P3(Agent3): chips=2020, bet=10, status=folded
2025-10-31 18:46:28,541 - poker_game - INFO -   P4(Agent4): chips=1840, bet=80, status=active
2025-10-31 18:46:28,542 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:46:28,542 - poker_game - INFO - ==================================================
2025-10-31 18:46:28,643 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:46:28,644 - poker_game - INFO - Betting round complete: True
2025-10-31 18:46:28,644 - poker_game - INFO - Remaining players: 4
2025-10-31 18:46:28,644 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:46:28,644 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:46:28,645 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:46:28,645 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:46:28,645 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:46:28,653 - poker_game - INFO - Starting new betting round
2025-10-31 18:46:28,654 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:46:28,654 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:46:28,654 - poker_game - DEBUG - Active players for new betting round: [0, 1, 2, 4]
2025-10-31 18:46:28,654 - poker_game - DEBUG - Dealer button: 2
2025-10-31 18:46:28,654 - poker_game - INFO - First actor: Player 4 (by phase rule), was 0
2025-10-31 18:46:28,655 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:46:28,655 - poker_game - INFO - Hand #4, Phase: flop
2025-10-31 18:46:28,655 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:46:28,656 - poker_game - INFO - Pot: 330, Current bet: 0
2025-10-31 18:46:28,656 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:28,656 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:28,656 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:28,657 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠']
2025-10-31 18:46:28,657 - poker_game - INFO -   P0(Agent0): chips=1910, bet=0, status=active
2025-10-31 18:46:28,658 - poker_game - INFO -   P1(Agent1): chips=1810, bet=0, status=active
2025-10-31 18:46:28,658 - poker_game - INFO -   P2(Agent2): chips=2090, bet=0, status=active
2025-10-31 18:46:28,659 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:46:28,661 - poker_game - INFO -   P4(Agent4): chips=1840, bet=0, status=active
2025-10-31 18:46:28,662 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:46:28,663 - poker_game - INFO - ==================================================
2025-10-31 18:46:28,664 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "flop",
  "your_cards": [
    "8♠",
    "5♣"
  ],
  "community": [
    "3♣",
    "8♣",
    "9♠"
  ],
  "your_chips": 1840,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 330,
  "to_call": 0,
  "dealer_button": 2,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1910,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1810,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2090,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1840)"
  ],
  "history": [
    "Player 3 checked",
    "Player 1 checked",
    "Turn dealt: 10♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 2♥",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠",
    "Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣",
    "Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80",
    "Player 2 called 80",
    "Player 3 folded",
    "Player 4 called 60",
    "Flop dealt: 3♣, 8♣, 9♠"
  ]
}
2025-10-31 18:46:28,672 - poker_game - DEBUG - Create Session: {'id': 'f383b5fd-c500-47cc-84e7-b5c5074f1e17', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761903988.6703153}
2025-10-31 18:46:38,833 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:46:48,683 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 18:46:49,626 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_fOpJVbvfghV7RyW9ossyX8Uw', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1317, 'totalTokenCount': 1334}, 'invocationId': 'e-1283ea69-99ca-4650-b472-67f100817cdd', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'BgSKBAdk', 'timestamp': 1761903988.683574}, {'content': {'parts': [{'functionResponse': {'id': 'call_fOpJVbvfghV7RyW9ossyX8Uw', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-1283ea69-99ca-4650-b472-67f100817cdd', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'rCoakIhp', 'timestamp': 1761903989.734099}, {'content': {'parts': [{'functionCall': {'id': 'call_y8fCrnD8ODkgCvwUyxpxB1w0', 'args': {'game_state': {'your_id': 4, 'phase': 'flop', 'your_cards': ['8♠', '5♣'], 'community': ['3♣', '8♣', '9♠'], 'your_chips': 1840, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 80, 'pot': 330, 'to_call': 0, 'dealer_button': 2, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1910, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 1810, 'bet': 0, 'status': 'active'}, {'id': 2, 'chips': 2090, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 2020, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (1840)'], 'history': ['Player 3 checked', 'Player 1 checked', 'Turn dealt: 10♣', 'Player 3 checked', 'Player 1 checked', 'River dealt: 2♥', 'Player 3 checked', 'Player 1 checked', 'Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠', 'Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣', 'Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣', 'Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 raised to 80', 'Player 1 called 80', 'Player 2 called 80', 'Player 3 folded', 'Player 4 called 60', 'Flop dealt: 3♣, 8♣, 9♠']}, 'call_amount': 0, 'pot_after_call': 330, 'equity': 0.5}, 'name': 'action_decision'}}, {'functionCall': {'id': 'call_h84W24CFbrTyHLpbbgxDcfKo', 'args': {'game_state': {'your_id': 4, 'phase': 'flop', 'your_cards': ['8♠', '5♣'], 'community': ['3♣', '8♣', '9♠'], 'your_chips': 1840, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 80, 'pot': 330, 'to_call': 0, 'dealer_button': 2, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1910, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 1810, 'bet': 0, 'status': 'active'}, {'id': 2, 'chips': 2090, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 2020, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (1840)'], 'history': ['Player 3 checked', 'Player 1 checked', 'Turn dealt: 10♣', 'Player 3 checked', 'Player 1 checked', 'River dealt: 2♥', 'Player 3 checked', 'Player 1 checked', 'Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠', 'Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣', 'Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣', 'Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 raised to 80', 'Player 1 called 80', 'Player 2 called 80', 'Player 3 folded', 'Player 4 called 60', 'Flop dealt: 3♣, 8♣, 9♠']}, 'call_amount': 0, 'pot_after_call': 330, 'equity': 0.5}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 1032, 'promptTokenCount': 1841, 'totalTokenCount': 2873}, 'invocationId': 'e-1283ea69-99ca-4650-b472-67f100817cdd', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'iiL7XNPh', 'timestamp': 1761903989.735616}, {'content': {'parts': [{'functionResponse': {'id': 'call_y8fCrnD8ODkgCvwUyxpxB1w0', 'name': 'action_decision', 'response': {'action': 'raise', 'amount': 165, 'reasoning': '期待値が見込める（165.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 165'}}}, {'functionResponse': {'id': 'call_h84W24CFbrTyHLpbbgxDcfKo', 'name': 'action_decision', 'response': {'action': 'raise', 'amount': 165, 'reasoning': '期待値が見込める（165.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 165'}}}], 'role': 'user'}, 'invocationId': 'Nx3SwbP8', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'eNzOPAFs', 'timestamp': 1761904007.900341}, {'content': {'parts': [{'text': '{"action":"raise","amount":165,"reasoning":"期待値が見込める(165.00(ポットに対し50.00%)ため、1/2ポットでセミブラフします。ベット額: 165"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 55, 'promptTokenCount': 3189, 'totalTokenCount': 3244}, 'invocationId': 'e-1283ea69-99ca-4650-b472-67f100817cdd', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'z6vsLCvc', 'timestamp': 1761904007.908513}]
2025-10-31 18:46:49,627 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:46:49,629 - poker_game - DEBUG - {"action":"raise","amount":165,"reasoning":"期待値が見込める(165.00(ポットに対し50.00%)ため、1/2ポットでセミブラフします。ベット額: 165"}
2025-10-31 18:46:49,630 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:46:49,631 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"raise","amount":165,"reasoning":"期待値が見込める(165.00(ポットに対し50.00%)ため、1/2ポットでセミブラフします。ベット額: 165"}'
2025-10-31 18:46:49,631 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:46:49,632 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"raise","amount":165,"reasoning":"期待値が見込める(165.00(ポットに対し50.00%)ため、1/2ポットでセミブラフします。ベット額: 165"}
2025-10-31 18:46:49,632 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'raise', 'amount': 165, 'reasoning': '期待値が見込める(165.00(ポットに対し50.00%)ため、1/2ポットでセミブラフします。ベット額: 165'}
2025-10-31 18:46:49,632 - poker_game - DEBUG - [Agent4] Extracted values - action: 'raise', amount: 165
2025-10-31 18:46:49,632 - poker_game - DEBUG - [Agent4] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1840)']
2025-10-31 18:46:49,632 - poker_game - DEBUG - [Agent4] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:46:49,632 - poker_game - DEBUG - [Agent4] Raise amount 165 is valid (min: 20)
2025-10-31 18:46:49,633 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'raise', 'amount': 165}
2025-10-31 18:46:49,633 - poker_game - INFO - [Agent4] Successfully parsed decision: raise, 165, 期待値が見込める(165.00(ポットに対し50.00%)ため、1/2ポットでセミブラフします。ベット額: 165
2025-10-31 18:46:49,634 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'raise' with amount 165
2025-10-31 18:46:49,635 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:49,635 - poker_game - INFO - Hand #4, Phase: flop
2025-10-31 18:46:49,636 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:46:49,636 - poker_game - INFO - Pot: 330, Current bet: 0
2025-10-31 18:46:49,637 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:49,637 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:49,637 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:49,638 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠']
2025-10-31 18:46:49,638 - poker_game - INFO -   P0(Agent0): chips=1910, bet=0, status=active
2025-10-31 18:46:49,639 - poker_game - INFO -   P1(Agent1): chips=1810, bet=0, status=active
2025-10-31 18:46:49,639 - poker_game - INFO -   P2(Agent2): chips=2090, bet=0, status=active
2025-10-31 18:46:49,640 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:46:49,640 - poker_game - INFO -   P4(Agent4): chips=1840, bet=0, status=active
2025-10-31 18:46:49,640 - poker_game - INFO - ==================================================
2025-10-31 18:46:49,641 - poker_game - INFO - ACTION_EXECUTED: Player 4 raised to 165
2025-10-31 18:46:49,658 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:49,659 - poker_game - INFO - Hand #4, Phase: flop
2025-10-31 18:46:49,659 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:46:49,660 - poker_game - INFO - Pot: 495, Current bet: 165
2025-10-31 18:46:49,660 - poker_game - INFO - Last raiser: 4
2025-10-31 18:46:49,661 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:49,661 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:49,662 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠']
2025-10-31 18:46:49,662 - poker_game - INFO -   P0(Agent0): chips=1910, bet=0, status=active
2025-10-31 18:46:49,662 - poker_game - INFO -   P1(Agent1): chips=1810, bet=0, status=active
2025-10-31 18:46:49,663 - poker_game - INFO -   P2(Agent2): chips=2090, bet=0, status=active
2025-10-31 18:46:49,663 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:46:49,663 - poker_game - INFO -   P4(Agent4): chips=1675, bet=165, status=active
2025-10-31 18:46:49,664 - poker_game - INFO - Extra: Action: Player 4 raised to 165
2025-10-31 18:46:49,664 - poker_game - INFO - ==================================================
2025-10-31 18:46:49,664 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:49,664 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:49,665 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:46:49,665 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:46:49,665 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:49,666 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:49,666 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:46:49,666 - poker_game - DEBUG - Player bets: [0, 0, 0, 165], Current bet: 165, All same: False
2025-10-31 18:46:49,666 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:46:49,666 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:49,666 - poker_game - INFO - Hand #4, Phase: flop
2025-10-31 18:46:49,667 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:46:49,667 - poker_game - INFO - Pot: 495, Current bet: 165
2025-10-31 18:46:49,667 - poker_game - INFO - Last raiser: 4
2025-10-31 18:46:49,667 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:49,667 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:49,668 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠']
2025-10-31 18:46:49,669 - poker_game - INFO -   P0(Agent0): chips=1910, bet=0, status=active
2025-10-31 18:46:49,670 - poker_game - INFO -   P1(Agent1): chips=1810, bet=0, status=active
2025-10-31 18:46:49,671 - poker_game - INFO -   P2(Agent2): chips=2090, bet=0, status=active
2025-10-31 18:46:49,672 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:46:49,673 - poker_game - INFO -   P4(Agent4): chips=1675, bet=165, status=active
2025-10-31 18:46:49,674 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:46:49,675 - poker_game - INFO - ==================================================
2025-10-31 18:46:49,777 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "flop",
  "your_cards": [
    "10♦",
    "A♥"
  ],
  "community": [
    "3♣",
    "8♣",
    "9♠"
  ],
  "your_chips": 1910,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 495,
  "to_call": 165,
  "dealer_button": 2,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1810,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2090,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1675,
      "bet": 165,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (165)",
    "raise (min 185)",
    "all-in (1910)"
  ],
  "history": [
    "Player 1 checked",
    "Turn dealt: 10♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 2♥",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠",
    "Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣",
    "Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80",
    "Player 2 called 80",
    "Player 3 folded",
    "Player 4 called 60",
    "Flop dealt: 3♣, 8♣, 9♠",
    "Player 4 raised to 165"
  ]
}
2025-10-31 18:46:49,839 - poker_game - DEBUG - Create Session: {'id': '8cc202cb-789a-4ba6-b07e-29223393025b', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904009.832883}
2025-10-31 18:46:51,547 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 165,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）の後、私はトップペア（エースハイ）を持っています。しかし、フロップには2枚のクラブ（♣）があり、相手がフラッシュ（同じスートのカードが5枚揃うこと）を持っている可能性があります。相手のベット額はポットに対してそれほど大きくなく、コールすることで状況をさらに見ることができます。フォールド（降りること）は、まだ勝てる可能性があるため、早すぎます。レイズ（さらにベット額を上げること）は、相手が強いハンドを持っている可能性を考えるとリスクが高すぎます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 153, 'promptTokenCount': 1003, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1003}], 'totalTokenCount': 1156}, 'invocationId': 'e-d16d2a53-f313-4b3b-8c9d-619e12888e1c', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '7g6Pj7fV', 'timestamp': 1761904009.852699}]
2025-10-31 18:46:51,548 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:46:51,548 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 165,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）の後、私はトップペア（エースハイ）を持っています。しかし、フロップには2枚のクラブ（♣）があり、相手がフラッシュ（同じスートのカードが5枚揃うこと）を持っている可能性があります。相手のベット額はポットに対してそれほど大きくなく、コールすることで状況をさらに見ることができます。フォールド（降りること）は、まだ勝てる可能性があるため、早すぎます。レイズ（さらにベット額を上げること）は、相手が強いハンドを持っている可能性を考えるとリスクが高すぎます。"
}
```
2025-10-31 18:46:51,549 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:46:51,549 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 165,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）の後、私はトップペア（エースハイ）を持っています。しかし、フロップには2枚のクラブ（♣）があり、相手がフラッシュ（同じスートのカードが5枚揃うこと）を持っている可能性があります。相手のベット額はポットに対してそれほど大きくなく、コールすることで状況をさらに見ることができます。フォールド（降りること）は、まだ勝てる可能性があるため、早すぎます。レイズ（さらにベット額を上げること）は、相手が強いハンドを持っている可能性を考えるとリスクが高すぎます。"\n}\n```'
2025-10-31 18:46:51,549 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:46:51,549 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 165,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）の後、私はトップペア（エースハイ）を持っています。しかし、フロップには2枚のクラブ（♣）があり、相手がフラッシュ（同じスートのカードが5枚揃うこと）を持っている可能性があります。相手のベット額はポットに対してそれほど大きくなく、コールすることで状況をさらに見ることができます。フォールド（降りること）は、まだ勝てる可能性があるため、早すぎます。レイズ（さらにベット額を上げること）は、相手が強いハンドを持っている可能性を考えるとリスクが高すぎます。"\n}'
2025-10-31 18:46:51,550 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 165,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）の後、私はトップペア（エースハイ）を持っています。しかし、フロップには2枚のクラブ（♣）があり、相手がフラッシュ（同じスートのカードが5枚揃うこと）を持っている可能性があります。相手のベット額はポットに対してそれほど大きくなく、コールすることで状況をさらに見ることができます。フォールド（降りること）は、まだ勝てる可能性があるため、早すぎます。レイズ（さらにベット額を上げること）は、相手が強いハンドを持っている可能性を考えるとリスクが高すぎます。"
}
2025-10-31 18:46:51,550 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 165, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）の後、私はトップペア（エースハイ）を持っています。しかし、フロップには2枚のクラブ（♣）があり、相手がフラッシュ（同じスートのカードが5枚揃うこと）を持っている可能性があります。相手のベット額はポットに対してそれほど大きくなく、コールすることで状況をさらに見ることができます。フォールド（降りること）は、まだ勝てる可能性があるため、早すぎます。レイズ（さらにベット額を上げること）は、相手が強いハンドを持っている可能性を考えるとリスクが高すぎます。'}
2025-10-31 18:46:51,550 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 165
2025-10-31 18:46:51,550 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (165)', 'raise (min 185)', 'all-in (1910)']
2025-10-31 18:46:51,550 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (165)': 165
2025-10-31 18:46:51,551 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 165}
2025-10-31 18:46:51,551 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 165, フロップ（最初の3枚のコミュニティカード）の後、私はトップペア（エースハイ）を持っています。しかし、フロップには2枚のクラブ（♣）があり、相手がフラッシュ（同じスートのカードが5枚揃うこと）を持っている可能性があります。相手のベット額はポットに対してそれほど大きくなく、コールすることで状況をさらに見ることができます。フォールド（降りること）は、まだ勝てる可能性があるため、早すぎます。レイズ（さらにベット額を上げること）は、相手が強いハンドを持っている可能性を考えるとリスクが高すぎます。
2025-10-31 18:46:51,552 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 165
2025-10-31 18:46:51,552 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:51,553 - poker_game - INFO - Hand #4, Phase: flop
2025-10-31 18:46:51,553 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:46:51,553 - poker_game - INFO - Pot: 495, Current bet: 165
2025-10-31 18:46:51,554 - poker_game - INFO - Last raiser: 4
2025-10-31 18:46:51,554 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:51,554 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:51,555 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠']
2025-10-31 18:46:51,555 - poker_game - INFO -   P0(Agent0): chips=1910, bet=0, status=active
2025-10-31 18:46:51,556 - poker_game - INFO -   P1(Agent1): chips=1810, bet=0, status=active
2025-10-31 18:46:51,556 - poker_game - INFO -   P2(Agent2): chips=2090, bet=0, status=active
2025-10-31 18:46:51,556 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:46:51,557 - poker_game - INFO -   P4(Agent4): chips=1675, bet=165, status=active
2025-10-31 18:46:51,557 - poker_game - INFO - ==================================================
2025-10-31 18:46:51,558 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 165
2025-10-31 18:46:51,572 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:51,572 - poker_game - INFO - Hand #4, Phase: flop
2025-10-31 18:46:51,573 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:46:51,573 - poker_game - INFO - Pot: 660, Current bet: 165
2025-10-31 18:46:51,573 - poker_game - INFO - Last raiser: 4
2025-10-31 18:46:51,574 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:51,574 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:51,575 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠']
2025-10-31 18:46:51,575 - poker_game - INFO -   P0(Agent0): chips=1745, bet=165, status=active
2025-10-31 18:46:51,576 - poker_game - INFO -   P1(Agent1): chips=1810, bet=0, status=active
2025-10-31 18:46:51,576 - poker_game - INFO -   P2(Agent2): chips=2090, bet=0, status=active
2025-10-31 18:46:51,576 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:46:51,577 - poker_game - INFO -   P4(Agent4): chips=1675, bet=165, status=active
2025-10-31 18:46:51,577 - poker_game - INFO - Extra: Action: Player 0 called 165
2025-10-31 18:46:51,578 - poker_game - INFO - ==================================================
2025-10-31 18:46:51,578 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:51,578 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:51,579 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:46:51,579 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:46:51,579 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:51,580 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:51,580 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:46:51,580 - poker_game - DEBUG - Player bets: [165, 0, 0, 165], Current bet: 165, All same: False
2025-10-31 18:46:51,580 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:46:51,581 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:51,581 - poker_game - INFO - Hand #4, Phase: flop
2025-10-31 18:46:51,581 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:46:51,582 - poker_game - INFO - Pot: 660, Current bet: 165
2025-10-31 18:46:51,582 - poker_game - INFO - Last raiser: 4
2025-10-31 18:46:51,582 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:51,583 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:51,583 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠']
2025-10-31 18:46:51,584 - poker_game - INFO -   P0(Agent0): chips=1745, bet=165, status=active
2025-10-31 18:46:51,584 - poker_game - INFO -   P1(Agent1): chips=1810, bet=0, status=active
2025-10-31 18:46:51,585 - poker_game - INFO -   P2(Agent2): chips=2090, bet=0, status=active
2025-10-31 18:46:51,585 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:46:51,586 - poker_game - INFO -   P4(Agent4): chips=1675, bet=165, status=active
2025-10-31 18:46:51,586 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:46:51,587 - poker_game - INFO - ==================================================
2025-10-31 18:46:51,689 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "flop",
  "your_cards": [
    "3♦",
    "Q♦"
  ],
  "community": [
    "3♣",
    "8♣",
    "9♠"
  ],
  "your_chips": 1810,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 660,
  "to_call": 165,
  "dealer_button": 2,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1745,
      "bet": 165,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 2090,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1675,
      "bet": 165,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (165)",
    "raise (min 185)",
    "all-in (1810)"
  ],
  "history": [
    "Turn dealt: 10♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 2♥",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠",
    "Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣",
    "Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80",
    "Player 2 called 80",
    "Player 3 folded",
    "Player 4 called 60",
    "Flop dealt: 3♣, 8♣, 9♠",
    "Player 4 raised to 165",
    "Player 0 called 165"
  ]
}
2025-10-31 18:46:51,704 - poker_game - DEBUG - Create Session: {'id': '17989081-e72b-4cf3-befa-8129932f3cc6', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904011.7011638}
2025-10-31 18:46:53,332 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 165,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、私はペア（3のペア）ができており、ドロー（フラッシュドロー）の可能性もあります。相手（プレイヤー4）がレイズ（ベット額を上げる）してきましたが、コール（相手のベット額と同じ額をベットしてゲームを続ける）するには十分なポットオッズ（コールするのに必要な金額に対して、ポットにある金額の割合）があります。様子を見る（check）か、フォールド（ゲームから降りる）するのは、あまり良い選択ではありません。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 145, 'promptTokenCount': 1008, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1008}], 'totalTokenCount': 1153}, 'invocationId': 'e-e12756fb-ad26-40c0-8b72-1a93c47914fc', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '8Cjn4HmG', 'timestamp': 1761904011.715841}]
2025-10-31 18:46:53,333 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:46:53,333 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 165,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、私はペア（3のペア）ができており、ドロー（フラッシュドロー）の可能性もあります。相手（プレイヤー4）がレイズ（ベット額を上げる）してきましたが、コール（相手のベット額と同じ額をベットしてゲームを続ける）するには十分なポットオッズ（コールするのに必要な金額に対して、ポットにある金額の割合）があります。様子を見る（check）か、フォールド（ゲームから降りる）するのは、あまり良い選択ではありません。"
}
```
2025-10-31 18:46:53,334 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:46:53,334 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 165,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、私はペア（3のペア）ができており、ドロー（フラッシュドロー）の可能性もあります。相手（プレイヤー4）がレイズ（ベット額を上げる）してきましたが、コール（相手のベット額と同じ額をベットしてゲームを続ける）するには十分なポットオッズ（コールするのに必要な金額に対して、ポットにある金額の割合）があります。様子を見る（check）か、フォールド（ゲームから降りる）するのは、あまり良い選択ではありません。"\n}\n```'
2025-10-31 18:46:53,334 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:46:53,334 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 165,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、私はペア（3のペア）ができており、ドロー（フラッシュドロー）の可能性もあります。相手（プレイヤー4）がレイズ（ベット額を上げる）してきましたが、コール（相手のベット額と同じ額をベットしてゲームを続ける）するには十分なポットオッズ（コールするのに必要な金額に対して、ポットにある金額の割合）があります。様子を見る（check）か、フォールド（ゲームから降りる）するのは、あまり良い選択ではありません。"\n}'
2025-10-31 18:46:53,335 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 165,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、私はペア（3のペア）ができており、ドロー（フラッシュドロー）の可能性もあります。相手（プレイヤー4）がレイズ（ベット額を上げる）してきましたが、コール（相手のベット額と同じ額をベットしてゲームを続ける）するには十分なポットオッズ（コールするのに必要な金額に対して、ポットにある金額の割合）があります。様子を見る（check）か、フォールド（ゲームから降りる）するのは、あまり良い選択ではありません。"
}
2025-10-31 18:46:53,335 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 165, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）で、私はペア（3のペア）ができており、ドロー（フラッシュドロー）の可能性もあります。相手（プレイヤー4）がレイズ（ベット額を上げる）してきましたが、コール（相手のベット額と同じ額をベットしてゲームを続ける）するには十分なポットオッズ（コールするのに必要な金額に対して、ポットにある金額の割合）があります。様子を見る（check）か、フォールド（ゲームから降りる）するのは、あまり良い選択ではありません。'}
2025-10-31 18:46:53,335 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 165
2025-10-31 18:46:53,335 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (165)', 'raise (min 185)', 'all-in (1810)']
2025-10-31 18:46:53,335 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (165)': 165
2025-10-31 18:46:53,335 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 165}
2025-10-31 18:46:53,335 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 165, フロップ（最初の3枚のコミュニティカード）で、私はペア（3のペア）ができており、ドロー（フラッシュドロー）の可能性もあります。相手（プレイヤー4）がレイズ（ベット額を上げる）してきましたが、コール（相手のベット額と同じ額をベットしてゲームを続ける）するには十分なポットオッズ（コールするのに必要な金額に対して、ポットにある金額の割合）があります。様子を見る（check）か、フォールド（ゲームから降りる）するのは、あまり良い選択ではありません。
2025-10-31 18:46:53,336 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 165
2025-10-31 18:46:53,337 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:53,337 - poker_game - INFO - Hand #4, Phase: flop
2025-10-31 18:46:53,337 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:46:53,338 - poker_game - INFO - Pot: 660, Current bet: 165
2025-10-31 18:46:53,338 - poker_game - INFO - Last raiser: 4
2025-10-31 18:46:53,338 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:53,339 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:53,339 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠']
2025-10-31 18:46:53,339 - poker_game - INFO -   P0(Agent0): chips=1745, bet=165, status=active
2025-10-31 18:46:53,340 - poker_game - INFO -   P1(Agent1): chips=1810, bet=0, status=active
2025-10-31 18:46:53,340 - poker_game - INFO -   P2(Agent2): chips=2090, bet=0, status=active
2025-10-31 18:46:53,341 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:46:53,341 - poker_game - INFO -   P4(Agent4): chips=1675, bet=165, status=active
2025-10-31 18:46:53,341 - poker_game - INFO - ==================================================
2025-10-31 18:46:53,342 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 165
2025-10-31 18:46:53,353 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:53,354 - poker_game - INFO - Hand #4, Phase: flop
2025-10-31 18:46:53,354 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:46:53,355 - poker_game - INFO - Pot: 825, Current bet: 165
2025-10-31 18:46:53,355 - poker_game - INFO - Last raiser: 4
2025-10-31 18:46:53,355 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:53,356 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:53,356 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠']
2025-10-31 18:46:53,357 - poker_game - INFO -   P0(Agent0): chips=1745, bet=165, status=active
2025-10-31 18:46:53,357 - poker_game - INFO -   P1(Agent1): chips=1645, bet=165, status=active
2025-10-31 18:46:53,358 - poker_game - INFO -   P2(Agent2): chips=2090, bet=0, status=active
2025-10-31 18:46:53,358 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:46:53,359 - poker_game - INFO -   P4(Agent4): chips=1675, bet=165, status=active
2025-10-31 18:46:53,359 - poker_game - INFO - Extra: Action: Player 1 called 165
2025-10-31 18:46:53,360 - poker_game - INFO - ==================================================
2025-10-31 18:46:53,360 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:53,360 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:53,361 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:46:53,361 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:46:53,361 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:53,361 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:53,362 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:46:53,362 - poker_game - DEBUG - Player bets: [165, 165, 0, 165], Current bet: 165, All same: False
2025-10-31 18:46:53,362 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:46:53,362 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:53,363 - poker_game - INFO - Hand #4, Phase: flop
2025-10-31 18:46:53,363 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:46:53,364 - poker_game - INFO - Pot: 825, Current bet: 165
2025-10-31 18:46:53,364 - poker_game - INFO - Last raiser: 4
2025-10-31 18:46:53,364 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:53,365 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:53,365 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠']
2025-10-31 18:46:53,366 - poker_game - INFO -   P0(Agent0): chips=1745, bet=165, status=active
2025-10-31 18:46:53,367 - poker_game - INFO -   P1(Agent1): chips=1645, bet=165, status=active
2025-10-31 18:46:53,367 - poker_game - INFO -   P2(Agent2): chips=2090, bet=0, status=active
2025-10-31 18:46:53,368 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:46:53,368 - poker_game - INFO -   P4(Agent4): chips=1675, bet=165, status=active
2025-10-31 18:46:53,369 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:46:53,370 - poker_game - INFO - ==================================================
2025-10-31 18:46:53,471 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "flop",
  "your_cards": [
    "A♣",
    "9♦"
  ],
  "community": [
    "3♣",
    "8♣",
    "9♠"
  ],
  "your_chips": 2090,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 825,
  "to_call": 165,
  "dealer_button": 2,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1745,
      "bet": 165,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1645,
      "bet": 165,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1675,
      "bet": 165,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (165)",
    "raise (min 185)",
    "all-in (2090)"
  ],
  "history": [
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 2♥",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠",
    "Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣",
    "Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80",
    "Player 2 called 80",
    "Player 3 folded",
    "Player 4 called 60",
    "Flop dealt: 3♣, 8♣, 9♠",
    "Player 4 raised to 165",
    "Player 0 called 165",
    "Player 1 called 165"
  ]
}
2025-10-31 18:46:53,487 - poker_game - DEBUG - Create Session: {'id': '2294b376-2170-4c13-be7f-803a8c64ff1e', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904013.4844744}
2025-10-31 18:46:55,431 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 165,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたはトップペア（9のペア）を持っています。これは悪くないハンドですが、コミュニティカードにはフラッシュ（同じスートのカードが3枚）の可能性もあり、相手がフラッシュを完成させている可能性も考慮する必要があります。現在のポットサイズ（825）に対して、コールに必要な額（165）はポットの約20%であり、比較的少額です。相手のアクション（Player 4がレイズし、他のプレイヤーがコール）から、相手が強いハンドを持っている可能性はありますが、あなたのトップペアはこの段階では十分に戦えるハンドだと判断しました。したがって、コールして次のカード（ターン）を見るのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 187, 'promptTokenCount': 1011, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1011}], 'totalTokenCount': 1198}, 'invocationId': 'e-94f7d679-b406-4e09-8ccb-e5f6ca3464a1', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '5Ddz9fzV', 'timestamp': 1761904013.501512}]
2025-10-31 18:46:55,432 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:46:55,432 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 165,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたはトップペア（9のペア）を持っています。これは悪くないハンドですが、コミュニティカードにはフラッシュ（同じスートのカードが3枚）の可能性もあり、相手がフラッシュを完成させている可能性も考慮する必要があります。現在のポットサイズ（825）に対して、コールに必要な額（165）はポットの約20%であり、比較的少額です。相手のアクション（Player 4がレイズし、他のプレイヤーがコール）から、相手が強いハンドを持っている可能性はありますが、あなたのトップペアはこの段階では十分に戦えるハンドだと判断しました。したがって、コールして次のカード（ターン）を見るのが最善の選択です。"
}
```
2025-10-31 18:46:55,433 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:46:55,433 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 165,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたはトップペア（9のペア）を持っています。これは悪くないハンドですが、コミュニティカードにはフラッシュ（同じスートのカードが3枚）の可能性もあり、相手がフラッシュを完成させている可能性も考慮する必要があります。現在のポットサイズ（825）に対して、コールに必要な額（165）はポットの約20%であり、比較的少額です。相手のアクション（Player 4がレイズし、他のプレイヤーがコール）から、相手が強いハンドを持っている可能性はありますが、あなたのトップペアはこの段階では十分に戦えるハンドだと判断しました。したがって、コールして次のカード（ターン）を見るのが最善の選択です。"\n}\n```'
2025-10-31 18:46:55,433 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:46:55,434 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 165,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたはトップペア（9のペア）を持っています。これは悪くないハンドですが、コミュニティカードにはフラッシュ（同じスートのカードが3枚）の可能性もあり、相手がフラッシュを完成させている可能性も考慮する必要があります。現在のポットサイズ（825）に対して、コールに必要な額（165）はポットの約20%であり、比較的少額です。相手のアクション（Player 4がレイズし、他のプレイヤーがコール）から、相手が強いハンドを持っている可能性はありますが、あなたのトップペアはこの段階では十分に戦えるハンドだと判断しました。したがって、コールして次のカード（ターン）を見るのが最善の選択です。"\n}'
2025-10-31 18:46:55,434 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "call",
  "amount": 165,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたはトップペア（9のペア）を持っています。これは悪くないハンドですが、コミュニティカードにはフラッシュ（同じスートのカードが3枚）の可能性もあり、相手がフラッシュを完成させている可能性も考慮する必要があります。現在のポットサイズ（825）に対して、コールに必要な額（165）はポットの約20%であり、比較的少額です。相手のアクション（Player 4がレイズし、他のプレイヤーがコール）から、相手が強いハンドを持っている可能性はありますが、あなたのトップペアはこの段階では十分に戦えるハンドだと判断しました。したがって、コールして次のカード（ターン）を見るのが最善の選択です。"
}
2025-10-31 18:46:55,434 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'call', 'amount': 165, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）で、あなたはトップペア（9のペア）を持っています。これは悪くないハンドですが、コミュニティカードにはフラッシュ（同じスートのカードが3枚）の可能性もあり、相手がフラッシュを完成させている可能性も考慮する必要があります。現在のポットサイズ（825）に対して、コールに必要な額（165）はポットの約20%であり、比較的少額です。相手のアクション（Player 4がレイズし、他のプレイヤーがコール）から、相手が強いハンドを持っている可能性はありますが、あなたのトップペアはこの段階では十分に戦えるハンドだと判断しました。したがって、コールして次のカード（ターン）を見るのが最善の選択です。'}
2025-10-31 18:46:55,436 - poker_game - DEBUG - [Agent2] Extracted values - action: 'call', amount: 165
2025-10-31 18:46:55,437 - poker_game - DEBUG - [Agent2] Processing call action - available actions: ['fold', 'call (165)', 'raise (min 185)', 'all-in (2090)']
2025-10-31 18:46:55,438 - poker_game - DEBUG - [Agent2] Call amount extracted from 'call (165)': 165
2025-10-31 18:46:55,438 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'call', 'amount': 165}
2025-10-31 18:46:55,439 - poker_game - INFO - [Agent2] Successfully parsed decision: call, 165, フロップ（最初の3枚のコミュニティカード）で、あなたはトップペア（9のペア）を持っています。これは悪くないハンドですが、コミュニティカードにはフラッシュ（同じスートのカードが3枚）の可能性もあり、相手がフラッシュを完成させている可能性も考慮する必要があります。現在のポットサイズ（825）に対して、コールに必要な額（165）はポットの約20%であり、比較的少額です。相手のアクション（Player 4がレイズし、他のプレイヤーがコール）から、相手が強いハンドを持っている可能性はありますが、あなたのトップペアはこの段階では十分に戦えるハンドだと判断しました。したがって、コールして次のカード（ターン）を見るのが最善の選択です。
2025-10-31 18:46:55,440 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'call' with amount 165
2025-10-31 18:46:55,441 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:46:55,441 - poker_game - INFO - Hand #4, Phase: flop
2025-10-31 18:46:55,442 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:46:55,442 - poker_game - INFO - Pot: 825, Current bet: 165
2025-10-31 18:46:55,442 - poker_game - INFO - Last raiser: 4
2025-10-31 18:46:55,443 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:55,443 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:55,444 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠']
2025-10-31 18:46:55,444 - poker_game - INFO -   P0(Agent0): chips=1745, bet=165, status=active
2025-10-31 18:46:55,444 - poker_game - INFO -   P1(Agent1): chips=1645, bet=165, status=active
2025-10-31 18:46:55,445 - poker_game - INFO -   P2(Agent2): chips=2090, bet=0, status=active
2025-10-31 18:46:55,445 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:46:55,446 - poker_game - INFO -   P4(Agent4): chips=1675, bet=165, status=active
2025-10-31 18:46:55,446 - poker_game - INFO - ==================================================
2025-10-31 18:46:55,446 - poker_game - INFO - ACTION_EXECUTED: Player 2 called 165
2025-10-31 18:46:55,473 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:46:55,474 - poker_game - INFO - Hand #4, Phase: flop
2025-10-31 18:46:55,474 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:46:55,475 - poker_game - INFO - Pot: 990, Current bet: 165
2025-10-31 18:46:55,475 - poker_game - INFO - Last raiser: 4
2025-10-31 18:46:55,476 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:55,476 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:55,477 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠']
2025-10-31 18:46:55,477 - poker_game - INFO -   P0(Agent0): chips=1745, bet=165, status=active
2025-10-31 18:46:55,478 - poker_game - INFO -   P1(Agent1): chips=1645, bet=165, status=active
2025-10-31 18:46:55,478 - poker_game - INFO -   P2(Agent2): chips=1925, bet=165, status=active
2025-10-31 18:46:55,478 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:46:55,479 - poker_game - INFO -   P4(Agent4): chips=1675, bet=165, status=active
2025-10-31 18:46:55,479 - poker_game - INFO - Extra: Action: Player 2 called 165
2025-10-31 18:46:55,480 - poker_game - INFO - ==================================================
2025-10-31 18:46:55,480 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:46:55,481 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:46:55,481 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:46:55,481 - poker_game - INFO - Advanced from player 2 to player 4 (seat order)
2025-10-31 18:46:55,481 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:46:55,482 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:46:55,483 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:46:55,483 - poker_game - DEBUG - Player bets: [165, 165, 165, 165], Current bet: 165, All same: True
2025-10-31 18:46:55,483 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:46:55,490 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:46:55,490 - poker_game - INFO - Hand #4, Phase: flop
2025-10-31 18:46:55,491 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:46:55,491 - poker_game - INFO - Pot: 990, Current bet: 165
2025-10-31 18:46:55,492 - poker_game - INFO - Last raiser: 4
2025-10-31 18:46:55,492 - poker_game - INFO - Betting round complete: True
2025-10-31 18:46:55,493 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:55,493 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠']
2025-10-31 18:46:55,494 - poker_game - INFO -   P0(Agent0): chips=1745, bet=165, status=active
2025-10-31 18:46:55,494 - poker_game - INFO -   P1(Agent1): chips=1645, bet=165, status=active
2025-10-31 18:46:55,494 - poker_game - INFO -   P2(Agent2): chips=1925, bet=165, status=active
2025-10-31 18:46:55,495 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:46:55,495 - poker_game - INFO -   P4(Agent4): chips=1675, bet=165, status=active
2025-10-31 18:46:55,495 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:46:55,496 - poker_game - INFO - ==================================================
2025-10-31 18:46:55,598 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:46:55,599 - poker_game - INFO - Betting round complete: True
2025-10-31 18:46:55,599 - poker_game - INFO - Remaining players: 4
2025-10-31 18:46:55,600 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:46:55,600 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:46:55,600 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:46:55,601 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:46:55,601 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 18:46:55,616 - poker_game - INFO - Starting new betting round
2025-10-31 18:46:55,617 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:46:55,617 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:46:55,618 - poker_game - DEBUG - Active players for new betting round: [0, 1, 2, 4]
2025-10-31 18:46:55,618 - poker_game - DEBUG - Dealer button: 2
2025-10-31 18:46:55,618 - poker_game - INFO - First actor: Player 4 (by phase rule), was 4
2025-10-31 18:46:55,619 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:46:55,619 - poker_game - INFO - Hand #4, Phase: turn
2025-10-31 18:46:55,620 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:46:55,620 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:46:55,621 - poker_game - INFO - Last raiser: None
2025-10-31 18:46:55,621 - poker_game - INFO - Betting round complete: False
2025-10-31 18:46:55,622 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:46:55,622 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥']
2025-10-31 18:46:55,623 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:46:55,623 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:46:55,624 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:46:55,624 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:46:55,625 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:46:55,625 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 18:46:55,626 - poker_game - INFO - ==================================================
2025-10-31 18:46:55,628 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "turn",
  "your_cards": [
    "8♠",
    "5♣"
  ],
  "community": [
    "3♣",
    "8♣",
    "9♠",
    "7♥"
  ],
  "your_chips": 1675,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 245,
  "pot": 990,
  "to_call": 0,
  "dealer_button": 2,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1745,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1645,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1925,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1675)"
  ],
  "history": [
    "River dealt: 2♥",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠",
    "Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣",
    "Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80",
    "Player 2 called 80",
    "Player 3 folded",
    "Player 4 called 60",
    "Flop dealt: 3♣, 8♣, 9♠",
    "Player 4 raised to 165",
    "Player 0 called 165",
    "Player 1 called 165",
    "Player 2 called 165",
    "Turn dealt: 7♥"
  ]
}
2025-10-31 18:46:55,647 - poker_game - DEBUG - Create Session: {'id': 'b791ae37-6b6a-4252-81f9-1613fd92f78c', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904015.6436791}
2025-10-31 18:47:05,709 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:47:09,476 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_Kkd4CcvRW2xH2ULZxB4wfw6o', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1329, 'totalTokenCount': 1346}, 'invocationId': 'e-a43129a3-d60d-4aa4-bd55-3c444142de6a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'm5gXKkjh', 'timestamp': 1761904015.665805}, {'content': {'parts': [{'functionResponse': {'id': 'call_Kkd4CcvRW2xH2ULZxB4wfw6o', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-a43129a3-d60d-4aa4-bd55-3c444142de6a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'Hfz4vyHc', 'timestamp': 1761904016.715928}, {'content': {'parts': [{'functionCall': {'id': 'call_lbHLW323IamQDx9lI2w2cewJ', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1853, 'totalTokenCount': 1870}, 'invocationId': 'e-a43129a3-d60d-4aa4-bd55-3c444142de6a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'HekOmW8y', 'timestamp': 1761904016.720032}, {'content': {'parts': [{'functionResponse': {'id': 'call_lbHLW323IamQDx9lI2w2cewJ', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-a43129a3-d60d-4aa4-bd55-3c444142de6a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'CcizjOHE', 'timestamp': 1761904017.712428}, {'content': {'parts': [{'functionCall': {'id': 'call_hjGFFp06INQhgXRli1lPIN8t', 'args': {'game_state': {'your_id': 4, 'phase': 'turn', 'your_cards': ['8♠', '5♣'], 'community': ['3♣', '8♣', '9♠', '7♥'], 'your_chips': 1675, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 245, 'pot': 990, 'to_call': 0, 'dealer_button': 2, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1745, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 1645, 'bet': 0, 'status': 'active'}, {'id': 2, 'chips': 1925, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 2020, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (1675)'], 'history': ['River dealt: 2♥', 'Player 3 checked', 'Player 1 checked', 'Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠', 'Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣', 'Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣', 'Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 raised to 80', 'Player 1 called 80', 'Player 2 called 80', 'Player 3 folded', 'Player 4 called 60', 'Flop dealt: 3♣, 8♣, 9♠', 'Player 4 raised to 165', 'Player 0 called 165', 'Player 1 called 165', 'Player 2 called 165', 'Turn dealt: 7♥']}, 'call_amount': 0, 'pot_after_call': 990, 'equity': 0.4}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 534, 'promptTokenCount': 1884, 'totalTokenCount': 2418}, 'invocationId': 'e-a43129a3-d60d-4aa4-bd55-3c444142de6a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'yT1Or7gP', 'timestamp': 1761904017.717727}, {'content': {'parts': [{'functionResponse': {'id': 'call_hjGFFp06INQhgXRli1lPIN8t', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（396.00(ポットに対して40.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'e-a43129a3-d60d-4aa4-bd55-3c444142de6a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'GqdfKKlD', 'timestamp': 1761904026.488639}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い（396.00(ポットに対して40.00%）ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 38, 'promptTokenCount': 2453, 'totalTokenCount': 2491}, 'invocationId': 'e-a43129a3-d60d-4aa4-bd55-3c444142de6a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'w3Thhfx5', 'timestamp': 1761904026.490862}]
2025-10-31 18:47:09,477 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:47:09,477 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い（396.00(ポットに対して40.00%）ため、チェックします"}
2025-10-31 18:47:09,477 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:47:09,478 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い（396.00(ポットに対して40.00%）ため、チェックします"}'
2025-10-31 18:47:09,478 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:47:09,478 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い（396.00(ポットに対して40.00%）ため、チェックします"}
2025-10-31 18:47:09,478 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（396.00(ポットに対して40.00%）ため、チェックします'}
2025-10-31 18:47:09,478 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 18:47:09,478 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 18:47:09,478 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:47:09,478 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い（396.00(ポットに対して40.00%）ため、チェックします
2025-10-31 18:47:09,479 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 18:47:09,479 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:47:09,479 - poker_game - INFO - Hand #4, Phase: turn
2025-10-31 18:47:09,480 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:47:09,480 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:47:09,480 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:09,480 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:09,480 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:09,481 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥']
2025-10-31 18:47:09,481 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:09,481 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:09,481 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:09,481 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:09,481 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:47:09,482 - poker_game - INFO - ==================================================
2025-10-31 18:47:09,482 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 18:47:09,496 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:47:09,496 - poker_game - INFO - Hand #4, Phase: turn
2025-10-31 18:47:09,496 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:47:09,496 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:47:09,497 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:09,497 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:09,497 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:09,497 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥']
2025-10-31 18:47:09,497 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:09,498 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:09,498 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:09,498 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:09,498 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:47:09,499 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 18:47:09,500 - poker_game - INFO - ==================================================
2025-10-31 18:47:09,500 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:47:09,502 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:47:09,502 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:47:09,502 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:47:09,503 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:47:09,504 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:47:09,504 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:47:09,505 - poker_game - DEBUG - Player bets: [0, 0, 0, 0], Current bet: 0, All same: True
2025-10-31 18:47:09,505 - poker_game - DEBUG - Active player indices: [0, 1, 2, 4]
2025-10-31 18:47:09,505 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:47:09,505 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:47:09,505 - poker_game - DEBUG - First actor index: 4
2025-10-31 18:47:09,506 - poker_game - DEBUG - Betting continues: Current player 0 != first actor 4
2025-10-31 18:47:09,506 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:47:09,506 - poker_game - INFO - Hand #4, Phase: turn
2025-10-31 18:47:09,506 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:47:09,506 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:47:09,506 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:09,507 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:09,507 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:09,507 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥']
2025-10-31 18:47:09,507 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:09,507 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:09,508 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:09,508 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:09,508 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:47:09,508 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:47:09,509 - poker_game - INFO - ==================================================
2025-10-31 18:47:09,609 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "turn",
  "your_cards": [
    "10♦",
    "A♥"
  ],
  "community": [
    "3♣",
    "8♣",
    "9♠",
    "7♥"
  ],
  "your_chips": 1745,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 245,
  "pot": 990,
  "to_call": 0,
  "dealer_button": 2,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1645,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1925,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1675,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1745)"
  ],
  "history": [
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠",
    "Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣",
    "Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80",
    "Player 2 called 80",
    "Player 3 folded",
    "Player 4 called 60",
    "Flop dealt: 3♣, 8♣, 9♠",
    "Player 4 raised to 165",
    "Player 0 called 165",
    "Player 1 called 165",
    "Player 2 called 165",
    "Turn dealt: 7♥",
    "Player 4 checked"
  ]
}
2025-10-31 18:47:09,621 - poker_game - DEBUG - Create Session: {'id': '523b7837-28d1-4c00-bb37-b6075cdf8b5a', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904029.6180177}
2025-10-31 18:47:11,572 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたはコールが可能です。あなたの手札はAハイ（エースハイ）であり、ボードにはストレートやフラッシュの可能性も示唆されています。しかし、相手のアクションはチェックしており、積極的にベットする意図は見られません。そのため、現時点ではコールを選択し、次のストリート（リバー）での相手のアクションを見て判断するのが最善でしょう。コール額が0なのは、相手がチェックしたため、追加のベットがないからです。つまり、あなたは無料で次のカードを見ることができます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 139, 'promptTokenCount': 1010, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1010}], 'totalTokenCount': 1149}, 'invocationId': 'e-aadfb8b7-f6f2-43e7-84b7-2cd5cf03b1ce', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'hIdFdBMZ', 'timestamp': 1761904029.634409}]
2025-10-31 18:47:11,573 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:47:11,573 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "現在の状況では、あなたはコールが可能です。あなたの手札はAハイ（エースハイ）であり、ボードにはストレートやフラッシュの可能性も示唆されています。しかし、相手のアクションはチェックしており、積極的にベットする意図は見られません。そのため、現時点ではコールを選択し、次のストリート（リバー）での相手のアクションを見て判断するのが最善でしょう。コール額が0なのは、相手がチェックしたため、追加のベットがないからです。つまり、あなたは無料で次のカードを見ることができます。"
}
```
2025-10-31 18:47:11,578 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:47:11,578 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたはコールが可能です。あなたの手札はAハイ（エースハイ）であり、ボードにはストレートやフラッシュの可能性も示唆されています。しかし、相手のアクションはチェックしており、積極的にベットする意図は見られません。そのため、現時点ではコールを選択し、次のストリート（リバー）での相手のアクションを見て判断するのが最善でしょう。コール額が0なのは、相手がチェックしたため、追加のベットがないからです。つまり、あなたは無料で次のカードを見ることができます。"\n}\n```'
2025-10-31 18:47:11,578 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:47:11,578 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたはコールが可能です。あなたの手札はAハイ（エースハイ）であり、ボードにはストレートやフラッシュの可能性も示唆されています。しかし、相手のアクションはチェックしており、積極的にベットする意図は見られません。そのため、現時点ではコールを選択し、次のストリート（リバー）での相手のアクションを見て判断するのが最善でしょう。コール額が0なのは、相手がチェックしたため、追加のベットがないからです。つまり、あなたは無料で次のカードを見ることができます。"\n}'
2025-10-31 18:47:11,578 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "現在の状況では、あなたはコールが可能です。あなたの手札はAハイ（エースハイ）であり、ボードにはストレートやフラッシュの可能性も示唆されています。しかし、相手のアクションはチェックしており、積極的にベットする意図は見られません。そのため、現時点ではコールを選択し、次のストリート（リバー）での相手のアクションを見て判断するのが最善でしょう。コール額が0なのは、相手がチェックしたため、追加のベットがないからです。つまり、あなたは無料で次のカードを見ることができます。"
}
2025-10-31 18:47:11,578 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': '現在の状況では、あなたはコールが可能です。あなたの手札はAハイ（エースハイ）であり、ボードにはストレートやフラッシュの可能性も示唆されています。しかし、相手のアクションはチェックしており、積極的にベットする意図は見られません。そのため、現時点ではコールを選択し、次のストリート（リバー）での相手のアクションを見て判断するのが最善でしょう。コール額が0なのは、相手がチェックしたため、追加のベットがないからです。つまり、あなたは無料で次のカードを見ることができます。'}
2025-10-31 18:47:11,579 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 0
2025-10-31 18:47:11,579 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1745)']
2025-10-31 18:47:11,579 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:47:11,579 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 0, 現在の状況では、あなたはコールが可能です。あなたの手札はAハイ（エースハイ）であり、ボードにはストレートやフラッシュの可能性も示唆されています。しかし、相手のアクションはチェックしており、積極的にベットする意図は見られません。そのため、現時点ではコールを選択し、次のストリート（リバー）での相手のアクションを見て判断するのが最善でしょう。コール額が0なのは、相手がチェックしたため、追加のベットがないからです。つまり、あなたは無料で次のカードを見ることができます。
2025-10-31 18:47:11,580 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 0
2025-10-31 18:47:11,580 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:47:11,580 - poker_game - INFO - Hand #4, Phase: turn
2025-10-31 18:47:11,580 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:47:11,580 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:47:11,581 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:11,581 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:11,581 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:11,581 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥']
2025-10-31 18:47:11,581 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:11,582 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:11,582 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:11,582 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:11,582 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:47:11,583 - poker_game - INFO - ==================================================
2025-10-31 18:47:11,583 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 18:47:11,592 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:47:11,592 - poker_game - INFO - Hand #4, Phase: turn
2025-10-31 18:47:11,593 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:47:11,593 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:47:11,593 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:11,593 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:11,593 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:11,593 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥']
2025-10-31 18:47:11,594 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:11,594 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:11,594 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:11,594 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:11,594 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:47:11,595 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 18:47:11,595 - poker_game - INFO - ==================================================
2025-10-31 18:47:11,595 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:47:11,595 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:47:11,595 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:47:11,596 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:47:11,596 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:47:11,596 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:47:11,597 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:47:11,597 - poker_game - DEBUG - Player bets: [0, 0, 0, 0], Current bet: 0, All same: True
2025-10-31 18:47:11,597 - poker_game - DEBUG - Active player indices: [0, 1, 2, 4]
2025-10-31 18:47:11,598 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:47:11,598 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:47:11,598 - poker_game - DEBUG - First actor index: 4
2025-10-31 18:47:11,598 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 4
2025-10-31 18:47:11,598 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:47:11,599 - poker_game - INFO - Hand #4, Phase: turn
2025-10-31 18:47:11,599 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:47:11,599 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:47:11,599 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:11,599 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:11,599 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:11,600 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥']
2025-10-31 18:47:11,600 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:11,600 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:11,600 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:11,601 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:11,601 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:47:11,601 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:47:11,601 - poker_game - INFO - ==================================================
2025-10-31 18:47:11,703 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "turn",
  "your_cards": [
    "3♦",
    "Q♦"
  ],
  "community": [
    "3♣",
    "8♣",
    "9♠",
    "7♥"
  ],
  "your_chips": 1645,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 245,
  "pot": 990,
  "to_call": 0,
  "dealer_button": 2,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1745,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1925,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1675,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1645)"
  ],
  "history": [
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠",
    "Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣",
    "Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80",
    "Player 2 called 80",
    "Player 3 folded",
    "Player 4 called 60",
    "Flop dealt: 3♣, 8♣, 9♠",
    "Player 4 raised to 165",
    "Player 0 called 165",
    "Player 1 called 165",
    "Player 2 called 165",
    "Turn dealt: 7♥",
    "Player 4 checked",
    "Player 0 checked"
  ]
}
2025-10-31 18:47:11,715 - poker_game - DEBUG - Create Session: {'id': '1d3d6dc7-8b39-469d-b4c6-9897360cdf5d', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904031.7126467}
2025-10-31 18:47:13,659 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 165,\n  "reasoning": "あなたの手札は3ペア（3のペア）で、フラッシュのドロー（ダイヤが2枚）もあります。コミュニティカードには8と9があり、ストレートの可能性もわずかにあります。しかし、現時点でのあなたのハンドの強さは中程度です。前のプレイヤーがベットしており、ポットサイズも大きいため、コールして次のカード（リバー）を見て、ハンドの可能性を評価するのが最善です。もしリバーでフラッシュが完成するか、より強いペアができれば、さらにベットを続けることも考えられます。ここでは、相手のベット額（165）をコールします。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 162, 'promptTokenCount': 1009, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1009}], 'totalTokenCount': 1171}, 'invocationId': 'e-990a644a-d97f-444d-941c-82cbc503bb7f', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'gPw6ydVh', 'timestamp': 1761904031.724425}]
2025-10-31 18:47:13,660 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:47:13,660 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 165,
  "reasoning": "あなたの手札は3ペア（3のペア）で、フラッシュのドロー（ダイヤが2枚）もあります。コミュニティカードには8と9があり、ストレートの可能性もわずかにあります。しかし、現時点でのあなたのハンドの強さは中程度です。前のプレイヤーがベットしており、ポットサイズも大きいため、コールして次のカード（リバー）を見て、ハンドの可能性を評価するのが最善です。もしリバーでフラッシュが完成するか、より強いペアができれば、さらにベットを続けることも考えられます。ここでは、相手のベット額（165）をコールします。"
}
```
2025-10-31 18:47:13,660 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:47:13,660 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 165,\n  "reasoning": "あなたの手札は3ペア（3のペア）で、フラッシュのドロー（ダイヤが2枚）もあります。コミュニティカードには8と9があり、ストレートの可能性もわずかにあります。しかし、現時点でのあなたのハンドの強さは中程度です。前のプレイヤーがベットしており、ポットサイズも大きいため、コールして次のカード（リバー）を見て、ハンドの可能性を評価するのが最善です。もしリバーでフラッシュが完成するか、より強いペアができれば、さらにベットを続けることも考えられます。ここでは、相手のベット額（165）をコールします。"\n}\n```'
2025-10-31 18:47:13,660 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:47:13,660 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 165,\n  "reasoning": "あなたの手札は3ペア（3のペア）で、フラッシュのドロー（ダイヤが2枚）もあります。コミュニティカードには8と9があり、ストレートの可能性もわずかにあります。しかし、現時点でのあなたのハンドの強さは中程度です。前のプレイヤーがベットしており、ポットサイズも大きいため、コールして次のカード（リバー）を見て、ハンドの可能性を評価するのが最善です。もしリバーでフラッシュが完成するか、より強いペアができれば、さらにベットを続けることも考えられます。ここでは、相手のベット額（165）をコールします。"\n}'
2025-10-31 18:47:13,661 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 165,
  "reasoning": "あなたの手札は3ペア（3のペア）で、フラッシュのドロー（ダイヤが2枚）もあります。コミュニティカードには8と9があり、ストレートの可能性もわずかにあります。しかし、現時点でのあなたのハンドの強さは中程度です。前のプレイヤーがベットしており、ポットサイズも大きいため、コールして次のカード（リバー）を見て、ハンドの可能性を評価するのが最善です。もしリバーでフラッシュが完成するか、より強いペアができれば、さらにベットを続けることも考えられます。ここでは、相手のベット額（165）をコールします。"
}
2025-10-31 18:47:13,661 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 165, 'reasoning': 'あなたの手札は3ペア（3のペア）で、フラッシュのドロー（ダイヤが2枚）もあります。コミュニティカードには8と9があり、ストレートの可能性もわずかにあります。しかし、現時点でのあなたのハンドの強さは中程度です。前のプレイヤーがベットしており、ポットサイズも大きいため、コールして次のカード（リバー）を見て、ハンドの可能性を評価するのが最善です。もしリバーでフラッシュが完成するか、より強いペアができれば、さらにベットを続けることも考えられます。ここでは、相手のベット額（165）をコールします。'}
2025-10-31 18:47:13,661 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 165
2025-10-31 18:47:13,661 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1645)']
2025-10-31 18:47:13,661 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 165}
2025-10-31 18:47:13,661 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 165, あなたの手札は3ペア（3のペア）で、フラッシュのドロー（ダイヤが2枚）もあります。コミュニティカードには8と9があり、ストレートの可能性もわずかにあります。しかし、現時点でのあなたのハンドの強さは中程度です。前のプレイヤーがベットしており、ポットサイズも大きいため、コールして次のカード（リバー）を見て、ハンドの可能性を評価するのが最善です。もしリバーでフラッシュが完成するか、より強いペアができれば、さらにベットを続けることも考えられます。ここでは、相手のベット額（165）をコールします。
2025-10-31 18:47:13,662 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 165
2025-10-31 18:47:13,662 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:47:13,662 - poker_game - INFO - Hand #4, Phase: turn
2025-10-31 18:47:13,662 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:47:13,663 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:47:13,663 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:13,663 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:13,663 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:13,663 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥']
2025-10-31 18:47:13,663 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:13,664 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:13,664 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:13,664 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:13,664 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:47:13,664 - poker_game - INFO - ==================================================
2025-10-31 18:47:13,664 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:47:13,675 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:47:13,675 - poker_game - INFO - Hand #4, Phase: turn
2025-10-31 18:47:13,675 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:47:13,675 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:47:13,675 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:13,676 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:13,676 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:13,676 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥']
2025-10-31 18:47:13,676 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:13,676 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:13,676 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:13,676 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:13,676 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:47:13,676 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:47:13,676 - poker_game - INFO - ==================================================
2025-10-31 18:47:13,677 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:47:13,677 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:47:13,677 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:47:13,677 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:47:13,677 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:47:13,677 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:47:13,677 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:47:13,677 - poker_game - DEBUG - Player bets: [0, 0, 0, 0], Current bet: 0, All same: True
2025-10-31 18:47:13,677 - poker_game - DEBUG - Active player indices: [0, 1, 2, 4]
2025-10-31 18:47:13,677 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:47:13,677 - poker_game - DEBUG - Current player index: 2
2025-10-31 18:47:13,677 - poker_game - DEBUG - First actor index: 4
2025-10-31 18:47:13,677 - poker_game - DEBUG - Betting continues: Current player 2 != first actor 4
2025-10-31 18:47:13,678 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:47:13,678 - poker_game - INFO - Hand #4, Phase: turn
2025-10-31 18:47:13,681 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:47:13,682 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:47:13,682 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:13,682 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:13,682 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:13,682 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥']
2025-10-31 18:47:13,682 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:13,682 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:13,682 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:13,682 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:13,682 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:47:13,683 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:47:13,683 - poker_game - INFO - ==================================================
2025-10-31 18:47:13,784 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "turn",
  "your_cards": [
    "A♣",
    "9♦"
  ],
  "community": [
    "3♣",
    "8♣",
    "9♠",
    "7♥"
  ],
  "your_chips": 1925,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 245,
  "pot": 990,
  "to_call": 0,
  "dealer_button": 2,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1745,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1645,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1675,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1925)"
  ],
  "history": [
    "Showdown: Player 1 hand=High Card: K♣ - K♣, J♠, 10♣, 8♠, 5♣ cards=J♠, 8♠",
    "Showdown: Player 3 hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣ cards=8♦, A♣",
    "Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80",
    "Player 2 called 80",
    "Player 3 folded",
    "Player 4 called 60",
    "Flop dealt: 3♣, 8♣, 9♠",
    "Player 4 raised to 165",
    "Player 0 called 165",
    "Player 1 called 165",
    "Player 2 called 165",
    "Turn dealt: 7♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked"
  ]
}
2025-10-31 18:47:13,798 - poker_game - DEBUG - Create Session: {'id': '08796616-3325-497c-84ad-2b1c7849b47b', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904033.795496}
2025-10-31 18:47:16,113 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "あなたの手札はA♣9♦で、コミュニティカードは3♣8♣9♠7♥です。これにより、あなたはナインのペア（9♠とあなたの9♦）と、エースハイ（A♣）を持っています。これは「ペア」と呼ばれる役です。コミュニティカードにはクラブのカードが3枚（3♣, 8♣）あり、ストレート（7♥8♣9♠）の可能性も示唆していますが、あなたはそれを持っていません。現在の状況では、あなたより強い役を持っているプレイヤーがいる可能性はありますが、それはまだ確定していません。全員がチェックしている（ベットをしていない）ため、あなたもリスクを冒さずに次のカード（リバー）を見るためにチェックを選択します。これは、相手の出方を見て、より有利な状況で次のアクションを判断するためです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 203, 'promptTokenCount': 1009, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1009}], 'totalTokenCount': 1212}, 'invocationId': 'e-51afcd98-2952-4f0b-a51f-f0104adfe4ad', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'aZ8VWUur', 'timestamp': 1761904033.807603}]
2025-10-31 18:47:16,113 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:47:16,114 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "あなたの手札はA♣9♦で、コミュニティカードは3♣8♣9♠7♥です。これにより、あなたはナインのペア（9♠とあなたの9♦）と、エースハイ（A♣）を持っています。これは「ペア」と呼ばれる役です。コミュニティカードにはクラブのカードが3枚（3♣, 8♣）あり、ストレート（7♥8♣9♠）の可能性も示唆していますが、あなたはそれを持っていません。現在の状況では、あなたより強い役を持っているプレイヤーがいる可能性はありますが、それはまだ確定していません。全員がチェックしている（ベットをしていない）ため、あなたもリスクを冒さずに次のカード（リバー）を見るためにチェックを選択します。これは、相手の出方を見て、より有利な状況で次のアクションを判断するためです。"
}
```
2025-10-31 18:47:16,114 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:47:16,114 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "あなたの手札はA♣9♦で、コミュニティカードは3♣8♣9♠7♥です。これにより、あなたはナインのペア（9♠とあなたの9♦）と、エースハイ（A♣）を持っています。これは「ペア」と呼ばれる役です。コミュニティカードにはクラブのカードが3枚（3♣, 8♣）あり、ストレート（7♥8♣9♠）の可能性も示唆していますが、あなたはそれを持っていません。現在の状況では、あなたより強い役を持っているプレイヤーがいる可能性はありますが、それはまだ確定していません。全員がチェックしている（ベットをしていない）ため、あなたもリスクを冒さずに次のカード（リバー）を見るためにチェックを選択します。これは、相手の出方を見て、より有利な状況で次のアクションを判断するためです。"\n}\n```'
2025-10-31 18:47:16,114 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:47:16,114 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "あなたの手札はA♣9♦で、コミュニティカードは3♣8♣9♠7♥です。これにより、あなたはナインのペア（9♠とあなたの9♦）と、エースハイ（A♣）を持っています。これは「ペア」と呼ばれる役です。コミュニティカードにはクラブのカードが3枚（3♣, 8♣）あり、ストレート（7♥8♣9♠）の可能性も示唆していますが、あなたはそれを持っていません。現在の状況では、あなたより強い役を持っているプレイヤーがいる可能性はありますが、それはまだ確定していません。全員がチェックしている（ベットをしていない）ため、あなたもリスクを冒さずに次のカード（リバー）を見るためにチェックを選択します。これは、相手の出方を見て、より有利な状況で次のアクションを判断するためです。"\n}'
2025-10-31 18:47:16,114 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "あなたの手札はA♣9♦で、コミュニティカードは3♣8♣9♠7♥です。これにより、あなたはナインのペア（9♠とあなたの9♦）と、エースハイ（A♣）を持っています。これは「ペア」と呼ばれる役です。コミュニティカードにはクラブのカードが3枚（3♣, 8♣）あり、ストレート（7♥8♣9♠）の可能性も示唆していますが、あなたはそれを持っていません。現在の状況では、あなたより強い役を持っているプレイヤーがいる可能性はありますが、それはまだ確定していません。全員がチェックしている（ベットをしていない）ため、あなたもリスクを冒さずに次のカード（リバー）を見るためにチェックを選択します。これは、相手の出方を見て、より有利な状況で次のアクションを判断するためです。"
}
2025-10-31 18:47:16,114 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'あなたの手札はA♣9♦で、コミュニティカードは3♣8♣9♠7♥です。これにより、あなたはナインのペア（9♠とあなたの9♦）と、エースハイ（A♣）を持っています。これは「ペア」と呼ばれる役です。コミュニティカードにはクラブのカードが3枚（3♣, 8♣）あり、ストレート（7♥8♣9♠）の可能性も示唆していますが、あなたはそれを持っていません。現在の状況では、あなたより強い役を持っているプレイヤーがいる可能性はありますが、それはまだ確定していません。全員がチェックしている（ベットをしていない）ため、あなたもリスクを冒さずに次のカード（リバー）を見るためにチェックを選択します。これは、相手の出方を見て、より有利な状況で次のアクションを判断するためです。'}
2025-10-31 18:47:16,115 - poker_game - DEBUG - [Agent2] Extracted values - action: 'check', amount: 0
2025-10-31 18:47:16,115 - poker_game - DEBUG - [Agent2] Action 'check' normalized - amount set to 0
2025-10-31 18:47:16,115 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:47:16,115 - poker_game - INFO - [Agent2] Successfully parsed decision: check, 0, あなたの手札はA♣9♦で、コミュニティカードは3♣8♣9♠7♥です。これにより、あなたはナインのペア（9♠とあなたの9♦）と、エースハイ（A♣）を持っています。これは「ペア」と呼ばれる役です。コミュニティカードにはクラブのカードが3枚（3♣, 8♣）あり、ストレート（7♥8♣9♠）の可能性も示唆していますが、あなたはそれを持っていません。現在の状況では、あなたより強い役を持っているプレイヤーがいる可能性はありますが、それはまだ確定していません。全員がチェックしている（ベットをしていない）ため、あなたもリスクを冒さずに次のカード（リバー）を見るためにチェックを選択します。これは、相手の出方を見て、より有利な状況で次のアクションを判断するためです。
2025-10-31 18:47:16,115 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'check' with amount 0
2025-10-31 18:47:16,116 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:47:16,116 - poker_game - INFO - Hand #4, Phase: turn
2025-10-31 18:47:16,116 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:47:16,116 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:47:16,117 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:16,117 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:16,117 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:16,117 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥']
2025-10-31 18:47:16,118 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:16,118 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:16,118 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:16,118 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:16,118 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:47:16,119 - poker_game - INFO - ==================================================
2025-10-31 18:47:16,119 - poker_game - INFO - ACTION_EXECUTED: Player 2 checked
2025-10-31 18:47:16,132 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:47:16,133 - poker_game - INFO - Hand #4, Phase: turn
2025-10-31 18:47:16,133 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:47:16,133 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:47:16,133 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:16,133 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:16,134 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:16,134 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥']
2025-10-31 18:47:16,134 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:16,134 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:16,134 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:16,135 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:16,135 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:47:16,135 - poker_game - INFO - Extra: Action: Player 2 checked
2025-10-31 18:47:16,135 - poker_game - INFO - ==================================================
2025-10-31 18:47:16,135 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:47:16,135 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:47:16,136 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:47:16,136 - poker_game - INFO - Advanced from player 2 to player 4 (seat order)
2025-10-31 18:47:16,136 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:47:16,136 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:47:16,136 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:47:16,136 - poker_game - DEBUG - Player bets: [0, 0, 0, 0], Current bet: 0, All same: True
2025-10-31 18:47:16,136 - poker_game - DEBUG - Active player indices: [0, 1, 2, 4]
2025-10-31 18:47:16,137 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:47:16,137 - poker_game - DEBUG - Current player index: 4
2025-10-31 18:47:16,137 - poker_game - DEBUG - First actor index: 4
2025-10-31 18:47:16,137 - poker_game - INFO - Betting complete: Back to first actor 4 (all players have acted)
2025-10-31 18:47:16,137 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:47:16,137 - poker_game - INFO - Hand #4, Phase: turn
2025-10-31 18:47:16,137 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:47:16,138 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:47:16,138 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:16,138 - poker_game - INFO - Betting round complete: True
2025-10-31 18:47:16,138 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:16,139 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥']
2025-10-31 18:47:16,139 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:16,139 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:16,139 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:16,140 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:16,140 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:47:16,140 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:47:16,140 - poker_game - INFO - ==================================================
2025-10-31 18:47:16,241 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 18:47:16,242 - poker_game - INFO - Betting round complete: True
2025-10-31 18:47:16,242 - poker_game - INFO - Remaining players: 4
2025-10-31 18:47:16,242 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:47:16,243 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:47:16,243 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:47:16,243 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:47:16,243 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 18:47:16,255 - poker_game - INFO - Starting new betting round
2025-10-31 18:47:16,256 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:47:16,256 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:47:16,256 - poker_game - DEBUG - Active players for new betting round: [0, 1, 2, 4]
2025-10-31 18:47:16,256 - poker_game - DEBUG - Dealer button: 2
2025-10-31 18:47:16,257 - poker_game - INFO - First actor: Player 4 (by phase rule), was 4
2025-10-31 18:47:16,257 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:47:16,257 - poker_game - INFO - Hand #4, Phase: river
2025-10-31 18:47:16,258 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:47:16,258 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:47:16,261 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:16,261 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:16,262 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:16,262 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:16,263 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:16,263 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:16,263 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:16,264 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:16,264 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:47:16,264 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 18:47:16,265 - poker_game - INFO - ==================================================
2025-10-31 18:47:16,266 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "river",
  "your_cards": [
    "8♠",
    "5♣"
  ],
  "community": [
    "3♣",
    "8♣",
    "9♠",
    "7♥",
    "6♣"
  ],
  "your_chips": 1675,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 245,
  "pot": 990,
  "to_call": 0,
  "dealer_button": 2,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1745,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1645,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1925,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1675)"
  ],
  "history": [
    "Side pot layer 0: amount=30, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80",
    "Player 2 called 80",
    "Player 3 folded",
    "Player 4 called 60",
    "Flop dealt: 3♣, 8♣, 9♠",
    "Player 4 raised to 165",
    "Player 0 called 165",
    "Player 1 called 165",
    "Player 2 called 165",
    "Turn dealt: 7♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 6♣"
  ]
}
2025-10-31 18:47:16,283 - poker_game - DEBUG - Create Session: {'id': '9a505a4c-52a4-4886-bc1f-af21f0720f55', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904036.2793896}
2025-10-31 18:47:22,639 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_O4pkXcYr2acGBYCC06ZD0UrP', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1253, 'totalTokenCount': 1270}, 'invocationId': 'e-290be832-e070-4de3-820a-7ca5b7a603a7', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'RDKolXIV', 'timestamp': 1761904036.294384}, {'content': {'parts': [{'functionResponse': {'id': 'call_O4pkXcYr2acGBYCC06ZD0UrP', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-290be832-e070-4de3-820a-7ca5b7a603a7', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'FF3IDuVF', 'timestamp': 1761904037.792369}, {'content': {'parts': [{'functionCall': {'id': 'call_9EQgDnUl6OZZdoiZ3Agw25oo', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1777, 'totalTokenCount': 1797}, 'invocationId': 'e-290be832-e070-4de3-820a-7ca5b7a603a7', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'nZJWh4nf', 'timestamp': 1761904037.794857}, {'content': {'parts': [{'functionResponse': {'id': 'call_9EQgDnUl6OZZdoiZ3Agw25oo', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-290be832-e070-4de3-820a-7ca5b7a603a7', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'ar8datbt', 'timestamp': 1761904038.804909}, {'content': {'parts': [{'text': '{\n  "action": "raise",\n  "amount": 20,\n  "reasoning": "私は8のペアを持っており、リバーでストレートも完成しました。相手が弱いハンドでチェックした場合、ミニレイズで利益を生成する可能性を考慮して行動を起こします。"\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 80, 'promptTokenCount': 1339, 'totalTokenCount': 1419}, 'invocationId': 'e-290be832-e070-4de3-820a-7ca5b7a603a7', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'eXXhwfo3', 'timestamp': 1761904038.806294}]
2025-10-31 18:47:22,639 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:47:22,640 - poker_game - DEBUG - {
  "action": "raise",
  "amount": 20,
  "reasoning": "私は8のペアを持っており、リバーでストレートも完成しました。相手が弱いハンドでチェックした場合、ミニレイズで利益を生成する可能性を考慮して行動を起こします。"
}
2025-10-31 18:47:22,640 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:47:22,640 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "raise",\n  "amount": 20,\n  "reasoning": "私は8のペアを持っており、リバーでストレートも完成しました。相手が弱いハンドでチェックした場合、ミニレイズで利益を生成する可能性を考慮して行動を起こします。"\n}'
2025-10-31 18:47:22,640 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:47:22,640 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "raise",
  "amount": 20,
  "reasoning": "私は8のペアを持っており、リバーでストレートも完成しました。相手が弱いハンドでチェックした場合、ミニレイズで利益を生成する可能性を考慮して行動を起こします。"
}
2025-10-31 18:47:22,640 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'raise', 'amount': 20, 'reasoning': '私は8のペアを持っており、リバーでストレートも完成しました。相手が弱いハンドでチェックした場合、ミニレイズで利益を生成する可能性を考慮して行動を起こします。'}
2025-10-31 18:47:22,641 - poker_game - DEBUG - [Agent4] Extracted values - action: 'raise', amount: 20
2025-10-31 18:47:22,641 - poker_game - DEBUG - [Agent4] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1675)']
2025-10-31 18:47:22,641 - poker_game - DEBUG - [Agent4] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:47:22,641 - poker_game - DEBUG - [Agent4] Raise amount 20 is valid (min: 20)
2025-10-31 18:47:22,641 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'raise', 'amount': 20}
2025-10-31 18:47:22,641 - poker_game - INFO - [Agent4] Successfully parsed decision: raise, 20, 私は8のペアを持っており、リバーでストレートも完成しました。相手が弱いハンドでチェックした場合、ミニレイズで利益を生成する可能性を考慮して行動を起こします。
2025-10-31 18:47:22,642 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'raise' with amount 20
2025-10-31 18:47:22,642 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:47:22,642 - poker_game - INFO - Hand #4, Phase: river
2025-10-31 18:47:22,643 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:47:22,643 - poker_game - INFO - Pot: 990, Current bet: 0
2025-10-31 18:47:22,643 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:22,643 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:22,644 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:22,644 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:22,644 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:22,644 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:22,645 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:22,645 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:22,645 - poker_game - INFO -   P4(Agent4): chips=1675, bet=0, status=active
2025-10-31 18:47:22,645 - poker_game - INFO - ==================================================
2025-10-31 18:47:22,645 - poker_game - INFO - ACTION_EXECUTED: Player 4 raised to 20
2025-10-31 18:47:22,654 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:47:22,655 - poker_game - INFO - Hand #4, Phase: river
2025-10-31 18:47:22,655 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:47:22,655 - poker_game - INFO - Pot: 1010, Current bet: 20
2025-10-31 18:47:22,655 - poker_game - INFO - Last raiser: 4
2025-10-31 18:47:22,656 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:22,656 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:22,656 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:22,656 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:22,656 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:22,657 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:22,657 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:22,657 - poker_game - INFO -   P4(Agent4): chips=1655, bet=20, status=active
2025-10-31 18:47:22,657 - poker_game - INFO - Extra: Action: Player 4 raised to 20
2025-10-31 18:47:22,657 - poker_game - INFO - ==================================================
2025-10-31 18:47:22,658 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:47:22,658 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:47:22,658 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:47:22,658 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:47:22,659 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:47:22,659 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:47:22,659 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:47:22,659 - poker_game - DEBUG - Player bets: [0, 0, 0, 20], Current bet: 20, All same: False
2025-10-31 18:47:22,660 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:47:22,660 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:47:22,660 - poker_game - INFO - Hand #4, Phase: river
2025-10-31 18:47:22,660 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:47:22,660 - poker_game - INFO - Pot: 1010, Current bet: 20
2025-10-31 18:47:22,661 - poker_game - INFO - Last raiser: 4
2025-10-31 18:47:22,661 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:22,661 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:22,662 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:22,662 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:22,662 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:22,663 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:22,663 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:22,663 - poker_game - INFO -   P4(Agent4): chips=1655, bet=20, status=active
2025-10-31 18:47:22,663 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:47:22,664 - poker_game - INFO - ==================================================
2025-10-31 18:47:22,769 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "river",
  "your_cards": [
    "10♦",
    "A♥"
  ],
  "community": [
    "3♣",
    "8♣",
    "9♠",
    "7♥",
    "6♣"
  ],
  "your_chips": 1745,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 245,
  "pot": 1010,
  "to_call": 20,
  "dealer_button": 2,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1645,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1925,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1655,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1745)"
  ],
  "history": [
    "Side pot layer 1: amount=20, winners=3 best_hand=High Card: A♣ - A♣, K♣, 10♣, 8♦, 5♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80",
    "Player 2 called 80",
    "Player 3 folded",
    "Player 4 called 60",
    "Flop dealt: 3♣, 8♣, 9♠",
    "Player 4 raised to 165",
    "Player 0 called 165",
    "Player 1 called 165",
    "Player 2 called 165",
    "Turn dealt: 7♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 6♣",
    "Player 4 raised to 20"
  ]
}
2025-10-31 18:47:22,779 - poker_game - DEBUG - Create Session: {'id': 'e429f982-cbde-4011-af43-b6fba106cdd0', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904042.7770624}
2025-10-31 18:47:25,076 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "リバー（最後のカード）で、あなたの手札はAハイ（エースが一番強いカード）であり、コミュニティカードにはストレート（連続した数字のカード）やフラッシュ（同じマークのカード）の可能性はありません。しかし、対戦相手のプレイヤー4が20のベットをしてきました。このベットは非常に小さく、ブラフ（弱い手札で相手を降ろさせるためのベット）の可能性が高いです。あなたのAハイは、相手が何も持っていない場合、勝てる可能性があります。ポット（賭け金の合計）は1010で、コールに必要なのは20なので、リスクに見合うリターンが期待できます。そのため、コールを選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 176, 'promptTokenCount': 919, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 919}], 'totalTokenCount': 1095}, 'invocationId': 'e-445720de-d416-425d-aaea-23596a907b02', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'XyUQYMiG', 'timestamp': 1761904042.790529}]
2025-10-31 18:47:25,076 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:47:25,076 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "リバー（最後のカード）で、あなたの手札はAハイ（エースが一番強いカード）であり、コミュニティカードにはストレート（連続した数字のカード）やフラッシュ（同じマークのカード）の可能性はありません。しかし、対戦相手のプレイヤー4が20のベットをしてきました。このベットは非常に小さく、ブラフ（弱い手札で相手を降ろさせるためのベット）の可能性が高いです。あなたのAハイは、相手が何も持っていない場合、勝てる可能性があります。ポット（賭け金の合計）は1010で、コールに必要なのは20なので、リスクに見合うリターンが期待できます。そのため、コールを選択します。"
}
```
2025-10-31 18:47:25,076 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:47:25,076 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "リバー（最後のカード）で、あなたの手札はAハイ（エースが一番強いカード）であり、コミュニティカードにはストレート（連続した数字のカード）やフラッシュ（同じマークのカード）の可能性はありません。しかし、対戦相手のプレイヤー4が20のベットをしてきました。このベットは非常に小さく、ブラフ（弱い手札で相手を降ろさせるためのベット）の可能性が高いです。あなたのAハイは、相手が何も持っていない場合、勝てる可能性があります。ポット（賭け金の合計）は1010で、コールに必要なのは20なので、リスクに見合うリターンが期待できます。そのため、コールを選択します。"\n}\n```'
2025-10-31 18:47:25,077 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:47:25,077 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "リバー（最後のカード）で、あなたの手札はAハイ（エースが一番強いカード）であり、コミュニティカードにはストレート（連続した数字のカード）やフラッシュ（同じマークのカード）の可能性はありません。しかし、対戦相手のプレイヤー4が20のベットをしてきました。このベットは非常に小さく、ブラフ（弱い手札で相手を降ろさせるためのベット）の可能性が高いです。あなたのAハイは、相手が何も持っていない場合、勝てる可能性があります。ポット（賭け金の合計）は1010で、コールに必要なのは20なので、リスクに見合うリターンが期待できます。そのため、コールを選択します。"\n}'
2025-10-31 18:47:25,077 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "リバー（最後のカード）で、あなたの手札はAハイ（エースが一番強いカード）であり、コミュニティカードにはストレート（連続した数字のカード）やフラッシュ（同じマークのカード）の可能性はありません。しかし、対戦相手のプレイヤー4が20のベットをしてきました。このベットは非常に小さく、ブラフ（弱い手札で相手を降ろさせるためのベット）の可能性が高いです。あなたのAハイは、相手が何も持っていない場合、勝てる可能性があります。ポット（賭け金の合計）は1010で、コールに必要なのは20なので、リスクに見合うリターンが期待できます。そのため、コールを選択します。"
}
2025-10-31 18:47:25,077 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'リバー（最後のカード）で、あなたの手札はAハイ（エースが一番強いカード）であり、コミュニティカードにはストレート（連続した数字のカード）やフラッシュ（同じマークのカード）の可能性はありません。しかし、対戦相手のプレイヤー4が20のベットをしてきました。このベットは非常に小さく、ブラフ（弱い手札で相手を降ろさせるためのベット）の可能性が高いです。あなたのAハイは、相手が何も持っていない場合、勝てる可能性があります。ポット（賭け金の合計）は1010で、コールに必要なのは20なので、リスクに見合うリターンが期待できます。そのため、コールを選択します。'}
2025-10-31 18:47:25,077 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 20
2025-10-31 18:47:25,077 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1745)']
2025-10-31 18:47:25,077 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (20)': 20
2025-10-31 18:47:25,078 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:47:25,078 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 20, リバー（最後のカード）で、あなたの手札はAハイ（エースが一番強いカード）であり、コミュニティカードにはストレート（連続した数字のカード）やフラッシュ（同じマークのカード）の可能性はありません。しかし、対戦相手のプレイヤー4が20のベットをしてきました。このベットは非常に小さく、ブラフ（弱い手札で相手を降ろさせるためのベット）の可能性が高いです。あなたのAハイは、相手が何も持っていない場合、勝てる可能性があります。ポット（賭け金の合計）は1010で、コールに必要なのは20なので、リスクに見合うリターンが期待できます。そのため、コールを選択します。
2025-10-31 18:47:25,078 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 20
2025-10-31 18:47:25,079 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:47:25,079 - poker_game - INFO - Hand #4, Phase: river
2025-10-31 18:47:25,079 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:47:25,079 - poker_game - INFO - Pot: 1010, Current bet: 20
2025-10-31 18:47:25,079 - poker_game - INFO - Last raiser: 4
2025-10-31 18:47:25,079 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:25,080 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:25,080 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:25,080 - poker_game - INFO -   P0(Agent0): chips=1745, bet=0, status=active
2025-10-31 18:47:25,080 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:25,081 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:25,081 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:25,081 - poker_game - INFO -   P4(Agent4): chips=1655, bet=20, status=active
2025-10-31 18:47:25,081 - poker_game - INFO - ==================================================
2025-10-31 18:47:25,081 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 20
2025-10-31 18:47:25,094 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:47:25,094 - poker_game - INFO - Hand #4, Phase: river
2025-10-31 18:47:25,095 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:47:25,095 - poker_game - INFO - Pot: 1030, Current bet: 20
2025-10-31 18:47:25,095 - poker_game - INFO - Last raiser: 4
2025-10-31 18:47:25,095 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:25,096 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:25,096 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:25,096 - poker_game - INFO -   P0(Agent0): chips=1725, bet=20, status=active
2025-10-31 18:47:25,096 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:25,096 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:25,097 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:25,097 - poker_game - INFO -   P4(Agent4): chips=1655, bet=20, status=active
2025-10-31 18:47:25,097 - poker_game - INFO - Extra: Action: Player 0 called 20
2025-10-31 18:47:25,097 - poker_game - INFO - ==================================================
2025-10-31 18:47:25,097 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:47:25,097 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:47:25,098 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:47:25,098 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:47:25,098 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:47:25,098 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:47:25,098 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:47:25,098 - poker_game - DEBUG - Player bets: [20, 0, 0, 20], Current bet: 20, All same: False
2025-10-31 18:47:25,098 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:47:25,098 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:47:25,098 - poker_game - INFO - Hand #4, Phase: river
2025-10-31 18:47:25,099 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:47:25,099 - poker_game - INFO - Pot: 1030, Current bet: 20
2025-10-31 18:47:25,099 - poker_game - INFO - Last raiser: 4
2025-10-31 18:47:25,099 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:25,099 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:25,099 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:25,100 - poker_game - INFO -   P0(Agent0): chips=1725, bet=20, status=active
2025-10-31 18:47:25,100 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:25,100 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:25,100 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:25,100 - poker_game - INFO -   P4(Agent4): chips=1655, bet=20, status=active
2025-10-31 18:47:25,100 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:47:25,100 - poker_game - INFO - ==================================================
2025-10-31 18:47:25,202 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "river",
  "your_cards": [
    "3♦",
    "Q♦"
  ],
  "community": [
    "3♣",
    "8♣",
    "9♠",
    "7♥",
    "6♣"
  ],
  "your_chips": 1645,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 245,
  "pot": 1030,
  "to_call": 20,
  "dealer_button": 2,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1725,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1925,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1655,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1645)"
  ],
  "history": [
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80",
    "Player 2 called 80",
    "Player 3 folded",
    "Player 4 called 60",
    "Flop dealt: 3♣, 8♣, 9♠",
    "Player 4 raised to 165",
    "Player 0 called 165",
    "Player 1 called 165",
    "Player 2 called 165",
    "Turn dealt: 7♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 6♣",
    "Player 4 raised to 20",
    "Player 0 called 20"
  ]
}
2025-10-31 18:47:25,213 - poker_game - DEBUG - Create Session: {'id': '0b3797df-f79b-4030-b56c-c05d59b94057', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904045.2110553}
2025-10-31 18:47:27,474 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「3♦」と「Q♦」です。コミュニティカードは「3♣」「8♣」「9♠」「7♥」「6♣」です。これにより、あなたは「3」のペア（スリーカード）を作ることができます。ポットは1030で、コールに必要な金額は20です。他のプレイヤーのベット額を見ると、プレイヤー0とプレイヤー4が20をベットしていますが、これはおそらく前のラウンドでのベット額を引き継いでいるだけで、新たにベットしたわけではないと考えられます。しかし、安全策としてコールするのが最善です。もしあなたがより強い役（例：フラッシュやストレート）を持っている、または相手がブラフをしていると確信できる場合はレイズも検討できますが、現時点ではコールで様子を見るのが妥当です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 206, 'promptTokenCount': 884, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 884}], 'totalTokenCount': 1090}, 'invocationId': 'e-678ead2e-dd11-4372-9285-67588597eb2b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '1bcuUZOv', 'timestamp': 1761904045.223468}]
2025-10-31 18:47:27,474 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:47:27,474 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「3♦」と「Q♦」です。コミュニティカードは「3♣」「8♣」「9♠」「7♥」「6♣」です。これにより、あなたは「3」のペア（スリーカード）を作ることができます。ポットは1030で、コールに必要な金額は20です。他のプレイヤーのベット額を見ると、プレイヤー0とプレイヤー4が20をベットしていますが、これはおそらく前のラウンドでのベット額を引き継いでいるだけで、新たにベットしたわけではないと考えられます。しかし、安全策としてコールするのが最善です。もしあなたがより強い役（例：フラッシュやストレート）を持っている、または相手がブラフをしていると確信できる場合はレイズも検討できますが、現時点ではコールで様子を見るのが妥当です。"
}
```
2025-10-31 18:47:27,475 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:47:27,475 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「3♦」と「Q♦」です。コミュニティカードは「3♣」「8♣」「9♠」「7♥」「6♣」です。これにより、あなたは「3」のペア（スリーカード）を作ることができます。ポットは1030で、コールに必要な金額は20です。他のプレイヤーのベット額を見ると、プレイヤー0とプレイヤー4が20をベットしていますが、これはおそらく前のラウンドでのベット額を引き継いでいるだけで、新たにベットしたわけではないと考えられます。しかし、安全策としてコールするのが最善です。もしあなたがより強い役（例：フラッシュやストレート）を持っている、または相手がブラフをしていると確信できる場合はレイズも検討できますが、現時点ではコールで様子を見るのが妥当です。"\n}\n```'
2025-10-31 18:47:27,475 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:47:27,475 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「3♦」と「Q♦」です。コミュニティカードは「3♣」「8♣」「9♠」「7♥」「6♣」です。これにより、あなたは「3」のペア（スリーカード）を作ることができます。ポットは1030で、コールに必要な金額は20です。他のプレイヤーのベット額を見ると、プレイヤー0とプレイヤー4が20をベットしていますが、これはおそらく前のラウンドでのベット額を引き継いでいるだけで、新たにベットしたわけではないと考えられます。しかし、安全策としてコールするのが最善です。もしあなたがより強い役（例：フラッシュやストレート）を持っている、または相手がブラフをしていると確信できる場合はレイズも検討できますが、現時点ではコールで様子を見るのが妥当です。"\n}'
2025-10-31 18:47:27,475 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「3♦」と「Q♦」です。コミュニティカードは「3♣」「8♣」「9♠」「7♥」「6♣」です。これにより、あなたは「3」のペア（スリーカード）を作ることができます。ポットは1030で、コールに必要な金額は20です。他のプレイヤーのベット額を見ると、プレイヤー0とプレイヤー4が20をベットしていますが、これはおそらく前のラウンドでのベット額を引き継いでいるだけで、新たにベットしたわけではないと考えられます。しかし、安全策としてコールするのが最善です。もしあなたがより強い役（例：フラッシュやストレート）を持っている、または相手がブラフをしていると確信できる場合はレイズも検討できますが、現時点ではコールで様子を見るのが妥当です。"
}
2025-10-31 18:47:27,475 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'リバー（最終ラウンド）で、あなたの手札は「3♦」と「Q♦」です。コミュニティカードは「3♣」「8♣」「9♠」「7♥」「6♣」です。これにより、あなたは「3」のペア（スリーカード）を作ることができます。ポットは1030で、コールに必要な金額は20です。他のプレイヤーのベット額を見ると、プレイヤー0とプレイヤー4が20をベットしていますが、これはおそらく前のラウンドでのベット額を引き継いでいるだけで、新たにベットしたわけではないと考えられます。しかし、安全策としてコールするのが最善です。もしあなたがより強い役（例：フラッシュやストレート）を持っている、または相手がブラフをしていると確信できる場合はレイズも検討できますが、現時点ではコールで様子を見るのが妥当です。'}
2025-10-31 18:47:27,475 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 20
2025-10-31 18:47:27,475 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1645)']
2025-10-31 18:47:27,476 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (20)': 20
2025-10-31 18:47:27,476 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:47:27,476 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 20, リバー（最終ラウンド）で、あなたの手札は「3♦」と「Q♦」です。コミュニティカードは「3♣」「8♣」「9♠」「7♥」「6♣」です。これにより、あなたは「3」のペア（スリーカード）を作ることができます。ポットは1030で、コールに必要な金額は20です。他のプレイヤーのベット額を見ると、プレイヤー0とプレイヤー4が20をベットしていますが、これはおそらく前のラウンドでのベット額を引き継いでいるだけで、新たにベットしたわけではないと考えられます。しかし、安全策としてコールするのが最善です。もしあなたがより強い役（例：フラッシュやストレート）を持っている、または相手がブラフをしていると確信できる場合はレイズも検討できますが、現時点ではコールで様子を見るのが妥当です。
2025-10-31 18:47:27,477 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 20
2025-10-31 18:47:27,477 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:47:27,477 - poker_game - INFO - Hand #4, Phase: river
2025-10-31 18:47:27,477 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:47:27,478 - poker_game - INFO - Pot: 1030, Current bet: 20
2025-10-31 18:47:27,478 - poker_game - INFO - Last raiser: 4
2025-10-31 18:47:27,478 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:27,478 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:27,478 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:27,479 - poker_game - INFO -   P0(Agent0): chips=1725, bet=20, status=active
2025-10-31 18:47:27,479 - poker_game - INFO -   P1(Agent1): chips=1645, bet=0, status=active
2025-10-31 18:47:27,479 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:27,479 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:27,480 - poker_game - INFO -   P4(Agent4): chips=1655, bet=20, status=active
2025-10-31 18:47:27,480 - poker_game - INFO - ==================================================
2025-10-31 18:47:27,480 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 20
2025-10-31 18:47:27,494 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:47:27,494 - poker_game - INFO - Hand #4, Phase: river
2025-10-31 18:47:27,494 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:47:27,495 - poker_game - INFO - Pot: 1050, Current bet: 20
2025-10-31 18:47:27,495 - poker_game - INFO - Last raiser: 4
2025-10-31 18:47:27,495 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:27,495 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:27,495 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:27,495 - poker_game - INFO -   P0(Agent0): chips=1725, bet=20, status=active
2025-10-31 18:47:27,496 - poker_game - INFO -   P1(Agent1): chips=1625, bet=20, status=active
2025-10-31 18:47:27,496 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:27,496 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:27,496 - poker_game - INFO -   P4(Agent4): chips=1655, bet=20, status=active
2025-10-31 18:47:27,496 - poker_game - INFO - Extra: Action: Player 1 called 20
2025-10-31 18:47:27,496 - poker_game - INFO - ==================================================
2025-10-31 18:47:27,497 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:47:27,497 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:47:27,497 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:47:27,497 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:47:27,497 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:47:27,497 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:47:27,497 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:47:27,498 - poker_game - DEBUG - Player bets: [20, 20, 0, 20], Current bet: 20, All same: False
2025-10-31 18:47:27,498 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:47:27,498 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:47:27,498 - poker_game - INFO - Hand #4, Phase: river
2025-10-31 18:47:27,498 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:47:27,499 - poker_game - INFO - Pot: 1050, Current bet: 20
2025-10-31 18:47:27,499 - poker_game - INFO - Last raiser: 4
2025-10-31 18:47:27,499 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:27,499 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:27,499 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:27,500 - poker_game - INFO -   P0(Agent0): chips=1725, bet=20, status=active
2025-10-31 18:47:27,500 - poker_game - INFO -   P1(Agent1): chips=1625, bet=20, status=active
2025-10-31 18:47:27,500 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:27,501 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:27,502 - poker_game - INFO -   P4(Agent4): chips=1655, bet=20, status=active
2025-10-31 18:47:27,503 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:47:27,503 - poker_game - INFO - ==================================================
2025-10-31 18:47:27,606 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "river",
  "your_cards": [
    "A♣",
    "9♦"
  ],
  "community": [
    "3♣",
    "8♣",
    "9♠",
    "7♥",
    "6♣"
  ],
  "your_chips": 1925,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 245,
  "pot": 1050,
  "to_call": 20,
  "dealer_button": 2,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1725,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1625,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1655,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1925)"
  ],
  "history": [
    "Player 4 posted big blind 20",
    "Player 0 raised to 80",
    "Player 1 called 80",
    "Player 2 called 80",
    "Player 3 folded",
    "Player 4 called 60",
    "Flop dealt: 3♣, 8♣, 9♠",
    "Player 4 raised to 165",
    "Player 0 called 165",
    "Player 1 called 165",
    "Player 2 called 165",
    "Turn dealt: 7♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 6♣",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Player 1 called 20"
  ]
}
2025-10-31 18:47:27,625 - poker_game - DEBUG - Create Session: {'id': '44d1afdc-a3c5-474c-ab04-d506d31a4a9a', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904047.6187527}
2025-10-31 18:47:29,977 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "リバー（最後のカードが配られた後）の状況で、あなたの手札はAハイ（エースが一番強いカード）ですが、コミュニティカードには3♣, 8♣, 9♠, 7♥, 6♣があり、フロップでフラッシュ（同じマークのカードが5枚揃うこと）の可能性がありました。あなたの手札のA♣は、このフラッシュを完成させるカードではありません。しかし、コミュニティカードの9♠とあなたの手札のA♣を組み合わせても、ペア（同じ数字のカードが2枚揃うこと）もできていません。リバーのベットは20ですが、ポットサイズ（現在溜まっているチップの総額）は1050と大きく、コールに必要な20はあなたのチップ量（1925）に対して非常に少ないため、失うリスクは低いです。相手のベットが小さいことから、相手も強い役を持っていない可能性も考えられます。したがって、より強い役を持っているか確認するためにコールするのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 248, 'promptTokenCount': 883, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 883}], 'totalTokenCount': 1131}, 'invocationId': 'e-a31115b6-0126-4a9e-b9ac-be6ab5af5982', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'tRRf8u6d', 'timestamp': 1761904047.636903}]
2025-10-31 18:47:29,978 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:47:29,978 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "リバー（最後のカードが配られた後）の状況で、あなたの手札はAハイ（エースが一番強いカード）ですが、コミュニティカードには3♣, 8♣, 9♠, 7♥, 6♣があり、フロップでフラッシュ（同じマークのカードが5枚揃うこと）の可能性がありました。あなたの手札のA♣は、このフラッシュを完成させるカードではありません。しかし、コミュニティカードの9♠とあなたの手札のA♣を組み合わせても、ペア（同じ数字のカードが2枚揃うこと）もできていません。リバーのベットは20ですが、ポットサイズ（現在溜まっているチップの総額）は1050と大きく、コールに必要な20はあなたのチップ量（1925）に対して非常に少ないため、失うリスクは低いです。相手のベットが小さいことから、相手も強い役を持っていない可能性も考えられます。したがって、より強い役を持っているか確認するためにコールするのが最善の選択です。"
}
```
2025-10-31 18:47:29,978 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:47:29,978 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "リバー（最後のカードが配られた後）の状況で、あなたの手札はAハイ（エースが一番強いカード）ですが、コミュニティカードには3♣, 8♣, 9♠, 7♥, 6♣があり、フロップでフラッシュ（同じマークのカードが5枚揃うこと）の可能性がありました。あなたの手札のA♣は、このフラッシュを完成させるカードではありません。しかし、コミュニティカードの9♠とあなたの手札のA♣を組み合わせても、ペア（同じ数字のカードが2枚揃うこと）もできていません。リバーのベットは20ですが、ポットサイズ（現在溜まっているチップの総額）は1050と大きく、コールに必要な20はあなたのチップ量（1925）に対して非常に少ないため、失うリスクは低いです。相手のベットが小さいことから、相手も強い役を持っていない可能性も考えられます。したがって、より強い役を持っているか確認するためにコールするのが最善の選択です。"\n}\n```'
2025-10-31 18:47:29,978 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:47:29,979 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "リバー（最後のカードが配られた後）の状況で、あなたの手札はAハイ（エースが一番強いカード）ですが、コミュニティカードには3♣, 8♣, 9♠, 7♥, 6♣があり、フロップでフラッシュ（同じマークのカードが5枚揃うこと）の可能性がありました。あなたの手札のA♣は、このフラッシュを完成させるカードではありません。しかし、コミュニティカードの9♠とあなたの手札のA♣を組み合わせても、ペア（同じ数字のカードが2枚揃うこと）もできていません。リバーのベットは20ですが、ポットサイズ（現在溜まっているチップの総額）は1050と大きく、コールに必要な20はあなたのチップ量（1925）に対して非常に少ないため、失うリスクは低いです。相手のベットが小さいことから、相手も強い役を持っていない可能性も考えられます。したがって、より強い役を持っているか確認するためにコールするのが最善の選択です。"\n}'
2025-10-31 18:47:29,979 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "リバー（最後のカードが配られた後）の状況で、あなたの手札はAハイ（エースが一番強いカード）ですが、コミュニティカードには3♣, 8♣, 9♠, 7♥, 6♣があり、フロップでフラッシュ（同じマークのカードが5枚揃うこと）の可能性がありました。あなたの手札のA♣は、このフラッシュを完成させるカードではありません。しかし、コミュニティカードの9♠とあなたの手札のA♣を組み合わせても、ペア（同じ数字のカードが2枚揃うこと）もできていません。リバーのベットは20ですが、ポットサイズ（現在溜まっているチップの総額）は1050と大きく、コールに必要な20はあなたのチップ量（1925）に対して非常に少ないため、失うリスクは低いです。相手のベットが小さいことから、相手も強い役を持っていない可能性も考えられます。したがって、より強い役を持っているか確認するためにコールするのが最善の選択です。"
}
2025-10-31 18:47:29,979 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'リバー（最後のカードが配られた後）の状況で、あなたの手札はAハイ（エースが一番強いカード）ですが、コミュニティカードには3♣, 8♣, 9♠, 7♥, 6♣があり、フロップでフラッシュ（同じマークのカードが5枚揃うこと）の可能性がありました。あなたの手札のA♣は、このフラッシュを完成させるカードではありません。しかし、コミュニティカードの9♠とあなたの手札のA♣を組み合わせても、ペア（同じ数字のカードが2枚揃うこと）もできていません。リバーのベットは20ですが、ポットサイズ（現在溜まっているチップの総額）は1050と大きく、コールに必要な20はあなたのチップ量（1925）に対して非常に少ないため、失うリスクは低いです。相手のベットが小さいことから、相手も強い役を持っていない可能性も考えられます。したがって、より強い役を持っているか確認するためにコールするのが最善の選択です。'}
2025-10-31 18:47:29,979 - poker_game - DEBUG - [Agent2] Extracted values - action: 'call', amount: 20
2025-10-31 18:47:29,979 - poker_game - DEBUG - [Agent2] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1925)']
2025-10-31 18:47:29,979 - poker_game - DEBUG - [Agent2] Call amount extracted from 'call (20)': 20
2025-10-31 18:47:29,979 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:47:29,980 - poker_game - INFO - [Agent2] Successfully parsed decision: call, 20, リバー（最後のカードが配られた後）の状況で、あなたの手札はAハイ（エースが一番強いカード）ですが、コミュニティカードには3♣, 8♣, 9♠, 7♥, 6♣があり、フロップでフラッシュ（同じマークのカードが5枚揃うこと）の可能性がありました。あなたの手札のA♣は、このフラッシュを完成させるカードではありません。しかし、コミュニティカードの9♠とあなたの手札のA♣を組み合わせても、ペア（同じ数字のカードが2枚揃うこと）もできていません。リバーのベットは20ですが、ポットサイズ（現在溜まっているチップの総額）は1050と大きく、コールに必要な20はあなたのチップ量（1925）に対して非常に少ないため、失うリスクは低いです。相手のベットが小さいことから、相手も強い役を持っていない可能性も考えられます。したがって、より強い役を持っているか確認するためにコールするのが最善の選択です。
2025-10-31 18:47:29,980 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'call' with amount 20
2025-10-31 18:47:29,981 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:47:29,981 - poker_game - INFO - Hand #4, Phase: river
2025-10-31 18:47:29,981 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:47:29,981 - poker_game - INFO - Pot: 1050, Current bet: 20
2025-10-31 18:47:29,981 - poker_game - INFO - Last raiser: 4
2025-10-31 18:47:29,981 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:29,982 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:29,982 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:29,982 - poker_game - INFO -   P0(Agent0): chips=1725, bet=20, status=active
2025-10-31 18:47:29,982 - poker_game - INFO -   P1(Agent1): chips=1625, bet=20, status=active
2025-10-31 18:47:29,982 - poker_game - INFO -   P2(Agent2): chips=1925, bet=0, status=active
2025-10-31 18:47:29,983 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:29,983 - poker_game - INFO -   P4(Agent4): chips=1655, bet=20, status=active
2025-10-31 18:47:29,983 - poker_game - INFO - ==================================================
2025-10-31 18:47:29,983 - poker_game - INFO - ACTION_EXECUTED: Player 2 called 20
2025-10-31 18:47:29,995 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:47:29,995 - poker_game - INFO - Hand #4, Phase: river
2025-10-31 18:47:29,995 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:47:29,996 - poker_game - INFO - Pot: 1070, Current bet: 20
2025-10-31 18:47:29,996 - poker_game - INFO - Last raiser: 4
2025-10-31 18:47:29,996 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:29,996 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:29,997 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:29,997 - poker_game - INFO -   P0(Agent0): chips=1725, bet=20, status=active
2025-10-31 18:47:29,999 - poker_game - INFO -   P1(Agent1): chips=1625, bet=20, status=active
2025-10-31 18:47:29,999 - poker_game - INFO -   P2(Agent2): chips=1905, bet=20, status=active
2025-10-31 18:47:29,999 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:29,999 - poker_game - INFO -   P4(Agent4): chips=1655, bet=20, status=active
2025-10-31 18:47:29,999 - poker_game - INFO - Extra: Action: Player 2 called 20
2025-10-31 18:47:30,000 - poker_game - INFO - ==================================================
2025-10-31 18:47:30,000 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:47:30,000 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:47:30,000 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:47:30,000 - poker_game - INFO - Advanced from player 2 to player 4 (seat order)
2025-10-31 18:47:30,000 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:47:30,000 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:47:30,001 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:47:30,001 - poker_game - DEBUG - Player bets: [20, 20, 20, 20], Current bet: 20, All same: True
2025-10-31 18:47:30,001 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:47:30,001 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:47:30,001 - poker_game - INFO - Hand #4, Phase: river
2025-10-31 18:47:30,001 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:47:30,001 - poker_game - INFO - Pot: 1070, Current bet: 20
2025-10-31 18:47:30,002 - poker_game - INFO - Last raiser: 4
2025-10-31 18:47:30,002 - poker_game - INFO - Betting round complete: True
2025-10-31 18:47:30,002 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:30,002 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:30,002 - poker_game - INFO -   P0(Agent0): chips=1725, bet=20, status=active
2025-10-31 18:47:30,003 - poker_game - INFO -   P1(Agent1): chips=1625, bet=20, status=active
2025-10-31 18:47:30,003 - poker_game - INFO -   P2(Agent2): chips=1905, bet=20, status=active
2025-10-31 18:47:30,003 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:30,003 - poker_game - INFO -   P4(Agent4): chips=1655, bet=20, status=active
2025-10-31 18:47:30,003 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:47:30,003 - poker_game - INFO - ==================================================
2025-10-31 18:47:30,106 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 18:47:30,107 - poker_game - INFO - Betting round complete: True
2025-10-31 18:47:30,107 - poker_game - INFO - Remaining players: 4
2025-10-31 18:47:30,107 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:47:30,108 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:47:30,108 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:47:30,108 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:47:30,108 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 18:47:30,109 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:47:30,109 - poker_game - INFO - Hand #4, Phase: showdown
2025-10-31 18:47:30,109 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:47:30,110 - poker_game - INFO - Pot: 1070, Current bet: 20
2025-10-31 18:47:30,110 - poker_game - INFO - Last raiser: 4
2025-10-31 18:47:30,110 - poker_game - INFO - Betting round complete: True
2025-10-31 18:47:30,110 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:30,111 - poker_game - INFO - Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:30,111 - poker_game - INFO -   P0(Agent0): chips=1725, bet=20, status=active
2025-10-31 18:47:30,111 - poker_game - INFO -   P1(Agent1): chips=1625, bet=20, status=active
2025-10-31 18:47:30,112 - poker_game - INFO -   P2(Agent2): chips=1905, bet=20, status=active
2025-10-31 18:47:30,112 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:30,112 - poker_game - INFO -   P4(Agent4): chips=1655, bet=20, status=active
2025-10-31 18:47:30,113 - poker_game - INFO - ==================================================
2025-10-31 18:47:30,113 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:47:30,114 - poker_game - INFO - Pot: 1070, Community cards: ['3♣', '8♣', '9♠', '7♥', '6♣']
2025-10-31 18:47:30,114 - poker_game - INFO -   Player 0 status=active cards=['10♦', 'A♥']
2025-10-31 18:47:30,114 - poker_game - INFO -   Player 1 status=active cards=['3♦', 'Q♦']
2025-10-31 18:47:30,115 - poker_game - INFO -   Player 2 status=active cards=['A♣', '9♦']
2025-10-31 18:47:30,115 - poker_game - INFO -   Player 4 status=active cards=['8♠', '5♣']
2025-10-31 18:47:30,121 - poker_game - INFO -   Player 0 hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣ cards=['10♦', 'A♥']
2025-10-31 18:47:30,121 - poker_game - INFO -   Player 1 hand=One Pair: 3s - Q♦, 9♠, 8♣, 3♦, 3♣ cards=['3♦', 'Q♦']
2025-10-31 18:47:30,122 - poker_game - INFO -   Player 2 hand=One Pair: 9s - A♣, 9♦, 9♠, 8♣, 7♥ cards=['A♣', '9♦']
2025-10-31 18:47:30,122 - poker_game - INFO -   Player 4 hand=Straight: 9-high - 9♠, 8♣, 7♥, 6♣, 5♣ cards=['8♠', '5♣']
2025-10-31 18:47:30,124 - poker_game - INFO - Pot layer 0: amount=50, contributors=[0, 1, 2, 3, 4]
2025-10-31 18:47:30,124 - poker_game - INFO - Pot layer 1: amount=1020, contributors=[0, 1, 2, 4]
2025-10-31 18:47:30,126 - poker_game - INFO - Showdown total awarded: 1070 (game.pot=1070)
2025-10-31 18:47:30,126 - poker_game - INFO - Showdown winners (aggregated): [0]
2025-10-31 18:47:30,127 - poker_game - INFO -   Awarded 1070 to Player 0 (hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣)
2025-10-31 18:47:30,128 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:47:30,176 - poker_game - INFO - === STARTING NEW HAND #5 ===
2025-10-31 18:47:30,177 - poker_game - INFO - Active players for new hand: 5
2025-10-31 18:47:30,178 - poker_game - INFO - Moving dealer button
2025-10-31 18:47:30,179 - poker_game - INFO - Posting blinds
2025-10-31 18:47:30,199 - poker_game - INFO - Dealing hole cards
2025-10-31 18:47:30,199 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:47:30,209 - poker_game - INFO - Started new hand in database: hand_id=5
2025-10-31 18:47:30,210 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:47:30,210 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:30,211 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:47:30,211 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:47:30,212 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:30,212 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:30,213 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:47:30,214 - poker_game - INFO - Community cards: []
2025-10-31 18:47:30,215 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:30,216 - poker_game - INFO -   P1(Agent1): chips=1625, bet=0, status=active
2025-10-31 18:47:30,216 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=active
2025-10-31 18:47:30,216 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:47:30,217 - poker_game - INFO -   P4(Agent4): chips=1645, bet=10, status=active
2025-10-31 18:47:30,217 - poker_game - INFO - ==================================================
2025-10-31 18:47:30,218 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "J♥",
    "10♦"
  ],
  "community": [],
  "your_chips": 1625,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 2775,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1905,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1645,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1625)"
  ],
  "history": [
    "Player 1 called 165",
    "Player 2 called 165",
    "Turn dealt: 7♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 6♣",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 2 called 20",
    "Showdown: Player 0 hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣ cards=10♦, A♥",
    "Showdown: Player 1 hand=One Pair: 3s - Q♦, 9♠, 8♣, 3♦, 3♣ cards=3♦, Q♦",
    "Showdown: Player 2 hand=One Pair: 9s - A♣, 9♦, 9♠, 8♣, 7♥ cards=A♣, 9♦",
    "Showdown: Player 4 hand=Straight: 9-high - 9♠, 8♣, 7♥, 6♣, 5♣ cards=8♠, 5♣",
    "Side pot layer 0: amount=50, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Side pot layer 1: amount=1020, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20"
  ]
}
2025-10-31 18:47:30,230 - poker_game - DEBUG - Create Session: {'id': '27624779-8458-4237-afc7-3f08468e57b8', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904050.228548}
2025-10-31 18:47:32,393 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップでJ10は、いくつかの状況でプレイできる強力なハンドです。この状況では、ポットにすでに30があり、コールするには20しか必要ありません。これは、バリューベット（相手のハンドが自分より弱い場合にチップを獲得するベット）を求めてフロップを見るための、有利なオッズです。レイズも選択肢ですが、相手のプレイにまだ情報がないため、コールしてフロップを確認するのがより安全な戦略です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 131, 'promptTokenCount': 1059, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1059}], 'totalTokenCount': 1190}, 'invocationId': 'e-d3b5816a-1d31-4577-9afc-c13d0003cb90', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'sk3jHPJ8', 'timestamp': 1761904050.241617}]
2025-10-31 18:47:32,394 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:47:32,394 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップでJ10は、いくつかの状況でプレイできる強力なハンドです。この状況では、ポットにすでに30があり、コールするには20しか必要ありません。これは、バリューベット（相手のハンドが自分より弱い場合にチップを獲得するベット）を求めてフロップを見るための、有利なオッズです。レイズも選択肢ですが、相手のプレイにまだ情報がないため、コールしてフロップを確認するのがより安全な戦略です。"
}
```
2025-10-31 18:47:32,395 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:47:32,395 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップでJ10は、いくつかの状況でプレイできる強力なハンドです。この状況では、ポットにすでに30があり、コールするには20しか必要ありません。これは、バリューベット（相手のハンドが自分より弱い場合にチップを獲得するベット）を求めてフロップを見るための、有利なオッズです。レイズも選択肢ですが、相手のプレイにまだ情報がないため、コールしてフロップを確認するのがより安全な戦略です。"\n}\n```'
2025-10-31 18:47:32,395 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:47:32,396 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップでJ10は、いくつかの状況でプレイできる強力なハンドです。この状況では、ポットにすでに30があり、コールするには20しか必要ありません。これは、バリューベット（相手のハンドが自分より弱い場合にチップを獲得するベット）を求めてフロップを見るための、有利なオッズです。レイズも選択肢ですが、相手のプレイにまだ情報がないため、コールしてフロップを確認するのがより安全な戦略です。"\n}'
2025-10-31 18:47:32,396 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップでJ10は、いくつかの状況でプレイできる強力なハンドです。この状況では、ポットにすでに30があり、コールするには20しか必要ありません。これは、バリューベット（相手のハンドが自分より弱い場合にチップを獲得するベット）を求めてフロップを見るための、有利なオッズです。レイズも選択肢ですが、相手のプレイにまだ情報がないため、コールしてフロップを確認するのがより安全な戦略です。"
}
2025-10-31 18:47:32,396 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'プリフロップでJ10は、いくつかの状況でプレイできる強力なハンドです。この状況では、ポットにすでに30があり、コールするには20しか必要ありません。これは、バリューベット（相手のハンドが自分より弱い場合にチップを獲得するベット）を求めてフロップを見るための、有利なオッズです。レイズも選択肢ですが、相手のプレイにまだ情報がないため、コールしてフロップを確認するのがより安全な戦略です。'}
2025-10-31 18:47:32,396 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 20
2025-10-31 18:47:32,397 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1625)']
2025-10-31 18:47:32,397 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (20)': 20
2025-10-31 18:47:32,397 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:47:32,397 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 20, プリフロップでJ10は、いくつかの状況でプレイできる強力なハンドです。この状況では、ポットにすでに30があり、コールするには20しか必要ありません。これは、バリューベット（相手のハンドが自分より弱い場合にチップを獲得するベット）を求めてフロップを見るための、有利なオッズです。レイズも選択肢ですが、相手のプレイにまだ情報がないため、コールしてフロップを確認するのがより安全な戦略です。
2025-10-31 18:47:32,399 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 20
2025-10-31 18:47:32,399 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:47:32,400 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:32,400 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:47:32,401 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:47:32,401 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:32,401 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:32,402 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:47:32,402 - poker_game - INFO - Community cards: []
2025-10-31 18:47:32,402 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:32,403 - poker_game - INFO -   P1(Agent1): chips=1625, bet=0, status=active
2025-10-31 18:47:32,403 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=active
2025-10-31 18:47:32,403 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:47:32,404 - poker_game - INFO -   P4(Agent4): chips=1645, bet=10, status=active
2025-10-31 18:47:32,404 - poker_game - INFO - ==================================================
2025-10-31 18:47:32,405 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 20
2025-10-31 18:47:32,421 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:47:32,422 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:32,422 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:47:32,423 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:47:32,423 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:32,424 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:32,424 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:47:32,425 - poker_game - INFO - Community cards: []
2025-10-31 18:47:32,425 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:32,426 - poker_game - INFO -   P1(Agent1): chips=1605, bet=20, status=active
2025-10-31 18:47:32,426 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=active
2025-10-31 18:47:32,426 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:47:32,427 - poker_game - INFO -   P4(Agent4): chips=1645, bet=10, status=active
2025-10-31 18:47:32,427 - poker_game - INFO - Extra: Action: Player 1 called 20
2025-10-31 18:47:32,428 - poker_game - INFO - ==================================================
2025-10-31 18:47:32,428 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:47:32,429 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:47:32,429 - poker_game - DEBUG - Active players: [0, 1, 2, 3, 4]
2025-10-31 18:47:32,429 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:47:32,429 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:47:32,430 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:47:32,431 - poker_game - DEBUG - Active: 5, All-in: 0
2025-10-31 18:47:32,431 - poker_game - DEBUG - Player bets: [20, 20, 0, 0, 10], Current bet: 20, All same: False
2025-10-31 18:47:32,432 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:47:32,434 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:47:32,435 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:32,436 - poker_game - INFO - Current player: 2, Dealer: 3
2025-10-31 18:47:32,436 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:47:32,437 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:32,438 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:32,438 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:47:32,441 - poker_game - INFO - Community cards: []
2025-10-31 18:47:32,442 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:32,442 - poker_game - INFO -   P1(Agent1): chips=1605, bet=20, status=active
2025-10-31 18:47:32,442 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=active
2025-10-31 18:47:32,442 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:47:32,443 - poker_game - INFO -   P4(Agent4): chips=1645, bet=10, status=active
2025-10-31 18:47:32,443 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:47:32,444 - poker_game - INFO - ==================================================
2025-10-31 18:47:32,548 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "preflop",
  "your_cards": [
    "4♠",
    "8♠"
  ],
  "community": [],
  "your_chips": 1905,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 50,
  "to_call": 20,
  "dealer_button": 3,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 2775,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1605,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1645,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1905)"
  ],
  "history": [
    "Player 2 called 165",
    "Turn dealt: 7♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 6♣",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 2 called 20",
    "Showdown: Player 0 hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣ cards=10♦, A♥",
    "Showdown: Player 1 hand=One Pair: 3s - Q♦, 9♠, 8♣, 3♦, 3♣ cards=3♦, Q♦",
    "Showdown: Player 2 hand=One Pair: 9s - A♣, 9♦, 9♠, 8♣, 7♥ cards=A♣, 9♦",
    "Showdown: Player 4 hand=Straight: 9-high - 9♠, 8♣, 7♥, 6♣, 5♣ cards=8♠, 5♣",
    "Side pot layer 0: amount=50, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Side pot layer 1: amount=1020, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20"
  ]
}
2025-10-31 18:47:32,562 - poker_game - DEBUG - Create Session: {'id': 'a5cc573d-3db3-437b-84f5-94a22f817570', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904052.5588026}
2025-10-31 18:47:34,064 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで48スーテッドは、特に他のプレイヤーがすでにベットしている状況では、それほど強いハンドではありません。ポットをコールするのに必要な額（to_call: 20）は、あなたのチップ数（your_chips: 1905）に対してそれほど大きくはありませんが、このハンドで勝つ確率は低いため、フォールドするのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 113, 'promptTokenCount': 1058, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1058}], 'totalTokenCount': 1171}, 'invocationId': 'e-03bbbd51-49f3-41ca-9dbd-d420be24606b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'YFYQ3T5e', 'timestamp': 1761904052.575488}]
2025-10-31 18:47:34,065 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:47:34,065 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで48スーテッドは、特に他のプレイヤーがすでにベットしている状況では、それほど強いハンドではありません。ポットをコールするのに必要な額（to_call: 20）は、あなたのチップ数（your_chips: 1905）に対してそれほど大きくはありませんが、このハンドで勝つ確率は低いため、フォールドするのが最善です。"
}
```
2025-10-31 18:47:34,065 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:47:34,065 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで48スーテッドは、特に他のプレイヤーがすでにベットしている状況では、それほど強いハンドではありません。ポットをコールするのに必要な額（to_call: 20）は、あなたのチップ数（your_chips: 1905）に対してそれほど大きくはありませんが、このハンドで勝つ確率は低いため、フォールドするのが最善です。"\n}\n```'
2025-10-31 18:47:34,065 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:47:34,066 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで48スーテッドは、特に他のプレイヤーがすでにベットしている状況では、それほど強いハンドではありません。ポットをコールするのに必要な額（to_call: 20）は、あなたのチップ数（your_chips: 1905）に対してそれほど大きくはありませんが、このハンドで勝つ確率は低いため、フォールドするのが最善です。"\n}'
2025-10-31 18:47:34,066 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで48スーテッドは、特に他のプレイヤーがすでにベットしている状況では、それほど強いハンドではありません。ポットをコールするのに必要な額（to_call: 20）は、あなたのチップ数（your_chips: 1905）に対してそれほど大きくはありませんが、このハンドで勝つ確率は低いため、フォールドするのが最善です。"
}
2025-10-31 18:47:34,066 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップで48スーテッドは、特に他のプレイヤーがすでにベットしている状況では、それほど強いハンドではありません。ポットをコールするのに必要な額（to_call: 20）は、あなたのチップ数（your_chips: 1905）に対してそれほど大きくはありませんが、このハンドで勝つ確率は低いため、フォールドするのが最善です。'}
2025-10-31 18:47:34,066 - poker_game - DEBUG - [Agent2] Extracted values - action: 'fold', amount: 0
2025-10-31 18:47:34,067 - poker_game - DEBUG - [Agent2] Action 'fold' normalized - amount set to 0
2025-10-31 18:47:34,067 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:47:34,067 - poker_game - INFO - [Agent2] Successfully parsed decision: fold, 0, プリフロップで48スーテッドは、特に他のプレイヤーがすでにベットしている状況では、それほど強いハンドではありません。ポットをコールするのに必要な額（to_call: 20）は、あなたのチップ数（your_chips: 1905）に対してそれほど大きくはありませんが、このハンドで勝つ確率は低いため、フォールドするのが最善です。
2025-10-31 18:47:34,068 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'fold' with amount 0
2025-10-31 18:47:34,069 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:47:34,069 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:34,070 - poker_game - INFO - Current player: 2, Dealer: 3
2025-10-31 18:47:34,070 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:47:34,071 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:34,071 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:34,072 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:47:34,072 - poker_game - INFO - Community cards: []
2025-10-31 18:47:34,073 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:34,073 - poker_game - INFO -   P1(Agent1): chips=1605, bet=20, status=active
2025-10-31 18:47:34,074 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=active
2025-10-31 18:47:34,074 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:47:34,075 - poker_game - INFO -   P4(Agent4): chips=1645, bet=10, status=active
2025-10-31 18:47:34,076 - poker_game - INFO - ==================================================
2025-10-31 18:47:34,076 - poker_game - INFO - ACTION_EXECUTED: Player 2 folded
2025-10-31 18:47:34,086 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:47:34,087 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:34,088 - poker_game - INFO - Current player: 2, Dealer: 3
2025-10-31 18:47:34,088 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:47:34,088 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:34,089 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:34,089 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:34,090 - poker_game - INFO - Community cards: []
2025-10-31 18:47:34,090 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:34,091 - poker_game - INFO -   P1(Agent1): chips=1605, bet=20, status=active
2025-10-31 18:47:34,091 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:47:34,092 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:47:34,092 - poker_game - INFO -   P4(Agent4): chips=1645, bet=10, status=active
2025-10-31 18:47:34,092 - poker_game - INFO - Extra: Action: Player 2 folded
2025-10-31 18:47:34,093 - poker_game - INFO - ==================================================
2025-10-31 18:47:34,093 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:47:34,093 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:47:34,093 - poker_game - DEBUG - Active players: [0, 1, 3, 4]
2025-10-31 18:47:34,094 - poker_game - INFO - Advanced from player 2 to player 3 (seat order)
2025-10-31 18:47:34,094 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:47:34,095 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:47:34,095 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:47:34,096 - poker_game - DEBUG - Player bets: [20, 20, 0, 10], Current bet: 20, All same: False
2025-10-31 18:47:34,096 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:47:34,097 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:47:34,097 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:34,098 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:47:34,098 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:47:34,099 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:34,099 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:34,100 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:34,100 - poker_game - INFO - Community cards: []
2025-10-31 18:47:34,100 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:34,101 - poker_game - INFO -   P1(Agent1): chips=1605, bet=20, status=active
2025-10-31 18:47:34,101 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:47:34,102 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:47:34,102 - poker_game - INFO -   P4(Agent4): chips=1645, bet=10, status=active
2025-10-31 18:47:34,102 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:47:34,103 - poker_game - INFO - ==================================================
2025-10-31 18:47:34,204 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "7♥",
    "3♣"
  ],
  "community": [],
  "your_chips": 2020,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 50,
  "to_call": 20,
  "dealer_button": 3,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 2775,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1605,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1905,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1645,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (2020)"
  ],
  "history": [
    "Turn dealt: 7♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 6♣",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 2 called 20",
    "Showdown: Player 0 hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣ cards=10♦, A♥",
    "Showdown: Player 1 hand=One Pair: 3s - Q♦, 9♠, 8♣, 3♦, 3♣ cards=3♦, Q♦",
    "Showdown: Player 2 hand=One Pair: 9s - A♣, 9♦, 9♠, 8♣, 7♥ cards=A♣, 9♦",
    "Showdown: Player 4 hand=Straight: 9-high - 9♠, 8♣, 7♥, 6♣, 5♣ cards=8♠, 5♣",
    "Side pot layer 0: amount=50, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Side pot layer 1: amount=1020, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 2 folded"
  ]
}
2025-10-31 18:47:34,219 - poker_game - DEBUG - Create Session: {'id': 'a9944c73-353a-48be-88bd-0be9b2e56ad7', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904054.2161322}
2025-10-31 18:47:33,444 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は7♥3♣です。これは弱いハンド（カードの組み合わせ）であり、コール（相手のベット額と同額を支払うこと）するにはコストが高すぎます。ポット（賭けられたチップの総額）は50で、コールするには20必要ですが、私のハンドの強さを考えると、この投資はリスクに見合いません。他のプレイヤーのアクションにもよりますが、この状況ではフォールド（ゲームから降りること）が最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 145, 'promptTokenCount': 1054, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1054}], 'totalTokenCount': 1199}, 'invocationId': 'e-555f5d45-2051-4d4d-be6b-1289a9d05729', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'OJ6nZ2GI', 'timestamp': 1761904054.229636}]
2025-10-31 18:47:33,445 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:47:33,445 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は7♥3♣です。これは弱いハンド（カードの組み合わせ）であり、コール（相手のベット額と同額を支払うこと）するにはコストが高すぎます。ポット（賭けられたチップの総額）は50で、コールするには20必要ですが、私のハンドの強さを考えると、この投資はリスクに見合いません。他のプレイヤーのアクションにもよりますが、この状況ではフォールド（ゲームから降りること）が最善です。"
}
```
2025-10-31 18:47:33,446 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:47:33,446 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は7♥3♣です。これは弱いハンド（カードの組み合わせ）であり、コール（相手のベット額と同額を支払うこと）するにはコストが高すぎます。ポット（賭けられたチップの総額）は50で、コールするには20必要ですが、私のハンドの強さを考えると、この投資はリスクに見合いません。他のプレイヤーのアクションにもよりますが、この状況ではフォールド（ゲームから降りること）が最善です。"\n}\n```'
2025-10-31 18:47:33,447 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:47:33,447 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は7♥3♣です。これは弱いハンド（カードの組み合わせ）であり、コール（相手のベット額と同額を支払うこと）するにはコストが高すぎます。ポット（賭けられたチップの総額）は50で、コールするには20必要ですが、私のハンドの強さを考えると、この投資はリスクに見合いません。他のプレイヤーのアクションにもよりますが、この状況ではフォールド（ゲームから降りること）が最善です。"\n}'
2025-10-31 18:47:33,447 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は7♥3♣です。これは弱いハンド（カードの組み合わせ）であり、コール（相手のベット額と同額を支払うこと）するにはコストが高すぎます。ポット（賭けられたチップの総額）は50で、コールするには20必要ですが、私のハンドの強さを考えると、この投資はリスクに見合いません。他のプレイヤーのアクションにもよりますが、この状況ではフォールド（ゲームから降りること）が最善です。"
}
2025-10-31 18:47:33,447 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（最初のカードが配られた後）で、私の手札は7♥3♣です。これは弱いハンド（カードの組み合わせ）であり、コール（相手のベット額と同額を支払うこと）するにはコストが高すぎます。ポット（賭けられたチップの総額）は50で、コールするには20必要ですが、私のハンドの強さを考えると、この投資はリスクに見合いません。他のプレイヤーのアクションにもよりますが、この状況ではフォールド（ゲームから降りること）が最善です。'}
2025-10-31 18:47:33,448 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 18:47:33,448 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 18:47:33,448 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:47:33,448 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップ（最初のカードが配られた後）で、私の手札は7♥3♣です。これは弱いハンド（カードの組み合わせ）であり、コール（相手のベット額と同額を支払うこと）するにはコストが高すぎます。ポット（賭けられたチップの総額）は50で、コールするには20必要ですが、私のハンドの強さを考えると、この投資はリスクに見合いません。他のプレイヤーのアクションにもよりますが、この状況ではフォールド（ゲームから降りること）が最善です。
2025-10-31 18:47:33,450 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 18:47:33,450 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:47:33,451 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:33,451 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:47:33,451 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:47:33,452 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:33,453 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:33,453 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:47:33,455 - poker_game - INFO - Community cards: []
2025-10-31 18:47:33,455 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:33,456 - poker_game - INFO -   P1(Agent1): chips=1605, bet=20, status=active
2025-10-31 18:47:33,458 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:47:33,458 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:47:33,459 - poker_game - INFO -   P4(Agent4): chips=1645, bet=10, status=active
2025-10-31 18:47:33,460 - poker_game - INFO - ==================================================
2025-10-31 18:47:33,461 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 18:47:33,475 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:47:33,476 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:33,477 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:47:33,477 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:47:33,478 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:33,479 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:33,479 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:47:33,479 - poker_game - INFO - Community cards: []
2025-10-31 18:47:33,480 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:33,480 - poker_game - INFO -   P1(Agent1): chips=1605, bet=20, status=active
2025-10-31 18:47:33,481 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:47:33,481 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:33,482 - poker_game - INFO -   P4(Agent4): chips=1645, bet=10, status=active
2025-10-31 18:47:33,482 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 18:47:33,483 - poker_game - INFO - ==================================================
2025-10-31 18:47:33,483 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:47:33,484 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:47:33,485 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 18:47:33,485 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:47:33,485 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:47:33,486 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:47:33,487 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:47:33,487 - poker_game - DEBUG - Player bets: [20, 20, 10], Current bet: 20, All same: False
2025-10-31 18:47:33,487 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:47:33,487 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:47:33,488 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:33,488 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:47:33,489 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:47:33,490 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:33,490 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:33,491 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:47:33,492 - poker_game - INFO - Community cards: []
2025-10-31 18:47:33,494 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:33,494 - poker_game - INFO -   P1(Agent1): chips=1605, bet=20, status=active
2025-10-31 18:47:33,495 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:47:33,495 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:33,496 - poker_game - INFO -   P4(Agent4): chips=1645, bet=10, status=active
2025-10-31 18:47:33,496 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:47:33,496 - poker_game - INFO - ==================================================
2025-10-31 18:47:33,598 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "J♣",
    "8♣"
  ],
  "community": [],
  "your_chips": 1645,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 50,
  "to_call": 10,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 2775,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1605,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1905,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (1645)"
  ],
  "history": [
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 6♣",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 2 called 20",
    "Showdown: Player 0 hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣ cards=10♦, A♥",
    "Showdown: Player 1 hand=One Pair: 3s - Q♦, 9♠, 8♣, 3♦, 3♣ cards=3♦, Q♦",
    "Showdown: Player 2 hand=One Pair: 9s - A♣, 9♦, 9♠, 8♣, 7♥ cards=A♣, 9♦",
    "Showdown: Player 4 hand=Straight: 9-high - 9♠, 8♣, 7♥, 6♣, 5♣ cards=8♠, 5♣",
    "Side pot layer 0: amount=50, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Side pot layer 1: amount=1020, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 folded"
  ]
}
2025-10-31 18:47:33,614 - poker_game - DEBUG - Create Session: {'id': '7d8e0b0f-1f7d-4b3f-bb09-9ef025e6de7a', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904053.6108446}
2025-10-31 18:47:37,924 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_413HiIowTC3YjWEVnjCO86kH', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1366, 'totalTokenCount': 1383}, 'invocationId': 'e-d6d295a8-64f5-4bfb-a7a4-126098ef6b94', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'OsShThCK', 'timestamp': 1761904053.626653}, {'content': {'parts': [{'functionResponse': {'id': 'call_413HiIowTC3YjWEVnjCO86kH', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-d6d295a8-64f5-4bfb-a7a4-126098ef6b94', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'C9FlFrU3', 'timestamp': 1761904054.618341}, {'content': {'parts': [{'functionCall': {'id': 'call_IHySwaQAsjA3vbmmHytTEp7a', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1890, 'totalTokenCount': 1910}, 'invocationId': 'e-d6d295a8-64f5-4bfb-a7a4-126098ef6b94', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'GoSaw5No', 'timestamp': 1761904054.622896}, {'content': {'parts': [{'functionResponse': {'id': 'call_IHySwaQAsjA3vbmmHytTEp7a', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-d6d295a8-64f5-4bfb-a7a4-126098ef6b94', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'FWnJtG1i', 'timestamp': 1761904055.820854}, {'content': {'parts': [{'text': '{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "I have a suited connector hand (J♣, 8♣) which can be strong in multi-way pots. Calling the minimum bet allows me to see a flop without overcommitting my chips."\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 65, 'promptTokenCount': 1452, 'totalTokenCount': 1517}, 'invocationId': 'e-d6d295a8-64f5-4bfb-a7a4-126098ef6b94', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'zgfEaRUW', 'timestamp': 1761904055.822761}]
2025-10-31 18:47:37,924 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:47:37,924 - poker_game - DEBUG - {
  "action": "call",
  "amount": 10,
  "reasoning": "I have a suited connector hand (J♣, 8♣) which can be strong in multi-way pots. Calling the minimum bet allows me to see a flop without overcommitting my chips."
}
2025-10-31 18:47:37,925 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:47:37,925 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "I have a suited connector hand (J♣, 8♣) which can be strong in multi-way pots. Calling the minimum bet allows me to see a flop without overcommitting my chips."\n}'
2025-10-31 18:47:37,925 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:47:37,925 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "call",
  "amount": 10,
  "reasoning": "I have a suited connector hand (J♣, 8♣) which can be strong in multi-way pots. Calling the minimum bet allows me to see a flop without overcommitting my chips."
}
2025-10-31 18:47:37,925 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'call', 'amount': 10, 'reasoning': 'I have a suited connector hand (J♣, 8♣) which can be strong in multi-way pots. Calling the minimum bet allows me to see a flop without overcommitting my chips.'}
2025-10-31 18:47:37,925 - poker_game - DEBUG - [Agent4] Extracted values - action: 'call', amount: 10
2025-10-31 18:47:37,925 - poker_game - DEBUG - [Agent4] Processing call action - available actions: ['fold', 'call (10)', 'raise (min 40)', 'all-in (1645)']
2025-10-31 18:47:37,925 - poker_game - DEBUG - [Agent4] Call amount extracted from 'call (10)': 10
2025-10-31 18:47:37,925 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'call', 'amount': 10}
2025-10-31 18:47:37,926 - poker_game - INFO - [Agent4] Successfully parsed decision: call, 10, I have a suited connector hand (J♣, 8♣) which can be strong in multi-way pots. Calling the minimum bet allows me to see a flop without overcommitting my chips.
2025-10-31 18:47:37,926 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'call' with amount 10
2025-10-31 18:47:37,926 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:47:37,927 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:37,927 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:47:37,927 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:47:37,927 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:37,927 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:37,927 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:47:37,928 - poker_game - INFO - Community cards: []
2025-10-31 18:47:37,928 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:37,928 - poker_game - INFO -   P1(Agent1): chips=1605, bet=20, status=active
2025-10-31 18:47:37,928 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:47:37,928 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:37,928 - poker_game - INFO -   P4(Agent4): chips=1645, bet=10, status=active
2025-10-31 18:47:37,929 - poker_game - INFO - ==================================================
2025-10-31 18:47:37,929 - poker_game - INFO - ACTION_EXECUTED: Player 4 called 10
2025-10-31 18:47:37,945 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:47:37,946 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:37,946 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:47:37,946 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:47:37,946 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:37,947 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:37,947 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:47:37,947 - poker_game - INFO - Community cards: []
2025-10-31 18:47:37,947 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:37,947 - poker_game - INFO -   P1(Agent1): chips=1605, bet=20, status=active
2025-10-31 18:47:37,948 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:47:37,948 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:37,948 - poker_game - INFO -   P4(Agent4): chips=1635, bet=20, status=active
2025-10-31 18:47:37,948 - poker_game - INFO - Extra: Action: Player 4 called 10
2025-10-31 18:47:37,948 - poker_game - INFO - ==================================================
2025-10-31 18:47:37,949 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:47:37,949 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:47:37,949 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 18:47:37,949 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:47:37,949 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:47:37,949 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:47:37,949 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:47:37,950 - poker_game - DEBUG - Player bets: [20, 20, 20], Current bet: 20, All same: True
2025-10-31 18:47:37,950 - poker_game - DEBUG - Active player indices: [0, 1, 4]
2025-10-31 18:47:37,950 - poker_game - DEBUG - Last raiser index: 0
2025-10-31 18:47:37,950 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:47:37,950 - poker_game - DEBUG - Next after last raiser 0: 1
2025-10-31 18:47:37,950 - poker_game - DEBUG - Betting continues: Current player 0 != next after raiser 1
2025-10-31 18:47:37,950 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:47:37,950 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:37,951 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:47:37,951 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:47:37,951 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:37,951 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:37,951 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:47:37,951 - poker_game - INFO - Community cards: []
2025-10-31 18:47:37,952 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:37,952 - poker_game - INFO -   P1(Agent1): chips=1605, bet=20, status=active
2025-10-31 18:47:37,952 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:47:37,952 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:37,952 - poker_game - INFO -   P4(Agent4): chips=1635, bet=20, status=active
2025-10-31 18:47:37,953 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:47:37,953 - poker_game - INFO - ==================================================
2025-10-31 18:47:38,054 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "A♣",
    "6♣"
  ],
  "community": [],
  "your_chips": 2775,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1605,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1905,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1635,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 40)",
    "all-in (2775)"
  ],
  "history": [
    "Player 0 checked",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 6♣",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 2 called 20",
    "Showdown: Player 0 hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣ cards=10♦, A♥",
    "Showdown: Player 1 hand=One Pair: 3s - Q♦, 9♠, 8♣, 3♦, 3♣ cards=3♦, Q♦",
    "Showdown: Player 2 hand=One Pair: 9s - A♣, 9♦, 9♠, 8♣, 7♥ cards=A♣, 9♦",
    "Showdown: Player 4 hand=Straight: 9-high - 9♠, 8♣, 7♥, 6♣, 5♣ cards=8♠, 5♣",
    "Side pot layer 0: amount=50, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Side pot layer 1: amount=1020, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 called 10"
  ]
}
2025-10-31 18:47:38,062 - poker_game - DEBUG - Create Session: {'id': '9e49b3c0-d0ca-4773-8c7d-02b9c7695dbb', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904058.0599148}
2025-10-31 18:47:40,093 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "プリフロップの状況です。あなたの手札はA♣6♣で、これはコネクター（連続した数字）かつフラッシュドロー（同じスートのカード）の可能性があります。しかし、Aハイ、6ハイはそれほど強いハンドではありません。前のプレイヤーがチェックしているので、こちらもチェックで様子を見るのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 101, 'promptTokenCount': 1052, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1052}], 'totalTokenCount': 1153}, 'invocationId': 'e-ee44336f-9df0-483e-8934-be7fe7d2643d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'oJfOrVqP', 'timestamp': 1761904058.072115}]
2025-10-31 18:47:40,094 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:47:40,094 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "プリフロップの状況です。あなたの手札はA♣6♣で、これはコネクター（連続した数字）かつフラッシュドロー（同じスートのカード）の可能性があります。しかし、Aハイ、6ハイはそれほど強いハンドではありません。前のプレイヤーがチェックしているので、こちらもチェックで様子を見るのが最善です。"
}
```
2025-10-31 18:47:40,094 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:47:40,094 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "プリフロップの状況です。あなたの手札はA♣6♣で、これはコネクター（連続した数字）かつフラッシュドロー（同じスートのカード）の可能性があります。しかし、Aハイ、6ハイはそれほど強いハンドではありません。前のプレイヤーがチェックしているので、こちらもチェックで様子を見るのが最善です。"\n}\n```'
2025-10-31 18:47:40,094 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:47:40,094 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "プリフロップの状況です。あなたの手札はA♣6♣で、これはコネクター（連続した数字）かつフラッシュドロー（同じスートのカード）の可能性があります。しかし、Aハイ、6ハイはそれほど強いハンドではありません。前のプレイヤーがチェックしているので、こちらもチェックで様子を見るのが最善です。"\n}'
2025-10-31 18:47:40,094 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "プリフロップの状況です。あなたの手札はA♣6♣で、これはコネクター（連続した数字）かつフラッシュドロー（同じスートのカード）の可能性があります。しかし、Aハイ、6ハイはそれほど強いハンドではありません。前のプレイヤーがチェックしているので、こちらもチェックで様子を見るのが最善です。"
}
2025-10-31 18:47:40,094 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'プリフロップの状況です。あなたの手札はA♣6♣で、これはコネクター（連続した数字）かつフラッシュドロー（同じスートのカード）の可能性があります。しかし、Aハイ、6ハイはそれほど強いハンドではありません。前のプレイヤーがチェックしているので、こちらもチェックで様子を見るのが最善です。'}
2025-10-31 18:47:40,095 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 0
2025-10-31 18:47:40,095 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'check', 'raise (min 40)', 'all-in (2775)']
2025-10-31 18:47:40,095 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:47:40,095 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 0, プリフロップの状況です。あなたの手札はA♣6♣で、これはコネクター（連続した数字）かつフラッシュドロー（同じスートのカード）の可能性があります。しかし、Aハイ、6ハイはそれほど強いハンドではありません。前のプレイヤーがチェックしているので、こちらもチェックで様子を見るのが最善です。
2025-10-31 18:47:40,096 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 0
2025-10-31 18:47:40,096 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:47:40,096 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:40,096 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:47:40,096 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:47:40,096 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:40,097 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:40,097 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:47:40,097 - poker_game - INFO - Community cards: []
2025-10-31 18:47:40,097 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:40,097 - poker_game - INFO -   P1(Agent1): chips=1605, bet=20, status=active
2025-10-31 18:47:40,097 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:47:40,097 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:40,097 - poker_game - INFO -   P4(Agent4): chips=1635, bet=20, status=active
2025-10-31 18:47:40,097 - poker_game - INFO - ==================================================
2025-10-31 18:47:40,098 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 18:47:40,123 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:47:40,124 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:40,125 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:47:40,125 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:47:40,125 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:40,125 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:40,126 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:47:40,126 - poker_game - INFO - Community cards: []
2025-10-31 18:47:40,126 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:40,126 - poker_game - INFO -   P1(Agent1): chips=1605, bet=20, status=active
2025-10-31 18:47:40,126 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:47:40,127 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:40,127 - poker_game - INFO -   P4(Agent4): chips=1635, bet=20, status=active
2025-10-31 18:47:40,127 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 18:47:40,127 - poker_game - INFO - ==================================================
2025-10-31 18:47:40,127 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:47:40,127 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:47:40,127 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 18:47:40,128 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:47:40,128 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:47:40,128 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:47:40,128 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:47:40,128 - poker_game - DEBUG - Player bets: [20, 20, 20], Current bet: 20, All same: True
2025-10-31 18:47:40,128 - poker_game - DEBUG - Active player indices: [0, 1, 4]
2025-10-31 18:47:40,128 - poker_game - DEBUG - Last raiser index: 0
2025-10-31 18:47:40,128 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:47:40,129 - poker_game - DEBUG - Next after last raiser 0: 1
2025-10-31 18:47:40,129 - poker_game - INFO - Betting complete: Back to player 1 after last raiser 0
2025-10-31 18:47:40,129 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:47:40,129 - poker_game - INFO - Hand #5, Phase: preflop
2025-10-31 18:47:40,129 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:47:40,129 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:47:40,130 - poker_game - INFO - Last raiser: 0
2025-10-31 18:47:40,130 - poker_game - INFO - Betting round complete: True
2025-10-31 18:47:40,130 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:47:40,130 - poker_game - INFO - Community cards: []
2025-10-31 18:47:40,130 - poker_game - INFO -   P0(Agent0): chips=2775, bet=20, status=active
2025-10-31 18:47:40,131 - poker_game - INFO -   P1(Agent1): chips=1605, bet=20, status=active
2025-10-31 18:47:40,131 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:47:40,131 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:40,131 - poker_game - INFO -   P4(Agent4): chips=1635, bet=20, status=active
2025-10-31 18:47:40,131 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:47:40,132 - poker_game - INFO - ==================================================
2025-10-31 18:47:40,234 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:47:40,234 - poker_game - INFO - Betting round complete: True
2025-10-31 18:47:40,235 - poker_game - INFO - Remaining players: 3
2025-10-31 18:47:40,235 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:47:40,236 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:47:40,236 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:47:40,236 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:47:40,246 - poker_game - INFO - Starting new betting round
2025-10-31 18:47:40,246 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:47:40,247 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:47:40,247 - poker_game - DEBUG - Active players for new betting round: [0, 1, 4]
2025-10-31 18:47:40,247 - poker_game - DEBUG - Dealer button: 3
2025-10-31 18:47:40,247 - poker_game - INFO - First actor: Player 4 (by phase rule), was 1
2025-10-31 18:47:40,248 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:47:40,248 - poker_game - INFO - Hand #5, Phase: flop
2025-10-31 18:47:40,248 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:47:40,248 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:47:40,249 - poker_game - INFO - Last raiser: None
2025-10-31 18:47:40,249 - poker_game - INFO - Betting round complete: False
2025-10-31 18:47:40,249 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:47:40,249 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣']
2025-10-31 18:47:40,250 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:47:40,250 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:47:40,251 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:47:40,251 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:47:40,253 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=active
2025-10-31 18:47:40,254 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:47:40,254 - poker_game - INFO - ==================================================
2025-10-31 18:47:40,255 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "flop",
  "your_cards": [
    "J♣",
    "8♣"
  ],
  "community": [
    "2♦",
    "7♣",
    "4♣"
  ],
  "your_chips": 1635,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 2775,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1605,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1905,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1635)"
  ],
  "history": [
    "Player 2 checked",
    "River dealt: 6♣",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 2 called 20",
    "Showdown: Player 0 hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣ cards=10♦, A♥",
    "Showdown: Player 1 hand=One Pair: 3s - Q♦, 9♠, 8♣, 3♦, 3♣ cards=3♦, Q♦",
    "Showdown: Player 2 hand=One Pair: 9s - A♣, 9♦, 9♠, 8♣, 7♥ cards=A♣, 9♦",
    "Showdown: Player 4 hand=Straight: 9-high - 9♠, 8♣, 7♥, 6♣, 5♣ cards=8♠, 5♣",
    "Side pot layer 0: amount=50, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Side pot layer 1: amount=1020, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 2♦, 7♣, 4♣"
  ]
}
2025-10-31 18:47:40,270 - poker_game - DEBUG - Create Session: {'id': '8b8b7553-3fb5-4f94-8cd0-473bab7775ac', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904060.2657535}
2025-10-31 18:47:50,312 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:48:00,464 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 18:48:10,363 - poker_game - INFO - Waiting for LLM API response for Agent4... 30 seconds elapsed
2025-10-31 18:48:20,632 - poker_game - WARNING - LLM API response timeout for Agent4 after 40 seconds - folding
2025-10-31 18:48:21,552 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'fold' with amount 0
2025-10-31 18:48:21,553 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:48:21,553 - poker_game - INFO - Hand #5, Phase: flop
2025-10-31 18:48:21,553 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:48:21,554 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:21,554 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:21,554 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:21,554 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:48:21,554 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣']
2025-10-31 18:48:21,555 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:21,555 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:21,555 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:21,555 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:21,555 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=active
2025-10-31 18:48:21,555 - poker_game - INFO - ==================================================
2025-10-31 18:48:21,556 - poker_game - INFO - ACTION_EXECUTED: Player 4 folded
2025-10-31 18:48:21,562 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:48:21,563 - poker_game - INFO - Hand #5, Phase: flop
2025-10-31 18:48:21,563 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:48:21,563 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:21,564 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:21,564 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:21,564 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:21,564 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣']
2025-10-31 18:48:21,564 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:21,565 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:21,565 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:21,565 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:21,565 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:21,565 - poker_game - INFO - Extra: Action: Player 4 folded
2025-10-31 18:48:21,566 - poker_game - INFO - ==================================================
2025-10-31 18:48:21,566 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:48:21,566 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:48:21,566 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:48:21,566 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:48:21,566 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:48:21,567 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:48:21,567 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:48:21,567 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:48:21,567 - poker_game - DEBUG - Active player indices: [0, 1]
2025-10-31 18:48:21,567 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:48:21,567 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:48:21,567 - poker_game - DEBUG - First actor index: 0
2025-10-31 18:48:21,567 - poker_game - INFO - Betting complete: Back to first actor 0 (all players have acted)
2025-10-31 18:48:21,568 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:48:21,568 - poker_game - INFO - Hand #5, Phase: flop
2025-10-31 18:48:21,568 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:48:21,568 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:21,568 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:21,569 - poker_game - INFO - Betting round complete: True
2025-10-31 18:48:21,569 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:21,569 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣']
2025-10-31 18:48:21,570 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:21,570 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:21,570 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:21,570 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:21,570 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:21,570 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:48:21,570 - poker_game - INFO - ==================================================
2025-10-31 18:48:21,673 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:48:21,674 - poker_game - INFO - Betting round complete: True
2025-10-31 18:48:21,674 - poker_game - INFO - Remaining players: 2
2025-10-31 18:48:21,674 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:48:21,675 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:48:21,675 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 18:48:21,683 - poker_game - INFO - Starting new betting round
2025-10-31 18:48:21,684 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:48:21,684 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:48:21,684 - poker_game - DEBUG - Active players for new betting round: [0, 1]
2025-10-31 18:48:21,685 - poker_game - DEBUG - Dealer button: 3
2025-10-31 18:48:21,685 - poker_game - INFO - First actor: Player 0 (by phase rule), was 0
2025-10-31 18:48:21,685 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:48:21,685 - poker_game - INFO - Hand #5, Phase: turn
2025-10-31 18:48:21,686 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:48:21,686 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:21,686 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:21,687 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:21,687 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:21,689 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦']
2025-10-31 18:48:21,690 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:21,691 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:21,692 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:21,692 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:21,693 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:21,693 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 18:48:21,693 - poker_game - INFO - ==================================================
2025-10-31 18:48:21,694 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "turn",
  "your_cards": [
    "A♣",
    "6♣"
  ],
  "community": [
    "2♦",
    "7♣",
    "4♣",
    "9♦"
  ],
  "your_chips": 2775,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1605,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1905,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1635,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (2775)"
  ],
  "history": [
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 2 called 20",
    "Showdown: Player 0 hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣ cards=10♦, A♥",
    "Showdown: Player 1 hand=One Pair: 3s - Q♦, 9♠, 8♣, 3♦, 3♣ cards=3♦, Q♦",
    "Showdown: Player 2 hand=One Pair: 9s - A♣, 9♦, 9♠, 8♣, 7♥ cards=A♣, 9♦",
    "Showdown: Player 4 hand=Straight: 9-high - 9♠, 8♣, 7♥, 6♣, 5♣ cards=8♠, 5♣",
    "Side pot layer 0: amount=50, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Side pot layer 1: amount=1020, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 2♦, 7♣, 4♣",
    "Player 4 folded",
    "Turn dealt: 9♦"
  ]
}
2025-10-31 18:48:21,752 - poker_game - DEBUG - Create Session: {'id': 'b4812f17-10ce-4100-b815-db7cc03eb5ff', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904101.750076}
2025-10-31 18:48:23,665 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在のボード（2♦, 7♣, 4♣, 9♦）では、あなたの手札（A♣, 6♣）でフラッシュ（同じスートのカードが5枚揃うこと）のドロー（完成する可能性のある役）はありません。しかし、ストレート（数字が連続する役）のドロー（6-7-9に繋がる8）の可能性はありますが、完成確率は低いです。相手もフォールドしており、コールやレイズの必要がないため、チェックをして次のカード（リバー）を見るのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 155, 'promptTokenCount': 1086, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1086}], 'totalTokenCount': 1241}, 'invocationId': 'e-910f68fc-d59f-43ff-a209-f35771be4259', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'C2E5D1fQ', 'timestamp': 1761904101.761264}]
2025-10-31 18:48:23,665 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:48:23,665 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "現在のボード（2♦, 7♣, 4♣, 9♦）では、あなたの手札（A♣, 6♣）でフラッシュ（同じスートのカードが5枚揃うこと）のドロー（完成する可能性のある役）はありません。しかし、ストレート（数字が連続する役）のドロー（6-7-9に繋がる8）の可能性はありますが、完成確率は低いです。相手もフォールドしており、コールやレイズの必要がないため、チェックをして次のカード（リバー）を見るのが最善です。"
}
```
2025-10-31 18:48:23,665 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:48:23,665 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在のボード（2♦, 7♣, 4♣, 9♦）では、あなたの手札（A♣, 6♣）でフラッシュ（同じスートのカードが5枚揃うこと）のドロー（完成する可能性のある役）はありません。しかし、ストレート（数字が連続する役）のドロー（6-7-9に繋がる8）の可能性はありますが、完成確率は低いです。相手もフォールドしており、コールやレイズの必要がないため、チェックをして次のカード（リバー）を見るのが最善です。"\n}\n```'
2025-10-31 18:48:23,666 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:48:23,666 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在のボード（2♦, 7♣, 4♣, 9♦）では、あなたの手札（A♣, 6♣）でフラッシュ（同じスートのカードが5枚揃うこと）のドロー（完成する可能性のある役）はありません。しかし、ストレート（数字が連続する役）のドロー（6-7-9に繋がる8）の可能性はありますが、完成確率は低いです。相手もフォールドしており、コールやレイズの必要がないため、チェックをして次のカード（リバー）を見るのが最善です。"\n}'
2025-10-31 18:48:23,666 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "現在のボード（2♦, 7♣, 4♣, 9♦）では、あなたの手札（A♣, 6♣）でフラッシュ（同じスートのカードが5枚揃うこと）のドロー（完成する可能性のある役）はありません。しかし、ストレート（数字が連続する役）のドロー（6-7-9に繋がる8）の可能性はありますが、完成確率は低いです。相手もフォールドしており、コールやレイズの必要がないため、チェックをして次のカード（リバー）を見るのが最善です。"
}
2025-10-31 18:48:23,666 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '現在のボード（2♦, 7♣, 4♣, 9♦）では、あなたの手札（A♣, 6♣）でフラッシュ（同じスートのカードが5枚揃うこと）のドロー（完成する可能性のある役）はありません。しかし、ストレート（数字が連続する役）のドロー（6-7-9に繋がる8）の可能性はありますが、完成確率は低いです。相手もフォールドしており、コールやレイズの必要がないため、チェックをして次のカード（リバー）を見るのが最善です。'}
2025-10-31 18:48:23,666 - poker_game - DEBUG - [Agent0] Extracted values - action: 'check', amount: 0
2025-10-31 18:48:23,666 - poker_game - DEBUG - [Agent0] Action 'check' normalized - amount set to 0
2025-10-31 18:48:23,666 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:48:23,666 - poker_game - INFO - [Agent0] Successfully parsed decision: check, 0, 現在のボード（2♦, 7♣, 4♣, 9♦）では、あなたの手札（A♣, 6♣）でフラッシュ（同じスートのカードが5枚揃うこと）のドロー（完成する可能性のある役）はありません。しかし、ストレート（数字が連続する役）のドロー（6-7-9に繋がる8）の可能性はありますが、完成確率は低いです。相手もフォールドしており、コールやレイズの必要がないため、チェックをして次のカード（リバー）を見るのが最善です。
2025-10-31 18:48:23,667 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'check' with amount 0
2025-10-31 18:48:23,667 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:48:23,667 - poker_game - INFO - Hand #5, Phase: turn
2025-10-31 18:48:23,667 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:48:23,668 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:23,668 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:23,668 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:23,668 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:23,668 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦']
2025-10-31 18:48:23,668 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:23,668 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:23,668 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:23,668 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:23,668 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:23,669 - poker_game - INFO - ==================================================
2025-10-31 18:48:23,669 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 18:48:23,691 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:48:23,691 - poker_game - INFO - Hand #5, Phase: turn
2025-10-31 18:48:23,691 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:48:23,691 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:23,691 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:23,692 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:23,692 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:23,692 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦']
2025-10-31 18:48:23,692 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:23,692 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:23,693 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:23,693 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:23,693 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:23,693 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 18:48:23,693 - poker_game - INFO - ==================================================
2025-10-31 18:48:23,693 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:48:23,694 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:48:23,694 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:48:23,694 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:48:23,694 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:48:23,694 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:48:23,694 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:48:23,694 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:48:23,695 - poker_game - DEBUG - Active player indices: [0, 1]
2025-10-31 18:48:23,695 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:48:23,695 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:48:23,695 - poker_game - DEBUG - First actor index: 0
2025-10-31 18:48:23,695 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 0
2025-10-31 18:48:23,695 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:48:23,695 - poker_game - INFO - Hand #5, Phase: turn
2025-10-31 18:48:23,696 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:48:23,696 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:23,696 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:23,696 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:23,696 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:23,697 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦']
2025-10-31 18:48:23,697 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:23,697 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:23,697 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:23,697 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:23,698 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:23,698 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:48:23,698 - poker_game - INFO - ==================================================
2025-10-31 18:48:23,799 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "turn",
  "your_cards": [
    "J♥",
    "10♦"
  ],
  "community": [
    "2♦",
    "7♣",
    "4♣",
    "9♦"
  ],
  "your_chips": 1605,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 2775,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1905,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1635,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1605)"
  ],
  "history": [
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 2 called 20",
    "Showdown: Player 0 hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣ cards=10♦, A♥",
    "Showdown: Player 1 hand=One Pair: 3s - Q♦, 9♠, 8♣, 3♦, 3♣ cards=3♦, Q♦",
    "Showdown: Player 2 hand=One Pair: 9s - A♣, 9♦, 9♠, 8♣, 7♥ cards=A♣, 9♦",
    "Showdown: Player 4 hand=Straight: 9-high - 9♠, 8♣, 7♥, 6♣, 5♣ cards=8♠, 5♣",
    "Side pot layer 0: amount=50, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Side pot layer 1: amount=1020, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 2♦, 7♣, 4♣",
    "Player 4 folded",
    "Turn dealt: 9♦",
    "Player 0 checked"
  ]
}
2025-10-31 18:48:23,808 - poker_game - DEBUG - Create Session: {'id': '5983856a-3c77-40da-8246-12ba10fb5848', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904103.806424}
2025-10-31 18:48:26,062 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたはコール（相手のベット額と同額を支払うこと）またはチェック（ベットしないこと）が可能です。相手のプレイヤー（Player 0）がベットしていないため、あなたは無料でカードを見ることができます（チェック）。あなたの手札（J♥, 10♦）は、コミュニティカード（2♦, 7♣, 4♣, 9♦）と組み合わせても、現時点では強い役（例：スリーカード、ツーペア、ストレート、フラッシュなど）を作れていません。しかし、相手も明確に強い手を持っている兆候はなく、ポット（中央にある賭け金の総額）もそれほど大きくありません。そのため、リスクを冒さずに次のカード（リバー）を見るためにチェックするのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 195, 'promptTokenCount': 1083, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1083}], 'totalTokenCount': 1278}, 'invocationId': 'e-fbbced46-2701-4318-90b6-ec59ea39d470', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'GygyxhR0', 'timestamp': 1761904103.816385}]
2025-10-31 18:48:26,063 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:48:26,063 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "現在の状況では、あなたはコール（相手のベット額と同額を支払うこと）またはチェック（ベットしないこと）が可能です。相手のプレイヤー（Player 0）がベットしていないため、あなたは無料でカードを見ることができます（チェック）。あなたの手札（J♥, 10♦）は、コミュニティカード（2♦, 7♣, 4♣, 9♦）と組み合わせても、現時点では強い役（例：スリーカード、ツーペア、ストレート、フラッシュなど）を作れていません。しかし、相手も明確に強い手を持っている兆候はなく、ポット（中央にある賭け金の総額）もそれほど大きくありません。そのため、リスクを冒さずに次のカード（リバー）を見るためにチェックするのが最善の選択です。"
}
```
2025-10-31 18:48:26,063 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:48:26,063 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたはコール（相手のベット額と同額を支払うこと）またはチェック（ベットしないこと）が可能です。相手のプレイヤー（Player 0）がベットしていないため、あなたは無料でカードを見ることができます（チェック）。あなたの手札（J♥, 10♦）は、コミュニティカード（2♦, 7♣, 4♣, 9♦）と組み合わせても、現時点では強い役（例：スリーカード、ツーペア、ストレート、フラッシュなど）を作れていません。しかし、相手も明確に強い手を持っている兆候はなく、ポット（中央にある賭け金の総額）もそれほど大きくありません。そのため、リスクを冒さずに次のカード（リバー）を見るためにチェックするのが最善の選択です。"\n}\n```'
2025-10-31 18:48:26,063 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:48:26,063 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたはコール（相手のベット額と同額を支払うこと）またはチェック（ベットしないこと）が可能です。相手のプレイヤー（Player 0）がベットしていないため、あなたは無料でカードを見ることができます（チェック）。あなたの手札（J♥, 10♦）は、コミュニティカード（2♦, 7♣, 4♣, 9♦）と組み合わせても、現時点では強い役（例：スリーカード、ツーペア、ストレート、フラッシュなど）を作れていません。しかし、相手も明確に強い手を持っている兆候はなく、ポット（中央にある賭け金の総額）もそれほど大きくありません。そのため、リスクを冒さずに次のカード（リバー）を見るためにチェックするのが最善の選択です。"\n}'
2025-10-31 18:48:26,064 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "現在の状況では、あなたはコール（相手のベット額と同額を支払うこと）またはチェック（ベットしないこと）が可能です。相手のプレイヤー（Player 0）がベットしていないため、あなたは無料でカードを見ることができます（チェック）。あなたの手札（J♥, 10♦）は、コミュニティカード（2♦, 7♣, 4♣, 9♦）と組み合わせても、現時点では強い役（例：スリーカード、ツーペア、ストレート、フラッシュなど）を作れていません。しかし、相手も明確に強い手を持っている兆候はなく、ポット（中央にある賭け金の総額）もそれほど大きくありません。そのため、リスクを冒さずに次のカード（リバー）を見るためにチェックするのが最善の選択です。"
}
2025-10-31 18:48:26,064 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': '現在の状況では、あなたはコール（相手のベット額と同額を支払うこと）またはチェック（ベットしないこと）が可能です。相手のプレイヤー（Player 0）がベットしていないため、あなたは無料でカードを見ることができます（チェック）。あなたの手札（J♥, 10♦）は、コミュニティカード（2♦, 7♣, 4♣, 9♦）と組み合わせても、現時点では強い役（例：スリーカード、ツーペア、ストレート、フラッシュなど）を作れていません。しかし、相手も明確に強い手を持っている兆候はなく、ポット（中央にある賭け金の総額）もそれほど大きくありません。そのため、リスクを冒さずに次のカード（リバー）を見るためにチェックするのが最善の選択です。'}
2025-10-31 18:48:26,064 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 0
2025-10-31 18:48:26,064 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1605)']
2025-10-31 18:48:26,064 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:48:26,064 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 0, 現在の状況では、あなたはコール（相手のベット額と同額を支払うこと）またはチェック（ベットしないこと）が可能です。相手のプレイヤー（Player 0）がベットしていないため、あなたは無料でカードを見ることができます（チェック）。あなたの手札（J♥, 10♦）は、コミュニティカード（2♦, 7♣, 4♣, 9♦）と組み合わせても、現時点では強い役（例：スリーカード、ツーペア、ストレート、フラッシュなど）を作れていません。しかし、相手も明確に強い手を持っている兆候はなく、ポット（中央にある賭け金の総額）もそれほど大きくありません。そのため、リスクを冒さずに次のカード（リバー）を見るためにチェックするのが最善の選択です。
2025-10-31 18:48:26,065 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 0
2025-10-31 18:48:26,065 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:48:26,065 - poker_game - INFO - Hand #5, Phase: turn
2025-10-31 18:48:26,066 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:48:26,066 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:26,066 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:26,066 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:26,067 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:26,067 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦']
2025-10-31 18:48:26,067 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:26,067 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:26,067 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:26,068 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:26,068 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:26,068 - poker_game - INFO - ==================================================
2025-10-31 18:48:26,068 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:48:26,094 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:48:26,094 - poker_game - INFO - Hand #5, Phase: turn
2025-10-31 18:48:26,094 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:48:26,095 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:26,095 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:26,095 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:26,095 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:26,096 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦']
2025-10-31 18:48:26,096 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:26,096 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:26,096 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:26,096 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:26,096 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:26,097 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:48:26,097 - poker_game - INFO - ==================================================
2025-10-31 18:48:26,097 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:48:26,097 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:48:26,097 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:48:26,097 - poker_game - INFO - Advanced from player 1 to player 0 (seat order)
2025-10-31 18:48:26,098 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:48:26,098 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:48:26,098 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:48:26,098 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:48:26,098 - poker_game - DEBUG - Active player indices: [0, 1]
2025-10-31 18:48:26,098 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:48:26,098 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:48:26,099 - poker_game - DEBUG - First actor index: 0
2025-10-31 18:48:26,099 - poker_game - INFO - Betting complete: Back to first actor 0 (all players have acted)
2025-10-31 18:48:26,099 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:48:26,099 - poker_game - INFO - Hand #5, Phase: turn
2025-10-31 18:48:26,099 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:48:26,099 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:26,100 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:26,100 - poker_game - INFO - Betting round complete: True
2025-10-31 18:48:26,100 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:26,100 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦']
2025-10-31 18:48:26,100 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:26,101 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:26,101 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:26,101 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:26,101 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:26,101 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:48:26,102 - poker_game - INFO - ==================================================
2025-10-31 18:48:26,203 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 18:48:26,203 - poker_game - INFO - Betting round complete: True
2025-10-31 18:48:26,204 - poker_game - INFO - Remaining players: 2
2025-10-31 18:48:26,204 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:48:26,205 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:48:26,205 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 18:48:26,215 - poker_game - INFO - Starting new betting round
2025-10-31 18:48:26,215 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:48:26,215 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:48:26,216 - poker_game - DEBUG - Active players for new betting round: [0, 1]
2025-10-31 18:48:26,216 - poker_game - DEBUG - Dealer button: 3
2025-10-31 18:48:26,216 - poker_game - INFO - First actor: Player 0 (by phase rule), was 0
2025-10-31 18:48:26,217 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:48:26,217 - poker_game - INFO - Hand #5, Phase: river
2025-10-31 18:48:26,217 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:48:26,218 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:26,218 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:26,219 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:26,219 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:26,220 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦', '7♠']
2025-10-31 18:48:26,221 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:26,221 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:26,222 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:26,223 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:26,223 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:26,223 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 18:48:26,224 - poker_game - INFO - ==================================================
2025-10-31 18:48:26,225 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "river",
  "your_cards": [
    "A♣",
    "6♣"
  ],
  "community": [
    "2♦",
    "7♣",
    "4♣",
    "9♦",
    "7♠"
  ],
  "your_chips": 2775,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1605,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1905,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1635,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (2775)"
  ],
  "history": [
    "Player 2 called 20",
    "Showdown: Player 0 hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣ cards=10♦, A♥",
    "Showdown: Player 1 hand=One Pair: 3s - Q♦, 9♠, 8♣, 3♦, 3♣ cards=3♦, Q♦",
    "Showdown: Player 2 hand=One Pair: 9s - A♣, 9♦, 9♠, 8♣, 7♥ cards=A♣, 9♦",
    "Showdown: Player 4 hand=Straight: 9-high - 9♠, 8♣, 7♥, 6♣, 5♣ cards=8♠, 5♣",
    "Side pot layer 0: amount=50, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Side pot layer 1: amount=1020, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 2♦, 7♣, 4♣",
    "Player 4 folded",
    "Turn dealt: 9♦",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: 7♠"
  ]
}
2025-10-31 18:48:26,237 - poker_game - DEBUG - Create Session: {'id': 'd51d4df5-8e0d-4b15-a506-a43e496842c6', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904106.2353814}
2025-10-31 18:48:28,801 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバーまで来て、あなたの手札はA♣ 6♣、コミュニティカードは2♦ 7♣ 4♣ 9♦ 7♠です。これにより、あなたは7のペア（7♣ 7♠）と、A、9、6、4で構成されるエースハイのキッカーを持つことになります。しかし、過去の履歴を見ると、以前のショーダウンで「Player 0 hand=Straight: 10-high」という結果が出ており、これはあなたが過去にストレート（10ハイ）で勝ったことを示唆しています。しかし、このハンドでは、そのストレートを完成させることはできていません。現在のコミュニティカードでは、7のペアがあなたのベストハンドです。対戦相手はPlayer 1のみで、彼はチェックしました。これは、彼も強いハンドを持っていない可能性を示唆しています。ポットは60で、コール額は0です。したがって、リスクを冒さずにチェックしてショーダウンに進むのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 238, 'promptTokenCount': 1084, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1084}], 'totalTokenCount': 1322}, 'invocationId': 'e-954ad42c-22bb-4fdd-bca3-6b3fa66e2eae', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'glEgInjt', 'timestamp': 1761904106.248055}]
2025-10-31 18:48:28,801 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:48:28,801 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバーまで来て、あなたの手札はA♣ 6♣、コミュニティカードは2♦ 7♣ 4♣ 9♦ 7♠です。これにより、あなたは7のペア（7♣ 7♠）と、A、9、6、4で構成されるエースハイのキッカーを持つことになります。しかし、過去の履歴を見ると、以前のショーダウンで「Player 0 hand=Straight: 10-high」という結果が出ており、これはあなたが過去にストレート（10ハイ）で勝ったことを示唆しています。しかし、このハンドでは、そのストレートを完成させることはできていません。現在のコミュニティカードでは、7のペアがあなたのベストハンドです。対戦相手はPlayer 1のみで、彼はチェックしました。これは、彼も強いハンドを持っていない可能性を示唆しています。ポットは60で、コール額は0です。したがって、リスクを冒さずにチェックしてショーダウンに進むのが最善です。"
}
```
2025-10-31 18:48:28,801 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:48:28,802 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバーまで来て、あなたの手札はA♣ 6♣、コミュニティカードは2♦ 7♣ 4♣ 9♦ 7♠です。これにより、あなたは7のペア（7♣ 7♠）と、A、9、6、4で構成されるエースハイのキッカーを持つことになります。しかし、過去の履歴を見ると、以前のショーダウンで「Player 0 hand=Straight: 10-high」という結果が出ており、これはあなたが過去にストレート（10ハイ）で勝ったことを示唆しています。しかし、このハンドでは、そのストレートを完成させることはできていません。現在のコミュニティカードでは、7のペアがあなたのベストハンドです。対戦相手はPlayer 1のみで、彼はチェックしました。これは、彼も強いハンドを持っていない可能性を示唆しています。ポットは60で、コール額は0です。したがって、リスクを冒さずにチェックしてショーダウンに進むのが最善です。"\n}\n```'
2025-10-31 18:48:28,802 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:48:28,802 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバーまで来て、あなたの手札はA♣ 6♣、コミュニティカードは2♦ 7♣ 4♣ 9♦ 7♠です。これにより、あなたは7のペア（7♣ 7♠）と、A、9、6、4で構成されるエースハイのキッカーを持つことになります。しかし、過去の履歴を見ると、以前のショーダウンで「Player 0 hand=Straight: 10-high」という結果が出ており、これはあなたが過去にストレート（10ハイ）で勝ったことを示唆しています。しかし、このハンドでは、そのストレートを完成させることはできていません。現在のコミュニティカードでは、7のペアがあなたのベストハンドです。対戦相手はPlayer 1のみで、彼はチェックしました。これは、彼も強いハンドを持っていない可能性を示唆しています。ポットは60で、コール額は0です。したがって、リスクを冒さずにチェックしてショーダウンに進むのが最善です。"\n}'
2025-10-31 18:48:28,802 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバーまで来て、あなたの手札はA♣ 6♣、コミュニティカードは2♦ 7♣ 4♣ 9♦ 7♠です。これにより、あなたは7のペア（7♣ 7♠）と、A、9、6、4で構成されるエースハイのキッカーを持つことになります。しかし、過去の履歴を見ると、以前のショーダウンで「Player 0 hand=Straight: 10-high」という結果が出ており、これはあなたが過去にストレート（10ハイ）で勝ったことを示唆しています。しかし、このハンドでは、そのストレートを完成させることはできていません。現在のコミュニティカードでは、7のペアがあなたのベストハンドです。対戦相手はPlayer 1のみで、彼はチェックしました。これは、彼も強いハンドを持っていない可能性を示唆しています。ポットは60で、コール額は0です。したがって、リスクを冒さずにチェックしてショーダウンに進むのが最善です。"
}
2025-10-31 18:48:28,802 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバーまで来て、あなたの手札はA♣ 6♣、コミュニティカードは2♦ 7♣ 4♣ 9♦ 7♠です。これにより、あなたは7のペア（7♣ 7♠）と、A、9、6、4で構成されるエースハイのキッカーを持つことになります。しかし、過去の履歴を見ると、以前のショーダウンで「Player 0 hand=Straight: 10-high」という結果が出ており、これはあなたが過去にストレート（10ハイ）で勝ったことを示唆しています。しかし、このハンドでは、そのストレートを完成させることはできていません。現在のコミュニティカードでは、7のペアがあなたのベストハンドです。対戦相手はPlayer 1のみで、彼はチェックしました。これは、彼も強いハンドを持っていない可能性を示唆しています。ポットは60で、コール額は0です。したがって、リスクを冒さずにチェックしてショーダウンに進むのが最善です。'}
2025-10-31 18:48:28,802 - poker_game - DEBUG - [Agent0] Extracted values - action: 'check', amount: 0
2025-10-31 18:48:28,802 - poker_game - DEBUG - [Agent0] Action 'check' normalized - amount set to 0
2025-10-31 18:48:28,802 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:48:28,802 - poker_game - INFO - [Agent0] Successfully parsed decision: check, 0, リバーまで来て、あなたの手札はA♣ 6♣、コミュニティカードは2♦ 7♣ 4♣ 9♦ 7♠です。これにより、あなたは7のペア（7♣ 7♠）と、A、9、6、4で構成されるエースハイのキッカーを持つことになります。しかし、過去の履歴を見ると、以前のショーダウンで「Player 0 hand=Straight: 10-high」という結果が出ており、これはあなたが過去にストレート（10ハイ）で勝ったことを示唆しています。しかし、このハンドでは、そのストレートを完成させることはできていません。現在のコミュニティカードでは、7のペアがあなたのベストハンドです。対戦相手はPlayer 1のみで、彼はチェックしました。これは、彼も強いハンドを持っていない可能性を示唆しています。ポットは60で、コール額は0です。したがって、リスクを冒さずにチェックしてショーダウンに進むのが最善です。
2025-10-31 18:48:28,803 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'check' with amount 0
2025-10-31 18:48:28,803 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:48:28,803 - poker_game - INFO - Hand #5, Phase: river
2025-10-31 18:48:28,804 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:48:28,804 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:28,804 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:28,804 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:28,805 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:28,805 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦', '7♠']
2025-10-31 18:48:28,805 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:28,805 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:28,805 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:28,805 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:28,805 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:28,805 - poker_game - INFO - ==================================================
2025-10-31 18:48:28,806 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 18:48:28,816 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:48:28,816 - poker_game - INFO - Hand #5, Phase: river
2025-10-31 18:48:28,817 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:48:28,817 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:28,818 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:28,818 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:28,818 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:28,818 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦', '7♠']
2025-10-31 18:48:28,818 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:28,818 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:28,819 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:28,819 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:28,819 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:28,819 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 18:48:28,819 - poker_game - INFO - ==================================================
2025-10-31 18:48:28,819 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:48:28,820 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:48:28,820 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:48:28,820 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:48:28,820 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:48:28,820 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:48:28,820 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:48:28,820 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:48:28,820 - poker_game - DEBUG - Active player indices: [0, 1]
2025-10-31 18:48:28,820 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:48:28,820 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:48:28,820 - poker_game - DEBUG - First actor index: 0
2025-10-31 18:48:28,821 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 0
2025-10-31 18:48:28,821 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:48:28,821 - poker_game - INFO - Hand #5, Phase: river
2025-10-31 18:48:28,821 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:48:28,821 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:28,821 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:28,822 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:28,822 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:28,822 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦', '7♠']
2025-10-31 18:48:28,822 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:28,823 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:28,823 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:28,823 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:28,823 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:28,823 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:48:28,824 - poker_game - INFO - ==================================================
2025-10-31 18:48:28,925 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "river",
  "your_cards": [
    "J♥",
    "10♦"
  ],
  "community": [
    "2♦",
    "7♣",
    "4♣",
    "9♦",
    "7♠"
  ],
  "your_chips": 1605,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 2775,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1905,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1635,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1605)"
  ],
  "history": [
    "Showdown: Player 0 hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣ cards=10♦, A♥",
    "Showdown: Player 1 hand=One Pair: 3s - Q♦, 9♠, 8♣, 3♦, 3♣ cards=3♦, Q♦",
    "Showdown: Player 2 hand=One Pair: 9s - A♣, 9♦, 9♠, 8♣, 7♥ cards=A♣, 9♦",
    "Showdown: Player 4 hand=Straight: 9-high - 9♠, 8♣, 7♥, 6♣, 5♣ cards=8♠, 5♣",
    "Side pot layer 0: amount=50, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Side pot layer 1: amount=1020, winners=0 best_hand=Straight: 10-high - 10♦, 9♠, 8♣, 7♥, 6♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 2♦, 7♣, 4♣",
    "Player 4 folded",
    "Turn dealt: 9♦",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: 7♠",
    "Player 0 checked"
  ]
}
2025-10-31 18:48:28,933 - poker_game - DEBUG - Create Session: {'id': '8656b43a-203d-4f38-be7e-a05cedc74fe6', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904108.9317682}
2025-10-31 18:48:28,461 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、コミュニティカードに7が3枚（スリーセブン）あり、私の手札にはJと10があります。これでできる役は、コミュニティカードの7のペアと、私のJまたは10のハイカード（一番強いカード）です。これはそれほど強い役ではありません。相手（Player 0）はチェックしているので、こちらもチェックして、ショーダウン（役の公開）に進み、勝敗を決めます。コールやレイズ（さらにベットを増やすこと）をするほどの強い役ではありません。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 150, 'promptTokenCount': 1082, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1082}], 'totalTokenCount': 1232}, 'invocationId': 'e-2406c2b8-9635-4d04-b893-4b8a60d58de3', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '3cLe2toY', 'timestamp': 1761904108.941799}]
2025-10-31 18:48:28,461 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:48:28,461 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ストリート）で、コミュニティカードに7が3枚（スリーセブン）あり、私の手札にはJと10があります。これでできる役は、コミュニティカードの7のペアと、私のJまたは10のハイカード（一番強いカード）です。これはそれほど強い役ではありません。相手（Player 0）はチェックしているので、こちらもチェックして、ショーダウン（役の公開）に進み、勝敗を決めます。コールやレイズ（さらにベットを増やすこと）をするほどの強い役ではありません。"
}
```
2025-10-31 18:48:28,461 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:48:28,462 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、コミュニティカードに7が3枚（スリーセブン）あり、私の手札にはJと10があります。これでできる役は、コミュニティカードの7のペアと、私のJまたは10のハイカード（一番強いカード）です。これはそれほど強い役ではありません。相手（Player 0）はチェックしているので、こちらもチェックして、ショーダウン（役の公開）に進み、勝敗を決めます。コールやレイズ（さらにベットを増やすこと）をするほどの強い役ではありません。"\n}\n```'
2025-10-31 18:48:28,462 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:48:28,462 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、コミュニティカードに7が3枚（スリーセブン）あり、私の手札にはJと10があります。これでできる役は、コミュニティカードの7のペアと、私のJまたは10のハイカード（一番強いカード）です。これはそれほど強い役ではありません。相手（Player 0）はチェックしているので、こちらもチェックして、ショーダウン（役の公開）に進み、勝敗を決めます。コールやレイズ（さらにベットを増やすこと）をするほどの強い役ではありません。"\n}'
2025-10-31 18:48:28,462 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ストリート）で、コミュニティカードに7が3枚（スリーセブン）あり、私の手札にはJと10があります。これでできる役は、コミュニティカードの7のペアと、私のJまたは10のハイカード（一番強いカード）です。これはそれほど強い役ではありません。相手（Player 0）はチェックしているので、こちらもチェックして、ショーダウン（役の公開）に進み、勝敗を決めます。コールやレイズ（さらにベットを増やすこと）をするほどの強い役ではありません。"
}
2025-10-31 18:48:28,462 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最終ストリート）で、コミュニティカードに7が3枚（スリーセブン）あり、私の手札にはJと10があります。これでできる役は、コミュニティカードの7のペアと、私のJまたは10のハイカード（一番強いカード）です。これはそれほど強い役ではありません。相手（Player 0）はチェックしているので、こちらもチェックして、ショーダウン（役の公開）に進み、勝敗を決めます。コールやレイズ（さらにベットを増やすこと）をするほどの強い役ではありません。'}
2025-10-31 18:48:28,462 - poker_game - DEBUG - [Agent1] Extracted values - action: 'check', amount: 0
2025-10-31 18:48:28,463 - poker_game - DEBUG - [Agent1] Action 'check' normalized - amount set to 0
2025-10-31 18:48:28,464 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:48:28,464 - poker_game - INFO - [Agent1] Successfully parsed decision: check, 0, リバー（最終ストリート）で、コミュニティカードに7が3枚（スリーセブン）あり、私の手札にはJと10があります。これでできる役は、コミュニティカードの7のペアと、私のJまたは10のハイカード（一番強いカード）です。これはそれほど強い役ではありません。相手（Player 0）はチェックしているので、こちらもチェックして、ショーダウン（役の公開）に進み、勝敗を決めます。コールやレイズ（さらにベットを増やすこと）をするほどの強い役ではありません。
2025-10-31 18:48:28,464 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'check' with amount 0
2025-10-31 18:48:28,464 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:48:28,465 - poker_game - INFO - Hand #5, Phase: river
2025-10-31 18:48:28,465 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:48:28,465 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:28,465 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:28,465 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:28,465 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:28,466 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦', '7♠']
2025-10-31 18:48:28,466 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:28,466 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:28,466 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:28,466 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:28,466 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:28,466 - poker_game - INFO - ==================================================
2025-10-31 18:48:28,466 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:48:28,483 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:48:28,483 - poker_game - INFO - Hand #5, Phase: river
2025-10-31 18:48:28,484 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:48:28,485 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:28,486 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:28,486 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:28,487 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:28,487 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦', '7♠']
2025-10-31 18:48:28,488 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:28,489 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:28,492 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:28,493 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:28,494 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:28,495 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:48:28,495 - poker_game - INFO - ==================================================
2025-10-31 18:48:28,496 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:48:28,496 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:48:28,496 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:48:28,496 - poker_game - INFO - Advanced from player 1 to player 0 (seat order)
2025-10-31 18:48:28,496 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:48:28,496 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:48:28,497 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:48:28,497 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:48:28,497 - poker_game - DEBUG - Active player indices: [0, 1]
2025-10-31 18:48:28,497 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:48:28,497 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:48:28,497 - poker_game - DEBUG - First actor index: 0
2025-10-31 18:48:28,497 - poker_game - INFO - Betting complete: Back to first actor 0 (all players have acted)
2025-10-31 18:48:28,497 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:48:28,497 - poker_game - INFO - Hand #5, Phase: river
2025-10-31 18:48:28,498 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:48:28,498 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:28,498 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:28,498 - poker_game - INFO - Betting round complete: True
2025-10-31 18:48:28,499 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:28,499 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦', '7♠']
2025-10-31 18:48:28,499 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:28,499 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:28,500 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:28,500 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:28,500 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:28,500 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:48:28,500 - poker_game - INFO - ==================================================
2025-10-31 18:48:28,602 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 18:48:28,602 - poker_game - INFO - Betting round complete: True
2025-10-31 18:48:28,603 - poker_game - INFO - Remaining players: 2
2025-10-31 18:48:28,603 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:48:28,603 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:48:28,603 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 18:48:28,604 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:48:28,604 - poker_game - INFO - Hand #5, Phase: showdown
2025-10-31 18:48:28,604 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:48:28,604 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:48:28,605 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:28,605 - poker_game - INFO - Betting round complete: True
2025-10-31 18:48:28,605 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:48:28,606 - poker_game - INFO - Community cards: ['2♦', '7♣', '4♣', '9♦', '7♠']
2025-10-31 18:48:28,606 - poker_game - INFO -   P0(Agent0): chips=2775, bet=0, status=active
2025-10-31 18:48:28,606 - poker_game - INFO -   P1(Agent1): chips=1605, bet=0, status=active
2025-10-31 18:48:28,607 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=folded
2025-10-31 18:48:28,607 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:28,607 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=folded
2025-10-31 18:48:28,608 - poker_game - INFO - ==================================================
2025-10-31 18:48:28,608 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:48:28,608 - poker_game - INFO - Pot: 60, Community cards: ['2♦', '7♣', '4♣', '9♦', '7♠']
2025-10-31 18:48:28,609 - poker_game - INFO -   Player 0 status=active cards=['A♣', '6♣']
2025-10-31 18:48:28,609 - poker_game - INFO -   Player 1 status=active cards=['J♥', '10♦']
2025-10-31 18:48:28,611 - poker_game - INFO -   Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=['A♣', '6♣']
2025-10-31 18:48:28,612 - poker_game - INFO -   Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=['J♥', '10♦']
2025-10-31 18:48:28,612 - poker_game - INFO - Pot layer 0: amount=60, contributors=[0, 1, 4]
2025-10-31 18:48:28,613 - poker_game - INFO - Showdown total awarded: 60 (game.pot=60)
2025-10-31 18:48:28,613 - poker_game - INFO - Showdown winners (aggregated): [0]
2025-10-31 18:48:28,615 - poker_game - INFO -   Awarded 60 to Player 0 (hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣)
2025-10-31 18:48:28,616 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:48:28,647 - poker_game - INFO - === STARTING NEW HAND #6 ===
2025-10-31 18:48:28,647 - poker_game - INFO - Active players for new hand: 5
2025-10-31 18:48:28,648 - poker_game - INFO - Moving dealer button
2025-10-31 18:48:28,648 - poker_game - INFO - Posting blinds
2025-10-31 18:48:28,667 - poker_game - INFO - Dealing hole cards
2025-10-31 18:48:28,668 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:48:28,678 - poker_game - INFO - Started new hand in database: hand_id=6
2025-10-31 18:48:28,679 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:48:28,679 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:28,680 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:48:28,680 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:48:28,681 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:28,681 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:28,682 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:48:28,682 - poker_game - INFO - Community cards: []
2025-10-31 18:48:28,682 - poker_game - INFO -   P0(Agent0): chips=2825, bet=10, status=active
2025-10-31 18:48:28,683 - poker_game - INFO -   P1(Agent1): chips=1585, bet=20, status=active
2025-10-31 18:48:28,683 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=active
2025-10-31 18:48:28,684 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:48:28,684 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=active
2025-10-31 18:48:28,685 - poker_game - INFO - ==================================================
2025-10-31 18:48:28,687 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "preflop",
  "your_cards": [
    "A♥",
    "4♦"
  ],
  "community": [],
  "your_chips": 1905,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 4,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 2825,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1585,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1635,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1905)"
  ],
  "history": [
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 2♦, 7♣, 4♣",
    "Player 4 folded",
    "Turn dealt: 9♦",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: 7♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣",
    "Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20"
  ]
}
2025-10-31 18:48:28,707 - poker_game - DEBUG - Create Session: {'id': '8992c7d4-4eee-4a2b-a8e4-04131e89555b', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904108.7044835}
2025-10-31 18:48:30,715 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで、Aハイ（エースハイ）は一般的に良いハンドですが、A♥4♦はスーテッド（同じスーツ）でもなく、コネクター（連続した数字）でもないので、それほど強力ではありません。ポットに30があり、コールするには20必要です。これは、ポットオッズ（ポットのサイズに対するベット額の比率）が良好であることを意味します。つまり、勝てば失う額よりも多く勝てる可能性が高いです。このハンドでレイズ（さらにベット額を上げる）するには、リスクが高すぎます。フォールド（降りる）するのは、ポットオッズが良いのでもったいないです。したがって、コールしてフロップを見て、状況を判断するのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 183, 'promptTokenCount': 942, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 942}], 'totalTokenCount': 1125}, 'invocationId': 'e-40fd5363-b19a-46e7-8e17-5b23a721a884', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'a5mE1jsY', 'timestamp': 1761904108.718989}]
2025-10-31 18:48:30,716 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:48:30,716 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップで、Aハイ（エースハイ）は一般的に良いハンドですが、A♥4♦はスーテッド（同じスーツ）でもなく、コネクター（連続した数字）でもないので、それほど強力ではありません。ポットに30があり、コールするには20必要です。これは、ポットオッズ（ポットのサイズに対するベット額の比率）が良好であることを意味します。つまり、勝てば失う額よりも多く勝てる可能性が高いです。このハンドでレイズ（さらにベット額を上げる）するには、リスクが高すぎます。フォールド（降りる）するのは、ポットオッズが良いのでもったいないです。したがって、コールしてフロップを見て、状況を判断するのが最善です。"
}
```
2025-10-31 18:48:30,716 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:48:30,716 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで、Aハイ（エースハイ）は一般的に良いハンドですが、A♥4♦はスーテッド（同じスーツ）でもなく、コネクター（連続した数字）でもないので、それほど強力ではありません。ポットに30があり、コールするには20必要です。これは、ポットオッズ（ポットのサイズに対するベット額の比率）が良好であることを意味します。つまり、勝てば失う額よりも多く勝てる可能性が高いです。このハンドでレイズ（さらにベット額を上げる）するには、リスクが高すぎます。フォールド（降りる）するのは、ポットオッズが良いのでもったいないです。したがって、コールしてフロップを見て、状況を判断するのが最善です。"\n}\n```'
2025-10-31 18:48:30,716 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:48:30,716 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで、Aハイ（エースハイ）は一般的に良いハンドですが、A♥4♦はスーテッド（同じスーツ）でもなく、コネクター（連続した数字）でもないので、それほど強力ではありません。ポットに30があり、コールするには20必要です。これは、ポットオッズ（ポットのサイズに対するベット額の比率）が良好であることを意味します。つまり、勝てば失う額よりも多く勝てる可能性が高いです。このハンドでレイズ（さらにベット額を上げる）するには、リスクが高すぎます。フォールド（降りる）するのは、ポットオッズが良いのでもったいないです。したがって、コールしてフロップを見て、状況を判断するのが最善です。"\n}'
2025-10-31 18:48:30,716 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップで、Aハイ（エースハイ）は一般的に良いハンドですが、A♥4♦はスーテッド（同じスーツ）でもなく、コネクター（連続した数字）でもないので、それほど強力ではありません。ポットに30があり、コールするには20必要です。これは、ポットオッズ（ポットのサイズに対するベット額の比率）が良好であることを意味します。つまり、勝てば失う額よりも多く勝てる可能性が高いです。このハンドでレイズ（さらにベット額を上げる）するには、リスクが高すぎます。フォールド（降りる）するのは、ポットオッズが良いのでもったいないです。したがって、コールしてフロップを見て、状況を判断するのが最善です。"
}
2025-10-31 18:48:30,717 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'プリフロップで、Aハイ（エースハイ）は一般的に良いハンドですが、A♥4♦はスーテッド（同じスーツ）でもなく、コネクター（連続した数字）でもないので、それほど強力ではありません。ポットに30があり、コールするには20必要です。これは、ポットオッズ（ポットのサイズに対するベット額の比率）が良好であることを意味します。つまり、勝てば失う額よりも多く勝てる可能性が高いです。このハンドでレイズ（さらにベット額を上げる）するには、リスクが高すぎます。フォールド（降りる）するのは、ポットオッズが良いのでもったいないです。したがって、コールしてフロップを見て、状況を判断するのが最善です。'}
2025-10-31 18:48:30,717 - poker_game - DEBUG - [Agent2] Extracted values - action: 'call', amount: 20
2025-10-31 18:48:30,717 - poker_game - DEBUG - [Agent2] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1905)']
2025-10-31 18:48:30,717 - poker_game - DEBUG - [Agent2] Call amount extracted from 'call (20)': 20
2025-10-31 18:48:30,717 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:48:30,717 - poker_game - INFO - [Agent2] Successfully parsed decision: call, 20, プリフロップで、Aハイ（エースハイ）は一般的に良いハンドですが、A♥4♦はスーテッド（同じスーツ）でもなく、コネクター（連続した数字）でもないので、それほど強力ではありません。ポットに30があり、コールするには20必要です。これは、ポットオッズ（ポットのサイズに対するベット額の比率）が良好であることを意味します。つまり、勝てば失う額よりも多く勝てる可能性が高いです。このハンドでレイズ（さらにベット額を上げる）するには、リスクが高すぎます。フォールド（降りる）するのは、ポットオッズが良いのでもったいないです。したがって、コールしてフロップを見て、状況を判断するのが最善です。
2025-10-31 18:48:30,717 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'call' with amount 20
2025-10-31 18:48:30,718 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:48:30,718 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:30,718 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:48:30,719 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:48:30,719 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:30,719 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:30,719 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:48:30,719 - poker_game - INFO - Community cards: []
2025-10-31 18:48:30,719 - poker_game - INFO -   P0(Agent0): chips=2825, bet=10, status=active
2025-10-31 18:48:30,720 - poker_game - INFO -   P1(Agent1): chips=1585, bet=20, status=active
2025-10-31 18:48:30,720 - poker_game - INFO -   P2(Agent2): chips=1905, bet=0, status=active
2025-10-31 18:48:30,720 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:48:30,720 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=active
2025-10-31 18:48:30,720 - poker_game - INFO - ==================================================
2025-10-31 18:48:30,721 - poker_game - INFO - ACTION_EXECUTED: Player 2 called 20
2025-10-31 18:48:30,730 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:48:30,731 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:30,731 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:48:30,732 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:48:30,732 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:30,732 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:30,732 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:48:30,733 - poker_game - INFO - Community cards: []
2025-10-31 18:48:30,733 - poker_game - INFO -   P0(Agent0): chips=2825, bet=10, status=active
2025-10-31 18:48:30,733 - poker_game - INFO -   P1(Agent1): chips=1585, bet=20, status=active
2025-10-31 18:48:30,734 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:30,734 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:48:30,734 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=active
2025-10-31 18:48:30,734 - poker_game - INFO - Extra: Action: Player 2 called 20
2025-10-31 18:48:30,734 - poker_game - INFO - ==================================================
2025-10-31 18:48:30,735 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:48:30,735 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:48:30,735 - poker_game - DEBUG - Active players: [0, 1, 2, 3, 4]
2025-10-31 18:48:30,735 - poker_game - INFO - Advanced from player 2 to player 3 (seat order)
2025-10-31 18:48:30,735 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:48:30,736 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:48:30,736 - poker_game - DEBUG - Active: 5, All-in: 0
2025-10-31 18:48:30,736 - poker_game - DEBUG - Player bets: [10, 20, 20, 0, 0], Current bet: 20, All same: False
2025-10-31 18:48:30,736 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:48:30,736 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:48:30,736 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:30,737 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:48:30,737 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:48:30,737 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:30,737 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:30,738 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:48:30,738 - poker_game - INFO - Community cards: []
2025-10-31 18:48:30,738 - poker_game - INFO -   P0(Agent0): chips=2825, bet=10, status=active
2025-10-31 18:48:30,738 - poker_game - INFO -   P1(Agent1): chips=1585, bet=20, status=active
2025-10-31 18:48:30,738 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:30,738 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:48:30,739 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=active
2025-10-31 18:48:30,739 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:48:30,739 - poker_game - INFO - ==================================================
2025-10-31 18:48:30,840 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "4♥",
    "6♥"
  ],
  "community": [],
  "your_chips": 2020,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 50,
  "to_call": 20,
  "dealer_button": 4,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 2825,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1585,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1885,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1635,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (2020)"
  ],
  "history": [
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 2♦, 7♣, 4♣",
    "Player 4 folded",
    "Turn dealt: 9♦",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: 7♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣",
    "Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20"
  ]
}
2025-10-31 18:48:30,855 - poker_game - DEBUG - Create Session: {'id': '4a35ae82-f1b0-4f2d-a737-02c5a6f422c9', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904110.852274}
2025-10-31 18:48:32,311 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで4♥ 6♥というハンドは、それほど強くありません。相手プレイヤーがすでにベットしており、コールするにはポットサイズに対して不利な状況です。フォールドして、より良いハンドで参加できる機会を待ちます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 81, 'promptTokenCount': 941, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 941}], 'totalTokenCount': 1022}, 'invocationId': 'e-c9f5180d-14f4-4258-82ee-e238c5a859c4', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'k7dLi41L', 'timestamp': 1761904110.867225}]
2025-10-31 18:48:32,312 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:48:32,312 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで4♥ 6♥というハンドは、それほど強くありません。相手プレイヤーがすでにベットしており、コールするにはポットサイズに対して不利な状況です。フォールドして、より良いハンドで参加できる機会を待ちます。"
}
```
2025-10-31 18:48:32,312 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:48:32,313 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで4♥ 6♥というハンドは、それほど強くありません。相手プレイヤーがすでにベットしており、コールするにはポットサイズに対して不利な状況です。フォールドして、より良いハンドで参加できる機会を待ちます。"\n}\n```'
2025-10-31 18:48:32,313 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:48:32,313 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで4♥ 6♥というハンドは、それほど強くありません。相手プレイヤーがすでにベットしており、コールするにはポットサイズに対して不利な状況です。フォールドして、より良いハンドで参加できる機会を待ちます。"\n}'
2025-10-31 18:48:32,313 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで4♥ 6♥というハンドは、それほど強くありません。相手プレイヤーがすでにベットしており、コールするにはポットサイズに対して不利な状況です。フォールドして、より良いハンドで参加できる機会を待ちます。"
}
2025-10-31 18:48:32,314 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップで4♥ 6♥というハンドは、それほど強くありません。相手プレイヤーがすでにベットしており、コールするにはポットサイズに対して不利な状況です。フォールドして、より良いハンドで参加できる機会を待ちます。'}
2025-10-31 18:48:32,314 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 18:48:32,315 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 18:48:32,315 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:48:32,315 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップで4♥ 6♥というハンドは、それほど強くありません。相手プレイヤーがすでにベットしており、コールするにはポットサイズに対して不利な状況です。フォールドして、より良いハンドで参加できる機会を待ちます。
2025-10-31 18:48:32,316 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 18:48:32,316 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:48:32,317 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:32,317 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:48:32,317 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:48:32,318 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:32,318 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:32,319 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:48:32,319 - poker_game - INFO - Community cards: []
2025-10-31 18:48:32,319 - poker_game - INFO -   P0(Agent0): chips=2825, bet=10, status=active
2025-10-31 18:48:32,319 - poker_game - INFO -   P1(Agent1): chips=1585, bet=20, status=active
2025-10-31 18:48:32,320 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:32,320 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:48:32,320 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=active
2025-10-31 18:48:32,321 - poker_game - INFO - ==================================================
2025-10-31 18:48:32,321 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 18:48:32,334 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:48:32,334 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:32,335 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:48:32,335 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:48:32,335 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:32,336 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:32,336 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:48:32,337 - poker_game - INFO - Community cards: []
2025-10-31 18:48:32,337 - poker_game - INFO -   P0(Agent0): chips=2825, bet=10, status=active
2025-10-31 18:48:32,338 - poker_game - INFO -   P1(Agent1): chips=1585, bet=20, status=active
2025-10-31 18:48:32,338 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:32,339 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:32,339 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=active
2025-10-31 18:48:32,339 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 18:48:32,340 - poker_game - INFO - ==================================================
2025-10-31 18:48:32,340 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:48:32,341 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:48:32,341 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:48:32,341 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:48:32,341 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:48:32,342 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:48:32,342 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:48:32,342 - poker_game - DEBUG - Player bets: [10, 20, 20, 0], Current bet: 20, All same: False
2025-10-31 18:48:32,342 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:48:32,343 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:48:32,343 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:32,343 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:48:32,343 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:48:32,344 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:32,344 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:32,345 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:48:32,345 - poker_game - INFO - Community cards: []
2025-10-31 18:48:32,345 - poker_game - INFO -   P0(Agent0): chips=2825, bet=10, status=active
2025-10-31 18:48:32,346 - poker_game - INFO -   P1(Agent1): chips=1585, bet=20, status=active
2025-10-31 18:48:32,346 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:32,346 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:32,346 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=active
2025-10-31 18:48:32,347 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:48:32,347 - poker_game - INFO - ==================================================
2025-10-31 18:48:32,449 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "J♣",
    "K♦"
  ],
  "community": [],
  "your_chips": 1635,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 50,
  "to_call": 20,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 2825,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1585,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1885,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1635)"
  ],
  "history": [
    "Player 1 called 20",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 2♦, 7♣, 4♣",
    "Player 4 folded",
    "Turn dealt: 9♦",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: 7♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣",
    "Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20",
    "Player 3 folded"
  ]
}
2025-10-31 18:48:32,461 - poker_game - DEBUG - Create Session: {'id': '45926562-ad80-44d1-88f6-9500849f8de7', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904112.4582164}
2025-10-31 18:48:36,990 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_OQBO37n3RIqw3ph1nKdMzdws', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1254, 'totalTokenCount': 1271}, 'invocationId': 'e-f1abd57e-f864-498e-91ef-af0af13b01db', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'fxlC66vr', 'timestamp': 1761904112.472484}, {'content': {'parts': [{'functionResponse': {'id': 'call_OQBO37n3RIqw3ph1nKdMzdws', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-f1abd57e-f864-498e-91ef-af0af13b01db', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'gi53tqIk', 'timestamp': 1761904113.312829}, {'content': {'parts': [{'functionCall': {'id': 'call_GXPOTR8GJk1SJVWllWEy0X5m', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1778, 'totalTokenCount': 1798}, 'invocationId': 'e-f1abd57e-f864-498e-91ef-af0af13b01db', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'wOzEeuKp', 'timestamp': 1761904113.326724}, {'content': {'parts': [{'functionResponse': {'id': 'call_GXPOTR8GJk1SJVWllWEy0X5m', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-f1abd57e-f864-498e-91ef-af0af13b01db', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'zM6LlwF4', 'timestamp': 1761904114.66826}, {'content': {'parts': [{'text': '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "手札はJ♣とK♦であり、良いハンドの可能性があるため、コールして参加する価値があります。この段階では相手の動きを観察しながらポットに入るのが適切です。"\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 80, 'promptTokenCount': 1340, 'totalTokenCount': 1420}, 'invocationId': 'e-f1abd57e-f864-498e-91ef-af0af13b01db', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'K2M4T52L', 'timestamp': 1761904114.673787}]
2025-10-31 18:48:36,991 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:48:36,991 - poker_game - DEBUG - {
  "action": "call",
  "amount": 20,
  "reasoning": "手札はJ♣とK♦であり、良いハンドの可能性があるため、コールして参加する価値があります。この段階では相手の動きを観察しながらポットに入るのが適切です。"
}
2025-10-31 18:48:36,991 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:48:36,991 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "手札はJ♣とK♦であり、良いハンドの可能性があるため、コールして参加する価値があります。この段階では相手の動きを観察しながらポットに入るのが適切です。"\n}'
2025-10-31 18:48:36,992 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:48:36,992 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "手札はJ♣とK♦であり、良いハンドの可能性があるため、コールして参加する価値があります。この段階では相手の動きを観察しながらポットに入るのが適切です。"
}
2025-10-31 18:48:36,992 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': '手札はJ♣とK♦であり、良いハンドの可能性があるため、コールして参加する価値があります。この段階では相手の動きを観察しながらポットに入るのが適切です。'}
2025-10-31 18:48:36,992 - poker_game - DEBUG - [Agent4] Extracted values - action: 'call', amount: 20
2025-10-31 18:48:36,992 - poker_game - DEBUG - [Agent4] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1635)']
2025-10-31 18:48:36,992 - poker_game - DEBUG - [Agent4] Call amount extracted from 'call (20)': 20
2025-10-31 18:48:36,993 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:48:36,993 - poker_game - INFO - [Agent4] Successfully parsed decision: call, 20, 手札はJ♣とK♦であり、良いハンドの可能性があるため、コールして参加する価値があります。この段階では相手の動きを観察しながらポットに入るのが適切です。
2025-10-31 18:48:36,993 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'call' with amount 20
2025-10-31 18:48:36,994 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:48:36,994 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:36,994 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:48:36,994 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:48:36,994 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:36,995 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:36,995 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:48:36,995 - poker_game - INFO - Community cards: []
2025-10-31 18:48:36,995 - poker_game - INFO -   P0(Agent0): chips=2825, bet=10, status=active
2025-10-31 18:48:36,995 - poker_game - INFO -   P1(Agent1): chips=1585, bet=20, status=active
2025-10-31 18:48:36,996 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:36,996 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:36,996 - poker_game - INFO -   P4(Agent4): chips=1635, bet=0, status=active
2025-10-31 18:48:36,996 - poker_game - INFO - ==================================================
2025-10-31 18:48:36,996 - poker_game - INFO - ACTION_EXECUTED: Player 4 called 20
2025-10-31 18:48:37,006 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:48:37,006 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:37,006 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:48:37,007 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:48:37,007 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:37,007 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:37,007 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:48:37,008 - poker_game - INFO - Community cards: []
2025-10-31 18:48:37,008 - poker_game - INFO -   P0(Agent0): chips=2825, bet=10, status=active
2025-10-31 18:48:37,009 - poker_game - INFO -   P1(Agent1): chips=1585, bet=20, status=active
2025-10-31 18:48:37,009 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:37,010 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:37,010 - poker_game - INFO -   P4(Agent4): chips=1615, bet=20, status=active
2025-10-31 18:48:37,010 - poker_game - INFO - Extra: Action: Player 4 called 20
2025-10-31 18:48:37,010 - poker_game - INFO - ==================================================
2025-10-31 18:48:37,010 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:48:37,010 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:48:37,011 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:48:37,011 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:48:37,011 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:48:37,011 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:48:37,011 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:48:37,011 - poker_game - DEBUG - Player bets: [10, 20, 20, 20], Current bet: 20, All same: False
2025-10-31 18:48:37,011 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:48:37,011 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:48:37,011 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:37,012 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:48:37,012 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:48:37,012 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:37,012 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:37,012 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:48:37,013 - poker_game - INFO - Community cards: []
2025-10-31 18:48:37,013 - poker_game - INFO -   P0(Agent0): chips=2825, bet=10, status=active
2025-10-31 18:48:37,013 - poker_game - INFO -   P1(Agent1): chips=1585, bet=20, status=active
2025-10-31 18:48:37,014 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:37,014 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:37,014 - poker_game - INFO -   P4(Agent4): chips=1615, bet=20, status=active
2025-10-31 18:48:37,014 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:48:37,014 - poker_game - INFO - ==================================================
2025-10-31 18:48:37,116 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "6♠",
    "A♦"
  ],
  "community": [],
  "your_chips": 2825,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 70,
  "to_call": 10,
  "dealer_button": 4,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1585,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1885,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1615,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (2825)"
  ],
  "history": [
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 2♦, 7♣, 4♣",
    "Player 4 folded",
    "Turn dealt: 9♦",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: 7♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣",
    "Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 called 20"
  ]
}
2025-10-31 18:48:37,143 - poker_game - DEBUG - Create Session: {'id': '06eb9617-9bda-4f64-a3ff-9ea598875bcc', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904117.1387293}
2025-10-31 18:48:39,530 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 70,\n  "reasoning": "プリフロップの状況です。あなたの手札はA♠6♦で、これは強いエースハンドです。ポットは70で、コールには10必要です。対戦相手のベット額は20で、これはミニマムベットよりも少ないです。Aハイ（エースを一番強いカードとする役）は、プリフロップでは強力なハンドであり、レイズをしてポットを大きくし、相手をフォールドさせるか、または有利な状況でフロップに進むのが最善です。レイズ額は、相手のベット額の3倍＋ポット額の合計で、相手にプレッシャーをかけます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 167, 'promptTokenCount': 938, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 938}], 'totalTokenCount': 1105}, 'invocationId': 'e-3ff0c759-475b-4fc2-ae56-467629f3df85', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'BNmdUPJn', 'timestamp': 1761904117.156243}]
2025-10-31 18:48:39,531 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:48:39,531 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 70,
  "reasoning": "プリフロップの状況です。あなたの手札はA♠6♦で、これは強いエースハンドです。ポットは70で、コールには10必要です。対戦相手のベット額は20で、これはミニマムベットよりも少ないです。Aハイ（エースを一番強いカードとする役）は、プリフロップでは強力なハンドであり、レイズをしてポットを大きくし、相手をフォールドさせるか、または有利な状況でフロップに進むのが最善です。レイズ額は、相手のベット額の3倍＋ポット額の合計で、相手にプレッシャーをかけます。"
}
```
2025-10-31 18:48:39,532 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:48:39,532 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 70,\n  "reasoning": "プリフロップの状況です。あなたの手札はA♠6♦で、これは強いエースハンドです。ポットは70で、コールには10必要です。対戦相手のベット額は20で、これはミニマムベットよりも少ないです。Aハイ（エースを一番強いカードとする役）は、プリフロップでは強力なハンドであり、レイズをしてポットを大きくし、相手をフォールドさせるか、または有利な状況でフロップに進むのが最善です。レイズ額は、相手のベット額の3倍＋ポット額の合計で、相手にプレッシャーをかけます。"\n}\n```'
2025-10-31 18:48:39,532 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:48:39,532 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 70,\n  "reasoning": "プリフロップの状況です。あなたの手札はA♠6♦で、これは強いエースハンドです。ポットは70で、コールには10必要です。対戦相手のベット額は20で、これはミニマムベットよりも少ないです。Aハイ（エースを一番強いカードとする役）は、プリフロップでは強力なハンドであり、レイズをしてポットを大きくし、相手をフォールドさせるか、または有利な状況でフロップに進むのが最善です。レイズ額は、相手のベット額の3倍＋ポット額の合計で、相手にプレッシャーをかけます。"\n}'
2025-10-31 18:48:39,533 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "raise",
  "amount": 70,
  "reasoning": "プリフロップの状況です。あなたの手札はA♠6♦で、これは強いエースハンドです。ポットは70で、コールには10必要です。対戦相手のベット額は20で、これはミニマムベットよりも少ないです。Aハイ（エースを一番強いカードとする役）は、プリフロップでは強力なハンドであり、レイズをしてポットを大きくし、相手をフォールドさせるか、または有利な状況でフロップに進むのが最善です。レイズ額は、相手のベット額の3倍＋ポット額の合計で、相手にプレッシャーをかけます。"
}
2025-10-31 18:48:39,533 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'raise', 'amount': 70, 'reasoning': 'プリフロップの状況です。あなたの手札はA♠6♦で、これは強いエースハンドです。ポットは70で、コールには10必要です。対戦相手のベット額は20で、これはミニマムベットよりも少ないです。Aハイ（エースを一番強いカードとする役）は、プリフロップでは強力なハンドであり、レイズをしてポットを大きくし、相手をフォールドさせるか、または有利な状況でフロップに進むのが最善です。レイズ額は、相手のベット額の3倍＋ポット額の合計で、相手にプレッシャーをかけます。'}
2025-10-31 18:48:39,533 - poker_game - DEBUG - [Agent0] Extracted values - action: 'raise', amount: 70
2025-10-31 18:48:39,533 - poker_game - DEBUG - [Agent0] Processing raise action - available actions: ['fold', 'call (10)', 'raise (min 40)', 'all-in (2825)']
2025-10-31 18:48:39,533 - poker_game - DEBUG - [Agent0] Minimum raise amount extracted from 'raise (min 40)': 40
2025-10-31 18:48:39,533 - poker_game - DEBUG - [Agent0] Raise amount 70 is valid (min: 40)
2025-10-31 18:48:39,534 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'raise', 'amount': 70}
2025-10-31 18:48:39,534 - poker_game - INFO - [Agent0] Successfully parsed decision: raise, 70, プリフロップの状況です。あなたの手札はA♠6♦で、これは強いエースハンドです。ポットは70で、コールには10必要です。対戦相手のベット額は20で、これはミニマムベットよりも少ないです。Aハイ（エースを一番強いカードとする役）は、プリフロップでは強力なハンドであり、レイズをしてポットを大きくし、相手をフォールドさせるか、または有利な状況でフロップに進むのが最善です。レイズ額は、相手のベット額の3倍＋ポット額の合計で、相手にプレッシャーをかけます。
2025-10-31 18:48:39,535 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'raise' with amount 70
2025-10-31 18:48:39,535 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:48:39,536 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:39,536 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:48:39,537 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:48:39,538 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:39,538 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:39,538 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:48:39,539 - poker_game - INFO - Community cards: []
2025-10-31 18:48:39,539 - poker_game - INFO -   P0(Agent0): chips=2825, bet=10, status=active
2025-10-31 18:48:39,540 - poker_game - INFO -   P1(Agent1): chips=1585, bet=20, status=active
2025-10-31 18:48:39,540 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:39,540 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:39,541 - poker_game - INFO -   P4(Agent4): chips=1615, bet=20, status=active
2025-10-31 18:48:39,541 - poker_game - INFO - ==================================================
2025-10-31 18:48:39,541 - poker_game - INFO - ACTION_EXECUTED: Player 0 raised to 90
2025-10-31 18:48:39,553 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:48:39,554 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:39,554 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:48:39,555 - poker_game - INFO - Pot: 150, Current bet: 90
2025-10-31 18:48:39,555 - poker_game - INFO - Last raiser: 0
2025-10-31 18:48:39,555 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:39,556 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:48:39,556 - poker_game - INFO - Community cards: []
2025-10-31 18:48:39,557 - poker_game - INFO -   P0(Agent0): chips=2745, bet=90, status=active
2025-10-31 18:48:39,557 - poker_game - INFO -   P1(Agent1): chips=1585, bet=20, status=active
2025-10-31 18:48:39,557 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:39,558 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:39,558 - poker_game - INFO -   P4(Agent4): chips=1615, bet=20, status=active
2025-10-31 18:48:39,558 - poker_game - INFO - Extra: Action: Player 0 raised to 90
2025-10-31 18:48:39,559 - poker_game - INFO - ==================================================
2025-10-31 18:48:39,559 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:48:39,559 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:48:39,560 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:48:39,560 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:48:39,560 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:48:39,561 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:48:39,561 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:48:39,561 - poker_game - DEBUG - Player bets: [90, 20, 20, 20], Current bet: 90, All same: False
2025-10-31 18:48:39,561 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:48:39,562 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:48:39,562 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:39,563 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:48:39,563 - poker_game - INFO - Pot: 150, Current bet: 90
2025-10-31 18:48:39,564 - poker_game - INFO - Last raiser: 0
2025-10-31 18:48:39,564 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:39,564 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:48:39,564 - poker_game - INFO - Community cards: []
2025-10-31 18:48:39,565 - poker_game - INFO -   P0(Agent0): chips=2745, bet=90, status=active
2025-10-31 18:48:39,565 - poker_game - INFO -   P1(Agent1): chips=1585, bet=20, status=active
2025-10-31 18:48:39,565 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:39,566 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:39,566 - poker_game - INFO -   P4(Agent4): chips=1615, bet=20, status=active
2025-10-31 18:48:39,567 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:48:39,567 - poker_game - INFO - ==================================================
2025-10-31 18:48:39,669 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "J♦",
    "J♠"
  ],
  "community": [],
  "your_chips": 1585,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 150,
  "to_call": 70,
  "dealer_button": 4,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 2745,
      "bet": 90,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1885,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1615,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (70)",
    "raise (min 110)",
    "all-in (1585)"
  ],
  "history": [
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 2♦, 7♣, 4♣",
    "Player 4 folded",
    "Turn dealt: 9♦",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: 7♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣",
    "Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 raised to 90"
  ]
}
2025-10-31 18:48:39,680 - poker_game - DEBUG - Create Session: {'id': 'a6ab77d3-d781-48b5-870c-2ddc14a31503', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904119.6781359}
2025-10-31 18:48:41,569 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 160,\n  "reasoning": "プリフロップでJ-J（ジャック・ジャック）という強いハンドを持っています。ポットはすでに大きく、プレイヤー0がレイズ（ベット額を上げる行為）してきており、ポットをさらに大きくするチャンスです。160にレイズすることで、相手にプレッシャーを与え、ポットを大きくし、有利な状況でフロップ（コミュニティカードが開かれること）に進むことを狙います。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 123, 'promptTokenCount': 944, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 944}], 'totalTokenCount': 1067}, 'invocationId': 'e-92820c45-f4ad-4f16-b2f3-ce6cd7e4ba9f', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'yF3kayJI', 'timestamp': 1761904119.695208}]
2025-10-31 18:48:41,570 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:48:41,570 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 160,
  "reasoning": "プリフロップでJ-J（ジャック・ジャック）という強いハンドを持っています。ポットはすでに大きく、プレイヤー0がレイズ（ベット額を上げる行為）してきており、ポットをさらに大きくするチャンスです。160にレイズすることで、相手にプレッシャーを与え、ポットを大きくし、有利な状況でフロップ（コミュニティカードが開かれること）に進むことを狙います。"
}
```
2025-10-31 18:48:41,570 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:48:41,571 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 160,\n  "reasoning": "プリフロップでJ-J（ジャック・ジャック）という強いハンドを持っています。ポットはすでに大きく、プレイヤー0がレイズ（ベット額を上げる行為）してきており、ポットをさらに大きくするチャンスです。160にレイズすることで、相手にプレッシャーを与え、ポットを大きくし、有利な状況でフロップ（コミュニティカードが開かれること）に進むことを狙います。"\n}\n```'
2025-10-31 18:48:41,571 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:48:41,571 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 160,\n  "reasoning": "プリフロップでJ-J（ジャック・ジャック）という強いハンドを持っています。ポットはすでに大きく、プレイヤー0がレイズ（ベット額を上げる行為）してきており、ポットをさらに大きくするチャンスです。160にレイズすることで、相手にプレッシャーを与え、ポットを大きくし、有利な状況でフロップ（コミュニティカードが開かれること）に進むことを狙います。"\n}'
2025-10-31 18:48:41,571 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "raise",
  "amount": 160,
  "reasoning": "プリフロップでJ-J（ジャック・ジャック）という強いハンドを持っています。ポットはすでに大きく、プレイヤー0がレイズ（ベット額を上げる行為）してきており、ポットをさらに大きくするチャンスです。160にレイズすることで、相手にプレッシャーを与え、ポットを大きくし、有利な状況でフロップ（コミュニティカードが開かれること）に進むことを狙います。"
}
2025-10-31 18:48:41,572 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'raise', 'amount': 160, 'reasoning': 'プリフロップでJ-J（ジャック・ジャック）という強いハンドを持っています。ポットはすでに大きく、プレイヤー0がレイズ（ベット額を上げる行為）してきており、ポットをさらに大きくするチャンスです。160にレイズすることで、相手にプレッシャーを与え、ポットを大きくし、有利な状況でフロップ（コミュニティカードが開かれること）に進むことを狙います。'}
2025-10-31 18:48:41,572 - poker_game - DEBUG - [Agent1] Extracted values - action: 'raise', amount: 160
2025-10-31 18:48:41,572 - poker_game - DEBUG - [Agent1] Processing raise action - available actions: ['fold', 'call (70)', 'raise (min 110)', 'all-in (1585)']
2025-10-31 18:48:41,572 - poker_game - DEBUG - [Agent1] Minimum raise amount extracted from 'raise (min 110)': 110
2025-10-31 18:48:41,572 - poker_game - DEBUG - [Agent1] Raise amount 160 is valid (min: 110)
2025-10-31 18:48:41,572 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'raise', 'amount': 160}
2025-10-31 18:48:41,573 - poker_game - INFO - [Agent1] Successfully parsed decision: raise, 160, プリフロップでJ-J（ジャック・ジャック）という強いハンドを持っています。ポットはすでに大きく、プレイヤー0がレイズ（ベット額を上げる行為）してきており、ポットをさらに大きくするチャンスです。160にレイズすることで、相手にプレッシャーを与え、ポットを大きくし、有利な状況でフロップ（コミュニティカードが開かれること）に進むことを狙います。
2025-10-31 18:48:41,574 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'raise' with amount 160
2025-10-31 18:48:41,575 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:48:41,575 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:41,577 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:48:41,577 - poker_game - INFO - Pot: 150, Current bet: 90
2025-10-31 18:48:41,578 - poker_game - INFO - Last raiser: 0
2025-10-31 18:48:41,579 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:41,579 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:48:41,580 - poker_game - INFO - Community cards: []
2025-10-31 18:48:41,580 - poker_game - INFO -   P0(Agent0): chips=2745, bet=90, status=active
2025-10-31 18:48:41,580 - poker_game - INFO -   P1(Agent1): chips=1585, bet=20, status=active
2025-10-31 18:48:41,582 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:41,582 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:41,583 - poker_game - INFO -   P4(Agent4): chips=1615, bet=20, status=active
2025-10-31 18:48:41,583 - poker_game - INFO - ==================================================
2025-10-31 18:48:41,583 - poker_game - INFO - ACTION_EXECUTED: Player 1 raised to 250
2025-10-31 18:48:41,595 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:48:41,596 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:41,596 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:48:41,597 - poker_game - INFO - Pot: 380, Current bet: 250
2025-10-31 18:48:41,597 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:41,598 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:41,598 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:48:41,598 - poker_game - INFO - Community cards: []
2025-10-31 18:48:41,598 - poker_game - INFO -   P0(Agent0): chips=2745, bet=90, status=active
2025-10-31 18:48:41,599 - poker_game - INFO -   P1(Agent1): chips=1355, bet=250, status=active
2025-10-31 18:48:41,599 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:41,599 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:41,600 - poker_game - INFO -   P4(Agent4): chips=1615, bet=20, status=active
2025-10-31 18:48:41,600 - poker_game - INFO - Extra: Action: Player 1 raised to 250
2025-10-31 18:48:41,601 - poker_game - INFO - ==================================================
2025-10-31 18:48:41,601 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:48:41,601 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:48:41,603 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:48:41,604 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:48:41,606 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:48:41,607 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:48:41,608 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:48:41,609 - poker_game - DEBUG - Player bets: [90, 250, 20, 20], Current bet: 250, All same: False
2025-10-31 18:48:41,610 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:48:41,613 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:48:41,613 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:41,614 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:48:41,614 - poker_game - INFO - Pot: 380, Current bet: 250
2025-10-31 18:48:41,614 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:41,615 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:41,615 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:48:41,615 - poker_game - INFO - Community cards: []
2025-10-31 18:48:41,615 - poker_game - INFO -   P0(Agent0): chips=2745, bet=90, status=active
2025-10-31 18:48:41,615 - poker_game - INFO -   P1(Agent1): chips=1355, bet=250, status=active
2025-10-31 18:48:41,615 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:41,615 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:41,616 - poker_game - INFO -   P4(Agent4): chips=1615, bet=20, status=active
2025-10-31 18:48:41,616 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:48:41,616 - poker_game - INFO - ==================================================
2025-10-31 18:48:41,720 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "preflop",
  "your_cards": [
    "A♥",
    "4♦"
  ],
  "community": [],
  "your_chips": 1885,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 380,
  "to_call": 230,
  "dealer_button": 4,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 2745,
      "bet": 90,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1355,
      "bet": 250,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1615,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (230)",
    "raise (min 270)",
    "all-in (1885)"
  ],
  "history": [
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 2♦, 7♣, 4♣",
    "Player 4 folded",
    "Turn dealt: 9♦",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: 7♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣",
    "Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 raised to 90",
    "Player 1 raised to 250"
  ]
}
2025-10-31 18:48:41,747 - poker_game - DEBUG - Create Session: {'id': 'bec993ac-0a7c-4385-863b-b07d874ac9a6', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904121.7439637}
2025-10-31 18:48:43,451 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "PreflopでAハイ（エースハイ）のA♥4♦は、特にレイズがあった場合、非常に弱いハンドです。ポットへの投資額（230）が大きすぎるため、フォールドが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 81, 'promptTokenCount': 952, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 952}], 'totalTokenCount': 1033}, 'invocationId': 'e-66488c1e-4e6d-4f0f-93b5-b32820a80796', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'dmicDQIP', 'timestamp': 1761904121.758654}]
2025-10-31 18:48:43,452 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:48:43,453 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "PreflopでAハイ（エースハイ）のA♥4♦は、特にレイズがあった場合、非常に弱いハンドです。ポットへの投資額（230）が大きすぎるため、フォールドが最善の選択です。"
}
```
2025-10-31 18:48:43,453 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:48:43,453 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "PreflopでAハイ（エースハイ）のA♥4♦は、特にレイズがあった場合、非常に弱いハンドです。ポットへの投資額（230）が大きすぎるため、フォールドが最善の選択です。"\n}\n```'
2025-10-31 18:48:43,454 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:48:43,454 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "PreflopでAハイ（エースハイ）のA♥4♦は、特にレイズがあった場合、非常に弱いハンドです。ポットへの投資額（230）が大きすぎるため、フォールドが最善の選択です。"\n}'
2025-10-31 18:48:43,454 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "PreflopでAハイ（エースハイ）のA♥4♦は、特にレイズがあった場合、非常に弱いハンドです。ポットへの投資額（230）が大きすぎるため、フォールドが最善の選択です。"
}
2025-10-31 18:48:43,454 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'PreflopでAハイ（エースハイ）のA♥4♦は、特にレイズがあった場合、非常に弱いハンドです。ポットへの投資額（230）が大きすぎるため、フォールドが最善の選択です。'}
2025-10-31 18:48:43,455 - poker_game - DEBUG - [Agent2] Extracted values - action: 'fold', amount: 0
2025-10-31 18:48:43,455 - poker_game - DEBUG - [Agent2] Action 'fold' normalized - amount set to 0
2025-10-31 18:48:43,455 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:48:43,455 - poker_game - INFO - [Agent2] Successfully parsed decision: fold, 0, PreflopでAハイ（エースハイ）のA♥4♦は、特にレイズがあった場合、非常に弱いハンドです。ポットへの投資額（230）が大きすぎるため、フォールドが最善の選択です。
2025-10-31 18:48:43,457 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'fold' with amount 0
2025-10-31 18:48:43,458 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:48:43,458 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:43,459 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:48:43,459 - poker_game - INFO - Pot: 380, Current bet: 250
2025-10-31 18:48:43,460 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:43,461 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:43,461 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:48:43,462 - poker_game - INFO - Community cards: []
2025-10-31 18:48:43,463 - poker_game - INFO -   P0(Agent0): chips=2745, bet=90, status=active
2025-10-31 18:48:43,463 - poker_game - INFO -   P1(Agent1): chips=1355, bet=250, status=active
2025-10-31 18:48:43,464 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=active
2025-10-31 18:48:43,464 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:43,465 - poker_game - INFO -   P4(Agent4): chips=1615, bet=20, status=active
2025-10-31 18:48:43,466 - poker_game - INFO - ==================================================
2025-10-31 18:48:43,466 - poker_game - INFO - ACTION_EXECUTED: Player 2 folded
2025-10-31 18:48:43,479 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:48:43,480 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:43,480 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:48:43,480 - poker_game - INFO - Pot: 380, Current bet: 250
2025-10-31 18:48:43,481 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:43,481 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:43,482 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:48:43,482 - poker_game - INFO - Community cards: []
2025-10-31 18:48:43,482 - poker_game - INFO -   P0(Agent0): chips=2745, bet=90, status=active
2025-10-31 18:48:43,483 - poker_game - INFO -   P1(Agent1): chips=1355, bet=250, status=active
2025-10-31 18:48:43,483 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=folded
2025-10-31 18:48:43,484 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:43,484 - poker_game - INFO -   P4(Agent4): chips=1615, bet=20, status=active
2025-10-31 18:48:43,484 - poker_game - INFO - Extra: Action: Player 2 folded
2025-10-31 18:48:43,485 - poker_game - INFO - ==================================================
2025-10-31 18:48:43,485 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:48:43,485 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:48:43,486 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 18:48:43,486 - poker_game - INFO - Advanced from player 2 to player 4 (seat order)
2025-10-31 18:48:43,486 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:48:43,487 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:48:43,487 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:48:43,487 - poker_game - DEBUG - Player bets: [90, 250, 20], Current bet: 250, All same: False
2025-10-31 18:48:43,487 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:48:43,488 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:48:43,488 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:43,488 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:48:43,489 - poker_game - INFO - Pot: 380, Current bet: 250
2025-10-31 18:48:43,489 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:43,490 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:43,491 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:48:43,491 - poker_game - INFO - Community cards: []
2025-10-31 18:48:43,492 - poker_game - INFO -   P0(Agent0): chips=2745, bet=90, status=active
2025-10-31 18:48:43,493 - poker_game - INFO -   P1(Agent1): chips=1355, bet=250, status=active
2025-10-31 18:48:43,493 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=folded
2025-10-31 18:48:43,494 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:43,495 - poker_game - INFO -   P4(Agent4): chips=1615, bet=20, status=active
2025-10-31 18:48:43,495 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:48:43,495 - poker_game - INFO - ==================================================
2025-10-31 18:48:43,597 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "J♣",
    "K♦"
  ],
  "community": [],
  "your_chips": 1615,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 380,
  "to_call": 230,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 2745,
      "bet": 90,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1355,
      "bet": 250,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1885,
      "bet": 20,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (230)",
    "raise (min 270)",
    "all-in (1615)"
  ],
  "history": [
    "Player 0 checked",
    "Flop dealt: 2♦, 7♣, 4♣",
    "Player 4 folded",
    "Turn dealt: 9♦",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: 7♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣",
    "Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 raised to 90",
    "Player 1 raised to 250",
    "Player 2 folded"
  ]
}
2025-10-31 18:48:43,608 - poker_game - DEBUG - Create Session: {'id': '6d9bb022-e5c6-4318-ac29-1639473c654f', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904123.605665}
2025-10-31 18:48:53,738 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:48:57,053 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_zniuEpuVzFl78fAhPcB3j9wC', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1259, 'totalTokenCount': 1276}, 'invocationId': 'e-73c310c3-9b41-4bec-82e8-dabad6f8d12a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'eJmvOStR', 'timestamp': 1761904123.620768}, {'content': {'parts': [{'functionResponse': {'id': 'call_zniuEpuVzFl78fAhPcB3j9wC', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-73c310c3-9b41-4bec-82e8-dabad6f8d12a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'PH6qgoOM', 'timestamp': 1761904124.898751}, {'content': {'parts': [{'functionCall': {'id': 'call_9Ois9YVvQwMLphzSblIVEuhZ', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1783, 'totalTokenCount': 1803}, 'invocationId': 'e-73c310c3-9b41-4bec-82e8-dabad6f8d12a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'oUaP37gi', 'timestamp': 1761904124.900537}, {'content': {'parts': [{'functionResponse': {'id': 'call_9Ois9YVvQwMLphzSblIVEuhZ', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-73c310c3-9b41-4bec-82e8-dabad6f8d12a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': '2qT0ZIbM', 'timestamp': 1761904126.052446}, {'content': {'parts': [{'functionCall': {'id': 'call_oQU06zYWQR2xmPlvr24JWOnf', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1345, 'totalTokenCount': 1362}, 'invocationId': 'e-73c310c3-9b41-4bec-82e8-dabad6f8d12a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '3PoF7kBt', 'timestamp': 1761904126.058844}, {'content': {'parts': [{'functionResponse': {'id': 'call_oQU06zYWQR2xmPlvr24JWOnf', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-73c310c3-9b41-4bec-82e8-dabad6f8d12a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'AU99uPLs', 'timestamp': 1761904126.981007}, {'content': {'parts': [{'functionCall': {'id': 'call_tbvfggIGRT8DnSCyXq2E9JRt', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['J♣', 'K♦'], 'community': [], 'your_chips': 1615, 'your_bet_this_round': 20, 'your_total_bet_this_hand': 20, 'pot': 380, 'to_call': 230, 'dealer_button': 4, 'current_turn': 4, 'players': [{'id': 0, 'chips': 2745, 'bet': 90, 'status': 'active'}, {'id': 1, 'chips': 1355, 'bet': 250, 'status': 'active'}, {'id': 2, 'chips': 1885, 'bet': 20, 'status': 'folded'}, {'id': 3, 'chips': 2020, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'call (230)', 'raise (min 270)', 'all-in (1615)'], 'history': ['Player 0 checked', 'Flop dealt: 2♦, 7♣, 4♣', 'Player 4 folded', 'Turn dealt: 9♦', 'Player 0 checked', 'Player 1 checked', 'River dealt: 7♠', 'Player 0 checked', 'Player 1 checked', 'Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣', 'Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦', 'Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣', 'Player 0 posted small blind 10', 'Player 1 posted big blind 20', 'Player 2 called 20', 'Player 3 folded', 'Player 4 called 20', 'Player 0 raised to 90', 'Player 1 raised to 250', 'Player 2 folded']}, 'call_amount': 230, 'pot_after_call': 610, 'equity': 0.5}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 475, 'promptTokenCount': 1875, 'totalTokenCount': 2350}, 'invocationId': 'e-73c310c3-9b41-4bec-82e8-dabad6f8d12a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'Zdz3ZFIf', 'timestamp': 1761904126.983309}, {'content': {'parts': [{'functionResponse': {'id': 'call_tbvfggIGRT8DnSCyXq2E9JRt', 'name': 'action_decision', 'response': {'action': 'call', 'amount': 230, 'reasoning': 'ポットオッズを満たしており（190.00(ポットに対して50.00%）、コールが妥当と判断。コール額: 230'}}}], 'role': 'user'}, 'invocationId': 'e-73c310c3-9b41-4bec-82e8-dabad6f8d12a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '4PeePZWm', 'timestamp': 1761904139.847548}, {'content': {'parts': [{'text': '{"action":"call","amount":230,"reasoning":"ポットオッズを満たしており（190.00(ポットに対して50.00%）、コールが妥当と判断。コール額: 230"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 54, 'promptTokenCount': 2401, 'totalTokenCount': 2455}, 'invocationId': 'e-73c310c3-9b41-4bec-82e8-dabad6f8d12a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'jvZ1UaQ8', 'timestamp': 1761904139.852387}]
2025-10-31 18:48:57,054 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:48:57,055 - poker_game - DEBUG - {"action":"call","amount":230,"reasoning":"ポットオッズを満たしており（190.00(ポットに対して50.00%）、コールが妥当と判断。コール額: 230"}
2025-10-31 18:48:57,055 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:48:57,056 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"call","amount":230,"reasoning":"ポットオッズを満たしており（190.00(ポットに対して50.00%）、コールが妥当と判断。コール額: 230"}'
2025-10-31 18:48:57,056 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:48:57,056 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"call","amount":230,"reasoning":"ポットオッズを満たしており（190.00(ポットに対して50.00%）、コールが妥当と判断。コール額: 230"}
2025-10-31 18:48:57,056 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'call', 'amount': 230, 'reasoning': 'ポットオッズを満たしており（190.00(ポットに対して50.00%）、コールが妥当と判断。コール額: 230'}
2025-10-31 18:48:57,057 - poker_game - DEBUG - [Agent4] Extracted values - action: 'call', amount: 230
2025-10-31 18:48:57,057 - poker_game - DEBUG - [Agent4] Processing call action - available actions: ['fold', 'call (230)', 'raise (min 270)', 'all-in (1615)']
2025-10-31 18:48:57,057 - poker_game - DEBUG - [Agent4] Call amount extracted from 'call (230)': 230
2025-10-31 18:48:57,057 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'call', 'amount': 230}
2025-10-31 18:48:57,058 - poker_game - INFO - [Agent4] Successfully parsed decision: call, 230, ポットオッズを満たしており（190.00(ポットに対して50.00%）、コールが妥当と判断。コール額: 230
2025-10-31 18:48:57,059 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'call' with amount 230
2025-10-31 18:48:57,059 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:48:57,060 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:57,060 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:48:57,061 - poker_game - INFO - Pot: 380, Current bet: 250
2025-10-31 18:48:57,061 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:57,062 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:57,062 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:48:57,063 - poker_game - INFO - Community cards: []
2025-10-31 18:48:57,063 - poker_game - INFO -   P0(Agent0): chips=2745, bet=90, status=active
2025-10-31 18:48:57,064 - poker_game - INFO -   P1(Agent1): chips=1355, bet=250, status=active
2025-10-31 18:48:57,064 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=folded
2025-10-31 18:48:57,065 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:57,066 - poker_game - INFO -   P4(Agent4): chips=1615, bet=20, status=active
2025-10-31 18:48:57,066 - poker_game - INFO - ==================================================
2025-10-31 18:48:57,067 - poker_game - INFO - ACTION_EXECUTED: Player 4 called 230
2025-10-31 18:48:57,079 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:48:57,080 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:57,080 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:48:57,081 - poker_game - INFO - Pot: 610, Current bet: 250
2025-10-31 18:48:57,081 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:57,082 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:57,082 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:48:57,082 - poker_game - INFO - Community cards: []
2025-10-31 18:48:57,083 - poker_game - INFO -   P0(Agent0): chips=2745, bet=90, status=active
2025-10-31 18:48:57,083 - poker_game - INFO -   P1(Agent1): chips=1355, bet=250, status=active
2025-10-31 18:48:57,084 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=folded
2025-10-31 18:48:57,084 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:57,084 - poker_game - INFO -   P4(Agent4): chips=1385, bet=250, status=active
2025-10-31 18:48:57,085 - poker_game - INFO - Extra: Action: Player 4 called 230
2025-10-31 18:48:57,085 - poker_game - INFO - ==================================================
2025-10-31 18:48:57,086 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:48:57,086 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:48:57,086 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 18:48:57,087 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:48:57,087 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:48:57,087 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:48:57,088 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:48:57,088 - poker_game - DEBUG - Player bets: [90, 250, 250], Current bet: 250, All same: False
2025-10-31 18:48:57,088 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:48:57,088 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:48:57,089 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:57,089 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:48:57,091 - poker_game - INFO - Pot: 610, Current bet: 250
2025-10-31 18:48:57,091 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:57,092 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:57,093 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:48:57,094 - poker_game - INFO - Community cards: []
2025-10-31 18:48:57,094 - poker_game - INFO -   P0(Agent0): chips=2745, bet=90, status=active
2025-10-31 18:48:57,095 - poker_game - INFO -   P1(Agent1): chips=1355, bet=250, status=active
2025-10-31 18:48:57,095 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=folded
2025-10-31 18:48:57,096 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:57,096 - poker_game - INFO -   P4(Agent4): chips=1385, bet=250, status=active
2025-10-31 18:48:57,096 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:48:57,097 - poker_game - INFO - ==================================================
2025-10-31 18:48:57,199 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "6♠",
    "A♦"
  ],
  "community": [],
  "your_chips": 2745,
  "your_bet_this_round": 90,
  "your_total_bet_this_hand": 90,
  "pot": 610,
  "to_call": 160,
  "dealer_button": 4,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1355,
      "bet": 250,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1885,
      "bet": 20,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1385,
      "bet": 250,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (160)",
    "raise (min 270)",
    "all-in (2745)"
  ],
  "history": [
    "Flop dealt: 2♦, 7♣, 4♣",
    "Player 4 folded",
    "Turn dealt: 9♦",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: 7♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣",
    "Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 raised to 90",
    "Player 1 raised to 250",
    "Player 2 folded",
    "Player 4 called 230"
  ]
}
2025-10-31 18:48:57,209 - poker_game - DEBUG - Create Session: {'id': 'fcb99e3c-a6c4-458b-8da0-ebadd9cfee46', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904137.2061467}
2025-10-31 18:48:59,733 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 160,\n  "reasoning": "プリフロップで、私はA♠6♦という強いハンドを持っています。プレイヤー1とプレイヤー4はすでに大きなベットをしており、コールするには160チップが必要です。私のハンドは十分に強いので、このコールは正当化されます。しかし、フロップ以降のコミュニティカード（2♦, 7♣, 4♣、ターン：9♦、リバー：7♠）は、私のエースハイよりも強いペア（7のペア）を形成する可能性を示唆しています。プレイヤー1が7のペアで勝ったことを示す履歴がありますが、これはショーダウン後の情報です。現在の状況では、コールして様子を見るのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 173, 'promptTokenCount': 954, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 954}], 'totalTokenCount': 1127}, 'invocationId': 'e-cbce1fdb-dab4-4480-9192-01cea2393000', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'A07pfLYs', 'timestamp': 1761904137.220871}]
2025-10-31 18:48:59,734 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:48:59,734 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 160,
  "reasoning": "プリフロップで、私はA♠6♦という強いハンドを持っています。プレイヤー1とプレイヤー4はすでに大きなベットをしており、コールするには160チップが必要です。私のハンドは十分に強いので、このコールは正当化されます。しかし、フロップ以降のコミュニティカード（2♦, 7♣, 4♣、ターン：9♦、リバー：7♠）は、私のエースハイよりも強いペア（7のペア）を形成する可能性を示唆しています。プレイヤー1が7のペアで勝ったことを示す履歴がありますが、これはショーダウン後の情報です。現在の状況では、コールして様子を見るのが最善の選択です。"
}
```
2025-10-31 18:48:59,734 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:48:59,734 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 160,\n  "reasoning": "プリフロップで、私はA♠6♦という強いハンドを持っています。プレイヤー1とプレイヤー4はすでに大きなベットをしており、コールするには160チップが必要です。私のハンドは十分に強いので、このコールは正当化されます。しかし、フロップ以降のコミュニティカード（2♦, 7♣, 4♣、ターン：9♦、リバー：7♠）は、私のエースハイよりも強いペア（7のペア）を形成する可能性を示唆しています。プレイヤー1が7のペアで勝ったことを示す履歴がありますが、これはショーダウン後の情報です。現在の状況では、コールして様子を見るのが最善の選択です。"\n}\n```'
2025-10-31 18:48:59,734 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:48:59,735 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 160,\n  "reasoning": "プリフロップで、私はA♠6♦という強いハンドを持っています。プレイヤー1とプレイヤー4はすでに大きなベットをしており、コールするには160チップが必要です。私のハンドは十分に強いので、このコールは正当化されます。しかし、フロップ以降のコミュニティカード（2♦, 7♣, 4♣、ターン：9♦、リバー：7♠）は、私のエースハイよりも強いペア（7のペア）を形成する可能性を示唆しています。プレイヤー1が7のペアで勝ったことを示す履歴がありますが、これはショーダウン後の情報です。現在の状況では、コールして様子を見るのが最善の選択です。"\n}'
2025-10-31 18:48:59,735 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 160,
  "reasoning": "プリフロップで、私はA♠6♦という強いハンドを持っています。プレイヤー1とプレイヤー4はすでに大きなベットをしており、コールするには160チップが必要です。私のハンドは十分に強いので、このコールは正当化されます。しかし、フロップ以降のコミュニティカード（2♦, 7♣, 4♣、ターン：9♦、リバー：7♠）は、私のエースハイよりも強いペア（7のペア）を形成する可能性を示唆しています。プレイヤー1が7のペアで勝ったことを示す履歴がありますが、これはショーダウン後の情報です。現在の状況では、コールして様子を見るのが最善の選択です。"
}
2025-10-31 18:48:59,735 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 160, 'reasoning': 'プリフロップで、私はA♠6♦という強いハンドを持っています。プレイヤー1とプレイヤー4はすでに大きなベットをしており、コールするには160チップが必要です。私のハンドは十分に強いので、このコールは正当化されます。しかし、フロップ以降のコミュニティカード（2♦, 7♣, 4♣、ターン：9♦、リバー：7♠）は、私のエースハイよりも強いペア（7のペア）を形成する可能性を示唆しています。プレイヤー1が7のペアで勝ったことを示す履歴がありますが、これはショーダウン後の情報です。現在の状況では、コールして様子を見るのが最善の選択です。'}
2025-10-31 18:48:59,735 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 160
2025-10-31 18:48:59,735 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (160)', 'raise (min 270)', 'all-in (2745)']
2025-10-31 18:48:59,735 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (160)': 160
2025-10-31 18:48:59,735 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 160}
2025-10-31 18:48:59,735 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 160, プリフロップで、私はA♠6♦という強いハンドを持っています。プレイヤー1とプレイヤー4はすでに大きなベットをしており、コールするには160チップが必要です。私のハンドは十分に強いので、このコールは正当化されます。しかし、フロップ以降のコミュニティカード（2♦, 7♣, 4♣、ターン：9♦、リバー：7♠）は、私のエースハイよりも強いペア（7のペア）を形成する可能性を示唆しています。プレイヤー1が7のペアで勝ったことを示す履歴がありますが、これはショーダウン後の情報です。現在の状況では、コールして様子を見るのが最善の選択です。
2025-10-31 18:48:59,736 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 160
2025-10-31 18:48:59,736 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:48:59,736 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:59,736 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:48:59,737 - poker_game - INFO - Pot: 610, Current bet: 250
2025-10-31 18:48:59,737 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:59,737 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:59,737 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:48:59,737 - poker_game - INFO - Community cards: []
2025-10-31 18:48:59,738 - poker_game - INFO -   P0(Agent0): chips=2745, bet=90, status=active
2025-10-31 18:48:59,738 - poker_game - INFO -   P1(Agent1): chips=1355, bet=250, status=active
2025-10-31 18:48:59,738 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=folded
2025-10-31 18:48:59,738 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:59,738 - poker_game - INFO -   P4(Agent4): chips=1385, bet=250, status=active
2025-10-31 18:48:59,738 - poker_game - INFO - ==================================================
2025-10-31 18:48:59,739 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 160
2025-10-31 18:48:59,765 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:48:59,765 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:59,765 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:48:59,765 - poker_game - INFO - Pot: 770, Current bet: 250
2025-10-31 18:48:59,766 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:59,766 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:59,766 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:48:59,766 - poker_game - INFO - Community cards: []
2025-10-31 18:48:59,766 - poker_game - INFO -   P0(Agent0): chips=2585, bet=250, status=active
2025-10-31 18:48:59,767 - poker_game - INFO -   P1(Agent1): chips=1355, bet=250, status=active
2025-10-31 18:48:59,767 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=folded
2025-10-31 18:48:59,767 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:59,767 - poker_game - INFO -   P4(Agent4): chips=1385, bet=250, status=active
2025-10-31 18:48:59,767 - poker_game - INFO - Extra: Action: Player 0 called 160
2025-10-31 18:48:59,767 - poker_game - INFO - ==================================================
2025-10-31 18:48:59,767 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:48:59,767 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:48:59,768 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 18:48:59,768 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:48:59,768 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:48:59,768 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:48:59,768 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:48:59,768 - poker_game - DEBUG - Player bets: [250, 250, 250], Current bet: 250, All same: True
2025-10-31 18:48:59,768 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:48:59,769 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:48:59,769 - poker_game - INFO - Hand #6, Phase: preflop
2025-10-31 18:48:59,769 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:48:59,769 - poker_game - INFO - Pot: 770, Current bet: 250
2025-10-31 18:48:59,769 - poker_game - INFO - Last raiser: 1
2025-10-31 18:48:59,770 - poker_game - INFO - Betting round complete: True
2025-10-31 18:48:59,770 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:48:59,770 - poker_game - INFO - Community cards: []
2025-10-31 18:48:59,770 - poker_game - INFO -   P0(Agent0): chips=2585, bet=250, status=active
2025-10-31 18:48:59,770 - poker_game - INFO -   P1(Agent1): chips=1355, bet=250, status=active
2025-10-31 18:48:59,770 - poker_game - INFO -   P2(Agent2): chips=1885, bet=20, status=folded
2025-10-31 18:48:59,770 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:59,771 - poker_game - INFO -   P4(Agent4): chips=1385, bet=250, status=active
2025-10-31 18:48:59,771 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:48:59,771 - poker_game - INFO - ==================================================
2025-10-31 18:48:59,872 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:48:59,872 - poker_game - INFO - Betting round complete: True
2025-10-31 18:48:59,873 - poker_game - INFO - Remaining players: 3
2025-10-31 18:48:59,873 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:48:59,873 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:48:59,873 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:48:59,874 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:48:59,883 - poker_game - INFO - Starting new betting round
2025-10-31 18:48:59,884 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:48:59,884 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:48:59,884 - poker_game - DEBUG - Active players for new betting round: [0, 1, 4]
2025-10-31 18:48:59,885 - poker_game - DEBUG - Dealer button: 4
2025-10-31 18:48:59,885 - poker_game - INFO - First actor: Player 0 (by phase rule), was 1
2025-10-31 18:48:59,885 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:48:59,886 - poker_game - INFO - Hand #6, Phase: flop
2025-10-31 18:48:59,886 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:48:59,886 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:48:59,887 - poker_game - INFO - Last raiser: None
2025-10-31 18:48:59,887 - poker_game - INFO - Betting round complete: False
2025-10-31 18:48:59,888 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:48:59,888 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣']
2025-10-31 18:48:59,889 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:48:59,889 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:48:59,890 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:48:59,890 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:48:59,891 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=active
2025-10-31 18:48:59,891 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:48:59,892 - poker_game - INFO - ==================================================
2025-10-31 18:48:59,892 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "flop",
  "your_cards": [
    "6♠",
    "A♦"
  ],
  "community": [
    "Q♠",
    "Q♥",
    "K♣"
  ],
  "your_chips": 2585,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 250,
  "pot": 770,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1355,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1885,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1385,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (2585)"
  ],
  "history": [
    "Turn dealt: 9♦",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: 7♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣",
    "Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 raised to 90",
    "Player 1 raised to 250",
    "Player 2 folded",
    "Player 4 called 230",
    "Player 0 called 160",
    "Flop dealt: Q♠, Q♥, K♣"
  ]
}
2025-10-31 18:48:59,902 - poker_game - DEBUG - Create Session: {'id': '9529f640-893e-4e89-b8d6-e145c3885985', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904139.8997378}
2025-10-31 18:49:02,089 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、あなたの手札A6とコミュニティカードQQSの組み合わせは、クイーンのペア（Q♠, Q♥）で、あなたのAがキッカー（ペア以外の最も強いカード）となります。これは悪くないハンドですが、相手がより強いペア（KKやQQx）を持っている可能性も十分にあります。また、相手がKを持っている可能性もあります。現在はベット額が0（to_callが0）なので、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択し、相手のアクションを見てから判断するのが最善です。これにより、追加のベットをせずに次のカード（ターン）を見ることができます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 174, 'promptTokenCount': 963, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 963}], 'totalTokenCount': 1137}, 'invocationId': 'e-bf223d89-49d9-438c-b10f-d9dda0394de9', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'mFqVUhuV', 'timestamp': 1761904139.912977}]
2025-10-31 18:49:02,090 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:49:02,090 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、あなたの手札A6とコミュニティカードQQSの組み合わせは、クイーンのペア（Q♠, Q♥）で、あなたのAがキッカー（ペア以外の最も強いカード）となります。これは悪くないハンドですが、相手がより強いペア（KKやQQx）を持っている可能性も十分にあります。また、相手がKを持っている可能性もあります。現在はベット額が0（to_callが0）なので、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択し、相手のアクションを見てから判断するのが最善です。これにより、追加のベットをせずに次のカード（ターン）を見ることができます。"
}
```
2025-10-31 18:49:02,090 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:49:02,090 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、あなたの手札A6とコミュニティカードQQSの組み合わせは、クイーンのペア（Q♠, Q♥）で、あなたのAがキッカー（ペア以外の最も強いカード）となります。これは悪くないハンドですが、相手がより強いペア（KKやQQx）を持っている可能性も十分にあります。また、相手がKを持っている可能性もあります。現在はベット額が0（to_callが0）なので、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択し、相手のアクションを見てから判断するのが最善です。これにより、追加のベットをせずに次のカード（ターン）を見ることができます。"\n}\n```'
2025-10-31 18:49:02,090 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:49:02,091 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、あなたの手札A6とコミュニティカードQQSの組み合わせは、クイーンのペア（Q♠, Q♥）で、あなたのAがキッカー（ペア以外の最も強いカード）となります。これは悪くないハンドですが、相手がより強いペア（KKやQQx）を持っている可能性も十分にあります。また、相手がKを持っている可能性もあります。現在はベット額が0（to_callが0）なので、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択し、相手のアクションを見てから判断するのが最善です。これにより、追加のベットをせずに次のカード（ターン）を見ることができます。"\n}'
2025-10-31 18:49:02,091 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、あなたの手札A6とコミュニティカードQQSの組み合わせは、クイーンのペア（Q♠, Q♥）で、あなたのAがキッカー（ペア以外の最も強いカード）となります。これは悪くないハンドですが、相手がより強いペア（KKやQQx）を持っている可能性も十分にあります。また、相手がKを持っている可能性もあります。現在はベット額が0（to_callが0）なので、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択し、相手のアクションを見てから判断するのが最善です。これにより、追加のベットをせずに次のカード（ターン）を見ることができます。"
}
2025-10-31 18:49:02,091 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）では、あなたの手札A6とコミュニティカードQQSの組み合わせは、クイーンのペア（Q♠, Q♥）で、あなたのAがキッカー（ペア以外の最も強いカード）となります。これは悪くないハンドですが、相手がより強いペア（KKやQQx）を持っている可能性も十分にあります。また、相手がKを持っている可能性もあります。現在はベット額が0（to_callが0）なので、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択し、相手のアクションを見てから判断するのが最善です。これにより、追加のベットをせずに次のカード（ターン）を見ることができます。'}
2025-10-31 18:49:02,091 - poker_game - DEBUG - [Agent0] Extracted values - action: 'check', amount: 0
2025-10-31 18:49:02,091 - poker_game - DEBUG - [Agent0] Action 'check' normalized - amount set to 0
2025-10-31 18:49:02,091 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:49:02,091 - poker_game - INFO - [Agent0] Successfully parsed decision: check, 0, フロップ（最初の3枚のコミュニティカード）では、あなたの手札A6とコミュニティカードQQSの組み合わせは、クイーンのペア（Q♠, Q♥）で、あなたのAがキッカー（ペア以外の最も強いカード）となります。これは悪くないハンドですが、相手がより強いペア（KKやQQx）を持っている可能性も十分にあります。また、相手がKを持っている可能性もあります。現在はベット額が0（to_callが0）なので、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択し、相手のアクションを見てから判断するのが最善です。これにより、追加のベットをせずに次のカード（ターン）を見ることができます。
2025-10-31 18:49:02,092 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'check' with amount 0
2025-10-31 18:49:02,092 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:02,092 - poker_game - INFO - Hand #6, Phase: flop
2025-10-31 18:49:02,093 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:49:02,093 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:02,093 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:02,093 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:02,093 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:49:02,094 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣']
2025-10-31 18:49:02,094 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:02,094 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:02,094 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:02,094 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:02,094 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=active
2025-10-31 18:49:02,095 - poker_game - INFO - ==================================================
2025-10-31 18:49:02,095 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 18:49:02,107 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:49:02,108 - poker_game - INFO - Hand #6, Phase: flop
2025-10-31 18:49:02,108 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:49:02,108 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:02,108 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:02,109 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:02,109 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:49:02,109 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣']
2025-10-31 18:49:02,109 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:02,109 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:02,109 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:02,109 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:02,110 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=active
2025-10-31 18:49:02,110 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 18:49:02,110 - poker_game - INFO - ==================================================
2025-10-31 18:49:02,110 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:49:02,110 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:49:02,110 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 18:49:02,110 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:49:02,111 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:49:02,111 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:49:02,111 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:49:02,111 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 18:49:02,111 - poker_game - DEBUG - Active player indices: [0, 1, 4]
2025-10-31 18:49:02,111 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:49:02,111 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:49:02,111 - poker_game - DEBUG - First actor index: 0
2025-10-31 18:49:02,111 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 0
2025-10-31 18:49:02,112 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:49:02,112 - poker_game - INFO - Hand #6, Phase: flop
2025-10-31 18:49:02,112 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:49:02,112 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:02,112 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:02,112 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:02,113 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:49:02,113 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣']
2025-10-31 18:49:02,113 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:02,113 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:02,114 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:02,114 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:02,114 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=active
2025-10-31 18:49:02,114 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:49:02,114 - poker_game - INFO - ==================================================
2025-10-31 18:49:02,217 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "flop",
  "your_cards": [
    "J♦",
    "J♠"
  ],
  "community": [
    "Q♠",
    "Q♥",
    "K♣"
  ],
  "your_chips": 1355,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 250,
  "pot": 770,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 2585,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1885,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1385,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1355)"
  ],
  "history": [
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: 7♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣",
    "Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 raised to 90",
    "Player 1 raised to 250",
    "Player 2 folded",
    "Player 4 called 230",
    "Player 0 called 160",
    "Flop dealt: Q♠, Q♥, K♣",
    "Player 0 checked"
  ]
}
2025-10-31 18:49:02,229 - poker_game - DEBUG - Create Session: {'id': 'a079baf6-5fe3-4ddc-bbe1-439c3e0f34a1', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904142.227482}
2025-10-31 18:49:04,340 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（Flop）のボードは Q♠ Q♥ K♣ で、あなたの手札は J♦ J♠ です。これは、2ペア（JとQ）ができている強力なハンドです。しかし、ボードにはK（キング）もあり、相手がKを持っている可能性も考慮しなければなりません。直前のプレイヤー（Player 0）がチェックしたので、ポットは770で、あなたはコール（Call）で0をベットする必要がある状態です。これは非常に有利な状況なので、チェック（Check）をして、相手のアクションを見てから次の行動を決定するのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 154, 'promptTokenCount': 961, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 961}], 'totalTokenCount': 1115}, 'invocationId': 'e-c0af5091-1ded-4994-94e1-ce743491a84c', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'XHQuu6Oa', 'timestamp': 1761904142.238549}]
2025-10-31 18:49:04,340 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:49:04,341 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "フロップ（Flop）のボードは Q♠ Q♥ K♣ で、あなたの手札は J♦ J♠ です。これは、2ペア（JとQ）ができている強力なハンドです。しかし、ボードにはK（キング）もあり、相手がKを持っている可能性も考慮しなければなりません。直前のプレイヤー（Player 0）がチェックしたので、ポットは770で、あなたはコール（Call）で0をベットする必要がある状態です。これは非常に有利な状況なので、チェック（Check）をして、相手のアクションを見てから次の行動を決定するのが最善です。"
}
```
2025-10-31 18:49:04,341 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:49:04,341 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（Flop）のボードは Q♠ Q♥ K♣ で、あなたの手札は J♦ J♠ です。これは、2ペア（JとQ）ができている強力なハンドです。しかし、ボードにはK（キング）もあり、相手がKを持っている可能性も考慮しなければなりません。直前のプレイヤー（Player 0）がチェックしたので、ポットは770で、あなたはコール（Call）で0をベットする必要がある状態です。これは非常に有利な状況なので、チェック（Check）をして、相手のアクションを見てから次の行動を決定するのが最善です。"\n}\n```'
2025-10-31 18:49:04,341 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:49:04,341 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（Flop）のボードは Q♠ Q♥ K♣ で、あなたの手札は J♦ J♠ です。これは、2ペア（JとQ）ができている強力なハンドです。しかし、ボードにはK（キング）もあり、相手がKを持っている可能性も考慮しなければなりません。直前のプレイヤー（Player 0）がチェックしたので、ポットは770で、あなたはコール（Call）で0をベットする必要がある状態です。これは非常に有利な状況なので、チェック（Check）をして、相手のアクションを見てから次の行動を決定するのが最善です。"\n}'
2025-10-31 18:49:04,341 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "フロップ（Flop）のボードは Q♠ Q♥ K♣ で、あなたの手札は J♦ J♠ です。これは、2ペア（JとQ）ができている強力なハンドです。しかし、ボードにはK（キング）もあり、相手がKを持っている可能性も考慮しなければなりません。直前のプレイヤー（Player 0）がチェックしたので、ポットは770で、あなたはコール（Call）で0をベットする必要がある状態です。これは非常に有利な状況なので、チェック（Check）をして、相手のアクションを見てから次の行動を決定するのが最善です。"
}
2025-10-31 18:49:04,343 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'フロップ（Flop）のボードは Q♠ Q♥ K♣ で、あなたの手札は J♦ J♠ です。これは、2ペア（JとQ）ができている強力なハンドです。しかし、ボードにはK（キング）もあり、相手がKを持っている可能性も考慮しなければなりません。直前のプレイヤー（Player 0）がチェックしたので、ポットは770で、あなたはコール（Call）で0をベットする必要がある状態です。これは非常に有利な状況なので、チェック（Check）をして、相手のアクションを見てから次の行動を決定するのが最善です。'}
2025-10-31 18:49:04,344 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 0
2025-10-31 18:49:04,344 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1355)']
2025-10-31 18:49:04,344 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:49:04,344 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 0, フロップ（Flop）のボードは Q♠ Q♥ K♣ で、あなたの手札は J♦ J♠ です。これは、2ペア（JとQ）ができている強力なハンドです。しかし、ボードにはK（キング）もあり、相手がKを持っている可能性も考慮しなければなりません。直前のプレイヤー（Player 0）がチェックしたので、ポットは770で、あなたはコール（Call）で0をベットする必要がある状態です。これは非常に有利な状況なので、チェック（Check）をして、相手のアクションを見てから次の行動を決定するのが最善です。
2025-10-31 18:49:04,344 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 0
2025-10-31 18:49:04,345 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:04,345 - poker_game - INFO - Hand #6, Phase: flop
2025-10-31 18:49:04,345 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:49:04,345 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:04,345 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:04,345 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:04,345 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:49:04,346 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣']
2025-10-31 18:49:04,346 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:04,346 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:04,346 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:04,346 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:04,346 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=active
2025-10-31 18:49:04,347 - poker_game - INFO - ==================================================
2025-10-31 18:49:04,347 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:49:04,357 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:49:04,358 - poker_game - INFO - Hand #6, Phase: flop
2025-10-31 18:49:04,358 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:49:04,358 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:04,358 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:04,359 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:04,359 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:49:04,359 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣']
2025-10-31 18:49:04,359 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:04,360 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:04,360 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:04,360 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:04,360 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=active
2025-10-31 18:49:04,360 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:49:04,360 - poker_game - INFO - ==================================================
2025-10-31 18:49:04,361 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:49:04,361 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:49:04,361 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 18:49:04,361 - poker_game - INFO - Advanced from player 1 to player 4 (seat order)
2025-10-31 18:49:04,361 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:49:04,362 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:49:04,362 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:49:04,362 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 18:49:04,362 - poker_game - DEBUG - Active player indices: [0, 1, 4]
2025-10-31 18:49:04,362 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:49:04,362 - poker_game - DEBUG - Current player index: 4
2025-10-31 18:49:04,362 - poker_game - DEBUG - First actor index: 0
2025-10-31 18:49:04,362 - poker_game - DEBUG - Betting continues: Current player 4 != first actor 0
2025-10-31 18:49:04,363 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:49:04,363 - poker_game - INFO - Hand #6, Phase: flop
2025-10-31 18:49:04,363 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:49:04,363 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:04,363 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:04,364 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:04,364 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:49:04,364 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣']
2025-10-31 18:49:04,364 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:04,364 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:04,365 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:04,365 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:04,365 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=active
2025-10-31 18:49:04,365 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:49:04,365 - poker_game - INFO - ==================================================
2025-10-31 18:49:04,467 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "flop",
  "your_cards": [
    "J♣",
    "K♦"
  ],
  "community": [
    "Q♠",
    "Q♥",
    "K♣"
  ],
  "your_chips": 1385,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 250,
  "pot": 770,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 2585,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1355,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1885,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1385)"
  ],
  "history": [
    "Player 1 checked",
    "River dealt: 7♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣",
    "Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 raised to 90",
    "Player 1 raised to 250",
    "Player 2 folded",
    "Player 4 called 230",
    "Player 0 called 160",
    "Flop dealt: Q♠, Q♥, K♣",
    "Player 0 checked",
    "Player 1 checked"
  ]
}
2025-10-31 18:49:04,521 - poker_game - DEBUG - Create Session: {'id': 'e3afe5ce-108c-48f4-a512-829528cab487', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904144.518147}
2025-10-31 18:49:08,268 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_grjjhcIIIEEjqdysEC1Ie16H', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1274, 'totalTokenCount': 1291}, 'invocationId': 'e-225cd526-492d-4945-a1c2-b6853aea7f87', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '18FJhclW', 'timestamp': 1761904144.530668}, {'content': {'parts': [{'functionResponse': {'id': 'call_grjjhcIIIEEjqdysEC1Ie16H', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-225cd526-492d-4945-a1c2-b6853aea7f87', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'Wph49vSl', 'timestamp': 1761904145.362209}, {'content': {'parts': [{'functionCall': {'id': 'call_A5VXxPK8ppbPAtFTQaLMcnFF', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1798, 'totalTokenCount': 1818}, 'invocationId': 'e-225cd526-492d-4945-a1c2-b6853aea7f87', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'KtfY0qvU', 'timestamp': 1761904145.3637}, {'content': {'parts': [{'functionResponse': {'id': 'call_A5VXxPK8ppbPAtFTQaLMcnFF', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-225cd526-492d-4945-a1c2-b6853aea7f87', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'u6usg8Jr', 'timestamp': 1761904146.474881}, {'content': {'parts': [{'text': '{\n  "action": "raise",\n  "amount": 1405,\n  "reasoning": "With a strong hand of two pairs (Kings and Queens), raising to put pressure on opponents and increase the pot is a strategic choice."\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 51, 'promptTokenCount': 1360, 'totalTokenCount': 1411}, 'invocationId': 'e-225cd526-492d-4945-a1c2-b6853aea7f87', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '296AslIr', 'timestamp': 1761904146.477007}]
2025-10-31 18:49:08,269 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:49:08,269 - poker_game - DEBUG - {
  "action": "raise",
  "amount": 1405,
  "reasoning": "With a strong hand of two pairs (Kings and Queens), raising to put pressure on opponents and increase the pot is a strategic choice."
}
2025-10-31 18:49:08,269 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:49:08,269 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "raise",\n  "amount": 1405,\n  "reasoning": "With a strong hand of two pairs (Kings and Queens), raising to put pressure on opponents and increase the pot is a strategic choice."\n}'
2025-10-31 18:49:08,269 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:49:08,270 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "raise",
  "amount": 1405,
  "reasoning": "With a strong hand of two pairs (Kings and Queens), raising to put pressure on opponents and increase the pot is a strategic choice."
}
2025-10-31 18:49:08,270 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'raise', 'amount': 1405, 'reasoning': 'With a strong hand of two pairs (Kings and Queens), raising to put pressure on opponents and increase the pot is a strategic choice.'}
2025-10-31 18:49:08,270 - poker_game - DEBUG - [Agent4] Extracted values - action: 'raise', amount: 1405
2025-10-31 18:49:08,270 - poker_game - DEBUG - [Agent4] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1385)']
2025-10-31 18:49:08,270 - poker_game - DEBUG - [Agent4] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:49:08,270 - poker_game - DEBUG - [Agent4] Raise amount 1405 is valid (min: 20)
2025-10-31 18:49:08,270 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'raise', 'amount': 1405}
2025-10-31 18:49:08,270 - poker_game - INFO - [Agent4] Successfully parsed decision: raise, 1405, With a strong hand of two pairs (Kings and Queens), raising to put pressure on opponents and increase the pot is a strategic choice.
2025-10-31 18:49:08,271 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'raise' with amount 1405
2025-10-31 18:49:08,272 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:08,272 - poker_game - INFO - Hand #6, Phase: flop
2025-10-31 18:49:08,272 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:49:08,272 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:08,272 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:08,272 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:08,273 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:49:08,273 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣']
2025-10-31 18:49:08,273 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:08,273 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:08,273 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:08,273 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:08,274 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=active
2025-10-31 18:49:08,274 - poker_game - INFO - ==================================================
2025-10-31 18:49:08,274 - poker_game - WARNING - Player 4 cannot raise - needs 1405, has 1385
2025-10-31 18:49:08,274 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'fold' with amount 0
2025-10-31 18:49:08,274 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:08,274 - poker_game - INFO - Hand #6, Phase: flop
2025-10-31 18:49:08,275 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:49:08,275 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:08,275 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:08,275 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:08,275 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:49:08,276 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣']
2025-10-31 18:49:08,276 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:08,276 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:08,276 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:08,276 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:08,276 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=active
2025-10-31 18:49:08,276 - poker_game - INFO - ==================================================
2025-10-31 18:49:08,276 - poker_game - INFO - ACTION_EXECUTED: Player 4 folded
2025-10-31 18:49:08,295 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:49:08,295 - poker_game - INFO - Hand #6, Phase: flop
2025-10-31 18:49:08,295 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:49:08,296 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:08,296 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:08,296 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:08,296 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:08,296 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣']
2025-10-31 18:49:08,296 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:08,297 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:08,297 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:08,297 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:08,297 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:08,297 - poker_game - INFO - Extra: Action: Player 4 folded
2025-10-31 18:49:08,297 - poker_game - INFO - ==================================================
2025-10-31 18:49:08,297 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:49:08,298 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:49:08,298 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:49:08,298 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:49:08,298 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:49:08,298 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:49:08,298 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:49:08,298 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:49:08,298 - poker_game - DEBUG - Active player indices: [0, 1]
2025-10-31 18:49:08,299 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:49:08,299 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:49:08,299 - poker_game - DEBUG - First actor index: 0
2025-10-31 18:49:08,299 - poker_game - INFO - Betting complete: Back to first actor 0 (all players have acted)
2025-10-31 18:49:08,299 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:49:08,299 - poker_game - INFO - Hand #6, Phase: flop
2025-10-31 18:49:08,299 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:49:08,299 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:08,299 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:08,300 - poker_game - INFO - Betting round complete: True
2025-10-31 18:49:08,300 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:08,300 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣']
2025-10-31 18:49:08,300 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:08,300 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:08,300 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:08,300 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:08,301 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:08,301 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:49:08,301 - poker_game - INFO - ==================================================
2025-10-31 18:49:08,402 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:49:08,402 - poker_game - INFO - Betting round complete: True
2025-10-31 18:49:08,402 - poker_game - INFO - Remaining players: 2
2025-10-31 18:49:08,403 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:49:08,403 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:49:08,403 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 18:49:08,413 - poker_game - INFO - Starting new betting round
2025-10-31 18:49:08,414 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:49:08,414 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:49:08,414 - poker_game - DEBUG - Active players for new betting round: [0, 1]
2025-10-31 18:49:08,414 - poker_game - DEBUG - Dealer button: 4
2025-10-31 18:49:08,415 - poker_game - INFO - First actor: Player 0 (by phase rule), was 0
2025-10-31 18:49:08,415 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:49:08,415 - poker_game - INFO - Hand #6, Phase: turn
2025-10-31 18:49:08,416 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:49:08,416 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:08,416 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:08,416 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:08,416 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:08,417 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣']
2025-10-31 18:49:08,417 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:08,417 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:08,417 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:08,418 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:08,418 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:08,418 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 18:49:08,418 - poker_game - INFO - ==================================================
2025-10-31 18:49:08,421 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "turn",
  "your_cards": [
    "6♠",
    "A♦"
  ],
  "community": [
    "Q♠",
    "Q♥",
    "K♣",
    "10♣"
  ],
  "your_chips": 2585,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 250,
  "pot": 770,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1355,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1885,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1385,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (2585)"
  ],
  "history": [
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣",
    "Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 raised to 90",
    "Player 1 raised to 250",
    "Player 2 folded",
    "Player 4 called 230",
    "Player 0 called 160",
    "Flop dealt: Q♠, Q♥, K♣",
    "Player 0 checked",
    "Player 1 checked",
    "Player 4 folded",
    "Turn dealt: 10♣"
  ]
}
2025-10-31 18:49:08,432 - poker_game - DEBUG - Create Session: {'id': '7a29bcee-b6b1-40fe-b383-b36122687e47', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904148.428047}
2025-10-31 18:49:10,313 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたはQとKのペアを持っており、これは比較的強いハンドですが、コミュニティカードにはQのセット（トリップス）やKのペア、あるいはストレートの可能性もあります。対戦相手は2人ともチェックしているので、リスクを冒さずに次のカード（リバー）を見るのが最善です。もし対戦相手がベットしてきたら、その強さに応じて判断を再考します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 121, 'promptTokenCount': 969, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 969}], 'totalTokenCount': 1090}, 'invocationId': 'e-13366c19-c2cc-4b66-adf8-79dd3e41bed5', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '34EM4NnK', 'timestamp': 1761904148.44081}]
2025-10-31 18:49:10,313 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:49:10,313 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "現在の状況では、あなたはQとKのペアを持っており、これは比較的強いハンドですが、コミュニティカードにはQのセット（トリップス）やKのペア、あるいはストレートの可能性もあります。対戦相手は2人ともチェックしているので、リスクを冒さずに次のカード（リバー）を見るのが最善です。もし対戦相手がベットしてきたら、その強さに応じて判断を再考します。"
}
```
2025-10-31 18:49:10,313 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:49:10,313 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたはQとKのペアを持っており、これは比較的強いハンドですが、コミュニティカードにはQのセット（トリップス）やKのペア、あるいはストレートの可能性もあります。対戦相手は2人ともチェックしているので、リスクを冒さずに次のカード（リバー）を見るのが最善です。もし対戦相手がベットしてきたら、その強さに応じて判断を再考します。"\n}\n```'
2025-10-31 18:49:10,313 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:49:10,314 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたはQとKのペアを持っており、これは比較的強いハンドですが、コミュニティカードにはQのセット（トリップス）やKのペア、あるいはストレートの可能性もあります。対戦相手は2人ともチェックしているので、リスクを冒さずに次のカード（リバー）を見るのが最善です。もし対戦相手がベットしてきたら、その強さに応じて判断を再考します。"\n}'
2025-10-31 18:49:10,314 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "現在の状況では、あなたはQとKのペアを持っており、これは比較的強いハンドですが、コミュニティカードにはQのセット（トリップス）やKのペア、あるいはストレートの可能性もあります。対戦相手は2人ともチェックしているので、リスクを冒さずに次のカード（リバー）を見るのが最善です。もし対戦相手がベットしてきたら、その強さに応じて判断を再考します。"
}
2025-10-31 18:49:10,314 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '現在の状況では、あなたはQとKのペアを持っており、これは比較的強いハンドですが、コミュニティカードにはQのセット（トリップス）やKのペア、あるいはストレートの可能性もあります。対戦相手は2人ともチェックしているので、リスクを冒さずに次のカード（リバー）を見るのが最善です。もし対戦相手がベットしてきたら、その強さに応じて判断を再考します。'}
2025-10-31 18:49:10,314 - poker_game - DEBUG - [Agent0] Extracted values - action: 'check', amount: 0
2025-10-31 18:49:10,314 - poker_game - DEBUG - [Agent0] Action 'check' normalized - amount set to 0
2025-10-31 18:49:10,314 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:49:10,314 - poker_game - INFO - [Agent0] Successfully parsed decision: check, 0, 現在の状況では、あなたはQとKのペアを持っており、これは比較的強いハンドですが、コミュニティカードにはQのセット（トリップス）やKのペア、あるいはストレートの可能性もあります。対戦相手は2人ともチェックしているので、リスクを冒さずに次のカード（リバー）を見るのが最善です。もし対戦相手がベットしてきたら、その強さに応じて判断を再考します。
2025-10-31 18:49:10,315 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'check' with amount 0
2025-10-31 18:49:10,315 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:10,315 - poker_game - INFO - Hand #6, Phase: turn
2025-10-31 18:49:10,315 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:49:10,316 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:10,316 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:10,316 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:10,316 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:10,316 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣']
2025-10-31 18:49:10,316 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:10,317 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:10,317 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:10,317 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:10,317 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:10,317 - poker_game - INFO - ==================================================
2025-10-31 18:49:10,318 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 18:49:10,337 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:49:10,337 - poker_game - INFO - Hand #6, Phase: turn
2025-10-31 18:49:10,338 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:49:10,338 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:10,339 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:10,339 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:10,339 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:10,340 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣']
2025-10-31 18:49:10,340 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:10,340 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:10,340 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:10,340 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:10,340 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:10,341 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 18:49:10,341 - poker_game - INFO - ==================================================
2025-10-31 18:49:10,341 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:49:10,341 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:49:10,341 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:49:10,341 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:49:10,342 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:49:10,342 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:49:10,342 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:49:10,342 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:49:10,342 - poker_game - DEBUG - Active player indices: [0, 1]
2025-10-31 18:49:10,342 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:49:10,342 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:49:10,342 - poker_game - DEBUG - First actor index: 0
2025-10-31 18:49:10,342 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 0
2025-10-31 18:49:10,343 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:49:10,343 - poker_game - INFO - Hand #6, Phase: turn
2025-10-31 18:49:10,343 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:49:10,343 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:10,343 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:10,343 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:10,344 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:10,344 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣']
2025-10-31 18:49:10,344 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:10,344 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:10,344 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:10,344 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:10,344 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:10,345 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:49:10,345 - poker_game - INFO - ==================================================
2025-10-31 18:49:10,447 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "turn",
  "your_cards": [
    "J♦",
    "J♠"
  ],
  "community": [
    "Q♠",
    "Q♥",
    "K♣",
    "10♣"
  ],
  "your_chips": 1355,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 250,
  "pot": 770,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 2585,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1885,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1385,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1355)"
  ],
  "history": [
    "Player 1 checked",
    "Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣",
    "Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 raised to 90",
    "Player 1 raised to 250",
    "Player 2 folded",
    "Player 4 called 230",
    "Player 0 called 160",
    "Flop dealt: Q♠, Q♥, K♣",
    "Player 0 checked",
    "Player 1 checked",
    "Player 4 folded",
    "Turn dealt: 10♣",
    "Player 0 checked"
  ]
}
2025-10-31 18:49:10,457 - poker_game - DEBUG - Create Session: {'id': '0e86b5dd-d8e6-4e16-885d-046cff45ebdf', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904150.4553783}
2025-10-31 18:49:12,346 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 770,\n  "reasoning": "あなたはターンでJJ（ジャック・ジャック）を持っています。コミュニティカードにはQ♠, Q♥, K♣, 10♣があり、これでクイーンのペア（QQ）が完成しました。あなたはツーペア（J, Q）を持っていますが、相手（プレイヤー0）はキングのペア（KK）を持っている可能性があります。ポットが770で、コール額が0なので、チェックをすると相手に無料カードを見せてしまうため、レイズでポットを大きくし、有利な状況を作ることを狙います。レイズ額は、相手にプレッシャーをかけつつ、ポットサイズに見合った770に設定します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 171, 'promptTokenCount': 969, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 969}], 'totalTokenCount': 1140}, 'invocationId': 'e-19961ab5-721e-46c6-8189-6e7aebf408e7', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '2UdQu1vS', 'timestamp': 1761904150.467991}]
2025-10-31 18:49:12,346 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:49:12,346 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 770,
  "reasoning": "あなたはターンでJJ（ジャック・ジャック）を持っています。コミュニティカードにはQ♠, Q♥, K♣, 10♣があり、これでクイーンのペア（QQ）が完成しました。あなたはツーペア（J, Q）を持っていますが、相手（プレイヤー0）はキングのペア（KK）を持っている可能性があります。ポットが770で、コール額が0なので、チェックをすると相手に無料カードを見せてしまうため、レイズでポットを大きくし、有利な状況を作ることを狙います。レイズ額は、相手にプレッシャーをかけつつ、ポットサイズに見合った770に設定します。"
}
```
2025-10-31 18:49:12,347 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:49:12,347 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 770,\n  "reasoning": "あなたはターンでJJ（ジャック・ジャック）を持っています。コミュニティカードにはQ♠, Q♥, K♣, 10♣があり、これでクイーンのペア（QQ）が完成しました。あなたはツーペア（J, Q）を持っていますが、相手（プレイヤー0）はキングのペア（KK）を持っている可能性があります。ポットが770で、コール額が0なので、チェックをすると相手に無料カードを見せてしまうため、レイズでポットを大きくし、有利な状況を作ることを狙います。レイズ額は、相手にプレッシャーをかけつつ、ポットサイズに見合った770に設定します。"\n}\n```'
2025-10-31 18:49:12,347 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:49:12,347 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 770,\n  "reasoning": "あなたはターンでJJ（ジャック・ジャック）を持っています。コミュニティカードにはQ♠, Q♥, K♣, 10♣があり、これでクイーンのペア（QQ）が完成しました。あなたはツーペア（J, Q）を持っていますが、相手（プレイヤー0）はキングのペア（KK）を持っている可能性があります。ポットが770で、コール額が0なので、チェックをすると相手に無料カードを見せてしまうため、レイズでポットを大きくし、有利な状況を作ることを狙います。レイズ額は、相手にプレッシャーをかけつつ、ポットサイズに見合った770に設定します。"\n}'
2025-10-31 18:49:12,347 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "raise",
  "amount": 770,
  "reasoning": "あなたはターンでJJ（ジャック・ジャック）を持っています。コミュニティカードにはQ♠, Q♥, K♣, 10♣があり、これでクイーンのペア（QQ）が完成しました。あなたはツーペア（J, Q）を持っていますが、相手（プレイヤー0）はキングのペア（KK）を持っている可能性があります。ポットが770で、コール額が0なので、チェックをすると相手に無料カードを見せてしまうため、レイズでポットを大きくし、有利な状況を作ることを狙います。レイズ額は、相手にプレッシャーをかけつつ、ポットサイズに見合った770に設定します。"
}
2025-10-31 18:49:12,347 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'raise', 'amount': 770, 'reasoning': 'あなたはターンでJJ（ジャック・ジャック）を持っています。コミュニティカードにはQ♠, Q♥, K♣, 10♣があり、これでクイーンのペア（QQ）が完成しました。あなたはツーペア（J, Q）を持っていますが、相手（プレイヤー0）はキングのペア（KK）を持っている可能性があります。ポットが770で、コール額が0なので、チェックをすると相手に無料カードを見せてしまうため、レイズでポットを大きくし、有利な状況を作ることを狙います。レイズ額は、相手にプレッシャーをかけつつ、ポットサイズに見合った770に設定します。'}
2025-10-31 18:49:12,347 - poker_game - DEBUG - [Agent1] Extracted values - action: 'raise', amount: 770
2025-10-31 18:49:12,347 - poker_game - DEBUG - [Agent1] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1355)']
2025-10-31 18:49:12,347 - poker_game - DEBUG - [Agent1] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:49:12,348 - poker_game - DEBUG - [Agent1] Raise amount 770 is valid (min: 20)
2025-10-31 18:49:12,348 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'raise', 'amount': 770}
2025-10-31 18:49:12,348 - poker_game - INFO - [Agent1] Successfully parsed decision: raise, 770, あなたはターンでJJ（ジャック・ジャック）を持っています。コミュニティカードにはQ♠, Q♥, K♣, 10♣があり、これでクイーンのペア（QQ）が完成しました。あなたはツーペア（J, Q）を持っていますが、相手（プレイヤー0）はキングのペア（KK）を持っている可能性があります。ポットが770で、コール額が0なので、チェックをすると相手に無料カードを見せてしまうため、レイズでポットを大きくし、有利な状況を作ることを狙います。レイズ額は、相手にプレッシャーをかけつつ、ポットサイズに見合った770に設定します。
2025-10-31 18:49:12,348 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'raise' with amount 770
2025-10-31 18:49:12,349 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:12,349 - poker_game - INFO - Hand #6, Phase: turn
2025-10-31 18:49:12,349 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:49:12,349 - poker_game - INFO - Pot: 770, Current bet: 0
2025-10-31 18:49:12,349 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:12,350 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:12,350 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:12,350 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣']
2025-10-31 18:49:12,350 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:12,350 - poker_game - INFO -   P1(Agent1): chips=1355, bet=0, status=active
2025-10-31 18:49:12,350 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:12,350 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:12,351 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:12,351 - poker_game - INFO - ==================================================
2025-10-31 18:49:12,351 - poker_game - INFO - ACTION_EXECUTED: Player 1 raised to 770
2025-10-31 18:49:12,366 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:49:12,367 - poker_game - INFO - Hand #6, Phase: turn
2025-10-31 18:49:12,368 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:49:12,368 - poker_game - INFO - Pot: 1540, Current bet: 770
2025-10-31 18:49:12,368 - poker_game - INFO - Last raiser: 1
2025-10-31 18:49:12,368 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:12,368 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:12,368 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣']
2025-10-31 18:49:12,369 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:12,369 - poker_game - INFO -   P1(Agent1): chips=585, bet=770, status=active
2025-10-31 18:49:12,369 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:12,369 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:12,370 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:12,370 - poker_game - INFO - Extra: Action: Player 1 raised to 770
2025-10-31 18:49:12,371 - poker_game - INFO - ==================================================
2025-10-31 18:49:12,371 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:49:12,372 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:49:12,372 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:49:12,373 - poker_game - INFO - Advanced from player 1 to player 0 (seat order)
2025-10-31 18:49:12,373 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:49:12,374 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:49:12,374 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:49:12,374 - poker_game - DEBUG - Player bets: [0, 770], Current bet: 770, All same: False
2025-10-31 18:49:12,374 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:49:12,374 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:49:12,375 - poker_game - INFO - Hand #6, Phase: turn
2025-10-31 18:49:12,375 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:49:12,376 - poker_game - INFO - Pot: 1540, Current bet: 770
2025-10-31 18:49:12,376 - poker_game - INFO - Last raiser: 1
2025-10-31 18:49:12,377 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:12,377 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:12,377 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣']
2025-10-31 18:49:12,377 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:12,377 - poker_game - INFO -   P1(Agent1): chips=585, bet=770, status=active
2025-10-31 18:49:12,377 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:12,377 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:12,377 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:12,377 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:49:12,377 - poker_game - INFO - ==================================================
2025-10-31 18:49:12,478 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "turn",
  "your_cards": [
    "6♠",
    "A♦"
  ],
  "community": [
    "Q♠",
    "Q♥",
    "K♣",
    "10♣"
  ],
  "your_chips": 2585,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 250,
  "pot": 1540,
  "to_call": 770,
  "dealer_button": 4,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 585,
      "bet": 770,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1885,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1385,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (770)",
    "raise (min 790)",
    "all-in (2585)"
  ],
  "history": [
    "Showdown: Player 0 hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣ cards=A♣, 6♣",
    "Showdown: Player 1 hand=One Pair: 7s - J♥, 10♦, 9♦, 7♣, 7♠ cards=J♥, 10♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 raised to 90",
    "Player 1 raised to 250",
    "Player 2 folded",
    "Player 4 called 230",
    "Player 0 called 160",
    "Flop dealt: Q♠, Q♥, K♣",
    "Player 0 checked",
    "Player 1 checked",
    "Player 4 folded",
    "Turn dealt: 10♣",
    "Player 0 checked",
    "Player 1 raised to 770"
  ]
}
2025-10-31 18:49:12,493 - poker_game - DEBUG - Create Session: {'id': 'e74c8327-b22f-4f39-8fd4-31e18031c735', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904152.4904332}
2025-10-31 18:49:14,707 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 770,\n  "reasoning": "現在のボードは「Q♠, Q♥, K♣, 10♣」で、私は「6♠, A♦」を持っています。これはペアを作っていませんが、オープンエンドストレートドロー（Q-K-10-?-?で、Jや9があればストレート）とバックドアフラッシュドロー（スペードが2枚ある）の可能性があります。相手（プレイヤー1）はリバーで770をベットしてきました。ポットは1540なので、コールするためのオッズは良好です（ポットオッズは約1.99:1）。相手のスタックが585と少ないことも考慮すると、コールしてリバーを見て、相手のスタックをすべて獲得するチャンスがあります。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 187, 'promptTokenCount': 983, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 983}], 'totalTokenCount': 1170}, 'invocationId': 'e-e2297ea8-7a55-4ea6-ac4c-35f5b5d6408a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'LQO9STVC', 'timestamp': 1761904152.501693}]
2025-10-31 18:49:14,708 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:49:14,708 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 770,
  "reasoning": "現在のボードは「Q♠, Q♥, K♣, 10♣」で、私は「6♠, A♦」を持っています。これはペアを作っていませんが、オープンエンドストレートドロー（Q-K-10-?-?で、Jや9があればストレート）とバックドアフラッシュドロー（スペードが2枚ある）の可能性があります。相手（プレイヤー1）はリバーで770をベットしてきました。ポットは1540なので、コールするためのオッズは良好です（ポットオッズは約1.99:1）。相手のスタックが585と少ないことも考慮すると、コールしてリバーを見て、相手のスタックをすべて獲得するチャンスがあります。"
}
```
2025-10-31 18:49:14,708 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:49:14,708 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 770,\n  "reasoning": "現在のボードは「Q♠, Q♥, K♣, 10♣」で、私は「6♠, A♦」を持っています。これはペアを作っていませんが、オープンエンドストレートドロー（Q-K-10-?-?で、Jや9があればストレート）とバックドアフラッシュドロー（スペードが2枚ある）の可能性があります。相手（プレイヤー1）はリバーで770をベットしてきました。ポットは1540なので、コールするためのオッズは良好です（ポットオッズは約1.99:1）。相手のスタックが585と少ないことも考慮すると、コールしてリバーを見て、相手のスタックをすべて獲得するチャンスがあります。"\n}\n```'
2025-10-31 18:49:14,709 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:49:14,709 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 770,\n  "reasoning": "現在のボードは「Q♠, Q♥, K♣, 10♣」で、私は「6♠, A♦」を持っています。これはペアを作っていませんが、オープンエンドストレートドロー（Q-K-10-?-?で、Jや9があればストレート）とバックドアフラッシュドロー（スペードが2枚ある）の可能性があります。相手（プレイヤー1）はリバーで770をベットしてきました。ポットは1540なので、コールするためのオッズは良好です（ポットオッズは約1.99:1）。相手のスタックが585と少ないことも考慮すると、コールしてリバーを見て、相手のスタックをすべて獲得するチャンスがあります。"\n}'
2025-10-31 18:49:14,709 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 770,
  "reasoning": "現在のボードは「Q♠, Q♥, K♣, 10♣」で、私は「6♠, A♦」を持っています。これはペアを作っていませんが、オープンエンドストレートドロー（Q-K-10-?-?で、Jや9があればストレート）とバックドアフラッシュドロー（スペードが2枚ある）の可能性があります。相手（プレイヤー1）はリバーで770をベットしてきました。ポットは1540なので、コールするためのオッズは良好です（ポットオッズは約1.99:1）。相手のスタックが585と少ないことも考慮すると、コールしてリバーを見て、相手のスタックをすべて獲得するチャンスがあります。"
}
2025-10-31 18:49:14,710 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 770, 'reasoning': '現在のボードは「Q♠, Q♥, K♣, 10♣」で、私は「6♠, A♦」を持っています。これはペアを作っていませんが、オープンエンドストレートドロー（Q-K-10-?-?で、Jや9があればストレート）とバックドアフラッシュドロー（スペードが2枚ある）の可能性があります。相手（プレイヤー1）はリバーで770をベットしてきました。ポットは1540なので、コールするためのオッズは良好です（ポットオッズは約1.99:1）。相手のスタックが585と少ないことも考慮すると、コールしてリバーを見て、相手のスタックをすべて獲得するチャンスがあります。'}
2025-10-31 18:49:14,710 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 770
2025-10-31 18:49:14,710 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (770)', 'raise (min 790)', 'all-in (2585)']
2025-10-31 18:49:14,710 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (770)': 770
2025-10-31 18:49:14,710 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 770}
2025-10-31 18:49:14,711 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 770, 現在のボードは「Q♠, Q♥, K♣, 10♣」で、私は「6♠, A♦」を持っています。これはペアを作っていませんが、オープンエンドストレートドロー（Q-K-10-?-?で、Jや9があればストレート）とバックドアフラッシュドロー（スペードが2枚ある）の可能性があります。相手（プレイヤー1）はリバーで770をベットしてきました。ポットは1540なので、コールするためのオッズは良好です（ポットオッズは約1.99:1）。相手のスタックが585と少ないことも考慮すると、コールしてリバーを見て、相手のスタックをすべて獲得するチャンスがあります。
2025-10-31 18:49:14,713 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 770
2025-10-31 18:49:14,713 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:14,713 - poker_game - INFO - Hand #6, Phase: turn
2025-10-31 18:49:14,714 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:49:14,715 - poker_game - INFO - Pot: 1540, Current bet: 770
2025-10-31 18:49:14,715 - poker_game - INFO - Last raiser: 1
2025-10-31 18:49:14,715 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:14,715 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:14,715 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣']
2025-10-31 18:49:14,715 - poker_game - INFO -   P0(Agent0): chips=2585, bet=0, status=active
2025-10-31 18:49:14,716 - poker_game - INFO -   P1(Agent1): chips=585, bet=770, status=active
2025-10-31 18:49:14,716 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:14,716 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:14,716 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:14,716 - poker_game - INFO - ==================================================
2025-10-31 18:49:14,717 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 770
2025-10-31 18:49:14,727 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:49:14,728 - poker_game - INFO - Hand #6, Phase: turn
2025-10-31 18:49:14,728 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:49:14,728 - poker_game - INFO - Pot: 2310, Current bet: 770
2025-10-31 18:49:14,728 - poker_game - INFO - Last raiser: 1
2025-10-31 18:49:14,729 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:14,729 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:14,729 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣']
2025-10-31 18:49:14,729 - poker_game - INFO -   P0(Agent0): chips=1815, bet=770, status=active
2025-10-31 18:49:14,729 - poker_game - INFO -   P1(Agent1): chips=585, bet=770, status=active
2025-10-31 18:49:14,729 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:14,729 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:14,730 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:14,730 - poker_game - INFO - Extra: Action: Player 0 called 770
2025-10-31 18:49:14,730 - poker_game - INFO - ==================================================
2025-10-31 18:49:14,730 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:49:14,730 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:49:14,730 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:49:14,731 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:49:14,731 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:49:14,731 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:49:14,731 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:49:14,731 - poker_game - DEBUG - Player bets: [770, 770], Current bet: 770, All same: True
2025-10-31 18:49:14,731 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:49:14,731 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:49:14,732 - poker_game - INFO - Hand #6, Phase: turn
2025-10-31 18:49:14,732 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:49:14,733 - poker_game - INFO - Pot: 2310, Current bet: 770
2025-10-31 18:49:14,733 - poker_game - INFO - Last raiser: 1
2025-10-31 18:49:14,733 - poker_game - INFO - Betting round complete: True
2025-10-31 18:49:14,733 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:14,733 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣']
2025-10-31 18:49:14,733 - poker_game - INFO -   P0(Agent0): chips=1815, bet=770, status=active
2025-10-31 18:49:14,734 - poker_game - INFO -   P1(Agent1): chips=585, bet=770, status=active
2025-10-31 18:49:14,734 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:14,734 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:14,734 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:14,734 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:49:14,734 - poker_game - INFO - ==================================================
2025-10-31 18:49:14,835 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 18:49:14,836 - poker_game - INFO - Betting round complete: True
2025-10-31 18:49:14,836 - poker_game - INFO - Remaining players: 2
2025-10-31 18:49:14,836 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:49:14,837 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:49:14,837 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 18:49:14,848 - poker_game - INFO - Starting new betting round
2025-10-31 18:49:14,849 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:49:14,849 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:49:14,850 - poker_game - DEBUG - Active players for new betting round: [0, 1]
2025-10-31 18:49:14,850 - poker_game - DEBUG - Dealer button: 4
2025-10-31 18:49:14,850 - poker_game - INFO - First actor: Player 0 (by phase rule), was 1
2025-10-31 18:49:14,852 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:49:14,853 - poker_game - INFO - Hand #6, Phase: river
2025-10-31 18:49:14,853 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:49:14,854 - poker_game - INFO - Pot: 2310, Current bet: 0
2025-10-31 18:49:14,854 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:14,855 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:14,855 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:14,856 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣', '10♠']
2025-10-31 18:49:14,856 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:14,856 - poker_game - INFO -   P1(Agent1): chips=585, bet=0, status=active
2025-10-31 18:49:14,857 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:14,857 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:14,857 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:14,858 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 18:49:14,858 - poker_game - INFO - ==================================================
2025-10-31 18:49:14,859 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "river",
  "your_cards": [
    "6♠",
    "A♦"
  ],
  "community": [
    "Q♠",
    "Q♥",
    "K♣",
    "10♣",
    "10♠"
  ],
  "your_chips": 1815,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 1020,
  "pot": 2310,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 585,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1885,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1385,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1815)"
  ],
  "history": [
    "Side pot layer 0: amount=60, winners=0 best_hand=One Pair: 7s - A♣, 9♦, 7♣, 7♠, 6♣",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 raised to 90",
    "Player 1 raised to 250",
    "Player 2 folded",
    "Player 4 called 230",
    "Player 0 called 160",
    "Flop dealt: Q♠, Q♥, K♣",
    "Player 0 checked",
    "Player 1 checked",
    "Player 4 folded",
    "Turn dealt: 10♣",
    "Player 0 checked",
    "Player 1 raised to 770",
    "Player 0 called 770",
    "River dealt: 10♠"
  ]
}
2025-10-31 18:49:14,874 - poker_game - DEBUG - Create Session: {'id': 'c7dd0cc9-b9d7-4645-9572-8eff76c16921', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904154.8709111}
2025-10-31 18:49:17,309 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のカードが配られた後）で、あなたの手札はAハイ（エースが一番強いカード）であり、コミュニティカードにはQが2枚と10が2枚あるため、ツーペア（同じ数字のカードが2組）ができています。しかし、相手（Player 1）がターンの時点でレイズ（ベット額を上げる行為）をしており、リバーでのアクションはまだ不明です。現状では、相手があなたより強い役を持っている可能性も考慮し、まずはチェック（ベットせずに自分の番をパスする行為）をして、相手のアクションを確認するのが最善です。もし相手がチェックをしたら、あなたのツーペア（Qと10のツーペア）は比較的強い役なので、ショーダウン（手札を見せ合って勝者を決めること）に進むことができます。もし相手がベットしてきた場合は、相手のベット額とあなたのチップ量、そして相手のプレイスタイルを考慮して、コール（相手のベット額と同じ額を支払ってゲームを続ける行為）するかフォールド（ゲームから降りること）するかを判断します。今回は相手のアクションを見るためにチェックを選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 271, 'promptTokenCount': 913, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 913}], 'totalTokenCount': 1184}, 'invocationId': 'e-75c144b1-79fd-4ebc-9fff-8f30f618d8cf', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '2WbJmxKi', 'timestamp': 1761904154.883337}]
2025-10-31 18:49:17,309 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:49:17,310 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最後のカードが配られた後）で、あなたの手札はAハイ（エースが一番強いカード）であり、コミュニティカードにはQが2枚と10が2枚あるため、ツーペア（同じ数字のカードが2組）ができています。しかし、相手（Player 1）がターンの時点でレイズ（ベット額を上げる行為）をしており、リバーでのアクションはまだ不明です。現状では、相手があなたより強い役を持っている可能性も考慮し、まずはチェック（ベットせずに自分の番をパスする行為）をして、相手のアクションを確認するのが最善です。もし相手がチェックをしたら、あなたのツーペア（Qと10のツーペア）は比較的強い役なので、ショーダウン（手札を見せ合って勝者を決めること）に進むことができます。もし相手がベットしてきた場合は、相手のベット額とあなたのチップ量、そして相手のプレイスタイルを考慮して、コール（相手のベット額と同じ額を支払ってゲームを続ける行為）するかフォールド（ゲームから降りること）するかを判断します。今回は相手のアクションを見るためにチェックを選択します。"
}
```
2025-10-31 18:49:17,311 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:49:17,312 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のカードが配られた後）で、あなたの手札はAハイ（エースが一番強いカード）であり、コミュニティカードにはQが2枚と10が2枚あるため、ツーペア（同じ数字のカードが2組）ができています。しかし、相手（Player 1）がターンの時点でレイズ（ベット額を上げる行為）をしており、リバーでのアクションはまだ不明です。現状では、相手があなたより強い役を持っている可能性も考慮し、まずはチェック（ベットせずに自分の番をパスする行為）をして、相手のアクションを確認するのが最善です。もし相手がチェックをしたら、あなたのツーペア（Qと10のツーペア）は比較的強い役なので、ショーダウン（手札を見せ合って勝者を決めること）に進むことができます。もし相手がベットしてきた場合は、相手のベット額とあなたのチップ量、そして相手のプレイスタイルを考慮して、コール（相手のベット額と同じ額を支払ってゲームを続ける行為）するかフォールド（ゲームから降りること）するかを判断します。今回は相手のアクションを見るためにチェックを選択します。"\n}\n```'
2025-10-31 18:49:17,312 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:49:17,313 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のカードが配られた後）で、あなたの手札はAハイ（エースが一番強いカード）であり、コミュニティカードにはQが2枚と10が2枚あるため、ツーペア（同じ数字のカードが2組）ができています。しかし、相手（Player 1）がターンの時点でレイズ（ベット額を上げる行為）をしており、リバーでのアクションはまだ不明です。現状では、相手があなたより強い役を持っている可能性も考慮し、まずはチェック（ベットせずに自分の番をパスする行為）をして、相手のアクションを確認するのが最善です。もし相手がチェックをしたら、あなたのツーペア（Qと10のツーペア）は比較的強い役なので、ショーダウン（手札を見せ合って勝者を決めること）に進むことができます。もし相手がベットしてきた場合は、相手のベット額とあなたのチップ量、そして相手のプレイスタイルを考慮して、コール（相手のベット額と同じ額を支払ってゲームを続ける行為）するかフォールド（ゲームから降りること）するかを判断します。今回は相手のアクションを見るためにチェックを選択します。"\n}'
2025-10-31 18:49:17,313 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最後のカードが配られた後）で、あなたの手札はAハイ（エースが一番強いカード）であり、コミュニティカードにはQが2枚と10が2枚あるため、ツーペア（同じ数字のカードが2組）ができています。しかし、相手（Player 1）がターンの時点でレイズ（ベット額を上げる行為）をしており、リバーでのアクションはまだ不明です。現状では、相手があなたより強い役を持っている可能性も考慮し、まずはチェック（ベットせずに自分の番をパスする行為）をして、相手のアクションを確認するのが最善です。もし相手がチェックをしたら、あなたのツーペア（Qと10のツーペア）は比較的強い役なので、ショーダウン（手札を見せ合って勝者を決めること）に進むことができます。もし相手がベットしてきた場合は、相手のベット額とあなたのチップ量、そして相手のプレイスタイルを考慮して、コール（相手のベット額と同じ額を支払ってゲームを続ける行為）するかフォールド（ゲームから降りること）するかを判断します。今回は相手のアクションを見るためにチェックを選択します。"
}
2025-10-31 18:49:17,313 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最後のカードが配られた後）で、あなたの手札はAハイ（エースが一番強いカード）であり、コミュニティカードにはQが2枚と10が2枚あるため、ツーペア（同じ数字のカードが2組）ができています。しかし、相手（Player 1）がターンの時点でレイズ（ベット額を上げる行為）をしており、リバーでのアクションはまだ不明です。現状では、相手があなたより強い役を持っている可能性も考慮し、まずはチェック（ベットせずに自分の番をパスする行為）をして、相手のアクションを確認するのが最善です。もし相手がチェックをしたら、あなたのツーペア（Qと10のツーペア）は比較的強い役なので、ショーダウン（手札を見せ合って勝者を決めること）に進むことができます。もし相手がベットしてきた場合は、相手のベット額とあなたのチップ量、そして相手のプレイスタイルを考慮して、コール（相手のベット額と同じ額を支払ってゲームを続ける行為）するかフォールド（ゲームから降りること）するかを判断します。今回は相手のアクションを見るためにチェックを選択します。'}
2025-10-31 18:49:17,314 - poker_game - DEBUG - [Agent0] Extracted values - action: 'check', amount: 0
2025-10-31 18:49:17,314 - poker_game - DEBUG - [Agent0] Action 'check' normalized - amount set to 0
2025-10-31 18:49:17,314 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:49:17,314 - poker_game - INFO - [Agent0] Successfully parsed decision: check, 0, リバー（最後のカードが配られた後）で、あなたの手札はAハイ（エースが一番強いカード）であり、コミュニティカードにはQが2枚と10が2枚あるため、ツーペア（同じ数字のカードが2組）ができています。しかし、相手（Player 1）がターンの時点でレイズ（ベット額を上げる行為）をしており、リバーでのアクションはまだ不明です。現状では、相手があなたより強い役を持っている可能性も考慮し、まずはチェック（ベットせずに自分の番をパスする行為）をして、相手のアクションを確認するのが最善です。もし相手がチェックをしたら、あなたのツーペア（Qと10のツーペア）は比較的強い役なので、ショーダウン（手札を見せ合って勝者を決めること）に進むことができます。もし相手がベットしてきた場合は、相手のベット額とあなたのチップ量、そして相手のプレイスタイルを考慮して、コール（相手のベット額と同じ額を支払ってゲームを続ける行為）するかフォールド（ゲームから降りること）するかを判断します。今回は相手のアクションを見るためにチェックを選択します。
2025-10-31 18:49:17,315 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'check' with amount 0
2025-10-31 18:49:17,317 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:17,318 - poker_game - INFO - Hand #6, Phase: river
2025-10-31 18:49:17,318 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:49:17,319 - poker_game - INFO - Pot: 2310, Current bet: 0
2025-10-31 18:49:17,319 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:17,320 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:17,321 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:17,322 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣', '10♠']
2025-10-31 18:49:17,322 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:17,323 - poker_game - INFO -   P1(Agent1): chips=585, bet=0, status=active
2025-10-31 18:49:17,323 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:17,323 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:17,324 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:17,324 - poker_game - INFO - ==================================================
2025-10-31 18:49:17,325 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 18:49:17,342 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:49:17,343 - poker_game - INFO - Hand #6, Phase: river
2025-10-31 18:49:17,343 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:49:17,345 - poker_game - INFO - Pot: 2310, Current bet: 0
2025-10-31 18:49:17,345 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:17,345 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:17,346 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:17,346 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣', '10♠']
2025-10-31 18:49:17,347 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:17,347 - poker_game - INFO -   P1(Agent1): chips=585, bet=0, status=active
2025-10-31 18:49:17,348 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:17,348 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:17,348 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:17,349 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 18:49:17,350 - poker_game - INFO - ==================================================
2025-10-31 18:49:17,350 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:49:17,350 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:49:17,351 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:49:17,351 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:49:17,351 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:49:17,352 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:49:17,352 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:49:17,352 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:49:17,352 - poker_game - DEBUG - Active player indices: [0, 1]
2025-10-31 18:49:17,352 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:49:17,352 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:49:17,352 - poker_game - DEBUG - First actor index: 0
2025-10-31 18:49:17,353 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 0
2025-10-31 18:49:17,353 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:49:17,353 - poker_game - INFO - Hand #6, Phase: river
2025-10-31 18:49:17,354 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:49:17,354 - poker_game - INFO - Pot: 2310, Current bet: 0
2025-10-31 18:49:17,355 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:17,355 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:17,356 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:17,356 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣', '10♠']
2025-10-31 18:49:17,357 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:17,357 - poker_game - INFO -   P1(Agent1): chips=585, bet=0, status=active
2025-10-31 18:49:17,358 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:17,359 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:17,359 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:17,360 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:49:17,360 - poker_game - INFO - ==================================================
2025-10-31 18:49:17,461 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "river",
  "your_cards": [
    "J♦",
    "J♠"
  ],
  "community": [
    "Q♠",
    "Q♥",
    "K♣",
    "10♣",
    "10♠"
  ],
  "your_chips": 585,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 1020,
  "pot": 2310,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1815,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1885,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2020,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1385,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (585)"
  ],
  "history": [
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 raised to 90",
    "Player 1 raised to 250",
    "Player 2 folded",
    "Player 4 called 230",
    "Player 0 called 160",
    "Flop dealt: Q♠, Q♥, K♣",
    "Player 0 checked",
    "Player 1 checked",
    "Player 4 folded",
    "Turn dealt: 10♣",
    "Player 0 checked",
    "Player 1 raised to 770",
    "Player 0 called 770",
    "River dealt: 10♠",
    "Player 0 checked"
  ]
}
2025-10-31 18:49:17,553 - poker_game - DEBUG - Create Session: {'id': '03facd68-43ca-4cba-aeee-f8629a68a4a4', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904157.5507922}
2025-10-31 18:49:20,873 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札はJ♦J♠です。コミュニティカードはQ♠Q♥K♣10♣10♠です。これは、コミュニティカードにQと10が2枚ずつあるため、ツーペア（Qと10）が完成しています。しかし、あなたの手札のJは、これらのペアには貢献しません。相手（Player 0）は、ターン（4番目のカードが出た後）で770をベットし、あなたはコールしました。リバーで相手はチェックしました。これは、相手がこれ以上ベットしたくない、またはベットを bluff（ブラフ）でなく、より強いハンドを持っていることを示唆しています。あなたのツーペアは、相手がQまたは10のフルハウス（例: QQQ1010）や、より高いツーペア（もしあれば）を持っている場合、負けている可能性が高いです。しかし、相手がチェックしたため、あなたがベットしてもフォールドされる可能性は低いです。相手のハンドがそこまで強くない場合、あなたは勝つことができます。現状、相手のベット額が0であり、コールに必要な金額も0であるため、チェック（check）して相手のハンドを確認するのが最善です。これにより、相手のハンドを推測し、次のアクションを決定できます。もし相手がベットしてきた場合は、あなたのハンドの強さとポットオッズ（ポットのサイズに対するベット額の割合）を考慮して、コールするかフォールドするかを判断します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 343, 'promptTokenCount': 873, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 873}], 'totalTokenCount': 1216}, 'invocationId': 'e-e2fe0e2f-6083-46b5-a285-8795392004a5', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '8C3Udn3s', 'timestamp': 1761904157.568343}]
2025-10-31 18:49:20,873 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:49:20,874 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "リバー（最終ラウンド）で、あなたの手札はJ♦J♠です。コミュニティカードはQ♠Q♥K♣10♣10♠です。これは、コミュニティカードにQと10が2枚ずつあるため、ツーペア（Qと10）が完成しています。しかし、あなたの手札のJは、これらのペアには貢献しません。相手（Player 0）は、ターン（4番目のカードが出た後）で770をベットし、あなたはコールしました。リバーで相手はチェックしました。これは、相手がこれ以上ベットしたくない、またはベットを bluff（ブラフ）でなく、より強いハンドを持っていることを示唆しています。あなたのツーペアは、相手がQまたは10のフルハウス（例: QQQ1010）や、より高いツーペア（もしあれば）を持っている場合、負けている可能性が高いです。しかし、相手がチェックしたため、あなたがベットしてもフォールドされる可能性は低いです。相手のハンドがそこまで強くない場合、あなたは勝つことができます。現状、相手のベット額が0であり、コールに必要な金額も0であるため、チェック（check）して相手のハンドを確認するのが最善です。これにより、相手のハンドを推測し、次のアクションを決定できます。もし相手がベットしてきた場合は、あなたのハンドの強さとポットオッズ（ポットのサイズに対するベット額の割合）を考慮して、コールするかフォールドするかを判断します。"
}
```
2025-10-31 18:49:20,874 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:49:20,874 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札はJ♦J♠です。コミュニティカードはQ♠Q♥K♣10♣10♠です。これは、コミュニティカードにQと10が2枚ずつあるため、ツーペア（Qと10）が完成しています。しかし、あなたの手札のJは、これらのペアには貢献しません。相手（Player 0）は、ターン（4番目のカードが出た後）で770をベットし、あなたはコールしました。リバーで相手はチェックしました。これは、相手がこれ以上ベットしたくない、またはベットを bluff（ブラフ）でなく、より強いハンドを持っていることを示唆しています。あなたのツーペアは、相手がQまたは10のフルハウス（例: QQQ1010）や、より高いツーペア（もしあれば）を持っている場合、負けている可能性が高いです。しかし、相手がチェックしたため、あなたがベットしてもフォールドされる可能性は低いです。相手のハンドがそこまで強くない場合、あなたは勝つことができます。現状、相手のベット額が0であり、コールに必要な金額も0であるため、チェック（check）して相手のハンドを確認するのが最善です。これにより、相手のハンドを推測し、次のアクションを決定できます。もし相手がベットしてきた場合は、あなたのハンドの強さとポットオッズ（ポットのサイズに対するベット額の割合）を考慮して、コールするかフォールドするかを判断します。"\n}\n```'
2025-10-31 18:49:20,875 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:49:20,875 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札はJ♦J♠です。コミュニティカードはQ♠Q♥K♣10♣10♠です。これは、コミュニティカードにQと10が2枚ずつあるため、ツーペア（Qと10）が完成しています。しかし、あなたの手札のJは、これらのペアには貢献しません。相手（Player 0）は、ターン（4番目のカードが出た後）で770をベットし、あなたはコールしました。リバーで相手はチェックしました。これは、相手がこれ以上ベットしたくない、またはベットを bluff（ブラフ）でなく、より強いハンドを持っていることを示唆しています。あなたのツーペアは、相手がQまたは10のフルハウス（例: QQQ1010）や、より高いツーペア（もしあれば）を持っている場合、負けている可能性が高いです。しかし、相手がチェックしたため、あなたがベットしてもフォールドされる可能性は低いです。相手のハンドがそこまで強くない場合、あなたは勝つことができます。現状、相手のベット額が0であり、コールに必要な金額も0であるため、チェック（check）して相手のハンドを確認するのが最善です。これにより、相手のハンドを推測し、次のアクションを決定できます。もし相手がベットしてきた場合は、あなたのハンドの強さとポットオッズ（ポットのサイズに対するベット額の割合）を考慮して、コールするかフォールドするかを判断します。"\n}'
2025-10-31 18:49:20,875 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "リバー（最終ラウンド）で、あなたの手札はJ♦J♠です。コミュニティカードはQ♠Q♥K♣10♣10♠です。これは、コミュニティカードにQと10が2枚ずつあるため、ツーペア（Qと10）が完成しています。しかし、あなたの手札のJは、これらのペアには貢献しません。相手（Player 0）は、ターン（4番目のカードが出た後）で770をベットし、あなたはコールしました。リバーで相手はチェックしました。これは、相手がこれ以上ベットしたくない、またはベットを bluff（ブラフ）でなく、より強いハンドを持っていることを示唆しています。あなたのツーペアは、相手がQまたは10のフルハウス（例: QQQ1010）や、より高いツーペア（もしあれば）を持っている場合、負けている可能性が高いです。しかし、相手がチェックしたため、あなたがベットしてもフォールドされる可能性は低いです。相手のハンドがそこまで強くない場合、あなたは勝つことができます。現状、相手のベット額が0であり、コールに必要な金額も0であるため、チェック（check）して相手のハンドを確認するのが最善です。これにより、相手のハンドを推測し、次のアクションを決定できます。もし相手がベットしてきた場合は、あなたのハンドの強さとポットオッズ（ポットのサイズに対するベット額の割合）を考慮して、コールするかフォールドするかを判断します。"
}
2025-10-31 18:49:20,875 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'リバー（最終ラウンド）で、あなたの手札はJ♦J♠です。コミュニティカードはQ♠Q♥K♣10♣10♠です。これは、コミュニティカードにQと10が2枚ずつあるため、ツーペア（Qと10）が完成しています。しかし、あなたの手札のJは、これらのペアには貢献しません。相手（Player 0）は、ターン（4番目のカードが出た後）で770をベットし、あなたはコールしました。リバーで相手はチェックしました。これは、相手がこれ以上ベットしたくない、またはベットを bluff（ブラフ）でなく、より強いハンドを持っていることを示唆しています。あなたのツーペアは、相手がQまたは10のフルハウス（例: QQQ1010）や、より高いツーペア（もしあれば）を持っている場合、負けている可能性が高いです。しかし、相手がチェックしたため、あなたがベットしてもフォールドされる可能性は低いです。相手のハンドがそこまで強くない場合、あなたは勝つことができます。現状、相手のベット額が0であり、コールに必要な金額も0であるため、チェック（check）して相手のハンドを確認するのが最善です。これにより、相手のハンドを推測し、次のアクションを決定できます。もし相手がベットしてきた場合は、あなたのハンドの強さとポットオッズ（ポットのサイズに対するベット額の割合）を考慮して、コールするかフォールドするかを判断します。'}
2025-10-31 18:49:20,876 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 0
2025-10-31 18:49:20,876 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (585)']
2025-10-31 18:49:20,876 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:49:20,876 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 0, リバー（最終ラウンド）で、あなたの手札はJ♦J♠です。コミュニティカードはQ♠Q♥K♣10♣10♠です。これは、コミュニティカードにQと10が2枚ずつあるため、ツーペア（Qと10）が完成しています。しかし、あなたの手札のJは、これらのペアには貢献しません。相手（Player 0）は、ターン（4番目のカードが出た後）で770をベットし、あなたはコールしました。リバーで相手はチェックしました。これは、相手がこれ以上ベットしたくない、またはベットを bluff（ブラフ）でなく、より強いハンドを持っていることを示唆しています。あなたのツーペアは、相手がQまたは10のフルハウス（例: QQQ1010）や、より高いツーペア（もしあれば）を持っている場合、負けている可能性が高いです。しかし、相手がチェックしたため、あなたがベットしてもフォールドされる可能性は低いです。相手のハンドがそこまで強くない場合、あなたは勝つことができます。現状、相手のベット額が0であり、コールに必要な金額も0であるため、チェック（check）して相手のハンドを確認するのが最善です。これにより、相手のハンドを推測し、次のアクションを決定できます。もし相手がベットしてきた場合は、あなたのハンドの強さとポットオッズ（ポットのサイズに対するベット額の割合）を考慮して、コールするかフォールドするかを判断します。
2025-10-31 18:49:20,879 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 0
2025-10-31 18:49:20,881 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:20,882 - poker_game - INFO - Hand #6, Phase: river
2025-10-31 18:49:20,882 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:49:20,883 - poker_game - INFO - Pot: 2310, Current bet: 0
2025-10-31 18:49:20,883 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:20,884 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:20,884 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:20,884 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣', '10♠']
2025-10-31 18:49:20,885 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:20,885 - poker_game - INFO -   P1(Agent1): chips=585, bet=0, status=active
2025-10-31 18:49:20,885 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:20,886 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:20,886 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:20,886 - poker_game - INFO - ==================================================
2025-10-31 18:49:20,887 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:49:20,904 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:49:20,905 - poker_game - INFO - Hand #6, Phase: river
2025-10-31 18:49:20,906 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:49:20,906 - poker_game - INFO - Pot: 2310, Current bet: 0
2025-10-31 18:49:20,906 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:20,907 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:20,907 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:20,908 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣', '10♠']
2025-10-31 18:49:20,908 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:20,909 - poker_game - INFO -   P1(Agent1): chips=585, bet=0, status=active
2025-10-31 18:49:20,909 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:20,910 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:20,910 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:20,911 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:49:20,911 - poker_game - INFO - ==================================================
2025-10-31 18:49:20,912 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:49:20,912 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:49:20,913 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:49:20,913 - poker_game - INFO - Advanced from player 1 to player 0 (seat order)
2025-10-31 18:49:20,913 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:49:20,914 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:49:20,914 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:49:20,914 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:49:20,914 - poker_game - DEBUG - Active player indices: [0, 1]
2025-10-31 18:49:20,915 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:49:20,915 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:49:20,915 - poker_game - DEBUG - First actor index: 0
2025-10-31 18:49:20,915 - poker_game - INFO - Betting complete: Back to first actor 0 (all players have acted)
2025-10-31 18:49:20,916 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:49:20,916 - poker_game - INFO - Hand #6, Phase: river
2025-10-31 18:49:20,916 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:49:20,917 - poker_game - INFO - Pot: 2310, Current bet: 0
2025-10-31 18:49:20,918 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:20,918 - poker_game - INFO - Betting round complete: True
2025-10-31 18:49:20,919 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:20,919 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣', '10♠']
2025-10-31 18:49:20,920 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:20,920 - poker_game - INFO -   P1(Agent1): chips=585, bet=0, status=active
2025-10-31 18:49:20,921 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:20,921 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:20,921 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:20,922 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:49:20,922 - poker_game - INFO - ==================================================
2025-10-31 18:49:21,024 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 18:49:21,024 - poker_game - INFO - Betting round complete: True
2025-10-31 18:49:21,025 - poker_game - INFO - Remaining players: 2
2025-10-31 18:49:21,026 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:49:21,026 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:49:21,026 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 18:49:21,027 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:49:21,027 - poker_game - INFO - Hand #6, Phase: showdown
2025-10-31 18:49:21,028 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:49:21,028 - poker_game - INFO - Pot: 2310, Current bet: 0
2025-10-31 18:49:21,028 - poker_game - INFO - Last raiser: None
2025-10-31 18:49:21,029 - poker_game - INFO - Betting round complete: True
2025-10-31 18:49:21,029 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:49:21,029 - poker_game - INFO - Community cards: ['Q♠', 'Q♥', 'K♣', '10♣', '10♠']
2025-10-31 18:49:21,030 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:21,030 - poker_game - INFO -   P1(Agent1): chips=585, bet=0, status=active
2025-10-31 18:49:21,031 - poker_game - INFO -   P2(Agent2): chips=1885, bet=0, status=folded
2025-10-31 18:49:21,031 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=folded
2025-10-31 18:49:21,032 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=folded
2025-10-31 18:49:21,032 - poker_game - INFO - ==================================================
2025-10-31 18:49:21,033 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:49:21,033 - poker_game - INFO - Pot: 2310, Community cards: ['Q♠', 'Q♥', 'K♣', '10♣', '10♠']
2025-10-31 18:49:21,033 - poker_game - INFO -   Player 0 status=active cards=['6♠', 'A♦']
2025-10-31 18:49:21,034 - poker_game - INFO -   Player 1 status=active cards=['J♦', 'J♠']
2025-10-31 18:49:21,036 - poker_game - INFO -   Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=['6♠', 'A♦']
2025-10-31 18:49:21,036 - poker_game - INFO -   Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=['J♦', 'J♠']
2025-10-31 18:49:21,037 - poker_game - INFO - Pot layer 0: amount=80, contributors=[0, 1, 2, 4]
2025-10-31 18:49:21,038 - poker_game - INFO - Pot layer 1: amount=690, contributors=[0, 1, 4]
2025-10-31 18:49:21,038 - poker_game - INFO - Pot layer 2: amount=1540, contributors=[0, 1]
2025-10-31 18:49:21,039 - poker_game - INFO - Showdown total awarded: 2310 (game.pot=2310)
2025-10-31 18:49:21,040 - poker_game - INFO - Showdown winners (aggregated): [1]
2025-10-31 18:49:21,040 - poker_game - INFO -   Awarded 2310 to Player 1 (hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠)
2025-10-31 18:49:21,041 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:49:21,072 - poker_game - INFO - === STARTING NEW HAND #7 ===
2025-10-31 18:49:21,072 - poker_game - INFO - Active players for new hand: 5
2025-10-31 18:49:21,073 - poker_game - INFO - Moving dealer button
2025-10-31 18:49:21,073 - poker_game - INFO - Posting blinds
2025-10-31 18:49:21,093 - poker_game - INFO - Dealing hole cards
2025-10-31 18:49:21,094 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:49:21,104 - poker_game - INFO - Started new hand in database: hand_id=7
2025-10-31 18:49:21,105 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:49:21,105 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:21,106 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:49:21,106 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:49:21,106 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:21,107 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:21,107 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:21,107 - poker_game - INFO - Community cards: []
2025-10-31 18:49:21,108 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:21,108 - poker_game - INFO -   P1(Agent1): chips=2885, bet=10, status=active
2025-10-31 18:49:21,108 - poker_game - INFO -   P2(Agent2): chips=1865, bet=20, status=active
2025-10-31 18:49:21,108 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:49:21,109 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=active
2025-10-31 18:49:21,109 - poker_game - INFO - ==================================================
2025-10-31 18:49:21,111 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "5♣",
    "K♣"
  ],
  "community": [],
  "your_chips": 2020,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1815,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 2885,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1865,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1385,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (2020)"
  ],
  "history": [
    "Player 4 called 230",
    "Player 0 called 160",
    "Flop dealt: Q♠, Q♥, K♣",
    "Player 0 checked",
    "Player 1 checked",
    "Player 4 folded",
    "Turn dealt: 10♣",
    "Player 0 checked",
    "Player 1 raised to 770",
    "Player 0 called 770",
    "River dealt: 10♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦",
    "Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=J♦, J♠",
    "Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20"
  ]
}
2025-10-31 18:49:21,123 - poker_game - DEBUG - Create Session: {'id': '2d76b4c6-4da8-428a-952c-9a931f6faf1f', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904161.1204836}
2025-10-31 18:49:22,691 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップの状況で、Kと5のクラブ（K♣, 5♣）を持っています。ポットには30があり、コールするには20必要です。これは、プリフロップでは十分強いハンドであり、コールしてフロップを見る価値があります。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 87, 'promptTokenCount': 1011, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1011}], 'totalTokenCount': 1098}, 'invocationId': 'e-77498500-bd85-4774-b6ab-f3ce28e7f4e6', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Prsa9eJt', 'timestamp': 1761904161.134755}]
2025-10-31 18:49:22,692 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:49:22,692 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップの状況で、Kと5のクラブ（K♣, 5♣）を持っています。ポットには30があり、コールするには20必要です。これは、プリフロップでは十分強いハンドであり、コールしてフロップを見る価値があります。"
}
```
2025-10-31 18:49:22,693 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:49:22,693 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップの状況で、Kと5のクラブ（K♣, 5♣）を持っています。ポットには30があり、コールするには20必要です。これは、プリフロップでは十分強いハンドであり、コールしてフロップを見る価値があります。"\n}\n```'
2025-10-31 18:49:22,694 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:49:22,694 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップの状況で、Kと5のクラブ（K♣, 5♣）を持っています。ポットには30があり、コールするには20必要です。これは、プリフロップでは十分強いハンドであり、コールしてフロップを見る価値があります。"\n}'
2025-10-31 18:49:22,694 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップの状況で、Kと5のクラブ（K♣, 5♣）を持っています。ポットには30があり、コールするには20必要です。これは、プリフロップでは十分強いハンドであり、コールしてフロップを見る価値があります。"
}
2025-10-31 18:49:22,694 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'プリフロップの状況で、Kと5のクラブ（K♣, 5♣）を持っています。ポットには30があり、コールするには20必要です。これは、プリフロップでは十分強いハンドであり、コールしてフロップを見る価値があります。'}
2025-10-31 18:49:22,694 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 20
2025-10-31 18:49:22,695 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (2020)']
2025-10-31 18:49:22,695 - poker_game - DEBUG - [Agent3] Call amount extracted from 'call (20)': 20
2025-10-31 18:49:22,695 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:49:22,695 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 20, プリフロップの状況で、Kと5のクラブ（K♣, 5♣）を持っています。ポットには30があり、コールするには20必要です。これは、プリフロップでは十分強いハンドであり、コールしてフロップを見る価値があります。
2025-10-31 18:49:22,696 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 20
2025-10-31 18:49:22,697 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:22,697 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:22,698 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:49:22,698 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:49:22,698 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:22,699 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:22,699 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:22,699 - poker_game - INFO - Community cards: []
2025-10-31 18:49:22,700 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:22,700 - poker_game - INFO -   P1(Agent1): chips=2885, bet=10, status=active
2025-10-31 18:49:22,700 - poker_game - INFO -   P2(Agent2): chips=1865, bet=20, status=active
2025-10-31 18:49:22,701 - poker_game - INFO -   P3(Agent3): chips=2020, bet=0, status=active
2025-10-31 18:49:22,701 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=active
2025-10-31 18:49:22,701 - poker_game - INFO - ==================================================
2025-10-31 18:49:22,702 - poker_game - INFO - ACTION_EXECUTED: Player 3 called 20
2025-10-31 18:49:22,713 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:49:22,714 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:22,714 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:49:22,715 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:49:22,715 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:22,715 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:22,716 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:22,716 - poker_game - INFO - Community cards: []
2025-10-31 18:49:22,716 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:22,717 - poker_game - INFO -   P1(Agent1): chips=2885, bet=10, status=active
2025-10-31 18:49:22,717 - poker_game - INFO -   P2(Agent2): chips=1865, bet=20, status=active
2025-10-31 18:49:22,718 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:22,718 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=active
2025-10-31 18:49:22,719 - poker_game - INFO - Extra: Action: Player 3 called 20
2025-10-31 18:49:22,719 - poker_game - INFO - ==================================================
2025-10-31 18:49:22,720 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:49:22,720 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:49:22,720 - poker_game - DEBUG - Active players: [0, 1, 2, 3, 4]
2025-10-31 18:49:22,720 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:49:22,721 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:49:22,721 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:49:22,722 - poker_game - DEBUG - Active: 5, All-in: 0
2025-10-31 18:49:22,722 - poker_game - DEBUG - Player bets: [0, 10, 20, 20, 0], Current bet: 20, All same: False
2025-10-31 18:49:22,722 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:49:22,722 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:49:22,723 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:22,723 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:49:22,724 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:49:22,724 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:22,724 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:22,725 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:22,725 - poker_game - INFO - Community cards: []
2025-10-31 18:49:22,725 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:22,726 - poker_game - INFO -   P1(Agent1): chips=2885, bet=10, status=active
2025-10-31 18:49:22,726 - poker_game - INFO -   P2(Agent2): chips=1865, bet=20, status=active
2025-10-31 18:49:22,727 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:22,727 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=active
2025-10-31 18:49:22,727 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:49:22,728 - poker_game - INFO - ==================================================
2025-10-31 18:49:22,829 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "Q♣",
    "A♣"
  ],
  "community": [],
  "your_chips": 1385,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 50,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1815,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 2885,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1865,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1385)"
  ],
  "history": [
    "Player 0 called 160",
    "Flop dealt: Q♠, Q♥, K♣",
    "Player 0 checked",
    "Player 1 checked",
    "Player 4 folded",
    "Turn dealt: 10♣",
    "Player 0 checked",
    "Player 1 raised to 770",
    "Player 0 called 770",
    "River dealt: 10♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦",
    "Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=J♦, J♠",
    "Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20"
  ]
}
2025-10-31 18:49:22,839 - poker_game - DEBUG - Create Session: {'id': '13ac43cb-4405-4eb1-affd-f1006e713bfa', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904162.8364139}
2025-10-31 18:49:33,006 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:49:42,869 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 18:49:50,086 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_i3QVKupjrbrbcRXjvJ0M7iCn', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1323, 'totalTokenCount': 1340}, 'invocationId': 'e-675abe68-17f9-4e76-ae46-0e3f944d9b27', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'NQmy3cjb', 'timestamp': 1761904162.851778}, {'content': {'parts': [{'functionResponse': {'id': 'call_i3QVKupjrbrbcRXjvJ0M7iCn', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-675abe68-17f9-4e76-ae46-0e3f944d9b27', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'HDzemRze', 'timestamp': 1761904163.811718}, {'content': {'parts': [{'functionCall': {'id': 'call_U31ris8Y6cVMBjAmvKEOXUwC', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1847, 'totalTokenCount': 1867}, 'invocationId': 'e-675abe68-17f9-4e76-ae46-0e3f944d9b27', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'lvRu9xzX', 'timestamp': 1761904163.815123}, {'content': {'parts': [{'functionResponse': {'id': 'call_U31ris8Y6cVMBjAmvKEOXUwC', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-675abe68-17f9-4e76-ae46-0e3f944d9b27', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'fhsAEsWd', 'timestamp': 1761904162.165636}, {'content': {'parts': [{'functionCall': {'id': 'call_Ts05usOXIAg5HzOiPv03fUyA', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1409, 'totalTokenCount': 1426}, 'invocationId': 'e-675abe68-17f9-4e76-ae46-0e3f944d9b27', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'WI4qaVx0', 'timestamp': 1761904162.168394}, {'content': {'parts': [{'functionResponse': {'id': 'call_Ts05usOXIAg5HzOiPv03fUyA', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-675abe68-17f9-4e76-ae46-0e3f944d9b27', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'lLEx9SmS', 'timestamp': 1761904163.0499}, {'content': {'parts': [{'functionCall': {'id': 'call_PK0FXOapRD05roLwhhpI2xxz', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['Q♣', 'A♣'], 'community': [], 'your_chips': 1385, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 0, 'pot': 50, 'to_call': 20, 'dealer_button': 0, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1815, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 2885, 'bet': 10, 'status': 'active'}, {'id': 2, 'chips': 1865, 'bet': 20, 'status': 'active'}, {'id': 3, 'chips': 2000, 'bet': 20, 'status': 'active'}], 'actions': ['fold', 'call (20)', 'raise (min 40)', 'all-in (1385)'], 'history': ['Player 0 called 160', 'Flop dealt: Q♠, Q♥, K♣', 'Player 0 checked', 'Player 1 checked', 'Player 4 folded', 'Turn dealt: 10♣', 'Player 0 checked', 'Player 1 raised to 770', 'Player 0 called 770', 'River dealt: 10♠', 'Player 0 checked', 'Player 1 checked', 'Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦', 'Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠', 'Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠', 'Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠', 'Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠', 'Player 1 posted small blind 10', 'Player 2 posted big blind 20', 'Player 3 called 20']}}, 'name': 'action_decision'}}, {'functionCall': {'id': 'call_elTY0SfJa3c3UhPzi91SxzFz', 'args': {'call_amount': 20, 'pot_after_call': 70, 'equity': 0.65}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 542, 'promptTokenCount': 1939, 'totalTokenCount': 2481}, 'invocationId': 'e-675abe68-17f9-4e76-ae46-0e3f944d9b27', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'Ab4k4cLS', 'timestamp': 1761904163.051688}, {'content': {'parts': [{'functionResponse': {'id': 'call_PK0FXOapRD05roLwhhpI2xxz', 'name': 'action_decision', 'response': {'error': 'Invoking `action_decision()` failed as the following mandatory input parameters are not present:\ncall_amount\npot_after_call\nequity\nYou could retry calling this tool, but it is IMPORTANT for you to provide all the mandatory parameters.'}}}, {'functionResponse': {'id': 'call_elTY0SfJa3c3UhPzi91SxzFz', 'name': 'action_decision', 'response': {'error': 'Invoking `action_decision()` failed as the following mandatory input parameters are not present:\ngame_state\nYou could retry calling this tool, but it is IMPORTANT for you to provide all the mandatory parameters.'}}}], 'role': 'user'}, 'invocationId': 'Kh9yMEMD', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'nwNVvyIk', 'timestamp': 1761904175.881918}, {'content': {'parts': [{'functionCall': {'id': 'call_zYbCGONd75xVAe71hTQhrFfI', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['Q♣', 'A♣'], 'community': [], 'your_chips': 1385, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 0, 'pot': 50, 'to_call': 20, 'dealer_button': 0, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1815, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 2885, 'bet': 10, 'status': 'active'}, {'id': 2, 'chips': 1865, 'bet': 20, 'status': 'active'}, {'id': 3, 'chips': 2000, 'bet': 20, 'status': 'active'}], 'actions': ['fold', 'call (20)', 'raise (min 40)', 'all-in (1385)'], 'history': ['Player 0 called 160', 'Flop dealt: Q♠, Q♥, K♣', 'Player 0 checked', 'Player 1 checked', 'Player 4 folded', 'Turn dealt: 10♣', 'Player 0 checked', 'Player 1 raised to 770', 'Player 0 called 770', 'River dealt: 10♠', 'Player 0 checked', 'Player 1 checked', 'Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦', 'Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠', 'Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠', 'Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠', 'Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠', 'Player 1 posted small blind 10', 'Player 2 posted big blind 20', 'Player 3 called 20']}, 'call_amount': 20, 'pot_after_call': 70, 'equity': 0.65}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 515, 'promptTokenCount': 2594, 'totalTokenCount': 3109}, 'invocationId': 'e-675abe68-17f9-4e76-ae46-0e3f944d9b27', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'IJBAQSUw', 'timestamp': 1761904175.884728}, {'content': {'parts': [{'functionResponse': {'id': 'call_zYbCGONd75xVAe71hTQhrFfI', 'name': 'action_decision', 'response': {'action': 'call', 'amount': 20, 'reasoning': 'ポットオッズを満たしており（38.50(ポットに対して77.00%）、コールが妥当と判断。コール額: 20'}}}], 'role': 'user'}, 'invocationId': 'e-675abe68-17f9-4e76-ae46-0e3f944d9b27', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'YwPRNFYj', 'timestamp': 1761904188.161316}, {'content': {'parts': [{'text': '{"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（38.50(ポットに対して77.00%）、コールが妥当と判断。コール額: 20"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 54, 'promptTokenCount': 3176, 'totalTokenCount': 3230}, 'invocationId': 'e-675abe68-17f9-4e76-ae46-0e3f944d9b27', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'dBQeHcqK', 'timestamp': 1761904188.164202}]
2025-10-31 18:49:50,087 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:49:50,087 - poker_game - DEBUG - {"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（38.50(ポットに対して77.00%）、コールが妥当と判断。コール額: 20"}
2025-10-31 18:49:50,088 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:49:50,088 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（38.50(ポットに対して77.00%）、コールが妥当と判断。コール額: 20"}'
2025-10-31 18:49:50,088 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:49:50,088 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（38.50(ポットに対して77.00%）、コールが妥当と判断。コール額: 20"}
2025-10-31 18:49:50,088 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'ポットオッズを満たしており（38.50(ポットに対して77.00%）、コールが妥当と判断。コール額: 20'}
2025-10-31 18:49:50,089 - poker_game - DEBUG - [Agent4] Extracted values - action: 'call', amount: 20
2025-10-31 18:49:50,089 - poker_game - DEBUG - [Agent4] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1385)']
2025-10-31 18:49:50,089 - poker_game - DEBUG - [Agent4] Call amount extracted from 'call (20)': 20
2025-10-31 18:49:50,089 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:49:50,089 - poker_game - INFO - [Agent4] Successfully parsed decision: call, 20, ポットオッズを満たしており（38.50(ポットに対して77.00%）、コールが妥当と判断。コール額: 20
2025-10-31 18:49:50,090 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'call' with amount 20
2025-10-31 18:49:50,090 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:50,091 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:50,091 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:49:50,091 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:49:50,091 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:50,091 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:50,092 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:50,092 - poker_game - INFO - Community cards: []
2025-10-31 18:49:50,092 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:50,092 - poker_game - INFO -   P1(Agent1): chips=2885, bet=10, status=active
2025-10-31 18:49:50,092 - poker_game - INFO -   P2(Agent2): chips=1865, bet=20, status=active
2025-10-31 18:49:50,093 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:50,093 - poker_game - INFO -   P4(Agent4): chips=1385, bet=0, status=active
2025-10-31 18:49:50,093 - poker_game - INFO - ==================================================
2025-10-31 18:49:50,093 - poker_game - INFO - ACTION_EXECUTED: Player 4 called 20
2025-10-31 18:49:50,104 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:49:50,104 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:50,105 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:49:50,105 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:49:50,105 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:50,106 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:50,106 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:50,106 - poker_game - INFO - Community cards: []
2025-10-31 18:49:50,106 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:50,106 - poker_game - INFO -   P1(Agent1): chips=2885, bet=10, status=active
2025-10-31 18:49:50,107 - poker_game - INFO -   P2(Agent2): chips=1865, bet=20, status=active
2025-10-31 18:49:50,107 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:50,107 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:49:50,107 - poker_game - INFO - Extra: Action: Player 4 called 20
2025-10-31 18:49:50,107 - poker_game - INFO - ==================================================
2025-10-31 18:49:50,108 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:49:50,108 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:49:50,108 - poker_game - DEBUG - Active players: [0, 1, 2, 3, 4]
2025-10-31 18:49:50,108 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:49:50,108 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:49:50,109 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:49:50,109 - poker_game - DEBUG - Active: 5, All-in: 0
2025-10-31 18:49:50,109 - poker_game - DEBUG - Player bets: [0, 10, 20, 20, 20], Current bet: 20, All same: False
2025-10-31 18:49:50,109 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:49:50,109 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:49:50,109 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:50,109 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:49:50,110 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:49:50,110 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:50,110 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:50,110 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:50,110 - poker_game - INFO - Community cards: []
2025-10-31 18:49:50,110 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:50,111 - poker_game - INFO -   P1(Agent1): chips=2885, bet=10, status=active
2025-10-31 18:49:50,111 - poker_game - INFO -   P2(Agent2): chips=1865, bet=20, status=active
2025-10-31 18:49:50,111 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:50,111 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:49:50,112 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:49:50,112 - poker_game - INFO - ==================================================
2025-10-31 18:49:50,213 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "9♣",
    "9♥"
  ],
  "community": [],
  "your_chips": 1815,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 70,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 2885,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1865,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1815)"
  ],
  "history": [
    "Flop dealt: Q♠, Q♥, K♣",
    "Player 0 checked",
    "Player 1 checked",
    "Player 4 folded",
    "Turn dealt: 10♣",
    "Player 0 checked",
    "Player 1 raised to 770",
    "Player 0 called 770",
    "River dealt: 10♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦",
    "Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=J♦, J♠",
    "Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20"
  ]
}
2025-10-31 18:49:50,223 - poker_game - DEBUG - Create Session: {'id': 'e2e7b7d6-8e27-4db0-859a-eddf734776c7', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904190.2201214}
2025-10-31 18:49:49,636 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップの段階で、私は99（9 of clubsと9 of hearts）というポケットペアを持っています。これは中程度の強さの手札です。ポットにはすでに70があり、コールするには20が必要です。このコールは、フロップでセット（スリーカード）やツーペアなどの強い役ができる可能性に投資する価値があると考えられます。他のプレイヤーがすでに20をベットしており、さらにレイズする可能性も考慮する必要がありますが、現時点ではコールしてフロップを見るのが妥当な判断です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 143, 'promptTokenCount': 1011, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1011}], 'totalTokenCount': 1154}, 'invocationId': 'e-771af3c4-b9b9-40c4-a5c1-469b70da61ac', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'vFporxgI', 'timestamp': 1761904190.232568}]
2025-10-31 18:49:49,637 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:49:49,637 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップの段階で、私は99（9 of clubsと9 of hearts）というポケットペアを持っています。これは中程度の強さの手札です。ポットにはすでに70があり、コールするには20が必要です。このコールは、フロップでセット（スリーカード）やツーペアなどの強い役ができる可能性に投資する価値があると考えられます。他のプレイヤーがすでに20をベットしており、さらにレイズする可能性も考慮する必要がありますが、現時点ではコールしてフロップを見るのが妥当な判断です。"
}
```
2025-10-31 18:49:49,638 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:49:49,638 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップの段階で、私は99（9 of clubsと9 of hearts）というポケットペアを持っています。これは中程度の強さの手札です。ポットにはすでに70があり、コールするには20が必要です。このコールは、フロップでセット（スリーカード）やツーペアなどの強い役ができる可能性に投資する価値があると考えられます。他のプレイヤーがすでに20をベットしており、さらにレイズする可能性も考慮する必要がありますが、現時点ではコールしてフロップを見るのが妥当な判断です。"\n}\n```'
2025-10-31 18:49:49,638 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:49:49,638 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップの段階で、私は99（9 of clubsと9 of hearts）というポケットペアを持っています。これは中程度の強さの手札です。ポットにはすでに70があり、コールするには20が必要です。このコールは、フロップでセット（スリーカード）やツーペアなどの強い役ができる可能性に投資する価値があると考えられます。他のプレイヤーがすでに20をベットしており、さらにレイズする可能性も考慮する必要がありますが、現時点ではコールしてフロップを見るのが妥当な判断です。"\n}'
2025-10-31 18:49:49,639 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップの段階で、私は99（9 of clubsと9 of hearts）というポケットペアを持っています。これは中程度の強さの手札です。ポットにはすでに70があり、コールするには20が必要です。このコールは、フロップでセット（スリーカード）やツーペアなどの強い役ができる可能性に投資する価値があると考えられます。他のプレイヤーがすでに20をベットしており、さらにレイズする可能性も考慮する必要がありますが、現時点ではコールしてフロップを見るのが妥当な判断です。"
}
2025-10-31 18:49:49,639 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'プリフロップの段階で、私は99（9 of clubsと9 of hearts）というポケットペアを持っています。これは中程度の強さの手札です。ポットにはすでに70があり、コールするには20が必要です。このコールは、フロップでセット（スリーカード）やツーペアなどの強い役ができる可能性に投資する価値があると考えられます。他のプレイヤーがすでに20をベットしており、さらにレイズする可能性も考慮する必要がありますが、現時点ではコールしてフロップを見るのが妥当な判断です。'}
2025-10-31 18:49:49,639 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 20
2025-10-31 18:49:49,639 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1815)']
2025-10-31 18:49:49,639 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (20)': 20
2025-10-31 18:49:49,639 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:49:49,639 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 20, プリフロップの段階で、私は99（9 of clubsと9 of hearts）というポケットペアを持っています。これは中程度の強さの手札です。ポットにはすでに70があり、コールするには20が必要です。このコールは、フロップでセット（スリーカード）やツーペアなどの強い役ができる可能性に投資する価値があると考えられます。他のプレイヤーがすでに20をベットしており、さらにレイズする可能性も考慮する必要がありますが、現時点ではコールしてフロップを見るのが妥当な判断です。
2025-10-31 18:49:49,640 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 20
2025-10-31 18:49:49,640 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:49,641 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:49,641 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:49:49,641 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:49:49,642 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:49,642 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:49,643 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:49,643 - poker_game - INFO - Community cards: []
2025-10-31 18:49:49,643 - poker_game - INFO -   P0(Agent0): chips=1815, bet=0, status=active
2025-10-31 18:49:49,644 - poker_game - INFO -   P1(Agent1): chips=2885, bet=10, status=active
2025-10-31 18:49:49,644 - poker_game - INFO -   P2(Agent2): chips=1865, bet=20, status=active
2025-10-31 18:49:49,644 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:49,645 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:49:49,646 - poker_game - INFO - ==================================================
2025-10-31 18:49:49,646 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 20
2025-10-31 18:49:49,661 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:49:49,662 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:49,662 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:49:49,662 - poker_game - INFO - Pot: 90, Current bet: 20
2025-10-31 18:49:49,663 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:49,663 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:49,664 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:49,664 - poker_game - INFO - Community cards: []
2025-10-31 18:49:49,664 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:49:49,664 - poker_game - INFO -   P1(Agent1): chips=2885, bet=10, status=active
2025-10-31 18:49:49,665 - poker_game - INFO -   P2(Agent2): chips=1865, bet=20, status=active
2025-10-31 18:49:49,665 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:49,665 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:49:49,666 - poker_game - INFO - Extra: Action: Player 0 called 20
2025-10-31 18:49:49,666 - poker_game - INFO - ==================================================
2025-10-31 18:49:49,666 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:49:49,667 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:49:49,667 - poker_game - DEBUG - Active players: [0, 1, 2, 3, 4]
2025-10-31 18:49:49,667 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:49:49,667 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:49:49,667 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:49:49,667 - poker_game - DEBUG - Active: 5, All-in: 0
2025-10-31 18:49:49,668 - poker_game - DEBUG - Player bets: [20, 10, 20, 20, 20], Current bet: 20, All same: False
2025-10-31 18:49:49,668 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:49:49,668 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:49:49,668 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:49,669 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:49:49,669 - poker_game - INFO - Pot: 90, Current bet: 20
2025-10-31 18:49:49,669 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:49,670 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:49,670 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:49,671 - poker_game - INFO - Community cards: []
2025-10-31 18:49:49,671 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:49:49,671 - poker_game - INFO -   P1(Agent1): chips=2885, bet=10, status=active
2025-10-31 18:49:49,672 - poker_game - INFO -   P2(Agent2): chips=1865, bet=20, status=active
2025-10-31 18:49:49,672 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:49,672 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:49:49,673 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:49:49,673 - poker_game - INFO - ==================================================
2025-10-31 18:49:49,775 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "8♠",
    "8♥"
  ],
  "community": [],
  "your_chips": 2885,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 90,
  "to_call": 10,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1795,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1865,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (2885)"
  ],
  "history": [
    "Player 0 checked",
    "Player 1 checked",
    "Player 4 folded",
    "Turn dealt: 10♣",
    "Player 0 checked",
    "Player 1 raised to 770",
    "Player 0 called 770",
    "River dealt: 10♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦",
    "Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=J♦, J♠",
    "Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20"
  ]
}
2025-10-31 18:49:49,789 - poker_game - DEBUG - Create Session: {'id': 'baaef713-8506-4e56-a2fa-456e09a11802', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904189.7856658}
2025-10-31 18:49:51,569 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "プリフロップ（preflop）で、あなたの手札は88（ペア）です。これは悪くないハンドですが、まだコミュニティカード（board）は何も開かれていません。現在の状況では、コール（call）して次のカード（フロップ、flop）を見るのが最善です。ポット（pot）はすでに大きく、コールに必要な金額は10なので、それほど大きくありません。レイズ（raise）してポットをさらに大きくすることも可能ですが、まだ手札の強さが確定していないため、コールで様子を見るのが賢明です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 148, 'promptTokenCount': 1008, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1008}], 'totalTokenCount': 1156}, 'invocationId': 'e-e2855e08-2f8c-43c7-930b-de0aa2dd1729', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Cb7rCz4P', 'timestamp': 1761904189.801056}]
2025-10-31 18:49:51,570 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:49:51,570 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 10,
  "reasoning": "プリフロップ（preflop）で、あなたの手札は88（ペア）です。これは悪くないハンドですが、まだコミュニティカード（board）は何も開かれていません。現在の状況では、コール（call）して次のカード（フロップ、flop）を見るのが最善です。ポット（pot）はすでに大きく、コールに必要な金額は10なので、それほど大きくありません。レイズ（raise）してポットをさらに大きくすることも可能ですが、まだ手札の強さが確定していないため、コールで様子を見るのが賢明です。"
}
```
2025-10-31 18:49:51,570 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:49:51,571 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "プリフロップ（preflop）で、あなたの手札は88（ペア）です。これは悪くないハンドですが、まだコミュニティカード（board）は何も開かれていません。現在の状況では、コール（call）して次のカード（フロップ、flop）を見るのが最善です。ポット（pot）はすでに大きく、コールに必要な金額は10なので、それほど大きくありません。レイズ（raise）してポットをさらに大きくすることも可能ですが、まだ手札の強さが確定していないため、コールで様子を見るのが賢明です。"\n}\n```'
2025-10-31 18:49:51,571 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:49:51,571 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "プリフロップ（preflop）で、あなたの手札は88（ペア）です。これは悪くないハンドですが、まだコミュニティカード（board）は何も開かれていません。現在の状況では、コール（call）して次のカード（フロップ、flop）を見るのが最善です。ポット（pot）はすでに大きく、コールに必要な金額は10なので、それほど大きくありません。レイズ（raise）してポットをさらに大きくすることも可能ですが、まだ手札の強さが確定していないため、コールで様子を見るのが賢明です。"\n}'
2025-10-31 18:49:51,571 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 10,
  "reasoning": "プリフロップ（preflop）で、あなたの手札は88（ペア）です。これは悪くないハンドですが、まだコミュニティカード（board）は何も開かれていません。現在の状況では、コール（call）して次のカード（フロップ、flop）を見るのが最善です。ポット（pot）はすでに大きく、コールに必要な金額は10なので、それほど大きくありません。レイズ（raise）してポットをさらに大きくすることも可能ですが、まだ手札の強さが確定していないため、コールで様子を見るのが賢明です。"
}
2025-10-31 18:49:51,572 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 10, 'reasoning': 'プリフロップ（preflop）で、あなたの手札は88（ペア）です。これは悪くないハンドですが、まだコミュニティカード（board）は何も開かれていません。現在の状況では、コール（call）して次のカード（フロップ、flop）を見るのが最善です。ポット（pot）はすでに大きく、コールに必要な金額は10なので、それほど大きくありません。レイズ（raise）してポットをさらに大きくすることも可能ですが、まだ手札の強さが確定していないため、コールで様子を見るのが賢明です。'}
2025-10-31 18:49:51,572 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 10
2025-10-31 18:49:51,572 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (10)', 'raise (min 40)', 'all-in (2885)']
2025-10-31 18:49:51,573 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (10)': 10
2025-10-31 18:49:51,573 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 10}
2025-10-31 18:49:51,573 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 10, プリフロップ（preflop）で、あなたの手札は88（ペア）です。これは悪くないハンドですが、まだコミュニティカード（board）は何も開かれていません。現在の状況では、コール（call）して次のカード（フロップ、flop）を見るのが最善です。ポット（pot）はすでに大きく、コールに必要な金額は10なので、それほど大きくありません。レイズ（raise）してポットをさらに大きくすることも可能ですが、まだ手札の強さが確定していないため、コールで様子を見るのが賢明です。
2025-10-31 18:49:51,574 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 10
2025-10-31 18:49:51,574 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:51,575 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:51,575 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:49:51,576 - poker_game - INFO - Pot: 90, Current bet: 20
2025-10-31 18:49:51,576 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:51,577 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:51,577 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:51,578 - poker_game - INFO - Community cards: []
2025-10-31 18:49:51,578 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:49:51,578 - poker_game - INFO -   P1(Agent1): chips=2885, bet=10, status=active
2025-10-31 18:49:51,579 - poker_game - INFO -   P2(Agent2): chips=1865, bet=20, status=active
2025-10-31 18:49:51,579 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:51,579 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:49:51,580 - poker_game - INFO - ==================================================
2025-10-31 18:49:51,580 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 10
2025-10-31 18:49:51,591 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:49:51,592 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:51,592 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:49:51,593 - poker_game - INFO - Pot: 100, Current bet: 20
2025-10-31 18:49:51,593 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:51,594 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:51,594 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:51,595 - poker_game - INFO - Community cards: []
2025-10-31 18:49:51,595 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:49:51,595 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:49:51,596 - poker_game - INFO -   P2(Agent2): chips=1865, bet=20, status=active
2025-10-31 18:49:51,596 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:51,597 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:49:51,597 - poker_game - INFO - Extra: Action: Player 1 called 10
2025-10-31 18:49:51,597 - poker_game - INFO - ==================================================
2025-10-31 18:49:51,598 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:49:51,598 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:49:51,599 - poker_game - DEBUG - Active players: [0, 1, 2, 3, 4]
2025-10-31 18:49:51,599 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:49:51,599 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:49:51,600 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:49:51,600 - poker_game - DEBUG - Active: 5, All-in: 0
2025-10-31 18:49:51,600 - poker_game - DEBUG - Player bets: [20, 20, 20, 20, 20], Current bet: 20, All same: True
2025-10-31 18:49:51,600 - poker_game - DEBUG - Active player indices: [0, 1, 2, 3, 4]
2025-10-31 18:49:51,601 - poker_game - DEBUG - Last raiser index: 2
2025-10-31 18:49:51,601 - poker_game - DEBUG - Current player index: 2
2025-10-31 18:49:51,601 - poker_game - DEBUG - Next after last raiser 2: 3
2025-10-31 18:49:51,601 - poker_game - DEBUG - Betting continues: Current player 2 != next after raiser 3
2025-10-31 18:49:51,602 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:49:51,602 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:51,602 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:49:51,603 - poker_game - INFO - Pot: 100, Current bet: 20
2025-10-31 18:49:51,604 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:51,604 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:51,605 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:51,605 - poker_game - INFO - Community cards: []
2025-10-31 18:49:51,606 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:49:51,606 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:49:51,607 - poker_game - INFO -   P2(Agent2): chips=1865, bet=20, status=active
2025-10-31 18:49:51,607 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:51,607 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:49:51,608 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:49:51,609 - poker_game - INFO - ==================================================
2025-10-31 18:49:51,710 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "preflop",
  "your_cards": [
    "4♠",
    "A♠"
  ],
  "community": [],
  "your_chips": 1865,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 100,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1795,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 2875,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2000,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 40)",
    "all-in (1865)"
  ],
  "history": [
    "Player 1 checked",
    "Player 4 folded",
    "Turn dealt: 10♣",
    "Player 0 checked",
    "Player 1 raised to 770",
    "Player 0 called 770",
    "River dealt: 10♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦",
    "Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=J♦, J♠",
    "Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20",
    "Player 1 called 10"
  ]
}
2025-10-31 18:49:51,722 - poker_game - DEBUG - Create Session: {'id': '5e967154-2cd6-44bf-baaf-79d4d27bd9f8', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904191.7203712}
2025-10-31 18:49:53,818 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 100,\n  "reasoning": "エース・スペード・フォー・スペード（A♠4♠）は、プリフロップ（カードが配られた直後）で強いハンドです。特に、ポットが100で、コール額が0（つまり、誰もまだレイズしていない）なので、レイズしてポットを大きくし、相手をプレッシャーにかけるのが最善です。100へのレイズは、相手に注意を促し、ポットをコントロールするための十分な額です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 134, 'promptTokenCount': 1008, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1008}], 'totalTokenCount': 1142}, 'invocationId': 'e-0b9d06f4-0daf-4ef9-be82-1b6abd19127c', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'lTnbbfQ1', 'timestamp': 1761904191.728308}]
2025-10-31 18:49:53,819 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:49:53,819 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 100,
  "reasoning": "エース・スペード・フォー・スペード（A♠4♠）は、プリフロップ（カードが配られた直後）で強いハンドです。特に、ポットが100で、コール額が0（つまり、誰もまだレイズしていない）なので、レイズしてポットを大きくし、相手をプレッシャーにかけるのが最善です。100へのレイズは、相手に注意を促し、ポットをコントロールするための十分な額です。"
}
```
2025-10-31 18:49:53,819 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:49:53,819 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 100,\n  "reasoning": "エース・スペード・フォー・スペード（A♠4♠）は、プリフロップ（カードが配られた直後）で強いハンドです。特に、ポットが100で、コール額が0（つまり、誰もまだレイズしていない）なので、レイズしてポットを大きくし、相手をプレッシャーにかけるのが最善です。100へのレイズは、相手に注意を促し、ポットをコントロールするための十分な額です。"\n}\n```'
2025-10-31 18:49:53,820 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:49:53,820 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 100,\n  "reasoning": "エース・スペード・フォー・スペード（A♠4♠）は、プリフロップ（カードが配られた直後）で強いハンドです。特に、ポットが100で、コール額が0（つまり、誰もまだレイズしていない）なので、レイズしてポットを大きくし、相手をプレッシャーにかけるのが最善です。100へのレイズは、相手に注意を促し、ポットをコントロールするための十分な額です。"\n}'
2025-10-31 18:49:53,820 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "raise",
  "amount": 100,
  "reasoning": "エース・スペード・フォー・スペード（A♠4♠）は、プリフロップ（カードが配られた直後）で強いハンドです。特に、ポットが100で、コール額が0（つまり、誰もまだレイズしていない）なので、レイズしてポットを大きくし、相手をプレッシャーにかけるのが最善です。100へのレイズは、相手に注意を促し、ポットをコントロールするための十分な額です。"
}
2025-10-31 18:49:53,820 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'raise', 'amount': 100, 'reasoning': 'エース・スペード・フォー・スペード（A♠4♠）は、プリフロップ（カードが配られた直後）で強いハンドです。特に、ポットが100で、コール額が0（つまり、誰もまだレイズしていない）なので、レイズしてポットを大きくし、相手をプレッシャーにかけるのが最善です。100へのレイズは、相手に注意を促し、ポットをコントロールするための十分な額です。'}
2025-10-31 18:49:53,821 - poker_game - DEBUG - [Agent2] Extracted values - action: 'raise', amount: 100
2025-10-31 18:49:53,821 - poker_game - DEBUG - [Agent2] Processing raise action - available actions: ['fold', 'check', 'raise (min 40)', 'all-in (1865)']
2025-10-31 18:49:53,821 - poker_game - DEBUG - [Agent2] Minimum raise amount extracted from 'raise (min 40)': 40
2025-10-31 18:49:53,821 - poker_game - DEBUG - [Agent2] Raise amount 100 is valid (min: 40)
2025-10-31 18:49:53,821 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'raise', 'amount': 100}
2025-10-31 18:49:53,821 - poker_game - INFO - [Agent2] Successfully parsed decision: raise, 100, エース・スペード・フォー・スペード（A♠4♠）は、プリフロップ（カードが配られた直後）で強いハンドです。特に、ポットが100で、コール額が0（つまり、誰もまだレイズしていない）なので、レイズしてポットを大きくし、相手をプレッシャーにかけるのが最善です。100へのレイズは、相手に注意を促し、ポットをコントロールするための十分な額です。
2025-10-31 18:49:53,822 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'raise' with amount 100
2025-10-31 18:49:53,823 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:53,823 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:53,823 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:49:53,824 - poker_game - INFO - Pot: 100, Current bet: 20
2025-10-31 18:49:53,825 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:53,825 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:53,826 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:53,826 - poker_game - INFO - Community cards: []
2025-10-31 18:49:53,827 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:49:53,827 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:49:53,827 - poker_game - INFO -   P2(Agent2): chips=1865, bet=20, status=active
2025-10-31 18:49:53,828 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:53,828 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:49:53,828 - poker_game - INFO - ==================================================
2025-10-31 18:49:53,829 - poker_game - INFO - ACTION_EXECUTED: Player 2 raised to 120
2025-10-31 18:49:53,841 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:49:53,841 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:53,842 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:49:53,842 - poker_game - INFO - Pot: 200, Current bet: 120
2025-10-31 18:49:53,843 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:53,843 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:53,843 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:53,844 - poker_game - INFO - Community cards: []
2025-10-31 18:49:53,844 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:49:53,845 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:49:53,845 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:49:53,845 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:53,846 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:49:53,846 - poker_game - INFO - Extra: Action: Player 2 raised to 120
2025-10-31 18:49:53,847 - poker_game - INFO - ==================================================
2025-10-31 18:49:53,847 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:49:53,848 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:49:53,848 - poker_game - DEBUG - Active players: [0, 1, 2, 3, 4]
2025-10-31 18:49:53,848 - poker_game - INFO - Advanced from player 2 to player 3 (seat order)
2025-10-31 18:49:53,848 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:49:53,849 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:49:53,849 - poker_game - DEBUG - Active: 5, All-in: 0
2025-10-31 18:49:53,851 - poker_game - DEBUG - Player bets: [20, 20, 120, 20, 20], Current bet: 120, All same: False
2025-10-31 18:49:53,852 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:49:53,853 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:49:53,854 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:53,855 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:49:53,858 - poker_game - INFO - Pot: 200, Current bet: 120
2025-10-31 18:49:53,858 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:53,859 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:53,860 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:53,860 - poker_game - INFO - Community cards: []
2025-10-31 18:49:53,860 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:49:53,860 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:49:53,861 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:49:53,861 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:53,861 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:49:53,862 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:49:53,862 - poker_game - INFO - ==================================================
2025-10-31 18:49:53,964 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "5♣",
    "K♣"
  ],
  "community": [],
  "your_chips": 2000,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 200,
  "to_call": 100,
  "dealer_button": 0,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1795,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 2875,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1765,
      "bet": 120,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (100)",
    "raise (min 140)",
    "all-in (2000)"
  ],
  "history": [
    "Player 4 folded",
    "Turn dealt: 10♣",
    "Player 0 checked",
    "Player 1 raised to 770",
    "Player 0 called 770",
    "River dealt: 10♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦",
    "Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=J♦, J♠",
    "Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 2 raised to 120"
  ]
}
2025-10-31 18:49:53,972 - poker_game - DEBUG - Create Session: {'id': '8d401ac7-b003-43ac-afc3-341a779824e4', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904193.9692502}
2025-10-31 18:49:56,173 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 300,\n  "reasoning": "Preflopにおいて、K♣5♣はミドルレンジのハンドです。ポットは現在200で、コールには100必要です。プレイヤー2が120にレイズしており、これはアグレッシブな動きです。しかし、Kハイはまだ十分な強さを持っている可能性があり、ポットを大きくするチャンスです。コールして様子を見ることもできますが、レイズすることで相手にプレッシャーを与え、ポットコントロールをしながら相手のハンドレンジを狭めることができます。300へのレイズは、相手に再考を促し、ポットを大きくしすぎない範囲での攻撃的なプレイとなります。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 168, 'promptTokenCount': 1021, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1021}], 'totalTokenCount': 1189}, 'invocationId': 'e-69efe3b4-ae82-49c1-9898-f49e746a4e72', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'VgF17ceE', 'timestamp': 1761904193.982289}]
2025-10-31 18:49:56,173 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:49:56,174 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 300,
  "reasoning": "Preflopにおいて、K♣5♣はミドルレンジのハンドです。ポットは現在200で、コールには100必要です。プレイヤー2が120にレイズしており、これはアグレッシブな動きです。しかし、Kハイはまだ十分な強さを持っている可能性があり、ポットを大きくするチャンスです。コールして様子を見ることもできますが、レイズすることで相手にプレッシャーを与え、ポットコントロールをしながら相手のハンドレンジを狭めることができます。300へのレイズは、相手に再考を促し、ポットを大きくしすぎない範囲での攻撃的なプレイとなります。"
}
```
2025-10-31 18:49:56,174 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:49:56,174 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 300,\n  "reasoning": "Preflopにおいて、K♣5♣はミドルレンジのハンドです。ポットは現在200で、コールには100必要です。プレイヤー2が120にレイズしており、これはアグレッシブな動きです。しかし、Kハイはまだ十分な強さを持っている可能性があり、ポットを大きくするチャンスです。コールして様子を見ることもできますが、レイズすることで相手にプレッシャーを与え、ポットコントロールをしながら相手のハンドレンジを狭めることができます。300へのレイズは、相手に再考を促し、ポットを大きくしすぎない範囲での攻撃的なプレイとなります。"\n}\n```'
2025-10-31 18:49:56,174 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:49:56,174 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 300,\n  "reasoning": "Preflopにおいて、K♣5♣はミドルレンジのハンドです。ポットは現在200で、コールには100必要です。プレイヤー2が120にレイズしており、これはアグレッシブな動きです。しかし、Kハイはまだ十分な強さを持っている可能性があり、ポットを大きくするチャンスです。コールして様子を見ることもできますが、レイズすることで相手にプレッシャーを与え、ポットコントロールをしながら相手のハンドレンジを狭めることができます。300へのレイズは、相手に再考を促し、ポットを大きくしすぎない範囲での攻撃的なプレイとなります。"\n}'
2025-10-31 18:49:56,175 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "raise",
  "amount": 300,
  "reasoning": "Preflopにおいて、K♣5♣はミドルレンジのハンドです。ポットは現在200で、コールには100必要です。プレイヤー2が120にレイズしており、これはアグレッシブな動きです。しかし、Kハイはまだ十分な強さを持っている可能性があり、ポットを大きくするチャンスです。コールして様子を見ることもできますが、レイズすることで相手にプレッシャーを与え、ポットコントロールをしながら相手のハンドレンジを狭めることができます。300へのレイズは、相手に再考を促し、ポットを大きくしすぎない範囲での攻撃的なプレイとなります。"
}
2025-10-31 18:49:56,175 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'raise', 'amount': 300, 'reasoning': 'Preflopにおいて、K♣5♣はミドルレンジのハンドです。ポットは現在200で、コールには100必要です。プレイヤー2が120にレイズしており、これはアグレッシブな動きです。しかし、Kハイはまだ十分な強さを持っている可能性があり、ポットを大きくするチャンスです。コールして様子を見ることもできますが、レイズすることで相手にプレッシャーを与え、ポットコントロールをしながら相手のハンドレンジを狭めることができます。300へのレイズは、相手に再考を促し、ポットを大きくしすぎない範囲での攻撃的なプレイとなります。'}
2025-10-31 18:49:56,175 - poker_game - DEBUG - [Agent3] Extracted values - action: 'raise', amount: 300
2025-10-31 18:49:56,175 - poker_game - DEBUG - [Agent3] Processing raise action - available actions: ['fold', 'call (100)', 'raise (min 140)', 'all-in (2000)']
2025-10-31 18:49:56,175 - poker_game - DEBUG - [Agent3] Minimum raise amount extracted from 'raise (min 140)': 140
2025-10-31 18:49:56,175 - poker_game - DEBUG - [Agent3] Raise amount 300 is valid (min: 140)
2025-10-31 18:49:56,175 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'raise', 'amount': 300}
2025-10-31 18:49:56,176 - poker_game - INFO - [Agent3] Successfully parsed decision: raise, 300, Preflopにおいて、K♣5♣はミドルレンジのハンドです。ポットは現在200で、コールには100必要です。プレイヤー2が120にレイズしており、これはアグレッシブな動きです。しかし、Kハイはまだ十分な強さを持っている可能性があり、ポットを大きくするチャンスです。コールして様子を見ることもできますが、レイズすることで相手にプレッシャーを与え、ポットコントロールをしながら相手のハンドレンジを狭めることができます。300へのレイズは、相手に再考を促し、ポットを大きくしすぎない範囲での攻撃的なプレイとなります。
2025-10-31 18:49:56,176 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'raise' with amount 300
2025-10-31 18:49:56,177 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:49:56,177 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:56,177 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:49:56,177 - poker_game - INFO - Pot: 200, Current bet: 120
2025-10-31 18:49:56,178 - poker_game - INFO - Last raiser: 2
2025-10-31 18:49:56,178 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:56,178 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:56,178 - poker_game - INFO - Community cards: []
2025-10-31 18:49:56,178 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:49:56,179 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:49:56,179 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:49:56,179 - poker_game - INFO -   P3(Agent3): chips=2000, bet=20, status=active
2025-10-31 18:49:56,179 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:49:56,179 - poker_game - INFO - ==================================================
2025-10-31 18:49:56,179 - poker_game - INFO - ACTION_EXECUTED: Player 3 raised to 420
2025-10-31 18:49:56,190 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:49:56,190 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:56,191 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:49:56,191 - poker_game - INFO - Pot: 600, Current bet: 420
2025-10-31 18:49:56,191 - poker_game - INFO - Last raiser: 3
2025-10-31 18:49:56,191 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:56,191 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:56,191 - poker_game - INFO - Community cards: []
2025-10-31 18:49:56,191 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:49:56,191 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:49:56,191 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:49:56,191 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:49:56,191 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:49:56,191 - poker_game - INFO - Extra: Action: Player 3 raised to 420
2025-10-31 18:49:56,191 - poker_game - INFO - ==================================================
2025-10-31 18:49:56,192 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:49:56,192 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:49:56,192 - poker_game - DEBUG - Active players: [0, 1, 2, 3, 4]
2025-10-31 18:49:56,192 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:49:56,192 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:49:56,192 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:49:56,192 - poker_game - DEBUG - Active: 5, All-in: 0
2025-10-31 18:49:56,192 - poker_game - DEBUG - Player bets: [20, 20, 120, 420, 20], Current bet: 420, All same: False
2025-10-31 18:49:56,192 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:49:56,192 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:49:56,192 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:49:56,192 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:49:56,192 - poker_game - INFO - Pot: 600, Current bet: 420
2025-10-31 18:49:56,192 - poker_game - INFO - Last raiser: 3
2025-10-31 18:49:56,193 - poker_game - INFO - Betting round complete: False
2025-10-31 18:49:56,193 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:49:56,193 - poker_game - INFO - Community cards: []
2025-10-31 18:49:56,193 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:49:56,193 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:49:56,193 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:49:56,193 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:49:56,193 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:49:56,193 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:49:56,195 - poker_game - INFO - ==================================================
2025-10-31 18:49:56,297 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "Q♣",
    "A♣"
  ],
  "community": [],
  "your_chips": 1365,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 600,
  "to_call": 400,
  "dealer_button": 0,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1795,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 2875,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1765,
      "bet": 120,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1600,
      "bet": 420,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (400)",
    "raise (min 440)",
    "all-in (1365)"
  ],
  "history": [
    "Turn dealt: 10♣",
    "Player 0 checked",
    "Player 1 raised to 770",
    "Player 0 called 770",
    "River dealt: 10♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦",
    "Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=J♦, J♠",
    "Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 2 raised to 120",
    "Player 3 raised to 420"
  ]
}
2025-10-31 18:49:56,309 - poker_game - DEBUG - Create Session: {'id': '0c693535-c268-4fc8-9593-9d052bd9837b', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904196.3053992}
2025-10-31 18:50:06,413 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:50:10,014 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_eZMtNeUsQPF4ww34b9khtbqh', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1323, 'totalTokenCount': 1340}, 'invocationId': 'e-7c1dcb3c-b746-4976-a1c7-ae6c328e23f1', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'D2YQlrCg', 'timestamp': 1761904196.319042}, {'content': {'parts': [{'functionResponse': {'id': 'call_eZMtNeUsQPF4ww34b9khtbqh', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-7c1dcb3c-b746-4976-a1c7-ae6c328e23f1', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'FZEDA4LT', 'timestamp': 1761904197.508002}, {'content': {'parts': [{'functionCall': {'id': 'call_bRlVpRg58qVEE83iCROzW1oH', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}, {'functionCall': {'id': 'call_WPhQM08YiXdetXoCJWHLGvvG', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['Q♣', 'A♣'], 'community': [], 'your_chips': 1365, 'your_bet_this_round': 20, 'your_total_bet_this_hand': 20, 'pot': 600, 'to_call': 400, 'dealer_button': 0, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1795, 'bet': 20, 'status': 'active'}, {'id': 1, 'chips': 2875, 'bet': 20, 'status': 'active'}, {'id': 2, 'chips': 1765, 'bet': 120, 'status': 'active'}, {'id': 3, 'chips': 1600, 'bet': 420, 'status': 'active'}], 'actions': ['fold', 'call (400)', 'raise (min 440)', 'all-in (1365)'], 'history': ['Turn dealt: 10♣', 'Player 0 checked', 'Player 1 raised to 770', 'Player 0 called 770', 'River dealt: 10♠', 'Player 0 checked', 'Player 1 checked', 'Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦', 'Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠', 'Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠', 'Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠', 'Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠', 'Player 1 posted small blind 10', 'Player 2 posted big blind 20', 'Player 3 called 20', 'Player 4 called 20', 'Player 0 called 20', 'Player 1 called 10', 'Player 2 raised to 120', 'Player 3 raised to 420']}, 'call_amount': 400, 'pot_after_call': 1000, 'equity': 0.7}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 549, 'promptTokenCount': 1847, 'totalTokenCount': 2396}, 'invocationId': 'e-7c1dcb3c-b746-4976-a1c7-ae6c328e23f1', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'msd9qbKu', 'timestamp': 1761904197.509522}, {'content': {'parts': [{'functionResponse': {'id': 'call_bRlVpRg58qVEE83iCROzW1oH', 'name': 'transfer_to_agent', 'response': {'result': None}}}, {'functionResponse': {'id': 'call_WPhQM08YiXdetXoCJWHLGvvG', 'name': 'action_decision', 'response': {'action': 'raise', 'amount': 1000, 'reasoning': '期待値が高い（580.00(ポットに対して96.67%）ため、2.5倍でバリューレイズします。レイズ額: 1000'}}}], 'role': 'user'}, 'invocationId': 'dGJYqtun', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'X5XBvjWQ', 'timestamp': 1761904208.198837}, {'content': {'parts': [{'text': '{"action":"raise","amount":1000,"reasoning":"期待値が高い（580.00（ポットに対して96.67%）ため、2.5倍でバライューレイズします。レイズ額: 1000"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 57, 'promptTokenCount': 2557, 'totalTokenCount': 2614}, 'invocationId': 'e-7c1dcb3c-b746-4976-a1c7-ae6c328e23f1', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'SoV8PeZA', 'timestamp': 1761904208.205116}]
2025-10-31 18:50:10,014 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:50:10,014 - poker_game - DEBUG - {"action":"raise","amount":1000,"reasoning":"期待値が高い（580.00（ポットに対して96.67%）ため、2.5倍でバライューレイズします。レイズ額: 1000"}
2025-10-31 18:50:10,015 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:50:10,015 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"raise","amount":1000,"reasoning":"期待値が高い（580.00（ポットに対して96.67%）ため、2.5倍でバライューレイズします。レイズ額: 1000"}'
2025-10-31 18:50:10,015 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:50:10,015 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"raise","amount":1000,"reasoning":"期待値が高い（580.00（ポットに対して96.67%）ため、2.5倍でバライューレイズします。レイズ額: 1000"}
2025-10-31 18:50:10,015 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'raise', 'amount': 1000, 'reasoning': '期待値が高い（580.00（ポットに対して96.67%）ため、2.5倍でバライューレイズします。レイズ額: 1000'}
2025-10-31 18:50:10,015 - poker_game - DEBUG - [Agent4] Extracted values - action: 'raise', amount: 1000
2025-10-31 18:50:10,015 - poker_game - DEBUG - [Agent4] Processing raise action - available actions: ['fold', 'call (400)', 'raise (min 440)', 'all-in (1365)']
2025-10-31 18:50:10,015 - poker_game - DEBUG - [Agent4] Minimum raise amount extracted from 'raise (min 440)': 440
2025-10-31 18:50:10,015 - poker_game - DEBUG - [Agent4] Raise amount 1000 is valid (min: 440)
2025-10-31 18:50:10,016 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'raise', 'amount': 1000}
2025-10-31 18:50:10,016 - poker_game - INFO - [Agent4] Successfully parsed decision: raise, 1000, 期待値が高い（580.00（ポットに対して96.67%）ため、2.5倍でバライューレイズします。レイズ額: 1000
2025-10-31 18:50:10,016 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'raise' with amount 1000
2025-10-31 18:50:10,016 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:10,017 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:50:10,017 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:50:10,017 - poker_game - INFO - Pot: 600, Current bet: 420
2025-10-31 18:50:10,017 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:10,017 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:10,017 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:50:10,018 - poker_game - INFO - Community cards: []
2025-10-31 18:50:10,018 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:50:10,018 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:50:10,018 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:50:10,018 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:50:10,019 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:50:10,019 - poker_game - INFO - ==================================================
2025-10-31 18:50:10,019 - poker_game - WARNING - Player 4 cannot raise - needs 1400, has 1365
2025-10-31 18:50:10,019 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'fold' with amount 0
2025-10-31 18:50:10,019 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:10,019 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:50:10,020 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:50:10,020 - poker_game - INFO - Pot: 600, Current bet: 420
2025-10-31 18:50:10,020 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:10,020 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:10,020 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:50:10,020 - poker_game - INFO - Community cards: []
2025-10-31 18:50:10,021 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:50:10,021 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:50:10,021 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:50:10,021 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:50:10,021 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=active
2025-10-31 18:50:10,022 - poker_game - INFO - ==================================================
2025-10-31 18:50:10,022 - poker_game - INFO - ACTION_EXECUTED: Player 4 folded
2025-10-31 18:50:10,032 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:10,032 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:50:10,032 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:50:10,032 - poker_game - INFO - Pot: 600, Current bet: 420
2025-10-31 18:50:10,033 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:10,033 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:10,033 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:10,033 - poker_game - INFO - Community cards: []
2025-10-31 18:50:10,034 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:50:10,034 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:50:10,034 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:50:10,034 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:50:10,035 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=folded
2025-10-31 18:50:10,035 - poker_game - INFO - Extra: Action: Player 4 folded
2025-10-31 18:50:10,035 - poker_game - INFO - ==================================================
2025-10-31 18:50:10,036 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:10,036 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:10,036 - poker_game - DEBUG - Active players: [0, 1, 2, 3]
2025-10-31 18:50:10,036 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:50:10,036 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:10,036 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:10,037 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:50:10,037 - poker_game - DEBUG - Player bets: [20, 20, 120, 420], Current bet: 420, All same: False
2025-10-31 18:50:10,037 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:50:10,037 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:10,037 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:50:10,037 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:50:10,038 - poker_game - INFO - Pot: 600, Current bet: 420
2025-10-31 18:50:10,038 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:10,038 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:10,038 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:10,039 - poker_game - INFO - Community cards: []
2025-10-31 18:50:10,039 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:50:10,039 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:50:10,039 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:50:10,039 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:50:10,040 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=folded
2025-10-31 18:50:10,040 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:10,040 - poker_game - INFO - ==================================================
2025-10-31 18:50:10,141 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "9♣",
    "9♥"
  ],
  "community": [],
  "your_chips": 1795,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 600,
  "to_call": 400,
  "dealer_button": 0,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 2875,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1765,
      "bet": 120,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1600,
      "bet": 420,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 20,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (400)",
    "raise (min 440)",
    "all-in (1795)"
  ],
  "history": [
    "Player 0 checked",
    "Player 1 raised to 770",
    "Player 0 called 770",
    "River dealt: 10♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦",
    "Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=J♦, J♠",
    "Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 2 raised to 120",
    "Player 3 raised to 420",
    "Player 4 folded"
  ]
}
2025-10-31 18:50:10,150 - poker_game - DEBUG - Create Session: {'id': 'ce58e72c-ed55-4a42-9477-b0dc596b1769', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904210.147794}
2025-10-31 18:50:11,710 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 400,\n  "reasoning": "プリフロップでポケットナイン（99）はそこそこ強いハンドです。しかし、ポットが大きく、3番プレイヤーからの大きなレイズ（420）があり、コールするには400必要です。相手のハンドレンジを考慮すると、コールしてフロップを見るのが最善と判断しました。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 99, 'promptTokenCount': 1024, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1024}], 'totalTokenCount': 1123}, 'invocationId': 'e-c48fe16f-141f-43e5-8008-c945a755dd0a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'gWJKqhAW', 'timestamp': 1761904210.161223}]
2025-10-31 18:50:11,710 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:50:11,711 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 400,
  "reasoning": "プリフロップでポケットナイン（99）はそこそこ強いハンドです。しかし、ポットが大きく、3番プレイヤーからの大きなレイズ（420）があり、コールするには400必要です。相手のハンドレンジを考慮すると、コールしてフロップを見るのが最善と判断しました。"
}
```
2025-10-31 18:50:11,711 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:50:11,711 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 400,\n  "reasoning": "プリフロップでポケットナイン（99）はそこそこ強いハンドです。しかし、ポットが大きく、3番プレイヤーからの大きなレイズ（420）があり、コールするには400必要です。相手のハンドレンジを考慮すると、コールしてフロップを見るのが最善と判断しました。"\n}\n```'
2025-10-31 18:50:11,711 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:50:11,711 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 400,\n  "reasoning": "プリフロップでポケットナイン（99）はそこそこ強いハンドです。しかし、ポットが大きく、3番プレイヤーからの大きなレイズ（420）があり、コールするには400必要です。相手のハンドレンジを考慮すると、コールしてフロップを見るのが最善と判断しました。"\n}'
2025-10-31 18:50:11,711 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 400,
  "reasoning": "プリフロップでポケットナイン（99）はそこそこ強いハンドです。しかし、ポットが大きく、3番プレイヤーからの大きなレイズ（420）があり、コールするには400必要です。相手のハンドレンジを考慮すると、コールしてフロップを見るのが最善と判断しました。"
}
2025-10-31 18:50:11,712 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 400, 'reasoning': 'プリフロップでポケットナイン（99）はそこそこ強いハンドです。しかし、ポットが大きく、3番プレイヤーからの大きなレイズ（420）があり、コールするには400必要です。相手のハンドレンジを考慮すると、コールしてフロップを見るのが最善と判断しました。'}
2025-10-31 18:50:11,712 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 400
2025-10-31 18:50:11,712 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (400)', 'raise (min 440)', 'all-in (1795)']
2025-10-31 18:50:11,712 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (400)': 400
2025-10-31 18:50:11,712 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 400}
2025-10-31 18:50:11,712 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 400, プリフロップでポケットナイン（99）はそこそこ強いハンドです。しかし、ポットが大きく、3番プレイヤーからの大きなレイズ（420）があり、コールするには400必要です。相手のハンドレンジを考慮すると、コールしてフロップを見るのが最善と判断しました。
2025-10-31 18:50:11,713 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 400
2025-10-31 18:50:11,713 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:11,713 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:50:11,713 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:50:11,714 - poker_game - INFO - Pot: 600, Current bet: 420
2025-10-31 18:50:11,714 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:11,714 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:11,714 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:11,714 - poker_game - INFO - Community cards: []
2025-10-31 18:50:11,715 - poker_game - INFO -   P0(Agent0): chips=1795, bet=20, status=active
2025-10-31 18:50:11,715 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:50:11,715 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:50:11,715 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:50:11,716 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=folded
2025-10-31 18:50:11,716 - poker_game - INFO - ==================================================
2025-10-31 18:50:11,716 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 400
2025-10-31 18:50:11,726 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:11,726 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:50:11,726 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:50:11,727 - poker_game - INFO - Pot: 1000, Current bet: 420
2025-10-31 18:50:11,727 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:11,727 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:11,727 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:11,728 - poker_game - INFO - Community cards: []
2025-10-31 18:50:11,728 - poker_game - INFO -   P0(Agent0): chips=1395, bet=420, status=active
2025-10-31 18:50:11,728 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:50:11,728 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:50:11,729 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:50:11,730 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=folded
2025-10-31 18:50:11,730 - poker_game - INFO - Extra: Action: Player 0 called 400
2025-10-31 18:50:11,731 - poker_game - INFO - ==================================================
2025-10-31 18:50:11,731 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:11,731 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:11,731 - poker_game - DEBUG - Active players: [0, 1, 2, 3]
2025-10-31 18:50:11,731 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:50:11,732 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:11,732 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:11,732 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:50:11,732 - poker_game - DEBUG - Player bets: [420, 20, 120, 420], Current bet: 420, All same: False
2025-10-31 18:50:11,732 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:50:11,732 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:11,733 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:50:11,733 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:11,733 - poker_game - INFO - Pot: 1000, Current bet: 420
2025-10-31 18:50:11,733 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:11,733 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:11,734 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:11,734 - poker_game - INFO - Community cards: []
2025-10-31 18:50:11,734 - poker_game - INFO -   P0(Agent0): chips=1395, bet=420, status=active
2025-10-31 18:50:11,734 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:50:11,734 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:50:11,734 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:50:11,735 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=folded
2025-10-31 18:50:11,735 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:11,735 - poker_game - INFO - ==================================================
2025-10-31 18:50:11,836 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "8♠",
    "8♥"
  ],
  "community": [],
  "your_chips": 2875,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 1000,
  "to_call": 400,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1395,
      "bet": 420,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1765,
      "bet": 120,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1600,
      "bet": 420,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 20,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (400)",
    "raise (min 440)",
    "all-in (2875)"
  ],
  "history": [
    "Player 1 raised to 770",
    "Player 0 called 770",
    "River dealt: 10♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦",
    "Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=J♦, J♠",
    "Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 2 raised to 120",
    "Player 3 raised to 420",
    "Player 4 folded",
    "Player 0 called 400"
  ]
}
2025-10-31 18:50:11,847 - poker_game - DEBUG - Create Session: {'id': '219c2a88-6197-4068-9a3e-c2c8f18b072f', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904211.8452325}
2025-10-31 18:50:13,987 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 400,\n  "reasoning": "プリフロップでポケットエイト（8♠, 8♥）を持っています。これは中程度の強さのハンドで、フロップ（コミュニティカードが開かれる前）ではレイズ（ベット額を上げる）するか、コール（相手のベット額と同額を支払う）するか、フォールド（降りる）かの選択肢があります。現在の状況では、ポットには1000あり、コールするには400必要です。これは、ポットオッズ（支払う金額に対するポットの大きさの比率）を考慮すると、コールする価値のある状況です。相手のレイズ額は大きいですが、ポケットエイトはフロップでセット（同じ数字のカード3枚）になる可能性があり、強力なハンドになります。したがって、コールしてフロップを見るのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 202, 'promptTokenCount': 1030, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1030}], 'totalTokenCount': 1232}, 'invocationId': 'e-a0587c27-f4f8-4f56-b965-7b0495a272f9', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'NkBXLInu', 'timestamp': 1761904211.855266}]
2025-10-31 18:50:13,987 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:50:13,988 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 400,
  "reasoning": "プリフロップでポケットエイト（8♠, 8♥）を持っています。これは中程度の強さのハンドで、フロップ（コミュニティカードが開かれる前）ではレイズ（ベット額を上げる）するか、コール（相手のベット額と同額を支払う）するか、フォールド（降りる）かの選択肢があります。現在の状況では、ポットには1000あり、コールするには400必要です。これは、ポットオッズ（支払う金額に対するポットの大きさの比率）を考慮すると、コールする価値のある状況です。相手のレイズ額は大きいですが、ポケットエイトはフロップでセット（同じ数字のカード3枚）になる可能性があり、強力なハンドになります。したがって、コールしてフロップを見るのが最善の選択です。"
}
```
2025-10-31 18:50:13,988 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:50:13,988 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 400,\n  "reasoning": "プリフロップでポケットエイト（8♠, 8♥）を持っています。これは中程度の強さのハンドで、フロップ（コミュニティカードが開かれる前）ではレイズ（ベット額を上げる）するか、コール（相手のベット額と同額を支払う）するか、フォールド（降りる）かの選択肢があります。現在の状況では、ポットには1000あり、コールするには400必要です。これは、ポットオッズ（支払う金額に対するポットの大きさの比率）を考慮すると、コールする価値のある状況です。相手のレイズ額は大きいですが、ポケットエイトはフロップでセット（同じ数字のカード3枚）になる可能性があり、強力なハンドになります。したがって、コールしてフロップを見るのが最善の選択です。"\n}\n```'
2025-10-31 18:50:13,989 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:50:13,989 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 400,\n  "reasoning": "プリフロップでポケットエイト（8♠, 8♥）を持っています。これは中程度の強さのハンドで、フロップ（コミュニティカードが開かれる前）ではレイズ（ベット額を上げる）するか、コール（相手のベット額と同額を支払う）するか、フォールド（降りる）かの選択肢があります。現在の状況では、ポットには1000あり、コールするには400必要です。これは、ポットオッズ（支払う金額に対するポットの大きさの比率）を考慮すると、コールする価値のある状況です。相手のレイズ額は大きいですが、ポケットエイトはフロップでセット（同じ数字のカード3枚）になる可能性があり、強力なハンドになります。したがって、コールしてフロップを見るのが最善の選択です。"\n}'
2025-10-31 18:50:13,989 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 400,
  "reasoning": "プリフロップでポケットエイト（8♠, 8♥）を持っています。これは中程度の強さのハンドで、フロップ（コミュニティカードが開かれる前）ではレイズ（ベット額を上げる）するか、コール（相手のベット額と同額を支払う）するか、フォールド（降りる）かの選択肢があります。現在の状況では、ポットには1000あり、コールするには400必要です。これは、ポットオッズ（支払う金額に対するポットの大きさの比率）を考慮すると、コールする価値のある状況です。相手のレイズ額は大きいですが、ポケットエイトはフロップでセット（同じ数字のカード3枚）になる可能性があり、強力なハンドになります。したがって、コールしてフロップを見るのが最善の選択です。"
}
2025-10-31 18:50:13,989 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 400, 'reasoning': 'プリフロップでポケットエイト（8♠, 8♥）を持っています。これは中程度の強さのハンドで、フロップ（コミュニティカードが開かれる前）ではレイズ（ベット額を上げる）するか、コール（相手のベット額と同額を支払う）するか、フォールド（降りる）かの選択肢があります。現在の状況では、ポットには1000あり、コールするには400必要です。これは、ポットオッズ（支払う金額に対するポットの大きさの比率）を考慮すると、コールする価値のある状況です。相手のレイズ額は大きいですが、ポケットエイトはフロップでセット（同じ数字のカード3枚）になる可能性があり、強力なハンドになります。したがって、コールしてフロップを見るのが最善の選択です。'}
2025-10-31 18:50:13,990 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 400
2025-10-31 18:50:13,990 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (400)', 'raise (min 440)', 'all-in (2875)']
2025-10-31 18:50:13,990 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (400)': 400
2025-10-31 18:50:13,990 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 400}
2025-10-31 18:50:13,990 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 400, プリフロップでポケットエイト（8♠, 8♥）を持っています。これは中程度の強さのハンドで、フロップ（コミュニティカードが開かれる前）ではレイズ（ベット額を上げる）するか、コール（相手のベット額と同額を支払う）するか、フォールド（降りる）かの選択肢があります。現在の状況では、ポットには1000あり、コールするには400必要です。これは、ポットオッズ（支払う金額に対するポットの大きさの比率）を考慮すると、コールする価値のある状況です。相手のレイズ額は大きいですが、ポケットエイトはフロップでセット（同じ数字のカード3枚）になる可能性があり、強力なハンドになります。したがって、コールしてフロップを見るのが最善の選択です。
2025-10-31 18:50:13,991 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 400
2025-10-31 18:50:13,991 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:13,992 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:50:13,993 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:13,993 - poker_game - INFO - Pot: 1000, Current bet: 420
2025-10-31 18:50:13,993 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:13,994 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:13,994 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:13,994 - poker_game - INFO - Community cards: []
2025-10-31 18:50:13,995 - poker_game - INFO -   P0(Agent0): chips=1395, bet=420, status=active
2025-10-31 18:50:13,995 - poker_game - INFO -   P1(Agent1): chips=2875, bet=20, status=active
2025-10-31 18:50:13,996 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:50:13,996 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:50:13,997 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=folded
2025-10-31 18:50:13,997 - poker_game - INFO - ==================================================
2025-10-31 18:50:13,998 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 400
2025-10-31 18:50:14,011 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:14,011 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:50:14,012 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:14,012 - poker_game - INFO - Pot: 1400, Current bet: 420
2025-10-31 18:50:14,013 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:14,013 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:14,014 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:14,014 - poker_game - INFO - Community cards: []
2025-10-31 18:50:14,014 - poker_game - INFO -   P0(Agent0): chips=1395, bet=420, status=active
2025-10-31 18:50:14,014 - poker_game - INFO -   P1(Agent1): chips=2475, bet=420, status=active
2025-10-31 18:50:14,015 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:50:14,015 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:50:14,016 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=folded
2025-10-31 18:50:14,016 - poker_game - INFO - Extra: Action: Player 1 called 400
2025-10-31 18:50:14,016 - poker_game - INFO - ==================================================
2025-10-31 18:50:14,017 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:14,017 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:14,017 - poker_game - DEBUG - Active players: [0, 1, 2, 3]
2025-10-31 18:50:14,017 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:50:14,018 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:14,018 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:14,019 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:50:14,019 - poker_game - DEBUG - Player bets: [420, 420, 120, 420], Current bet: 420, All same: False
2025-10-31 18:50:14,019 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:50:14,019 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:14,020 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:50:14,021 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:50:14,021 - poker_game - INFO - Pot: 1400, Current bet: 420
2025-10-31 18:50:14,021 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:14,022 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:14,022 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:14,022 - poker_game - INFO - Community cards: []
2025-10-31 18:50:14,023 - poker_game - INFO -   P0(Agent0): chips=1395, bet=420, status=active
2025-10-31 18:50:14,024 - poker_game - INFO -   P1(Agent1): chips=2475, bet=420, status=active
2025-10-31 18:50:14,024 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:50:14,025 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:50:14,027 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=folded
2025-10-31 18:50:14,027 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:14,027 - poker_game - INFO - ==================================================
2025-10-31 18:50:14,130 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "preflop",
  "your_cards": [
    "4♠",
    "A♠"
  ],
  "community": [],
  "your_chips": 1765,
  "your_bet_this_round": 120,
  "your_total_bet_this_hand": 120,
  "pot": 1400,
  "to_call": 300,
  "dealer_button": 0,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1395,
      "bet": 420,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 2475,
      "bet": 420,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1600,
      "bet": 420,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 20,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (300)",
    "raise (min 440)",
    "all-in (1765)"
  ],
  "history": [
    "Player 0 called 770",
    "River dealt: 10♠",
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦",
    "Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=J♦, J♠",
    "Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 2 raised to 120",
    "Player 3 raised to 420",
    "Player 4 folded",
    "Player 0 called 400",
    "Player 1 called 400"
  ]
}
2025-10-31 18:50:14,139 - poker_game - DEBUG - Create Session: {'id': '7dc807f7-b343-49fd-be5a-494d63d2241d', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904214.1366553}
2025-10-31 18:50:15,769 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 300,\n  "reasoning": "プリフロップでA♠4♠という強いスプレッド（スーツが揃っている）の手札を持っています。ポットは大きく、コールに必要な額は300です。この手札はフロップ以降でフラッシュやストレートの可能性があり、十分な勝負価値があるため、コールを選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 99, 'promptTokenCount': 1031, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1031}], 'totalTokenCount': 1130}, 'invocationId': 'e-89f96a84-caa0-4b9d-9113-8de9fee805ea', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'hNKc2ff4', 'timestamp': 1761904214.148811}]
2025-10-31 18:50:15,769 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:50:15,769 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 300,
  "reasoning": "プリフロップでA♠4♠という強いスプレッド（スーツが揃っている）の手札を持っています。ポットは大きく、コールに必要な額は300です。この手札はフロップ以降でフラッシュやストレートの可能性があり、十分な勝負価値があるため、コールを選択します。"
}
```
2025-10-31 18:50:15,770 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:50:15,770 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 300,\n  "reasoning": "プリフロップでA♠4♠という強いスプレッド（スーツが揃っている）の手札を持っています。ポットは大きく、コールに必要な額は300です。この手札はフロップ以降でフラッシュやストレートの可能性があり、十分な勝負価値があるため、コールを選択します。"\n}\n```'
2025-10-31 18:50:15,770 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:50:15,770 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 300,\n  "reasoning": "プリフロップでA♠4♠という強いスプレッド（スーツが揃っている）の手札を持っています。ポットは大きく、コールに必要な額は300です。この手札はフロップ以降でフラッシュやストレートの可能性があり、十分な勝負価値があるため、コールを選択します。"\n}'
2025-10-31 18:50:15,770 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "call",
  "amount": 300,
  "reasoning": "プリフロップでA♠4♠という強いスプレッド（スーツが揃っている）の手札を持っています。ポットは大きく、コールに必要な額は300です。この手札はフロップ以降でフラッシュやストレートの可能性があり、十分な勝負価値があるため、コールを選択します。"
}
2025-10-31 18:50:15,770 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'call', 'amount': 300, 'reasoning': 'プリフロップでA♠4♠という強いスプレッド（スーツが揃っている）の手札を持っています。ポットは大きく、コールに必要な額は300です。この手札はフロップ以降でフラッシュやストレートの可能性があり、十分な勝負価値があるため、コールを選択します。'}
2025-10-31 18:50:15,771 - poker_game - DEBUG - [Agent2] Extracted values - action: 'call', amount: 300
2025-10-31 18:50:15,771 - poker_game - DEBUG - [Agent2] Processing call action - available actions: ['fold', 'call (300)', 'raise (min 440)', 'all-in (1765)']
2025-10-31 18:50:15,771 - poker_game - DEBUG - [Agent2] Call amount extracted from 'call (300)': 300
2025-10-31 18:50:15,771 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'call', 'amount': 300}
2025-10-31 18:50:15,771 - poker_game - INFO - [Agent2] Successfully parsed decision: call, 300, プリフロップでA♠4♠という強いスプレッド（スーツが揃っている）の手札を持っています。ポットは大きく、コールに必要な額は300です。この手札はフロップ以降でフラッシュやストレートの可能性があり、十分な勝負価値があるため、コールを選択します。
2025-10-31 18:50:15,771 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'call' with amount 300
2025-10-31 18:50:15,772 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:15,772 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:50:15,772 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:50:15,772 - poker_game - INFO - Pot: 1400, Current bet: 420
2025-10-31 18:50:15,773 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:15,773 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:15,773 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:15,773 - poker_game - INFO - Community cards: []
2025-10-31 18:50:15,773 - poker_game - INFO -   P0(Agent0): chips=1395, bet=420, status=active
2025-10-31 18:50:15,774 - poker_game - INFO -   P1(Agent1): chips=2475, bet=420, status=active
2025-10-31 18:50:15,774 - poker_game - INFO -   P2(Agent2): chips=1765, bet=120, status=active
2025-10-31 18:50:15,774 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:50:15,774 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=folded
2025-10-31 18:50:15,774 - poker_game - INFO - ==================================================
2025-10-31 18:50:15,775 - poker_game - INFO - ACTION_EXECUTED: Player 2 called 300
2025-10-31 18:50:15,784 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:15,785 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:50:15,785 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:50:15,785 - poker_game - INFO - Pot: 1700, Current bet: 420
2025-10-31 18:50:15,785 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:15,786 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:15,786 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:15,786 - poker_game - INFO - Community cards: []
2025-10-31 18:50:15,786 - poker_game - INFO -   P0(Agent0): chips=1395, bet=420, status=active
2025-10-31 18:50:15,786 - poker_game - INFO -   P1(Agent1): chips=2475, bet=420, status=active
2025-10-31 18:50:15,786 - poker_game - INFO -   P2(Agent2): chips=1465, bet=420, status=active
2025-10-31 18:50:15,787 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:50:15,787 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=folded
2025-10-31 18:50:15,787 - poker_game - INFO - Extra: Action: Player 2 called 300
2025-10-31 18:50:15,787 - poker_game - INFO - ==================================================
2025-10-31 18:50:15,787 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:15,787 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:15,787 - poker_game - DEBUG - Active players: [0, 1, 2, 3]
2025-10-31 18:50:15,788 - poker_game - INFO - Advanced from player 2 to player 3 (seat order)
2025-10-31 18:50:15,788 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:15,788 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:15,788 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:50:15,788 - poker_game - DEBUG - Player bets: [420, 420, 420, 420], Current bet: 420, All same: True
2025-10-31 18:50:15,788 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:50:15,789 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:15,789 - poker_game - INFO - Hand #7, Phase: preflop
2025-10-31 18:50:15,789 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:50:15,789 - poker_game - INFO - Pot: 1700, Current bet: 420
2025-10-31 18:50:15,789 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:15,789 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:15,790 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:15,790 - poker_game - INFO - Community cards: []
2025-10-31 18:50:15,790 - poker_game - INFO -   P0(Agent0): chips=1395, bet=420, status=active
2025-10-31 18:50:15,790 - poker_game - INFO -   P1(Agent1): chips=2475, bet=420, status=active
2025-10-31 18:50:15,790 - poker_game - INFO -   P2(Agent2): chips=1465, bet=420, status=active
2025-10-31 18:50:15,790 - poker_game - INFO -   P3(Agent3): chips=1600, bet=420, status=active
2025-10-31 18:50:15,791 - poker_game - INFO -   P4(Agent4): chips=1365, bet=20, status=folded
2025-10-31 18:50:15,791 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:50:15,792 - poker_game - INFO - ==================================================
2025-10-31 18:50:15,893 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:50:15,894 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:15,894 - poker_game - INFO - Remaining players: 4
2025-10-31 18:50:15,895 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:50:15,895 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:50:15,895 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:50:15,895 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:50:15,895 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:50:15,905 - poker_game - INFO - Starting new betting round
2025-10-31 18:50:15,906 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:50:15,906 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:50:15,906 - poker_game - DEBUG - Active players for new betting round: [0, 1, 2, 3]
2025-10-31 18:50:15,907 - poker_game - DEBUG - Dealer button: 0
2025-10-31 18:50:15,907 - poker_game - INFO - First actor: Player 1 (by phase rule), was 3
2025-10-31 18:50:15,907 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:50:15,907 - poker_game - INFO - Hand #7, Phase: flop
2025-10-31 18:50:15,907 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:15,908 - poker_game - INFO - Pot: 1700, Current bet: 0
2025-10-31 18:50:15,908 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:15,908 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:15,908 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:15,909 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠']
2025-10-31 18:50:15,909 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:15,910 - poker_game - INFO -   P1(Agent1): chips=2475, bet=0, status=active
2025-10-31 18:50:15,911 - poker_game - INFO -   P2(Agent2): chips=1465, bet=0, status=active
2025-10-31 18:50:15,912 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=active
2025-10-31 18:50:15,912 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:15,913 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:50:15,913 - poker_game - INFO - ==================================================
2025-10-31 18:50:15,914 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "flop",
  "your_cards": [
    "8♠",
    "8♥"
  ],
  "community": [
    "3♥",
    "2♠",
    "10♠"
  ],
  "your_chips": 2475,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 420,
  "pot": 1700,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1395,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 1465,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1600,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (2475)"
  ],
  "history": [
    "Player 0 checked",
    "Player 1 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦",
    "Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=J♦, J♠",
    "Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 2 raised to 120",
    "Player 3 raised to 420",
    "Player 4 folded",
    "Player 0 called 400",
    "Player 1 called 400",
    "Player 2 called 300",
    "Flop dealt: 3♥, 2♠, 10♠"
  ]
}
2025-10-31 18:50:15,927 - poker_game - DEBUG - Create Session: {'id': '90e858b0-f09b-4b01-8257-34da6a902513', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904215.9255826}
2025-10-31 18:50:17,787 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 1400,\n  "reasoning": "フロップでペアができたので、ベットを増やしてポットを大きくし、相手を降ろさせたい。相手のチップ量とポットサイズを考慮すると、オールインに近いレイズが適切。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 77, 'promptTokenCount': 1045, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1045}], 'totalTokenCount': 1122}, 'invocationId': 'e-08b07842-0d25-4f55-adff-e1440a860464', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'fsosWnsL', 'timestamp': 1761904215.937702}]
2025-10-31 18:50:17,788 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:50:17,788 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 1400,
  "reasoning": "フロップでペアができたので、ベットを増やしてポットを大きくし、相手を降ろさせたい。相手のチップ量とポットサイズを考慮すると、オールインに近いレイズが適切。"
}
```
2025-10-31 18:50:17,788 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:50:17,788 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 1400,\n  "reasoning": "フロップでペアができたので、ベットを増やしてポットを大きくし、相手を降ろさせたい。相手のチップ量とポットサイズを考慮すると、オールインに近いレイズが適切。"\n}\n```'
2025-10-31 18:50:17,788 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:50:17,788 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 1400,\n  "reasoning": "フロップでペアができたので、ベットを増やしてポットを大きくし、相手を降ろさせたい。相手のチップ量とポットサイズを考慮すると、オールインに近いレイズが適切。"\n}'
2025-10-31 18:50:17,789 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "raise",
  "amount": 1400,
  "reasoning": "フロップでペアができたので、ベットを増やしてポットを大きくし、相手を降ろさせたい。相手のチップ量とポットサイズを考慮すると、オールインに近いレイズが適切。"
}
2025-10-31 18:50:17,789 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'raise', 'amount': 1400, 'reasoning': 'フロップでペアができたので、ベットを増やしてポットを大きくし、相手を降ろさせたい。相手のチップ量とポットサイズを考慮すると、オールインに近いレイズが適切。'}
2025-10-31 18:50:17,789 - poker_game - DEBUG - [Agent1] Extracted values - action: 'raise', amount: 1400
2025-10-31 18:50:17,789 - poker_game - DEBUG - [Agent1] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (2475)']
2025-10-31 18:50:17,789 - poker_game - DEBUG - [Agent1] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:50:17,789 - poker_game - DEBUG - [Agent1] Raise amount 1400 is valid (min: 20)
2025-10-31 18:50:17,789 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'raise', 'amount': 1400}
2025-10-31 18:50:17,789 - poker_game - INFO - [Agent1] Successfully parsed decision: raise, 1400, フロップでペアができたので、ベットを増やしてポットを大きくし、相手を降ろさせたい。相手のチップ量とポットサイズを考慮すると、オールインに近いレイズが適切。
2025-10-31 18:50:17,790 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'raise' with amount 1400
2025-10-31 18:50:17,790 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:17,791 - poker_game - INFO - Hand #7, Phase: flop
2025-10-31 18:50:17,791 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:17,791 - poker_game - INFO - Pot: 1700, Current bet: 0
2025-10-31 18:50:17,791 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:17,791 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:17,792 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:17,792 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠']
2025-10-31 18:50:17,792 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:17,792 - poker_game - INFO -   P1(Agent1): chips=2475, bet=0, status=active
2025-10-31 18:50:17,792 - poker_game - INFO -   P2(Agent2): chips=1465, bet=0, status=active
2025-10-31 18:50:17,793 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=active
2025-10-31 18:50:17,793 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:17,793 - poker_game - INFO - ==================================================
2025-10-31 18:50:17,793 - poker_game - INFO - ACTION_EXECUTED: Player 1 raised to 1400
2025-10-31 18:50:17,800 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:17,801 - poker_game - INFO - Hand #7, Phase: flop
2025-10-31 18:50:17,801 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:17,801 - poker_game - INFO - Pot: 3100, Current bet: 1400
2025-10-31 18:50:17,802 - poker_game - INFO - Last raiser: 1
2025-10-31 18:50:17,802 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:17,803 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:17,804 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠']
2025-10-31 18:50:17,804 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:17,805 - poker_game - INFO -   P1(Agent1): chips=1075, bet=1400, status=active
2025-10-31 18:50:17,807 - poker_game - INFO -   P2(Agent2): chips=1465, bet=0, status=active
2025-10-31 18:50:17,807 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=active
2025-10-31 18:50:17,808 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:17,808 - poker_game - INFO - Extra: Action: Player 1 raised to 1400
2025-10-31 18:50:17,808 - poker_game - INFO - ==================================================
2025-10-31 18:50:17,809 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:17,809 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:17,809 - poker_game - DEBUG - Active players: [0, 1, 2, 3]
2025-10-31 18:50:17,809 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:50:17,809 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:17,810 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:17,810 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:50:17,810 - poker_game - DEBUG - Player bets: [0, 1400, 0, 0], Current bet: 1400, All same: False
2025-10-31 18:50:17,810 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:50:17,811 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:17,811 - poker_game - INFO - Hand #7, Phase: flop
2025-10-31 18:50:17,811 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:50:17,811 - poker_game - INFO - Pot: 3100, Current bet: 1400
2025-10-31 18:50:17,812 - poker_game - INFO - Last raiser: 1
2025-10-31 18:50:17,812 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:17,812 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:17,812 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠']
2025-10-31 18:50:17,813 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:17,813 - poker_game - INFO -   P1(Agent1): chips=1075, bet=1400, status=active
2025-10-31 18:50:17,813 - poker_game - INFO -   P2(Agent2): chips=1465, bet=0, status=active
2025-10-31 18:50:17,813 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=active
2025-10-31 18:50:17,813 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:17,814 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:17,814 - poker_game - INFO - ==================================================
2025-10-31 18:50:17,915 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "flop",
  "your_cards": [
    "4♠",
    "A♠"
  ],
  "community": [
    "3♥",
    "2♠",
    "10♠"
  ],
  "your_chips": 1465,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 420,
  "pot": 3100,
  "to_call": 1400,
  "dealer_button": 0,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1395,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1075,
      "bet": 1400,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1600,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (1400)",
    "raise (min 1420)",
    "all-in (1465)"
  ],
  "history": [
    "Player 1 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦",
    "Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=J♦, J♠",
    "Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 2 raised to 120",
    "Player 3 raised to 420",
    "Player 4 folded",
    "Player 0 called 400",
    "Player 1 called 400",
    "Player 2 called 300",
    "Flop dealt: 3♥, 2♠, 10♠",
    "Player 1 raised to 1400"
  ]
}
2025-10-31 18:50:17,931 - poker_game - DEBUG - Create Session: {'id': '21ade5f6-2b3e-4a65-8a3a-cecabdc01fab', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904217.9288483}
2025-10-31 18:50:17,143 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 1400,\n  "reasoning": "フロップでフラッシュのドロー（同じスートのカードが3枚揃っている状態）が完成し、さらにエースハイ（A♠）なので、フラッシュが完成する可能性が高いです。対戦相手は1400をベットしており、コールして次のカード（ターン）を見る価値があります。ポットオッズ（ポットのサイズに対するベット額の比率）も悪くありません。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 119, 'promptTokenCount': 1064, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1064}], 'totalTokenCount': 1183}, 'invocationId': 'e-8ac0c48b-2a21-41f0-8acd-5c402a00a14c', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'hbZp1lEg', 'timestamp': 1761904217.94121}]
2025-10-31 18:50:17,143 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:50:17,144 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 1400,
  "reasoning": "フロップでフラッシュのドロー（同じスートのカードが3枚揃っている状態）が完成し、さらにエースハイ（A♠）なので、フラッシュが完成する可能性が高いです。対戦相手は1400をベットしており、コールして次のカード（ターン）を見る価値があります。ポットオッズ（ポットのサイズに対するベット額の比率）も悪くありません。"
}
```
2025-10-31 18:50:17,144 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:50:17,144 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 1400,\n  "reasoning": "フロップでフラッシュのドロー（同じスートのカードが3枚揃っている状態）が完成し、さらにエースハイ（A♠）なので、フラッシュが完成する可能性が高いです。対戦相手は1400をベットしており、コールして次のカード（ターン）を見る価値があります。ポットオッズ（ポットのサイズに対するベット額の比率）も悪くありません。"\n}\n```'
2025-10-31 18:50:17,144 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:50:17,144 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 1400,\n  "reasoning": "フロップでフラッシュのドロー（同じスートのカードが3枚揃っている状態）が完成し、さらにエースハイ（A♠）なので、フラッシュが完成する可能性が高いです。対戦相手は1400をベットしており、コールして次のカード（ターン）を見る価値があります。ポットオッズ（ポットのサイズに対するベット額の比率）も悪くありません。"\n}'
2025-10-31 18:50:17,144 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "call",
  "amount": 1400,
  "reasoning": "フロップでフラッシュのドロー（同じスートのカードが3枚揃っている状態）が完成し、さらにエースハイ（A♠）なので、フラッシュが完成する可能性が高いです。対戦相手は1400をベットしており、コールして次のカード（ターン）を見る価値があります。ポットオッズ（ポットのサイズに対するベット額の比率）も悪くありません。"
}
2025-10-31 18:50:17,144 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'call', 'amount': 1400, 'reasoning': 'フロップでフラッシュのドロー（同じスートのカードが3枚揃っている状態）が完成し、さらにエースハイ（A♠）なので、フラッシュが完成する可能性が高いです。対戦相手は1400をベットしており、コールして次のカード（ターン）を見る価値があります。ポットオッズ（ポットのサイズに対するベット額の比率）も悪くありません。'}
2025-10-31 18:50:17,144 - poker_game - DEBUG - [Agent2] Extracted values - action: 'call', amount: 1400
2025-10-31 18:50:17,145 - poker_game - DEBUG - [Agent2] Processing call action - available actions: ['fold', 'call (1400)', 'raise (min 1420)', 'all-in (1465)']
2025-10-31 18:50:17,145 - poker_game - DEBUG - [Agent2] Call amount extracted from 'call (1400)': 1400
2025-10-31 18:50:17,145 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'call', 'amount': 1400}
2025-10-31 18:50:17,145 - poker_game - INFO - [Agent2] Successfully parsed decision: call, 1400, フロップでフラッシュのドロー（同じスートのカードが3枚揃っている状態）が完成し、さらにエースハイ（A♠）なので、フラッシュが完成する可能性が高いです。対戦相手は1400をベットしており、コールして次のカード（ターン）を見る価値があります。ポットオッズ（ポットのサイズに対するベット額の比率）も悪くありません。
2025-10-31 18:50:17,145 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'call' with amount 1400
2025-10-31 18:50:17,145 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:17,146 - poker_game - INFO - Hand #7, Phase: flop
2025-10-31 18:50:17,146 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:50:17,146 - poker_game - INFO - Pot: 3100, Current bet: 1400
2025-10-31 18:50:17,146 - poker_game - INFO - Last raiser: 1
2025-10-31 18:50:17,146 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:17,146 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:17,146 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠']
2025-10-31 18:50:17,146 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:17,146 - poker_game - INFO -   P1(Agent1): chips=1075, bet=1400, status=active
2025-10-31 18:50:17,147 - poker_game - INFO -   P2(Agent2): chips=1465, bet=0, status=active
2025-10-31 18:50:17,147 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=active
2025-10-31 18:50:17,147 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:17,147 - poker_game - INFO - ==================================================
2025-10-31 18:50:17,147 - poker_game - INFO - ACTION_EXECUTED: Player 2 called 1400
2025-10-31 18:50:17,162 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:17,162 - poker_game - INFO - Hand #7, Phase: flop
2025-10-31 18:50:17,163 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:50:17,163 - poker_game - INFO - Pot: 4500, Current bet: 1400
2025-10-31 18:50:17,163 - poker_game - INFO - Last raiser: 1
2025-10-31 18:50:17,163 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:17,163 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:17,163 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠']
2025-10-31 18:50:17,164 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:17,164 - poker_game - INFO -   P1(Agent1): chips=1075, bet=1400, status=active
2025-10-31 18:50:17,164 - poker_game - INFO -   P2(Agent2): chips=65, bet=1400, status=active
2025-10-31 18:50:17,164 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=active
2025-10-31 18:50:17,164 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:17,164 - poker_game - INFO - Extra: Action: Player 2 called 1400
2025-10-31 18:50:17,164 - poker_game - INFO - ==================================================
2025-10-31 18:50:17,164 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:17,164 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:17,164 - poker_game - DEBUG - Active players: [0, 1, 2, 3]
2025-10-31 18:50:17,165 - poker_game - INFO - Advanced from player 2 to player 3 (seat order)
2025-10-31 18:50:17,165 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:17,165 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:17,165 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:50:17,165 - poker_game - DEBUG - Player bets: [0, 1400, 1400, 0], Current bet: 1400, All same: False
2025-10-31 18:50:17,165 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:50:17,165 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:17,165 - poker_game - INFO - Hand #7, Phase: flop
2025-10-31 18:50:17,165 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:50:17,165 - poker_game - INFO - Pot: 4500, Current bet: 1400
2025-10-31 18:50:17,165 - poker_game - INFO - Last raiser: 1
2025-10-31 18:50:17,166 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:17,166 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:17,166 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠']
2025-10-31 18:50:17,166 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:17,166 - poker_game - INFO -   P1(Agent1): chips=1075, bet=1400, status=active
2025-10-31 18:50:17,166 - poker_game - INFO -   P2(Agent2): chips=65, bet=1400, status=active
2025-10-31 18:50:17,166 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=active
2025-10-31 18:50:17,166 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:17,166 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:17,166 - poker_game - INFO - ==================================================
2025-10-31 18:50:17,270 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "flop",
  "your_cards": [
    "5♣",
    "K♣"
  ],
  "community": [
    "3♥",
    "2♠",
    "10♠"
  ],
  "your_chips": 1600,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 420,
  "pot": 4500,
  "to_call": 1400,
  "dealer_button": 0,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1395,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 1075,
      "bet": 1400,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 65,
      "bet": 1400,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (1400)",
    "raise (min 1420)",
    "all-in (1600)"
  ],
  "history": [
    "Showdown: Player 0 hand=Two Pair: Qs and 10s - A♦, Q♠, Q♥, 10♣, 10♠ cards=6♠, A♦",
    "Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=J♦, J♠",
    "Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 2 raised to 120",
    "Player 3 raised to 420",
    "Player 4 folded",
    "Player 0 called 400",
    "Player 1 called 400",
    "Player 2 called 300",
    "Flop dealt: 3♥, 2♠, 10♠",
    "Player 1 raised to 1400",
    "Player 2 called 1400"
  ]
}
2025-10-31 18:50:17,283 - poker_game - DEBUG - Create Session: {'id': '5d4ea4c4-5ed0-4e50-ac2b-0286196d493a', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904217.281257}
2025-10-31 18:50:18,954 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "フロップ（コミュニティカードが開かれた後）の時点で、私の手札は「Kハイ」（キングが一番強いカード）で、フラッシュ（同じスートのカードが5枚揃うこと）やストレート（数字が連続すること）の可能性もありません。ポットは大きいですが、コールするには1400チップ必要で、私のチップは1600しかありません。相手（プレイヤー1とプレイヤー2）はすでに大きなベットをしており、強い手札を持っている可能性が高いです。この状況でコールするのはリスクが高すぎると判断しました。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 149, 'promptTokenCount': 1070, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1070}], 'totalTokenCount': 1219}, 'invocationId': 'e-d77981d1-f6e1-499b-98cf-16e2c32585b1', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '5zWe8FsS', 'timestamp': 1761904217.291483}]
2025-10-31 18:50:18,954 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:50:18,954 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "フロップ（コミュニティカードが開かれた後）の時点で、私の手札は「Kハイ」（キングが一番強いカード）で、フラッシュ（同じスートのカードが5枚揃うこと）やストレート（数字が連続すること）の可能性もありません。ポットは大きいですが、コールするには1400チップ必要で、私のチップは1600しかありません。相手（プレイヤー1とプレイヤー2）はすでに大きなベットをしており、強い手札を持っている可能性が高いです。この状況でコールするのはリスクが高すぎると判断しました。"
}
```
2025-10-31 18:50:18,954 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:50:18,955 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "フロップ（コミュニティカードが開かれた後）の時点で、私の手札は「Kハイ」（キングが一番強いカード）で、フラッシュ（同じスートのカードが5枚揃うこと）やストレート（数字が連続すること）の可能性もありません。ポットは大きいですが、コールするには1400チップ必要で、私のチップは1600しかありません。相手（プレイヤー1とプレイヤー2）はすでに大きなベットをしており、強い手札を持っている可能性が高いです。この状況でコールするのはリスクが高すぎると判断しました。"\n}\n```'
2025-10-31 18:50:18,955 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:50:18,955 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "フロップ（コミュニティカードが開かれた後）の時点で、私の手札は「Kハイ」（キングが一番強いカード）で、フラッシュ（同じスートのカードが5枚揃うこと）やストレート（数字が連続すること）の可能性もありません。ポットは大きいですが、コールするには1400チップ必要で、私のチップは1600しかありません。相手（プレイヤー1とプレイヤー2）はすでに大きなベットをしており、強い手札を持っている可能性が高いです。この状況でコールするのはリスクが高すぎると判断しました。"\n}'
2025-10-31 18:50:18,955 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "フロップ（コミュニティカードが開かれた後）の時点で、私の手札は「Kハイ」（キングが一番強いカード）で、フラッシュ（同じスートのカードが5枚揃うこと）やストレート（数字が連続すること）の可能性もありません。ポットは大きいですが、コールするには1400チップ必要で、私のチップは1600しかありません。相手（プレイヤー1とプレイヤー2）はすでに大きなベットをしており、強い手札を持っている可能性が高いです。この状況でコールするのはリスクが高すぎると判断しました。"
}
2025-10-31 18:50:18,955 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'フロップ（コミュニティカードが開かれた後）の時点で、私の手札は「Kハイ」（キングが一番強いカード）で、フラッシュ（同じスートのカードが5枚揃うこと）やストレート（数字が連続すること）の可能性もありません。ポットは大きいですが、コールするには1400チップ必要で、私のチップは1600しかありません。相手（プレイヤー1とプレイヤー2）はすでに大きなベットをしており、強い手札を持っている可能性が高いです。この状況でコールするのはリスクが高すぎると判断しました。'}
2025-10-31 18:50:18,955 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 18:50:18,955 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 18:50:18,955 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:50:18,955 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, フロップ（コミュニティカードが開かれた後）の時点で、私の手札は「Kハイ」（キングが一番強いカード）で、フラッシュ（同じスートのカードが5枚揃うこと）やストレート（数字が連続すること）の可能性もありません。ポットは大きいですが、コールするには1400チップ必要で、私のチップは1600しかありません。相手（プレイヤー1とプレイヤー2）はすでに大きなベットをしており、強い手札を持っている可能性が高いです。この状況でコールするのはリスクが高すぎると判断しました。
2025-10-31 18:50:18,956 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 18:50:18,956 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:18,956 - poker_game - INFO - Hand #7, Phase: flop
2025-10-31 18:50:18,957 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:50:18,957 - poker_game - INFO - Pot: 4500, Current bet: 1400
2025-10-31 18:50:18,957 - poker_game - INFO - Last raiser: 1
2025-10-31 18:50:18,957 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:18,957 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:18,958 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠']
2025-10-31 18:50:18,958 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:18,958 - poker_game - INFO -   P1(Agent1): chips=1075, bet=1400, status=active
2025-10-31 18:50:18,958 - poker_game - INFO -   P2(Agent2): chips=65, bet=1400, status=active
2025-10-31 18:50:18,958 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=active
2025-10-31 18:50:18,959 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:18,959 - poker_game - INFO - ==================================================
2025-10-31 18:50:18,959 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 18:50:18,979 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:18,980 - poker_game - INFO - Hand #7, Phase: flop
2025-10-31 18:50:18,980 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:50:18,980 - poker_game - INFO - Pot: 4500, Current bet: 1400
2025-10-31 18:50:18,980 - poker_game - INFO - Last raiser: 1
2025-10-31 18:50:18,980 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:18,981 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:50:18,981 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠']
2025-10-31 18:50:18,981 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:18,981 - poker_game - INFO -   P1(Agent1): chips=1075, bet=1400, status=active
2025-10-31 18:50:18,981 - poker_game - INFO -   P2(Agent2): chips=65, bet=1400, status=active
2025-10-31 18:50:18,982 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:18,982 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:18,982 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 18:50:18,982 - poker_game - INFO - ==================================================
2025-10-31 18:50:18,982 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:18,983 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:18,983 - poker_game - DEBUG - Active players: [0, 1, 2]
2025-10-31 18:50:18,983 - poker_game - INFO - Advanced from player 3 to player 0 (seat order)
2025-10-31 18:50:18,983 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:18,983 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:18,983 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:50:18,983 - poker_game - DEBUG - Player bets: [0, 1400, 1400], Current bet: 1400, All same: False
2025-10-31 18:50:18,983 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:50:18,984 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:18,986 - poker_game - INFO - Hand #7, Phase: flop
2025-10-31 18:50:18,989 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:50:18,989 - poker_game - INFO - Pot: 4500, Current bet: 1400
2025-10-31 18:50:18,989 - poker_game - INFO - Last raiser: 1
2025-10-31 18:50:18,989 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:18,990 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:50:18,990 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠']
2025-10-31 18:50:18,990 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:18,990 - poker_game - INFO -   P1(Agent1): chips=1075, bet=1400, status=active
2025-10-31 18:50:18,991 - poker_game - INFO -   P2(Agent2): chips=65, bet=1400, status=active
2025-10-31 18:50:18,991 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:18,991 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:18,991 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:18,991 - poker_game - INFO - ==================================================
2025-10-31 18:50:19,093 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "flop",
  "your_cards": [
    "9♣",
    "9♥"
  ],
  "community": [
    "3♥",
    "2♠",
    "10♠"
  ],
  "your_chips": 1395,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 420,
  "pot": 4500,
  "to_call": 1400,
  "dealer_button": 0,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 1075,
      "bet": 1400,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 65,
      "bet": 1400,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1600,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "all-in (1395)"
  ],
  "history": [
    "Showdown: Player 1 hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠ cards=J♦, J♠",
    "Side pot layer 0: amount=80, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 2 raised to 120",
    "Player 3 raised to 420",
    "Player 4 folded",
    "Player 0 called 400",
    "Player 1 called 400",
    "Player 2 called 300",
    "Flop dealt: 3♥, 2♠, 10♠",
    "Player 1 raised to 1400",
    "Player 2 called 1400",
    "Player 3 folded"
  ]
}
2025-10-31 18:50:19,109 - poker_game - DEBUG - Create Session: {'id': 'd6b31ca7-f377-419a-92af-c0bdb5c33d16', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904219.1025085}
2025-10-31 18:50:21,988 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 1400,\n  "reasoning": "フロップ (Flop - 最初の3枚のコミュニティカード) で、あなたの手札は9のペア (9♣, 9♥) です。コミュニティカードは 3♥, 2♠, 10♠ です。現在のポットは4500で、コールするには1400必要です。対戦相手のPlayer 1は1400をベットしており、Player 2も1400をコールしています。Player 1のベット額はあなたのチップ量 (1395) より多いですが、Player 2のチップ量は非常に少ない (65) です。Player 1のレイズ額はかなりの額ですが、あなたのペアはまだそれほど悪くありません。Player 2がオールインに近い状態であり、Player 1が強気なベットをしている状況を考慮すると、コールしてターン (Turn - 4枚目のコミュニティカード) を見るのが最善と判断しました。もしターンであなたのペアが強くなるカードが出れば、勝てる可能性があります。オールイン (all-in) も選択肢ですが、まだポットに十分なチップがあり、有利な状況になる可能性を残したいです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 281, 'promptTokenCount': 1008, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1008}], 'totalTokenCount': 1289}, 'invocationId': 'e-4765350c-7c4e-4972-8a1f-f0e9f682c22e', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '4Mqx29zo', 'timestamp': 1761904219.123045}]
2025-10-31 18:50:21,988 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:50:21,988 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 1400,
  "reasoning": "フロップ (Flop - 最初の3枚のコミュニティカード) で、あなたの手札は9のペア (9♣, 9♥) です。コミュニティカードは 3♥, 2♠, 10♠ です。現在のポットは4500で、コールするには1400必要です。対戦相手のPlayer 1は1400をベットしており、Player 2も1400をコールしています。Player 1のベット額はあなたのチップ量 (1395) より多いですが、Player 2のチップ量は非常に少ない (65) です。Player 1のレイズ額はかなりの額ですが、あなたのペアはまだそれほど悪くありません。Player 2がオールインに近い状態であり、Player 1が強気なベットをしている状況を考慮すると、コールしてターン (Turn - 4枚目のコミュニティカード) を見るのが最善と判断しました。もしターンであなたのペアが強くなるカードが出れば、勝てる可能性があります。オールイン (all-in) も選択肢ですが、まだポットに十分なチップがあり、有利な状況になる可能性を残したいです。"
}
```
2025-10-31 18:50:21,989 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:50:21,989 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 1400,\n  "reasoning": "フロップ (Flop - 最初の3枚のコミュニティカード) で、あなたの手札は9のペア (9♣, 9♥) です。コミュニティカードは 3♥, 2♠, 10♠ です。現在のポットは4500で、コールするには1400必要です。対戦相手のPlayer 1は1400をベットしており、Player 2も1400をコールしています。Player 1のベット額はあなたのチップ量 (1395) より多いですが、Player 2のチップ量は非常に少ない (65) です。Player 1のレイズ額はかなりの額ですが、あなたのペアはまだそれほど悪くありません。Player 2がオールインに近い状態であり、Player 1が強気なベットをしている状況を考慮すると、コールしてターン (Turn - 4枚目のコミュニティカード) を見るのが最善と判断しました。もしターンであなたのペアが強くなるカードが出れば、勝てる可能性があります。オールイン (all-in) も選択肢ですが、まだポットに十分なチップがあり、有利な状況になる可能性を残したいです。"\n}\n```'
2025-10-31 18:50:21,989 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:50:21,989 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 1400,\n  "reasoning": "フロップ (Flop - 最初の3枚のコミュニティカード) で、あなたの手札は9のペア (9♣, 9♥) です。コミュニティカードは 3♥, 2♠, 10♠ です。現在のポットは4500で、コールするには1400必要です。対戦相手のPlayer 1は1400をベットしており、Player 2も1400をコールしています。Player 1のベット額はあなたのチップ量 (1395) より多いですが、Player 2のチップ量は非常に少ない (65) です。Player 1のレイズ額はかなりの額ですが、あなたのペアはまだそれほど悪くありません。Player 2がオールインに近い状態であり、Player 1が強気なベットをしている状況を考慮すると、コールしてターン (Turn - 4枚目のコミュニティカード) を見るのが最善と判断しました。もしターンであなたのペアが強くなるカードが出れば、勝てる可能性があります。オールイン (all-in) も選択肢ですが、まだポットに十分なチップがあり、有利な状況になる可能性を残したいです。"\n}'
2025-10-31 18:50:21,989 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 1400,
  "reasoning": "フロップ (Flop - 最初の3枚のコミュニティカード) で、あなたの手札は9のペア (9♣, 9♥) です。コミュニティカードは 3♥, 2♠, 10♠ です。現在のポットは4500で、コールするには1400必要です。対戦相手のPlayer 1は1400をベットしており、Player 2も1400をコールしています。Player 1のベット額はあなたのチップ量 (1395) より多いですが、Player 2のチップ量は非常に少ない (65) です。Player 1のレイズ額はかなりの額ですが、あなたのペアはまだそれほど悪くありません。Player 2がオールインに近い状態であり、Player 1が強気なベットをしている状況を考慮すると、コールしてターン (Turn - 4枚目のコミュニティカード) を見るのが最善と判断しました。もしターンであなたのペアが強くなるカードが出れば、勝てる可能性があります。オールイン (all-in) も選択肢ですが、まだポットに十分なチップがあり、有利な状況になる可能性を残したいです。"
}
2025-10-31 18:50:21,989 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 1400, 'reasoning': 'フロップ (Flop - 最初の3枚のコミュニティカード) で、あなたの手札は9のペア (9♣, 9♥) です。コミュニティカードは 3♥, 2♠, 10♠ です。現在のポットは4500で、コールするには1400必要です。対戦相手のPlayer 1は1400をベットしており、Player 2も1400をコールしています。Player 1のベット額はあなたのチップ量 (1395) より多いですが、Player 2のチップ量は非常に少ない (65) です。Player 1のレイズ額はかなりの額ですが、あなたのペアはまだそれほど悪くありません。Player 2がオールインに近い状態であり、Player 1が強気なベットをしている状況を考慮すると、コールしてターン (Turn - 4枚目のコミュニティカード) を見るのが最善と判断しました。もしターンであなたのペアが強くなるカードが出れば、勝てる可能性があります。オールイン (all-in) も選択肢ですが、まだポットに十分なチップがあり、有利な状況になる可能性を残したいです。'}
2025-10-31 18:50:21,989 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 1400
2025-10-31 18:50:21,990 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'all-in (1395)']
2025-10-31 18:50:21,990 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 1400}
2025-10-31 18:50:21,990 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 1400, フロップ (Flop - 最初の3枚のコミュニティカード) で、あなたの手札は9のペア (9♣, 9♥) です。コミュニティカードは 3♥, 2♠, 10♠ です。現在のポットは4500で、コールするには1400必要です。対戦相手のPlayer 1は1400をベットしており、Player 2も1400をコールしています。Player 1のベット額はあなたのチップ量 (1395) より多いですが、Player 2のチップ量は非常に少ない (65) です。Player 1のレイズ額はかなりの額ですが、あなたのペアはまだそれほど悪くありません。Player 2がオールインに近い状態であり、Player 1が強気なベットをしている状況を考慮すると、コールしてターン (Turn - 4枚目のコミュニティカード) を見るのが最善と判断しました。もしターンであなたのペアが強くなるカードが出れば、勝てる可能性があります。オールイン (all-in) も選択肢ですが、まだポットに十分なチップがあり、有利な状況になる可能性を残したいです。
2025-10-31 18:50:21,990 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 1400
2025-10-31 18:50:21,991 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:21,991 - poker_game - INFO - Hand #7, Phase: flop
2025-10-31 18:50:21,991 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:50:21,991 - poker_game - INFO - Pot: 4500, Current bet: 1400
2025-10-31 18:50:21,992 - poker_game - INFO - Last raiser: 1
2025-10-31 18:50:21,992 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:21,992 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:50:21,992 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠']
2025-10-31 18:50:21,992 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:21,993 - poker_game - INFO -   P1(Agent1): chips=1075, bet=1400, status=active
2025-10-31 18:50:21,993 - poker_game - INFO -   P2(Agent2): chips=65, bet=1400, status=active
2025-10-31 18:50:21,993 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:21,993 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:21,993 - poker_game - INFO - ==================================================
2025-10-31 18:50:21,994 - poker_game - WARNING - Player 0 cannot call - to_call: 1400, chips: 1395
2025-10-31 18:50:21,994 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 18:50:21,994 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:21,994 - poker_game - INFO - Hand #7, Phase: flop
2025-10-31 18:50:21,995 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:50:21,995 - poker_game - INFO - Pot: 4500, Current bet: 1400
2025-10-31 18:50:21,995 - poker_game - INFO - Last raiser: 1
2025-10-31 18:50:21,995 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:21,995 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:50:21,997 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠']
2025-10-31 18:50:21,998 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:21,998 - poker_game - INFO -   P1(Agent1): chips=1075, bet=1400, status=active
2025-10-31 18:50:21,998 - poker_game - INFO -   P2(Agent2): chips=65, bet=1400, status=active
2025-10-31 18:50:21,998 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:21,999 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:21,999 - poker_game - INFO - ==================================================
2025-10-31 18:50:21,999 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 18:50:22,008 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:22,009 - poker_game - INFO - Hand #7, Phase: flop
2025-10-31 18:50:22,009 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:50:22,009 - poker_game - INFO - Pot: 4500, Current bet: 1400
2025-10-31 18:50:22,009 - poker_game - INFO - Last raiser: 1
2025-10-31 18:50:22,009 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:22,010 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:22,010 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠']
2025-10-31 18:50:22,010 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:22,010 - poker_game - INFO -   P1(Agent1): chips=1075, bet=1400, status=active
2025-10-31 18:50:22,010 - poker_game - INFO -   P2(Agent2): chips=65, bet=1400, status=active
2025-10-31 18:50:22,010 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:22,011 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:22,011 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 18:50:22,011 - poker_game - INFO - ==================================================
2025-10-31 18:50:22,011 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:22,011 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:22,011 - poker_game - DEBUG - Active players: [1, 2]
2025-10-31 18:50:22,011 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:50:22,012 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:22,012 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:22,012 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:50:22,012 - poker_game - DEBUG - Player bets: [1400, 1400], Current bet: 1400, All same: True
2025-10-31 18:50:22,012 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:50:22,012 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:22,013 - poker_game - INFO - Hand #7, Phase: flop
2025-10-31 18:50:22,013 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:22,013 - poker_game - INFO - Pot: 4500, Current bet: 1400
2025-10-31 18:50:22,014 - poker_game - INFO - Last raiser: 1
2025-10-31 18:50:22,014 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:22,015 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:22,015 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠']
2025-10-31 18:50:22,016 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:22,016 - poker_game - INFO -   P1(Agent1): chips=1075, bet=1400, status=active
2025-10-31 18:50:22,016 - poker_game - INFO -   P2(Agent2): chips=65, bet=1400, status=active
2025-10-31 18:50:22,016 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:22,017 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:22,017 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:50:22,017 - poker_game - INFO - ==================================================
2025-10-31 18:50:22,119 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:50:22,120 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:22,120 - poker_game - INFO - Remaining players: 2
2025-10-31 18:50:22,120 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:50:22,120 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:50:22,121 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 18:50:22,130 - poker_game - INFO - Starting new betting round
2025-10-31 18:50:22,131 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:50:22,131 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:50:22,132 - poker_game - DEBUG - Active players for new betting round: [1, 2]
2025-10-31 18:50:22,132 - poker_game - DEBUG - Dealer button: 0
2025-10-31 18:50:22,132 - poker_game - INFO - First actor: Player 1 (by phase rule), was 1
2025-10-31 18:50:22,133 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:50:22,133 - poker_game - INFO - Hand #7, Phase: turn
2025-10-31 18:50:22,133 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:22,134 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:22,134 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:22,135 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:22,135 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:22,136 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣']
2025-10-31 18:50:22,137 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:22,137 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:22,138 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:22,139 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:22,140 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:22,140 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 18:50:22,140 - poker_game - INFO - ==================================================
2025-10-31 18:50:22,141 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "turn",
  "your_cards": [
    "8♠",
    "8♥"
  ],
  "community": [
    "3♥",
    "2♠",
    "10♠",
    "J♣"
  ],
  "your_chips": 1075,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 1820,
  "pot": 4500,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1395,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 65,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1600,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1075)"
  ],
  "history": [
    "Side pot layer 1: amount=690, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 2 raised to 120",
    "Player 3 raised to 420",
    "Player 4 folded",
    "Player 0 called 400",
    "Player 1 called 400",
    "Player 2 called 300",
    "Flop dealt: 3♥, 2♠, 10♠",
    "Player 1 raised to 1400",
    "Player 2 called 1400",
    "Player 3 folded",
    "Player 0 folded",
    "Turn dealt: J♣"
  ]
}
2025-10-31 18:50:22,153 - poker_game - DEBUG - Create Session: {'id': 'c878d336-be8d-4d2a-bc1c-2139e9f6b74f', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904222.151571}
2025-10-31 18:50:24,608 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "あなたはターン（Turn）の段階で、あなたの手札は8のペア（Two Pair: 8s）です。コミュニティカードにはJ（Jack）があり、あなたの手札の8と合わせてツーペア（Two Pair: Js and 8s）が成立します。しかし、相手のプレイヤー2はすでにJのワンペア（One Pair: J）を持っており、さらにポットには他のプレイヤーがベットしたチップも積み重なっています。相手のベット額が不明で、コール額も0のため、チェック（Check）またはコール（Call）が可能です。相手がベットしてきた場合、あなたのツーペアは強いハンドですが、相手のベット額によってはフォールド（Fold）も考慮する必要があります。しかし、現時点では相手のベット額が0なので、チェック（Check）を選択します。もし相手がベットしてきた場合は、そのベット額に応じてコール（Call）またはフォールド（Fold）を判断します。今回は相手のベット額が0なので、アクションはチェック（Check）となります。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 242, 'promptTokenCount': 953, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 953}], 'totalTokenCount': 1195}, 'invocationId': 'e-6e09104e-eca9-4bbd-9bef-0f4357414fc8', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'JXO6JTsU', 'timestamp': 1761904222.162785}]
2025-10-31 18:50:24,608 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:50:24,609 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "あなたはターン（Turn）の段階で、あなたの手札は8のペア（Two Pair: 8s）です。コミュニティカードにはJ（Jack）があり、あなたの手札の8と合わせてツーペア（Two Pair: Js and 8s）が成立します。しかし、相手のプレイヤー2はすでにJのワンペア（One Pair: J）を持っており、さらにポットには他のプレイヤーがベットしたチップも積み重なっています。相手のベット額が不明で、コール額も0のため、チェック（Check）またはコール（Call）が可能です。相手がベットしてきた場合、あなたのツーペアは強いハンドですが、相手のベット額によってはフォールド（Fold）も考慮する必要があります。しかし、現時点では相手のベット額が0なので、チェック（Check）を選択します。もし相手がベットしてきた場合は、そのベット額に応じてコール（Call）またはフォールド（Fold）を判断します。今回は相手のベット額が0なので、アクションはチェック（Check）となります。"
}
```
2025-10-31 18:50:24,609 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:50:24,609 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "あなたはターン（Turn）の段階で、あなたの手札は8のペア（Two Pair: 8s）です。コミュニティカードにはJ（Jack）があり、あなたの手札の8と合わせてツーペア（Two Pair: Js and 8s）が成立します。しかし、相手のプレイヤー2はすでにJのワンペア（One Pair: J）を持っており、さらにポットには他のプレイヤーがベットしたチップも積み重なっています。相手のベット額が不明で、コール額も0のため、チェック（Check）またはコール（Call）が可能です。相手がベットしてきた場合、あなたのツーペアは強いハンドですが、相手のベット額によってはフォールド（Fold）も考慮する必要があります。しかし、現時点では相手のベット額が0なので、チェック（Check）を選択します。もし相手がベットしてきた場合は、そのベット額に応じてコール（Call）またはフォールド（Fold）を判断します。今回は相手のベット額が0なので、アクションはチェック（Check）となります。"\n}\n```'
2025-10-31 18:50:24,609 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:50:24,610 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "あなたはターン（Turn）の段階で、あなたの手札は8のペア（Two Pair: 8s）です。コミュニティカードにはJ（Jack）があり、あなたの手札の8と合わせてツーペア（Two Pair: Js and 8s）が成立します。しかし、相手のプレイヤー2はすでにJのワンペア（One Pair: J）を持っており、さらにポットには他のプレイヤーがベットしたチップも積み重なっています。相手のベット額が不明で、コール額も0のため、チェック（Check）またはコール（Call）が可能です。相手がベットしてきた場合、あなたのツーペアは強いハンドですが、相手のベット額によってはフォールド（Fold）も考慮する必要があります。しかし、現時点では相手のベット額が0なので、チェック（Check）を選択します。もし相手がベットしてきた場合は、そのベット額に応じてコール（Call）またはフォールド（Fold）を判断します。今回は相手のベット額が0なので、アクションはチェック（Check）となります。"\n}'
2025-10-31 18:50:24,610 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "あなたはターン（Turn）の段階で、あなたの手札は8のペア（Two Pair: 8s）です。コミュニティカードにはJ（Jack）があり、あなたの手札の8と合わせてツーペア（Two Pair: Js and 8s）が成立します。しかし、相手のプレイヤー2はすでにJのワンペア（One Pair: J）を持っており、さらにポットには他のプレイヤーがベットしたチップも積み重なっています。相手のベット額が不明で、コール額も0のため、チェック（Check）またはコール（Call）が可能です。相手がベットしてきた場合、あなたのツーペアは強いハンドですが、相手のベット額によってはフォールド（Fold）も考慮する必要があります。しかし、現時点では相手のベット額が0なので、チェック（Check）を選択します。もし相手がベットしてきた場合は、そのベット額に応じてコール（Call）またはフォールド（Fold）を判断します。今回は相手のベット額が0なので、アクションはチェック（Check）となります。"
}
2025-10-31 18:50:24,610 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'あなたはターン（Turn）の段階で、あなたの手札は8のペア（Two Pair: 8s）です。コミュニティカードにはJ（Jack）があり、あなたの手札の8と合わせてツーペア（Two Pair: Js and 8s）が成立します。しかし、相手のプレイヤー2はすでにJのワンペア（One Pair: J）を持っており、さらにポットには他のプレイヤーがベットしたチップも積み重なっています。相手のベット額が不明で、コール額も0のため、チェック（Check）またはコール（Call）が可能です。相手がベットしてきた場合、あなたのツーペアは強いハンドですが、相手のベット額によってはフォールド（Fold）も考慮する必要があります。しかし、現時点では相手のベット額が0なので、チェック（Check）を選択します。もし相手がベットしてきた場合は、そのベット額に応じてコール（Call）またはフォールド（Fold）を判断します。今回は相手のベット額が0なので、アクションはチェック（Check）となります。'}
2025-10-31 18:50:24,610 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 0
2025-10-31 18:50:24,610 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1075)']
2025-10-31 18:50:24,611 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:50:24,611 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 0, あなたはターン（Turn）の段階で、あなたの手札は8のペア（Two Pair: 8s）です。コミュニティカードにはJ（Jack）があり、あなたの手札の8と合わせてツーペア（Two Pair: Js and 8s）が成立します。しかし、相手のプレイヤー2はすでにJのワンペア（One Pair: J）を持っており、さらにポットには他のプレイヤーがベットしたチップも積み重なっています。相手のベット額が不明で、コール額も0のため、チェック（Check）またはコール（Call）が可能です。相手がベットしてきた場合、あなたのツーペアは強いハンドですが、相手のベット額によってはフォールド（Fold）も考慮する必要があります。しかし、現時点では相手のベット額が0なので、チェック（Check）を選択します。もし相手がベットしてきた場合は、そのベット額に応じてコール（Call）またはフォールド（Fold）を判断します。今回は相手のベット額が0なので、アクションはチェック（Check）となります。
2025-10-31 18:50:24,612 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 0
2025-10-31 18:50:24,612 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:24,613 - poker_game - INFO - Hand #7, Phase: turn
2025-10-31 18:50:24,613 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:24,613 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:24,614 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:24,614 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:24,615 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:24,615 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣']
2025-10-31 18:50:24,615 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:24,616 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:24,616 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:24,616 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:24,616 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:24,617 - poker_game - INFO - ==================================================
2025-10-31 18:50:24,617 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:50:24,628 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:24,629 - poker_game - INFO - Hand #7, Phase: turn
2025-10-31 18:50:24,629 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:24,630 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:24,630 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:24,631 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:24,631 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:24,631 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣']
2025-10-31 18:50:24,632 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:24,632 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:24,632 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:24,632 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:24,633 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:24,633 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:50:24,633 - poker_game - INFO - ==================================================
2025-10-31 18:50:24,633 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:24,634 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:24,634 - poker_game - DEBUG - Active players: [1, 2]
2025-10-31 18:50:24,634 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:50:24,634 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:24,634 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:24,635 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:50:24,635 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:50:24,635 - poker_game - DEBUG - Active player indices: [1, 2]
2025-10-31 18:50:24,635 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:50:24,635 - poker_game - DEBUG - Current player index: 2
2025-10-31 18:50:24,635 - poker_game - DEBUG - First actor index: 1
2025-10-31 18:50:24,635 - poker_game - DEBUG - Betting continues: Current player 2 != first actor 1
2025-10-31 18:50:24,636 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:24,636 - poker_game - INFO - Hand #7, Phase: turn
2025-10-31 18:50:24,636 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:50:24,636 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:24,636 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:24,637 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:24,637 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:24,637 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣']
2025-10-31 18:50:24,637 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:24,637 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:24,637 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:24,637 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:24,638 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:24,638 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:24,638 - poker_game - INFO - ==================================================
2025-10-31 18:50:24,739 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "turn",
  "your_cards": [
    "4♠",
    "A♠"
  ],
  "community": [
    "3♥",
    "2♠",
    "10♠",
    "J♣"
  ],
  "your_chips": 65,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 1820,
  "pot": 4500,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1395,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 1075,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1600,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (65)"
  ],
  "history": [
    "Side pot layer 2: amount=1540, winners=1 best_hand=Two Pair: Qs and Js - K♣, Q♠, Q♥, J♦, J♠",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 2 raised to 120",
    "Player 3 raised to 420",
    "Player 4 folded",
    "Player 0 called 400",
    "Player 1 called 400",
    "Player 2 called 300",
    "Flop dealt: 3♥, 2♠, 10♠",
    "Player 1 raised to 1400",
    "Player 2 called 1400",
    "Player 3 folded",
    "Player 0 folded",
    "Turn dealt: J♣",
    "Player 1 checked"
  ]
}
2025-10-31 18:50:24,757 - poker_game - DEBUG - Create Session: {'id': '3cc3467d-e911-4b94-83a8-bcbdfa6aa4d5', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904224.7539258}
2025-10-31 18:50:26,581 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "あなたの手札はA♠ 4♠で、ボードは3♥ 2♠ 10♠ J♣です。フラッシュのドロー（同じスートが5枚揃うこと）が完成しました。プレイヤー1はチェックしたので、コール（相手のベット額と同額を支払うこと）して、リバー（最後のコミュニティカード）でフラッシュが完成する可能性に賭けます。ポットは4500で、コール額は0なので、チェックと同じです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 135, 'promptTokenCount': 914, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 914}], 'totalTokenCount': 1049}, 'invocationId': 'e-c4d92699-f502-4052-a883-8b9adfddae9b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '8P3tCHvM', 'timestamp': 1761904224.772751}]
2025-10-31 18:50:26,581 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:50:26,582 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "あなたの手札はA♠ 4♠で、ボードは3♥ 2♠ 10♠ J♣です。フラッシュのドロー（同じスートが5枚揃うこと）が完成しました。プレイヤー1はチェックしたので、コール（相手のベット額と同額を支払うこと）して、リバー（最後のコミュニティカード）でフラッシュが完成する可能性に賭けます。ポットは4500で、コール額は0なので、チェックと同じです。"
}
```
2025-10-31 18:50:26,582 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:50:26,583 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "あなたの手札はA♠ 4♠で、ボードは3♥ 2♠ 10♠ J♣です。フラッシュのドロー（同じスートが5枚揃うこと）が完成しました。プレイヤー1はチェックしたので、コール（相手のベット額と同額を支払うこと）して、リバー（最後のコミュニティカード）でフラッシュが完成する可能性に賭けます。ポットは4500で、コール額は0なので、チェックと同じです。"\n}\n```'
2025-10-31 18:50:26,583 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:50:26,583 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "あなたの手札はA♠ 4♠で、ボードは3♥ 2♠ 10♠ J♣です。フラッシュのドロー（同じスートが5枚揃うこと）が完成しました。プレイヤー1はチェックしたので、コール（相手のベット額と同額を支払うこと）して、リバー（最後のコミュニティカード）でフラッシュが完成する可能性に賭けます。ポットは4500で、コール額は0なので、チェックと同じです。"\n}'
2025-10-31 18:50:26,583 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "あなたの手札はA♠ 4♠で、ボードは3♥ 2♠ 10♠ J♣です。フラッシュのドロー（同じスートが5枚揃うこと）が完成しました。プレイヤー1はチェックしたので、コール（相手のベット額と同額を支払うこと）して、リバー（最後のコミュニティカード）でフラッシュが完成する可能性に賭けます。ポットは4500で、コール額は0なので、チェックと同じです。"
}
2025-10-31 18:50:26,583 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'あなたの手札はA♠ 4♠で、ボードは3♥ 2♠ 10♠ J♣です。フラッシュのドロー（同じスートが5枚揃うこと）が完成しました。プレイヤー1はチェックしたので、コール（相手のベット額と同額を支払うこと）して、リバー（最後のコミュニティカード）でフラッシュが完成する可能性に賭けます。ポットは4500で、コール額は0なので、チェックと同じです。'}
2025-10-31 18:50:26,584 - poker_game - DEBUG - [Agent2] Extracted values - action: 'call', amount: 0
2025-10-31 18:50:26,584 - poker_game - DEBUG - [Agent2] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (65)']
2025-10-31 18:50:26,584 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:50:26,584 - poker_game - INFO - [Agent2] Successfully parsed decision: call, 0, あなたの手札はA♠ 4♠で、ボードは3♥ 2♠ 10♠ J♣です。フラッシュのドロー（同じスートが5枚揃うこと）が完成しました。プレイヤー1はチェックしたので、コール（相手のベット額と同額を支払うこと）して、リバー（最後のコミュニティカード）でフラッシュが完成する可能性に賭けます。ポットは4500で、コール額は0なので、チェックと同じです。
2025-10-31 18:50:26,585 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'call' with amount 0
2025-10-31 18:50:26,586 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:26,587 - poker_game - INFO - Hand #7, Phase: turn
2025-10-31 18:50:26,587 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:50:26,587 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:26,588 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:26,589 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:26,589 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:26,589 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣']
2025-10-31 18:50:26,590 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:26,590 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:26,591 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:26,591 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:26,592 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:26,592 - poker_game - INFO - ==================================================
2025-10-31 18:50:26,592 - poker_game - INFO - ACTION_EXECUTED: Player 2 checked
2025-10-31 18:50:26,603 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:26,603 - poker_game - INFO - Hand #7, Phase: turn
2025-10-31 18:50:26,604 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:50:26,604 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:26,605 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:26,605 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:26,605 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:26,606 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣']
2025-10-31 18:50:26,606 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:26,606 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:26,607 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:26,607 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:26,608 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:26,608 - poker_game - INFO - Extra: Action: Player 2 checked
2025-10-31 18:50:26,609 - poker_game - INFO - ==================================================
2025-10-31 18:50:26,609 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:26,609 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:26,610 - poker_game - DEBUG - Active players: [1, 2]
2025-10-31 18:50:26,610 - poker_game - INFO - Advanced from player 2 to player 1 (seat order)
2025-10-31 18:50:26,610 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:26,610 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:26,611 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:50:26,611 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:50:26,611 - poker_game - DEBUG - Active player indices: [1, 2]
2025-10-31 18:50:26,611 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:50:26,611 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:50:26,612 - poker_game - DEBUG - First actor index: 1
2025-10-31 18:50:26,612 - poker_game - INFO - Betting complete: Back to first actor 1 (all players have acted)
2025-10-31 18:50:26,612 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:26,613 - poker_game - INFO - Hand #7, Phase: turn
2025-10-31 18:50:26,613 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:26,614 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:26,614 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:26,614 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:26,615 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:26,615 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣']
2025-10-31 18:50:26,616 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:26,616 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:26,617 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:26,617 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:26,617 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:26,618 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:50:26,618 - poker_game - INFO - ==================================================
2025-10-31 18:50:26,719 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 18:50:26,720 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:26,721 - poker_game - INFO - Remaining players: 2
2025-10-31 18:50:26,721 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:50:26,721 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:50:26,721 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 18:50:26,732 - poker_game - INFO - Starting new betting round
2025-10-31 18:50:26,732 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:50:26,733 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:50:26,733 - poker_game - DEBUG - Active players for new betting round: [1, 2]
2025-10-31 18:50:26,733 - poker_game - DEBUG - Dealer button: 0
2025-10-31 18:50:26,734 - poker_game - INFO - First actor: Player 1 (by phase rule), was 1
2025-10-31 18:50:26,734 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:50:26,734 - poker_game - INFO - Hand #7, Phase: river
2025-10-31 18:50:26,735 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:26,736 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:26,736 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:26,737 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:26,738 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:26,738 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣', '2♦']
2025-10-31 18:50:26,739 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:26,739 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:26,740 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:26,740 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:26,740 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:26,741 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 18:50:26,741 - poker_game - INFO - ==================================================
2025-10-31 18:50:26,742 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "river",
  "your_cards": [
    "8♠",
    "8♥"
  ],
  "community": [
    "3♥",
    "2♠",
    "10♠",
    "J♣",
    "2♦"
  ],
  "your_chips": 1075,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 1820,
  "pot": 4500,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1395,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 65,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1600,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1075)"
  ],
  "history": [
    "Player 2 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 2 raised to 120",
    "Player 3 raised to 420",
    "Player 4 folded",
    "Player 0 called 400",
    "Player 1 called 400",
    "Player 2 called 300",
    "Flop dealt: 3♥, 2♠, 10♠",
    "Player 1 raised to 1400",
    "Player 2 called 1400",
    "Player 3 folded",
    "Player 0 folded",
    "Turn dealt: J♣",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 2♦"
  ]
}
2025-10-31 18:50:26,757 - poker_game - DEBUG - Create Session: {'id': '0dd3d049-4eeb-45fb-b1f2-22dade6aa76b', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904226.7536912}
2025-10-31 18:50:29,060 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ターン）で、あなたの手札は「8♠ 8♥」で、コミュニティカードは「3♥ 2♠ 10♠ J♣ 2♦」です。これにより、あなたのハンドは「ツーペア（8と2）」になります。このハンドはそれほど強くありません。現在のポットは4500で、あなたはベットせずにチェック（コールと同じように、ベットせずに進行）できます。対戦相手のプレイヤー2はチップが65しか残っておらず、すでにチェックしているので、これ以上ベットしてくる可能性は低いです。そのため、チェックしてショーダウン（手札を開いて勝者を決めること）に進むのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 177, 'promptTokenCount': 881, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 881}], 'totalTokenCount': 1058}, 'invocationId': 'e-af0ab673-6765-4d83-a9fb-4c99804f14f1', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'dTESRwp7', 'timestamp': 1761904226.767268}]
2025-10-31 18:50:29,060 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:50:29,060 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ターン）で、あなたの手札は「8♠ 8♥」で、コミュニティカードは「3♥ 2♠ 10♠ J♣ 2♦」です。これにより、あなたのハンドは「ツーペア（8と2）」になります。このハンドはそれほど強くありません。現在のポットは4500で、あなたはベットせずにチェック（コールと同じように、ベットせずに進行）できます。対戦相手のプレイヤー2はチップが65しか残っておらず、すでにチェックしているので、これ以上ベットしてくる可能性は低いです。そのため、チェックしてショーダウン（手札を開いて勝者を決めること）に進むのが最善の選択です。"
}
```
2025-10-31 18:50:29,060 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:50:29,061 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ターン）で、あなたの手札は「8♠ 8♥」で、コミュニティカードは「3♥ 2♠ 10♠ J♣ 2♦」です。これにより、あなたのハンドは「ツーペア（8と2）」になります。このハンドはそれほど強くありません。現在のポットは4500で、あなたはベットせずにチェック（コールと同じように、ベットせずに進行）できます。対戦相手のプレイヤー2はチップが65しか残っておらず、すでにチェックしているので、これ以上ベットしてくる可能性は低いです。そのため、チェックしてショーダウン（手札を開いて勝者を決めること）に進むのが最善の選択です。"\n}\n```'
2025-10-31 18:50:29,061 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:50:29,061 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ターン）で、あなたの手札は「8♠ 8♥」で、コミュニティカードは「3♥ 2♠ 10♠ J♣ 2♦」です。これにより、あなたのハンドは「ツーペア（8と2）」になります。このハンドはそれほど強くありません。現在のポットは4500で、あなたはベットせずにチェック（コールと同じように、ベットせずに進行）できます。対戦相手のプレイヤー2はチップが65しか残っておらず、すでにチェックしているので、これ以上ベットしてくる可能性は低いです。そのため、チェックしてショーダウン（手札を開いて勝者を決めること）に進むのが最善の選択です。"\n}'
2025-10-31 18:50:29,061 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ターン）で、あなたの手札は「8♠ 8♥」で、コミュニティカードは「3♥ 2♠ 10♠ J♣ 2♦」です。これにより、あなたのハンドは「ツーペア（8と2）」になります。このハンドはそれほど強くありません。現在のポットは4500で、あなたはベットせずにチェック（コールと同じように、ベットせずに進行）できます。対戦相手のプレイヤー2はチップが65しか残っておらず、すでにチェックしているので、これ以上ベットしてくる可能性は低いです。そのため、チェックしてショーダウン（手札を開いて勝者を決めること）に進むのが最善の選択です。"
}
2025-10-31 18:50:29,061 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最終ターン）で、あなたの手札は「8♠ 8♥」で、コミュニティカードは「3♥ 2♠ 10♠ J♣ 2♦」です。これにより、あなたのハンドは「ツーペア（8と2）」になります。このハンドはそれほど強くありません。現在のポットは4500で、あなたはベットせずにチェック（コールと同じように、ベットせずに進行）できます。対戦相手のプレイヤー2はチップが65しか残っておらず、すでにチェックしているので、これ以上ベットしてくる可能性は低いです。そのため、チェックしてショーダウン（手札を開いて勝者を決めること）に進むのが最善の選択です。'}
2025-10-31 18:50:29,061 - poker_game - DEBUG - [Agent1] Extracted values - action: 'check', amount: 0
2025-10-31 18:50:29,061 - poker_game - DEBUG - [Agent1] Action 'check' normalized - amount set to 0
2025-10-31 18:50:29,061 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:50:29,061 - poker_game - INFO - [Agent1] Successfully parsed decision: check, 0, リバー（最終ターン）で、あなたの手札は「8♠ 8♥」で、コミュニティカードは「3♥ 2♠ 10♠ J♣ 2♦」です。これにより、あなたのハンドは「ツーペア（8と2）」になります。このハンドはそれほど強くありません。現在のポットは4500で、あなたはベットせずにチェック（コールと同じように、ベットせずに進行）できます。対戦相手のプレイヤー2はチップが65しか残っておらず、すでにチェックしているので、これ以上ベットしてくる可能性は低いです。そのため、チェックしてショーダウン（手札を開いて勝者を決めること）に進むのが最善の選択です。
2025-10-31 18:50:29,062 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'check' with amount 0
2025-10-31 18:50:29,062 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:29,062 - poker_game - INFO - Hand #7, Phase: river
2025-10-31 18:50:29,062 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:29,062 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:29,062 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:29,062 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:29,062 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:29,063 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣', '2♦']
2025-10-31 18:50:29,063 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:29,063 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:29,063 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:29,063 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:29,063 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:29,063 - poker_game - INFO - ==================================================
2025-10-31 18:50:29,063 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:50:29,076 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:29,077 - poker_game - INFO - Hand #7, Phase: river
2025-10-31 18:50:29,077 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:29,077 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:29,078 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:29,078 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:29,078 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:29,078 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣', '2♦']
2025-10-31 18:50:29,079 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:29,079 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:29,079 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:29,079 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:29,080 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:29,080 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:50:29,080 - poker_game - INFO - ==================================================
2025-10-31 18:50:29,081 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:29,081 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:29,081 - poker_game - DEBUG - Active players: [1, 2]
2025-10-31 18:50:29,081 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:50:29,081 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:29,081 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:29,082 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:50:29,082 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:50:29,082 - poker_game - DEBUG - Active player indices: [1, 2]
2025-10-31 18:50:29,082 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:50:29,082 - poker_game - DEBUG - Current player index: 2
2025-10-31 18:50:29,082 - poker_game - DEBUG - First actor index: 1
2025-10-31 18:50:29,082 - poker_game - DEBUG - Betting continues: Current player 2 != first actor 1
2025-10-31 18:50:29,082 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:29,083 - poker_game - INFO - Hand #7, Phase: river
2025-10-31 18:50:29,083 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:50:29,083 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:29,083 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:29,083 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:29,083 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:29,083 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣', '2♦']
2025-10-31 18:50:29,084 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:29,084 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:29,084 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:29,084 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:29,085 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:29,085 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:29,085 - poker_game - INFO - ==================================================
2025-10-31 18:50:29,187 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "river",
  "your_cards": [
    "4♠",
    "A♠"
  ],
  "community": [
    "3♥",
    "2♠",
    "10♠",
    "J♣",
    "2♦"
  ],
  "your_chips": 65,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 1820,
  "pot": 4500,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1395,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 1075,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1600,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (65)"
  ],
  "history": [
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 2 raised to 120",
    "Player 3 raised to 420",
    "Player 4 folded",
    "Player 0 called 400",
    "Player 1 called 400",
    "Player 2 called 300",
    "Flop dealt: 3♥, 2♠, 10♠",
    "Player 1 raised to 1400",
    "Player 2 called 1400",
    "Player 3 folded",
    "Player 0 folded",
    "Turn dealt: J♣",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 2♦",
    "Player 1 checked"
  ]
}
2025-10-31 18:50:29,198 - poker_game - DEBUG - Create Session: {'id': '94b49bd6-f172-4ced-9fc4-43060ffb1b8f', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904229.1963413}
2025-10-31 18:50:31,675 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、コミュニティカード（場に開かれたカード）は『3♥, 2♠, 10♠, J♣, 2♦』です。あなたの手札は『4♠, A♠』なので、フラッシュ（同じスートのカードが5枚揃うこと）は完成していません。しかし、場にペア（同じ数字のカードが2枚揃うこと）ができており、あなたのA（エース）は強い役を作る可能性があります。対戦相手（Player 1）はチェックをしているので、強気なベットをしていないと考えられます。コール（相手のベット額と同額を支払うこと）は無料（to_call: 0）なので、チェック（アクションを起こさずに流れること）と同じです。これで相手の手札をさらに見ることができます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 207, 'promptTokenCount': 874, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 874}], 'totalTokenCount': 1081}, 'invocationId': 'e-1e57cf40-4ccb-4afc-b674-850247af13e0', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'h9ACtPA2', 'timestamp': 1761904229.209974}]
2025-10-31 18:50:31,676 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:50:31,676 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "リバー（最終ストリート）で、コミュニティカード（場に開かれたカード）は『3♥, 2♠, 10♠, J♣, 2♦』です。あなたの手札は『4♠, A♠』なので、フラッシュ（同じスートのカードが5枚揃うこと）は完成していません。しかし、場にペア（同じ数字のカードが2枚揃うこと）ができており、あなたのA（エース）は強い役を作る可能性があります。対戦相手（Player 1）はチェックをしているので、強気なベットをしていないと考えられます。コール（相手のベット額と同額を支払うこと）は無料（to_call: 0）なので、チェック（アクションを起こさずに流れること）と同じです。これで相手の手札をさらに見ることができます。"
}
```
2025-10-31 18:50:31,676 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:50:31,676 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、コミュニティカード（場に開かれたカード）は『3♥, 2♠, 10♠, J♣, 2♦』です。あなたの手札は『4♠, A♠』なので、フラッシュ（同じスートのカードが5枚揃うこと）は完成していません。しかし、場にペア（同じ数字のカードが2枚揃うこと）ができており、あなたのA（エース）は強い役を作る可能性があります。対戦相手（Player 1）はチェックをしているので、強気なベットをしていないと考えられます。コール（相手のベット額と同額を支払うこと）は無料（to_call: 0）なので、チェック（アクションを起こさずに流れること）と同じです。これで相手の手札をさらに見ることができます。"\n}\n```'
2025-10-31 18:50:31,677 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:50:31,677 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、コミュニティカード（場に開かれたカード）は『3♥, 2♠, 10♠, J♣, 2♦』です。あなたの手札は『4♠, A♠』なので、フラッシュ（同じスートのカードが5枚揃うこと）は完成していません。しかし、場にペア（同じ数字のカードが2枚揃うこと）ができており、あなたのA（エース）は強い役を作る可能性があります。対戦相手（Player 1）はチェックをしているので、強気なベットをしていないと考えられます。コール（相手のベット額と同額を支払うこと）は無料（to_call: 0）なので、チェック（アクションを起こさずに流れること）と同じです。これで相手の手札をさらに見ることができます。"\n}'
2025-10-31 18:50:31,677 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "リバー（最終ストリート）で、コミュニティカード（場に開かれたカード）は『3♥, 2♠, 10♠, J♣, 2♦』です。あなたの手札は『4♠, A♠』なので、フラッシュ（同じスートのカードが5枚揃うこと）は完成していません。しかし、場にペア（同じ数字のカードが2枚揃うこと）ができており、あなたのA（エース）は強い役を作る可能性があります。対戦相手（Player 1）はチェックをしているので、強気なベットをしていないと考えられます。コール（相手のベット額と同額を支払うこと）は無料（to_call: 0）なので、チェック（アクションを起こさずに流れること）と同じです。これで相手の手札をさらに見ることができます。"
}
2025-10-31 18:50:31,677 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'リバー（最終ストリート）で、コミュニティカード（場に開かれたカード）は『3♥, 2♠, 10♠, J♣, 2♦』です。あなたの手札は『4♠, A♠』なので、フラッシュ（同じスートのカードが5枚揃うこと）は完成していません。しかし、場にペア（同じ数字のカードが2枚揃うこと）ができており、あなたのA（エース）は強い役を作る可能性があります。対戦相手（Player 1）はチェックをしているので、強気なベットをしていないと考えられます。コール（相手のベット額と同額を支払うこと）は無料（to_call: 0）なので、チェック（アクションを起こさずに流れること）と同じです。これで相手の手札をさらに見ることができます。'}
2025-10-31 18:50:31,677 - poker_game - DEBUG - [Agent2] Extracted values - action: 'call', amount: 0
2025-10-31 18:50:31,677 - poker_game - DEBUG - [Agent2] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (65)']
2025-10-31 18:50:31,678 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:50:31,678 - poker_game - INFO - [Agent2] Successfully parsed decision: call, 0, リバー（最終ストリート）で、コミュニティカード（場に開かれたカード）は『3♥, 2♠, 10♠, J♣, 2♦』です。あなたの手札は『4♠, A♠』なので、フラッシュ（同じスートのカードが5枚揃うこと）は完成していません。しかし、場にペア（同じ数字のカードが2枚揃うこと）ができており、あなたのA（エース）は強い役を作る可能性があります。対戦相手（Player 1）はチェックをしているので、強気なベットをしていないと考えられます。コール（相手のベット額と同額を支払うこと）は無料（to_call: 0）なので、チェック（アクションを起こさずに流れること）と同じです。これで相手の手札をさらに見ることができます。
2025-10-31 18:50:31,678 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'call' with amount 0
2025-10-31 18:50:31,679 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:31,679 - poker_game - INFO - Hand #7, Phase: river
2025-10-31 18:50:31,679 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:50:31,679 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:31,679 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:31,680 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:31,680 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:31,680 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣', '2♦']
2025-10-31 18:50:31,680 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:31,681 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:31,681 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:31,681 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:31,681 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:31,681 - poker_game - INFO - ==================================================
2025-10-31 18:50:31,681 - poker_game - INFO - ACTION_EXECUTED: Player 2 checked
2025-10-31 18:50:31,689 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:31,689 - poker_game - INFO - Hand #7, Phase: river
2025-10-31 18:50:31,690 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:50:31,690 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:31,690 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:31,690 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:31,690 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:31,691 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣', '2♦']
2025-10-31 18:50:31,691 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:31,691 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:31,691 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:31,691 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:31,691 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:31,692 - poker_game - INFO - Extra: Action: Player 2 checked
2025-10-31 18:50:31,692 - poker_game - INFO - ==================================================
2025-10-31 18:50:31,692 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:31,692 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:31,692 - poker_game - DEBUG - Active players: [1, 2]
2025-10-31 18:50:31,692 - poker_game - INFO - Advanced from player 2 to player 1 (seat order)
2025-10-31 18:50:31,693 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:31,693 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:31,693 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:50:31,693 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:50:31,693 - poker_game - DEBUG - Active player indices: [1, 2]
2025-10-31 18:50:31,694 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:50:31,694 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:50:31,694 - poker_game - DEBUG - First actor index: 1
2025-10-31 18:50:31,694 - poker_game - INFO - Betting complete: Back to first actor 1 (all players have acted)
2025-10-31 18:50:31,695 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:31,695 - poker_game - INFO - Hand #7, Phase: river
2025-10-31 18:50:31,696 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:31,697 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:31,697 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:31,697 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:31,698 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:31,698 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣', '2♦']
2025-10-31 18:50:31,698 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:31,698 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:31,699 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:31,699 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:31,699 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:31,699 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:50:31,699 - poker_game - INFO - ==================================================
2025-10-31 18:50:31,800 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 18:50:31,801 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:31,801 - poker_game - INFO - Remaining players: 2
2025-10-31 18:50:31,801 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:50:31,802 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:50:31,802 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 18:50:31,802 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:50:31,803 - poker_game - INFO - Hand #7, Phase: showdown
2025-10-31 18:50:31,803 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:50:31,803 - poker_game - INFO - Pot: 4500, Current bet: 0
2025-10-31 18:50:31,804 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:31,804 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:31,804 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:31,805 - poker_game - INFO - Community cards: ['3♥', '2♠', '10♠', 'J♣', '2♦']
2025-10-31 18:50:31,805 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=folded
2025-10-31 18:50:31,806 - poker_game - INFO -   P1(Agent1): chips=1075, bet=0, status=active
2025-10-31 18:50:31,806 - poker_game - INFO -   P2(Agent2): chips=65, bet=0, status=active
2025-10-31 18:50:31,807 - poker_game - INFO -   P3(Agent3): chips=1600, bet=0, status=folded
2025-10-31 18:50:31,807 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:31,807 - poker_game - INFO - ==================================================
2025-10-31 18:50:31,808 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:50:31,808 - poker_game - INFO - Pot: 4500, Community cards: ['3♥', '2♠', '10♠', 'J♣', '2♦']
2025-10-31 18:50:31,809 - poker_game - INFO -   Player 1 status=active cards=['8♠', '8♥']
2025-10-31 18:50:31,809 - poker_game - INFO -   Player 2 status=active cards=['4♠', 'A♠']
2025-10-31 18:50:31,811 - poker_game - INFO -   Player 1 hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦ cards=['8♠', '8♥']
2025-10-31 18:50:31,812 - poker_game - INFO -   Player 2 hand=One Pair: 2s - A♠, J♣, 10♠, 2♠, 2♦ cards=['4♠', 'A♠']
2025-10-31 18:50:31,812 - poker_game - INFO - Pot layer 0: amount=100, contributors=[0, 1, 2, 3, 4]
2025-10-31 18:50:31,813 - poker_game - INFO - Pot layer 1: amount=1600, contributors=[0, 1, 2, 3]
2025-10-31 18:50:31,813 - poker_game - INFO - Pot layer 2: amount=2800, contributors=[1, 2]
2025-10-31 18:50:31,815 - poker_game - INFO - Showdown total awarded: 4500 (game.pot=4500)
2025-10-31 18:50:31,816 - poker_game - INFO - Showdown winners (aggregated): [1]
2025-10-31 18:50:31,816 - poker_game - INFO -   Awarded 4500 to Player 1 (hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦)
2025-10-31 18:50:31,816 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:50:31,846 - poker_game - INFO - === STARTING NEW HAND #8 ===
2025-10-31 18:50:31,847 - poker_game - INFO - Active players for new hand: 5
2025-10-31 18:50:31,847 - poker_game - INFO - Moving dealer button
2025-10-31 18:50:31,848 - poker_game - INFO - Posting blinds
2025-10-31 18:50:31,867 - poker_game - INFO - Dealing hole cards
2025-10-31 18:50:31,868 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:50:31,878 - poker_game - INFO - Started new hand in database: hand_id=8
2025-10-31 18:50:31,879 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:50:31,879 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:31,880 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:50:31,880 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:50:31,881 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:31,881 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:31,881 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:50:31,882 - poker_game - INFO - Community cards: []
2025-10-31 18:50:31,882 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:31,883 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:50:31,883 - poker_game - INFO -   P2(Agent2): chips=55, bet=10, status=active
2025-10-31 18:50:31,883 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=active
2025-10-31 18:50:31,884 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=active
2025-10-31 18:50:31,884 - poker_game - INFO - ==================================================
2025-10-31 18:50:31,885 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "4♦",
    "8♣"
  ],
  "community": [],
  "your_chips": 1365,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1395,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 55,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1580,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1365)"
  ],
  "history": [
    "Player 1 called 400",
    "Player 2 called 300",
    "Flop dealt: 3♥, 2♠, 10♠",
    "Player 1 raised to 1400",
    "Player 2 called 1400",
    "Player 3 folded",
    "Player 0 folded",
    "Turn dealt: J♣",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 2♦",
    "Player 1 checked",
    "Player 2 checked",
    "Showdown: Player 1 hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦ cards=8♠, 8♥",
    "Showdown: Player 2 hand=One Pair: 2s - A♠, J♣, 10♠, 2♠, 2♦ cards=4♠, A♠",
    "Side pot layer 0: amount=100, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 1: amount=1600, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 2: amount=2800, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20"
  ]
}
2025-10-31 18:50:31,902 - poker_game - DEBUG - Create Session: {'id': 'a11dd346-80d8-439e-976f-7484ae444735', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904231.8979788}
2025-10-31 18:50:36,274 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_sw8curqq5NM2uOMSpSmoQ03O', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1354, 'totalTokenCount': 1371}, 'invocationId': 'e-ea3cff28-70a3-4394-8482-20caf40f4f55', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'O8rSkdDG', 'timestamp': 1761904231.913036}, {'content': {'parts': [{'functionResponse': {'id': 'call_sw8curqq5NM2uOMSpSmoQ03O', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-ea3cff28-70a3-4394-8482-20caf40f4f55', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'k6u2R49y', 'timestamp': 1761904233.305988}, {'content': {'parts': [{'functionCall': {'id': 'call_SpnwqFwawZabsTYkjd08YWTP', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1878, 'totalTokenCount': 1898}, 'invocationId': 'e-ea3cff28-70a3-4394-8482-20caf40f4f55', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'frI6QcmI', 'timestamp': 1761904233.307461}, {'content': {'parts': [{'functionResponse': {'id': 'call_SpnwqFwawZabsTYkjd08YWTP', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-ea3cff28-70a3-4394-8482-20caf40f4f55', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': '3JH0KkPB', 'timestamp': 1761904234.312083}, {'content': {'parts': [{'text': '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "手札が4♦と8♣と弱く、現在の状況においてコールする価値が低いため、フォールドするのが最適です。"\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 63, 'promptTokenCount': 1440, 'totalTokenCount': 1503}, 'invocationId': 'e-ea3cff28-70a3-4394-8482-20caf40f4f55', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Ks8EqT8d', 'timestamp': 1761904234.313689}]
2025-10-31 18:50:36,274 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:50:36,275 - poker_game - DEBUG - {
  "action": "fold",
  "amount": 0,
  "reasoning": "手札が4♦と8♣と弱く、現在の状況においてコールする価値が低いため、フォールドするのが最適です。"
}
2025-10-31 18:50:36,275 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:50:36,275 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "手札が4♦と8♣と弱く、現在の状況においてコールする価値が低いため、フォールドするのが最適です。"\n}'
2025-10-31 18:50:36,275 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:50:36,275 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "手札が4♦と8♣と弱く、現在の状況においてコールする価値が低いため、フォールドするのが最適です。"
}
2025-10-31 18:50:36,276 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': '手札が4♦と8♣と弱く、現在の状況においてコールする価値が低いため、フォールドするのが最適です。'}
2025-10-31 18:50:36,276 - poker_game - DEBUG - [Agent4] Extracted values - action: 'fold', amount: 0
2025-10-31 18:50:36,276 - poker_game - DEBUG - [Agent4] Action 'fold' normalized - amount set to 0
2025-10-31 18:50:36,276 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:50:36,276 - poker_game - INFO - [Agent4] Successfully parsed decision: fold, 0, 手札が4♦と8♣と弱く、現在の状況においてコールする価値が低いため、フォールドするのが最適です。
2025-10-31 18:50:36,277 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'fold' with amount 0
2025-10-31 18:50:36,277 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:36,277 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:36,278 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:50:36,278 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:50:36,278 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:36,278 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:36,278 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:50:36,278 - poker_game - INFO - Community cards: []
2025-10-31 18:50:36,278 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:36,279 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:50:36,280 - poker_game - INFO -   P2(Agent2): chips=55, bet=10, status=active
2025-10-31 18:50:36,280 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=active
2025-10-31 18:50:36,280 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=active
2025-10-31 18:50:36,280 - poker_game - INFO - ==================================================
2025-10-31 18:50:36,280 - poker_game - INFO - ACTION_EXECUTED: Player 4 folded
2025-10-31 18:50:36,292 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:36,293 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:36,293 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:50:36,293 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:50:36,293 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:36,293 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:36,294 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:36,294 - poker_game - INFO - Community cards: []
2025-10-31 18:50:36,294 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:36,294 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:50:36,294 - poker_game - INFO -   P2(Agent2): chips=55, bet=10, status=active
2025-10-31 18:50:36,295 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=active
2025-10-31 18:50:36,295 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:36,295 - poker_game - INFO - Extra: Action: Player 4 folded
2025-10-31 18:50:36,295 - poker_game - INFO - ==================================================
2025-10-31 18:50:36,295 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:36,295 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:36,295 - poker_game - DEBUG - Active players: [0, 1, 2, 3]
2025-10-31 18:50:36,296 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:50:36,296 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:36,296 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:36,296 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:50:36,296 - poker_game - DEBUG - Player bets: [0, 0, 10, 20], Current bet: 20, All same: False
2025-10-31 18:50:36,296 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:50:36,296 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:36,296 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:36,297 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:50:36,297 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:50:36,297 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:36,297 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:36,297 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:36,297 - poker_game - INFO - Community cards: []
2025-10-31 18:50:36,297 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:36,298 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:50:36,298 - poker_game - INFO -   P2(Agent2): chips=55, bet=10, status=active
2025-10-31 18:50:36,298 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=active
2025-10-31 18:50:36,298 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:36,298 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:36,298 - poker_game - INFO - ==================================================
2025-10-31 18:50:36,399 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "9♥",
    "A♠"
  ],
  "community": [],
  "your_chips": 1395,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 55,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1580,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1395)"
  ],
  "history": [
    "Player 2 called 300",
    "Flop dealt: 3♥, 2♠, 10♠",
    "Player 1 raised to 1400",
    "Player 2 called 1400",
    "Player 3 folded",
    "Player 0 folded",
    "Turn dealt: J♣",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 2♦",
    "Player 1 checked",
    "Player 2 checked",
    "Showdown: Player 1 hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦ cards=8♠, 8♥",
    "Showdown: Player 2 hand=One Pair: 2s - A♠, J♣, 10♠, 2♠, 2♦ cards=4♠, A♠",
    "Side pot layer 0: amount=100, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 1: amount=1600, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 2: amount=2800, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded"
  ]
}
2025-10-31 18:50:36,488 - poker_game - DEBUG - Create Session: {'id': 'fbe4a91f-315c-4ee7-857a-3161ab4fcd65', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904236.4838636}
2025-10-31 18:50:38,328 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "エースと9のハンドはプリフロップ（カードが配られる前）では強いハンドですが、ポットオッズ（コールするために必要な金額とポットの比率）を考慮すると、コールが最適です。ポットにはすでに30があり、コールするには20必要です。これは有利なオッズであり、相手のベット額もそれほど大きくないため、コールしてフロップ（コミュニティカードの最初の3枚）を見て、さらに戦略を練るのが良いでしょう。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 132, 'promptTokenCount': 1035, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1035}], 'totalTokenCount': 1167}, 'invocationId': 'e-6cf98b22-d6d1-48bd-89e6-7c2346208382', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'uQAZr5vw', 'timestamp': 1761904236.500057}]
2025-10-31 18:50:38,329 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:50:38,329 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "エースと9のハンドはプリフロップ（カードが配られる前）では強いハンドですが、ポットオッズ（コールするために必要な金額とポットの比率）を考慮すると、コールが最適です。ポットにはすでに30があり、コールするには20必要です。これは有利なオッズであり、相手のベット額もそれほど大きくないため、コールしてフロップ（コミュニティカードの最初の3枚）を見て、さらに戦略を練るのが良いでしょう。"
}
```
2025-10-31 18:50:38,329 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:50:38,329 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "エースと9のハンドはプリフロップ（カードが配られる前）では強いハンドですが、ポットオッズ（コールするために必要な金額とポットの比率）を考慮すると、コールが最適です。ポットにはすでに30があり、コールするには20必要です。これは有利なオッズであり、相手のベット額もそれほど大きくないため、コールしてフロップ（コミュニティカードの最初の3枚）を見て、さらに戦略を練るのが良いでしょう。"\n}\n```'
2025-10-31 18:50:38,329 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:50:38,330 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "エースと9のハンドはプリフロップ（カードが配られる前）では強いハンドですが、ポットオッズ（コールするために必要な金額とポットの比率）を考慮すると、コールが最適です。ポットにはすでに30があり、コールするには20必要です。これは有利なオッズであり、相手のベット額もそれほど大きくないため、コールしてフロップ（コミュニティカードの最初の3枚）を見て、さらに戦略を練るのが良いでしょう。"\n}'
2025-10-31 18:50:38,330 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "エースと9のハンドはプリフロップ（カードが配られる前）では強いハンドですが、ポットオッズ（コールするために必要な金額とポットの比率）を考慮すると、コールが最適です。ポットにはすでに30があり、コールするには20必要です。これは有利なオッズであり、相手のベット額もそれほど大きくないため、コールしてフロップ（コミュニティカードの最初の3枚）を見て、さらに戦略を練るのが良いでしょう。"
}
2025-10-31 18:50:38,330 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'エースと9のハンドはプリフロップ（カードが配られる前）では強いハンドですが、ポットオッズ（コールするために必要な金額とポットの比率）を考慮すると、コールが最適です。ポットにはすでに30があり、コールするには20必要です。これは有利なオッズであり、相手のベット額もそれほど大きくないため、コールしてフロップ（コミュニティカードの最初の3枚）を見て、さらに戦略を練るのが良いでしょう。'}
2025-10-31 18:50:38,330 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 20
2025-10-31 18:50:38,330 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1395)']
2025-10-31 18:50:38,330 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (20)': 20
2025-10-31 18:50:38,330 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:50:38,330 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 20, エースと9のハンドはプリフロップ（カードが配られる前）では強いハンドですが、ポットオッズ（コールするために必要な金額とポットの比率）を考慮すると、コールが最適です。ポットにはすでに30があり、コールするには20必要です。これは有利なオッズであり、相手のベット額もそれほど大きくないため、コールしてフロップ（コミュニティカードの最初の3枚）を見て、さらに戦略を練るのが良いでしょう。
2025-10-31 18:50:38,331 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 20
2025-10-31 18:50:38,331 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:38,332 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:38,332 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:50:38,332 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:50:38,332 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:38,332 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:38,333 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:38,333 - poker_game - INFO - Community cards: []
2025-10-31 18:50:38,333 - poker_game - INFO -   P0(Agent0): chips=1395, bet=0, status=active
2025-10-31 18:50:38,333 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:50:38,334 - poker_game - INFO -   P2(Agent2): chips=55, bet=10, status=active
2025-10-31 18:50:38,334 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=active
2025-10-31 18:50:38,334 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:38,334 - poker_game - INFO - ==================================================
2025-10-31 18:50:38,334 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 20
2025-10-31 18:50:38,361 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:38,361 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:38,361 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:50:38,362 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:50:38,362 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:38,362 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:38,362 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:38,362 - poker_game - INFO - Community cards: []
2025-10-31 18:50:38,362 - poker_game - INFO -   P0(Agent0): chips=1375, bet=20, status=active
2025-10-31 18:50:38,363 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:50:38,363 - poker_game - INFO -   P2(Agent2): chips=55, bet=10, status=active
2025-10-31 18:50:38,363 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=active
2025-10-31 18:50:38,363 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:38,364 - poker_game - INFO - Extra: Action: Player 0 called 20
2025-10-31 18:50:38,364 - poker_game - INFO - ==================================================
2025-10-31 18:50:38,364 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:38,364 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:38,364 - poker_game - DEBUG - Active players: [0, 1, 2, 3]
2025-10-31 18:50:38,364 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:50:38,365 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:38,365 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:38,365 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:50:38,365 - poker_game - DEBUG - Player bets: [20, 0, 10, 20], Current bet: 20, All same: False
2025-10-31 18:50:38,365 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:50:38,365 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:38,365 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:38,366 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:50:38,366 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:50:38,366 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:38,366 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:38,366 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:38,367 - poker_game - INFO - Community cards: []
2025-10-31 18:50:38,367 - poker_game - INFO -   P0(Agent0): chips=1375, bet=20, status=active
2025-10-31 18:50:38,367 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:50:38,367 - poker_game - INFO -   P2(Agent2): chips=55, bet=10, status=active
2025-10-31 18:50:38,367 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=active
2025-10-31 18:50:38,368 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:38,368 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:38,368 - poker_game - INFO - ==================================================
2025-10-31 18:50:38,470 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "2♦",
    "3♠"
  ],
  "community": [],
  "your_chips": 5575,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 50,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1375,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 55,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1580,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (5575)"
  ],
  "history": [
    "Flop dealt: 3♥, 2♠, 10♠",
    "Player 1 raised to 1400",
    "Player 2 called 1400",
    "Player 3 folded",
    "Player 0 folded",
    "Turn dealt: J♣",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 2♦",
    "Player 1 checked",
    "Player 2 checked",
    "Showdown: Player 1 hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦ cards=8♠, 8♥",
    "Showdown: Player 2 hand=One Pair: 2s - A♠, J♣, 10♠, 2♠, 2♦ cards=4♠, A♠",
    "Side pot layer 0: amount=100, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 1: amount=1600, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 2: amount=2800, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20"
  ]
}
2025-10-31 18:50:38,482 - poker_game - DEBUG - Create Session: {'id': 'e9bdd10d-92bc-47f8-b3f4-8ac61dd4b021', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904238.4793184}
2025-10-31 18:50:40,437 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フロップが開かれる前）では、2と3という非常に弱いハンドを持っています。これは、ペアを作るか、ストレート（連続した数字）やフラッシュ（同じスート）を作る可能性が低いことを意味します。ポットにはすでに20のベットがあり、コールするには20必要ですが、このハンドで勝つ見込みは非常に低いため、フォールド（諦める）するのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 121, 'promptTokenCount': 1035, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1035}], 'totalTokenCount': 1156}, 'invocationId': 'e-155da6c7-462f-48c2-8191-bdcd262cea08', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'EW198YYd', 'timestamp': 1761904238.492428}]
2025-10-31 18:50:40,438 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:50:40,438 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（フロップが開かれる前）では、2と3という非常に弱いハンドを持っています。これは、ペアを作るか、ストレート（連続した数字）やフラッシュ（同じスート）を作る可能性が低いことを意味します。ポットにはすでに20のベットがあり、コールするには20必要ですが、このハンドで勝つ見込みは非常に低いため、フォールド（諦める）するのが最善です。"
}
```
2025-10-31 18:50:40,439 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:50:40,439 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フロップが開かれる前）では、2と3という非常に弱いハンドを持っています。これは、ペアを作るか、ストレート（連続した数字）やフラッシュ（同じスート）を作る可能性が低いことを意味します。ポットにはすでに20のベットがあり、コールするには20必要ですが、このハンドで勝つ見込みは非常に低いため、フォールド（諦める）するのが最善です。"\n}\n```'
2025-10-31 18:50:40,439 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:50:40,440 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フロップが開かれる前）では、2と3という非常に弱いハンドを持っています。これは、ペアを作るか、ストレート（連続した数字）やフラッシュ（同じスート）を作る可能性が低いことを意味します。ポットにはすでに20のベットがあり、コールするには20必要ですが、このハンドで勝つ見込みは非常に低いため、フォールド（諦める）するのが最善です。"\n}'
2025-10-31 18:50:40,440 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（フロップが開かれる前）では、2と3という非常に弱いハンドを持っています。これは、ペアを作るか、ストレート（連続した数字）やフラッシュ（同じスート）を作る可能性が低いことを意味します。ポットにはすでに20のベットがあり、コールするには20必要ですが、このハンドで勝つ見込みは非常に低いため、フォールド（諦める）するのが最善です。"
}
2025-10-31 18:50:40,440 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（フロップが開かれる前）では、2と3という非常に弱いハンドを持っています。これは、ペアを作るか、ストレート（連続した数字）やフラッシュ（同じスート）を作る可能性が低いことを意味します。ポットにはすでに20のベットがあり、コールするには20必要ですが、このハンドで勝つ見込みは非常に低いため、フォールド（諦める）するのが最善です。'}
2025-10-31 18:50:40,440 - poker_game - DEBUG - [Agent1] Extracted values - action: 'fold', amount: 0
2025-10-31 18:50:40,440 - poker_game - DEBUG - [Agent1] Action 'fold' normalized - amount set to 0
2025-10-31 18:50:40,440 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:50:40,441 - poker_game - INFO - [Agent1] Successfully parsed decision: fold, 0, プリフロップ（フロップが開かれる前）では、2と3という非常に弱いハンドを持っています。これは、ペアを作るか、ストレート（連続した数字）やフラッシュ（同じスート）を作る可能性が低いことを意味します。ポットにはすでに20のベットがあり、コールするには20必要ですが、このハンドで勝つ見込みは非常に低いため、フォールド（諦める）するのが最善です。
2025-10-31 18:50:40,441 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'fold' with amount 0
2025-10-31 18:50:40,442 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:40,442 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:40,443 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:50:40,443 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:50:40,444 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:40,444 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:40,446 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:40,447 - poker_game - INFO - Community cards: []
2025-10-31 18:50:40,447 - poker_game - INFO -   P0(Agent0): chips=1375, bet=20, status=active
2025-10-31 18:50:40,448 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:50:40,448 - poker_game - INFO -   P2(Agent2): chips=55, bet=10, status=active
2025-10-31 18:50:40,449 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=active
2025-10-31 18:50:40,450 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:40,450 - poker_game - INFO - ==================================================
2025-10-31 18:50:40,451 - poker_game - INFO - ACTION_EXECUTED: Player 1 folded
2025-10-31 18:50:40,462 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:40,462 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:40,463 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:50:40,463 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:50:40,463 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:40,464 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:40,464 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:50:40,464 - poker_game - INFO - Community cards: []
2025-10-31 18:50:40,465 - poker_game - INFO -   P0(Agent0): chips=1375, bet=20, status=active
2025-10-31 18:50:40,465 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:40,466 - poker_game - INFO -   P2(Agent2): chips=55, bet=10, status=active
2025-10-31 18:50:40,466 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=active
2025-10-31 18:50:40,466 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:40,467 - poker_game - INFO - Extra: Action: Player 1 folded
2025-10-31 18:50:40,467 - poker_game - INFO - ==================================================
2025-10-31 18:50:40,468 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:40,468 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:40,468 - poker_game - DEBUG - Active players: [0, 2, 3]
2025-10-31 18:50:40,469 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:50:40,469 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:40,469 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:40,470 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:50:40,470 - poker_game - DEBUG - Player bets: [20, 10, 20], Current bet: 20, All same: False
2025-10-31 18:50:40,470 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:50:40,470 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:40,471 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:40,471 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:40,472 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:50:40,472 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:40,473 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:40,473 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:50:40,474 - poker_game - INFO - Community cards: []
2025-10-31 18:50:40,475 - poker_game - INFO -   P0(Agent0): chips=1375, bet=20, status=active
2025-10-31 18:50:40,475 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:40,475 - poker_game - INFO -   P2(Agent2): chips=55, bet=10, status=active
2025-10-31 18:50:40,476 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=active
2025-10-31 18:50:40,477 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:40,478 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:40,478 - poker_game - INFO - ==================================================
2025-10-31 18:50:40,580 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "preflop",
  "your_cards": [
    "5♥",
    "J♦"
  ],
  "community": [],
  "your_chips": 55,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 50,
  "to_call": 10,
  "dealer_button": 1,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1375,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1580,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (55)"
  ],
  "history": [
    "Player 1 raised to 1400",
    "Player 2 called 1400",
    "Player 3 folded",
    "Player 0 folded",
    "Turn dealt: J♣",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 2♦",
    "Player 1 checked",
    "Player 2 checked",
    "Showdown: Player 1 hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦ cards=8♠, 8♥",
    "Showdown: Player 2 hand=One Pair: 2s - A♠, J♣, 10♠, 2♠, 2♦ cards=4♠, A♠",
    "Side pot layer 0: amount=100, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 1: amount=1600, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 2: amount=2800, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 folded"
  ]
}
2025-10-31 18:50:40,594 - poker_game - DEBUG - Create Session: {'id': '838cc0be-a240-4327-8994-6f4abbfc7997', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904240.5909057}
2025-10-31 18:50:42,788 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "プリフロップ（Preflop）の段階で、あなたの手札はJ（ジャック）と5です。これは平均的な強さの手札ですが、ペアになっていないため、積極的にベットするには弱い可能性があります。ポットは50で、コールするには10です。これはオッズ（Pot Odds）が良い（ポットのサイズに対して支払う金額が小さい）ため、コールしてフロップ（Flop - 最初の3枚のコミュニティカード）を見るのが合理的です。相手のプレイヤーが2人（ID:0とID:3）アクティブで、両方とも20ベットしているので、彼らが強い手を持っている可能性も考慮する必要がありますが、今のところコールして様子を見るのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 180, 'promptTokenCount': 1022, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1022}], 'totalTokenCount': 1202}, 'invocationId': 'e-5f6e9db4-6785-4534-b8dc-2421e8bab024', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'LMoJafjs', 'timestamp': 1761904240.606527}]
2025-10-31 18:50:42,789 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:50:42,789 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 10,
  "reasoning": "プリフロップ（Preflop）の段階で、あなたの手札はJ（ジャック）と5です。これは平均的な強さの手札ですが、ペアになっていないため、積極的にベットするには弱い可能性があります。ポットは50で、コールするには10です。これはオッズ（Pot Odds）が良い（ポットのサイズに対して支払う金額が小さい）ため、コールしてフロップ（Flop - 最初の3枚のコミュニティカード）を見るのが合理的です。相手のプレイヤーが2人（ID:0とID:3）アクティブで、両方とも20ベットしているので、彼らが強い手を持っている可能性も考慮する必要がありますが、今のところコールして様子を見るのが最善です。"
}
```
2025-10-31 18:50:42,789 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:50:42,790 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "プリフロップ（Preflop）の段階で、あなたの手札はJ（ジャック）と5です。これは平均的な強さの手札ですが、ペアになっていないため、積極的にベットするには弱い可能性があります。ポットは50で、コールするには10です。これはオッズ（Pot Odds）が良い（ポットのサイズに対して支払う金額が小さい）ため、コールしてフロップ（Flop - 最初の3枚のコミュニティカード）を見るのが合理的です。相手のプレイヤーが2人（ID:0とID:3）アクティブで、両方とも20ベットしているので、彼らが強い手を持っている可能性も考慮する必要がありますが、今のところコールして様子を見るのが最善です。"\n}\n```'
2025-10-31 18:50:42,790 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:50:42,790 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "プリフロップ（Preflop）の段階で、あなたの手札はJ（ジャック）と5です。これは平均的な強さの手札ですが、ペアになっていないため、積極的にベットするには弱い可能性があります。ポットは50で、コールするには10です。これはオッズ（Pot Odds）が良い（ポットのサイズに対して支払う金額が小さい）ため、コールしてフロップ（Flop - 最初の3枚のコミュニティカード）を見るのが合理的です。相手のプレイヤーが2人（ID:0とID:3）アクティブで、両方とも20ベットしているので、彼らが強い手を持っている可能性も考慮する必要がありますが、今のところコールして様子を見るのが最善です。"\n}'
2025-10-31 18:50:42,790 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "call",
  "amount": 10,
  "reasoning": "プリフロップ（Preflop）の段階で、あなたの手札はJ（ジャック）と5です。これは平均的な強さの手札ですが、ペアになっていないため、積極的にベットするには弱い可能性があります。ポットは50で、コールするには10です。これはオッズ（Pot Odds）が良い（ポットのサイズに対して支払う金額が小さい）ため、コールしてフロップ（Flop - 最初の3枚のコミュニティカード）を見るのが合理的です。相手のプレイヤーが2人（ID:0とID:3）アクティブで、両方とも20ベットしているので、彼らが強い手を持っている可能性も考慮する必要がありますが、今のところコールして様子を見るのが最善です。"
}
2025-10-31 18:50:42,791 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'call', 'amount': 10, 'reasoning': 'プリフロップ（Preflop）の段階で、あなたの手札はJ（ジャック）と5です。これは平均的な強さの手札ですが、ペアになっていないため、積極的にベットするには弱い可能性があります。ポットは50で、コールするには10です。これはオッズ（Pot Odds）が良い（ポットのサイズに対して支払う金額が小さい）ため、コールしてフロップ（Flop - 最初の3枚のコミュニティカード）を見るのが合理的です。相手のプレイヤーが2人（ID:0とID:3）アクティブで、両方とも20ベットしているので、彼らが強い手を持っている可能性も考慮する必要がありますが、今のところコールして様子を見るのが最善です。'}
2025-10-31 18:50:42,791 - poker_game - DEBUG - [Agent2] Extracted values - action: 'call', amount: 10
2025-10-31 18:50:42,791 - poker_game - DEBUG - [Agent2] Processing call action - available actions: ['fold', 'call (10)', 'raise (min 40)', 'all-in (55)']
2025-10-31 18:50:42,791 - poker_game - DEBUG - [Agent2] Call amount extracted from 'call (10)': 10
2025-10-31 18:50:42,791 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'call', 'amount': 10}
2025-10-31 18:50:42,791 - poker_game - INFO - [Agent2] Successfully parsed decision: call, 10, プリフロップ（Preflop）の段階で、あなたの手札はJ（ジャック）と5です。これは平均的な強さの手札ですが、ペアになっていないため、積極的にベットするには弱い可能性があります。ポットは50で、コールするには10です。これはオッズ（Pot Odds）が良い（ポットのサイズに対して支払う金額が小さい）ため、コールしてフロップ（Flop - 最初の3枚のコミュニティカード）を見るのが合理的です。相手のプレイヤーが2人（ID:0とID:3）アクティブで、両方とも20ベットしているので、彼らが強い手を持っている可能性も考慮する必要がありますが、今のところコールして様子を見るのが最善です。
2025-10-31 18:50:42,792 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'call' with amount 10
2025-10-31 18:50:42,793 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:42,793 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:42,794 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:42,794 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:50:42,795 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:42,795 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:42,795 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:50:42,795 - poker_game - INFO - Community cards: []
2025-10-31 18:50:42,796 - poker_game - INFO -   P0(Agent0): chips=1375, bet=20, status=active
2025-10-31 18:50:42,796 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:42,797 - poker_game - INFO -   P2(Agent2): chips=55, bet=10, status=active
2025-10-31 18:50:42,798 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=active
2025-10-31 18:50:42,799 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:42,799 - poker_game - INFO - ==================================================
2025-10-31 18:50:42,800 - poker_game - INFO - ACTION_EXECUTED: Player 2 called 10
2025-10-31 18:50:42,810 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:42,810 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:42,810 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:42,811 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:50:42,811 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:42,811 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:42,812 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:50:42,812 - poker_game - INFO - Community cards: []
2025-10-31 18:50:42,812 - poker_game - INFO -   P0(Agent0): chips=1375, bet=20, status=active
2025-10-31 18:50:42,813 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:42,813 - poker_game - INFO -   P2(Agent2): chips=45, bet=20, status=active
2025-10-31 18:50:42,813 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=active
2025-10-31 18:50:42,814 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:42,814 - poker_game - INFO - Extra: Action: Player 2 called 10
2025-10-31 18:50:42,815 - poker_game - INFO - ==================================================
2025-10-31 18:50:42,815 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:42,815 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:42,816 - poker_game - DEBUG - Active players: [0, 2, 3]
2025-10-31 18:50:42,816 - poker_game - INFO - Advanced from player 2 to player 3 (seat order)
2025-10-31 18:50:42,816 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:42,817 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:42,817 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:50:42,817 - poker_game - DEBUG - Player bets: [20, 20, 20], Current bet: 20, All same: True
2025-10-31 18:50:42,817 - poker_game - DEBUG - Active player indices: [0, 2, 3]
2025-10-31 18:50:42,818 - poker_game - DEBUG - Last raiser index: 3
2025-10-31 18:50:42,818 - poker_game - DEBUG - Current player index: 3
2025-10-31 18:50:42,818 - poker_game - DEBUG - Next after last raiser 3: 0
2025-10-31 18:50:42,818 - poker_game - DEBUG - Betting continues: Current player 3 != next after raiser 0
2025-10-31 18:50:42,818 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:42,819 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:42,819 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:50:42,820 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:50:42,821 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:42,822 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:42,823 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:50:42,824 - poker_game - INFO - Community cards: []
2025-10-31 18:50:42,825 - poker_game - INFO -   P0(Agent0): chips=1375, bet=20, status=active
2025-10-31 18:50:42,825 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:42,826 - poker_game - INFO -   P2(Agent2): chips=45, bet=20, status=active
2025-10-31 18:50:42,826 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=active
2025-10-31 18:50:42,827 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:42,828 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:42,828 - poker_game - INFO - ==================================================
2025-10-31 18:50:42,930 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "9♠",
    "7♦"
  ],
  "community": [],
  "your_chips": 1580,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1375,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 45,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 40)",
    "all-in (1580)"
  ],
  "history": [
    "Player 2 called 1400",
    "Player 3 folded",
    "Player 0 folded",
    "Turn dealt: J♣",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 2♦",
    "Player 1 checked",
    "Player 2 checked",
    "Showdown: Player 1 hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦ cards=8♠, 8♥",
    "Showdown: Player 2 hand=One Pair: 2s - A♠, J♣, 10♠, 2♠, 2♦ cards=4♠, A♠",
    "Side pot layer 0: amount=100, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 1: amount=1600, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 2: amount=2800, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 folded",
    "Player 2 called 10"
  ]
}
2025-10-31 18:50:42,946 - poker_game - DEBUG - Create Session: {'id': '357d26a6-c3ca-4d80-b62d-256a432b2c77', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904242.942938}
2025-10-31 18:50:45,388 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（Pre-flop）で、私の手札は9♠7♦です。これはコネクター（連続した数字）ですが、スート（マーク）は揃っていません。現在のポットは60で、私はビッグブラインド（Big Blind）として20を既にベットしており、コールするには0を支払うだけです。しかし、前のプレイヤー（Player 0）は既に20をコールしており、次のプレイヤー（Player 2）も20をコールしています。この手札でこれ以上のポットへの投資をするのは、確率的に不利だと判断しました。手札の弱さと、相手のコール額を考慮してフォールド（Fold: 降りる）を選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 178, 'promptTokenCount': 1017, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1017}], 'totalTokenCount': 1195}, 'invocationId': 'e-3bcbd570-8088-423c-8194-7ebd798d7085', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'tb08Rfc6', 'timestamp': 1761904242.956626}]
2025-10-31 18:50:45,389 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:50:45,389 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（Pre-flop）で、私の手札は9♠7♦です。これはコネクター（連続した数字）ですが、スート（マーク）は揃っていません。現在のポットは60で、私はビッグブラインド（Big Blind）として20を既にベットしており、コールするには0を支払うだけです。しかし、前のプレイヤー（Player 0）は既に20をコールしており、次のプレイヤー（Player 2）も20をコールしています。この手札でこれ以上のポットへの投資をするのは、確率的に不利だと判断しました。手札の弱さと、相手のコール額を考慮してフォールド（Fold: 降りる）を選択します。"
}
```
2025-10-31 18:50:45,389 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:50:45,389 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（Pre-flop）で、私の手札は9♠7♦です。これはコネクター（連続した数字）ですが、スート（マーク）は揃っていません。現在のポットは60で、私はビッグブラインド（Big Blind）として20を既にベットしており、コールするには0を支払うだけです。しかし、前のプレイヤー（Player 0）は既に20をコールしており、次のプレイヤー（Player 2）も20をコールしています。この手札でこれ以上のポットへの投資をするのは、確率的に不利だと判断しました。手札の弱さと、相手のコール額を考慮してフォールド（Fold: 降りる）を選択します。"\n}\n```'
2025-10-31 18:50:45,389 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:50:45,389 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（Pre-flop）で、私の手札は9♠7♦です。これはコネクター（連続した数字）ですが、スート（マーク）は揃っていません。現在のポットは60で、私はビッグブラインド（Big Blind）として20を既にベットしており、コールするには0を支払うだけです。しかし、前のプレイヤー（Player 0）は既に20をコールしており、次のプレイヤー（Player 2）も20をコールしています。この手札でこれ以上のポットへの投資をするのは、確率的に不利だと判断しました。手札の弱さと、相手のコール額を考慮してフォールド（Fold: 降りる）を選択します。"\n}'
2025-10-31 18:50:45,390 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（Pre-flop）で、私の手札は9♠7♦です。これはコネクター（連続した数字）ですが、スート（マーク）は揃っていません。現在のポットは60で、私はビッグブラインド（Big Blind）として20を既にベットしており、コールするには0を支払うだけです。しかし、前のプレイヤー（Player 0）は既に20をコールしており、次のプレイヤー（Player 2）も20をコールしています。この手札でこれ以上のポットへの投資をするのは、確率的に不利だと判断しました。手札の弱さと、相手のコール額を考慮してフォールド（Fold: 降りる）を選択します。"
}
2025-10-31 18:50:45,390 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（Pre-flop）で、私の手札は9♠7♦です。これはコネクター（連続した数字）ですが、スート（マーク）は揃っていません。現在のポットは60で、私はビッグブラインド（Big Blind）として20を既にベットしており、コールするには0を支払うだけです。しかし、前のプレイヤー（Player 0）は既に20をコールしており、次のプレイヤー（Player 2）も20をコールしています。この手札でこれ以上のポットへの投資をするのは、確率的に不利だと判断しました。手札の弱さと、相手のコール額を考慮してフォールド（Fold: 降りる）を選択します。'}
2025-10-31 18:50:45,390 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 18:50:45,390 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 18:50:45,390 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:50:45,390 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップ（Pre-flop）で、私の手札は9♠7♦です。これはコネクター（連続した数字）ですが、スート（マーク）は揃っていません。現在のポットは60で、私はビッグブラインド（Big Blind）として20を既にベットしており、コールするには0を支払うだけです。しかし、前のプレイヤー（Player 0）は既に20をコールしており、次のプレイヤー（Player 2）も20をコールしています。この手札でこれ以上のポットへの投資をするのは、確率的に不利だと判断しました。手札の弱さと、相手のコール額を考慮してフォールド（Fold: 降りる）を選択します。
2025-10-31 18:50:45,391 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 18:50:45,391 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:45,391 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:45,391 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:50:45,392 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:50:45,392 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:45,392 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:45,392 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:50:45,392 - poker_game - INFO - Community cards: []
2025-10-31 18:50:45,392 - poker_game - INFO -   P0(Agent0): chips=1375, bet=20, status=active
2025-10-31 18:50:45,392 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:45,393 - poker_game - INFO -   P2(Agent2): chips=45, bet=20, status=active
2025-10-31 18:50:45,393 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=active
2025-10-31 18:50:45,393 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:45,393 - poker_game - INFO - ==================================================
2025-10-31 18:50:45,393 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 18:50:45,403 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:45,403 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:45,404 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:50:45,404 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:50:45,405 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:45,406 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:45,406 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:45,407 - poker_game - INFO - Community cards: []
2025-10-31 18:50:45,407 - poker_game - INFO -   P0(Agent0): chips=1375, bet=20, status=active
2025-10-31 18:50:45,408 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:45,408 - poker_game - INFO -   P2(Agent2): chips=45, bet=20, status=active
2025-10-31 18:50:45,408 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=folded
2025-10-31 18:50:45,409 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:45,409 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 18:50:45,409 - poker_game - INFO - ==================================================
2025-10-31 18:50:45,409 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:45,409 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:45,410 - poker_game - DEBUG - Active players: [0, 2]
2025-10-31 18:50:45,410 - poker_game - INFO - Advanced from player 3 to player 0 (seat order)
2025-10-31 18:50:45,410 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:45,410 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:45,410 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:50:45,410 - poker_game - DEBUG - Player bets: [20, 20], Current bet: 20, All same: True
2025-10-31 18:50:45,410 - poker_game - DEBUG - Active player indices: [0, 2]
2025-10-31 18:50:45,411 - poker_game - DEBUG - Last raiser index: 3
2025-10-31 18:50:45,411 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:50:45,411 - poker_game - INFO - Betting complete: Last raiser 3 is no longer active
2025-10-31 18:50:45,411 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:45,411 - poker_game - INFO - Hand #8, Phase: preflop
2025-10-31 18:50:45,412 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:50:45,412 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:50:45,412 - poker_game - INFO - Last raiser: 3
2025-10-31 18:50:45,412 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:45,412 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:45,413 - poker_game - INFO - Community cards: []
2025-10-31 18:50:45,413 - poker_game - INFO -   P0(Agent0): chips=1375, bet=20, status=active
2025-10-31 18:50:45,413 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:45,413 - poker_game - INFO -   P2(Agent2): chips=45, bet=20, status=active
2025-10-31 18:50:45,414 - poker_game - INFO -   P3(Agent3): chips=1580, bet=20, status=folded
2025-10-31 18:50:45,414 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:45,414 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:50:45,414 - poker_game - INFO - ==================================================
2025-10-31 18:50:45,515 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:50:45,516 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:45,517 - poker_game - INFO - Remaining players: 2
2025-10-31 18:50:45,517 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:50:45,517 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:50:45,518 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:50:45,530 - poker_game - INFO - Starting new betting round
2025-10-31 18:50:45,530 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:50:45,531 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:50:45,531 - poker_game - DEBUG - Active players for new betting round: [0, 2]
2025-10-31 18:50:45,532 - poker_game - DEBUG - Dealer button: 1
2025-10-31 18:50:45,532 - poker_game - INFO - First actor: Player 2 (by phase rule), was 0
2025-10-31 18:50:45,532 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:50:45,533 - poker_game - INFO - Hand #8, Phase: flop
2025-10-31 18:50:45,533 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:45,533 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:45,534 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:45,534 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:45,535 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:45,536 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥']
2025-10-31 18:50:45,536 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:45,537 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:45,537 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:45,538 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:45,539 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:45,540 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:50:45,540 - poker_game - INFO - ==================================================
2025-10-31 18:50:45,542 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "flop",
  "your_cards": [
    "5♥",
    "J♦"
  ],
  "community": [
    "6♠",
    "7♣",
    "3♥"
  ],
  "your_chips": 45,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1375,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1580,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (45)"
  ],
  "history": [
    "Player 0 folded",
    "Turn dealt: J♣",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 2♦",
    "Player 1 checked",
    "Player 2 checked",
    "Showdown: Player 1 hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦ cards=8♠, 8♥",
    "Showdown: Player 2 hand=One Pair: 2s - A♠, J♣, 10♠, 2♠, 2♦ cards=4♠, A♠",
    "Side pot layer 0: amount=100, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 1: amount=1600, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 2: amount=2800, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 folded",
    "Player 2 called 10",
    "Player 3 folded",
    "Flop dealt: 6♠, 7♣, 3♥"
  ]
}
2025-10-31 18:50:45,560 - poker_game - DEBUG - Create Session: {'id': '422ccae5-2adc-481d-bafa-26c78675fd30', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904245.556596}
2025-10-31 18:50:45,192 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）は 6♠, 7♣, 3♥ です。私の手札は 5♥, J♦ です。現在のところ、私はストレート（連続した数字の組み合わせ）のドロー（完成する可能性のある役）やフラッシュ（同じスートのカードの組み合わせ）のドローも持っていません。Jはボードにペアを作っていません。相手はまだアクションを起こしておらず、コール額も0なので、チェック（ベットせずに次のプレイヤーにアクションを渡すこと）をするのが最善です。これにより、追加のベットなしで次のカード（ターン）を見ることができます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 168, 'promptTokenCount': 1038, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1038}], 'totalTokenCount': 1206}, 'invocationId': 'e-6535714e-d6ef-4383-b6ea-531187cf63f4', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Kyt2shjy', 'timestamp': 1761904245.57267}]
2025-10-31 18:50:45,192 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:50:45,193 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）は 6♠, 7♣, 3♥ です。私の手札は 5♥, J♦ です。現在のところ、私はストレート（連続した数字の組み合わせ）のドロー（完成する可能性のある役）やフラッシュ（同じスートのカードの組み合わせ）のドローも持っていません。Jはボードにペアを作っていません。相手はまだアクションを起こしておらず、コール額も0なので、チェック（ベットせずに次のプレイヤーにアクションを渡すこと）をするのが最善です。これにより、追加のベットなしで次のカード（ターン）を見ることができます。"
}
```
2025-10-31 18:50:45,193 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:50:45,194 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）は 6♠, 7♣, 3♥ です。私の手札は 5♥, J♦ です。現在のところ、私はストレート（連続した数字の組み合わせ）のドロー（完成する可能性のある役）やフラッシュ（同じスートのカードの組み合わせ）のドローも持っていません。Jはボードにペアを作っていません。相手はまだアクションを起こしておらず、コール額も0なので、チェック（ベットせずに次のプレイヤーにアクションを渡すこと）をするのが最善です。これにより、追加のベットなしで次のカード（ターン）を見ることができます。"\n}\n```'
2025-10-31 18:50:45,194 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:50:45,194 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）は 6♠, 7♣, 3♥ です。私の手札は 5♥, J♦ です。現在のところ、私はストレート（連続した数字の組み合わせ）のドロー（完成する可能性のある役）やフラッシュ（同じスートのカードの組み合わせ）のドローも持っていません。Jはボードにペアを作っていません。相手はまだアクションを起こしておらず、コール額も0なので、チェック（ベットせずに次のプレイヤーにアクションを渡すこと）をするのが最善です。これにより、追加のベットなしで次のカード（ターン）を見ることができます。"\n}'
2025-10-31 18:50:45,195 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）は 6♠, 7♣, 3♥ です。私の手札は 5♥, J♦ です。現在のところ、私はストレート（連続した数字の組み合わせ）のドロー（完成する可能性のある役）やフラッシュ（同じスートのカードの組み合わせ）のドローも持っていません。Jはボードにペアを作っていません。相手はまだアクションを起こしておらず、コール額も0なので、チェック（ベットせずに次のプレイヤーにアクションを渡すこと）をするのが最善です。これにより、追加のベットなしで次のカード（ターン）を見ることができます。"
}
2025-10-31 18:50:45,195 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）は 6♠, 7♣, 3♥ です。私の手札は 5♥, J♦ です。現在のところ、私はストレート（連続した数字の組み合わせ）のドロー（完成する可能性のある役）やフラッシュ（同じスートのカードの組み合わせ）のドローも持っていません。Jはボードにペアを作っていません。相手はまだアクションを起こしておらず、コール額も0なので、チェック（ベットせずに次のプレイヤーにアクションを渡すこと）をするのが最善です。これにより、追加のベットなしで次のカード（ターン）を見ることができます。'}
2025-10-31 18:50:45,195 - poker_game - DEBUG - [Agent2] Extracted values - action: 'check', amount: 0
2025-10-31 18:50:45,195 - poker_game - DEBUG - [Agent2] Action 'check' normalized - amount set to 0
2025-10-31 18:50:45,196 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:50:45,196 - poker_game - INFO - [Agent2] Successfully parsed decision: check, 0, フロップ（最初の3枚のコミュニティカード）は 6♠, 7♣, 3♥ です。私の手札は 5♥, J♦ です。現在のところ、私はストレート（連続した数字の組み合わせ）のドロー（完成する可能性のある役）やフラッシュ（同じスートのカードの組み合わせ）のドローも持っていません。Jはボードにペアを作っていません。相手はまだアクションを起こしておらず、コール額も0なので、チェック（ベットせずに次のプレイヤーにアクションを渡すこと）をするのが最善です。これにより、追加のベットなしで次のカード（ターン）を見ることができます。
2025-10-31 18:50:45,197 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'check' with amount 0
2025-10-31 18:50:45,198 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:45,198 - poker_game - INFO - Hand #8, Phase: flop
2025-10-31 18:50:45,199 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:45,199 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:45,199 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:45,200 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:45,200 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:45,200 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥']
2025-10-31 18:50:45,201 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:45,201 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:45,201 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:45,202 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:45,202 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:45,203 - poker_game - INFO - ==================================================
2025-10-31 18:50:45,203 - poker_game - INFO - ACTION_EXECUTED: Player 2 checked
2025-10-31 18:50:45,215 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:45,215 - poker_game - INFO - Hand #8, Phase: flop
2025-10-31 18:50:45,216 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:45,216 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:45,216 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:45,217 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:45,217 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:45,218 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥']
2025-10-31 18:50:45,218 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:45,219 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:45,219 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:45,219 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:45,220 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:45,220 - poker_game - INFO - Extra: Action: Player 2 checked
2025-10-31 18:50:45,221 - poker_game - INFO - ==================================================
2025-10-31 18:50:45,221 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:45,222 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:45,222 - poker_game - DEBUG - Active players: [0, 2]
2025-10-31 18:50:45,222 - poker_game - INFO - Advanced from player 2 to player 0 (seat order)
2025-10-31 18:50:45,223 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:45,223 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:45,223 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:50:45,223 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:50:45,223 - poker_game - DEBUG - Active player indices: [0, 2]
2025-10-31 18:50:45,224 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:50:45,224 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:50:45,224 - poker_game - DEBUG - First actor index: 2
2025-10-31 18:50:45,224 - poker_game - DEBUG - Betting continues: Current player 0 != first actor 2
2025-10-31 18:50:45,224 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:45,225 - poker_game - INFO - Hand #8, Phase: flop
2025-10-31 18:50:45,225 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:50:45,226 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:45,226 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:45,226 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:45,227 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:45,227 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥']
2025-10-31 18:50:45,228 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:45,228 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:45,229 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:45,229 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:45,230 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:45,230 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:45,231 - poker_game - INFO - ==================================================
2025-10-31 18:50:45,332 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "flop",
  "your_cards": [
    "9♥",
    "A♠"
  ],
  "community": [
    "6♠",
    "7♣",
    "3♥"
  ],
  "your_chips": 1375,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 45,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1580,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1375)"
  ],
  "history": [
    "Turn dealt: J♣",
    "Player 1 checked",
    "Player 2 checked",
    "River dealt: 2♦",
    "Player 1 checked",
    "Player 2 checked",
    "Showdown: Player 1 hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦ cards=8♠, 8♥",
    "Showdown: Player 2 hand=One Pair: 2s - A♠, J♣, 10♠, 2♠, 2♦ cards=4♠, A♠",
    "Side pot layer 0: amount=100, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 1: amount=1600, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 2: amount=2800, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 folded",
    "Player 2 called 10",
    "Player 3 folded",
    "Flop dealt: 6♠, 7♣, 3♥",
    "Player 2 checked"
  ]
}
2025-10-31 18:50:45,344 - poker_game - DEBUG - Create Session: {'id': '0a90866b-ed75-422f-82e2-f98b724e1834', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904245.3417628}
2025-10-31 18:50:47,438 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）が開かれた段階で、私はAハイ（エースが一番強いカード）であり、ボード（コミュニティカード）には何もマッチしていません。しかし、レイズ（ベット額を上げる行為）はなく、対戦相手もチェック（ベットせずに次のプレイヤーに番を回す行為）しているので、私もリスクを冒さずに様子を見ます。これは「フリーカード」を得て、ターン（4枚目のコミュニティカード）やリバー（5枚目のコミュニティカード）で役ができる可能性に期待する戦略です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 151, 'promptTokenCount': 1040, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1040}], 'totalTokenCount': 1191}, 'invocationId': 'e-6663cbdb-df3c-471f-b699-a995b1b3693e', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'WKnYNLpU', 'timestamp': 1761904245.35472}]
2025-10-31 18:50:47,439 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:50:47,439 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）が開かれた段階で、私はAハイ（エースが一番強いカード）であり、ボード（コミュニティカード）には何もマッチしていません。しかし、レイズ（ベット額を上げる行為）はなく、対戦相手もチェック（ベットせずに次のプレイヤーに番を回す行為）しているので、私もリスクを冒さずに様子を見ます。これは「フリーカード」を得て、ターン（4枚目のコミュニティカード）やリバー（5枚目のコミュニティカード）で役ができる可能性に期待する戦略です。"
}
```
2025-10-31 18:50:47,439 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:50:47,439 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）が開かれた段階で、私はAハイ（エースが一番強いカード）であり、ボード（コミュニティカード）には何もマッチしていません。しかし、レイズ（ベット額を上げる行為）はなく、対戦相手もチェック（ベットせずに次のプレイヤーに番を回す行為）しているので、私もリスクを冒さずに様子を見ます。これは「フリーカード」を得て、ターン（4枚目のコミュニティカード）やリバー（5枚目のコミュニティカード）で役ができる可能性に期待する戦略です。"\n}\n```'
2025-10-31 18:50:47,439 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:50:47,439 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）が開かれた段階で、私はAハイ（エースが一番強いカード）であり、ボード（コミュニティカード）には何もマッチしていません。しかし、レイズ（ベット額を上げる行為）はなく、対戦相手もチェック（ベットせずに次のプレイヤーに番を回す行為）しているので、私もリスクを冒さずに様子を見ます。これは「フリーカード」を得て、ターン（4枚目のコミュニティカード）やリバー（5枚目のコミュニティカード）で役ができる可能性に期待する戦略です。"\n}'
2025-10-31 18:50:47,440 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）が開かれた段階で、私はAハイ（エースが一番強いカード）であり、ボード（コミュニティカード）には何もマッチしていません。しかし、レイズ（ベット額を上げる行為）はなく、対戦相手もチェック（ベットせずに次のプレイヤーに番を回す行為）しているので、私もリスクを冒さずに様子を見ます。これは「フリーカード」を得て、ターン（4枚目のコミュニティカード）やリバー（5枚目のコミュニティカード）で役ができる可能性に期待する戦略です。"
}
2025-10-31 18:50:47,440 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）が開かれた段階で、私はAハイ（エースが一番強いカード）であり、ボード（コミュニティカード）には何もマッチしていません。しかし、レイズ（ベット額を上げる行為）はなく、対戦相手もチェック（ベットせずに次のプレイヤーに番を回す行為）しているので、私もリスクを冒さずに様子を見ます。これは「フリーカード」を得て、ターン（4枚目のコミュニティカード）やリバー（5枚目のコミュニティカード）で役ができる可能性に期待する戦略です。'}
2025-10-31 18:50:47,440 - poker_game - DEBUG - [Agent0] Extracted values - action: 'check', amount: 0
2025-10-31 18:50:47,440 - poker_game - DEBUG - [Agent0] Action 'check' normalized - amount set to 0
2025-10-31 18:50:47,440 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:50:47,440 - poker_game - INFO - [Agent0] Successfully parsed decision: check, 0, フロップ（最初の3枚のコミュニティカード）が開かれた段階で、私はAハイ（エースが一番強いカード）であり、ボード（コミュニティカード）には何もマッチしていません。しかし、レイズ（ベット額を上げる行為）はなく、対戦相手もチェック（ベットせずに次のプレイヤーに番を回す行為）しているので、私もリスクを冒さずに様子を見ます。これは「フリーカード」を得て、ターン（4枚目のコミュニティカード）やリバー（5枚目のコミュニティカード）で役ができる可能性に期待する戦略です。
2025-10-31 18:50:47,441 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'check' with amount 0
2025-10-31 18:50:47,441 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:47,441 - poker_game - INFO - Hand #8, Phase: flop
2025-10-31 18:50:47,442 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:50:47,442 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:47,442 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:47,442 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:47,442 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:47,443 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥']
2025-10-31 18:50:47,443 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:47,443 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:47,443 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:47,443 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:47,444 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:47,444 - poker_game - INFO - ==================================================
2025-10-31 18:50:47,444 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 18:50:47,453 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:47,454 - poker_game - INFO - Hand #8, Phase: flop
2025-10-31 18:50:47,454 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:50:47,454 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:47,455 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:47,455 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:47,455 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:47,456 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥']
2025-10-31 18:50:47,456 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:47,457 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:47,457 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:47,457 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:47,458 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:47,458 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 18:50:47,458 - poker_game - INFO - ==================================================
2025-10-31 18:50:47,459 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:47,459 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:47,459 - poker_game - DEBUG - Active players: [0, 2]
2025-10-31 18:50:47,459 - poker_game - INFO - Advanced from player 0 to player 2 (seat order)
2025-10-31 18:50:47,459 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:47,459 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:47,459 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:50:47,459 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:50:47,459 - poker_game - DEBUG - Active player indices: [0, 2]
2025-10-31 18:50:47,459 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:50:47,460 - poker_game - DEBUG - Current player index: 2
2025-10-31 18:50:47,460 - poker_game - DEBUG - First actor index: 2
2025-10-31 18:50:47,460 - poker_game - INFO - Betting complete: Back to first actor 2 (all players have acted)
2025-10-31 18:50:47,460 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:47,460 - poker_game - INFO - Hand #8, Phase: flop
2025-10-31 18:50:47,460 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:47,460 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:47,460 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:47,460 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:47,460 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:47,461 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥']
2025-10-31 18:50:47,461 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:47,461 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:47,462 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:47,462 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:47,462 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:47,462 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:50:47,463 - poker_game - INFO - ==================================================
2025-10-31 18:50:47,563 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:50:47,564 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:47,564 - poker_game - INFO - Remaining players: 2
2025-10-31 18:50:47,565 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:50:47,565 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:50:47,566 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 18:50:47,576 - poker_game - INFO - Starting new betting round
2025-10-31 18:50:47,577 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:50:47,577 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:50:47,577 - poker_game - DEBUG - Active players for new betting round: [0, 2]
2025-10-31 18:50:47,578 - poker_game - DEBUG - Dealer button: 1
2025-10-31 18:50:47,578 - poker_game - INFO - First actor: Player 2 (by phase rule), was 2
2025-10-31 18:50:47,578 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:50:47,579 - poker_game - INFO - Hand #8, Phase: turn
2025-10-31 18:50:47,579 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:47,579 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:47,580 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:47,580 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:47,580 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:47,581 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦']
2025-10-31 18:50:47,581 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:47,582 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:47,582 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:47,582 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:47,583 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:47,583 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 18:50:47,583 - poker_game - INFO - ==================================================
2025-10-31 18:50:47,584 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "turn",
  "your_cards": [
    "5♥",
    "J♦"
  ],
  "community": [
    "6♠",
    "7♣",
    "3♥",
    "Q♦"
  ],
  "your_chips": 45,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1375,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1580,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (45)"
  ],
  "history": [
    "Player 2 checked",
    "River dealt: 2♦",
    "Player 1 checked",
    "Player 2 checked",
    "Showdown: Player 1 hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦ cards=8♠, 8♥",
    "Showdown: Player 2 hand=One Pair: 2s - A♠, J♣, 10♠, 2♠, 2♦ cards=4♠, A♠",
    "Side pot layer 0: amount=100, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 1: amount=1600, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 2: amount=2800, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 folded",
    "Player 2 called 10",
    "Player 3 folded",
    "Flop dealt: 6♠, 7♣, 3♥",
    "Player 2 checked",
    "Player 0 checked",
    "Turn dealt: Q♦"
  ]
}
2025-10-31 18:50:47,602 - poker_game - DEBUG - Create Session: {'id': '1590eba9-b501-40f5-9d02-8021e8846dcf', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904247.5977554}
2025-10-31 18:50:49,606 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたの手札（5♥ J♦）はコミュニティカード（6♠ 7♣ 3♥ Q♦）と組み合わさっても、強い役を作れていません。ペアもストレートもフラッシュもありません。相手はまだアクションを起こしていないので、ブラフをするにはリスクが高いです。相手のアクションを見て、次の行動を決めましょう。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 110, 'promptTokenCount': 1044, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1044}], 'totalTokenCount': 1154}, 'invocationId': 'e-a8242d56-c4de-4d57-ae65-24db30a1ae0e', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'UYdoEYOO', 'timestamp': 1761904247.611746}]
2025-10-31 18:50:49,606 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:50:49,607 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "現在の状況では、あなたの手札（5♥ J♦）はコミュニティカード（6♠ 7♣ 3♥ Q♦）と組み合わさっても、強い役を作れていません。ペアもストレートもフラッシュもありません。相手はまだアクションを起こしていないので、ブラフをするにはリスクが高いです。相手のアクションを見て、次の行動を決めましょう。"
}
```
2025-10-31 18:50:49,607 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:50:49,607 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたの手札（5♥ J♦）はコミュニティカード（6♠ 7♣ 3♥ Q♦）と組み合わさっても、強い役を作れていません。ペアもストレートもフラッシュもありません。相手はまだアクションを起こしていないので、ブラフをするにはリスクが高いです。相手のアクションを見て、次の行動を決めましょう。"\n}\n```'
2025-10-31 18:50:49,607 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:50:49,607 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたの手札（5♥ J♦）はコミュニティカード（6♠ 7♣ 3♥ Q♦）と組み合わさっても、強い役を作れていません。ペアもストレートもフラッシュもありません。相手はまだアクションを起こしていないので、ブラフをするにはリスクが高いです。相手のアクションを見て、次の行動を決めましょう。"\n}'
2025-10-31 18:50:49,608 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "現在の状況では、あなたの手札（5♥ J♦）はコミュニティカード（6♠ 7♣ 3♥ Q♦）と組み合わさっても、強い役を作れていません。ペアもストレートもフラッシュもありません。相手はまだアクションを起こしていないので、ブラフをするにはリスクが高いです。相手のアクションを見て、次の行動を決めましょう。"
}
2025-10-31 18:50:49,608 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '現在の状況では、あなたの手札（5♥ J♦）はコミュニティカード（6♠ 7♣ 3♥ Q♦）と組み合わさっても、強い役を作れていません。ペアもストレートもフラッシュもありません。相手はまだアクションを起こしていないので、ブラフをするにはリスクが高いです。相手のアクションを見て、次の行動を決めましょう。'}
2025-10-31 18:50:49,608 - poker_game - DEBUG - [Agent2] Extracted values - action: 'check', amount: 0
2025-10-31 18:50:49,608 - poker_game - DEBUG - [Agent2] Action 'check' normalized - amount set to 0
2025-10-31 18:50:49,608 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:50:49,608 - poker_game - INFO - [Agent2] Successfully parsed decision: check, 0, 現在の状況では、あなたの手札（5♥ J♦）はコミュニティカード（6♠ 7♣ 3♥ Q♦）と組み合わさっても、強い役を作れていません。ペアもストレートもフラッシュもありません。相手はまだアクションを起こしていないので、ブラフをするにはリスクが高いです。相手のアクションを見て、次の行動を決めましょう。
2025-10-31 18:50:49,609 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'check' with amount 0
2025-10-31 18:50:49,610 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:49,610 - poker_game - INFO - Hand #8, Phase: turn
2025-10-31 18:50:49,611 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:49,611 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:49,612 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:49,612 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:49,613 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:49,613 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦']
2025-10-31 18:50:49,614 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:49,615 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:49,616 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:49,616 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:49,618 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:49,618 - poker_game - INFO - ==================================================
2025-10-31 18:50:49,619 - poker_game - INFO - ACTION_EXECUTED: Player 2 checked
2025-10-31 18:50:49,631 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:49,632 - poker_game - INFO - Hand #8, Phase: turn
2025-10-31 18:50:49,632 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:49,632 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:49,633 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:49,633 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:49,633 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:49,633 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦']
2025-10-31 18:50:49,634 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:49,634 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:49,634 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:49,635 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:49,635 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:49,636 - poker_game - INFO - Extra: Action: Player 2 checked
2025-10-31 18:50:49,636 - poker_game - INFO - ==================================================
2025-10-31 18:50:49,637 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:49,638 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:49,639 - poker_game - DEBUG - Active players: [0, 2]
2025-10-31 18:50:49,639 - poker_game - INFO - Advanced from player 2 to player 0 (seat order)
2025-10-31 18:50:49,639 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:49,640 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:49,640 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:50:49,640 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:50:49,640 - poker_game - DEBUG - Active player indices: [0, 2]
2025-10-31 18:50:49,641 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:50:49,641 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:50:49,641 - poker_game - DEBUG - First actor index: 2
2025-10-31 18:50:49,641 - poker_game - DEBUG - Betting continues: Current player 0 != first actor 2
2025-10-31 18:50:49,641 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:49,642 - poker_game - INFO - Hand #8, Phase: turn
2025-10-31 18:50:49,642 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:50:49,643 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:49,643 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:49,644 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:49,644 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:49,645 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦']
2025-10-31 18:50:49,645 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:49,645 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:49,646 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:49,646 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:49,646 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:49,646 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:49,647 - poker_game - INFO - ==================================================
2025-10-31 18:50:49,748 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "turn",
  "your_cards": [
    "9♥",
    "A♠"
  ],
  "community": [
    "6♠",
    "7♣",
    "3♥",
    "Q♦"
  ],
  "your_chips": 1375,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 45,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1580,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1375)"
  ],
  "history": [
    "River dealt: 2♦",
    "Player 1 checked",
    "Player 2 checked",
    "Showdown: Player 1 hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦ cards=8♠, 8♥",
    "Showdown: Player 2 hand=One Pair: 2s - A♠, J♣, 10♠, 2♠, 2♦ cards=4♠, A♠",
    "Side pot layer 0: amount=100, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 1: amount=1600, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 2: amount=2800, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 folded",
    "Player 2 called 10",
    "Player 3 folded",
    "Flop dealt: 6♠, 7♣, 3♥",
    "Player 2 checked",
    "Player 0 checked",
    "Turn dealt: Q♦",
    "Player 2 checked"
  ]
}
2025-10-31 18:50:49,757 - poker_game - DEBUG - Create Session: {'id': '43f8f120-243c-4c3a-abcd-b21a3a152889', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904249.75483}
2025-10-31 18:50:51,844 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたの手札（A♠, 9♥）はコミュニティカード（6♠, 7♣, 3♥, Q♦）に対してあまり強い役を作れていません。トップペア（Aハイ）ですが、Q♦が出たことで相手がより強いペアを持っている可能性や、ストレート、フラッシュの可能性も考慮する必要があります。相手のプレイヤー2はチェックしており、リスクを冒す必要はないと判断しました。このままターンを終了し、次のカード（リバー）を見てから判断するのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 145, 'promptTokenCount': 1046, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1046}], 'totalTokenCount': 1191}, 'invocationId': 'e-384904dd-341d-44c2-85ea-8c7e7abc80ae', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '5Yoz7Z2y', 'timestamp': 1761904249.767609}]
2025-10-31 18:50:51,844 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:50:51,845 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "現在の状況では、あなたの手札（A♠, 9♥）はコミュニティカード（6♠, 7♣, 3♥, Q♦）に対してあまり強い役を作れていません。トップペア（Aハイ）ですが、Q♦が出たことで相手がより強いペアを持っている可能性や、ストレート、フラッシュの可能性も考慮する必要があります。相手のプレイヤー2はチェックしており、リスクを冒す必要はないと判断しました。このままターンを終了し、次のカード（リバー）を見てから判断するのが最善です。"
}
```
2025-10-31 18:50:51,845 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:50:51,846 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたの手札（A♠, 9♥）はコミュニティカード（6♠, 7♣, 3♥, Q♦）に対してあまり強い役を作れていません。トップペア（Aハイ）ですが、Q♦が出たことで相手がより強いペアを持っている可能性や、ストレート、フラッシュの可能性も考慮する必要があります。相手のプレイヤー2はチェックしており、リスクを冒す必要はないと判断しました。このままターンを終了し、次のカード（リバー）を見てから判断するのが最善です。"\n}\n```'
2025-10-31 18:50:51,846 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:50:51,846 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたの手札（A♠, 9♥）はコミュニティカード（6♠, 7♣, 3♥, Q♦）に対してあまり強い役を作れていません。トップペア（Aハイ）ですが、Q♦が出たことで相手がより強いペアを持っている可能性や、ストレート、フラッシュの可能性も考慮する必要があります。相手のプレイヤー2はチェックしており、リスクを冒す必要はないと判断しました。このままターンを終了し、次のカード（リバー）を見てから判断するのが最善です。"\n}'
2025-10-31 18:50:51,846 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "現在の状況では、あなたの手札（A♠, 9♥）はコミュニティカード（6♠, 7♣, 3♥, Q♦）に対してあまり強い役を作れていません。トップペア（Aハイ）ですが、Q♦が出たことで相手がより強いペアを持っている可能性や、ストレート、フラッシュの可能性も考慮する必要があります。相手のプレイヤー2はチェックしており、リスクを冒す必要はないと判断しました。このままターンを終了し、次のカード（リバー）を見てから判断するのが最善です。"
}
2025-10-31 18:50:51,847 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '現在の状況では、あなたの手札（A♠, 9♥）はコミュニティカード（6♠, 7♣, 3♥, Q♦）に対してあまり強い役を作れていません。トップペア（Aハイ）ですが、Q♦が出たことで相手がより強いペアを持っている可能性や、ストレート、フラッシュの可能性も考慮する必要があります。相手のプレイヤー2はチェックしており、リスクを冒す必要はないと判断しました。このままターンを終了し、次のカード（リバー）を見てから判断するのが最善です。'}
2025-10-31 18:50:51,847 - poker_game - DEBUG - [Agent0] Extracted values - action: 'check', amount: 0
2025-10-31 18:50:51,847 - poker_game - DEBUG - [Agent0] Action 'check' normalized - amount set to 0
2025-10-31 18:50:51,847 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:50:51,847 - poker_game - INFO - [Agent0] Successfully parsed decision: check, 0, 現在の状況では、あなたの手札（A♠, 9♥）はコミュニティカード（6♠, 7♣, 3♥, Q♦）に対してあまり強い役を作れていません。トップペア（Aハイ）ですが、Q♦が出たことで相手がより強いペアを持っている可能性や、ストレート、フラッシュの可能性も考慮する必要があります。相手のプレイヤー2はチェックしており、リスクを冒す必要はないと判断しました。このままターンを終了し、次のカード（リバー）を見てから判断するのが最善です。
2025-10-31 18:50:51,848 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'check' with amount 0
2025-10-31 18:50:51,849 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:51,849 - poker_game - INFO - Hand #8, Phase: turn
2025-10-31 18:50:51,849 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:50:51,850 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:51,850 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:51,851 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:51,851 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:51,851 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦']
2025-10-31 18:50:51,852 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:51,852 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:51,853 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:51,853 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:51,853 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:51,854 - poker_game - INFO - ==================================================
2025-10-31 18:50:51,854 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 18:50:51,866 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:51,866 - poker_game - INFO - Hand #8, Phase: turn
2025-10-31 18:50:51,866 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:50:51,867 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:51,867 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:51,867 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:51,868 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:51,868 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦']
2025-10-31 18:50:51,868 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:51,869 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:51,869 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:51,869 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:51,870 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:51,870 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 18:50:51,871 - poker_game - INFO - ==================================================
2025-10-31 18:50:51,871 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:51,871 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:51,871 - poker_game - DEBUG - Active players: [0, 2]
2025-10-31 18:50:51,872 - poker_game - INFO - Advanced from player 0 to player 2 (seat order)
2025-10-31 18:50:51,872 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:51,873 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:51,873 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:50:51,873 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:50:51,873 - poker_game - DEBUG - Active player indices: [0, 2]
2025-10-31 18:50:51,874 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:50:51,874 - poker_game - DEBUG - Current player index: 2
2025-10-31 18:50:51,874 - poker_game - DEBUG - First actor index: 2
2025-10-31 18:50:51,874 - poker_game - INFO - Betting complete: Back to first actor 2 (all players have acted)
2025-10-31 18:50:51,874 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:51,875 - poker_game - INFO - Hand #8, Phase: turn
2025-10-31 18:50:51,875 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:51,876 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:51,876 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:51,876 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:51,877 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:51,877 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦']
2025-10-31 18:50:51,878 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:51,878 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:51,878 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:51,879 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:51,879 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:51,880 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:50:51,880 - poker_game - INFO - ==================================================
2025-10-31 18:50:51,981 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 18:50:51,981 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:51,982 - poker_game - INFO - Remaining players: 2
2025-10-31 18:50:51,982 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:50:51,983 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:50:51,983 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 18:50:51,993 - poker_game - INFO - Starting new betting round
2025-10-31 18:50:51,994 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:50:51,994 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:50:51,994 - poker_game - DEBUG - Active players for new betting round: [0, 2]
2025-10-31 18:50:51,995 - poker_game - DEBUG - Dealer button: 1
2025-10-31 18:50:51,995 - poker_game - INFO - First actor: Player 2 (by phase rule), was 2
2025-10-31 18:50:51,995 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:50:51,996 - poker_game - INFO - Hand #8, Phase: river
2025-10-31 18:50:51,996 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:51,996 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:51,997 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:51,997 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:51,997 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:51,997 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦', 'K♣']
2025-10-31 18:50:51,998 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:51,998 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:51,998 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:51,998 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:51,999 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:52,001 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 18:50:52,001 - poker_game - INFO - ==================================================
2025-10-31 18:50:52,002 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "river",
  "your_cards": [
    "5♥",
    "J♦"
  ],
  "community": [
    "6♠",
    "7♣",
    "3♥",
    "Q♦",
    "K♣"
  ],
  "your_chips": 45,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1375,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1580,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (45)"
  ],
  "history": [
    "Player 2 checked",
    "Showdown: Player 1 hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦ cards=8♠, 8♥",
    "Showdown: Player 2 hand=One Pair: 2s - A♠, J♣, 10♠, 2♠, 2♦ cards=4♠, A♠",
    "Side pot layer 0: amount=100, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 1: amount=1600, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 2: amount=2800, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 folded",
    "Player 2 called 10",
    "Player 3 folded",
    "Flop dealt: 6♠, 7♣, 3♥",
    "Player 2 checked",
    "Player 0 checked",
    "Turn dealt: Q♦",
    "Player 2 checked",
    "Player 0 checked",
    "River dealt: K♣"
  ]
}
2025-10-31 18:50:52,016 - poker_game - DEBUG - Create Session: {'id': 'ad63f709-8859-481c-8ab8-bc8048eb8d3a', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904252.01432}
2025-10-31 18:50:54,423 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「5♥ J♦」、コミュニティカードは「6♠ 7♣ 3♥ Q♦ K♣」です。あなたの手札とコミュニティカードを合わせても、ペアさえできていません（ノペア）。ポットは60で、コール（相手のベット額と同額を支払うこと）もレイズ（ベット額を上げる）も必要ありません（to_callが0）。過去の履歴を見ると、あなたも相手もチェック（ベットせずに次のプレイヤーに番を回すこと）を繰り返しています。この状況では、これ以上ベットする価値のあるハンド（役）ではないため、チェックで様子を見るのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 178, 'promptTokenCount': 1049, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1049}], 'totalTokenCount': 1227}, 'invocationId': 'e-3730265b-f8d1-4694-82ff-7031c79214db', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Uadlbl7D', 'timestamp': 1761904252.026413}]
2025-10-31 18:50:54,423 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:50:54,423 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「5♥ J♦」、コミュニティカードは「6♠ 7♣ 3♥ Q♦ K♣」です。あなたの手札とコミュニティカードを合わせても、ペアさえできていません（ノペア）。ポットは60で、コール（相手のベット額と同額を支払うこと）もレイズ（ベット額を上げる）も必要ありません（to_callが0）。過去の履歴を見ると、あなたも相手もチェック（ベットせずに次のプレイヤーに番を回すこと）を繰り返しています。この状況では、これ以上ベットする価値のあるハンド（役）ではないため、チェックで様子を見るのが最善です。"
}
```
2025-10-31 18:50:54,423 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:50:54,423 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「5♥ J♦」、コミュニティカードは「6♠ 7♣ 3♥ Q♦ K♣」です。あなたの手札とコミュニティカードを合わせても、ペアさえできていません（ノペア）。ポットは60で、コール（相手のベット額と同額を支払うこと）もレイズ（ベット額を上げる）も必要ありません（to_callが0）。過去の履歴を見ると、あなたも相手もチェック（ベットせずに次のプレイヤーに番を回すこと）を繰り返しています。この状況では、これ以上ベットする価値のあるハンド（役）ではないため、チェックで様子を見るのが最善です。"\n}\n```'
2025-10-31 18:50:54,424 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:50:54,424 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「5♥ J♦」、コミュニティカードは「6♠ 7♣ 3♥ Q♦ K♣」です。あなたの手札とコミュニティカードを合わせても、ペアさえできていません（ノペア）。ポットは60で、コール（相手のベット額と同額を支払うこと）もレイズ（ベット額を上げる）も必要ありません（to_callが0）。過去の履歴を見ると、あなたも相手もチェック（ベットせずに次のプレイヤーに番を回すこと）を繰り返しています。この状況では、これ以上ベットする価値のあるハンド（役）ではないため、チェックで様子を見るのが最善です。"\n}'
2025-10-31 18:50:54,424 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「5♥ J♦」、コミュニティカードは「6♠ 7♣ 3♥ Q♦ K♣」です。あなたの手札とコミュニティカードを合わせても、ペアさえできていません（ノペア）。ポットは60で、コール（相手のベット額と同額を支払うこと）もレイズ（ベット額を上げる）も必要ありません（to_callが0）。過去の履歴を見ると、あなたも相手もチェック（ベットせずに次のプレイヤーに番を回すこと）を繰り返しています。この状況では、これ以上ベットする価値のあるハンド（役）ではないため、チェックで様子を見るのが最善です。"
}
2025-10-31 18:50:54,424 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最終ラウンド）で、あなたの手札は「5♥ J♦」、コミュニティカードは「6♠ 7♣ 3♥ Q♦ K♣」です。あなたの手札とコミュニティカードを合わせても、ペアさえできていません（ノペア）。ポットは60で、コール（相手のベット額と同額を支払うこと）もレイズ（ベット額を上げる）も必要ありません（to_callが0）。過去の履歴を見ると、あなたも相手もチェック（ベットせずに次のプレイヤーに番を回すこと）を繰り返しています。この状況では、これ以上ベットする価値のあるハンド（役）ではないため、チェックで様子を見るのが最善です。'}
2025-10-31 18:50:54,424 - poker_game - DEBUG - [Agent2] Extracted values - action: 'check', amount: 0
2025-10-31 18:50:54,424 - poker_game - DEBUG - [Agent2] Action 'check' normalized - amount set to 0
2025-10-31 18:50:54,424 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:50:54,424 - poker_game - INFO - [Agent2] Successfully parsed decision: check, 0, リバー（最終ラウンド）で、あなたの手札は「5♥ J♦」、コミュニティカードは「6♠ 7♣ 3♥ Q♦ K♣」です。あなたの手札とコミュニティカードを合わせても、ペアさえできていません（ノペア）。ポットは60で、コール（相手のベット額と同額を支払うこと）もレイズ（ベット額を上げる）も必要ありません（to_callが0）。過去の履歴を見ると、あなたも相手もチェック（ベットせずに次のプレイヤーに番を回すこと）を繰り返しています。この状況では、これ以上ベットする価値のあるハンド（役）ではないため、チェックで様子を見るのが最善です。
2025-10-31 18:50:54,426 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'check' with amount 0
2025-10-31 18:50:54,426 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:54,426 - poker_game - INFO - Hand #8, Phase: river
2025-10-31 18:50:54,426 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:54,427 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:54,427 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:54,427 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:54,428 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:54,428 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦', 'K♣']
2025-10-31 18:50:54,428 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:54,428 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:54,429 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:54,429 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:54,429 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:54,429 - poker_game - INFO - ==================================================
2025-10-31 18:50:54,430 - poker_game - INFO - ACTION_EXECUTED: Player 2 checked
2025-10-31 18:50:54,437 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:54,438 - poker_game - INFO - Hand #8, Phase: river
2025-10-31 18:50:54,438 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:54,438 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:54,439 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:54,440 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:54,440 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:54,442 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦', 'K♣']
2025-10-31 18:50:54,442 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:54,443 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:54,443 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:54,443 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:54,443 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:54,444 - poker_game - INFO - Extra: Action: Player 2 checked
2025-10-31 18:50:54,444 - poker_game - INFO - ==================================================
2025-10-31 18:50:54,444 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:54,444 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:54,444 - poker_game - DEBUG - Active players: [0, 2]
2025-10-31 18:50:54,444 - poker_game - INFO - Advanced from player 2 to player 0 (seat order)
2025-10-31 18:50:54,445 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:54,445 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:54,445 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:50:54,445 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:50:54,445 - poker_game - DEBUG - Active player indices: [0, 2]
2025-10-31 18:50:54,445 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:50:54,445 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:50:54,445 - poker_game - DEBUG - First actor index: 2
2025-10-31 18:50:54,446 - poker_game - DEBUG - Betting continues: Current player 0 != first actor 2
2025-10-31 18:50:54,446 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:54,446 - poker_game - INFO - Hand #8, Phase: river
2025-10-31 18:50:54,446 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:50:54,446 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:54,446 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:54,447 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:54,447 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:54,447 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦', 'K♣']
2025-10-31 18:50:54,447 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:54,447 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:54,448 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:54,448 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:54,448 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:54,448 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:54,448 - poker_game - INFO - ==================================================
2025-10-31 18:50:54,549 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "river",
  "your_cards": [
    "9♥",
    "A♠"
  ],
  "community": [
    "6♠",
    "7♣",
    "3♥",
    "Q♦",
    "K♣"
  ],
  "your_chips": 1375,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 45,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1580,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1365,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1375)"
  ],
  "history": [
    "Showdown: Player 1 hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦ cards=8♠, 8♥",
    "Showdown: Player 2 hand=One Pair: 2s - A♠, J♣, 10♠, 2♠, 2♦ cards=4♠, A♠",
    "Side pot layer 0: amount=100, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 1: amount=1600, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Side pot layer 2: amount=2800, winners=1 best_hand=Two Pair: 8s and 2s - J♣, 8♠, 8♥, 2♠, 2♦",
    "Player 2 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 folded",
    "Player 2 called 10",
    "Player 3 folded",
    "Flop dealt: 6♠, 7♣, 3♥",
    "Player 2 checked",
    "Player 0 checked",
    "Turn dealt: Q♦",
    "Player 2 checked",
    "Player 0 checked",
    "River dealt: K♣",
    "Player 2 checked"
  ]
}
2025-10-31 18:50:54,581 - poker_game - DEBUG - Create Session: {'id': '85c99443-a219-4c58-aac8-7cdf47b1dd01', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904254.5764394}
2025-10-31 18:50:56,630 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札（A♠, 9♥）とコミュニティカード（6♠, 7♣, 3♥, Q♦, K♣）を合わせても、強い役は成立していません。相手（プレイヤー2）はチップが非常に少なく、チェックで様子を見ているため、こちらも無理にベットせず、チェックでショーダウン（役の公開）に進むのが最善です。ショーダウンで相手の役が自分より弱ければ、ポットを獲得できます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 139, 'promptTokenCount': 1051, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1051}], 'totalTokenCount': 1190}, 'invocationId': 'e-a80b1769-137e-49b2-8512-27b8e23b949d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'oxhHD9J8', 'timestamp': 1761904254.594549}]
2025-10-31 18:50:56,630 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:50:56,630 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ラウンド）で、あなたの手札（A♠, 9♥）とコミュニティカード（6♠, 7♣, 3♥, Q♦, K♣）を合わせても、強い役は成立していません。相手（プレイヤー2）はチップが非常に少なく、チェックで様子を見ているため、こちらも無理にベットせず、チェックでショーダウン（役の公開）に進むのが最善です。ショーダウンで相手の役が自分より弱ければ、ポットを獲得できます。"
}
```
2025-10-31 18:50:56,630 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:50:56,631 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札（A♠, 9♥）とコミュニティカード（6♠, 7♣, 3♥, Q♦, K♣）を合わせても、強い役は成立していません。相手（プレイヤー2）はチップが非常に少なく、チェックで様子を見ているため、こちらも無理にベットせず、チェックでショーダウン（役の公開）に進むのが最善です。ショーダウンで相手の役が自分より弱ければ、ポットを獲得できます。"\n}\n```'
2025-10-31 18:50:56,631 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:50:56,631 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札（A♠, 9♥）とコミュニティカード（6♠, 7♣, 3♥, Q♦, K♣）を合わせても、強い役は成立していません。相手（プレイヤー2）はチップが非常に少なく、チェックで様子を見ているため、こちらも無理にベットせず、チェックでショーダウン（役の公開）に進むのが最善です。ショーダウンで相手の役が自分より弱ければ、ポットを獲得できます。"\n}'
2025-10-31 18:50:56,631 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ラウンド）で、あなたの手札（A♠, 9♥）とコミュニティカード（6♠, 7♣, 3♥, Q♦, K♣）を合わせても、強い役は成立していません。相手（プレイヤー2）はチップが非常に少なく、チェックで様子を見ているため、こちらも無理にベットせず、チェックでショーダウン（役の公開）に進むのが最善です。ショーダウンで相手の役が自分より弱ければ、ポットを獲得できます。"
}
2025-10-31 18:50:56,631 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最終ラウンド）で、あなたの手札（A♠, 9♥）とコミュニティカード（6♠, 7♣, 3♥, Q♦, K♣）を合わせても、強い役は成立していません。相手（プレイヤー2）はチップが非常に少なく、チェックで様子を見ているため、こちらも無理にベットせず、チェックでショーダウン（役の公開）に進むのが最善です。ショーダウンで相手の役が自分より弱ければ、ポットを獲得できます。'}
2025-10-31 18:50:56,631 - poker_game - DEBUG - [Agent0] Extracted values - action: 'check', amount: 0
2025-10-31 18:50:56,631 - poker_game - DEBUG - [Agent0] Action 'check' normalized - amount set to 0
2025-10-31 18:50:56,632 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:50:56,632 - poker_game - INFO - [Agent0] Successfully parsed decision: check, 0, リバー（最終ラウンド）で、あなたの手札（A♠, 9♥）とコミュニティカード（6♠, 7♣, 3♥, Q♦, K♣）を合わせても、強い役は成立していません。相手（プレイヤー2）はチップが非常に少なく、チェックで様子を見ているため、こちらも無理にベットせず、チェックでショーダウン（役の公開）に進むのが最善です。ショーダウンで相手の役が自分より弱ければ、ポットを獲得できます。
2025-10-31 18:50:56,632 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'check' with amount 0
2025-10-31 18:50:56,633 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:56,633 - poker_game - INFO - Hand #8, Phase: river
2025-10-31 18:50:56,633 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:50:56,633 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:56,633 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:56,634 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:56,634 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:56,634 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦', 'K♣']
2025-10-31 18:50:56,634 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:56,635 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:56,635 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:56,635 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:56,635 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:56,636 - poker_game - INFO - ==================================================
2025-10-31 18:50:56,636 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 18:50:56,643 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:56,644 - poker_game - INFO - Hand #8, Phase: river
2025-10-31 18:50:56,644 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:50:56,644 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:56,645 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:56,645 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:56,645 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:56,645 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦', 'K♣']
2025-10-31 18:50:56,645 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:56,646 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:56,646 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:56,646 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:56,646 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:56,647 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 18:50:56,648 - poker_game - INFO - ==================================================
2025-10-31 18:50:56,648 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:56,648 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:56,649 - poker_game - DEBUG - Active players: [0, 2]
2025-10-31 18:50:56,649 - poker_game - INFO - Advanced from player 0 to player 2 (seat order)
2025-10-31 18:50:56,649 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:56,649 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:56,649 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:50:56,650 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:50:56,650 - poker_game - DEBUG - Active player indices: [0, 2]
2025-10-31 18:50:56,650 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:50:56,650 - poker_game - DEBUG - Current player index: 2
2025-10-31 18:50:56,650 - poker_game - DEBUG - First actor index: 2
2025-10-31 18:50:56,651 - poker_game - INFO - Betting complete: Back to first actor 2 (all players have acted)
2025-10-31 18:50:56,651 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:56,651 - poker_game - INFO - Hand #8, Phase: river
2025-10-31 18:50:56,651 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:56,652 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:56,652 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:56,653 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:56,653 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:56,654 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦', 'K♣']
2025-10-31 18:50:56,654 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:56,654 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:56,654 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:56,654 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:56,654 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:56,655 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:50:56,655 - poker_game - INFO - ==================================================
2025-10-31 18:50:56,755 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 18:50:56,756 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:56,756 - poker_game - INFO - Remaining players: 2
2025-10-31 18:50:56,756 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:50:56,756 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:50:56,757 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 18:50:56,757 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:50:56,757 - poker_game - INFO - Hand #8, Phase: showdown
2025-10-31 18:50:56,758 - poker_game - INFO - Current player: 2, Dealer: 1
2025-10-31 18:50:56,758 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:50:56,758 - poker_game - INFO - Last raiser: None
2025-10-31 18:50:56,758 - poker_game - INFO - Betting round complete: True
2025-10-31 18:50:56,759 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:50:56,759 - poker_game - INFO - Community cards: ['6♠', '7♣', '3♥', 'Q♦', 'K♣']
2025-10-31 18:50:56,759 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:50:56,760 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:50:56,760 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:56,760 - poker_game - INFO -   P3(Agent3): chips=1580, bet=0, status=folded
2025-10-31 18:50:56,760 - poker_game - INFO -   P4(Agent4): chips=1365, bet=0, status=folded
2025-10-31 18:50:56,761 - poker_game - INFO - ==================================================
2025-10-31 18:50:56,761 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:50:56,762 - poker_game - INFO - Pot: 60, Community cards: ['6♠', '7♣', '3♥', 'Q♦', 'K♣']
2025-10-31 18:50:56,762 - poker_game - INFO -   Player 0 status=active cards=['9♥', 'A♠']
2025-10-31 18:50:56,763 - poker_game - INFO -   Player 2 status=active cards=['5♥', 'J♦']
2025-10-31 18:50:56,766 - poker_game - INFO -   Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=['9♥', 'A♠']
2025-10-31 18:50:56,766 - poker_game - INFO -   Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=['5♥', 'J♦']
2025-10-31 18:50:56,766 - poker_game - INFO - Pot layer 0: amount=60, contributors=[0, 2, 3]
2025-10-31 18:50:56,767 - poker_game - INFO - Showdown total awarded: 60 (game.pot=60)
2025-10-31 18:50:56,768 - poker_game - INFO - Showdown winners (aggregated): [0]
2025-10-31 18:50:56,768 - poker_game - INFO -   Awarded 60 to Player 0 (hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣)
2025-10-31 18:50:56,768 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:50:56,800 - poker_game - INFO - === STARTING NEW HAND #9 ===
2025-10-31 18:50:56,801 - poker_game - INFO - Active players for new hand: 5
2025-10-31 18:50:56,801 - poker_game - INFO - Moving dealer button
2025-10-31 18:50:56,801 - poker_game - INFO - Posting blinds
2025-10-31 18:50:56,823 - poker_game - INFO - Dealing hole cards
2025-10-31 18:50:56,824 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:50:56,834 - poker_game - INFO - Started new hand in database: hand_id=9
2025-10-31 18:50:56,835 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:50:56,835 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:50:56,836 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:50:56,836 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:50:56,836 - poker_game - INFO - Last raiser: 4
2025-10-31 18:50:56,837 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:56,837 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:50:56,838 - poker_game - INFO - Community cards: []
2025-10-31 18:50:56,838 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=active
2025-10-31 18:50:56,839 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:50:56,839 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:56,839 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=active
2025-10-31 18:50:56,840 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:50:56,841 - poker_game - INFO - ==================================================
2025-10-31 18:50:56,842 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "2♦",
    "10♥"
  ],
  "community": [],
  "your_chips": 1435,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 2,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 45,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1345,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1435)"
  ],
  "history": [
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 folded",
    "Player 2 called 10",
    "Player 3 folded",
    "Flop dealt: 6♠, 7♣, 3♥",
    "Player 2 checked",
    "Player 0 checked",
    "Turn dealt: Q♦",
    "Player 2 checked",
    "Player 0 checked",
    "River dealt: K♣",
    "Player 2 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠",
    "Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20"
  ]
}
2025-10-31 18:50:56,858 - poker_game - DEBUG - Create Session: {'id': 'c2d9c406-3c81-42a4-b3af-5592899c004b', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904256.8550134}
2025-10-31 18:50:58,620 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopで2♦ 10♥というハンドは、あまり強くありません。ポットをコールするには20必要ですが、このハンドで勝つ確率は低いです。他のプレイヤーのアクション（いくつかフォールドし、一部コールしている）を考慮しても、このハンドでリスクを取る価値はありません。そのため、フォールドするのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 103, 'promptTokenCount': 921, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 921}], 'totalTokenCount': 1024}, 'invocationId': 'e-37c8ca55-ba8f-4657-ba10-9082a7798e64', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'us7shKZ5', 'timestamp': 1761904256.870066}]
2025-10-31 18:50:58,620 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:50:58,620 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "Preflopで2♦ 10♥というハンドは、あまり強くありません。ポットをコールするには20必要ですが、このハンドで勝つ確率は低いです。他のプレイヤーのアクション（いくつかフォールドし、一部コールしている）を考慮しても、このハンドでリスクを取る価値はありません。そのため、フォールドするのが最善です。"
}
```
2025-10-31 18:50:58,621 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:50:58,621 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopで2♦ 10♥というハンドは、あまり強くありません。ポットをコールするには20必要ですが、このハンドで勝つ確率は低いです。他のプレイヤーのアクション（いくつかフォールドし、一部コールしている）を考慮しても、このハンドでリスクを取る価値はありません。そのため、フォールドするのが最善です。"\n}\n```'
2025-10-31 18:50:58,621 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:50:58,621 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopで2♦ 10♥というハンドは、あまり強くありません。ポットをコールするには20必要ですが、このハンドで勝つ確率は低いです。他のプレイヤーのアクション（いくつかフォールドし、一部コールしている）を考慮しても、このハンドでリスクを取る価値はありません。そのため、フォールドするのが最善です。"\n}'
2025-10-31 18:50:58,621 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "Preflopで2♦ 10♥というハンドは、あまり強くありません。ポットをコールするには20必要ですが、このハンドで勝つ確率は低いです。他のプレイヤーのアクション（いくつかフォールドし、一部コールしている）を考慮しても、このハンドでリスクを取る価値はありません。そのため、フォールドするのが最善です。"
}
2025-10-31 18:50:58,621 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'Preflopで2♦ 10♥というハンドは、あまり強くありません。ポットをコールするには20必要ですが、このハンドで勝つ確率は低いです。他のプレイヤーのアクション（いくつかフォールドし、一部コールしている）を考慮しても、このハンドでリスクを取る価値はありません。そのため、フォールドするのが最善です。'}
2025-10-31 18:50:58,621 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 18:50:58,621 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 18:50:58,621 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:50:58,622 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, Preflopで2♦ 10♥というハンドは、あまり強くありません。ポットをコールするには20必要ですが、このハンドで勝つ確率は低いです。他のプレイヤーのアクション（いくつかフォールドし、一部コールしている）を考慮しても、このハンドでリスクを取る価値はありません。そのため、フォールドするのが最善です。
2025-10-31 18:50:58,622 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 18:50:58,622 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:50:58,623 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:50:58,623 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:50:58,623 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:50:58,623 - poker_game - INFO - Last raiser: 4
2025-10-31 18:50:58,623 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:58,623 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:50:58,623 - poker_game - INFO - Community cards: []
2025-10-31 18:50:58,624 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=active
2025-10-31 18:50:58,624 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:50:58,624 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:58,624 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=active
2025-10-31 18:50:58,624 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:50:58,624 - poker_game - INFO - ==================================================
2025-10-31 18:50:58,624 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 18:50:58,641 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:50:58,641 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:50:58,641 - poker_game - INFO - Current player: 0, Dealer: 2
2025-10-31 18:50:58,641 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:50:58,642 - poker_game - INFO - Last raiser: 4
2025-10-31 18:50:58,642 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:58,642 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:58,642 - poker_game - INFO - Community cards: []
2025-10-31 18:50:58,642 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:50:58,643 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:50:58,643 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:58,643 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=active
2025-10-31 18:50:58,643 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:50:58,643 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 18:50:58,644 - poker_game - INFO - ==================================================
2025-10-31 18:50:58,644 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:50:58,644 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:50:58,644 - poker_game - DEBUG - Active players: [1, 2, 3, 4]
2025-10-31 18:50:58,644 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:50:58,644 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:50:58,645 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:50:58,645 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:50:58,645 - poker_game - DEBUG - Player bets: [0, 0, 10, 20], Current bet: 20, All same: False
2025-10-31 18:50:58,645 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:50:58,645 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:50:58,645 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:50:58,645 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:50:58,646 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:50:58,646 - poker_game - INFO - Last raiser: 4
2025-10-31 18:50:58,646 - poker_game - INFO - Betting round complete: False
2025-10-31 18:50:58,646 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:50:58,646 - poker_game - INFO - Community cards: []
2025-10-31 18:50:58,646 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:50:58,647 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:50:58,647 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:50:58,647 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=active
2025-10-31 18:50:58,647 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:50:58,647 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:50:58,648 - poker_game - INFO - ==================================================
2025-10-31 18:50:58,749 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "4♥",
    "9♣"
  ],
  "community": [],
  "your_chips": 5575,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 2,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1435,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 45,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1345,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (5575)"
  ],
  "history": [
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 folded",
    "Player 2 called 10",
    "Player 3 folded",
    "Flop dealt: 6♠, 7♣, 3♥",
    "Player 2 checked",
    "Player 0 checked",
    "Turn dealt: Q♦",
    "Player 2 checked",
    "Player 0 checked",
    "River dealt: K♣",
    "Player 2 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠",
    "Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded"
  ]
}
2025-10-31 18:50:58,760 - poker_game - DEBUG - Create Session: {'id': '7b0c65b4-fc48-4373-80d1-fb86c004ebd2', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904258.7584088}
2025-10-31 18:51:00,185 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopで49o（ハートの4とクラブの9）は非常に弱いハンドです。ポットへのコール額（20）がポットサイズ（30）に対して大きく、さらにレイズも想定されるため、フォールドが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 85, 'promptTokenCount': 915, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 915}], 'totalTokenCount': 1000}, 'invocationId': 'e-aa22220f-ee58-42fd-916a-cf5e11a10406', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'aHd70UiC', 'timestamp': 1761904258.770542}]
2025-10-31 18:51:00,185 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:51:00,185 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "Preflopで49o（ハートの4とクラブの9）は非常に弱いハンドです。ポットへのコール額（20）がポットサイズ（30）に対して大きく、さらにレイズも想定されるため、フォールドが最善です。"
}
```
2025-10-31 18:51:00,185 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:51:00,185 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopで49o（ハートの4とクラブの9）は非常に弱いハンドです。ポットへのコール額（20）がポットサイズ（30）に対して大きく、さらにレイズも想定されるため、フォールドが最善です。"\n}\n```'
2025-10-31 18:51:00,186 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:51:00,186 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopで49o（ハートの4とクラブの9）は非常に弱いハンドです。ポットへのコール額（20）がポットサイズ（30）に対して大きく、さらにレイズも想定されるため、フォールドが最善です。"\n}'
2025-10-31 18:51:00,186 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "Preflopで49o（ハートの4とクラブの9）は非常に弱いハンドです。ポットへのコール額（20）がポットサイズ（30）に対して大きく、さらにレイズも想定されるため、フォールドが最善です。"
}
2025-10-31 18:51:00,186 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'Preflopで49o（ハートの4とクラブの9）は非常に弱いハンドです。ポットへのコール額（20）がポットサイズ（30）に対して大きく、さらにレイズも想定されるため、フォールドが最善です。'}
2025-10-31 18:51:00,186 - poker_game - DEBUG - [Agent1] Extracted values - action: 'fold', amount: 0
2025-10-31 18:51:00,186 - poker_game - DEBUG - [Agent1] Action 'fold' normalized - amount set to 0
2025-10-31 18:51:00,186 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:51:00,186 - poker_game - INFO - [Agent1] Successfully parsed decision: fold, 0, Preflopで49o（ハートの4とクラブの9）は非常に弱いハンドです。ポットへのコール額（20）がポットサイズ（30）に対して大きく、さらにレイズも想定されるため、フォールドが最善です。
2025-10-31 18:51:00,187 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'fold' with amount 0
2025-10-31 18:51:00,187 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:51:00,188 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:51:00,188 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:51:00,188 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:51:00,188 - poker_game - INFO - Last raiser: 4
2025-10-31 18:51:00,188 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:00,189 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:51:00,189 - poker_game - INFO - Community cards: []
2025-10-31 18:51:00,189 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:00,190 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:51:00,190 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:51:00,190 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=active
2025-10-31 18:51:00,190 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:51:00,190 - poker_game - INFO - ==================================================
2025-10-31 18:51:00,190 - poker_game - INFO - ACTION_EXECUTED: Player 1 folded
2025-10-31 18:51:00,200 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:51:00,200 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:51:00,200 - poker_game - INFO - Current player: 1, Dealer: 2
2025-10-31 18:51:00,201 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:51:00,201 - poker_game - INFO - Last raiser: 4
2025-10-31 18:51:00,201 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:00,202 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:51:00,202 - poker_game - INFO - Community cards: []
2025-10-31 18:51:00,202 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:00,202 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:00,202 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:51:00,202 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=active
2025-10-31 18:51:00,203 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:51:00,203 - poker_game - INFO - Extra: Action: Player 1 folded
2025-10-31 18:51:00,203 - poker_game - INFO - ==================================================
2025-10-31 18:51:00,203 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:51:00,203 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:51:00,204 - poker_game - DEBUG - Active players: [2, 3, 4]
2025-10-31 18:51:00,204 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:51:00,204 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:51:00,204 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:51:00,204 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:51:00,204 - poker_game - DEBUG - Player bets: [0, 10, 20], Current bet: 20, All same: False
2025-10-31 18:51:00,204 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:51:00,204 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:51:00,205 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:51:00,205 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:51:00,205 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:51:00,205 - poker_game - INFO - Last raiser: 4
2025-10-31 18:51:00,205 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:00,206 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:51:00,206 - poker_game - INFO - Community cards: []
2025-10-31 18:51:00,206 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:00,206 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:00,206 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:51:00,207 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=active
2025-10-31 18:51:00,207 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:51:00,211 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:51:00,212 - poker_game - INFO - ==================================================
2025-10-31 18:51:00,315 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "preflop",
  "your_cards": [
    "K♣",
    "5♣"
  ],
  "community": [],
  "your_chips": 45,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 2,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1435,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1345,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (45)"
  ],
  "history": [
    "Player 0 called 20",
    "Player 1 folded",
    "Player 2 called 10",
    "Player 3 folded",
    "Flop dealt: 6♠, 7♣, 3♥",
    "Player 2 checked",
    "Player 0 checked",
    "Turn dealt: Q♦",
    "Player 2 checked",
    "Player 0 checked",
    "River dealt: K♣",
    "Player 2 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠",
    "Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded"
  ]
}
2025-10-31 18:51:00,326 - poker_game - DEBUG - Create Session: {'id': '0c4d0946-14b5-4912-8c77-e803269cde0d', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904260.3236504}
2025-10-31 18:51:02,767 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで、私の手札はK♣ 5♣です。これはスーテッドコネクター（同じスートで数字が連続しているカード）ですが、数字が低い（5とK）ため、強いハンドとは言えません。ポットにはすでに30チップあり、コールするには20チップが必要です。対戦相手は2人（プレイヤー3とプレイヤー4）で、プレイヤー4はビッグブラインドとして20チップをベットしており、プレイヤー3はすでにフォールドしています。他のプレイヤーの情報が少ないため、ここではポットオッズ（ポットのサイズと比較してコールに必要な金額）を考慮し、コールしてフロップを見るのが合理的です。もしフロップでペアができたり、ストレートやフラッシュのドロー（役ができる可能性）ができれば、その時点でプレイを続行するかどうかを判断できます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 205, 'promptTokenCount': 913, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 913}], 'totalTokenCount': 1118}, 'invocationId': 'e-85738286-fe81-4c4d-9c14-af91449fcfd0', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'mIdHZ7Z3', 'timestamp': 1761904260.336216}]
2025-10-31 18:51:02,768 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:51:02,768 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップで、私の手札はK♣ 5♣です。これはスーテッドコネクター（同じスートで数字が連続しているカード）ですが、数字が低い（5とK）ため、強いハンドとは言えません。ポットにはすでに30チップあり、コールするには20チップが必要です。対戦相手は2人（プレイヤー3とプレイヤー4）で、プレイヤー4はビッグブラインドとして20チップをベットしており、プレイヤー3はすでにフォールドしています。他のプレイヤーの情報が少ないため、ここではポットオッズ（ポットのサイズと比較してコールに必要な金額）を考慮し、コールしてフロップを見るのが合理的です。もしフロップでペアができたり、ストレートやフラッシュのドロー（役ができる可能性）ができれば、その時点でプレイを続行するかどうかを判断できます。"
}
```
2025-10-31 18:51:02,768 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:51:02,768 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで、私の手札はK♣ 5♣です。これはスーテッドコネクター（同じスートで数字が連続しているカード）ですが、数字が低い（5とK）ため、強いハンドとは言えません。ポットにはすでに30チップあり、コールするには20チップが必要です。対戦相手は2人（プレイヤー3とプレイヤー4）で、プレイヤー4はビッグブラインドとして20チップをベットしており、プレイヤー3はすでにフォールドしています。他のプレイヤーの情報が少ないため、ここではポットオッズ（ポットのサイズと比較してコールに必要な金額）を考慮し、コールしてフロップを見るのが合理的です。もしフロップでペアができたり、ストレートやフラッシュのドロー（役ができる可能性）ができれば、その時点でプレイを続行するかどうかを判断できます。"\n}\n```'
2025-10-31 18:51:02,768 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:51:02,769 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで、私の手札はK♣ 5♣です。これはスーテッドコネクター（同じスートで数字が連続しているカード）ですが、数字が低い（5とK）ため、強いハンドとは言えません。ポットにはすでに30チップあり、コールするには20チップが必要です。対戦相手は2人（プレイヤー3とプレイヤー4）で、プレイヤー4はビッグブラインドとして20チップをベットしており、プレイヤー3はすでにフォールドしています。他のプレイヤーの情報が少ないため、ここではポットオッズ（ポットのサイズと比較してコールに必要な金額）を考慮し、コールしてフロップを見るのが合理的です。もしフロップでペアができたり、ストレートやフラッシュのドロー（役ができる可能性）ができれば、その時点でプレイを続行するかどうかを判断できます。"\n}'
2025-10-31 18:51:02,769 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップで、私の手札はK♣ 5♣です。これはスーテッドコネクター（同じスートで数字が連続しているカード）ですが、数字が低い（5とK）ため、強いハンドとは言えません。ポットにはすでに30チップあり、コールするには20チップが必要です。対戦相手は2人（プレイヤー3とプレイヤー4）で、プレイヤー4はビッグブラインドとして20チップをベットしており、プレイヤー3はすでにフォールドしています。他のプレイヤーの情報が少ないため、ここではポットオッズ（ポットのサイズと比較してコールに必要な金額）を考慮し、コールしてフロップを見るのが合理的です。もしフロップでペアができたり、ストレートやフラッシュのドロー（役ができる可能性）ができれば、その時点でプレイを続行するかどうかを判断できます。"
}
2025-10-31 18:51:02,769 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'プリフロップで、私の手札はK♣ 5♣です。これはスーテッドコネクター（同じスートで数字が連続しているカード）ですが、数字が低い（5とK）ため、強いハンドとは言えません。ポットにはすでに30チップあり、コールするには20チップが必要です。対戦相手は2人（プレイヤー3とプレイヤー4）で、プレイヤー4はビッグブラインドとして20チップをベットしており、プレイヤー3はすでにフォールドしています。他のプレイヤーの情報が少ないため、ここではポットオッズ（ポットのサイズと比較してコールに必要な金額）を考慮し、コールしてフロップを見るのが合理的です。もしフロップでペアができたり、ストレートやフラッシュのドロー（役ができる可能性）ができれば、その時点でプレイを続行するかどうかを判断できます。'}
2025-10-31 18:51:02,769 - poker_game - DEBUG - [Agent2] Extracted values - action: 'call', amount: 20
2025-10-31 18:51:02,769 - poker_game - DEBUG - [Agent2] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (45)']
2025-10-31 18:51:02,769 - poker_game - DEBUG - [Agent2] Call amount extracted from 'call (20)': 20
2025-10-31 18:51:02,769 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:51:02,769 - poker_game - INFO - [Agent2] Successfully parsed decision: call, 20, プリフロップで、私の手札はK♣ 5♣です。これはスーテッドコネクター（同じスートで数字が連続しているカード）ですが、数字が低い（5とK）ため、強いハンドとは言えません。ポットにはすでに30チップあり、コールするには20チップが必要です。対戦相手は2人（プレイヤー3とプレイヤー4）で、プレイヤー4はビッグブラインドとして20チップをベットしており、プレイヤー3はすでにフォールドしています。他のプレイヤーの情報が少ないため、ここではポットオッズ（ポットのサイズと比較してコールに必要な金額）を考慮し、コールしてフロップを見るのが合理的です。もしフロップでペアができたり、ストレートやフラッシュのドロー（役ができる可能性）ができれば、その時点でプレイを続行するかどうかを判断できます。
2025-10-31 18:51:02,770 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'call' with amount 20
2025-10-31 18:51:02,770 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:51:02,770 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:51:02,770 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:51:02,771 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:51:02,771 - poker_game - INFO - Last raiser: 4
2025-10-31 18:51:02,771 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:02,771 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:51:02,772 - poker_game - INFO - Community cards: []
2025-10-31 18:51:02,772 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:02,772 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:02,772 - poker_game - INFO -   P2(Agent2): chips=45, bet=0, status=active
2025-10-31 18:51:02,772 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=active
2025-10-31 18:51:02,772 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:51:02,773 - poker_game - INFO - ==================================================
2025-10-31 18:51:02,773 - poker_game - INFO - ACTION_EXECUTED: Player 2 called 20
2025-10-31 18:51:02,801 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:51:02,801 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:51:02,801 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:51:02,802 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:51:02,802 - poker_game - INFO - Last raiser: 4
2025-10-31 18:51:02,802 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:02,802 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:51:02,802 - poker_game - INFO - Community cards: []
2025-10-31 18:51:02,802 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:02,803 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:02,803 - poker_game - INFO -   P2(Agent2): chips=25, bet=20, status=active
2025-10-31 18:51:02,803 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=active
2025-10-31 18:51:02,803 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:51:02,803 - poker_game - INFO - Extra: Action: Player 2 called 20
2025-10-31 18:51:02,804 - poker_game - INFO - ==================================================
2025-10-31 18:51:02,804 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:51:02,804 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:51:02,804 - poker_game - DEBUG - Active players: [2, 3, 4]
2025-10-31 18:51:02,804 - poker_game - INFO - Advanced from player 2 to player 3 (seat order)
2025-10-31 18:51:02,804 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:51:02,805 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:51:02,805 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:51:02,805 - poker_game - DEBUG - Player bets: [20, 10, 20], Current bet: 20, All same: False
2025-10-31 18:51:02,805 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:51:02,805 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:51:02,805 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:51:02,805 - poker_game - INFO - Current player: 3, Dealer: 2
2025-10-31 18:51:02,806 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:51:02,806 - poker_game - INFO - Last raiser: 4
2025-10-31 18:51:02,806 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:02,806 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:51:02,806 - poker_game - INFO - Community cards: []
2025-10-31 18:51:02,806 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:02,807 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:02,807 - poker_game - INFO -   P2(Agent2): chips=25, bet=20, status=active
2025-10-31 18:51:02,807 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=active
2025-10-31 18:51:02,807 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:51:02,807 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:51:02,807 - poker_game - INFO - ==================================================
2025-10-31 18:51:02,909 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "10♣",
    "2♥"
  ],
  "community": [],
  "your_chips": 1570,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 50,
  "to_call": 10,
  "dealer_button": 2,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1435,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1345,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (1570)"
  ],
  "history": [
    "Player 1 folded",
    "Player 2 called 10",
    "Player 3 folded",
    "Flop dealt: 6♠, 7♣, 3♥",
    "Player 2 checked",
    "Player 0 checked",
    "Turn dealt: Q♦",
    "Player 2 checked",
    "Player 0 checked",
    "River dealt: K♣",
    "Player 2 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠",
    "Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 called 20"
  ]
}
2025-10-31 18:51:02,923 - poker_game - DEBUG - Create Session: {'id': 'a1d56aab-72d5-423e-a6df-b760d70e9e9c', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904262.920508}
2025-10-31 18:51:04,823 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、私の手札は10-2オフスーツ（異なるスートの10と2）です。これは非常に弱いハンドであり、レイズやコールをする価値はほとんどありません。ポットにはすでに50（20のビッグブラインド＋10の私のスモールブラインド＋20のプレイヤー4のコール）が入っています。プレイヤー2（ディーラーボタン）が20をコールしましたが、これは私がコールすべき金額（10）よりも多いです。プレイヤー4がビッグブラインドとして20にベットし、プレイヤー2がそれにコールしています。この状況で、私のハンドの強さは非常に低く、ポットのサイズを考慮しても、コールする価値はありません。フォールドして、より良いハンドでプレイする機会を待つのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 198, 'promptTokenCount': 918, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 918}], 'totalTokenCount': 1116}, 'invocationId': 'e-f0532d6f-4f26-40e3-aff4-9aea4ee07b72', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'kmLEKyD5', 'timestamp': 1761904262.932865}]
2025-10-31 18:51:04,824 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:51:04,824 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで、私の手札は10-2オフスーツ（異なるスートの10と2）です。これは非常に弱いハンドであり、レイズやコールをする価値はほとんどありません。ポットにはすでに50（20のビッグブラインド＋10の私のスモールブラインド＋20のプレイヤー4のコール）が入っています。プレイヤー2（ディーラーボタン）が20をコールしましたが、これは私がコールすべき金額（10）よりも多いです。プレイヤー4がビッグブラインドとして20にベットし、プレイヤー2がそれにコールしています。この状況で、私のハンドの強さは非常に低く、ポットのサイズを考慮しても、コールする価値はありません。フォールドして、より良いハンドでプレイする機会を待つのが最善です。"
}
```
2025-10-31 18:51:04,824 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:51:04,824 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、私の手札は10-2オフスーツ（異なるスートの10と2）です。これは非常に弱いハンドであり、レイズやコールをする価値はほとんどありません。ポットにはすでに50（20のビッグブラインド＋10の私のスモールブラインド＋20のプレイヤー4のコール）が入っています。プレイヤー2（ディーラーボタン）が20をコールしましたが、これは私がコールすべき金額（10）よりも多いです。プレイヤー4がビッグブラインドとして20にベットし、プレイヤー2がそれにコールしています。この状況で、私のハンドの強さは非常に低く、ポットのサイズを考慮しても、コールする価値はありません。フォールドして、より良いハンドでプレイする機会を待つのが最善です。"\n}\n```'
2025-10-31 18:51:04,824 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:51:04,825 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、私の手札は10-2オフスーツ（異なるスートの10と2）です。これは非常に弱いハンドであり、レイズやコールをする価値はほとんどありません。ポットにはすでに50（20のビッグブラインド＋10の私のスモールブラインド＋20のプレイヤー4のコール）が入っています。プレイヤー2（ディーラーボタン）が20をコールしましたが、これは私がコールすべき金額（10）よりも多いです。プレイヤー4がビッグブラインドとして20にベットし、プレイヤー2がそれにコールしています。この状況で、私のハンドの強さは非常に低く、ポットのサイズを考慮しても、コールする価値はありません。フォールドして、より良いハンドでプレイする機会を待つのが最善です。"\n}'
2025-10-31 18:51:04,825 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで、私の手札は10-2オフスーツ（異なるスートの10と2）です。これは非常に弱いハンドであり、レイズやコールをする価値はほとんどありません。ポットにはすでに50（20のビッグブラインド＋10の私のスモールブラインド＋20のプレイヤー4のコール）が入っています。プレイヤー2（ディーラーボタン）が20をコールしましたが、これは私がコールすべき金額（10）よりも多いです。プレイヤー4がビッグブラインドとして20にベットし、プレイヤー2がそれにコールしています。この状況で、私のハンドの強さは非常に低く、ポットのサイズを考慮しても、コールする価値はありません。フォールドして、より良いハンドでプレイする機会を待つのが最善です。"
}
2025-10-31 18:51:04,825 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップで、私の手札は10-2オフスーツ（異なるスートの10と2）です。これは非常に弱いハンドであり、レイズやコールをする価値はほとんどありません。ポットにはすでに50（20のビッグブラインド＋10の私のスモールブラインド＋20のプレイヤー4のコール）が入っています。プレイヤー2（ディーラーボタン）が20をコールしましたが、これは私がコールすべき金額（10）よりも多いです。プレイヤー4がビッグブラインドとして20にベットし、プレイヤー2がそれにコールしています。この状況で、私のハンドの強さは非常に低く、ポットのサイズを考慮しても、コールする価値はありません。フォールドして、より良いハンドでプレイする機会を待つのが最善です。'}
2025-10-31 18:51:04,825 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 18:51:04,825 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 18:51:04,825 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:51:04,825 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップで、私の手札は10-2オフスーツ（異なるスートの10と2）です。これは非常に弱いハンドであり、レイズやコールをする価値はほとんどありません。ポットにはすでに50（20のビッグブラインド＋10の私のスモールブラインド＋20のプレイヤー4のコール）が入っています。プレイヤー2（ディーラーボタン）が20をコールしましたが、これは私がコールすべき金額（10）よりも多いです。プレイヤー4がビッグブラインドとして20にベットし、プレイヤー2がそれにコールしています。この状況で、私のハンドの強さは非常に低く、ポットのサイズを考慮しても、コールする価値はありません。フォールドして、より良いハンドでプレイする機会を待つのが最善です。
2025-10-31 18:51:04,826 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 18:51:04,826 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:51:04,826 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:51:04,827 - poker_game - INFO - Current player: 3, Dealer: 2
2025-10-31 18:51:04,827 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:51:04,827 - poker_game - INFO - Last raiser: 4
2025-10-31 18:51:04,827 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:04,828 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:51:04,828 - poker_game - INFO - Community cards: []
2025-10-31 18:51:04,828 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:04,828 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:04,828 - poker_game - INFO -   P2(Agent2): chips=25, bet=20, status=active
2025-10-31 18:51:04,828 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=active
2025-10-31 18:51:04,829 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:51:04,829 - poker_game - INFO - ==================================================
2025-10-31 18:51:04,829 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 18:51:04,856 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:51:04,857 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:51:04,857 - poker_game - INFO - Current player: 3, Dealer: 2
2025-10-31 18:51:04,857 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:51:04,857 - poker_game - INFO - Last raiser: 4
2025-10-31 18:51:04,858 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:04,858 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:51:04,858 - poker_game - INFO - Community cards: []
2025-10-31 18:51:04,858 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:04,858 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:04,858 - poker_game - INFO -   P2(Agent2): chips=25, bet=20, status=active
2025-10-31 18:51:04,858 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=folded
2025-10-31 18:51:04,858 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:51:04,859 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 18:51:04,859 - poker_game - INFO - ==================================================
2025-10-31 18:51:04,859 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:51:04,859 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:51:04,859 - poker_game - DEBUG - Active players: [2, 4]
2025-10-31 18:51:04,859 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:51:04,859 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:51:04,860 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:51:04,860 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:51:04,860 - poker_game - DEBUG - Player bets: [20, 20], Current bet: 20, All same: True
2025-10-31 18:51:04,860 - poker_game - DEBUG - Active player indices: [2, 4]
2025-10-31 18:51:04,860 - poker_game - DEBUG - Last raiser index: 4
2025-10-31 18:51:04,860 - poker_game - DEBUG - Current player index: 4
2025-10-31 18:51:04,860 - poker_game - DEBUG - Next after last raiser 4: 2
2025-10-31 18:51:04,860 - poker_game - DEBUG - Betting continues: Current player 4 != next after raiser 2
2025-10-31 18:51:04,860 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:51:04,861 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:51:04,861 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:51:04,861 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:51:04,861 - poker_game - INFO - Last raiser: 4
2025-10-31 18:51:04,861 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:04,862 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:51:04,862 - poker_game - INFO - Community cards: []
2025-10-31 18:51:04,862 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:04,862 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:04,862 - poker_game - INFO -   P2(Agent2): chips=25, bet=20, status=active
2025-10-31 18:51:04,863 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=folded
2025-10-31 18:51:04,863 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:51:04,863 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:51:04,863 - poker_game - INFO - ==================================================
2025-10-31 18:51:04,965 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "5♦",
    "10♦"
  ],
  "community": [],
  "your_chips": 1345,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 50,
  "to_call": 0,
  "dealer_button": 2,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1435,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 10,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 40)",
    "all-in (1345)"
  ],
  "history": [
    "Player 2 called 10",
    "Player 3 folded",
    "Flop dealt: 6♠, 7♣, 3♥",
    "Player 2 checked",
    "Player 0 checked",
    "Turn dealt: Q♦",
    "Player 2 checked",
    "Player 0 checked",
    "River dealt: K♣",
    "Player 2 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠",
    "Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 called 20",
    "Player 3 folded"
  ]
}
2025-10-31 18:51:04,979 - poker_game - DEBUG - Create Session: {'id': '521ecee1-b345-4f09-9f98-db4330626cc9', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904264.9769323}
2025-10-31 18:51:16,013 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:51:18,075 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_ioZ75AhUGJAEO31E97kooBke', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1239, 'totalTokenCount': 1256}, 'invocationId': 'e-58c178de-acc1-41e1-9794-db1838e18e2a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'sdBQVKsP', 'timestamp': 1761904264.992737}, {'content': {'parts': [{'functionResponse': {'id': 'call_ioZ75AhUGJAEO31E97kooBke', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-58c178de-acc1-41e1-9794-db1838e18e2a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'GF8ycHGh', 'timestamp': 1761904265.86014}, {'content': {'parts': [{'functionCall': {'id': 'call_ksDfZitHoQDGAZlxuARWj7du', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1763, 'totalTokenCount': 1783}, 'invocationId': 'e-58c178de-acc1-41e1-9794-db1838e18e2a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'JIIIKD8V', 'timestamp': 1761904265.861761}, {'content': {'parts': [{'functionResponse': {'id': 'call_ksDfZitHoQDGAZlxuARWj7du', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-58c178de-acc1-41e1-9794-db1838e18e2a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'FqJcM1ee', 'timestamp': 1761904267.743022}, {'content': {'parts': [{'functionCall': {'id': 'call_K20XhwttsHYovxj1SgqjJp2n', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1325, 'totalTokenCount': 1342}, 'invocationId': 'e-58c178de-acc1-41e1-9794-db1838e18e2a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'FyvuEQSj', 'timestamp': 1761904267.744353}, {'content': {'parts': [{'functionResponse': {'id': 'call_K20XhwttsHYovxj1SgqjJp2n', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-58c178de-acc1-41e1-9794-db1838e18e2a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '85YYLl1C', 'timestamp': 1761904268.655672}, {'content': {'parts': [{'functionCall': {'id': 'call_EgGFa2QC152AY3THw2Uibeyx', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['5♦', '10♦'], 'community': [], 'your_chips': 1345, 'your_bet_this_round': 20, 'your_total_bet_this_hand': 20, 'pot': 50, 'to_call': 0, 'dealer_button': 2, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1435, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 5575, 'bet': 0, 'status': 'folded'}, {'id': 2, 'chips': 25, 'bet': 20, 'status': 'active'}, {'id': 3, 'chips': 1570, 'bet': 10, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 40)', 'all-in (1345)'], 'history': ['Player 2 called 10', 'Player 3 folded', 'Flop dealt: 6♠, 7♣, 3♥', 'Player 2 checked', 'Player 0 checked', 'Turn dealt: Q♦', 'Player 2 checked', 'Player 0 checked', 'River dealt: K♣', 'Player 2 checked', 'Player 0 checked', 'Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠', 'Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠', 'Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 folded', 'Player 1 folded', 'Player 2 called 20', 'Player 3 folded']}, 'call_amount': 0, 'pot_after_call': 50, 'equity': 0.33}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 431, 'promptTokenCount': 1855, 'totalTokenCount': 2286}, 'invocationId': 'e-58c178de-acc1-41e1-9794-db1838e18e2a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'kdCwJNve', 'timestamp': 1761904268.658373}, {'content': {'parts': [{'functionResponse': {'id': 'call_EgGFa2QC152AY3THw2Uibeyx', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（16.50(ポットに対して33.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'e-58c178de-acc1-41e1-9794-db1838e18e2a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'LeMXrhAq', 'timestamp': 1761904276.207727}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い（16.50(ポットに対して33.00%）ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 38, 'promptTokenCount': 2337, 'totalTokenCount': 2375}, 'invocationId': 'e-58c178de-acc1-41e1-9794-db1838e18e2a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '8wqNZTaV', 'timestamp': 1761904276.209992}]
2025-10-31 18:51:18,076 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:51:18,076 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い（16.50(ポットに対して33.00%）ため、チェックします"}
2025-10-31 18:51:18,076 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:51:18,076 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い（16.50(ポットに対して33.00%）ため、チェックします"}'
2025-10-31 18:51:18,076 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:51:18,077 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い（16.50(ポットに対して33.00%）ため、チェックします"}
2025-10-31 18:51:18,077 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（16.50(ポットに対して33.00%）ため、チェックします'}
2025-10-31 18:51:18,077 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 18:51:18,077 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 18:51:18,077 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:51:18,077 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い（16.50(ポットに対して33.00%）ため、チェックします
2025-10-31 18:51:18,078 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 18:51:18,078 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:51:18,078 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:51:18,078 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:51:18,078 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:51:18,078 - poker_game - INFO - Last raiser: 4
2025-10-31 18:51:18,079 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:18,079 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:51:18,079 - poker_game - INFO - Community cards: []
2025-10-31 18:51:18,079 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:18,079 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:18,079 - poker_game - INFO -   P2(Agent2): chips=25, bet=20, status=active
2025-10-31 18:51:18,079 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=folded
2025-10-31 18:51:18,079 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:51:18,079 - poker_game - INFO - ==================================================
2025-10-31 18:51:18,079 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 18:51:18,098 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:51:18,098 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:51:18,098 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:51:18,099 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:51:18,099 - poker_game - INFO - Last raiser: 4
2025-10-31 18:51:18,099 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:18,099 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:51:18,099 - poker_game - INFO - Community cards: []
2025-10-31 18:51:18,100 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:18,100 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:18,100 - poker_game - INFO -   P2(Agent2): chips=25, bet=20, status=active
2025-10-31 18:51:18,100 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=folded
2025-10-31 18:51:18,100 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:51:18,101 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 18:51:18,101 - poker_game - INFO - ==================================================
2025-10-31 18:51:18,101 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:51:18,101 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:51:18,101 - poker_game - DEBUG - Active players: [2, 4]
2025-10-31 18:51:18,101 - poker_game - INFO - Advanced from player 4 to player 2 (seat order)
2025-10-31 18:51:18,102 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:51:18,102 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:51:18,102 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:51:18,102 - poker_game - DEBUG - Player bets: [20, 20], Current bet: 20, All same: True
2025-10-31 18:51:18,102 - poker_game - DEBUG - Active player indices: [2, 4]
2025-10-31 18:51:18,102 - poker_game - DEBUG - Last raiser index: 4
2025-10-31 18:51:18,102 - poker_game - DEBUG - Current player index: 2
2025-10-31 18:51:18,103 - poker_game - DEBUG - Next after last raiser 4: 2
2025-10-31 18:51:18,103 - poker_game - INFO - Betting complete: Back to player 2 after last raiser 4
2025-10-31 18:51:18,103 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:51:18,103 - poker_game - INFO - Hand #9, Phase: preflop
2025-10-31 18:51:18,103 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:51:18,103 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:51:18,103 - poker_game - INFO - Last raiser: 4
2025-10-31 18:51:18,103 - poker_game - INFO - Betting round complete: True
2025-10-31 18:51:18,104 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:51:18,104 - poker_game - INFO - Community cards: []
2025-10-31 18:51:18,104 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:18,104 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:18,104 - poker_game - INFO -   P2(Agent2): chips=25, bet=20, status=active
2025-10-31 18:51:18,105 - poker_game - INFO -   P3(Agent3): chips=1570, bet=10, status=folded
2025-10-31 18:51:18,105 - poker_game - INFO -   P4(Agent4): chips=1345, bet=20, status=active
2025-10-31 18:51:18,105 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:51:18,105 - poker_game - INFO - ==================================================
2025-10-31 18:51:18,206 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:51:18,207 - poker_game - INFO - Betting round complete: True
2025-10-31 18:51:18,207 - poker_game - INFO - Remaining players: 2
2025-10-31 18:51:18,207 - poker_game - DEBUG -   Remaining P2: Agent2, status: active
2025-10-31 18:51:18,208 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:51:18,208 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:51:18,219 - poker_game - INFO - Starting new betting round
2025-10-31 18:51:18,219 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:51:18,220 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:51:18,220 - poker_game - DEBUG - Active players for new betting round: [2, 4]
2025-10-31 18:51:18,220 - poker_game - DEBUG - Dealer button: 2
2025-10-31 18:51:18,221 - poker_game - INFO - First actor: Player 4 (by phase rule), was 2
2025-10-31 18:51:18,222 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:51:18,222 - poker_game - INFO - Hand #9, Phase: flop
2025-10-31 18:51:18,223 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:51:18,224 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:51:18,225 - poker_game - INFO - Last raiser: None
2025-10-31 18:51:18,225 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:18,225 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:51:18,226 - poker_game - INFO - Community cards: ['4♣', '8♦', '7♠']
2025-10-31 18:51:18,226 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:18,226 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:18,226 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=active
2025-10-31 18:51:18,227 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:51:18,227 - poker_game - INFO -   P4(Agent4): chips=1345, bet=0, status=active
2025-10-31 18:51:18,227 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:51:18,227 - poker_game - INFO - ==================================================
2025-10-31 18:51:18,228 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "flop",
  "your_cards": [
    "5♦",
    "10♦"
  ],
  "community": [
    "4♣",
    "8♦",
    "7♠"
  ],
  "your_chips": 1345,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 50,
  "to_call": 0,
  "dealer_button": 2,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1435,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1345)"
  ],
  "history": [
    "Flop dealt: 6♠, 7♣, 3♥",
    "Player 2 checked",
    "Player 0 checked",
    "Turn dealt: Q♦",
    "Player 2 checked",
    "Player 0 checked",
    "River dealt: K♣",
    "Player 2 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠",
    "Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 checked",
    "Flop dealt: 4♣, 8♦, 7♠"
  ]
}
2025-10-31 18:51:18,247 - poker_game - DEBUG - Create Session: {'id': '61168763-361a-4c69-a6e7-b59e59ba7553', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904278.2444215}
2025-10-31 18:51:28,280 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:51:38,350 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 18:51:38,859 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_F9tJ5gCUgKzyDWkqs005daH5', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1268, 'totalTokenCount': 1285}, 'invocationId': 'e-a55f726a-e1a5-4d6d-8b15-c1efa87b2385', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'lavL5Hf6', 'timestamp': 1761904278.257018}, {'content': {'parts': [{'functionResponse': {'id': 'call_F9tJ5gCUgKzyDWkqs005daH5', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-a55f726a-e1a5-4d6d-8b15-c1efa87b2385', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'J0ZJgyGb', 'timestamp': 1761904279.233092}, {'content': {'parts': [{'functionCall': {'id': 'call_9IaIlFBHCTQpSAzRrtiKAZlC', 'args': {'game_state': {'your_id': 4, 'phase': 'flop', 'your_cards': ['5♦', '10♦'], 'community': ['4♣', '8♦', '7♠'], 'your_chips': 1345, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 20, 'pot': 50, 'to_call': 0, 'dealer_button': 2, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1435, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 5575, 'bet': 0, 'status': 'folded'}, {'id': 2, 'chips': 25, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1570, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (1345)'], 'history': ['Flop dealt: 6♠, 7♣, 3♥', 'Player 2 checked', 'Player 0 checked', 'Turn dealt: Q♦', 'Player 2 checked', 'Player 0 checked', 'River dealt: K♣', 'Player 2 checked', 'Player 0 checked', 'Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠', 'Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦', 'Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 folded', 'Player 1 folded', 'Player 2 called 20', 'Player 3 folded', 'Player 4 checked', 'Flop dealt: 4♣, 8♦, 7♠']}, 'call_amount': 0, 'pot_after_call': 50, 'equity': 0.3}, 'name': 'action_decision'}}, {'functionCall': {'id': 'call_sjniX0YARC0zN36OHMMR0VgX', 'args': {'game_state': {'your_id': 4, 'phase': 'flop', 'your_cards': ['5♦', '10♦'], 'community': ['4♣', '8♦', '7♠'], 'your_chips': 1345, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 20, 'pot': 50, 'to_call': 0, 'dealer_button': 2, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1435, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 5575, 'bet': 0, 'status': 'folded'}, {'id': 2, 'chips': 25, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1570, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (1345)'], 'history': ['Flop dealt: 6♠, 7♣, 3♥', 'Player 2 checked', 'Player 0 checked', 'Turn dealt: Q♦', 'Player 2 checked', 'Player 0 checked', 'River dealt: K♣', 'Player 2 checked', 'Player 0 checked', 'Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠', 'Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦', 'Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 folded', 'Player 1 folded', 'Player 2 called 20', 'Player 3 folded', 'Player 4 checked', 'Flop dealt: 4♣, 8♦, 7♠']}, 'call_amount': 0, 'pot_after_call': 50, 'equity': 0.3}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 934, 'promptTokenCount': 1792, 'totalTokenCount': 2726}, 'invocationId': 'e-a55f726a-e1a5-4d6d-8b15-c1efa87b2385', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'Lpo7JrIu', 'timestamp': 1761904279.234479}, {'content': {'parts': [{'functionResponse': {'id': 'call_9IaIlFBHCTQpSAzRrtiKAZlC', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（15.00(ポットに対して30.00%）ため、チェックします'}}}, {'functionResponse': {'id': 'call_sjniX0YARC0zN36OHMMR0VgX', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（15.00(ポットに対して30.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': '23ylnRK5', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'ontEDYXn', 'timestamp': 1761904297.385685}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い(15.00(ポットに対して30.00%)ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 37, 'promptTokenCount': 2952, 'totalTokenCount': 2989}, 'invocationId': 'e-a55f726a-e1a5-4d6d-8b15-c1efa87b2385', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'ibWzM9VA', 'timestamp': 1761904297.38864}]
2025-10-31 18:51:38,859 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:51:38,860 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い(15.00(ポットに対して30.00%)ため、チェックします"}
2025-10-31 18:51:38,860 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:51:38,860 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い(15.00(ポットに対して30.00%)ため、チェックします"}'
2025-10-31 18:51:38,860 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:51:38,861 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い(15.00(ポットに対して30.00%)ため、チェックします"}
2025-10-31 18:51:38,861 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い(15.00(ポットに対して30.00%)ため、チェックします'}
2025-10-31 18:51:38,861 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 18:51:38,861 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 18:51:38,861 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:51:38,861 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い(15.00(ポットに対して30.00%)ため、チェックします
2025-10-31 18:51:38,866 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 18:51:38,866 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:51:38,867 - poker_game - INFO - Hand #9, Phase: flop
2025-10-31 18:51:38,867 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:51:38,867 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:51:38,867 - poker_game - INFO - Last raiser: None
2025-10-31 18:51:38,867 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:38,867 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:51:38,868 - poker_game - INFO - Community cards: ['4♣', '8♦', '7♠']
2025-10-31 18:51:38,868 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:38,868 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:38,868 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=active
2025-10-31 18:51:38,868 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:51:38,868 - poker_game - INFO -   P4(Agent4): chips=1345, bet=0, status=active
2025-10-31 18:51:38,869 - poker_game - INFO - ==================================================
2025-10-31 18:51:38,871 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 18:51:38,881 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:51:38,881 - poker_game - INFO - Hand #9, Phase: flop
2025-10-31 18:51:38,881 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:51:38,881 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:51:38,882 - poker_game - INFO - Last raiser: None
2025-10-31 18:51:38,882 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:38,882 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:51:38,882 - poker_game - INFO - Community cards: ['4♣', '8♦', '7♠']
2025-10-31 18:51:38,882 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:38,882 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:38,883 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=active
2025-10-31 18:51:38,883 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:51:38,883 - poker_game - INFO -   P4(Agent4): chips=1345, bet=0, status=active
2025-10-31 18:51:38,883 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 18:51:38,883 - poker_game - INFO - ==================================================
2025-10-31 18:51:38,883 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:51:38,884 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:51:38,885 - poker_game - DEBUG - Active players: [2, 4]
2025-10-31 18:51:38,885 - poker_game - INFO - Advanced from player 4 to player 2 (seat order)
2025-10-31 18:51:38,886 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:51:38,886 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:51:38,886 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:51:38,886 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:51:38,886 - poker_game - DEBUG - Active player indices: [2, 4]
2025-10-31 18:51:38,886 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:51:38,886 - poker_game - DEBUG - Current player index: 2
2025-10-31 18:51:38,886 - poker_game - DEBUG - First actor index: 4
2025-10-31 18:51:38,886 - poker_game - DEBUG - Betting continues: Current player 2 != first actor 4
2025-10-31 18:51:38,886 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:51:38,886 - poker_game - INFO - Hand #9, Phase: flop
2025-10-31 18:51:38,886 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:51:38,886 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:51:38,887 - poker_game - INFO - Last raiser: None
2025-10-31 18:51:38,887 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:38,887 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:51:38,887 - poker_game - INFO - Community cards: ['4♣', '8♦', '7♠']
2025-10-31 18:51:38,887 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:38,887 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:38,887 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=active
2025-10-31 18:51:38,887 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:51:38,887 - poker_game - INFO -   P4(Agent4): chips=1345, bet=0, status=active
2025-10-31 18:51:38,887 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:51:38,887 - poker_game - INFO - ==================================================
2025-10-31 18:51:38,988 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "flop",
  "your_cards": [
    "K♣",
    "5♣"
  ],
  "community": [
    "4♣",
    "8♦",
    "7♠"
  ],
  "your_chips": 25,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 50,
  "to_call": 0,
  "dealer_button": 2,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1435,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1345,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (25)"
  ],
  "history": [
    "Player 2 checked",
    "Player 0 checked",
    "Turn dealt: Q♦",
    "Player 2 checked",
    "Player 0 checked",
    "River dealt: K♣",
    "Player 2 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠",
    "Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 checked",
    "Flop dealt: 4♣, 8♦, 7♠",
    "Player 4 checked"
  ]
}
2025-10-31 18:51:38,998 - poker_game - DEBUG - Create Session: {'id': 'cb1abb8e-39ce-43bc-b73d-8d529fe4a335', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904298.9958482}
2025-10-31 18:51:38,961 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたはK♣と5♣を持っています。フロップは4♣, 8♦, 7♠です。これはフラッシュ（同じマークのカードが5枚揃うこと）のドロー（あと1枚で揃うこと）があり、ストレート（数字が連続すること）のドローの可能性もあります。ポットは50で、コールは0なので、チェック（ベットせずに次のアクションに移ること）ができます。しかし、相手はまだアクションをしておらず、ポットを大きくしたいので、100%ポットベット（ポットと同額をベットすること）のレイズをします。これにより、相手にプレッシャーをかけ、ハンドの強さを向上させる機会を奪います。相手がコールした場合、ポットは100になり、次のカードでフラッシュやストレートが完成する可能性があります。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 218, 'promptTokenCount': 925, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 925}], 'totalTokenCount': 1143}, 'invocationId': 'e-bf27b21f-3896-4e00-84d1-665765a452d1', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'rSI9jN9k', 'timestamp': 1761904299.005448}]
2025-10-31 18:51:38,961 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:51:38,961 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 60,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたはK♣と5♣を持っています。フロップは4♣, 8♦, 7♠です。これはフラッシュ（同じマークのカードが5枚揃うこと）のドロー（あと1枚で揃うこと）があり、ストレート（数字が連続すること）のドローの可能性もあります。ポットは50で、コールは0なので、チェック（ベットせずに次のアクションに移ること）ができます。しかし、相手はまだアクションをしておらず、ポットを大きくしたいので、100%ポットベット（ポットと同額をベットすること）のレイズをします。これにより、相手にプレッシャーをかけ、ハンドの強さを向上させる機会を奪います。相手がコールした場合、ポットは100になり、次のカードでフラッシュやストレートが完成する可能性があります。"
}
```
2025-10-31 18:51:38,961 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:51:38,962 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたはK♣と5♣を持っています。フロップは4♣, 8♦, 7♠です。これはフラッシュ（同じマークのカードが5枚揃うこと）のドロー（あと1枚で揃うこと）があり、ストレート（数字が連続すること）のドローの可能性もあります。ポットは50で、コールは0なので、チェック（ベットせずに次のアクションに移ること）ができます。しかし、相手はまだアクションをしておらず、ポットを大きくしたいので、100%ポットベット（ポットと同額をベットすること）のレイズをします。これにより、相手にプレッシャーをかけ、ハンドの強さを向上させる機会を奪います。相手がコールした場合、ポットは100になり、次のカードでフラッシュやストレートが完成する可能性があります。"\n}\n```'
2025-10-31 18:51:38,962 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:51:38,962 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたはK♣と5♣を持っています。フロップは4♣, 8♦, 7♠です。これはフラッシュ（同じマークのカードが5枚揃うこと）のドロー（あと1枚で揃うこと）があり、ストレート（数字が連続すること）のドローの可能性もあります。ポットは50で、コールは0なので、チェック（ベットせずに次のアクションに移ること）ができます。しかし、相手はまだアクションをしておらず、ポットを大きくしたいので、100%ポットベット（ポットと同額をベットすること）のレイズをします。これにより、相手にプレッシャーをかけ、ハンドの強さを向上させる機会を奪います。相手がコールした場合、ポットは100になり、次のカードでフラッシュやストレートが完成する可能性があります。"\n}'
2025-10-31 18:51:38,962 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "raise",
  "amount": 60,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたはK♣と5♣を持っています。フロップは4♣, 8♦, 7♠です。これはフラッシュ（同じマークのカードが5枚揃うこと）のドロー（あと1枚で揃うこと）があり、ストレート（数字が連続すること）のドローの可能性もあります。ポットは50で、コールは0なので、チェック（ベットせずに次のアクションに移ること）ができます。しかし、相手はまだアクションをしておらず、ポットを大きくしたいので、100%ポットベット（ポットと同額をベットすること）のレイズをします。これにより、相手にプレッシャーをかけ、ハンドの強さを向上させる機会を奪います。相手がコールした場合、ポットは100になり、次のカードでフラッシュやストレートが完成する可能性があります。"
}
2025-10-31 18:51:38,962 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'raise', 'amount': 60, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）で、あなたはK♣と5♣を持っています。フロップは4♣, 8♦, 7♠です。これはフラッシュ（同じマークのカードが5枚揃うこと）のドロー（あと1枚で揃うこと）があり、ストレート（数字が連続すること）のドローの可能性もあります。ポットは50で、コールは0なので、チェック（ベットせずに次のアクションに移ること）ができます。しかし、相手はまだアクションをしておらず、ポットを大きくしたいので、100%ポットベット（ポットと同額をベットすること）のレイズをします。これにより、相手にプレッシャーをかけ、ハンドの強さを向上させる機会を奪います。相手がコールした場合、ポットは100になり、次のカードでフラッシュやストレートが完成する可能性があります。'}
2025-10-31 18:51:38,962 - poker_game - DEBUG - [Agent2] Extracted values - action: 'raise', amount: 60
2025-10-31 18:51:38,962 - poker_game - DEBUG - [Agent2] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (25)']
2025-10-31 18:51:38,962 - poker_game - DEBUG - [Agent2] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:51:38,962 - poker_game - DEBUG - [Agent2] Raise amount 60 is valid (min: 20)
2025-10-31 18:51:38,962 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'raise', 'amount': 60}
2025-10-31 18:51:38,962 - poker_game - INFO - [Agent2] Successfully parsed decision: raise, 60, フロップ（最初の3枚のコミュニティカード）で、あなたはK♣と5♣を持っています。フロップは4♣, 8♦, 7♠です。これはフラッシュ（同じマークのカードが5枚揃うこと）のドロー（あと1枚で揃うこと）があり、ストレート（数字が連続すること）のドローの可能性もあります。ポットは50で、コールは0なので、チェック（ベットせずに次のアクションに移ること）ができます。しかし、相手はまだアクションをしておらず、ポットを大きくしたいので、100%ポットベット（ポットと同額をベットすること）のレイズをします。これにより、相手にプレッシャーをかけ、ハンドの強さを向上させる機会を奪います。相手がコールした場合、ポットは100になり、次のカードでフラッシュやストレートが完成する可能性があります。
2025-10-31 18:51:38,963 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'raise' with amount 60
2025-10-31 18:51:38,963 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:51:38,963 - poker_game - INFO - Hand #9, Phase: flop
2025-10-31 18:51:38,964 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:51:38,964 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:51:38,964 - poker_game - INFO - Last raiser: None
2025-10-31 18:51:38,964 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:38,964 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:51:38,964 - poker_game - INFO - Community cards: ['4♣', '8♦', '7♠']
2025-10-31 18:51:38,965 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:38,965 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:38,965 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=active
2025-10-31 18:51:38,965 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:51:38,965 - poker_game - INFO -   P4(Agent4): chips=1345, bet=0, status=active
2025-10-31 18:51:38,966 - poker_game - INFO - ==================================================
2025-10-31 18:51:38,966 - poker_game - WARNING - Player 2 cannot raise - needs 60, has 25
2025-10-31 18:51:38,966 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'fold' with amount 0
2025-10-31 18:51:38,966 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:51:38,966 - poker_game - INFO - Hand #9, Phase: flop
2025-10-31 18:51:38,967 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:51:38,967 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:51:38,967 - poker_game - INFO - Last raiser: None
2025-10-31 18:51:38,967 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:38,967 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:51:38,968 - poker_game - INFO - Community cards: ['4♣', '8♦', '7♠']
2025-10-31 18:51:38,968 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:38,968 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:38,968 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=active
2025-10-31 18:51:38,968 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:51:38,969 - poker_game - INFO -   P4(Agent4): chips=1345, bet=0, status=active
2025-10-31 18:51:38,969 - poker_game - INFO - ==================================================
2025-10-31 18:51:38,969 - poker_game - INFO - ACTION_EXECUTED: Player 2 folded
2025-10-31 18:51:38,981 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:51:38,981 - poker_game - INFO - Hand #9, Phase: flop
2025-10-31 18:51:38,982 - poker_game - INFO - Current player: 2, Dealer: 2
2025-10-31 18:51:38,982 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:51:38,982 - poker_game - INFO - Last raiser: None
2025-10-31 18:51:38,982 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:38,983 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 4
2025-10-31 18:51:38,983 - poker_game - INFO - Community cards: ['4♣', '8♦', '7♠']
2025-10-31 18:51:38,983 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:38,983 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:38,983 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:51:38,984 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:51:38,984 - poker_game - INFO -   P4(Agent4): chips=1345, bet=0, status=active
2025-10-31 18:51:38,984 - poker_game - INFO - Extra: Action: Player 2 folded
2025-10-31 18:51:38,984 - poker_game - INFO - ==================================================
2025-10-31 18:51:38,984 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:51:38,984 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:51:38,984 - poker_game - DEBUG - Active players: [4]
2025-10-31 18:51:38,985 - poker_game - INFO - Advanced from player 2 to player 4 (seat order)
2025-10-31 18:51:38,985 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:51:38,985 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:51:38,985 - poker_game - DEBUG - Active: 1, All-in: 0
2025-10-31 18:51:38,985 - poker_game - INFO - Betting complete: Only 1 or fewer players remaining
2025-10-31 18:51:38,985 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:51:38,985 - poker_game - INFO - Hand #9, Phase: flop
2025-10-31 18:51:38,986 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:51:38,986 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:51:38,986 - poker_game - INFO - Last raiser: None
2025-10-31 18:51:38,986 - poker_game - INFO - Betting round complete: True
2025-10-31 18:51:38,986 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 4
2025-10-31 18:51:38,987 - poker_game - INFO - Community cards: ['4♣', '8♦', '7♠']
2025-10-31 18:51:38,987 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:38,987 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:38,988 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:51:38,988 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:51:38,988 - poker_game - INFO -   P4(Agent4): chips=1345, bet=0, status=active
2025-10-31 18:51:38,988 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:51:38,988 - poker_game - INFO - ==================================================
2025-10-31 18:51:39,090 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:51:39,091 - poker_game - INFO - Betting round complete: True
2025-10-31 18:51:39,091 - poker_game - INFO - Remaining players: 1
2025-10-31 18:51:39,092 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:51:39,092 - poker_game - INFO - Going to SHOWDOWN - only 1 or fewer players remaining
2025-10-31 18:51:39,092 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:51:39,093 - poker_game - INFO - Hand #9, Phase: showdown
2025-10-31 18:51:39,093 - poker_game - INFO - Current player: 4, Dealer: 2
2025-10-31 18:51:39,093 - poker_game - INFO - Pot: 50, Current bet: 0
2025-10-31 18:51:39,094 - poker_game - INFO - Last raiser: None
2025-10-31 18:51:39,094 - poker_game - INFO - Betting round complete: True
2025-10-31 18:51:39,094 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 4
2025-10-31 18:51:39,095 - poker_game - INFO - Community cards: ['4♣', '8♦', '7♠']
2025-10-31 18:51:39,095 - poker_game - INFO -   P0(Agent0): chips=1435, bet=0, status=folded
2025-10-31 18:51:39,095 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=folded
2025-10-31 18:51:39,095 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:51:39,096 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:51:39,096 - poker_game - INFO -   P4(Agent4): chips=1345, bet=0, status=active
2025-10-31 18:51:39,096 - poker_game - INFO - ==================================================
2025-10-31 18:51:39,096 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:51:39,097 - poker_game - INFO - Pot: 50, Community cards: ['4♣', '8♦', '7♠']
2025-10-31 18:51:39,097 - poker_game - INFO -   Player 4 status=active cards=['5♦', '10♦']
2025-10-31 18:51:39,097 - poker_game - INFO - Showdown winner by default: Player 4 awarded 50
2025-10-31 18:51:39,097 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:51:39,098 - poker_game - INFO - === STARTING NEW HAND #10 ===
2025-10-31 18:51:39,098 - poker_game - INFO - Active players for new hand: 5
2025-10-31 18:51:39,099 - poker_game - INFO - Moving dealer button
2025-10-31 18:51:39,100 - poker_game - INFO - Posting blinds
2025-10-31 18:51:39,123 - poker_game - INFO - Dealing hole cards
2025-10-31 18:51:39,124 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:51:39,134 - poker_game - INFO - Started new hand in database: hand_id=10
2025-10-31 18:51:39,135 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:51:39,135 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:51:39,136 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:51:39,136 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:51:39,136 - poker_game - INFO - Last raiser: 0
2025-10-31 18:51:39,137 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:39,137 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:51:39,137 - poker_game - INFO - Community cards: []
2025-10-31 18:51:39,138 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=active
2025-10-31 18:51:39,138 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:51:39,138 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=active
2025-10-31 18:51:39,139 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=active
2025-10-31 18:51:39,139 - poker_game - INFO -   P4(Agent4): chips=1385, bet=10, status=active
2025-10-31 18:51:39,140 - poker_game - INFO - ==================================================
2025-10-31 18:51:39,141 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "8♥",
    "8♠"
  ],
  "community": [],
  "your_chips": 5575,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1415,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1385,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (5575)"
  ],
  "history": [
    "Player 0 checked",
    "River dealt: K♣",
    "Player 2 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠",
    "Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 checked",
    "Flop dealt: 4♣, 8♦, 7♠",
    "Player 4 checked",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20"
  ]
}
2025-10-31 18:51:39,152 - poker_game - DEBUG - Create Session: {'id': 'c164be05-8e9a-4b88-824c-90a8b9c93279', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904299.150523}
2025-10-31 18:51:41,339 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "プリフロップでポケット8（8♥8♠）は良いハンドです。ポットは30で、コールするには20必要です。相手のプレイヤーは2人しかアクティブではなく、1人はチップが少なく、もう1人はまだアクションを起こしていません。レイズすることで、相手にプレッシャーをかけ、ポットを大きくすることができます。最低レイズ額は40なので、私は60にレイズします。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 122, 'promptTokenCount': 927, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 927}], 'totalTokenCount': 1049}, 'invocationId': 'e-d124007f-250d-4df5-94fa-038f4c74e1bf', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'NYil6XsJ', 'timestamp': 1761904299.164088}]
2025-10-31 18:51:41,339 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:51:41,340 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 60,
  "reasoning": "プリフロップでポケット8（8♥8♠）は良いハンドです。ポットは30で、コールするには20必要です。相手のプレイヤーは2人しかアクティブではなく、1人はチップが少なく、もう1人はまだアクションを起こしていません。レイズすることで、相手にプレッシャーをかけ、ポットを大きくすることができます。最低レイズ額は40なので、私は60にレイズします。"
}
```
2025-10-31 18:51:41,340 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:51:41,340 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "プリフロップでポケット8（8♥8♠）は良いハンドです。ポットは30で、コールするには20必要です。相手のプレイヤーは2人しかアクティブではなく、1人はチップが少なく、もう1人はまだアクションを起こしていません。レイズすることで、相手にプレッシャーをかけ、ポットを大きくすることができます。最低レイズ額は40なので、私は60にレイズします。"\n}\n```'
2025-10-31 18:51:41,340 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:51:41,340 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "プリフロップでポケット8（8♥8♠）は良いハンドです。ポットは30で、コールするには20必要です。相手のプレイヤーは2人しかアクティブではなく、1人はチップが少なく、もう1人はまだアクションを起こしていません。レイズすることで、相手にプレッシャーをかけ、ポットを大きくすることができます。最低レイズ額は40なので、私は60にレイズします。"\n}'
2025-10-31 18:51:41,340 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "raise",
  "amount": 60,
  "reasoning": "プリフロップでポケット8（8♥8♠）は良いハンドです。ポットは30で、コールするには20必要です。相手のプレイヤーは2人しかアクティブではなく、1人はチップが少なく、もう1人はまだアクションを起こしていません。レイズすることで、相手にプレッシャーをかけ、ポットを大きくすることができます。最低レイズ額は40なので、私は60にレイズします。"
}
2025-10-31 18:51:41,340 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'raise', 'amount': 60, 'reasoning': 'プリフロップでポケット8（8♥8♠）は良いハンドです。ポットは30で、コールするには20必要です。相手のプレイヤーは2人しかアクティブではなく、1人はチップが少なく、もう1人はまだアクションを起こしていません。レイズすることで、相手にプレッシャーをかけ、ポットを大きくすることができます。最低レイズ額は40なので、私は60にレイズします。'}
2025-10-31 18:51:41,340 - poker_game - DEBUG - [Agent1] Extracted values - action: 'raise', amount: 60
2025-10-31 18:51:41,340 - poker_game - DEBUG - [Agent1] Processing raise action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (5575)']
2025-10-31 18:51:41,340 - poker_game - DEBUG - [Agent1] Minimum raise amount extracted from 'raise (min 40)': 40
2025-10-31 18:51:41,340 - poker_game - DEBUG - [Agent1] Raise amount 60 is valid (min: 40)
2025-10-31 18:51:41,340 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'raise', 'amount': 60}
2025-10-31 18:51:41,340 - poker_game - INFO - [Agent1] Successfully parsed decision: raise, 60, プリフロップでポケット8（8♥8♠）は良いハンドです。ポットは30で、コールするには20必要です。相手のプレイヤーは2人しかアクティブではなく、1人はチップが少なく、もう1人はまだアクションを起こしていません。レイズすることで、相手にプレッシャーをかけ、ポットを大きくすることができます。最低レイズ額は40なので、私は60にレイズします。
2025-10-31 18:51:41,341 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'raise' with amount 60
2025-10-31 18:51:41,341 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:51:41,342 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:51:41,342 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:51:41,342 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:51:41,342 - poker_game - INFO - Last raiser: 0
2025-10-31 18:51:41,342 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:41,342 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:51:41,343 - poker_game - INFO - Community cards: []
2025-10-31 18:51:41,343 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=active
2025-10-31 18:51:41,343 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:51:41,343 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=active
2025-10-31 18:51:41,344 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=active
2025-10-31 18:51:41,344 - poker_game - INFO -   P4(Agent4): chips=1385, bet=10, status=active
2025-10-31 18:51:41,344 - poker_game - INFO - ==================================================
2025-10-31 18:51:41,344 - poker_game - INFO - ACTION_EXECUTED: Player 1 raised to 80
2025-10-31 18:51:41,382 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:51:41,382 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:51:41,383 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:51:41,383 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:51:41,383 - poker_game - INFO - Last raiser: 1
2025-10-31 18:51:41,383 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:41,383 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:51:41,383 - poker_game - INFO - Community cards: []
2025-10-31 18:51:41,384 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=active
2025-10-31 18:51:41,384 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:51:41,384 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=active
2025-10-31 18:51:41,384 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=active
2025-10-31 18:51:41,384 - poker_game - INFO -   P4(Agent4): chips=1385, bet=10, status=active
2025-10-31 18:51:41,384 - poker_game - INFO - Extra: Action: Player 1 raised to 80
2025-10-31 18:51:41,384 - poker_game - INFO - ==================================================
2025-10-31 18:51:41,384 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:51:41,385 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:51:41,385 - poker_game - DEBUG - Active players: [0, 1, 2, 3, 4]
2025-10-31 18:51:41,385 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:51:41,385 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:51:41,385 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:51:41,385 - poker_game - DEBUG - Active: 5, All-in: 0
2025-10-31 18:51:41,385 - poker_game - DEBUG - Player bets: [20, 80, 0, 0, 10], Current bet: 80, All same: False
2025-10-31 18:51:41,385 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:51:41,385 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:51:41,385 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:51:41,386 - poker_game - INFO - Current player: 2, Dealer: 3
2025-10-31 18:51:41,386 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:51:41,386 - poker_game - INFO - Last raiser: 1
2025-10-31 18:51:41,386 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:41,386 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:51:41,386 - poker_game - INFO - Community cards: []
2025-10-31 18:51:41,387 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=active
2025-10-31 18:51:41,387 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:51:41,388 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=active
2025-10-31 18:51:41,390 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=active
2025-10-31 18:51:41,391 - poker_game - INFO -   P4(Agent4): chips=1385, bet=10, status=active
2025-10-31 18:51:41,391 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:51:41,391 - poker_game - INFO - ==================================================
2025-10-31 18:51:41,495 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "preflop",
  "your_cards": [
    "6♠",
    "3♦"
  ],
  "community": [],
  "your_chips": 25,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 110,
  "to_call": 80,
  "dealer_button": 3,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1415,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 5495,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1385,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "all-in (25)"
  ],
  "history": [
    "River dealt: K♣",
    "Player 2 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠",
    "Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 checked",
    "Flop dealt: 4♣, 8♦, 7♠",
    "Player 4 checked",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 raised to 80"
  ]
}
2025-10-31 18:51:41,506 - poker_game - DEBUG - Create Session: {'id': 'b25e8982-ba86-4ceb-90c3-5de366c81ab1', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904301.5041902}
2025-10-31 18:51:43,132 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（ゲーム開始前）で、私の手札は6♠3♦と非常に弱いです。現在のポットへのコール額（to_call）が80で、私の持っているチップは25しかありません。この状況でコールすることは不可能ですし、レイズできるほどのチップもありません。そのため、フォールド（降参）するのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 111, 'promptTokenCount': 913, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 913}], 'totalTokenCount': 1024}, 'invocationId': 'e-a3b554f0-1404-4d27-8fb6-decc152098d9', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'pEhz1G1v', 'timestamp': 1761904301.517177}]
2025-10-31 18:51:43,133 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:51:43,133 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（ゲーム開始前）で、私の手札は6♠3♦と非常に弱いです。現在のポットへのコール額（to_call）が80で、私の持っているチップは25しかありません。この状況でコールすることは不可能ですし、レイズできるほどのチップもありません。そのため、フォールド（降参）するのが最善の選択です。"
}
```
2025-10-31 18:51:43,133 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:51:43,133 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（ゲーム開始前）で、私の手札は6♠3♦と非常に弱いです。現在のポットへのコール額（to_call）が80で、私の持っているチップは25しかありません。この状況でコールすることは不可能ですし、レイズできるほどのチップもありません。そのため、フォールド（降参）するのが最善の選択です。"\n}\n```'
2025-10-31 18:51:43,133 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:51:43,134 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（ゲーム開始前）で、私の手札は6♠3♦と非常に弱いです。現在のポットへのコール額（to_call）が80で、私の持っているチップは25しかありません。この状況でコールすることは不可能ですし、レイズできるほどのチップもありません。そのため、フォールド（降参）するのが最善の選択です。"\n}'
2025-10-31 18:51:43,134 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（ゲーム開始前）で、私の手札は6♠3♦と非常に弱いです。現在のポットへのコール額（to_call）が80で、私の持っているチップは25しかありません。この状況でコールすることは不可能ですし、レイズできるほどのチップもありません。そのため、フォールド（降参）するのが最善の選択です。"
}
2025-10-31 18:51:43,134 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（ゲーム開始前）で、私の手札は6♠3♦と非常に弱いです。現在のポットへのコール額（to_call）が80で、私の持っているチップは25しかありません。この状況でコールすることは不可能ですし、レイズできるほどのチップもありません。そのため、フォールド（降参）するのが最善の選択です。'}
2025-10-31 18:51:43,134 - poker_game - DEBUG - [Agent2] Extracted values - action: 'fold', amount: 0
2025-10-31 18:51:43,134 - poker_game - DEBUG - [Agent2] Action 'fold' normalized - amount set to 0
2025-10-31 18:51:43,134 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:51:43,134 - poker_game - INFO - [Agent2] Successfully parsed decision: fold, 0, プリフロップ（ゲーム開始前）で、私の手札は6♠3♦と非常に弱いです。現在のポットへのコール額（to_call）が80で、私の持っているチップは25しかありません。この状況でコールすることは不可能ですし、レイズできるほどのチップもありません。そのため、フォールド（降参）するのが最善の選択です。
2025-10-31 18:51:43,135 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'fold' with amount 0
2025-10-31 18:51:43,135 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:51:43,135 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:51:43,135 - poker_game - INFO - Current player: 2, Dealer: 3
2025-10-31 18:51:43,136 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:51:43,136 - poker_game - INFO - Last raiser: 1
2025-10-31 18:51:43,136 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:43,136 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:51:43,136 - poker_game - INFO - Community cards: []
2025-10-31 18:51:43,136 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=active
2025-10-31 18:51:43,136 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:51:43,136 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=active
2025-10-31 18:51:43,137 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=active
2025-10-31 18:51:43,137 - poker_game - INFO -   P4(Agent4): chips=1385, bet=10, status=active
2025-10-31 18:51:43,137 - poker_game - INFO - ==================================================
2025-10-31 18:51:43,137 - poker_game - INFO - ACTION_EXECUTED: Player 2 folded
2025-10-31 18:51:43,148 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:51:43,149 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:51:43,149 - poker_game - INFO - Current player: 2, Dealer: 3
2025-10-31 18:51:43,149 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:51:43,149 - poker_game - INFO - Last raiser: 1
2025-10-31 18:51:43,149 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:43,150 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:51:43,150 - poker_game - INFO - Community cards: []
2025-10-31 18:51:43,150 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=active
2025-10-31 18:51:43,150 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:51:43,150 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:51:43,150 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=active
2025-10-31 18:51:43,150 - poker_game - INFO -   P4(Agent4): chips=1385, bet=10, status=active
2025-10-31 18:51:43,150 - poker_game - INFO - Extra: Action: Player 2 folded
2025-10-31 18:51:43,150 - poker_game - INFO - ==================================================
2025-10-31 18:51:43,150 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:51:43,150 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:51:43,150 - poker_game - DEBUG - Active players: [0, 1, 3, 4]
2025-10-31 18:51:43,150 - poker_game - INFO - Advanced from player 2 to player 3 (seat order)
2025-10-31 18:51:43,151 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:51:43,151 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:51:43,151 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:51:43,151 - poker_game - DEBUG - Player bets: [20, 80, 0, 10], Current bet: 80, All same: False
2025-10-31 18:51:43,151 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:51:43,151 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:51:43,151 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:51:43,151 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:51:43,151 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:51:43,152 - poker_game - INFO - Last raiser: 1
2025-10-31 18:51:43,152 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:43,152 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:51:43,152 - poker_game - INFO - Community cards: []
2025-10-31 18:51:43,152 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=active
2025-10-31 18:51:43,152 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:51:43,152 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:51:43,153 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=active
2025-10-31 18:51:43,153 - poker_game - INFO -   P4(Agent4): chips=1385, bet=10, status=active
2025-10-31 18:51:43,153 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:51:43,153 - poker_game - INFO - ==================================================
2025-10-31 18:51:43,255 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "K♠",
    "4♣"
  ],
  "community": [],
  "your_chips": 1570,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 110,
  "to_call": 80,
  "dealer_button": 3,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1415,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 5495,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1385,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (80)",
    "raise (min 100)",
    "all-in (1570)"
  ],
  "history": [
    "Player 2 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠",
    "Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 checked",
    "Flop dealt: 4♣, 8♦, 7♠",
    "Player 4 checked",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 raised to 80",
    "Player 2 folded"
  ]
}
2025-10-31 18:51:43,264 - poker_game - DEBUG - Create Session: {'id': '9cda8335-e8c5-4b9a-82c1-ad4947ab9b6f', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904303.2629473}
2025-10-31 18:51:44,832 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "私の手札（K♠, 4♣）は、プリフロップ（カードが配られた直後）ではそれほど強くありません。ポット（賭けられたチップの総額）もそれほど大きくなく、コールするには80チップ必要ですが、私の手札では勝てる可能性が低いと判断しました。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 98, 'promptTokenCount': 933, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 933}], 'totalTokenCount': 1031}, 'invocationId': 'e-246b2075-8cd8-45ea-9923-146b4c83b5b6', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'XOfK01l3', 'timestamp': 1761904303.274047}]
2025-10-31 18:51:44,833 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:51:44,833 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "私の手札（K♠, 4♣）は、プリフロップ（カードが配られた直後）ではそれほど強くありません。ポット（賭けられたチップの総額）もそれほど大きくなく、コールするには80チップ必要ですが、私の手札では勝てる可能性が低いと判断しました。"
}
```
2025-10-31 18:51:44,833 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:51:44,833 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "私の手札（K♠, 4♣）は、プリフロップ（カードが配られた直後）ではそれほど強くありません。ポット（賭けられたチップの総額）もそれほど大きくなく、コールするには80チップ必要ですが、私の手札では勝てる可能性が低いと判断しました。"\n}\n```'
2025-10-31 18:51:44,834 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:51:44,834 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "私の手札（K♠, 4♣）は、プリフロップ（カードが配られた直後）ではそれほど強くありません。ポット（賭けられたチップの総額）もそれほど大きくなく、コールするには80チップ必要ですが、私の手札では勝てる可能性が低いと判断しました。"\n}'
2025-10-31 18:51:44,834 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "私の手札（K♠, 4♣）は、プリフロップ（カードが配られた直後）ではそれほど強くありません。ポット（賭けられたチップの総額）もそれほど大きくなく、コールするには80チップ必要ですが、私の手札では勝てる可能性が低いと判断しました。"
}
2025-10-31 18:51:44,834 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': '私の手札（K♠, 4♣）は、プリフロップ（カードが配られた直後）ではそれほど強くありません。ポット（賭けられたチップの総額）もそれほど大きくなく、コールするには80チップ必要ですが、私の手札では勝てる可能性が低いと判断しました。'}
2025-10-31 18:51:44,834 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 18:51:44,835 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 18:51:44,835 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:51:44,835 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, 私の手札（K♠, 4♣）は、プリフロップ（カードが配られた直後）ではそれほど強くありません。ポット（賭けられたチップの総額）もそれほど大きくなく、コールするには80チップ必要ですが、私の手札では勝てる可能性が低いと判断しました。
2025-10-31 18:51:44,836 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 18:51:44,837 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:51:44,838 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:51:44,838 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:51:44,840 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:51:44,840 - poker_game - INFO - Last raiser: 1
2025-10-31 18:51:44,840 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:44,841 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:51:44,843 - poker_game - INFO - Community cards: []
2025-10-31 18:51:44,845 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=active
2025-10-31 18:51:44,845 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:51:44,846 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:51:44,847 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=active
2025-10-31 18:51:44,848 - poker_game - INFO -   P4(Agent4): chips=1385, bet=10, status=active
2025-10-31 18:51:44,848 - poker_game - INFO - ==================================================
2025-10-31 18:51:44,849 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 18:51:44,862 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:51:44,862 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:51:44,863 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:51:44,863 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:51:44,864 - poker_game - INFO - Last raiser: 1
2025-10-31 18:51:44,864 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:44,865 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:51:44,865 - poker_game - INFO - Community cards: []
2025-10-31 18:51:44,865 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=active
2025-10-31 18:51:44,866 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:51:44,866 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:51:44,866 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:51:44,867 - poker_game - INFO -   P4(Agent4): chips=1385, bet=10, status=active
2025-10-31 18:51:44,867 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 18:51:44,867 - poker_game - INFO - ==================================================
2025-10-31 18:51:44,867 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:51:44,868 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:51:44,868 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 18:51:44,868 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:51:44,868 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:51:44,868 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:51:44,869 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:51:44,869 - poker_game - DEBUG - Player bets: [20, 80, 10], Current bet: 80, All same: False
2025-10-31 18:51:44,869 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:51:44,869 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:51:44,870 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:51:44,870 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:51:44,870 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:51:44,870 - poker_game - INFO - Last raiser: 1
2025-10-31 18:51:44,871 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:44,871 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:51:44,871 - poker_game - INFO - Community cards: []
2025-10-31 18:51:44,872 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=active
2025-10-31 18:51:44,872 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:51:44,872 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:51:44,873 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:51:44,874 - poker_game - INFO -   P4(Agent4): chips=1385, bet=10, status=active
2025-10-31 18:51:44,874 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:51:44,875 - poker_game - INFO - ==================================================
2025-10-31 18:51:44,976 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "6♥",
    "6♣"
  ],
  "community": [],
  "your_chips": 1385,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 110,
  "to_call": 70,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1415,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 5495,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (70)",
    "raise (min 100)",
    "all-in (1385)"
  ],
  "history": [
    "Player 0 checked",
    "Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠",
    "Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 checked",
    "Flop dealt: 4♣, 8♦, 7♠",
    "Player 4 checked",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 raised to 80",
    "Player 2 folded",
    "Player 3 folded"
  ]
}
2025-10-31 18:51:44,988 - poker_game - DEBUG - Create Session: {'id': 'd2ba2838-bf9d-4964-924c-aab35a178250', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904304.9860246}
2025-10-31 18:51:55,142 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:51:59,495 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_QeTZSkrlcBWLVVtbk2j46EIy', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1252, 'totalTokenCount': 1269}, 'invocationId': 'e-b44d8a32-965c-4f84-9569-2cdd8cb54d8d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '0kf10O3Y', 'timestamp': 1761904304.999775}, {'content': {'parts': [{'functionResponse': {'id': 'call_QeTZSkrlcBWLVVtbk2j46EIy', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-b44d8a32-965c-4f84-9569-2cdd8cb54d8d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'TwsOXKpe', 'timestamp': 1761904306.085063}, {'content': {'parts': [{'functionCall': {'id': 'call_G3Dv4o3x5KkO8rcRfYO6Mw81', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1776, 'totalTokenCount': 1796}, 'invocationId': 'e-b44d8a32-965c-4f84-9569-2cdd8cb54d8d', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'a9YBhsAE', 'timestamp': 1761904306.086838}, {'content': {'parts': [{'functionResponse': {'id': 'call_G3Dv4o3x5KkO8rcRfYO6Mw81', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-b44d8a32-965c-4f84-9569-2cdd8cb54d8d', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'jv4CV8DO', 'timestamp': 1761904307.180893}, {'content': {'parts': [{'functionCall': {'id': 'call_KOWI41WwLybd4QjcbKJ7dYCB', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1338, 'totalTokenCount': 1355}, 'invocationId': 'e-b44d8a32-965c-4f84-9569-2cdd8cb54d8d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'COVroZjH', 'timestamp': 1761904307.184767}, {'content': {'parts': [{'functionResponse': {'id': 'call_KOWI41WwLybd4QjcbKJ7dYCB', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-b44d8a32-965c-4f84-9569-2cdd8cb54d8d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '1wPuIJhh', 'timestamp': 1761904308.313747}, {'content': {'parts': [{'functionCall': {'id': 'call_bxSpwpme5zb5mBVv6mRaVFC7', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['6♥', '6♣'], 'community': [], 'your_chips': 1385, 'your_bet_this_round': 10, 'your_total_bet_this_hand': 10, 'pot': 110, 'to_call': 70, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1415, 'bet': 20, 'status': 'active'}, {'id': 1, 'chips': 5495, 'bet': 80, 'status': 'active'}, {'id': 2, 'chips': 25, 'bet': 0, 'status': 'folded'}, {'id': 3, 'chips': 1570, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'call (70)', 'raise (min 100)', 'all-in (1385)'], 'history': ['Player 0 checked', 'Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠', 'Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦', 'Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 folded', 'Player 1 folded', 'Player 2 called 20', 'Player 3 folded', 'Player 4 checked', 'Flop dealt: 4♣, 8♦, 7♠', 'Player 4 checked', 'Player 2 folded', 'Showdown: Player 4 won 50', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 raised to 80', 'Player 2 folded', 'Player 3 folded']}, 'call_amount': 70, 'pot_after_call': 180, 'equity': 0.7}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 468, 'promptTokenCount': 1868, 'totalTokenCount': 2336}, 'invocationId': 'e-b44d8a32-965c-4f84-9569-2cdd8cb54d8d', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '1AW3hODc', 'timestamp': 1761904308.316182}, {'content': {'parts': [{'functionResponse': {'id': 'call_bxSpwpme5zb5mBVv6mRaVFC7', 'name': 'action_decision', 'response': {'action': 'raise', 'amount': 175, 'reasoning': '期待値が高い（105.00(ポットに対して95.45%）ため、2.5倍でバリューレイズします。レイズ額: 175'}}}], 'role': 'user'}, 'invocationId': 'e-b44d8a32-965c-4f84-9569-2cdd8cb54d8d', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'hBAiu0V1', 'timestamp': 1761904317.204027}, {'content': {'parts': [{'text': '{"action":"raise","amount":175,"reasoning":"期待値が高い（105.00(ポットに対して95.45%）ため、2.5倍でバリューレイズします。レイズ額: 175"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 55, 'promptTokenCount': 2388, 'totalTokenCount': 2443}, 'invocationId': 'e-b44d8a32-965c-4f84-9569-2cdd8cb54d8d', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'MRklS4hK', 'timestamp': 1761904317.206296}]
2025-10-31 18:51:59,495 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:51:59,496 - poker_game - DEBUG - {"action":"raise","amount":175,"reasoning":"期待値が高い（105.00(ポットに対して95.45%）ため、2.5倍でバリューレイズします。レイズ額: 175"}
2025-10-31 18:51:59,496 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:51:59,497 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"raise","amount":175,"reasoning":"期待値が高い（105.00(ポットに対して95.45%）ため、2.5倍でバリューレイズします。レイズ額: 175"}'
2025-10-31 18:51:59,497 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:51:59,497 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"raise","amount":175,"reasoning":"期待値が高い（105.00(ポットに対して95.45%）ため、2.5倍でバリューレイズします。レイズ額: 175"}
2025-10-31 18:51:59,497 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'raise', 'amount': 175, 'reasoning': '期待値が高い（105.00(ポットに対して95.45%）ため、2.5倍でバリューレイズします。レイズ額: 175'}
2025-10-31 18:51:59,497 - poker_game - DEBUG - [Agent4] Extracted values - action: 'raise', amount: 175
2025-10-31 18:51:59,497 - poker_game - DEBUG - [Agent4] Processing raise action - available actions: ['fold', 'call (70)', 'raise (min 100)', 'all-in (1385)']
2025-10-31 18:51:59,497 - poker_game - DEBUG - [Agent4] Minimum raise amount extracted from 'raise (min 100)': 100
2025-10-31 18:51:59,498 - poker_game - DEBUG - [Agent4] Raise amount 175 is valid (min: 100)
2025-10-31 18:51:59,498 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'raise', 'amount': 175}
2025-10-31 18:51:59,498 - poker_game - INFO - [Agent4] Successfully parsed decision: raise, 175, 期待値が高い（105.00(ポットに対して95.45%）ため、2.5倍でバリューレイズします。レイズ額: 175
2025-10-31 18:51:59,500 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'raise' with amount 175
2025-10-31 18:51:59,501 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:51:59,501 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:51:59,501 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:51:59,501 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 18:51:59,501 - poker_game - INFO - Last raiser: 1
2025-10-31 18:51:59,502 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:59,502 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:51:59,502 - poker_game - INFO - Community cards: []
2025-10-31 18:51:59,502 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=active
2025-10-31 18:51:59,502 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:51:59,503 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:51:59,503 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:51:59,503 - poker_game - INFO -   P4(Agent4): chips=1385, bet=10, status=active
2025-10-31 18:51:59,503 - poker_game - INFO - ==================================================
2025-10-31 18:51:59,504 - poker_game - INFO - ACTION_EXECUTED: Player 4 raised to 255
2025-10-31 18:51:59,516 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:51:59,516 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:51:59,516 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:51:59,516 - poker_game - INFO - Pot: 355, Current bet: 255
2025-10-31 18:51:59,517 - poker_game - INFO - Last raiser: 4
2025-10-31 18:51:59,517 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:59,517 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:51:59,517 - poker_game - INFO - Community cards: []
2025-10-31 18:51:59,517 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=active
2025-10-31 18:51:59,517 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:51:59,518 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:51:59,518 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:51:59,518 - poker_game - INFO -   P4(Agent4): chips=1140, bet=255, status=active
2025-10-31 18:51:59,518 - poker_game - INFO - Extra: Action: Player 4 raised to 255
2025-10-31 18:51:59,518 - poker_game - INFO - ==================================================
2025-10-31 18:51:59,519 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:51:59,519 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:51:59,519 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 18:51:59,519 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:51:59,519 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:51:59,519 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:51:59,519 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:51:59,520 - poker_game - DEBUG - Player bets: [20, 80, 255], Current bet: 255, All same: False
2025-10-31 18:51:59,520 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:51:59,520 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:51:59,520 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:51:59,520 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:51:59,520 - poker_game - INFO - Pot: 355, Current bet: 255
2025-10-31 18:51:59,520 - poker_game - INFO - Last raiser: 4
2025-10-31 18:51:59,521 - poker_game - INFO - Betting round complete: False
2025-10-31 18:51:59,521 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:51:59,521 - poker_game - INFO - Community cards: []
2025-10-31 18:51:59,521 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=active
2025-10-31 18:51:59,521 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:51:59,522 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:51:59,522 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:51:59,522 - poker_game - INFO -   P4(Agent4): chips=1140, bet=255, status=active
2025-10-31 18:51:59,522 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:51:59,522 - poker_game - INFO - ==================================================
2025-10-31 18:51:59,624 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "Q♥",
    "4♦"
  ],
  "community": [],
  "your_chips": 1415,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 355,
  "to_call": 235,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 5495,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1140,
      "bet": 255,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (235)",
    "raise (min 275)",
    "all-in (1415)"
  ],
  "history": [
    "Showdown: Player 0 hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣ cards=9♥, A♠",
    "Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 checked",
    "Flop dealt: 4♣, 8♦, 7♠",
    "Player 4 checked",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 raised to 80",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 raised to 255"
  ]
}
2025-10-31 18:51:59,633 - poker_game - DEBUG - Create Session: {'id': '6d7576cd-cb81-4789-b9b9-51a011529a79', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904319.6304486}
2025-10-31 18:52:01,715 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "手札はQハイ（クイーンが一番強いカード）で、コミュニティカード（場に開かれるカード）もまだないので、非常に弱いハンドです。ポット（賞金総額）は大きくなっていますが、コールするには高すぎるため、フォールド（降りる）するのが最善の判断です。相手のベット額（255）に対して、コールするために必要な額（235）が自分のチップ量（1415）に対して占める割合も高く、勝てる見込みが低いため、これ以上の損失を避けるべきです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 151, 'promptTokenCount': 942, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 942}], 'totalTokenCount': 1093}, 'invocationId': 'e-87973a11-adf3-47d1-b8ab-946d35ebffac', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'PQ2yIIqx', 'timestamp': 1761904319.645056}]
2025-10-31 18:52:01,716 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:52:01,716 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "手札はQハイ（クイーンが一番強いカード）で、コミュニティカード（場に開かれるカード）もまだないので、非常に弱いハンドです。ポット（賞金総額）は大きくなっていますが、コールするには高すぎるため、フォールド（降りる）するのが最善の判断です。相手のベット額（255）に対して、コールするために必要な額（235）が自分のチップ量（1415）に対して占める割合も高く、勝てる見込みが低いため、これ以上の損失を避けるべきです。"
}
```
2025-10-31 18:52:01,716 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:52:01,716 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "手札はQハイ（クイーンが一番強いカード）で、コミュニティカード（場に開かれるカード）もまだないので、非常に弱いハンドです。ポット（賞金総額）は大きくなっていますが、コールするには高すぎるため、フォールド（降りる）するのが最善の判断です。相手のベット額（255）に対して、コールするために必要な額（235）が自分のチップ量（1415）に対して占める割合も高く、勝てる見込みが低いため、これ以上の損失を避けるべきです。"\n}\n```'
2025-10-31 18:52:01,716 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:52:01,716 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "手札はQハイ（クイーンが一番強いカード）で、コミュニティカード（場に開かれるカード）もまだないので、非常に弱いハンドです。ポット（賞金総額）は大きくなっていますが、コールするには高すぎるため、フォールド（降りる）するのが最善の判断です。相手のベット額（255）に対して、コールするために必要な額（235）が自分のチップ量（1415）に対して占める割合も高く、勝てる見込みが低いため、これ以上の損失を避けるべきです。"\n}'
2025-10-31 18:52:01,716 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "手札はQハイ（クイーンが一番強いカード）で、コミュニティカード（場に開かれるカード）もまだないので、非常に弱いハンドです。ポット（賞金総額）は大きくなっていますが、コールするには高すぎるため、フォールド（降りる）するのが最善の判断です。相手のベット額（255）に対して、コールするために必要な額（235）が自分のチップ量（1415）に対して占める割合も高く、勝てる見込みが低いため、これ以上の損失を避けるべきです。"
}
2025-10-31 18:52:01,717 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': '手札はQハイ（クイーンが一番強いカード）で、コミュニティカード（場に開かれるカード）もまだないので、非常に弱いハンドです。ポット（賞金総額）は大きくなっていますが、コールするには高すぎるため、フォールド（降りる）するのが最善の判断です。相手のベット額（255）に対して、コールするために必要な額（235）が自分のチップ量（1415）に対して占める割合も高く、勝てる見込みが低いため、これ以上の損失を避けるべきです。'}
2025-10-31 18:52:01,717 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 18:52:01,717 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 18:52:01,717 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:52:01,717 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, 手札はQハイ（クイーンが一番強いカード）で、コミュニティカード（場に開かれるカード）もまだないので、非常に弱いハンドです。ポット（賞金総額）は大きくなっていますが、コールするには高すぎるため、フォールド（降りる）するのが最善の判断です。相手のベット額（255）に対して、コールするために必要な額（235）が自分のチップ量（1415）に対して占める割合も高く、勝てる見込みが低いため、これ以上の損失を避けるべきです。
2025-10-31 18:52:01,717 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 18:52:01,718 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:52:01,718 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:52:01,718 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:52:01,718 - poker_game - INFO - Pot: 355, Current bet: 255
2025-10-31 18:52:01,718 - poker_game - INFO - Last raiser: 4
2025-10-31 18:52:01,719 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:01,719 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:52:01,719 - poker_game - INFO - Community cards: []
2025-10-31 18:52:01,719 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=active
2025-10-31 18:52:01,719 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:52:01,719 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:01,720 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:01,720 - poker_game - INFO -   P4(Agent4): chips=1140, bet=255, status=active
2025-10-31 18:52:01,720 - poker_game - INFO - ==================================================
2025-10-31 18:52:01,720 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 18:52:01,729 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:52:01,729 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:52:01,729 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:52:01,729 - poker_game - INFO - Pot: 355, Current bet: 255
2025-10-31 18:52:01,730 - poker_game - INFO - Last raiser: 4
2025-10-31 18:52:01,730 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:01,730 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:01,731 - poker_game - INFO - Community cards: []
2025-10-31 18:52:01,731 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=folded
2025-10-31 18:52:01,732 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:52:01,732 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:01,733 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:01,733 - poker_game - INFO -   P4(Agent4): chips=1140, bet=255, status=active
2025-10-31 18:52:01,734 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 18:52:01,734 - poker_game - INFO - ==================================================
2025-10-31 18:52:01,734 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:52:01,734 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:52:01,734 - poker_game - DEBUG - Active players: [1, 4]
2025-10-31 18:52:01,734 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:52:01,735 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:52:01,735 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:52:01,735 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:52:01,735 - poker_game - DEBUG - Player bets: [80, 255], Current bet: 255, All same: False
2025-10-31 18:52:01,735 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:52:01,735 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:52:01,735 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:52:01,736 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:52:01,736 - poker_game - INFO - Pot: 355, Current bet: 255
2025-10-31 18:52:01,736 - poker_game - INFO - Last raiser: 4
2025-10-31 18:52:01,736 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:01,736 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:01,736 - poker_game - INFO - Community cards: []
2025-10-31 18:52:01,737 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=folded
2025-10-31 18:52:01,737 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:52:01,737 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:01,737 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:01,737 - poker_game - INFO -   P4(Agent4): chips=1140, bet=255, status=active
2025-10-31 18:52:01,737 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:52:01,737 - poker_game - INFO - ==================================================
2025-10-31 18:52:01,839 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "8♥",
    "8♠"
  ],
  "community": [],
  "your_chips": 5495,
  "your_bet_this_round": 80,
  "your_total_bet_this_hand": 80,
  "pot": 355,
  "to_call": 175,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1415,
      "bet": 20,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 1140,
      "bet": 255,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (175)",
    "raise (min 275)",
    "all-in (5495)"
  ],
  "history": [
    "Showdown: Player 2 hand=High Card: K♣ - K♣, Q♦, J♦, 7♣, 6♠ cards=5♥, J♦",
    "Side pot layer 0: amount=60, winners=0 best_hand=High Card: A♠ - A♠, K♣, Q♦, 9♥, 7♣",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 checked",
    "Flop dealt: 4♣, 8♦, 7♠",
    "Player 4 checked",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 raised to 80",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 raised to 255",
    "Player 0 folded"
  ]
}
2025-10-31 18:52:01,847 - poker_game - DEBUG - Create Session: {'id': '2bb6eea0-c9be-41f5-9994-93caa4e53236', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904321.8450756}
2025-10-31 18:52:03,967 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 175,\n  "reasoning": "プリフロップでペアを持っている (8♥, 8♠) ので、コールしてフロップを見る価値はあります。ポットオッズは悪くないです。相手のベット額 (255) に対して、コールするために必要な額 (175) は、ポットサイズ (355) と比較して十分に見合っています。相手はアグレッシブなベットをしている可能性もありますが、このハンドで戦う価値はあります。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 126, 'promptTokenCount': 909, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 909}], 'totalTokenCount': 1035}, 'invocationId': 'e-6bd84053-8272-478d-888e-cb0bdad313c4', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'vQXa9jDk', 'timestamp': 1761904321.855178}]
2025-10-31 18:52:03,968 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:52:03,968 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 175,
  "reasoning": "プリフロップでペアを持っている (8♥, 8♠) ので、コールしてフロップを見る価値はあります。ポットオッズは悪くないです。相手のベット額 (255) に対して、コールするために必要な額 (175) は、ポットサイズ (355) と比較して十分に見合っています。相手はアグレッシブなベットをしている可能性もありますが、このハンドで戦う価値はあります。"
}
```
2025-10-31 18:52:03,968 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:52:03,968 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 175,\n  "reasoning": "プリフロップでペアを持っている (8♥, 8♠) ので、コールしてフロップを見る価値はあります。ポットオッズは悪くないです。相手のベット額 (255) に対して、コールするために必要な額 (175) は、ポットサイズ (355) と比較して十分に見合っています。相手はアグレッシブなベットをしている可能性もありますが、このハンドで戦う価値はあります。"\n}\n```'
2025-10-31 18:52:03,969 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:52:03,969 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 175,\n  "reasoning": "プリフロップでペアを持っている (8♥, 8♠) ので、コールしてフロップを見る価値はあります。ポットオッズは悪くないです。相手のベット額 (255) に対して、コールするために必要な額 (175) は、ポットサイズ (355) と比較して十分に見合っています。相手はアグレッシブなベットをしている可能性もありますが、このハンドで戦う価値はあります。"\n}'
2025-10-31 18:52:03,969 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 175,
  "reasoning": "プリフロップでペアを持っている (8♥, 8♠) ので、コールしてフロップを見る価値はあります。ポットオッズは悪くないです。相手のベット額 (255) に対して、コールするために必要な額 (175) は、ポットサイズ (355) と比較して十分に見合っています。相手はアグレッシブなベットをしている可能性もありますが、このハンドで戦う価値はあります。"
}
2025-10-31 18:52:03,969 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 175, 'reasoning': 'プリフロップでペアを持っている (8♥, 8♠) ので、コールしてフロップを見る価値はあります。ポットオッズは悪くないです。相手のベット額 (255) に対して、コールするために必要な額 (175) は、ポットサイズ (355) と比較して十分に見合っています。相手はアグレッシブなベットをしている可能性もありますが、このハンドで戦う価値はあります。'}
2025-10-31 18:52:03,969 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 175
2025-10-31 18:52:03,969 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (175)', 'raise (min 275)', 'all-in (5495)']
2025-10-31 18:52:03,969 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (175)': 175
2025-10-31 18:52:03,969 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 175}
2025-10-31 18:52:03,970 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 175, プリフロップでペアを持っている (8♥, 8♠) ので、コールしてフロップを見る価値はあります。ポットオッズは悪くないです。相手のベット額 (255) に対して、コールするために必要な額 (175) は、ポットサイズ (355) と比較して十分に見合っています。相手はアグレッシブなベットをしている可能性もありますが、このハンドで戦う価値はあります。
2025-10-31 18:52:03,970 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 175
2025-10-31 18:52:03,971 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:52:03,971 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:52:03,971 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:52:03,971 - poker_game - INFO - Pot: 355, Current bet: 255
2025-10-31 18:52:03,971 - poker_game - INFO - Last raiser: 4
2025-10-31 18:52:03,971 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:03,972 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:03,972 - poker_game - INFO - Community cards: []
2025-10-31 18:52:03,972 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=folded
2025-10-31 18:52:03,972 - poker_game - INFO -   P1(Agent1): chips=5495, bet=80, status=active
2025-10-31 18:52:03,972 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:03,972 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:03,973 - poker_game - INFO -   P4(Agent4): chips=1140, bet=255, status=active
2025-10-31 18:52:03,973 - poker_game - INFO - ==================================================
2025-10-31 18:52:03,973 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 175
2025-10-31 18:52:03,984 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:52:03,984 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:52:03,984 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:52:03,985 - poker_game - INFO - Pot: 530, Current bet: 255
2025-10-31 18:52:03,985 - poker_game - INFO - Last raiser: 4
2025-10-31 18:52:03,985 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:03,985 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:03,985 - poker_game - INFO - Community cards: []
2025-10-31 18:52:03,985 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=folded
2025-10-31 18:52:03,986 - poker_game - INFO -   P1(Agent1): chips=5320, bet=255, status=active
2025-10-31 18:52:03,986 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:03,986 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:03,986 - poker_game - INFO -   P4(Agent4): chips=1140, bet=255, status=active
2025-10-31 18:52:03,986 - poker_game - INFO - Extra: Action: Player 1 called 175
2025-10-31 18:52:03,987 - poker_game - INFO - ==================================================
2025-10-31 18:52:03,987 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:52:03,987 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:52:03,987 - poker_game - DEBUG - Active players: [1, 4]
2025-10-31 18:52:03,987 - poker_game - INFO - Advanced from player 1 to player 4 (seat order)
2025-10-31 18:52:03,988 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:52:03,988 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:52:03,988 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:52:03,988 - poker_game - DEBUG - Player bets: [255, 255], Current bet: 255, All same: True
2025-10-31 18:52:03,988 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:52:03,988 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:52:03,989 - poker_game - INFO - Hand #10, Phase: preflop
2025-10-31 18:52:03,989 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:52:03,989 - poker_game - INFO - Pot: 530, Current bet: 255
2025-10-31 18:52:03,989 - poker_game - INFO - Last raiser: 4
2025-10-31 18:52:03,990 - poker_game - INFO - Betting round complete: True
2025-10-31 18:52:03,990 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:03,990 - poker_game - INFO - Community cards: []
2025-10-31 18:52:03,990 - poker_game - INFO -   P0(Agent0): chips=1415, bet=20, status=folded
2025-10-31 18:52:03,990 - poker_game - INFO -   P1(Agent1): chips=5320, bet=255, status=active
2025-10-31 18:52:03,991 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:03,991 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:03,991 - poker_game - INFO -   P4(Agent4): chips=1140, bet=255, status=active
2025-10-31 18:52:03,991 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:52:03,991 - poker_game - INFO - ==================================================
2025-10-31 18:52:04,095 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:52:04,095 - poker_game - INFO - Betting round complete: True
2025-10-31 18:52:04,096 - poker_game - INFO - Remaining players: 2
2025-10-31 18:52:04,096 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:52:04,096 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:52:04,097 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:52:04,105 - poker_game - INFO - Starting new betting round
2025-10-31 18:52:04,105 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:52:04,105 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:52:04,106 - poker_game - DEBUG - Active players for new betting round: [1, 4]
2025-10-31 18:52:04,106 - poker_game - DEBUG - Dealer button: 3
2025-10-31 18:52:04,106 - poker_game - INFO - First actor: Player 4 (by phase rule), was 4
2025-10-31 18:52:04,106 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:52:04,106 - poker_game - INFO - Hand #10, Phase: flop
2025-10-31 18:52:04,107 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:52:04,107 - poker_game - INFO - Pot: 530, Current bet: 0
2025-10-31 18:52:04,107 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:04,107 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:04,107 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:04,107 - poker_game - INFO - Community cards: ['J♠', 'J♥', '7♦']
2025-10-31 18:52:04,108 - poker_game - INFO -   P0(Agent0): chips=1415, bet=0, status=folded
2025-10-31 18:52:04,108 - poker_game - INFO -   P1(Agent1): chips=5320, bet=0, status=active
2025-10-31 18:52:04,108 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:04,108 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:04,108 - poker_game - INFO -   P4(Agent4): chips=1140, bet=0, status=active
2025-10-31 18:52:04,109 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:52:04,109 - poker_game - INFO - ==================================================
2025-10-31 18:52:04,109 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "flop",
  "your_cards": [
    "6♥",
    "6♣"
  ],
  "community": [
    "J♠",
    "J♥",
    "7♦"
  ],
  "your_chips": 1140,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 255,
  "pot": 530,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1415,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5320,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1140)"
  ],
  "history": [
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 checked",
    "Flop dealt: 4♣, 8♦, 7♠",
    "Player 4 checked",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 raised to 80",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 raised to 255",
    "Player 0 folded",
    "Player 1 called 175",
    "Flop dealt: J♠, J♥, 7♦"
  ]
}
2025-10-31 18:52:04,120 - poker_game - DEBUG - Create Session: {'id': '095e0fc1-c094-4544-bb54-e35668a4fd29', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904324.1177113}
2025-10-31 18:52:14,237 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:52:18,281 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_jBsqb7xqaBH3UWQ2hVYj89L7', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1170, 'totalTokenCount': 1187}, 'invocationId': 'e-80b7018b-5ff3-463a-8e83-5f458d112c17', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'mRp2c2cr', 'timestamp': 1761904324.12863}, {'content': {'parts': [{'functionResponse': {'id': 'call_jBsqb7xqaBH3UWQ2hVYj89L7', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-80b7018b-5ff3-463a-8e83-5f458d112c17', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '4TjZytbm', 'timestamp': 1761904325.202605}, {'content': {'parts': [{'functionCall': {'id': 'call_lNlybKJTlmp6cKLiCibAhlqC', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1694, 'totalTokenCount': 1714}, 'invocationId': 'e-80b7018b-5ff3-463a-8e83-5f458d112c17', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'kpW5UtqS', 'timestamp': 1761904325.204085}, {'content': {'parts': [{'functionResponse': {'id': 'call_lNlybKJTlmp6cKLiCibAhlqC', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-80b7018b-5ff3-463a-8e83-5f458d112c17', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'aNASOBk3', 'timestamp': 1761904326.17761}, {'content': {'parts': [{'functionCall': {'id': 'call_XbHkIifL6hE98ibjE6mCQ3Tl', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1256, 'totalTokenCount': 1273}, 'invocationId': 'e-80b7018b-5ff3-463a-8e83-5f458d112c17', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'Ue7umq8w', 'timestamp': 1761904326.179743}, {'content': {'parts': [{'functionResponse': {'id': 'call_XbHkIifL6hE98ibjE6mCQ3Tl', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-80b7018b-5ff3-463a-8e83-5f458d112c17', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'hAva0zSS', 'timestamp': 1761904327.148839}, {'content': {'parts': [{'functionCall': {'id': 'call_u9xWNqUV6lrLQdFzpP4l0c9J', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1786, 'totalTokenCount': 1806}, 'invocationId': 'e-80b7018b-5ff3-463a-8e83-5f458d112c17', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'fD6oGXtO', 'timestamp': 1761904327.150606}, {'content': {'parts': [{'functionResponse': {'id': 'call_u9xWNqUV6lrLQdFzpP4l0c9J', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-80b7018b-5ff3-463a-8e83-5f458d112c17', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': '9m5jx4AY', 'timestamp': 1761904325.591792}, {'content': {'parts': [{'functionCall': {'id': 'call_JMEL0bXOI4May7vlcJXD7gYy', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1342, 'totalTokenCount': 1359}, 'invocationId': 'e-80b7018b-5ff3-463a-8e83-5f458d112c17', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '3W0r9Pdt', 'timestamp': 1761904325.59343}, {'content': {'parts': [{'functionResponse': {'id': 'call_JMEL0bXOI4May7vlcJXD7gYy', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-80b7018b-5ff3-463a-8e83-5f458d112c17', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'Avzu44mc', 'timestamp': 1761904326.895693}, {'content': {'parts': [{'functionCall': {'id': 'call_8XF5q2nFDEkj8UPiUbFhXpUq', 'args': {'game_state': {'your_id': 4, 'phase': 'flop', 'your_cards': ['6♥', '6♣'], 'community': ['J♠', 'J♥', '7♦'], 'your_chips': 1140, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 255, 'pot': 530, 'to_call': 0, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1415, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 5320, 'bet': 0, 'status': 'active'}, {'id': 2, 'chips': 25, 'bet': 0, 'status': 'folded'}, {'id': 3, 'chips': 1570, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (1140)'], 'history': ['Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 folded', 'Player 1 folded', 'Player 2 called 20', 'Player 3 folded', 'Player 4 checked', 'Flop dealt: 4♣, 8♦, 7♠', 'Player 4 checked', 'Player 2 folded', 'Showdown: Player 4 won 50', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 raised to 80', 'Player 2 folded', 'Player 3 folded', 'Player 4 raised to 255', 'Player 0 folded', 'Player 1 called 175', 'Flop dealt: J♠, J♥, 7♦']}, 'call_amount': 0, 'pot_after_call': 530, 'equity': 0.6}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 377, 'promptTokenCount': 1878, 'totalTokenCount': 2255}, 'invocationId': 'e-80b7018b-5ff3-463a-8e83-5f458d112c17', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'DPwfSL2e', 'timestamp': 1761904326.897889}, {'content': {'parts': [{'functionResponse': {'id': 'call_8XF5q2nFDEkj8UPiUbFhXpUq', 'name': 'action_decision', 'response': {'action': 'raise', 'amount': 265, 'reasoning': '期待値が見込める（318.00(ポットに対して60.00%）ため、1/2ポットでセミブラフします。ベット額: 265'}}}], 'role': 'user'}, 'invocationId': 'e-80b7018b-5ff3-463a-8e83-5f458d112c17', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'pZ5RdWD3', 'timestamp': 1761904336.583876}, {'content': {'parts': [{'text': '{"action":"raise","amount":265,"reasoning":"期待値が見込める（318.00(ポットに対して60.00%）ため、1/2ポットでセミブラフします。ベット額: 265"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 56, 'promptTokenCount': 2308, 'totalTokenCount': 2364}, 'invocationId': 'e-80b7018b-5ff3-463a-8e83-5f458d112c17', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '7Yazy9Lv', 'timestamp': 1761904336.586521}]
2025-10-31 18:52:18,281 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:52:18,282 - poker_game - DEBUG - {"action":"raise","amount":265,"reasoning":"期待値が見込める（318.00(ポットに対して60.00%）ため、1/2ポットでセミブラフします。ベット額: 265"}
2025-10-31 18:52:18,282 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:52:18,282 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"raise","amount":265,"reasoning":"期待値が見込める（318.00(ポットに対して60.00%）ため、1/2ポットでセミブラフします。ベット額: 265"}'
2025-10-31 18:52:18,282 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:52:18,282 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"raise","amount":265,"reasoning":"期待値が見込める（318.00(ポットに対して60.00%）ため、1/2ポットでセミブラフします。ベット額: 265"}
2025-10-31 18:52:18,282 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'raise', 'amount': 265, 'reasoning': '期待値が見込める（318.00(ポットに対して60.00%）ため、1/2ポットでセミブラフします。ベット額: 265'}
2025-10-31 18:52:18,283 - poker_game - DEBUG - [Agent4] Extracted values - action: 'raise', amount: 265
2025-10-31 18:52:18,283 - poker_game - DEBUG - [Agent4] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1140)']
2025-10-31 18:52:18,283 - poker_game - DEBUG - [Agent4] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:52:18,283 - poker_game - DEBUG - [Agent4] Raise amount 265 is valid (min: 20)
2025-10-31 18:52:18,283 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'raise', 'amount': 265}
2025-10-31 18:52:18,283 - poker_game - INFO - [Agent4] Successfully parsed decision: raise, 265, 期待値が見込める（318.00(ポットに対して60.00%）ため、1/2ポットでセミブラフします。ベット額: 265
2025-10-31 18:52:18,283 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'raise' with amount 265
2025-10-31 18:52:18,284 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:52:18,284 - poker_game - INFO - Hand #10, Phase: flop
2025-10-31 18:52:18,284 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:52:18,284 - poker_game - INFO - Pot: 530, Current bet: 0
2025-10-31 18:52:18,284 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:18,285 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:18,285 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:18,285 - poker_game - INFO - Community cards: ['J♠', 'J♥', '7♦']
2025-10-31 18:52:18,285 - poker_game - INFO -   P0(Agent0): chips=1415, bet=0, status=folded
2025-10-31 18:52:18,285 - poker_game - INFO -   P1(Agent1): chips=5320, bet=0, status=active
2025-10-31 18:52:18,286 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:18,286 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:18,286 - poker_game - INFO -   P4(Agent4): chips=1140, bet=0, status=active
2025-10-31 18:52:18,286 - poker_game - INFO - ==================================================
2025-10-31 18:52:18,287 - poker_game - INFO - ACTION_EXECUTED: Player 4 raised to 265
2025-10-31 18:52:18,294 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:52:18,294 - poker_game - INFO - Hand #10, Phase: flop
2025-10-31 18:52:18,294 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:52:18,294 - poker_game - INFO - Pot: 795, Current bet: 265
2025-10-31 18:52:18,295 - poker_game - INFO - Last raiser: 4
2025-10-31 18:52:18,295 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:18,295 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:18,296 - poker_game - INFO - Community cards: ['J♠', 'J♥', '7♦']
2025-10-31 18:52:18,296 - poker_game - INFO -   P0(Agent0): chips=1415, bet=0, status=folded
2025-10-31 18:52:18,296 - poker_game - INFO -   P1(Agent1): chips=5320, bet=0, status=active
2025-10-31 18:52:18,297 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:18,297 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:18,297 - poker_game - INFO -   P4(Agent4): chips=875, bet=265, status=active
2025-10-31 18:52:18,298 - poker_game - INFO - Extra: Action: Player 4 raised to 265
2025-10-31 18:52:18,298 - poker_game - INFO - ==================================================
2025-10-31 18:52:18,298 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:52:18,299 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:52:18,299 - poker_game - DEBUG - Active players: [1, 4]
2025-10-31 18:52:18,299 - poker_game - INFO - Advanced from player 4 to player 1 (seat order)
2025-10-31 18:52:18,300 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:52:18,301 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:52:18,301 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:52:18,301 - poker_game - DEBUG - Player bets: [0, 265], Current bet: 265, All same: False
2025-10-31 18:52:18,302 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:52:18,302 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:52:18,302 - poker_game - INFO - Hand #10, Phase: flop
2025-10-31 18:52:18,303 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:52:18,303 - poker_game - INFO - Pot: 795, Current bet: 265
2025-10-31 18:52:18,304 - poker_game - INFO - Last raiser: 4
2025-10-31 18:52:18,304 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:18,305 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:18,305 - poker_game - INFO - Community cards: ['J♠', 'J♥', '7♦']
2025-10-31 18:52:18,306 - poker_game - INFO -   P0(Agent0): chips=1415, bet=0, status=folded
2025-10-31 18:52:18,306 - poker_game - INFO -   P1(Agent1): chips=5320, bet=0, status=active
2025-10-31 18:52:18,306 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:18,307 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:18,307 - poker_game - INFO -   P4(Agent4): chips=875, bet=265, status=active
2025-10-31 18:52:18,308 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:52:18,308 - poker_game - INFO - ==================================================
2025-10-31 18:52:18,410 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "flop",
  "your_cards": [
    "8♥",
    "8♠"
  ],
  "community": [
    "J♠",
    "J♥",
    "7♦"
  ],
  "your_chips": 5320,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 255,
  "pot": 795,
  "to_call": 265,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1415,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 875,
      "bet": 265,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (265)",
    "raise (min 285)",
    "all-in (5320)"
  ],
  "history": [
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 checked",
    "Flop dealt: 4♣, 8♦, 7♠",
    "Player 4 checked",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 raised to 80",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 raised to 255",
    "Player 0 folded",
    "Player 1 called 175",
    "Flop dealt: J♠, J♥, 7♦",
    "Player 4 raised to 265"
  ]
}
2025-10-31 18:52:18,453 - poker_game - DEBUG - Create Session: {'id': '859c0f1d-b7cb-4727-b772-d24e20e4d601', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904338.450005}
2025-10-31 18:52:21,106 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 265,\n  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、あなたの手札の8とコミュニティカードのJ, J, 7を確認します。あなたは8のペアを持っていますが、Jのペアに負けています（Jペアは8ペアより強い）。しかし、Jが2枚（J♠、J♥）あるので、相手がJのトリップス（同じカード3枚）を持っている可能性は低いです。相手（Player 4）が265をベットしてきました。コール（相手のベット額と同額を支払うこと）するには265必要です。レイズ（ベット額をさらに増やすこと）は、相手がそれ以上の強い手を持っている可能性を考えるとリスクが高いです。フォールド（降りること）は、まだ勝てる可能性があるため、もったいないです。したがって、265をコールして、次のカード（ターン）を見るのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 225, 'promptTokenCount': 871, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 871}], 'totalTokenCount': 1096}, 'invocationId': 'e-946817b5-a971-4eaf-b203-d3e2c7e959a9', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'znH94Dge', 'timestamp': 1761904338.469779}]
2025-10-31 18:52:21,107 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:52:21,107 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 265,
  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、あなたの手札の8とコミュニティカードのJ, J, 7を確認します。あなたは8のペアを持っていますが、Jのペアに負けています（Jペアは8ペアより強い）。しかし、Jが2枚（J♠、J♥）あるので、相手がJのトリップス（同じカード3枚）を持っている可能性は低いです。相手（Player 4）が265をベットしてきました。コール（相手のベット額と同額を支払うこと）するには265必要です。レイズ（ベット額をさらに増やすこと）は、相手がそれ以上の強い手を持っている可能性を考えるとリスクが高いです。フォールド（降りること）は、まだ勝てる可能性があるため、もったいないです。したがって、265をコールして、次のカード（ターン）を見るのが最善の選択です。"
}
```
2025-10-31 18:52:21,108 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:52:21,108 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 265,\n  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、あなたの手札の8とコミュニティカードのJ, J, 7を確認します。あなたは8のペアを持っていますが、Jのペアに負けています（Jペアは8ペアより強い）。しかし、Jが2枚（J♠、J♥）あるので、相手がJのトリップス（同じカード3枚）を持っている可能性は低いです。相手（Player 4）が265をベットしてきました。コール（相手のベット額と同額を支払うこと）するには265必要です。レイズ（ベット額をさらに増やすこと）は、相手がそれ以上の強い手を持っている可能性を考えるとリスクが高いです。フォールド（降りること）は、まだ勝てる可能性があるため、もったいないです。したがって、265をコールして、次のカード（ターン）を見るのが最善の選択です。"\n}\n```'
2025-10-31 18:52:21,109 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:52:21,109 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 265,\n  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、あなたの手札の8とコミュニティカードのJ, J, 7を確認します。あなたは8のペアを持っていますが、Jのペアに負けています（Jペアは8ペアより強い）。しかし、Jが2枚（J♠、J♥）あるので、相手がJのトリップス（同じカード3枚）を持っている可能性は低いです。相手（Player 4）が265をベットしてきました。コール（相手のベット額と同額を支払うこと）するには265必要です。レイズ（ベット額をさらに増やすこと）は、相手がそれ以上の強い手を持っている可能性を考えるとリスクが高いです。フォールド（降りること）は、まだ勝てる可能性があるため、もったいないです。したがって、265をコールして、次のカード（ターン）を見るのが最善の選択です。"\n}'
2025-10-31 18:52:21,109 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 265,
  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、あなたの手札の8とコミュニティカードのJ, J, 7を確認します。あなたは8のペアを持っていますが、Jのペアに負けています（Jペアは8ペアより強い）。しかし、Jが2枚（J♠、J♥）あるので、相手がJのトリップス（同じカード3枚）を持っている可能性は低いです。相手（Player 4）が265をベットしてきました。コール（相手のベット額と同額を支払うこと）するには265必要です。レイズ（ベット額をさらに増やすこと）は、相手がそれ以上の強い手を持っている可能性を考えるとリスクが高いです。フォールド（降りること）は、まだ勝てる可能性があるため、もったいないです。したがって、265をコールして、次のカード（ターン）を見るのが最善の選択です。"
}
2025-10-31 18:52:21,109 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 265, 'reasoning': 'フロップ（コミュニティカードが開かれた段階）で、あなたの手札の8とコミュニティカードのJ, J, 7を確認します。あなたは8のペアを持っていますが、Jのペアに負けています（Jペアは8ペアより強い）。しかし、Jが2枚（J♠、J♥）あるので、相手がJのトリップス（同じカード3枚）を持っている可能性は低いです。相手（Player 4）が265をベットしてきました。コール（相手のベット額と同額を支払うこと）するには265必要です。レイズ（ベット額をさらに増やすこと）は、相手がそれ以上の強い手を持っている可能性を考えるとリスクが高いです。フォールド（降りること）は、まだ勝てる可能性があるため、もったいないです。したがって、265をコールして、次のカード（ターン）を見るのが最善の選択です。'}
2025-10-31 18:52:21,110 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 265
2025-10-31 18:52:21,110 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (265)', 'raise (min 285)', 'all-in (5320)']
2025-10-31 18:52:21,110 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (265)': 265
2025-10-31 18:52:21,110 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 265}
2025-10-31 18:52:21,110 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 265, フロップ（コミュニティカードが開かれた段階）で、あなたの手札の8とコミュニティカードのJ, J, 7を確認します。あなたは8のペアを持っていますが、Jのペアに負けています（Jペアは8ペアより強い）。しかし、Jが2枚（J♠、J♥）あるので、相手がJのトリップス（同じカード3枚）を持っている可能性は低いです。相手（Player 4）が265をベットしてきました。コール（相手のベット額と同額を支払うこと）するには265必要です。レイズ（ベット額をさらに増やすこと）は、相手がそれ以上の強い手を持っている可能性を考えるとリスクが高いです。フォールド（降りること）は、まだ勝てる可能性があるため、もったいないです。したがって、265をコールして、次のカード（ターン）を見るのが最善の選択です。
2025-10-31 18:52:21,112 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 265
2025-10-31 18:52:21,112 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:52:21,113 - poker_game - INFO - Hand #10, Phase: flop
2025-10-31 18:52:21,113 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:52:21,113 - poker_game - INFO - Pot: 795, Current bet: 265
2025-10-31 18:52:21,114 - poker_game - INFO - Last raiser: 4
2025-10-31 18:52:21,114 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:21,115 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:21,115 - poker_game - INFO - Community cards: ['J♠', 'J♥', '7♦']
2025-10-31 18:52:21,116 - poker_game - INFO -   P0(Agent0): chips=1415, bet=0, status=folded
2025-10-31 18:52:21,117 - poker_game - INFO -   P1(Agent1): chips=5320, bet=0, status=active
2025-10-31 18:52:21,117 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:21,117 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:21,117 - poker_game - INFO -   P4(Agent4): chips=875, bet=265, status=active
2025-10-31 18:52:21,118 - poker_game - INFO - ==================================================
2025-10-31 18:52:21,118 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 265
2025-10-31 18:52:21,131 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:52:21,132 - poker_game - INFO - Hand #10, Phase: flop
2025-10-31 18:52:21,132 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:52:21,132 - poker_game - INFO - Pot: 1060, Current bet: 265
2025-10-31 18:52:21,133 - poker_game - INFO - Last raiser: 4
2025-10-31 18:52:21,133 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:21,133 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:21,134 - poker_game - INFO - Community cards: ['J♠', 'J♥', '7♦']
2025-10-31 18:52:21,134 - poker_game - INFO -   P0(Agent0): chips=1415, bet=0, status=folded
2025-10-31 18:52:21,135 - poker_game - INFO -   P1(Agent1): chips=5055, bet=265, status=active
2025-10-31 18:52:21,135 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:21,136 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:21,136 - poker_game - INFO -   P4(Agent4): chips=875, bet=265, status=active
2025-10-31 18:52:21,137 - poker_game - INFO - Extra: Action: Player 1 called 265
2025-10-31 18:52:21,137 - poker_game - INFO - ==================================================
2025-10-31 18:52:21,137 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:52:21,138 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:52:21,138 - poker_game - DEBUG - Active players: [1, 4]
2025-10-31 18:52:21,138 - poker_game - INFO - Advanced from player 1 to player 4 (seat order)
2025-10-31 18:52:21,139 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:52:21,139 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:52:21,139 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:52:21,139 - poker_game - DEBUG - Player bets: [265, 265], Current bet: 265, All same: True
2025-10-31 18:52:21,140 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:52:21,140 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:52:21,140 - poker_game - INFO - Hand #10, Phase: flop
2025-10-31 18:52:21,141 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:52:21,141 - poker_game - INFO - Pot: 1060, Current bet: 265
2025-10-31 18:52:21,142 - poker_game - INFO - Last raiser: 4
2025-10-31 18:52:21,142 - poker_game - INFO - Betting round complete: True
2025-10-31 18:52:21,142 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:21,143 - poker_game - INFO - Community cards: ['J♠', 'J♥', '7♦']
2025-10-31 18:52:21,143 - poker_game - INFO -   P0(Agent0): chips=1415, bet=0, status=folded
2025-10-31 18:52:21,144 - poker_game - INFO -   P1(Agent1): chips=5055, bet=265, status=active
2025-10-31 18:52:21,144 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:21,145 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:21,146 - poker_game - INFO -   P4(Agent4): chips=875, bet=265, status=active
2025-10-31 18:52:21,146 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:52:21,147 - poker_game - INFO - ==================================================
2025-10-31 18:52:21,248 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:52:21,249 - poker_game - INFO - Betting round complete: True
2025-10-31 18:52:21,249 - poker_game - INFO - Remaining players: 2
2025-10-31 18:52:21,249 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:52:21,249 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:52:21,249 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 18:52:21,259 - poker_game - INFO - Starting new betting round
2025-10-31 18:52:21,260 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:52:21,260 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:52:21,261 - poker_game - DEBUG - Active players for new betting round: [1, 4]
2025-10-31 18:52:21,261 - poker_game - DEBUG - Dealer button: 3
2025-10-31 18:52:21,261 - poker_game - INFO - First actor: Player 4 (by phase rule), was 4
2025-10-31 18:52:21,262 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:52:21,262 - poker_game - INFO - Hand #10, Phase: turn
2025-10-31 18:52:21,262 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:52:21,263 - poker_game - INFO - Pot: 1060, Current bet: 0
2025-10-31 18:52:21,263 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:21,264 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:21,264 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:21,265 - poker_game - INFO - Community cards: ['J♠', 'J♥', '7♦', '9♠']
2025-10-31 18:52:21,265 - poker_game - INFO -   P0(Agent0): chips=1415, bet=0, status=folded
2025-10-31 18:52:21,265 - poker_game - INFO -   P1(Agent1): chips=5055, bet=0, status=active
2025-10-31 18:52:21,266 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:21,266 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:21,267 - poker_game - INFO -   P4(Agent4): chips=875, bet=0, status=active
2025-10-31 18:52:21,267 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 18:52:21,268 - poker_game - INFO - ==================================================
2025-10-31 18:52:21,269 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "turn",
  "your_cards": [
    "6♥",
    "6♣"
  ],
  "community": [
    "J♠",
    "J♥",
    "7♦",
    "9♠"
  ],
  "your_chips": 875,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 520,
  "pot": 1060,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1415,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5055,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (875)"
  ],
  "history": [
    "Player 1 folded",
    "Player 2 called 20",
    "Player 3 folded",
    "Player 4 checked",
    "Flop dealt: 4♣, 8♦, 7♠",
    "Player 4 checked",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 raised to 80",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 raised to 255",
    "Player 0 folded",
    "Player 1 called 175",
    "Flop dealt: J♠, J♥, 7♦",
    "Player 4 raised to 265",
    "Player 1 called 265",
    "Turn dealt: 9♠"
  ]
}
2025-10-31 18:52:21,284 - poker_game - DEBUG - Create Session: {'id': '3b61181e-552e-4c57-849d-7ecdd43b1338', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904341.2810934}
2025-10-31 18:52:26,109 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_LPOAG9Kft3FDHEKhz2Itemoo', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1174, 'totalTokenCount': 1191}, 'invocationId': 'e-d173d548-dee8-4cfb-b3c7-9082084a3920', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'fbZKRxs5', 'timestamp': 1761904341.295825}, {'content': {'parts': [{'functionResponse': {'id': 'call_LPOAG9Kft3FDHEKhz2Itemoo', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-d173d548-dee8-4cfb-b3c7-9082084a3920', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '8jDcJyxO', 'timestamp': 1761904342.440419}, {'content': {'parts': [{'functionCall': {'id': 'call_l4BpKas4bpXU2W3gy0r0RwXM', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1698, 'totalTokenCount': 1718}, 'invocationId': 'e-d173d548-dee8-4cfb-b3c7-9082084a3920', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '2uW3iKAc', 'timestamp': 1761904342.441885}, {'content': {'parts': [{'functionResponse': {'id': 'call_l4BpKas4bpXU2W3gy0r0RwXM', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-d173d548-dee8-4cfb-b3c7-9082084a3920', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'z5xZmSgF', 'timestamp': 1761904343.608387}, {'content': {'parts': [{'text': '{\n  "action": "raise",\n  "amount": 895,\n  "reasoning": "I have a strong hand with a pocket pair of sixes and the turn has added a potential straight. Raising allows me to build the pot and put pressure on my opponent, who may have a weaker hand."\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 65, 'promptTokenCount': 1260, 'totalTokenCount': 1325}, 'invocationId': 'e-d173d548-dee8-4cfb-b3c7-9082084a3920', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'IYIoSFQw', 'timestamp': 1761904343.611449}]
2025-10-31 18:52:26,110 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:52:26,110 - poker_game - DEBUG - {
  "action": "raise",
  "amount": 895,
  "reasoning": "I have a strong hand with a pocket pair of sixes and the turn has added a potential straight. Raising allows me to build the pot and put pressure on my opponent, who may have a weaker hand."
}
2025-10-31 18:52:26,110 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:52:26,110 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "raise",\n  "amount": 895,\n  "reasoning": "I have a strong hand with a pocket pair of sixes and the turn has added a potential straight. Raising allows me to build the pot and put pressure on my opponent, who may have a weaker hand."\n}'
2025-10-31 18:52:26,110 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:52:26,111 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "raise",
  "amount": 895,
  "reasoning": "I have a strong hand with a pocket pair of sixes and the turn has added a potential straight. Raising allows me to build the pot and put pressure on my opponent, who may have a weaker hand."
}
2025-10-31 18:52:26,111 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'raise', 'amount': 895, 'reasoning': 'I have a strong hand with a pocket pair of sixes and the turn has added a potential straight. Raising allows me to build the pot and put pressure on my opponent, who may have a weaker hand.'}
2025-10-31 18:52:26,112 - poker_game - DEBUG - [Agent4] Extracted values - action: 'raise', amount: 895
2025-10-31 18:52:26,112 - poker_game - DEBUG - [Agent4] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (875)']
2025-10-31 18:52:26,112 - poker_game - DEBUG - [Agent4] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:52:26,113 - poker_game - DEBUG - [Agent4] Raise amount 895 is valid (min: 20)
2025-10-31 18:52:26,115 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'raise', 'amount': 895}
2025-10-31 18:52:26,115 - poker_game - INFO - [Agent4] Successfully parsed decision: raise, 895, I have a strong hand with a pocket pair of sixes and the turn has added a potential straight. Raising allows me to build the pot and put pressure on my opponent, who may have a weaker hand.
2025-10-31 18:52:26,116 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'raise' with amount 895
2025-10-31 18:52:26,116 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:52:26,116 - poker_game - INFO - Hand #10, Phase: turn
2025-10-31 18:52:26,117 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:52:26,117 - poker_game - INFO - Pot: 1060, Current bet: 0
2025-10-31 18:52:26,117 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:26,117 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:26,118 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:26,118 - poker_game - INFO - Community cards: ['J♠', 'J♥', '7♦', '9♠']
2025-10-31 18:52:26,118 - poker_game - INFO -   P0(Agent0): chips=1415, bet=0, status=folded
2025-10-31 18:52:26,119 - poker_game - INFO -   P1(Agent1): chips=5055, bet=0, status=active
2025-10-31 18:52:26,119 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:26,119 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:26,119 - poker_game - INFO -   P4(Agent4): chips=875, bet=0, status=active
2025-10-31 18:52:26,119 - poker_game - INFO - ==================================================
2025-10-31 18:52:26,119 - poker_game - WARNING - Player 4 cannot raise - needs 895, has 875
2025-10-31 18:52:26,120 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'fold' with amount 0
2025-10-31 18:52:26,120 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:52:26,120 - poker_game - INFO - Hand #10, Phase: turn
2025-10-31 18:52:26,120 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:52:26,120 - poker_game - INFO - Pot: 1060, Current bet: 0
2025-10-31 18:52:26,121 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:26,121 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:26,121 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:26,121 - poker_game - INFO - Community cards: ['J♠', 'J♥', '7♦', '9♠']
2025-10-31 18:52:26,122 - poker_game - INFO -   P0(Agent0): chips=1415, bet=0, status=folded
2025-10-31 18:52:26,122 - poker_game - INFO -   P1(Agent1): chips=5055, bet=0, status=active
2025-10-31 18:52:26,122 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:26,122 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:26,122 - poker_game - INFO -   P4(Agent4): chips=875, bet=0, status=active
2025-10-31 18:52:26,123 - poker_game - INFO - ==================================================
2025-10-31 18:52:26,123 - poker_game - INFO - ACTION_EXECUTED: Player 4 folded
2025-10-31 18:52:26,136 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:52:26,136 - poker_game - INFO - Hand #10, Phase: turn
2025-10-31 18:52:26,137 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:52:26,137 - poker_game - INFO - Pot: 1060, Current bet: 0
2025-10-31 18:52:26,137 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:26,138 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:26,138 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 4
2025-10-31 18:52:26,138 - poker_game - INFO - Community cards: ['J♠', 'J♥', '7♦', '9♠']
2025-10-31 18:52:26,138 - poker_game - INFO -   P0(Agent0): chips=1415, bet=0, status=folded
2025-10-31 18:52:26,138 - poker_game - INFO -   P1(Agent1): chips=5055, bet=0, status=active
2025-10-31 18:52:26,138 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:26,138 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:26,139 - poker_game - INFO -   P4(Agent4): chips=875, bet=0, status=folded
2025-10-31 18:52:26,139 - poker_game - INFO - Extra: Action: Player 4 folded
2025-10-31 18:52:26,139 - poker_game - INFO - ==================================================
2025-10-31 18:52:26,139 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:52:26,140 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:52:26,141 - poker_game - DEBUG - Active players: [1]
2025-10-31 18:52:26,141 - poker_game - INFO - Advanced from player 4 to player 1 (seat order)
2025-10-31 18:52:26,142 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:52:26,142 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:52:26,142 - poker_game - DEBUG - Active: 1, All-in: 0
2025-10-31 18:52:26,142 - poker_game - INFO - Betting complete: Only 1 or fewer players remaining
2025-10-31 18:52:26,143 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:52:26,144 - poker_game - INFO - Hand #10, Phase: turn
2025-10-31 18:52:26,144 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:52:26,145 - poker_game - INFO - Pot: 1060, Current bet: 0
2025-10-31 18:52:26,145 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:26,145 - poker_game - INFO - Betting round complete: True
2025-10-31 18:52:26,146 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 4
2025-10-31 18:52:26,146 - poker_game - INFO - Community cards: ['J♠', 'J♥', '7♦', '9♠']
2025-10-31 18:52:26,147 - poker_game - INFO -   P0(Agent0): chips=1415, bet=0, status=folded
2025-10-31 18:52:26,147 - poker_game - INFO -   P1(Agent1): chips=5055, bet=0, status=active
2025-10-31 18:52:26,147 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:26,147 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:26,148 - poker_game - INFO -   P4(Agent4): chips=875, bet=0, status=folded
2025-10-31 18:52:26,148 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:52:26,148 - poker_game - INFO - ==================================================
2025-10-31 18:52:26,249 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 18:52:26,250 - poker_game - INFO - Betting round complete: True
2025-10-31 18:52:26,250 - poker_game - INFO - Remaining players: 1
2025-10-31 18:52:26,251 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:52:26,251 - poker_game - INFO - Going to SHOWDOWN - only 1 or fewer players remaining
2025-10-31 18:52:26,251 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:52:26,252 - poker_game - INFO - Hand #10, Phase: showdown
2025-10-31 18:52:26,252 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:52:26,253 - poker_game - INFO - Pot: 1060, Current bet: 0
2025-10-31 18:52:26,253 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:26,253 - poker_game - INFO - Betting round complete: True
2025-10-31 18:52:26,254 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 4
2025-10-31 18:52:26,254 - poker_game - INFO - Community cards: ['J♠', 'J♥', '7♦', '9♠']
2025-10-31 18:52:26,255 - poker_game - INFO -   P0(Agent0): chips=1415, bet=0, status=folded
2025-10-31 18:52:26,255 - poker_game - INFO -   P1(Agent1): chips=5055, bet=0, status=active
2025-10-31 18:52:26,255 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:26,256 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=folded
2025-10-31 18:52:26,256 - poker_game - INFO -   P4(Agent4): chips=875, bet=0, status=folded
2025-10-31 18:52:26,257 - poker_game - INFO - ==================================================
2025-10-31 18:52:26,257 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:52:26,257 - poker_game - INFO - Pot: 1060, Community cards: ['J♠', 'J♥', '7♦', '9♠']
2025-10-31 18:52:26,258 - poker_game - INFO -   Player 1 status=active cards=['8♥', '8♠']
2025-10-31 18:52:26,258 - poker_game - INFO - Showdown winner by default: Player 1 awarded 1060
2025-10-31 18:52:26,259 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:52:26,259 - poker_game - INFO - === STARTING NEW HAND #11 ===
2025-10-31 18:52:26,260 - poker_game - INFO - Active players for new hand: 5
2025-10-31 18:52:26,260 - poker_game - INFO - Moving dealer button
2025-10-31 18:52:26,261 - poker_game - INFO - Posting blinds
2025-10-31 18:52:26,283 - poker_game - INFO - Dealing hole cards
2025-10-31 18:52:26,284 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:52:26,294 - poker_game - INFO - Started new hand in database: hand_id=11
2025-10-31 18:52:26,295 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:52:26,296 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:26,296 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:52:26,297 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:52:26,297 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:26,298 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:26,298 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:52:26,298 - poker_game - INFO - Community cards: []
2025-10-31 18:52:26,299 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=active
2025-10-31 18:52:26,299 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:52:26,300 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=active
2025-10-31 18:52:26,300 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=active
2025-10-31 18:52:26,300 - poker_game - INFO -   P4(Agent4): chips=875, bet=0, status=active
2025-10-31 18:52:26,300 - poker_game - INFO - ==================================================
2025-10-31 18:52:26,301 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "preflop",
  "your_cards": [
    "6♥",
    "3♥"
  ],
  "community": [],
  "your_chips": 25,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 4,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6095,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1570,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 875,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "all-in (25)"
  ],
  "history": [
    "Flop dealt: 4♣, 8♦, 7♠",
    "Player 4 checked",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 raised to 80",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 raised to 255",
    "Player 0 folded",
    "Player 1 called 175",
    "Flop dealt: J♠, J♥, 7♦",
    "Player 4 raised to 265",
    "Player 1 called 265",
    "Turn dealt: 9♠",
    "Player 4 folded",
    "Showdown: Player 1 won 1060",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20"
  ]
}
2025-10-31 18:52:26,310 - poker_game - DEBUG - Create Session: {'id': '8418c5df-d531-4fd8-ba67-d1b7c3c0d7dd', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904346.3079722}
2025-10-31 18:52:28,450 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フロップが開かれる前）で、私の手札は6♥3♥です。これは非常に弱いハンド（スーテッド・オフスーツ・ギャッパー）で、ペアを作ることも、強いストレートやフラッシュを作る可能性も低いです。現在のベット額（to_call: 20）に対して、私のチップ量（your_chips: 25）は少なく、コールしても有利な状況にはなれません。さらに、前のプレイヤー（Player 1）が既にレイズ（raise）しており、ポットも大きくなっています。この状況では、これ以上チップを失うリスクを避けるためにフォールド（fold：降りる）するのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 177, 'promptTokenCount': 849, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 849}], 'totalTokenCount': 1026}, 'invocationId': 'e-b1dc8b25-536f-4ab1-9c56-5a1c829ca2a4', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'a1f1X8F0', 'timestamp': 1761904346.318829}]
2025-10-31 18:52:28,451 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:52:28,451 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（フロップが開かれる前）で、私の手札は6♥3♥です。これは非常に弱いハンド（スーテッド・オフスーツ・ギャッパー）で、ペアを作ることも、強いストレートやフラッシュを作る可能性も低いです。現在のベット額（to_call: 20）に対して、私のチップ量（your_chips: 25）は少なく、コールしても有利な状況にはなれません。さらに、前のプレイヤー（Player 1）が既にレイズ（raise）しており、ポットも大きくなっています。この状況では、これ以上チップを失うリスクを避けるためにフォールド（fold：降りる）するのが最善の選択です。"
}
```
2025-10-31 18:52:28,451 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:52:28,451 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フロップが開かれる前）で、私の手札は6♥3♥です。これは非常に弱いハンド（スーテッド・オフスーツ・ギャッパー）で、ペアを作ることも、強いストレートやフラッシュを作る可能性も低いです。現在のベット額（to_call: 20）に対して、私のチップ量（your_chips: 25）は少なく、コールしても有利な状況にはなれません。さらに、前のプレイヤー（Player 1）が既にレイズ（raise）しており、ポットも大きくなっています。この状況では、これ以上チップを失うリスクを避けるためにフォールド（fold：降りる）するのが最善の選択です。"\n}\n```'
2025-10-31 18:52:28,451 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:52:28,452 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フロップが開かれる前）で、私の手札は6♥3♥です。これは非常に弱いハンド（スーテッド・オフスーツ・ギャッパー）で、ペアを作ることも、強いストレートやフラッシュを作る可能性も低いです。現在のベット額（to_call: 20）に対して、私のチップ量（your_chips: 25）は少なく、コールしても有利な状況にはなれません。さらに、前のプレイヤー（Player 1）が既にレイズ（raise）しており、ポットも大きくなっています。この状況では、これ以上チップを失うリスクを避けるためにフォールド（fold：降りる）するのが最善の選択です。"\n}'
2025-10-31 18:52:28,452 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（フロップが開かれる前）で、私の手札は6♥3♥です。これは非常に弱いハンド（スーテッド・オフスーツ・ギャッパー）で、ペアを作ることも、強いストレートやフラッシュを作る可能性も低いです。現在のベット額（to_call: 20）に対して、私のチップ量（your_chips: 25）は少なく、コールしても有利な状況にはなれません。さらに、前のプレイヤー（Player 1）が既にレイズ（raise）しており、ポットも大きくなっています。この状況では、これ以上チップを失うリスクを避けるためにフォールド（fold：降りる）するのが最善の選択です。"
}
2025-10-31 18:52:28,452 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（フロップが開かれる前）で、私の手札は6♥3♥です。これは非常に弱いハンド（スーテッド・オフスーツ・ギャッパー）で、ペアを作ることも、強いストレートやフラッシュを作る可能性も低いです。現在のベット額（to_call: 20）に対して、私のチップ量（your_chips: 25）は少なく、コールしても有利な状況にはなれません。さらに、前のプレイヤー（Player 1）が既にレイズ（raise）しており、ポットも大きくなっています。この状況では、これ以上チップを失うリスクを避けるためにフォールド（fold：降りる）するのが最善の選択です。'}
2025-10-31 18:52:28,452 - poker_game - DEBUG - [Agent2] Extracted values - action: 'fold', amount: 0
2025-10-31 18:52:28,452 - poker_game - DEBUG - [Agent2] Action 'fold' normalized - amount set to 0
2025-10-31 18:52:28,452 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:52:28,453 - poker_game - INFO - [Agent2] Successfully parsed decision: fold, 0, プリフロップ（フロップが開かれる前）で、私の手札は6♥3♥です。これは非常に弱いハンド（スーテッド・オフスーツ・ギャッパー）で、ペアを作ることも、強いストレートやフラッシュを作る可能性も低いです。現在のベット額（to_call: 20）に対して、私のチップ量（your_chips: 25）は少なく、コールしても有利な状況にはなれません。さらに、前のプレイヤー（Player 1）が既にレイズ（raise）しており、ポットも大きくなっています。この状況では、これ以上チップを失うリスクを避けるためにフォールド（fold：降りる）するのが最善の選択です。
2025-10-31 18:52:28,453 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'fold' with amount 0
2025-10-31 18:52:28,453 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:52:28,454 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:28,454 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:52:28,454 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:52:28,454 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:28,454 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:28,455 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:52:28,455 - poker_game - INFO - Community cards: []
2025-10-31 18:52:28,455 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=active
2025-10-31 18:52:28,455 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:52:28,455 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=active
2025-10-31 18:52:28,456 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=active
2025-10-31 18:52:28,456 - poker_game - INFO -   P4(Agent4): chips=875, bet=0, status=active
2025-10-31 18:52:28,456 - poker_game - INFO - ==================================================
2025-10-31 18:52:28,456 - poker_game - INFO - ACTION_EXECUTED: Player 2 folded
2025-10-31 18:52:28,467 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:52:28,468 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:28,468 - poker_game - INFO - Current player: 2, Dealer: 4
2025-10-31 18:52:28,468 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:52:28,468 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:28,469 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:28,469 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:52:28,469 - poker_game - INFO - Community cards: []
2025-10-31 18:52:28,470 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=active
2025-10-31 18:52:28,470 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:52:28,471 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:28,471 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=active
2025-10-31 18:52:28,471 - poker_game - INFO -   P4(Agent4): chips=875, bet=0, status=active
2025-10-31 18:52:28,471 - poker_game - INFO - Extra: Action: Player 2 folded
2025-10-31 18:52:28,472 - poker_game - INFO - ==================================================
2025-10-31 18:52:28,472 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:52:28,472 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:52:28,472 - poker_game - DEBUG - Active players: [0, 1, 3, 4]
2025-10-31 18:52:28,472 - poker_game - INFO - Advanced from player 2 to player 3 (seat order)
2025-10-31 18:52:28,472 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:52:28,473 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:52:28,473 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:52:28,473 - poker_game - DEBUG - Player bets: [10, 20, 0, 0], Current bet: 20, All same: False
2025-10-31 18:52:28,473 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:52:28,473 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:52:28,473 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:28,474 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:52:28,474 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:52:28,474 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:28,474 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:28,474 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:52:28,475 - poker_game - INFO - Community cards: []
2025-10-31 18:52:28,475 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=active
2025-10-31 18:52:28,475 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:52:28,475 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:28,475 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=active
2025-10-31 18:52:28,476 - poker_game - INFO -   P4(Agent4): chips=875, bet=0, status=active
2025-10-31 18:52:28,476 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:52:28,476 - poker_game - INFO - ==================================================
2025-10-31 18:52:28,578 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "10♦",
    "A♣"
  ],
  "community": [],
  "your_chips": 1570,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 4,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6095,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 875,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1570)"
  ],
  "history": [
    "Player 4 checked",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 raised to 80",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 raised to 255",
    "Player 0 folded",
    "Player 1 called 175",
    "Flop dealt: J♠, J♥, 7♦",
    "Player 4 raised to 265",
    "Player 1 called 265",
    "Turn dealt: 9♠",
    "Player 4 folded",
    "Showdown: Player 1 won 1060",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 folded"
  ]
}
2025-10-31 18:52:28,586 - poker_game - DEBUG - Create Session: {'id': 'd06b2853-d6b6-4819-b1ef-88dfa9a8a4c8', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904348.584535}
2025-10-31 18:52:30,432 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップでA10オフスーツは強いハンドです。ポットは30で、コールするために必要なのは20です。これは有利なオッズであり、ポストフロップでプレイする価値があります。相手のレイズ額が大きすぎない限り、コールしてフロップを見るのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 97, 'promptTokenCount': 851, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 851}], 'totalTokenCount': 948}, 'invocationId': 'e-f52751ed-2894-488c-832a-1b5b8b7ef375', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'rZjyn86S', 'timestamp': 1761904348.597687}]
2025-10-31 18:52:30,433 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:52:30,433 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップでA10オフスーツは強いハンドです。ポットは30で、コールするために必要なのは20です。これは有利なオッズであり、ポストフロップでプレイする価値があります。相手のレイズ額が大きすぎない限り、コールしてフロップを見るのが最善です。"
}
```
2025-10-31 18:52:30,433 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:52:30,433 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップでA10オフスーツは強いハンドです。ポットは30で、コールするために必要なのは20です。これは有利なオッズであり、ポストフロップでプレイする価値があります。相手のレイズ額が大きすぎない限り、コールしてフロップを見るのが最善です。"\n}\n```'
2025-10-31 18:52:30,433 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:52:30,433 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップでA10オフスーツは強いハンドです。ポットは30で、コールするために必要なのは20です。これは有利なオッズであり、ポストフロップでプレイする価値があります。相手のレイズ額が大きすぎない限り、コールしてフロップを見るのが最善です。"\n}'
2025-10-31 18:52:30,433 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップでA10オフスーツは強いハンドです。ポットは30で、コールするために必要なのは20です。これは有利なオッズであり、ポストフロップでプレイする価値があります。相手のレイズ額が大きすぎない限り、コールしてフロップを見るのが最善です。"
}
2025-10-31 18:52:30,433 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'プリフロップでA10オフスーツは強いハンドです。ポットは30で、コールするために必要なのは20です。これは有利なオッズであり、ポストフロップでプレイする価値があります。相手のレイズ額が大きすぎない限り、コールしてフロップを見るのが最善です。'}
2025-10-31 18:52:30,434 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 20
2025-10-31 18:52:30,434 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1570)']
2025-10-31 18:52:30,434 - poker_game - DEBUG - [Agent3] Call amount extracted from 'call (20)': 20
2025-10-31 18:52:30,434 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:52:30,434 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 20, プリフロップでA10オフスーツは強いハンドです。ポットは30で、コールするために必要なのは20です。これは有利なオッズであり、ポストフロップでプレイする価値があります。相手のレイズ額が大きすぎない限り、コールしてフロップを見るのが最善です。
2025-10-31 18:52:30,436 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 20
2025-10-31 18:52:30,436 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:52:30,436 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:30,437 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:52:30,437 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:52:30,437 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:30,437 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:30,438 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:52:30,438 - poker_game - INFO - Community cards: []
2025-10-31 18:52:30,438 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=active
2025-10-31 18:52:30,438 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:52:30,439 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:30,439 - poker_game - INFO -   P3(Agent3): chips=1570, bet=0, status=active
2025-10-31 18:52:30,439 - poker_game - INFO -   P4(Agent4): chips=875, bet=0, status=active
2025-10-31 18:52:30,439 - poker_game - INFO - ==================================================
2025-10-31 18:52:30,439 - poker_game - INFO - ACTION_EXECUTED: Player 3 called 20
2025-10-31 18:52:30,449 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:52:30,449 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:30,450 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:52:30,450 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:52:30,450 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:30,450 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:30,450 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:52:30,450 - poker_game - INFO - Community cards: []
2025-10-31 18:52:30,450 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=active
2025-10-31 18:52:30,450 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:52:30,451 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:30,451 - poker_game - INFO -   P3(Agent3): chips=1550, bet=20, status=active
2025-10-31 18:52:30,451 - poker_game - INFO -   P4(Agent4): chips=875, bet=0, status=active
2025-10-31 18:52:30,451 - poker_game - INFO - Extra: Action: Player 3 called 20
2025-10-31 18:52:30,451 - poker_game - INFO - ==================================================
2025-10-31 18:52:30,451 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:52:30,451 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:52:30,451 - poker_game - DEBUG - Active players: [0, 1, 3, 4]
2025-10-31 18:52:30,451 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:52:30,452 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:52:30,452 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:52:30,452 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:52:30,452 - poker_game - DEBUG - Player bets: [10, 20, 20, 0], Current bet: 20, All same: False
2025-10-31 18:52:30,452 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:52:30,452 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:52:30,452 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:30,453 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:52:30,453 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:52:30,453 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:30,453 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:30,453 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:52:30,453 - poker_game - INFO - Community cards: []
2025-10-31 18:52:30,453 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=active
2025-10-31 18:52:30,453 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:52:30,454 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:30,454 - poker_game - INFO -   P3(Agent3): chips=1550, bet=20, status=active
2025-10-31 18:52:30,454 - poker_game - INFO -   P4(Agent4): chips=875, bet=0, status=active
2025-10-31 18:52:30,454 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:52:30,454 - poker_game - INFO - ==================================================
2025-10-31 18:52:30,555 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "9♠",
    "K♥"
  ],
  "community": [],
  "your_chips": 875,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 50,
  "to_call": 20,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6095,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1550,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (875)"
  ],
  "history": [
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 raised to 80",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 raised to 255",
    "Player 0 folded",
    "Player 1 called 175",
    "Flop dealt: J♠, J♥, 7♦",
    "Player 4 raised to 265",
    "Player 1 called 265",
    "Turn dealt: 9♠",
    "Player 4 folded",
    "Showdown: Player 1 won 1060",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 folded",
    "Player 3 called 20"
  ]
}
2025-10-31 18:52:30,565 - poker_game - DEBUG - Create Session: {'id': '8095846c-0f3e-4e71-8c1d-c01159660fdd', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904350.5628989}
2025-10-31 18:52:38,797 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_uQcMrxUTTd0FNApDRknQ7cUu', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1152, 'totalTokenCount': 1169}, 'invocationId': 'e-b3213460-14ca-4106-b56a-27401e483b12', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'ws5m4yyq', 'timestamp': 1761904350.575213}, {'content': {'parts': [{'functionResponse': {'id': 'call_uQcMrxUTTd0FNApDRknQ7cUu', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-b3213460-14ca-4106-b56a-27401e483b12', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'pZbQnTcY', 'timestamp': 1761904351.565177}, {'content': {'parts': [{'functionCall': {'id': 'call_t80DUtL4x8V27Lp1GfLGXPGk', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['9♠', 'K♥'], 'community': [], 'your_chips': 875, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 0, 'pot': 50, 'to_call': 20, 'dealer_button': 4, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1405, 'bet': 10, 'status': 'active'}, {'id': 1, 'chips': 6095, 'bet': 20, 'status': 'active'}, {'id': 2, 'chips': 25, 'bet': 0, 'status': 'folded'}, {'id': 3, 'chips': 1550, 'bet': 20, 'status': 'active'}], 'actions': ['fold', 'call (20)', 'raise (min 40)', 'all-in (875)'], 'history': ['Player 2 folded', 'Showdown: Player 4 won 50', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 raised to 80', 'Player 2 folded', 'Player 3 folded', 'Player 4 raised to 255', 'Player 0 folded', 'Player 1 called 175', 'Flop dealt: J♠, J♥, 7♦', 'Player 4 raised to 265', 'Player 1 called 265', 'Turn dealt: 9♠', 'Player 4 folded', 'Showdown: Player 1 won 1060', 'Player 0 posted small blind 10', 'Player 1 posted big blind 20', 'Player 2 folded', 'Player 3 called 20']}, 'call_amount': 20, 'pot_after_call': 70, 'equity': 0.45}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 352, 'promptTokenCount': 1676, 'totalTokenCount': 2028}, 'invocationId': 'e-b3213460-14ca-4106-b56a-27401e483b12', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'Hpm449Xe', 'timestamp': 1761904351.566646}, {'content': {'parts': [{'functionResponse': {'id': 'call_t80DUtL4x8V27Lp1GfLGXPGk', 'name': 'action_decision', 'response': {'action': 'call', 'amount': 20, 'reasoning': 'ポットオッズを満たしており（20.50(ポットに対して41.00%）、コールが妥当と判断。コール額: 20'}}}], 'role': 'user'}, 'invocationId': 'e-b3213460-14ca-4106-b56a-27401e483b12', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'JmhswM8c', 'timestamp': 1761904356.98936}, {'content': {'parts': [{'text': '{"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（20.50(ポットに対して41.00%）、コールが妥当と判断。コール額: 20"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 54, 'promptTokenCount': 2095, 'totalTokenCount': 2149}, 'invocationId': 'e-b3213460-14ca-4106-b56a-27401e483b12', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'FsUxFl65', 'timestamp': 1761904356.993712}]
2025-10-31 18:52:38,798 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:52:38,798 - poker_game - DEBUG - {"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（20.50(ポットに対して41.00%）、コールが妥当と判断。コール額: 20"}
2025-10-31 18:52:38,799 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:52:38,799 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（20.50(ポットに対して41.00%）、コールが妥当と判断。コール額: 20"}'
2025-10-31 18:52:38,799 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:52:38,799 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（20.50(ポットに対して41.00%）、コールが妥当と判断。コール額: 20"}
2025-10-31 18:52:38,800 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'ポットオッズを満たしており（20.50(ポットに対して41.00%）、コールが妥当と判断。コール額: 20'}
2025-10-31 18:52:38,800 - poker_game - DEBUG - [Agent4] Extracted values - action: 'call', amount: 20
2025-10-31 18:52:38,800 - poker_game - DEBUG - [Agent4] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (875)']
2025-10-31 18:52:38,800 - poker_game - DEBUG - [Agent4] Call amount extracted from 'call (20)': 20
2025-10-31 18:52:38,800 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:52:38,801 - poker_game - INFO - [Agent4] Successfully parsed decision: call, 20, ポットオッズを満たしており（20.50(ポットに対して41.00%）、コールが妥当と判断。コール額: 20
2025-10-31 18:52:38,802 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'call' with amount 20
2025-10-31 18:52:38,802 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:52:38,803 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:38,803 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:52:38,804 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:52:38,804 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:38,805 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:38,805 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:52:38,805 - poker_game - INFO - Community cards: []
2025-10-31 18:52:38,806 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=active
2025-10-31 18:52:38,806 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:52:38,807 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:38,807 - poker_game - INFO -   P3(Agent3): chips=1550, bet=20, status=active
2025-10-31 18:52:38,808 - poker_game - INFO -   P4(Agent4): chips=875, bet=0, status=active
2025-10-31 18:52:38,808 - poker_game - INFO - ==================================================
2025-10-31 18:52:38,808 - poker_game - INFO - ACTION_EXECUTED: Player 4 called 20
2025-10-31 18:52:38,826 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:52:38,827 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:38,827 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:52:38,828 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:52:38,828 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:38,829 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:38,829 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:52:38,830 - poker_game - INFO - Community cards: []
2025-10-31 18:52:38,830 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=active
2025-10-31 18:52:38,831 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:52:38,831 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:38,833 - poker_game - INFO -   P3(Agent3): chips=1550, bet=20, status=active
2025-10-31 18:52:38,833 - poker_game - INFO -   P4(Agent4): chips=855, bet=20, status=active
2025-10-31 18:52:38,836 - poker_game - INFO - Extra: Action: Player 4 called 20
2025-10-31 18:52:38,838 - poker_game - INFO - ==================================================
2025-10-31 18:52:38,839 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:52:38,839 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:52:38,840 - poker_game - DEBUG - Active players: [0, 1, 3, 4]
2025-10-31 18:52:38,840 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:52:38,840 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:52:38,841 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:52:38,841 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:52:38,841 - poker_game - DEBUG - Player bets: [10, 20, 20, 20], Current bet: 20, All same: False
2025-10-31 18:52:38,841 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:52:38,842 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:52:38,842 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:38,842 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:52:38,843 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:52:38,843 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:38,844 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:38,844 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:52:38,844 - poker_game - INFO - Community cards: []
2025-10-31 18:52:38,845 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=active
2025-10-31 18:52:38,845 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:52:38,846 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:38,846 - poker_game - INFO -   P3(Agent3): chips=1550, bet=20, status=active
2025-10-31 18:52:38,846 - poker_game - INFO -   P4(Agent4): chips=855, bet=20, status=active
2025-10-31 18:52:38,846 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:52:38,847 - poker_game - INFO - ==================================================
2025-10-31 18:52:38,948 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "Q♦",
    "9♣"
  ],
  "community": [],
  "your_chips": 1405,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 70,
  "to_call": 10,
  "dealer_button": 4,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6095,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1550,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 855,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (1405)"
  ],
  "history": [
    "Showdown: Player 4 won 50",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 raised to 80",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 raised to 255",
    "Player 0 folded",
    "Player 1 called 175",
    "Flop dealt: J♠, J♥, 7♦",
    "Player 4 raised to 265",
    "Player 1 called 265",
    "Turn dealt: 9♠",
    "Player 4 folded",
    "Showdown: Player 1 won 1060",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 folded",
    "Player 3 called 20",
    "Player 4 called 20"
  ]
}
2025-10-31 18:52:38,964 - poker_game - DEBUG - Create Session: {'id': '73c2d441-6b2c-4aa3-9402-d8f71092686b', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904358.9607897}
2025-10-31 18:52:41,332 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後、コミュニティカードが開かれる前）の状況で、あなたの手札はQ♦9♣です。ポットには70、コールするには10必要です。しかし、前のプレイヤー（Player 1）が既に80にレイズし、Player 4がそれを255までさらにレイズしました。Player 1はさらに265コールしています。この状況では、あなたのQ9オフスート（異なるスート）は、相手が強いハンドを持っている可能性が高いため、非常に弱いハンドです。相手のレイズ額とコール額を考慮すると、勝つ可能性は低いため、フォールド（降りる）のが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 181, 'promptTokenCount': 859, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 859}], 'totalTokenCount': 1040}, 'invocationId': 'e-588e1b1e-6b1c-440d-a7ad-36a5476c7923', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '0H6T16wX', 'timestamp': 1761904358.977668}]
2025-10-31 18:52:41,332 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:52:41,332 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後、コミュニティカードが開かれる前）の状況で、あなたの手札はQ♦9♣です。ポットには70、コールするには10必要です。しかし、前のプレイヤー（Player 1）が既に80にレイズし、Player 4がそれを255までさらにレイズしました。Player 1はさらに265コールしています。この状況では、あなたのQ9オフスート（異なるスート）は、相手が強いハンドを持っている可能性が高いため、非常に弱いハンドです。相手のレイズ額とコール額を考慮すると、勝つ可能性は低いため、フォールド（降りる）のが最善の選択です。"
}
```
2025-10-31 18:52:41,333 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:52:41,333 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後、コミュニティカードが開かれる前）の状況で、あなたの手札はQ♦9♣です。ポットには70、コールするには10必要です。しかし、前のプレイヤー（Player 1）が既に80にレイズし、Player 4がそれを255までさらにレイズしました。Player 1はさらに265コールしています。この状況では、あなたのQ9オフスート（異なるスート）は、相手が強いハンドを持っている可能性が高いため、非常に弱いハンドです。相手のレイズ額とコール額を考慮すると、勝つ可能性は低いため、フォールド（降りる）のが最善の選択です。"\n}\n```'
2025-10-31 18:52:41,333 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:52:41,333 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後、コミュニティカードが開かれる前）の状況で、あなたの手札はQ♦9♣です。ポットには70、コールするには10必要です。しかし、前のプレイヤー（Player 1）が既に80にレイズし、Player 4がそれを255までさらにレイズしました。Player 1はさらに265コールしています。この状況では、あなたのQ9オフスート（異なるスート）は、相手が強いハンドを持っている可能性が高いため、非常に弱いハンドです。相手のレイズ額とコール額を考慮すると、勝つ可能性は低いため、フォールド（降りる）のが最善の選択です。"\n}'
2025-10-31 18:52:41,333 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後、コミュニティカードが開かれる前）の状況で、あなたの手札はQ♦9♣です。ポットには70、コールするには10必要です。しかし、前のプレイヤー（Player 1）が既に80にレイズし、Player 4がそれを255までさらにレイズしました。Player 1はさらに265コールしています。この状況では、あなたのQ9オフスート（異なるスート）は、相手が強いハンドを持っている可能性が高いため、非常に弱いハンドです。相手のレイズ額とコール額を考慮すると、勝つ可能性は低いため、フォールド（降りる）のが最善の選択です。"
}
2025-10-31 18:52:41,333 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（最初のカードが配られた後、コミュニティカードが開かれる前）の状況で、あなたの手札はQ♦9♣です。ポットには70、コールするには10必要です。しかし、前のプレイヤー（Player 1）が既に80にレイズし、Player 4がそれを255までさらにレイズしました。Player 1はさらに265コールしています。この状況では、あなたのQ9オフスート（異なるスート）は、相手が強いハンドを持っている可能性が高いため、非常に弱いハンドです。相手のレイズ額とコール額を考慮すると、勝つ可能性は低いため、フォールド（降りる）のが最善の選択です。'}
2025-10-31 18:52:41,333 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 18:52:41,333 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 18:52:41,334 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:52:41,334 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップ（最初のカードが配られた後、コミュニティカードが開かれる前）の状況で、あなたの手札はQ♦9♣です。ポットには70、コールするには10必要です。しかし、前のプレイヤー（Player 1）が既に80にレイズし、Player 4がそれを255までさらにレイズしました。Player 1はさらに265コールしています。この状況では、あなたのQ9オフスート（異なるスート）は、相手が強いハンドを持っている可能性が高いため、非常に弱いハンドです。相手のレイズ額とコール額を考慮すると、勝つ可能性は低いため、フォールド（降りる）のが最善の選択です。
2025-10-31 18:52:41,334 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 18:52:41,335 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:52:41,335 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:41,335 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:52:41,335 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:52:41,335 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:41,335 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:41,336 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:52:41,336 - poker_game - INFO - Community cards: []
2025-10-31 18:52:41,336 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=active
2025-10-31 18:52:41,336 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:52:41,336 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:41,336 - poker_game - INFO -   P3(Agent3): chips=1550, bet=20, status=active
2025-10-31 18:52:41,337 - poker_game - INFO -   P4(Agent4): chips=855, bet=20, status=active
2025-10-31 18:52:41,337 - poker_game - INFO - ==================================================
2025-10-31 18:52:41,337 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 18:52:41,349 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:52:41,349 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:41,350 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:52:41,350 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:52:41,350 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:41,350 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:41,351 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:52:41,351 - poker_game - INFO - Community cards: []
2025-10-31 18:52:41,351 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=folded
2025-10-31 18:52:41,351 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:52:41,351 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:41,352 - poker_game - INFO -   P3(Agent3): chips=1550, bet=20, status=active
2025-10-31 18:52:41,352 - poker_game - INFO -   P4(Agent4): chips=855, bet=20, status=active
2025-10-31 18:52:41,352 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 18:52:41,352 - poker_game - INFO - ==================================================
2025-10-31 18:52:41,352 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:52:41,352 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:52:41,353 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 18:52:41,353 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:52:41,353 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:52:41,353 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:52:41,353 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:52:41,353 - poker_game - DEBUG - Player bets: [20, 20, 20], Current bet: 20, All same: True
2025-10-31 18:52:41,353 - poker_game - DEBUG - Active player indices: [1, 3, 4]
2025-10-31 18:52:41,354 - poker_game - DEBUG - Last raiser index: 1
2025-10-31 18:52:41,354 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:52:41,354 - poker_game - DEBUG - Next after last raiser 1: 3
2025-10-31 18:52:41,354 - poker_game - DEBUG - Betting continues: Current player 1 != next after raiser 3
2025-10-31 18:52:41,354 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:52:41,355 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:41,355 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:52:41,355 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:52:41,355 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:41,355 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:41,356 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:52:41,356 - poker_game - INFO - Community cards: []
2025-10-31 18:52:41,356 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=folded
2025-10-31 18:52:41,356 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:52:41,357 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:41,357 - poker_game - INFO -   P3(Agent3): chips=1550, bet=20, status=active
2025-10-31 18:52:41,357 - poker_game - INFO -   P4(Agent4): chips=855, bet=20, status=active
2025-10-31 18:52:41,357 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:52:41,357 - poker_game - INFO - ==================================================
2025-10-31 18:52:41,458 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "9♥",
    "6♣"
  ],
  "community": [],
  "your_chips": 6095,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 70,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 10,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1550,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 855,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 40)",
    "all-in (6095)"
  ],
  "history": [
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 raised to 80",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 raised to 255",
    "Player 0 folded",
    "Player 1 called 175",
    "Flop dealt: J♠, J♥, 7♦",
    "Player 4 raised to 265",
    "Player 1 called 265",
    "Turn dealt: 9♠",
    "Player 4 folded",
    "Showdown: Player 1 won 1060",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 folded",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 folded"
  ]
}
2025-10-31 18:52:41,470 - poker_game - DEBUG - Create Session: {'id': '50215cb9-1a86-4a56-8a8b-83c620e999e6', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904361.4667323}
2025-10-31 18:52:43,306 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、私の手札は9と6です。これは非常に弱い手札であり、ポットを増やす価値はありません。すでに他のプレイヤーがベットしており、コールするにはポットに見合わないと判断しました。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 87, 'promptTokenCount': 849, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 849}], 'totalTokenCount': 936}, 'invocationId': 'e-c1c4fd2f-3b68-41fd-ba16-41c4eeca62b2', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'oiyAmUMn', 'timestamp': 1761904361.479777}]
2025-10-31 18:52:43,306 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:52:43,307 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、私の手札は9と6です。これは非常に弱い手札であり、ポットを増やす価値はありません。すでに他のプレイヤーがベットしており、コールするにはポットに見合わないと判断しました。"
}
```
2025-10-31 18:52:43,307 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:52:43,307 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、私の手札は9と6です。これは非常に弱い手札であり、ポットを増やす価値はありません。すでに他のプレイヤーがベットしており、コールするにはポットに見合わないと判断しました。"\n}\n```'
2025-10-31 18:52:43,307 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:52:43,307 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、私の手札は9と6です。これは非常に弱い手札であり、ポットを増やす価値はありません。すでに他のプレイヤーがベットしており、コールするにはポットに見合わないと判断しました。"\n}'
2025-10-31 18:52:43,307 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、私の手札は9と6です。これは非常に弱い手札であり、ポットを増やす価値はありません。すでに他のプレイヤーがベットしており、コールするにはポットに見合わないと判断しました。"
}
2025-10-31 18:52:43,308 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、私の手札は9と6です。これは非常に弱い手札であり、ポットを増やす価値はありません。すでに他のプレイヤーがベットしており、コールするにはポットに見合わないと判断しました。'}
2025-10-31 18:52:43,308 - poker_game - DEBUG - [Agent1] Extracted values - action: 'fold', amount: 0
2025-10-31 18:52:43,308 - poker_game - DEBUG - [Agent1] Action 'fold' normalized - amount set to 0
2025-10-31 18:52:43,308 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:52:43,308 - poker_game - INFO - [Agent1] Successfully parsed decision: fold, 0, プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、私の手札は9と6です。これは非常に弱い手札であり、ポットを増やす価値はありません。すでに他のプレイヤーがベットしており、コールするにはポットに見合わないと判断しました。
2025-10-31 18:52:43,309 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'fold' with amount 0
2025-10-31 18:52:43,309 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:52:43,309 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:43,309 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:52:43,309 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:52:43,309 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:43,310 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:43,310 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:52:43,310 - poker_game - INFO - Community cards: []
2025-10-31 18:52:43,310 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=folded
2025-10-31 18:52:43,310 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:52:43,311 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:43,311 - poker_game - INFO -   P3(Agent3): chips=1550, bet=20, status=active
2025-10-31 18:52:43,311 - poker_game - INFO -   P4(Agent4): chips=855, bet=20, status=active
2025-10-31 18:52:43,311 - poker_game - INFO - ==================================================
2025-10-31 18:52:43,311 - poker_game - INFO - ACTION_EXECUTED: Player 1 folded
2025-10-31 18:52:43,321 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:52:43,321 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:43,321 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:52:43,322 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:52:43,322 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:43,322 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:43,322 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:43,322 - poker_game - INFO - Community cards: []
2025-10-31 18:52:43,323 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=folded
2025-10-31 18:52:43,323 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=folded
2025-10-31 18:52:43,323 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:43,323 - poker_game - INFO -   P3(Agent3): chips=1550, bet=20, status=active
2025-10-31 18:52:43,324 - poker_game - INFO -   P4(Agent4): chips=855, bet=20, status=active
2025-10-31 18:52:43,324 - poker_game - INFO - Extra: Action: Player 1 folded
2025-10-31 18:52:43,324 - poker_game - INFO - ==================================================
2025-10-31 18:52:43,325 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:52:43,325 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:52:43,326 - poker_game - DEBUG - Active players: [3, 4]
2025-10-31 18:52:43,326 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 18:52:43,326 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:52:43,326 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:52:43,326 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:52:43,326 - poker_game - DEBUG - Player bets: [20, 20], Current bet: 20, All same: True
2025-10-31 18:52:43,326 - poker_game - DEBUG - Active player indices: [3, 4]
2025-10-31 18:52:43,327 - poker_game - DEBUG - Last raiser index: 1
2025-10-31 18:52:43,327 - poker_game - DEBUG - Current player index: 3
2025-10-31 18:52:43,327 - poker_game - INFO - Betting complete: Last raiser 1 is no longer active
2025-10-31 18:52:43,327 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:52:43,327 - poker_game - INFO - Hand #11, Phase: preflop
2025-10-31 18:52:43,327 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:52:43,327 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:52:43,328 - poker_game - INFO - Last raiser: 1
2025-10-31 18:52:43,328 - poker_game - INFO - Betting round complete: True
2025-10-31 18:52:43,328 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:43,328 - poker_game - INFO - Community cards: []
2025-10-31 18:52:43,328 - poker_game - INFO -   P0(Agent0): chips=1405, bet=10, status=folded
2025-10-31 18:52:43,329 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=folded
2025-10-31 18:52:43,329 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:43,329 - poker_game - INFO -   P3(Agent3): chips=1550, bet=20, status=active
2025-10-31 18:52:43,329 - poker_game - INFO -   P4(Agent4): chips=855, bet=20, status=active
2025-10-31 18:52:43,330 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:52:43,330 - poker_game - INFO - ==================================================
2025-10-31 18:52:43,431 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:52:43,431 - poker_game - INFO - Betting round complete: True
2025-10-31 18:52:43,432 - poker_game - INFO - Remaining players: 2
2025-10-31 18:52:43,432 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:52:43,432 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:52:43,432 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:52:43,440 - poker_game - INFO - Starting new betting round
2025-10-31 18:52:43,441 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:52:43,441 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:52:43,441 - poker_game - DEBUG - Active players for new betting round: [3, 4]
2025-10-31 18:52:43,442 - poker_game - DEBUG - Dealer button: 4
2025-10-31 18:52:43,442 - poker_game - INFO - First actor: Player 3 (by phase rule), was 3
2025-10-31 18:52:43,442 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:52:43,443 - poker_game - INFO - Hand #11, Phase: flop
2025-10-31 18:52:43,443 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:52:43,443 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:52:43,445 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:43,446 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:43,447 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:43,448 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣']
2025-10-31 18:52:43,449 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:52:43,449 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:52:43,449 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:43,450 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:52:43,450 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:52:43,451 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:52:43,451 - poker_game - INFO - ==================================================
2025-10-31 18:52:43,452 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "flop",
  "your_cards": [
    "10♦",
    "A♣"
  ],
  "community": [
    "3♣",
    "Q♥",
    "J♣"
  ],
  "your_chips": 1550,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 70,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6095,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 855,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1550)"
  ],
  "history": [
    "Player 1 raised to 80",
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 raised to 255",
    "Player 0 folded",
    "Player 1 called 175",
    "Flop dealt: J♠, J♥, 7♦",
    "Player 4 raised to 265",
    "Player 1 called 265",
    "Turn dealt: 9♠",
    "Player 4 folded",
    "Showdown: Player 1 won 1060",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 folded",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 3♣, Q♥, J♣"
  ]
}
2025-10-31 18:52:43,461 - poker_game - DEBUG - Create Session: {'id': 'ba2a0f42-cb5e-4974-8b20-4f95e527c72b', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904363.4590316}
2025-10-31 18:52:46,257 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）の時点で、あなたはAハイ（エースが一番強いカード）であり、コミュニティカードには何もペアになっていません。しかし、フロップには3枚のクラブ（♣）があり、あなたのA♣とJ♣はフラッシュ（同じスートのカード5枚）の可能性を示唆しています。また、Q♥とJ♣はストレート（連続した数字のカード）の可能性も示唆しています。現在のポットサイズと、コールに必要な金額（0）を考慮すると、追加のベットなしで次のカード（ターン）を見るのが最善です。これは「チェック」と呼ばれるアクションです。相手プレイヤーがベットをしていなければ、あなたは無料で次のカードを見ることができます。しかし、この状況では「to_call: 0」と表示されているため、相手からのベットがなく、アクションの選択肢が「fold」「check」「raise (min 20)」となっているため、「check」を選択するのが適切です。なお、提示されたアクションには「call」も含まれていますが、これは「to_call」が0の場合に実質「check」と同じ意味になります。ここでは「check」が最も適切なアクションですが、「call」を選択した場合でも、amountが0であれば実質的にチェックと同じ動作となります。今回は「call」を選び、amountを0とすることで、チェックと同じ結果を得ます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 312, 'promptTokenCount': 865, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 865}], 'totalTokenCount': 1177}, 'invocationId': 'e-70766235-c716-4570-8005-6c944921563a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'CI0Lc4Wc', 'timestamp': 1761904363.471247}]
2025-10-31 18:52:46,257 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:52:46,257 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）の時点で、あなたはAハイ（エースが一番強いカード）であり、コミュニティカードには何もペアになっていません。しかし、フロップには3枚のクラブ（♣）があり、あなたのA♣とJ♣はフラッシュ（同じスートのカード5枚）の可能性を示唆しています。また、Q♥とJ♣はストレート（連続した数字のカード）の可能性も示唆しています。現在のポットサイズと、コールに必要な金額（0）を考慮すると、追加のベットなしで次のカード（ターン）を見るのが最善です。これは「チェック」と呼ばれるアクションです。相手プレイヤーがベットをしていなければ、あなたは無料で次のカードを見ることができます。しかし、この状況では「to_call: 0」と表示されているため、相手からのベットがなく、アクションの選択肢が「fold」「check」「raise (min 20)」となっているため、「check」を選択するのが適切です。なお、提示されたアクションには「call」も含まれていますが、これは「to_call」が0の場合に実質「check」と同じ意味になります。ここでは「check」が最も適切なアクションですが、「call」を選択した場合でも、amountが0であれば実質的にチェックと同じ動作となります。今回は「call」を選び、amountを0とすることで、チェックと同じ結果を得ます。"
}
```
2025-10-31 18:52:46,257 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:52:46,258 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）の時点で、あなたはAハイ（エースが一番強いカード）であり、コミュニティカードには何もペアになっていません。しかし、フロップには3枚のクラブ（♣）があり、あなたのA♣とJ♣はフラッシュ（同じスートのカード5枚）の可能性を示唆しています。また、Q♥とJ♣はストレート（連続した数字のカード）の可能性も示唆しています。現在のポットサイズと、コールに必要な金額（0）を考慮すると、追加のベットなしで次のカード（ターン）を見るのが最善です。これは「チェック」と呼ばれるアクションです。相手プレイヤーがベットをしていなければ、あなたは無料で次のカードを見ることができます。しかし、この状況では「to_call: 0」と表示されているため、相手からのベットがなく、アクションの選択肢が「fold」「check」「raise (min 20)」となっているため、「check」を選択するのが適切です。なお、提示されたアクションには「call」も含まれていますが、これは「to_call」が0の場合に実質「check」と同じ意味になります。ここでは「check」が最も適切なアクションですが、「call」を選択した場合でも、amountが0であれば実質的にチェックと同じ動作となります。今回は「call」を選び、amountを0とすることで、チェックと同じ結果を得ます。"\n}\n```'
2025-10-31 18:52:46,258 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:52:46,258 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）の時点で、あなたはAハイ（エースが一番強いカード）であり、コミュニティカードには何もペアになっていません。しかし、フロップには3枚のクラブ（♣）があり、あなたのA♣とJ♣はフラッシュ（同じスートのカード5枚）の可能性を示唆しています。また、Q♥とJ♣はストレート（連続した数字のカード）の可能性も示唆しています。現在のポットサイズと、コールに必要な金額（0）を考慮すると、追加のベットなしで次のカード（ターン）を見るのが最善です。これは「チェック」と呼ばれるアクションです。相手プレイヤーがベットをしていなければ、あなたは無料で次のカードを見ることができます。しかし、この状況では「to_call: 0」と表示されているため、相手からのベットがなく、アクションの選択肢が「fold」「check」「raise (min 20)」となっているため、「check」を選択するのが適切です。なお、提示されたアクションには「call」も含まれていますが、これは「to_call」が0の場合に実質「check」と同じ意味になります。ここでは「check」が最も適切なアクションですが、「call」を選択した場合でも、amountが0であれば実質的にチェックと同じ動作となります。今回は「call」を選び、amountを0とすることで、チェックと同じ結果を得ます。"\n}'
2025-10-31 18:52:46,258 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）の時点で、あなたはAハイ（エースが一番強いカード）であり、コミュニティカードには何もペアになっていません。しかし、フロップには3枚のクラブ（♣）があり、あなたのA♣とJ♣はフラッシュ（同じスートのカード5枚）の可能性を示唆しています。また、Q♥とJ♣はストレート（連続した数字のカード）の可能性も示唆しています。現在のポットサイズと、コールに必要な金額（0）を考慮すると、追加のベットなしで次のカード（ターン）を見るのが最善です。これは「チェック」と呼ばれるアクションです。相手プレイヤーがベットをしていなければ、あなたは無料で次のカードを見ることができます。しかし、この状況では「to_call: 0」と表示されているため、相手からのベットがなく、アクションの選択肢が「fold」「check」「raise (min 20)」となっているため、「check」を選択するのが適切です。なお、提示されたアクションには「call」も含まれていますが、これは「to_call」が0の場合に実質「check」と同じ意味になります。ここでは「check」が最も適切なアクションですが、「call」を選択した場合でも、amountが0であれば実質的にチェックと同じ動作となります。今回は「call」を選び、amountを0とすることで、チェックと同じ結果を得ます。"
}
2025-10-31 18:52:46,258 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）の時点で、あなたはAハイ（エースが一番強いカード）であり、コミュニティカードには何もペアになっていません。しかし、フロップには3枚のクラブ（♣）があり、あなたのA♣とJ♣はフラッシュ（同じスートのカード5枚）の可能性を示唆しています。また、Q♥とJ♣はストレート（連続した数字のカード）の可能性も示唆しています。現在のポットサイズと、コールに必要な金額（0）を考慮すると、追加のベットなしで次のカード（ターン）を見るのが最善です。これは「チェック」と呼ばれるアクションです。相手プレイヤーがベットをしていなければ、あなたは無料で次のカードを見ることができます。しかし、この状況では「to_call: 0」と表示されているため、相手からのベットがなく、アクションの選択肢が「fold」「check」「raise (min 20)」となっているため、「check」を選択するのが適切です。なお、提示されたアクションには「call」も含まれていますが、これは「to_call」が0の場合に実質「check」と同じ意味になります。ここでは「check」が最も適切なアクションですが、「call」を選択した場合でも、amountが0であれば実質的にチェックと同じ動作となります。今回は「call」を選び、amountを0とすることで、チェックと同じ結果を得ます。'}
2025-10-31 18:52:46,258 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 0
2025-10-31 18:52:46,258 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1550)']
2025-10-31 18:52:46,259 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:52:46,259 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 0, フロップ（最初の3枚のコミュニティカード）の時点で、あなたはAハイ（エースが一番強いカード）であり、コミュニティカードには何もペアになっていません。しかし、フロップには3枚のクラブ（♣）があり、あなたのA♣とJ♣はフラッシュ（同じスートのカード5枚）の可能性を示唆しています。また、Q♥とJ♣はストレート（連続した数字のカード）の可能性も示唆しています。現在のポットサイズと、コールに必要な金額（0）を考慮すると、追加のベットなしで次のカード（ターン）を見るのが最善です。これは「チェック」と呼ばれるアクションです。相手プレイヤーがベットをしていなければ、あなたは無料で次のカードを見ることができます。しかし、この状況では「to_call: 0」と表示されているため、相手からのベットがなく、アクションの選択肢が「fold」「check」「raise (min 20)」となっているため、「check」を選択するのが適切です。なお、提示されたアクションには「call」も含まれていますが、これは「to_call」が0の場合に実質「check」と同じ意味になります。ここでは「check」が最も適切なアクションですが、「call」を選択した場合でも、amountが0であれば実質的にチェックと同じ動作となります。今回は「call」を選び、amountを0とすることで、チェックと同じ結果を得ます。
2025-10-31 18:52:46,259 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 0
2025-10-31 18:52:46,260 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:52:46,260 - poker_game - INFO - Hand #11, Phase: flop
2025-10-31 18:52:46,260 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:52:46,260 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:52:46,261 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:46,261 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:46,261 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:46,261 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣']
2025-10-31 18:52:46,261 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:52:46,262 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:52:46,262 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:46,262 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:52:46,262 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:52:46,262 - poker_game - INFO - ==================================================
2025-10-31 18:52:46,263 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 18:52:46,272 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:52:46,272 - poker_game - INFO - Hand #11, Phase: flop
2025-10-31 18:52:46,273 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:52:46,273 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:52:46,273 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:46,273 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:46,273 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:46,274 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣']
2025-10-31 18:52:46,274 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:52:46,274 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:52:46,274 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:46,275 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:52:46,275 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:52:46,275 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 18:52:46,275 - poker_game - INFO - ==================================================
2025-10-31 18:52:46,275 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:52:46,276 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:52:46,276 - poker_game - DEBUG - Active players: [3, 4]
2025-10-31 18:52:46,276 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:52:46,276 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:52:46,276 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:52:46,277 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:52:46,277 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:52:46,277 - poker_game - DEBUG - Active player indices: [3, 4]
2025-10-31 18:52:46,277 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:52:46,277 - poker_game - DEBUG - Current player index: 4
2025-10-31 18:52:46,277 - poker_game - DEBUG - First actor index: 3
2025-10-31 18:52:46,277 - poker_game - DEBUG - Betting continues: Current player 4 != first actor 3
2025-10-31 18:52:46,277 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:52:46,278 - poker_game - INFO - Hand #11, Phase: flop
2025-10-31 18:52:46,278 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:52:46,278 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:52:46,278 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:46,279 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:46,279 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:46,280 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣']
2025-10-31 18:52:46,280 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:52:46,280 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:52:46,281 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:46,281 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:52:46,281 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:52:46,281 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:52:46,282 - poker_game - INFO - ==================================================
2025-10-31 18:52:46,384 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "flop",
  "your_cards": [
    "9♠",
    "K♥"
  ],
  "community": [
    "3♣",
    "Q♥",
    "J♣"
  ],
  "your_chips": 855,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 70,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6095,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1550,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (855)"
  ],
  "history": [
    "Player 2 folded",
    "Player 3 folded",
    "Player 4 raised to 255",
    "Player 0 folded",
    "Player 1 called 175",
    "Flop dealt: J♠, J♥, 7♦",
    "Player 4 raised to 265",
    "Player 1 called 265",
    "Turn dealt: 9♠",
    "Player 4 folded",
    "Showdown: Player 1 won 1060",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 folded",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 3♣, Q♥, J♣",
    "Player 3 checked"
  ]
}
2025-10-31 18:52:46,402 - poker_game - DEBUG - Create Session: {'id': '4ab9497e-f642-4ffc-9641-cbb96dd34ecc', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904366.397037}
2025-10-31 18:52:56,415 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:52:59,717 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_7LbMsvJoEGO7bWRpjK2HA137', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1167, 'totalTokenCount': 1184}, 'invocationId': 'e-568064d6-d164-488b-8266-901d5eba7117', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '1PmlUHDb', 'timestamp': 1761904366.414922}, {'content': {'parts': [{'functionResponse': {'id': 'call_7LbMsvJoEGO7bWRpjK2HA137', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-568064d6-d164-488b-8266-901d5eba7117', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'LDD1ewyg', 'timestamp': 1761904367.334037}, {'content': {'parts': [{'functionCall': {'id': 'call_B7zWDWXnS93CG7xSFn8hJzmZ', 'args': {'game_state': {'your_id': 4, 'phase': 'flop', 'your_cards': ['9♠', 'K♥'], 'community': ['3♣', 'Q♥', 'J♣'], 'your_chips': 855, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 20, 'pot': 70, 'to_call': 0, 'dealer_button': 4, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1405, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 6095, 'bet': 0, 'status': 'folded'}, {'id': 2, 'chips': 25, 'bet': 0, 'status': 'folded'}, {'id': 3, 'chips': 1550, 'bet': 0, 'status': 'active'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (855)'], 'history': ['Player 2 folded', 'Player 3 folded', 'Player 4 raised to 255', 'Player 0 folded', 'Player 1 called 175', 'Flop dealt: J♠, J♥, 7♦', 'Player 4 raised to 265', 'Player 1 called 265', 'Turn dealt: 9♠', 'Player 4 folded', 'Showdown: Player 1 won 1060', 'Player 0 posted small blind 10', 'Player 1 posted big blind 20', 'Player 2 folded', 'Player 3 called 20', 'Player 4 called 20', 'Player 0 folded', 'Player 1 folded', 'Flop dealt: 3♣, Q♥, J♣', 'Player 3 checked']}, 'call_amount': 0, 'pot_after_call': 70, 'equity': 0.4}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 374, 'promptTokenCount': 1691, 'totalTokenCount': 2065}, 'invocationId': 'e-568064d6-d164-488b-8266-901d5eba7117', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'HnLgL47a', 'timestamp': 1761904367.339074}, {'content': {'parts': [{'functionResponse': {'id': 'call_B7zWDWXnS93CG7xSFn8hJzmZ', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（28.00(ポットに対して40.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'e-568064d6-d164-488b-8266-901d5eba7117', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'yilzJz1X', 'timestamp': 1761904378.182213}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い（28.00(ポットに対して40.00%）ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 38, 'promptTokenCount': 2100, 'totalTokenCount': 2138}, 'invocationId': 'e-568064d6-d164-488b-8266-901d5eba7117', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'WdWSloa8', 'timestamp': 1761904378.184815}]
2025-10-31 18:52:59,718 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:52:59,718 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い（28.00(ポットに対して40.00%）ため、チェックします"}
2025-10-31 18:52:59,718 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:52:59,719 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い（28.00(ポットに対して40.00%）ため、チェックします"}'
2025-10-31 18:52:59,719 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:52:59,719 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い（28.00(ポットに対して40.00%）ため、チェックします"}
2025-10-31 18:52:59,719 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（28.00(ポットに対して40.00%）ため、チェックします'}
2025-10-31 18:52:59,719 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 18:52:59,719 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 18:52:59,719 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:52:59,720 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い（28.00(ポットに対して40.00%）ため、チェックします
2025-10-31 18:52:59,720 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 18:52:59,721 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:52:59,721 - poker_game - INFO - Hand #11, Phase: flop
2025-10-31 18:52:59,721 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:52:59,722 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:52:59,722 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:59,722 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:59,723 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:59,723 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣']
2025-10-31 18:52:59,723 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:52:59,723 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:52:59,724 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:59,724 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:52:59,724 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:52:59,724 - poker_game - INFO - ==================================================
2025-10-31 18:52:59,725 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 18:52:59,736 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:52:59,736 - poker_game - INFO - Hand #11, Phase: flop
2025-10-31 18:52:59,737 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:52:59,737 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:52:59,738 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:59,738 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:59,739 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:59,740 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣']
2025-10-31 18:52:59,740 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:52:59,741 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:52:59,741 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:59,742 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:52:59,742 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:52:59,742 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 18:52:59,743 - poker_game - INFO - ==================================================
2025-10-31 18:52:59,743 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:52:59,744 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:52:59,744 - poker_game - DEBUG - Active players: [3, 4]
2025-10-31 18:52:59,744 - poker_game - INFO - Advanced from player 4 to player 3 (seat order)
2025-10-31 18:52:59,744 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:52:59,745 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:52:59,745 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:52:59,745 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:52:59,745 - poker_game - DEBUG - Active player indices: [3, 4]
2025-10-31 18:52:59,746 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:52:59,746 - poker_game - DEBUG - Current player index: 3
2025-10-31 18:52:59,746 - poker_game - DEBUG - First actor index: 3
2025-10-31 18:52:59,746 - poker_game - INFO - Betting complete: Back to first actor 3 (all players have acted)
2025-10-31 18:52:59,746 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:52:59,746 - poker_game - INFO - Hand #11, Phase: flop
2025-10-31 18:52:59,747 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:52:59,747 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:52:59,748 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:59,748 - poker_game - INFO - Betting round complete: True
2025-10-31 18:52:59,749 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:59,749 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣']
2025-10-31 18:52:59,749 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:52:59,750 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:52:59,750 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:59,750 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:52:59,751 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:52:59,751 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:52:59,751 - poker_game - INFO - ==================================================
2025-10-31 18:52:59,856 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:52:59,857 - poker_game - INFO - Betting round complete: True
2025-10-31 18:52:59,857 - poker_game - INFO - Remaining players: 2
2025-10-31 18:52:59,857 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:52:59,857 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:52:59,858 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 18:52:59,867 - poker_game - INFO - Starting new betting round
2025-10-31 18:52:59,868 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:52:59,868 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:52:59,869 - poker_game - DEBUG - Active players for new betting round: [3, 4]
2025-10-31 18:52:59,869 - poker_game - DEBUG - Dealer button: 4
2025-10-31 18:52:59,869 - poker_game - INFO - First actor: Player 3 (by phase rule), was 3
2025-10-31 18:52:59,870 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:52:59,870 - poker_game - INFO - Hand #11, Phase: turn
2025-10-31 18:52:59,871 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:52:59,871 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:52:59,872 - poker_game - INFO - Last raiser: None
2025-10-31 18:52:59,872 - poker_game - INFO - Betting round complete: False
2025-10-31 18:52:59,872 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:52:59,873 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠']
2025-10-31 18:52:59,874 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:52:59,875 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:52:59,876 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:52:59,877 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:52:59,877 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:52:59,878 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 18:52:59,878 - poker_game - INFO - ==================================================
2025-10-31 18:52:59,879 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "turn",
  "your_cards": [
    "10♦",
    "A♣"
  ],
  "community": [
    "3♣",
    "Q♥",
    "J♣",
    "A♠"
  ],
  "your_chips": 1550,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 70,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6095,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 855,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1550)"
  ],
  "history": [
    "Player 4 raised to 255",
    "Player 0 folded",
    "Player 1 called 175",
    "Flop dealt: J♠, J♥, 7♦",
    "Player 4 raised to 265",
    "Player 1 called 265",
    "Turn dealt: 9♠",
    "Player 4 folded",
    "Showdown: Player 1 won 1060",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 folded",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 3♣, Q♥, J♣",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: A♠"
  ]
}
2025-10-31 18:52:59,891 - poker_game - DEBUG - Create Session: {'id': '78ac5f4e-52f6-41dc-864f-d7455db1831b', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904379.888413}
2025-10-31 18:53:02,409 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在のターン（Turn）フェーズで、あなたの手札はA♦ 10♣、コミュニティカードは3♣ Q♥ J♣ A♠です。あなたの手札は、A♠があることで「ワンペア（one pair）」、つまりエース（Ace）でペアができています。これは悪くないハンドですが、コミュニティカードにはJ♣もあるため、相手が2ペア（two pair）やスリーカード（three of a kind）を持っている可能性もあります。しかし、あなたはまだベットしておらず（your_bet_this_round: 0）、コールすべき金額もありません（to_call: 0）。他のプレイヤー（Player 4）もチェックしているため、リスクを冒さずに次のカード（リバー：River）を見るのが最善です。これは「チェック（check）」と呼ばれ、ベットせずに次のアクションを待つことです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 211, 'promptTokenCount': 868, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 868}], 'totalTokenCount': 1079}, 'invocationId': 'e-542efe13-3245-4d11-8450-40fd29ccb099', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'YtrG9rrD', 'timestamp': 1761904379.903389}]
2025-10-31 18:53:02,410 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:53:02,410 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "現在のターン（Turn）フェーズで、あなたの手札はA♦ 10♣、コミュニティカードは3♣ Q♥ J♣ A♠です。あなたの手札は、A♠があることで「ワンペア（one pair）」、つまりエース（Ace）でペアができています。これは悪くないハンドですが、コミュニティカードにはJ♣もあるため、相手が2ペア（two pair）やスリーカード（three of a kind）を持っている可能性もあります。しかし、あなたはまだベットしておらず（your_bet_this_round: 0）、コールすべき金額もありません（to_call: 0）。他のプレイヤー（Player 4）もチェックしているため、リスクを冒さずに次のカード（リバー：River）を見るのが最善です。これは「チェック（check）」と呼ばれ、ベットせずに次のアクションを待つことです。"
}
```
2025-10-31 18:53:02,411 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:53:02,413 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在のターン（Turn）フェーズで、あなたの手札はA♦ 10♣、コミュニティカードは3♣ Q♥ J♣ A♠です。あなたの手札は、A♠があることで「ワンペア（one pair）」、つまりエース（Ace）でペアができています。これは悪くないハンドですが、コミュニティカードにはJ♣もあるため、相手が2ペア（two pair）やスリーカード（three of a kind）を持っている可能性もあります。しかし、あなたはまだベットしておらず（your_bet_this_round: 0）、コールすべき金額もありません（to_call: 0）。他のプレイヤー（Player 4）もチェックしているため、リスクを冒さずに次のカード（リバー：River）を見るのが最善です。これは「チェック（check）」と呼ばれ、ベットせずに次のアクションを待つことです。"\n}\n```'
2025-10-31 18:53:02,413 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:53:02,413 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在のターン（Turn）フェーズで、あなたの手札はA♦ 10♣、コミュニティカードは3♣ Q♥ J♣ A♠です。あなたの手札は、A♠があることで「ワンペア（one pair）」、つまりエース（Ace）でペアができています。これは悪くないハンドですが、コミュニティカードにはJ♣もあるため、相手が2ペア（two pair）やスリーカード（three of a kind）を持っている可能性もあります。しかし、あなたはまだベットしておらず（your_bet_this_round: 0）、コールすべき金額もありません（to_call: 0）。他のプレイヤー（Player 4）もチェックしているため、リスクを冒さずに次のカード（リバー：River）を見るのが最善です。これは「チェック（check）」と呼ばれ、ベットせずに次のアクションを待つことです。"\n}'
2025-10-31 18:53:02,414 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "現在のターン（Turn）フェーズで、あなたの手札はA♦ 10♣、コミュニティカードは3♣ Q♥ J♣ A♠です。あなたの手札は、A♠があることで「ワンペア（one pair）」、つまりエース（Ace）でペアができています。これは悪くないハンドですが、コミュニティカードにはJ♣もあるため、相手が2ペア（two pair）やスリーカード（three of a kind）を持っている可能性もあります。しかし、あなたはまだベットしておらず（your_bet_this_round: 0）、コールすべき金額もありません（to_call: 0）。他のプレイヤー（Player 4）もチェックしているため、リスクを冒さずに次のカード（リバー：River）を見るのが最善です。これは「チェック（check）」と呼ばれ、ベットせずに次のアクションを待つことです。"
}
2025-10-31 18:53:02,414 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '現在のターン（Turn）フェーズで、あなたの手札はA♦ 10♣、コミュニティカードは3♣ Q♥ J♣ A♠です。あなたの手札は、A♠があることで「ワンペア（one pair）」、つまりエース（Ace）でペアができています。これは悪くないハンドですが、コミュニティカードにはJ♣もあるため、相手が2ペア（two pair）やスリーカード（three of a kind）を持っている可能性もあります。しかし、あなたはまだベットしておらず（your_bet_this_round: 0）、コールすべき金額もありません（to_call: 0）。他のプレイヤー（Player 4）もチェックしているため、リスクを冒さずに次のカード（リバー：River）を見るのが最善です。これは「チェック（check）」と呼ばれ、ベットせずに次のアクションを待つことです。'}
2025-10-31 18:53:02,414 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 18:53:02,414 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 18:53:02,414 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:53:02,414 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, 現在のターン（Turn）フェーズで、あなたの手札はA♦ 10♣、コミュニティカードは3♣ Q♥ J♣ A♠です。あなたの手札は、A♠があることで「ワンペア（one pair）」、つまりエース（Ace）でペアができています。これは悪くないハンドですが、コミュニティカードにはJ♣もあるため、相手が2ペア（two pair）やスリーカード（three of a kind）を持っている可能性もあります。しかし、あなたはまだベットしておらず（your_bet_this_round: 0）、コールすべき金額もありません（to_call: 0）。他のプレイヤー（Player 4）もチェックしているため、リスクを冒さずに次のカード（リバー：River）を見るのが最善です。これは「チェック（check）」と呼ばれ、ベットせずに次のアクションを待つことです。
2025-10-31 18:53:02,415 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 18:53:02,416 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:53:02,416 - poker_game - INFO - Hand #11, Phase: turn
2025-10-31 18:53:02,416 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:53:02,417 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:53:02,417 - poker_game - INFO - Last raiser: None
2025-10-31 18:53:02,418 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:02,418 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:02,418 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠']
2025-10-31 18:53:02,419 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:02,419 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:02,420 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:02,420 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:53:02,420 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:53:02,421 - poker_game - INFO - ==================================================
2025-10-31 18:53:02,421 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 18:53:02,436 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:53:02,436 - poker_game - INFO - Hand #11, Phase: turn
2025-10-31 18:53:02,437 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:53:02,437 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:53:02,438 - poker_game - INFO - Last raiser: None
2025-10-31 18:53:02,438 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:02,438 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:02,439 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠']
2025-10-31 18:53:02,439 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:02,440 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:02,440 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:02,440 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:53:02,441 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:53:02,441 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 18:53:02,442 - poker_game - INFO - ==================================================
2025-10-31 18:53:02,442 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:53:02,443 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:53:02,443 - poker_game - DEBUG - Active players: [3, 4]
2025-10-31 18:53:02,443 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:53:02,443 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:53:02,444 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:53:02,444 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:53:02,444 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:53:02,445 - poker_game - DEBUG - Active player indices: [3, 4]
2025-10-31 18:53:02,445 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:53:02,445 - poker_game - DEBUG - Current player index: 4
2025-10-31 18:53:02,445 - poker_game - DEBUG - First actor index: 3
2025-10-31 18:53:02,445 - poker_game - DEBUG - Betting continues: Current player 4 != first actor 3
2025-10-31 18:53:02,445 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:53:02,446 - poker_game - INFO - Hand #11, Phase: turn
2025-10-31 18:53:02,446 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:53:02,447 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:53:02,447 - poker_game - INFO - Last raiser: None
2025-10-31 18:53:02,448 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:02,448 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:02,449 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠']
2025-10-31 18:53:02,449 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:02,450 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:02,450 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:02,451 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:53:02,452 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:53:02,452 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:53:02,452 - poker_game - INFO - ==================================================
2025-10-31 18:53:04,956 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "turn",
  "your_cards": [
    "9♠",
    "K♥"
  ],
  "community": [
    "3♣",
    "Q♥",
    "J♣",
    "A♠"
  ],
  "your_chips": 855,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 70,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6095,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1550,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (855)"
  ],
  "history": [
    "Player 0 folded",
    "Player 1 called 175",
    "Flop dealt: J♠, J♥, 7♦",
    "Player 4 raised to 265",
    "Player 1 called 265",
    "Turn dealt: 9♠",
    "Player 4 folded",
    "Showdown: Player 1 won 1060",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 folded",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 3♣, Q♥, J♣",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: A♠",
    "Player 3 checked"
  ]
}
2025-10-31 18:53:04,972 - poker_game - DEBUG - Create Session: {'id': 'd0df29e4-dbe3-4427-a062-edd9c81ff02e', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904384.9680307}
2025-10-31 18:53:10,150 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_Lfi0Y6C0cD6JjsHAmZM3eU0B', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1171, 'totalTokenCount': 1188}, 'invocationId': 'e-5f4f8b6e-0a2a-450d-a5a9-41c9bb2075be', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'xsojmOSS', 'timestamp': 1761904384.986494}, {'content': {'parts': [{'functionResponse': {'id': 'call_Lfi0Y6C0cD6JjsHAmZM3eU0B', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-5f4f8b6e-0a2a-450d-a5a9-41c9bb2075be', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'H8WiLSHO', 'timestamp': 1761904380.892889}, {'content': {'parts': [{'functionCall': {'id': 'call_M7z2LmYGJhKLjDiEujUihXTm', 'args': {'game_state': {'your_id': 4, 'phase': 'turn', 'your_cards': ['9♠', 'K♥'], 'community': ['3♣', 'Q♥', 'J♣', 'A♠'], 'your_chips': 855, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 20, 'pot': 70, 'to_call': 0, 'dealer_button': 4, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1405, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 6095, 'bet': 0, 'status': 'folded'}, {'id': 2, 'chips': 25, 'bet': 0, 'status': 'folded'}, {'id': 3, 'chips': 1550, 'bet': 0, 'status': 'active'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (855)'], 'history': ['Player 0 folded', 'Player 1 called 175', 'Flop dealt: J♠, J♥, 7♦', 'Player 4 raised to 265', 'Player 1 called 265', 'Turn dealt: 9♠', 'Player 4 folded', 'Showdown: Player 1 won 1060', 'Player 0 posted small blind 10', 'Player 1 posted big blind 20', 'Player 2 folded', 'Player 3 called 20', 'Player 4 called 20', 'Player 0 folded', 'Player 1 folded', 'Flop dealt: 3♣, Q♥, J♣', 'Player 3 checked', 'Player 4 checked', 'Turn dealt: A♠', 'Player 3 checked']}, 'call_amount': 0, 'pot_after_call': 70, 'equity': 0.4}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 360, 'promptTokenCount': 1695, 'totalTokenCount': 2055}, 'invocationId': 'e-5f4f8b6e-0a2a-450d-a5a9-41c9bb2075be', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'MHhJPUbt', 'timestamp': 1761904380.895117}, {'content': {'parts': [{'functionResponse': {'id': 'call_M7z2LmYGJhKLjDiEujUihXTm', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（28.00(ポットに対して40.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'e-5f4f8b6e-0a2a-450d-a5a9-41c9bb2075be', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'TbVgpuWq', 'timestamp': 1761904388.673453}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い（28.00(ポットに対して40.00%）ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 38, 'promptTokenCount': 2106, 'totalTokenCount': 2144}, 'invocationId': 'e-5f4f8b6e-0a2a-450d-a5a9-41c9bb2075be', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'F40oM4td', 'timestamp': 1761904388.678929}]
2025-10-31 18:53:10,151 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:53:10,151 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い（28.00(ポットに対して40.00%）ため、チェックします"}
2025-10-31 18:53:10,152 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:53:10,152 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い（28.00(ポットに対して40.00%）ため、チェックします"}'
2025-10-31 18:53:10,153 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:53:10,153 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い（28.00(ポットに対して40.00%）ため、チェックします"}
2025-10-31 18:53:10,153 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（28.00(ポットに対して40.00%）ため、チェックします'}
2025-10-31 18:53:10,153 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 18:53:10,153 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 18:53:10,153 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:53:10,153 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い（28.00(ポットに対して40.00%）ため、チェックします
2025-10-31 18:53:10,155 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 18:53:10,155 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:53:10,156 - poker_game - INFO - Hand #11, Phase: turn
2025-10-31 18:53:10,156 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:53:10,157 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:53:10,158 - poker_game - INFO - Last raiser: None
2025-10-31 18:53:10,158 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:10,159 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:10,161 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠']
2025-10-31 18:53:10,161 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:10,163 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:10,164 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:10,164 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:53:10,165 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:53:10,166 - poker_game - INFO - ==================================================
2025-10-31 18:53:10,167 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 18:53:10,180 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:53:10,181 - poker_game - INFO - Hand #11, Phase: turn
2025-10-31 18:53:10,181 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:53:10,182 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:53:10,182 - poker_game - INFO - Last raiser: None
2025-10-31 18:53:10,183 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:10,183 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:10,184 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠']
2025-10-31 18:53:10,184 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:10,185 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:10,185 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:10,185 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:53:10,186 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:53:10,186 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 18:53:10,187 - poker_game - INFO - ==================================================
2025-10-31 18:53:10,187 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:53:10,188 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:53:10,188 - poker_game - DEBUG - Active players: [3, 4]
2025-10-31 18:53:10,189 - poker_game - INFO - Advanced from player 4 to player 3 (seat order)
2025-10-31 18:53:10,189 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:53:10,190 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:53:10,190 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:53:10,191 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:53:10,191 - poker_game - DEBUG - Active player indices: [3, 4]
2025-10-31 18:53:10,191 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:53:10,192 - poker_game - DEBUG - Current player index: 3
2025-10-31 18:53:10,192 - poker_game - DEBUG - First actor index: 3
2025-10-31 18:53:10,192 - poker_game - INFO - Betting complete: Back to first actor 3 (all players have acted)
2025-10-31 18:53:10,192 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:53:10,193 - poker_game - INFO - Hand #11, Phase: turn
2025-10-31 18:53:10,193 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:53:10,194 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:53:10,194 - poker_game - INFO - Last raiser: None
2025-10-31 18:53:10,195 - poker_game - INFO - Betting round complete: True
2025-10-31 18:53:10,197 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:10,198 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠']
2025-10-31 18:53:10,199 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:10,199 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:10,200 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:10,200 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:53:10,201 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:53:10,201 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:53:10,201 - poker_game - INFO - ==================================================
2025-10-31 18:53:10,303 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 18:53:10,303 - poker_game - INFO - Betting round complete: True
2025-10-31 18:53:10,304 - poker_game - INFO - Remaining players: 2
2025-10-31 18:53:10,305 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:53:10,305 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:53:10,305 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 18:53:10,317 - poker_game - INFO - Starting new betting round
2025-10-31 18:53:10,317 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:53:10,317 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:53:10,318 - poker_game - DEBUG - Active players for new betting round: [3, 4]
2025-10-31 18:53:10,318 - poker_game - DEBUG - Dealer button: 4
2025-10-31 18:53:10,318 - poker_game - INFO - First actor: Player 3 (by phase rule), was 3
2025-10-31 18:53:10,319 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:53:10,319 - poker_game - INFO - Hand #11, Phase: river
2025-10-31 18:53:10,320 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:53:10,320 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:53:10,320 - poker_game - INFO - Last raiser: None
2025-10-31 18:53:10,321 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:10,321 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:10,322 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠', 'K♦']
2025-10-31 18:53:10,322 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:10,322 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:10,323 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:10,323 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:53:10,323 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:53:10,324 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 18:53:10,324 - poker_game - INFO - ==================================================
2025-10-31 18:53:10,327 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "river",
  "your_cards": [
    "10♦",
    "A♣"
  ],
  "community": [
    "3♣",
    "Q♥",
    "J♣",
    "A♠",
    "K♦"
  ],
  "your_chips": 1550,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 70,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6095,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 855,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1550)"
  ],
  "history": [
    "Flop dealt: J♠, J♥, 7♦",
    "Player 4 raised to 265",
    "Player 1 called 265",
    "Turn dealt: 9♠",
    "Player 4 folded",
    "Showdown: Player 1 won 1060",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 folded",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 3♣, Q♥, J♣",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: A♠",
    "Player 3 checked",
    "Player 4 checked",
    "River dealt: K♦"
  ]
}
2025-10-31 18:53:10,341 - poker_game - DEBUG - Create Session: {'id': '6af36fc2-45b6-401c-8eeb-479df9efa82a', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904390.3377619}
2025-10-31 18:53:12,626 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のカード）が配られた段階で、あなたの手札はA♦ K♦で、コミュニティカードのK♦と合わせてツーペア（AのペアとKのペア）が完成しています。しかし、コミュニティカードにはJ♣、Q♥、K♦、A♠、3♣とあり、ストレート（J-Q-K-A）が完成する可能性があり、相手がそれを持っている場合、あなたのツーペアでは勝てません。また、相手のプレイヤー（Player 4）はアクティブですが、これまでの履歴では様子見のプレイが多く、ベット額も少ないため、強力なハンドを持っている可能性は低いと判断できます。ポットサイズ（70）とあなたのチップ量（1550）を考慮すると、現状では「チェック」（ベットせずに次のプレイヤーにターンを譲る）が最も安全な選択です。もし相手がベットしてきた場合は、その額を見てからコールするかフォールドするかを判断します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 234, 'promptTokenCount': 866, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 866}], 'totalTokenCount': 1100}, 'invocationId': 'e-5b966e3c-9905-40be-9f70-0a72ffdf04fd', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Ol2Tvddv', 'timestamp': 1761904390.355216}]
2025-10-31 18:53:12,626 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:53:12,626 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最後のカード）が配られた段階で、あなたの手札はA♦ K♦で、コミュニティカードのK♦と合わせてツーペア（AのペアとKのペア）が完成しています。しかし、コミュニティカードにはJ♣、Q♥、K♦、A♠、3♣とあり、ストレート（J-Q-K-A）が完成する可能性があり、相手がそれを持っている場合、あなたのツーペアでは勝てません。また、相手のプレイヤー（Player 4）はアクティブですが、これまでの履歴では様子見のプレイが多く、ベット額も少ないため、強力なハンドを持っている可能性は低いと判断できます。ポットサイズ（70）とあなたのチップ量（1550）を考慮すると、現状では「チェック」（ベットせずに次のプレイヤーにターンを譲る）が最も安全な選択です。もし相手がベットしてきた場合は、その額を見てからコールするかフォールドするかを判断します。"
}
```
2025-10-31 18:53:12,626 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:53:12,627 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のカード）が配られた段階で、あなたの手札はA♦ K♦で、コミュニティカードのK♦と合わせてツーペア（AのペアとKのペア）が完成しています。しかし、コミュニティカードにはJ♣、Q♥、K♦、A♠、3♣とあり、ストレート（J-Q-K-A）が完成する可能性があり、相手がそれを持っている場合、あなたのツーペアでは勝てません。また、相手のプレイヤー（Player 4）はアクティブですが、これまでの履歴では様子見のプレイが多く、ベット額も少ないため、強力なハンドを持っている可能性は低いと判断できます。ポットサイズ（70）とあなたのチップ量（1550）を考慮すると、現状では「チェック」（ベットせずに次のプレイヤーにターンを譲る）が最も安全な選択です。もし相手がベットしてきた場合は、その額を見てからコールするかフォールドするかを判断します。"\n}\n```'
2025-10-31 18:53:12,627 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:53:12,627 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のカード）が配られた段階で、あなたの手札はA♦ K♦で、コミュニティカードのK♦と合わせてツーペア（AのペアとKのペア）が完成しています。しかし、コミュニティカードにはJ♣、Q♥、K♦、A♠、3♣とあり、ストレート（J-Q-K-A）が完成する可能性があり、相手がそれを持っている場合、あなたのツーペアでは勝てません。また、相手のプレイヤー（Player 4）はアクティブですが、これまでの履歴では様子見のプレイが多く、ベット額も少ないため、強力なハンドを持っている可能性は低いと判断できます。ポットサイズ（70）とあなたのチップ量（1550）を考慮すると、現状では「チェック」（ベットせずに次のプレイヤーにターンを譲る）が最も安全な選択です。もし相手がベットしてきた場合は、その額を見てからコールするかフォールドするかを判断します。"\n}'
2025-10-31 18:53:12,627 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最後のカード）が配られた段階で、あなたの手札はA♦ K♦で、コミュニティカードのK♦と合わせてツーペア（AのペアとKのペア）が完成しています。しかし、コミュニティカードにはJ♣、Q♥、K♦、A♠、3♣とあり、ストレート（J-Q-K-A）が完成する可能性があり、相手がそれを持っている場合、あなたのツーペアでは勝てません。また、相手のプレイヤー（Player 4）はアクティブですが、これまでの履歴では様子見のプレイが多く、ベット額も少ないため、強力なハンドを持っている可能性は低いと判断できます。ポットサイズ（70）とあなたのチップ量（1550）を考慮すると、現状では「チェック」（ベットせずに次のプレイヤーにターンを譲る）が最も安全な選択です。もし相手がベットしてきた場合は、その額を見てからコールするかフォールドするかを判断します。"
}
2025-10-31 18:53:12,627 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最後のカード）が配られた段階で、あなたの手札はA♦ K♦で、コミュニティカードのK♦と合わせてツーペア（AのペアとKのペア）が完成しています。しかし、コミュニティカードにはJ♣、Q♥、K♦、A♠、3♣とあり、ストレート（J-Q-K-A）が完成する可能性があり、相手がそれを持っている場合、あなたのツーペアでは勝てません。また、相手のプレイヤー（Player 4）はアクティブですが、これまでの履歴では様子見のプレイが多く、ベット額も少ないため、強力なハンドを持っている可能性は低いと判断できます。ポットサイズ（70）とあなたのチップ量（1550）を考慮すると、現状では「チェック」（ベットせずに次のプレイヤーにターンを譲る）が最も安全な選択です。もし相手がベットしてきた場合は、その額を見てからコールするかフォールドするかを判断します。'}
2025-10-31 18:53:12,627 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 18:53:12,627 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 18:53:12,627 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:53:12,627 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, リバー（最後のカード）が配られた段階で、あなたの手札はA♦ K♦で、コミュニティカードのK♦と合わせてツーペア（AのペアとKのペア）が完成しています。しかし、コミュニティカードにはJ♣、Q♥、K♦、A♠、3♣とあり、ストレート（J-Q-K-A）が完成する可能性があり、相手がそれを持っている場合、あなたのツーペアでは勝てません。また、相手のプレイヤー（Player 4）はアクティブですが、これまでの履歴では様子見のプレイが多く、ベット額も少ないため、強力なハンドを持っている可能性は低いと判断できます。ポットサイズ（70）とあなたのチップ量（1550）を考慮すると、現状では「チェック」（ベットせずに次のプレイヤーにターンを譲る）が最も安全な選択です。もし相手がベットしてきた場合は、その額を見てからコールするかフォールドするかを判断します。
2025-10-31 18:53:12,628 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 18:53:12,628 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:53:12,629 - poker_game - INFO - Hand #11, Phase: river
2025-10-31 18:53:12,629 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:53:12,629 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:53:12,629 - poker_game - INFO - Last raiser: None
2025-10-31 18:53:12,629 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:12,629 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:12,630 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠', 'K♦']
2025-10-31 18:53:12,630 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:12,630 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:12,630 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:12,631 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:53:12,631 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:53:12,631 - poker_game - INFO - ==================================================
2025-10-31 18:53:12,631 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 18:53:12,639 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:53:12,639 - poker_game - INFO - Hand #11, Phase: river
2025-10-31 18:53:12,639 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:53:12,640 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:53:12,640 - poker_game - INFO - Last raiser: None
2025-10-31 18:53:12,640 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:12,641 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:12,641 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠', 'K♦']
2025-10-31 18:53:12,642 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:12,642 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:12,642 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:12,643 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:53:12,643 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:53:12,643 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 18:53:12,644 - poker_game - INFO - ==================================================
2025-10-31 18:53:12,644 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:53:12,644 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:53:12,645 - poker_game - DEBUG - Active players: [3, 4]
2025-10-31 18:53:12,645 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:53:12,645 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:53:12,645 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:53:12,645 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:53:12,645 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:53:12,645 - poker_game - DEBUG - Active player indices: [3, 4]
2025-10-31 18:53:12,645 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:53:12,645 - poker_game - DEBUG - Current player index: 4
2025-10-31 18:53:12,645 - poker_game - DEBUG - First actor index: 3
2025-10-31 18:53:12,646 - poker_game - DEBUG - Betting continues: Current player 4 != first actor 3
2025-10-31 18:53:12,646 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:53:12,646 - poker_game - INFO - Hand #11, Phase: river
2025-10-31 18:53:12,646 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:53:12,646 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:53:12,646 - poker_game - INFO - Last raiser: None
2025-10-31 18:53:12,647 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:12,647 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:12,647 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠', 'K♦']
2025-10-31 18:53:12,647 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:12,647 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:12,648 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:12,648 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:53:12,648 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:53:12,648 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:53:12,649 - poker_game - INFO - ==================================================
2025-10-31 18:53:12,750 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "river",
  "your_cards": [
    "9♠",
    "K♥"
  ],
  "community": [
    "3♣",
    "Q♥",
    "J♣",
    "A♠",
    "K♦"
  ],
  "your_chips": 855,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 70,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6095,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1550,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (855)"
  ],
  "history": [
    "Player 4 raised to 265",
    "Player 1 called 265",
    "Turn dealt: 9♠",
    "Player 4 folded",
    "Showdown: Player 1 won 1060",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 folded",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 3♣, Q♥, J♣",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: A♠",
    "Player 3 checked",
    "Player 4 checked",
    "River dealt: K♦",
    "Player 3 checked"
  ]
}
2025-10-31 18:53:12,760 - poker_game - DEBUG - Create Session: {'id': 'e6e615bc-b9ff-4fe4-acf8-ee279dbf19be', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904392.758868}
2025-10-31 18:53:22,795 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:53:26,247 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_FSuFpzNeB1YGwtbznkspnZPh', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1165, 'totalTokenCount': 1182}, 'invocationId': 'e-8cd709d2-1200-4cdd-b730-a7d593a30376', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'vcESBRt8', 'timestamp': 1761904392.771756}, {'content': {'parts': [{'functionResponse': {'id': 'call_FSuFpzNeB1YGwtbznkspnZPh', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-8cd709d2-1200-4cdd-b730-a7d593a30376', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'pGHFL1AC', 'timestamp': 1761904393.696677}, {'content': {'parts': [{'functionCall': {'id': 'call_dWTXkI4njGbPg2duOApKBIai', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1689, 'totalTokenCount': 1709}, 'invocationId': 'e-8cd709d2-1200-4cdd-b730-a7d593a30376', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'qNINKFFW', 'timestamp': 1761904393.698143}, {'content': {'parts': [{'functionResponse': {'id': 'call_dWTXkI4njGbPg2duOApKBIai', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-8cd709d2-1200-4cdd-b730-a7d593a30376', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': '3zbxWI5H', 'timestamp': 1761904394.746678}, {'content': {'parts': [{'functionCall': {'id': 'call_J2SH7F2LyjsaIIZPjOqxVt2x', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1251, 'totalTokenCount': 1268}, 'invocationId': 'e-8cd709d2-1200-4cdd-b730-a7d593a30376', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'HIVUbjsE', 'timestamp': 1761904394.74818}, {'content': {'parts': [{'functionResponse': {'id': 'call_J2SH7F2LyjsaIIZPjOqxVt2x', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-8cd709d2-1200-4cdd-b730-a7d593a30376', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'ovpx0qMi', 'timestamp': 1761904396.486146}, {'content': {'parts': [{'functionCall': {'id': 'call_4x75u9Eo4sac5vzknkKI7Uh9', 'args': {'game_state': {'your_id': 4, 'phase': 'river', 'your_cards': ['9♠', 'K♥'], 'community': ['3♣', 'Q♥', 'J♣', 'A♠', 'K♦'], 'your_chips': 855, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 20, 'pot': 70, 'to_call': 0, 'dealer_button': 4, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1405, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 6095, 'bet': 0, 'status': 'folded'}, {'id': 2, 'chips': 25, 'bet': 0, 'status': 'folded'}, {'id': 3, 'chips': 1550, 'bet': 0, 'status': 'active'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (855)'], 'history': ['Player 4 raised to 265', 'Player 1 called 265', 'Turn dealt: 9♠', 'Player 4 folded', 'Showdown: Player 1 won 1060', 'Player 0 posted small blind 10', 'Player 1 posted big blind 20', 'Player 2 folded', 'Player 3 called 20', 'Player 4 called 20', 'Player 0 folded', 'Player 1 folded', 'Flop dealt: 3♣, Q♥, J♣', 'Player 3 checked', 'Player 4 checked', 'Turn dealt: A♠', 'Player 3 checked', 'Player 4 checked', 'River dealt: K♦', 'Player 3 checked']}, 'call_amount': 0, 'pot_after_call': 70, 'equity': 0.75}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 368, 'promptTokenCount': 1781, 'totalTokenCount': 2149}, 'invocationId': 'e-8cd709d2-1200-4cdd-b730-a7d593a30376', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'iLE9UIYd', 'timestamp': 1761904396.490579}, {'content': {'parts': [{'functionResponse': {'id': 'call_4x75u9Eo4sac5vzknkKI7Uh9', 'name': 'action_decision', 'response': {'action': 'raise', 'amount': 46, 'reasoning': '期待値が高い（52.50(ポットに対して75.00%）ため、2/3ポットでベットします。ベット額: 46'}}}], 'role': 'user'}, 'invocationId': 'e-8cd709d2-1200-4cdd-b730-a7d593a30376', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'k60BVPrn', 'timestamp': 1761904404.101187}, {'content': {'parts': [{'text': '{"action":"raise","amount":46,"reasoning":"期待値が高い（52.50(ポットに対して75.00%）ため、2/3ポットでベットします。ベット額: 46"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 52, 'promptTokenCount': 2198, 'totalTokenCount': 2250}, 'invocationId': 'e-8cd709d2-1200-4cdd-b730-a7d593a30376', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'iJi096kT', 'timestamp': 1761904404.106043}]
2025-10-31 18:53:26,248 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:53:26,248 - poker_game - DEBUG - {"action":"raise","amount":46,"reasoning":"期待値が高い（52.50(ポットに対して75.00%）ため、2/3ポットでベットします。ベット額: 46"}
2025-10-31 18:53:26,248 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:53:26,249 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"raise","amount":46,"reasoning":"期待値が高い（52.50(ポットに対して75.00%）ため、2/3ポットでベットします。ベット額: 46"}'
2025-10-31 18:53:26,249 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:53:26,249 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"raise","amount":46,"reasoning":"期待値が高い（52.50(ポットに対して75.00%）ため、2/3ポットでベットします。ベット額: 46"}
2025-10-31 18:53:26,249 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'raise', 'amount': 46, 'reasoning': '期待値が高い（52.50(ポットに対して75.00%）ため、2/3ポットでベットします。ベット額: 46'}
2025-10-31 18:53:26,249 - poker_game - DEBUG - [Agent4] Extracted values - action: 'raise', amount: 46
2025-10-31 18:53:26,249 - poker_game - DEBUG - [Agent4] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (855)']
2025-10-31 18:53:26,249 - poker_game - DEBUG - [Agent4] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:53:26,250 - poker_game - DEBUG - [Agent4] Raise amount 46 is valid (min: 20)
2025-10-31 18:53:26,250 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'raise', 'amount': 46}
2025-10-31 18:53:26,250 - poker_game - INFO - [Agent4] Successfully parsed decision: raise, 46, 期待値が高い（52.50(ポットに対して75.00%）ため、2/3ポットでベットします。ベット額: 46
2025-10-31 18:53:26,250 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'raise' with amount 46
2025-10-31 18:53:26,251 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:53:26,251 - poker_game - INFO - Hand #11, Phase: river
2025-10-31 18:53:26,251 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:53:26,251 - poker_game - INFO - Pot: 70, Current bet: 0
2025-10-31 18:53:26,251 - poker_game - INFO - Last raiser: None
2025-10-31 18:53:26,252 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:26,252 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:26,252 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠', 'K♦']
2025-10-31 18:53:26,252 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:26,252 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:26,253 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:26,253 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:53:26,253 - poker_game - INFO -   P4(Agent4): chips=855, bet=0, status=active
2025-10-31 18:53:26,253 - poker_game - INFO - ==================================================
2025-10-31 18:53:26,253 - poker_game - INFO - ACTION_EXECUTED: Player 4 raised to 46
2025-10-31 18:53:26,265 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:53:26,266 - poker_game - INFO - Hand #11, Phase: river
2025-10-31 18:53:26,266 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:53:26,266 - poker_game - INFO - Pot: 116, Current bet: 46
2025-10-31 18:53:26,266 - poker_game - INFO - Last raiser: 4
2025-10-31 18:53:26,266 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:26,267 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:26,267 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠', 'K♦']
2025-10-31 18:53:26,267 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:26,267 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:26,267 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:26,268 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:53:26,268 - poker_game - INFO -   P4(Agent4): chips=809, bet=46, status=active
2025-10-31 18:53:26,268 - poker_game - INFO - Extra: Action: Player 4 raised to 46
2025-10-31 18:53:26,268 - poker_game - INFO - ==================================================
2025-10-31 18:53:26,268 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:53:26,269 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:53:26,269 - poker_game - DEBUG - Active players: [3, 4]
2025-10-31 18:53:26,269 - poker_game - INFO - Advanced from player 4 to player 3 (seat order)
2025-10-31 18:53:26,269 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:53:26,269 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:53:26,269 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:53:26,269 - poker_game - DEBUG - Player bets: [0, 46], Current bet: 46, All same: False
2025-10-31 18:53:26,269 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:53:26,270 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:53:26,270 - poker_game - INFO - Hand #11, Phase: river
2025-10-31 18:53:26,270 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:53:26,270 - poker_game - INFO - Pot: 116, Current bet: 46
2025-10-31 18:53:26,270 - poker_game - INFO - Last raiser: 4
2025-10-31 18:53:26,271 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:26,271 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:26,271 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠', 'K♦']
2025-10-31 18:53:26,272 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:26,272 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:26,272 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:26,272 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:53:26,273 - poker_game - INFO -   P4(Agent4): chips=809, bet=46, status=active
2025-10-31 18:53:26,273 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:53:26,273 - poker_game - INFO - ==================================================
2025-10-31 18:53:26,374 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "river",
  "your_cards": [
    "10♦",
    "A♣"
  ],
  "community": [
    "3♣",
    "Q♥",
    "J♣",
    "A♠",
    "K♦"
  ],
  "your_chips": 1550,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 116,
  "to_call": 46,
  "dealer_button": 4,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6095,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 25,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 809,
      "bet": 46,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (46)",
    "raise (min 66)",
    "all-in (1550)"
  ],
  "history": [
    "Player 1 called 265",
    "Turn dealt: 9♠",
    "Player 4 folded",
    "Showdown: Player 1 won 1060",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 2 folded",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 3♣, Q♥, J♣",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: A♠",
    "Player 3 checked",
    "Player 4 checked",
    "River dealt: K♦",
    "Player 3 checked",
    "Player 4 raised to 46"
  ]
}
2025-10-31 18:53:26,386 - poker_game - DEBUG - Create Session: {'id': 'b1af2803-5b4c-4293-ac6a-470616ae5cb5', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904406.3820755}
2025-10-31 18:53:32,227 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 46,\n  "reasoning": "リバー（最終ストリート）で、あなたの手札はAハイ（A♦ K♦ Q♥ J♣ 3♣）となり、強い役ではありません。しかし、相手が46をベットしてきた状況です。コミュニティカードにA♠があるため、あなたはトップペア（Aペア）を持っています。相手のベット額はポットサイズに対してそこまで大きくなく、あなたの手札で相手のより強い役（例えばツーペアやストレート、フラッシュなど）を完全に排除できるわけではありませんが、Aハイで勝てる可能性も残っています。相手のレイズ額（46）は、ポットサイズ（116）に対して約40%であり、そこまで強気なベットではありません。あなたの手札で勝てる可能性（Aハイ）と、相手のブラフ（虚勢）やそれほど強くない役の可能性を考慮すると、コール（相手のベット額と同額を支払ってプレイを続けること）が最善の選択です。オールインは、相手がより強い役を持っている可能性を考えるとリスクが高すぎます。レイズは、相手がより強い役を持っている場合にさらにチップを失うリスクがあります。フォールド（プレイを降りること）は、Aハイというそれなりに強い役を捨ててしまうことになります。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 300, 'promptTokenCount': 862, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 862}], 'totalTokenCount': 1162}, 'invocationId': 'e-19f6225e-0670-44aa-abb4-05792229bde5', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '11asHpFW', 'timestamp': 1761904406.39746}]
2025-10-31 18:53:32,227 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:53:32,227 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 46,
  "reasoning": "リバー（最終ストリート）で、あなたの手札はAハイ（A♦ K♦ Q♥ J♣ 3♣）となり、強い役ではありません。しかし、相手が46をベットしてきた状況です。コミュニティカードにA♠があるため、あなたはトップペア（Aペア）を持っています。相手のベット額はポットサイズに対してそこまで大きくなく、あなたの手札で相手のより強い役（例えばツーペアやストレート、フラッシュなど）を完全に排除できるわけではありませんが、Aハイで勝てる可能性も残っています。相手のレイズ額（46）は、ポットサイズ（116）に対して約40%であり、そこまで強気なベットではありません。あなたの手札で勝てる可能性（Aハイ）と、相手のブラフ（虚勢）やそれほど強くない役の可能性を考慮すると、コール（相手のベット額と同額を支払ってプレイを続けること）が最善の選択です。オールインは、相手がより強い役を持っている可能性を考えるとリスクが高すぎます。レイズは、相手がより強い役を持っている場合にさらにチップを失うリスクがあります。フォールド（プレイを降りること）は、Aハイというそれなりに強い役を捨ててしまうことになります。"
}
```
2025-10-31 18:53:32,228 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:53:32,228 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 46,\n  "reasoning": "リバー（最終ストリート）で、あなたの手札はAハイ（A♦ K♦ Q♥ J♣ 3♣）となり、強い役ではありません。しかし、相手が46をベットしてきた状況です。コミュニティカードにA♠があるため、あなたはトップペア（Aペア）を持っています。相手のベット額はポットサイズに対してそこまで大きくなく、あなたの手札で相手のより強い役（例えばツーペアやストレート、フラッシュなど）を完全に排除できるわけではありませんが、Aハイで勝てる可能性も残っています。相手のレイズ額（46）は、ポットサイズ（116）に対して約40%であり、そこまで強気なベットではありません。あなたの手札で勝てる可能性（Aハイ）と、相手のブラフ（虚勢）やそれほど強くない役の可能性を考慮すると、コール（相手のベット額と同額を支払ってプレイを続けること）が最善の選択です。オールインは、相手がより強い役を持っている可能性を考えるとリスクが高すぎます。レイズは、相手がより強い役を持っている場合にさらにチップを失うリスクがあります。フォールド（プレイを降りること）は、Aハイというそれなりに強い役を捨ててしまうことになります。"\n}\n```'
2025-10-31 18:53:32,228 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:53:32,228 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 46,\n  "reasoning": "リバー（最終ストリート）で、あなたの手札はAハイ（A♦ K♦ Q♥ J♣ 3♣）となり、強い役ではありません。しかし、相手が46をベットしてきた状況です。コミュニティカードにA♠があるため、あなたはトップペア（Aペア）を持っています。相手のベット額はポットサイズに対してそこまで大きくなく、あなたの手札で相手のより強い役（例えばツーペアやストレート、フラッシュなど）を完全に排除できるわけではありませんが、Aハイで勝てる可能性も残っています。相手のレイズ額（46）は、ポットサイズ（116）に対して約40%であり、そこまで強気なベットではありません。あなたの手札で勝てる可能性（Aハイ）と、相手のブラフ（虚勢）やそれほど強くない役の可能性を考慮すると、コール（相手のベット額と同額を支払ってプレイを続けること）が最善の選択です。オールインは、相手がより強い役を持っている可能性を考えるとリスクが高すぎます。レイズは、相手がより強い役を持っている場合にさらにチップを失うリスクがあります。フォールド（プレイを降りること）は、Aハイというそれなりに強い役を捨ててしまうことになります。"\n}'
2025-10-31 18:53:32,229 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 46,
  "reasoning": "リバー（最終ストリート）で、あなたの手札はAハイ（A♦ K♦ Q♥ J♣ 3♣）となり、強い役ではありません。しかし、相手が46をベットしてきた状況です。コミュニティカードにA♠があるため、あなたはトップペア（Aペア）を持っています。相手のベット額はポットサイズに対してそこまで大きくなく、あなたの手札で相手のより強い役（例えばツーペアやストレート、フラッシュなど）を完全に排除できるわけではありませんが、Aハイで勝てる可能性も残っています。相手のレイズ額（46）は、ポットサイズ（116）に対して約40%であり、そこまで強気なベットではありません。あなたの手札で勝てる可能性（Aハイ）と、相手のブラフ（虚勢）やそれほど強くない役の可能性を考慮すると、コール（相手のベット額と同額を支払ってプレイを続けること）が最善の選択です。オールインは、相手がより強い役を持っている可能性を考えるとリスクが高すぎます。レイズは、相手がより強い役を持っている場合にさらにチップを失うリスクがあります。フォールド（プレイを降りること）は、Aハイというそれなりに強い役を捨ててしまうことになります。"
}
2025-10-31 18:53:32,229 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 46, 'reasoning': 'リバー（最終ストリート）で、あなたの手札はAハイ（A♦ K♦ Q♥ J♣ 3♣）となり、強い役ではありません。しかし、相手が46をベットしてきた状況です。コミュニティカードにA♠があるため、あなたはトップペア（Aペア）を持っています。相手のベット額はポットサイズに対してそこまで大きくなく、あなたの手札で相手のより強い役（例えばツーペアやストレート、フラッシュなど）を完全に排除できるわけではありませんが、Aハイで勝てる可能性も残っています。相手のレイズ額（46）は、ポットサイズ（116）に対して約40%であり、そこまで強気なベットではありません。あなたの手札で勝てる可能性（Aハイ）と、相手のブラフ（虚勢）やそれほど強くない役の可能性を考慮すると、コール（相手のベット額と同額を支払ってプレイを続けること）が最善の選択です。オールインは、相手がより強い役を持っている可能性を考えるとリスクが高すぎます。レイズは、相手がより強い役を持っている場合にさらにチップを失うリスクがあります。フォールド（プレイを降りること）は、Aハイというそれなりに強い役を捨ててしまうことになります。'}
2025-10-31 18:53:32,229 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 46
2025-10-31 18:53:32,229 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'call (46)', 'raise (min 66)', 'all-in (1550)']
2025-10-31 18:53:32,230 - poker_game - DEBUG - [Agent3] Call amount extracted from 'call (46)': 46
2025-10-31 18:53:32,230 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 46}
2025-10-31 18:53:32,230 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 46, リバー（最終ストリート）で、あなたの手札はAハイ（A♦ K♦ Q♥ J♣ 3♣）となり、強い役ではありません。しかし、相手が46をベットしてきた状況です。コミュニティカードにA♠があるため、あなたはトップペア（Aペア）を持っています。相手のベット額はポットサイズに対してそこまで大きくなく、あなたの手札で相手のより強い役（例えばツーペアやストレート、フラッシュなど）を完全に排除できるわけではありませんが、Aハイで勝てる可能性も残っています。相手のレイズ額（46）は、ポットサイズ（116）に対して約40%であり、そこまで強気なベットではありません。あなたの手札で勝てる可能性（Aハイ）と、相手のブラフ（虚勢）やそれほど強くない役の可能性を考慮すると、コール（相手のベット額と同額を支払ってプレイを続けること）が最善の選択です。オールインは、相手がより強い役を持っている可能性を考えるとリスクが高すぎます。レイズは、相手がより強い役を持っている場合にさらにチップを失うリスクがあります。フォールド（プレイを降りること）は、Aハイというそれなりに強い役を捨ててしまうことになります。
2025-10-31 18:53:32,232 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 46
2025-10-31 18:53:32,232 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:53:32,233 - poker_game - INFO - Hand #11, Phase: river
2025-10-31 18:53:32,233 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:53:32,233 - poker_game - INFO - Pot: 116, Current bet: 46
2025-10-31 18:53:32,234 - poker_game - INFO - Last raiser: 4
2025-10-31 18:53:32,234 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:32,234 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:32,234 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠', 'K♦']
2025-10-31 18:53:32,235 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:32,235 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:32,235 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:32,235 - poker_game - INFO -   P3(Agent3): chips=1550, bet=0, status=active
2025-10-31 18:53:32,236 - poker_game - INFO -   P4(Agent4): chips=809, bet=46, status=active
2025-10-31 18:53:32,236 - poker_game - INFO - ==================================================
2025-10-31 18:53:32,240 - poker_game - INFO - ACTION_EXECUTED: Player 3 called 46
2025-10-31 18:53:32,264 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:53:32,265 - poker_game - INFO - Hand #11, Phase: river
2025-10-31 18:53:32,266 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:53:32,266 - poker_game - INFO - Pot: 162, Current bet: 46
2025-10-31 18:53:32,266 - poker_game - INFO - Last raiser: 4
2025-10-31 18:53:32,267 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:32,268 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:32,269 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠', 'K♦']
2025-10-31 18:53:32,270 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:32,270 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:32,271 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:32,271 - poker_game - INFO -   P3(Agent3): chips=1504, bet=46, status=active
2025-10-31 18:53:32,278 - poker_game - INFO -   P4(Agent4): chips=809, bet=46, status=active
2025-10-31 18:53:32,279 - poker_game - INFO - Extra: Action: Player 3 called 46
2025-10-31 18:53:32,280 - poker_game - INFO - ==================================================
2025-10-31 18:53:32,280 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:53:32,281 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:53:32,281 - poker_game - DEBUG - Active players: [3, 4]
2025-10-31 18:53:32,282 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:53:32,283 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:53:32,283 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:53:32,283 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:53:32,284 - poker_game - DEBUG - Player bets: [46, 46], Current bet: 46, All same: True
2025-10-31 18:53:32,284 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:53:32,285 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:53:32,286 - poker_game - INFO - Hand #11, Phase: river
2025-10-31 18:53:32,288 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:53:32,295 - poker_game - INFO - Pot: 162, Current bet: 46
2025-10-31 18:53:32,296 - poker_game - INFO - Last raiser: 4
2025-10-31 18:53:32,296 - poker_game - INFO - Betting round complete: True
2025-10-31 18:53:32,296 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:32,297 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠', 'K♦']
2025-10-31 18:53:32,297 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:32,298 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:32,298 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:32,298 - poker_game - INFO -   P3(Agent3): chips=1504, bet=46, status=active
2025-10-31 18:53:32,299 - poker_game - INFO -   P4(Agent4): chips=809, bet=46, status=active
2025-10-31 18:53:32,299 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:53:32,299 - poker_game - INFO - ==================================================
2025-10-31 18:53:32,406 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 18:53:32,407 - poker_game - INFO - Betting round complete: True
2025-10-31 18:53:32,407 - poker_game - INFO - Remaining players: 2
2025-10-31 18:53:32,408 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:53:32,408 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:53:32,409 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 18:53:32,409 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:53:32,409 - poker_game - INFO - Hand #11, Phase: showdown
2025-10-31 18:53:32,410 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:53:32,410 - poker_game - INFO - Pot: 162, Current bet: 46
2025-10-31 18:53:32,410 - poker_game - INFO - Last raiser: 4
2025-10-31 18:53:32,410 - poker_game - INFO - Betting round complete: True
2025-10-31 18:53:32,411 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:32,411 - poker_game - INFO - Community cards: ['3♣', 'Q♥', 'J♣', 'A♠', 'K♦']
2025-10-31 18:53:32,412 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:32,412 - poker_game - INFO -   P1(Agent1): chips=6095, bet=0, status=folded
2025-10-31 18:53:32,412 - poker_game - INFO -   P2(Agent2): chips=25, bet=0, status=folded
2025-10-31 18:53:32,413 - poker_game - INFO -   P3(Agent3): chips=1504, bet=46, status=active
2025-10-31 18:53:32,413 - poker_game - INFO -   P4(Agent4): chips=809, bet=46, status=active
2025-10-31 18:53:32,413 - poker_game - INFO - ==================================================
2025-10-31 18:53:32,414 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:53:32,414 - poker_game - INFO - Pot: 162, Community cards: ['3♣', 'Q♥', 'J♣', 'A♠', 'K♦']
2025-10-31 18:53:32,415 - poker_game - INFO -   Player 3 status=active cards=['10♦', 'A♣']
2025-10-31 18:53:32,415 - poker_game - INFO -   Player 4 status=active cards=['9♠', 'K♥']
2025-10-31 18:53:32,419 - poker_game - INFO -   Player 3 hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦ cards=['10♦', 'A♣']
2025-10-31 18:53:32,420 - poker_game - INFO -   Player 4 hand=One Pair: Ks - A♠, K♥, K♦, Q♥, J♣ cards=['9♠', 'K♥']
2025-10-31 18:53:32,424 - poker_game - INFO - Pot layer 0: amount=40, contributors=[0, 1, 3, 4]
2025-10-31 18:53:32,425 - poker_game - INFO - Pot layer 1: amount=30, contributors=[1, 3, 4]
2025-10-31 18:53:32,428 - poker_game - INFO - Pot layer 2: amount=92, contributors=[3, 4]
2025-10-31 18:53:32,430 - poker_game - INFO - Showdown total awarded: 162 (game.pot=162)
2025-10-31 18:53:32,431 - poker_game - INFO - Showdown winners (aggregated): [3]
2025-10-31 18:53:32,431 - poker_game - INFO -   Awarded 162 to Player 3 (hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦)
2025-10-31 18:53:32,432 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:53:27,351 - poker_game - INFO - === STARTING NEW HAND #12 ===
2025-10-31 18:53:27,352 - poker_game - INFO - Active players for new hand: 5
2025-10-31 18:53:27,354 - poker_game - INFO - Moving dealer button
2025-10-31 18:53:27,355 - poker_game - INFO - Posting blinds
2025-10-31 18:53:27,382 - poker_game - INFO - Dealing hole cards
2025-10-31 18:53:27,384 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:53:27,399 - poker_game - INFO - Started new hand in database: hand_id=12
2025-10-31 18:53:27,400 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:53:27,401 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:27,401 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:53:27,402 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:53:27,402 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:27,402 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:27,403 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:53:27,403 - poker_game - INFO - Community cards: []
2025-10-31 18:53:27,404 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=active
2025-10-31 18:53:27,404 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=active
2025-10-31 18:53:27,405 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=active
2025-10-31 18:53:27,405 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=active
2025-10-31 18:53:27,406 - poker_game - INFO -   P4(Agent4): chips=809, bet=0, status=active
2025-10-31 18:53:27,407 - poker_game - INFO - ==================================================
2025-10-31 18:53:27,408 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "K♠",
    "6♥"
  ],
  "community": [],
  "your_chips": 1666,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6085,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 5,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 809,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1666)"
  ],
  "history": [
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 3♣, Q♥, J♣",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: A♠",
    "Player 3 checked",
    "Player 4 checked",
    "River dealt: K♦",
    "Player 3 checked",
    "Player 4 raised to 46",
    "Player 3 called 46",
    "Showdown: Player 3 hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦ cards=10♦, A♣",
    "Showdown: Player 4 hand=One Pair: Ks - A♠, K♥, K♦, Q♥, J♣ cards=9♠, K♥",
    "Side pot layer 0: amount=40, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 1: amount=30, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 2: amount=92, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20"
  ]
}
2025-10-31 18:53:27,423 - poker_game - DEBUG - Create Session: {'id': '057c1b57-16fc-49b7-883f-c18054bd3f5a', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904407.4196677}
2025-10-31 18:53:29,179 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "PreflopでK6オフスート（異なる絵柄のキングと6）は非常に弱いハンドです。レイズに対してコールするのは、勝つ確率が低いため、チップを失うリスクが高いです。プレイヤー2がすでにビッグブラインド（20）をベットしており、コールするには20必要ですが、このハンドでコールする価値はありません。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 105, 'promptTokenCount': 985, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 985}], 'totalTokenCount': 1090}, 'invocationId': 'e-536dc059-f917-45dc-bb83-299bb437c6b8', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'sbq4b5vs', 'timestamp': 1761904407.439011}]
2025-10-31 18:53:29,179 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:53:29,180 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "PreflopでK6オフスート（異なる絵柄のキングと6）は非常に弱いハンドです。レイズに対してコールするのは、勝つ確率が低いため、チップを失うリスクが高いです。プレイヤー2がすでにビッグブラインド（20）をベットしており、コールするには20必要ですが、このハンドでコールする価値はありません。"
}
```
2025-10-31 18:53:29,180 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:53:29,180 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "PreflopでK6オフスート（異なる絵柄のキングと6）は非常に弱いハンドです。レイズに対してコールするのは、勝つ確率が低いため、チップを失うリスクが高いです。プレイヤー2がすでにビッグブラインド（20）をベットしており、コールするには20必要ですが、このハンドでコールする価値はありません。"\n}\n```'
2025-10-31 18:53:29,180 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:53:29,180 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "PreflopでK6オフスート（異なる絵柄のキングと6）は非常に弱いハンドです。レイズに対してコールするのは、勝つ確率が低いため、チップを失うリスクが高いです。プレイヤー2がすでにビッグブラインド（20）をベットしており、コールするには20必要ですが、このハンドでコールする価値はありません。"\n}'
2025-10-31 18:53:29,180 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "PreflopでK6オフスート（異なる絵柄のキングと6）は非常に弱いハンドです。レイズに対してコールするのは、勝つ確率が低いため、チップを失うリスクが高いです。プレイヤー2がすでにビッグブラインド（20）をベットしており、コールするには20必要ですが、このハンドでコールする価値はありません。"
}
2025-10-31 18:53:29,180 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'PreflopでK6オフスート（異なる絵柄のキングと6）は非常に弱いハンドです。レイズに対してコールするのは、勝つ確率が低いため、チップを失うリスクが高いです。プレイヤー2がすでにビッグブラインド（20）をベットしており、コールするには20必要ですが、このハンドでコールする価値はありません。'}
2025-10-31 18:53:29,180 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 18:53:29,180 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 18:53:29,181 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:53:29,181 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, PreflopでK6オフスート（異なる絵柄のキングと6）は非常に弱いハンドです。レイズに対してコールするのは、勝つ確率が低いため、チップを失うリスクが高いです。プレイヤー2がすでにビッグブラインド（20）をベットしており、コールするには20必要ですが、このハンドでコールする価値はありません。
2025-10-31 18:53:29,181 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 18:53:29,181 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:53:29,182 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:29,182 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:53:29,182 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:53:29,182 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:29,182 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:29,183 - poker_game - INFO - Active players: 5, All-in: 0, Folded: 0
2025-10-31 18:53:29,183 - poker_game - INFO - Community cards: []
2025-10-31 18:53:29,183 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=active
2025-10-31 18:53:29,183 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=active
2025-10-31 18:53:29,183 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=active
2025-10-31 18:53:29,184 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=active
2025-10-31 18:53:29,184 - poker_game - INFO -   P4(Agent4): chips=809, bet=0, status=active
2025-10-31 18:53:29,184 - poker_game - INFO - ==================================================
2025-10-31 18:53:29,184 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 18:53:29,191 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:53:29,192 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:29,192 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:53:29,192 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:53:29,192 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:29,193 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:29,193 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:53:29,193 - poker_game - INFO - Community cards: []
2025-10-31 18:53:29,194 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=active
2025-10-31 18:53:29,194 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=active
2025-10-31 18:53:29,195 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=active
2025-10-31 18:53:29,195 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:29,195 - poker_game - INFO -   P4(Agent4): chips=809, bet=0, status=active
2025-10-31 18:53:29,196 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 18:53:29,196 - poker_game - INFO - ==================================================
2025-10-31 18:53:29,196 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:53:29,197 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:53:29,197 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:53:29,197 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:53:29,197 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:53:29,197 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:53:29,197 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:53:29,198 - poker_game - DEBUG - Player bets: [0, 10, 20, 0], Current bet: 20, All same: False
2025-10-31 18:53:29,198 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:53:29,198 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:53:29,198 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:29,198 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:53:29,198 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:53:29,199 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:29,199 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:29,199 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:53:29,200 - poker_game - INFO - Community cards: []
2025-10-31 18:53:29,200 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=active
2025-10-31 18:53:29,200 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=active
2025-10-31 18:53:29,200 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=active
2025-10-31 18:53:29,201 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:29,201 - poker_game - INFO -   P4(Agent4): chips=809, bet=0, status=active
2025-10-31 18:53:29,201 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:53:29,202 - poker_game - INFO - ==================================================
2025-10-31 18:53:29,303 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "10♣",
    "9♥"
  ],
  "community": [],
  "your_chips": 809,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6085,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 5,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1666,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (809)"
  ],
  "history": [
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 3♣, Q♥, J♣",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: A♠",
    "Player 3 checked",
    "Player 4 checked",
    "River dealt: K♦",
    "Player 3 checked",
    "Player 4 raised to 46",
    "Player 3 called 46",
    "Showdown: Player 3 hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦ cards=10♦, A♣",
    "Showdown: Player 4 hand=One Pair: Ks - A♠, K♥, K♦, Q♥, J♣ cards=9♠, K♥",
    "Side pot layer 0: amount=40, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 1: amount=30, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 2: amount=92, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded"
  ]
}
2025-10-31 18:53:29,315 - poker_game - DEBUG - Create Session: {'id': 'cf8f4502-5f4b-4db0-b0ff-b3a143d3a529', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904409.312128}
2025-10-31 18:53:39,500 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:53:46,550 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_Hqe2E6jCD98otvb3HdBUdBo8', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1293, 'totalTokenCount': 1310}, 'invocationId': 'e-8d49693d-042a-4f29-a982-6c2dd97981bf', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '3kAprzj2', 'timestamp': 1761904409.327586}, {'content': {'parts': [{'functionResponse': {'id': 'call_Hqe2E6jCD98otvb3HdBUdBo8', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-8d49693d-042a-4f29-a982-6c2dd97981bf', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'C0CsSkZX', 'timestamp': 1761904410.52805}, {'content': {'parts': [{'functionCall': {'id': 'call_N34psYhydFT02E9h60eJBKkz', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1817, 'totalTokenCount': 1837}, 'invocationId': 'e-8d49693d-042a-4f29-a982-6c2dd97981bf', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'VLbqNWTp', 'timestamp': 1761904410.530237}, {'content': {'parts': [{'functionResponse': {'id': 'call_N34psYhydFT02E9h60eJBKkz', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-8d49693d-042a-4f29-a982-6c2dd97981bf', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'ebrGmX8Z', 'timestamp': 1761904411.651586}, {'content': {'parts': [{'functionCall': {'id': 'call_maHDmezCP5w5MEpAS4mbB1aT', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1379, 'totalTokenCount': 1396}, 'invocationId': 'e-8d49693d-042a-4f29-a982-6c2dd97981bf', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'YDDGcGh8', 'timestamp': 1761904411.65283}, {'content': {'parts': [{'functionResponse': {'id': 'call_maHDmezCP5w5MEpAS4mbB1aT', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-8d49693d-042a-4f29-a982-6c2dd97981bf', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'bjNd1TyH', 'timestamp': 1761904412.890729}, {'content': {'parts': [{'functionCall': {'id': 'call_88zSnjLYSRKw1vTgz2DeNnhC', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['10♣', '9♥'], 'community': [], 'your_chips': 809, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 0, 'pot': 30, 'to_call': 20, 'dealer_button': 0, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1405, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 6085, 'bet': 10, 'status': 'active'}, {'id': 2, 'chips': 5, 'bet': 20, 'status': 'active'}, {'id': 3, 'chips': 1666, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'call (20)', 'raise (min 40)', 'all-in (809)'], 'history': ['Player 0 folded', 'Player 1 folded', 'Flop dealt: 3♣, Q♥, J♣', 'Player 3 checked', 'Player 4 checked', 'Turn dealt: A♠', 'Player 3 checked', 'Player 4 checked', 'River dealt: K♦', 'Player 3 checked', 'Player 4 raised to 46', 'Player 3 called 46', 'Showdown: Player 3 hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦ cards=10♦, A♣', 'Showdown: Player 4 hand=One Pair: Ks - A♠, K♥, K♦, Q♥, J♣ cards=9♠, K♥', 'Side pot layer 0: amount=40, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦', 'Side pot layer 1: amount=30, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦', 'Side pot layer 2: amount=92, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦', 'Player 1 posted small blind 10', 'Player 2 posted big blind 20', 'Player 3 folded']}, 'call_amount': 20, 'pot_after_call': 50, 'equity': 0.4}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 493, 'promptTokenCount': 1909, 'totalTokenCount': 2402}, 'invocationId': 'e-8d49693d-042a-4f29-a982-6c2dd97981bf', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'rUnHuXsK', 'timestamp': 1761904412.893103}, {'content': {'parts': [{'functionResponse': {'id': 'call_88zSnjLYSRKw1vTgz2DeNnhC', 'name': 'action_decision', 'response': {'action': 'call', 'amount': 20, 'reasoning': 'ポットオッズを満たしており（8.00(ポットに対して26.67%）、コールが妥当と判断。コール額: 20'}}}], 'role': 'user'}, 'invocationId': 'e-8d49693d-042a-4f29-a982-6c2dd97981bf', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'VoEWod7c', 'timestamp': 1761904424.398245}, {'content': {'parts': [{'text': '{"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（8.00(ポットに対して26.67%）、コールが妥当と判断。コール額: 20"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 54, 'promptTokenCount': 2469, 'totalTokenCount': 2523}, 'invocationId': 'e-8d49693d-042a-4f29-a982-6c2dd97981bf', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'q3T3e63j', 'timestamp': 1761904424.404653}]
2025-10-31 18:53:46,551 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:53:46,553 - poker_game - DEBUG - {"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（8.00(ポットに対して26.67%）、コールが妥当と判断。コール額: 20"}
2025-10-31 18:53:46,557 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:53:46,557 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（8.00(ポットに対して26.67%）、コールが妥当と判断。コール額: 20"}'
2025-10-31 18:53:46,558 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:53:46,558 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（8.00(ポットに対して26.67%）、コールが妥当と判断。コール額: 20"}
2025-10-31 18:53:46,558 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'ポットオッズを満たしており（8.00(ポットに対して26.67%）、コールが妥当と判断。コール額: 20'}
2025-10-31 18:53:46,559 - poker_game - DEBUG - [Agent4] Extracted values - action: 'call', amount: 20
2025-10-31 18:53:46,559 - poker_game - DEBUG - [Agent4] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (809)']
2025-10-31 18:53:46,559 - poker_game - DEBUG - [Agent4] Call amount extracted from 'call (20)': 20
2025-10-31 18:53:46,559 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:53:46,559 - poker_game - INFO - [Agent4] Successfully parsed decision: call, 20, ポットオッズを満たしており（8.00(ポットに対して26.67%）、コールが妥当と判断。コール額: 20
2025-10-31 18:53:46,561 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'call' with amount 20
2025-10-31 18:53:46,561 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:53:46,562 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:46,562 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:53:46,563 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:53:46,563 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:46,564 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:46,564 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:53:46,564 - poker_game - INFO - Community cards: []
2025-10-31 18:53:46,565 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=active
2025-10-31 18:53:46,565 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=active
2025-10-31 18:53:46,566 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=active
2025-10-31 18:53:46,566 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:46,566 - poker_game - INFO -   P4(Agent4): chips=809, bet=0, status=active
2025-10-31 18:53:46,567 - poker_game - INFO - ==================================================
2025-10-31 18:53:46,567 - poker_game - INFO - ACTION_EXECUTED: Player 4 called 20
2025-10-31 18:53:46,588 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:53:46,589 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:46,589 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:53:46,589 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:53:46,590 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:46,590 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:46,591 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:53:46,591 - poker_game - INFO - Community cards: []
2025-10-31 18:53:46,591 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=active
2025-10-31 18:53:46,591 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=active
2025-10-31 18:53:46,592 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=active
2025-10-31 18:53:46,592 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:46,593 - poker_game - INFO -   P4(Agent4): chips=789, bet=20, status=active
2025-10-31 18:53:46,593 - poker_game - INFO - Extra: Action: Player 4 called 20
2025-10-31 18:53:46,593 - poker_game - INFO - ==================================================
2025-10-31 18:53:46,594 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:53:46,594 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:53:46,594 - poker_game - DEBUG - Active players: [0, 1, 2, 4]
2025-10-31 18:53:46,594 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:53:46,595 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:53:46,595 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:53:46,596 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:53:46,596 - poker_game - DEBUG - Player bets: [0, 10, 20, 20], Current bet: 20, All same: False
2025-10-31 18:53:46,596 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:53:46,596 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:53:46,597 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:46,597 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:53:46,600 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:53:46,600 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:46,602 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:46,604 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:53:46,604 - poker_game - INFO - Community cards: []
2025-10-31 18:53:46,605 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=active
2025-10-31 18:53:46,605 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=active
2025-10-31 18:53:46,606 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=active
2025-10-31 18:53:46,606 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:46,606 - poker_game - INFO -   P4(Agent4): chips=789, bet=20, status=active
2025-10-31 18:53:46,607 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:53:46,607 - poker_game - INFO - ==================================================
2025-10-31 18:53:46,708 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "3♣",
    "2♠"
  ],
  "community": [],
  "your_chips": 1405,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 50,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6085,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 5,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1666,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 789,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1405)"
  ],
  "history": [
    "Player 1 folded",
    "Flop dealt: 3♣, Q♥, J♣",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: A♠",
    "Player 3 checked",
    "Player 4 checked",
    "River dealt: K♦",
    "Player 3 checked",
    "Player 4 raised to 46",
    "Player 3 called 46",
    "Showdown: Player 3 hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦ cards=10♦, A♣",
    "Showdown: Player 4 hand=One Pair: Ks - A♠, K♥, K♦, Q♥, J♣ cards=9♠, K♥",
    "Side pot layer 0: amount=40, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 1: amount=30, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 2: amount=92, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 called 20"
  ]
}
2025-10-31 18:53:46,721 - poker_game - DEBUG - Create Session: {'id': '15870b21-a1b8-4068-a4e3-3817b65b0aa9', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904426.7178788}
2025-10-31 18:53:48,301 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでは、3-2オフスート（異なるスートの3と2）は非常に弱いハンドです。このハンドでレイズ（ベット額を上げる）するのはリスクが高すぎます。コール（相手のベット額に合わせて自分のベット額を同じにする）するには20チップ必要ですが、このハンドで勝つ可能性は低いです。したがって、フォールド（ゲームから降りる）するのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 122, 'promptTokenCount': 986, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 986}], 'totalTokenCount': 1108}, 'invocationId': 'e-03d21c0d-14a7-42dd-a0a5-442a989b2e1d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'ssFQdiiz', 'timestamp': 1761904426.733505}]
2025-10-31 18:53:48,301 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:53:48,302 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップでは、3-2オフスート（異なるスートの3と2）は非常に弱いハンドです。このハンドでレイズ（ベット額を上げる）するのはリスクが高すぎます。コール（相手のベット額に合わせて自分のベット額を同じにする）するには20チップ必要ですが、このハンドで勝つ可能性は低いです。したがって、フォールド（ゲームから降りる）するのが最善の選択です。"
}
```
2025-10-31 18:53:48,302 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:53:48,303 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでは、3-2オフスート（異なるスートの3と2）は非常に弱いハンドです。このハンドでレイズ（ベット額を上げる）するのはリスクが高すぎます。コール（相手のベット額に合わせて自分のベット額を同じにする）するには20チップ必要ですが、このハンドで勝つ可能性は低いです。したがって、フォールド（ゲームから降りる）するのが最善の選択です。"\n}\n```'
2025-10-31 18:53:48,303 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:53:48,303 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでは、3-2オフスート（異なるスートの3と2）は非常に弱いハンドです。このハンドでレイズ（ベット額を上げる）するのはリスクが高すぎます。コール（相手のベット額に合わせて自分のベット額を同じにする）するには20チップ必要ですが、このハンドで勝つ可能性は低いです。したがって、フォールド（ゲームから降りる）するのが最善の選択です。"\n}'
2025-10-31 18:53:48,304 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップでは、3-2オフスート（異なるスートの3と2）は非常に弱いハンドです。このハンドでレイズ（ベット額を上げる）するのはリスクが高すぎます。コール（相手のベット額に合わせて自分のベット額を同じにする）するには20チップ必要ですが、このハンドで勝つ可能性は低いです。したがって、フォールド（ゲームから降りる）するのが最善の選択です。"
}
2025-10-31 18:53:48,304 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップでは、3-2オフスート（異なるスートの3と2）は非常に弱いハンドです。このハンドでレイズ（ベット額を上げる）するのはリスクが高すぎます。コール（相手のベット額に合わせて自分のベット額を同じにする）するには20チップ必要ですが、このハンドで勝つ可能性は低いです。したがって、フォールド（ゲームから降りる）するのが最善の選択です。'}
2025-10-31 18:53:48,304 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 18:53:48,304 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 18:53:48,304 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:53:48,305 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップでは、3-2オフスート（異なるスートの3と2）は非常に弱いハンドです。このハンドでレイズ（ベット額を上げる）するのはリスクが高すぎます。コール（相手のベット額に合わせて自分のベット額を同じにする）するには20チップ必要ですが、このハンドで勝つ可能性は低いです。したがって、フォールド（ゲームから降りる）するのが最善の選択です。
2025-10-31 18:53:48,308 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 18:53:48,308 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:53:48,309 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:48,310 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:53:48,311 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:53:48,312 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:48,313 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:48,313 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 1
2025-10-31 18:53:48,314 - poker_game - INFO - Community cards: []
2025-10-31 18:53:48,314 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=active
2025-10-31 18:53:48,314 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=active
2025-10-31 18:53:48,315 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=active
2025-10-31 18:53:48,315 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:48,316 - poker_game - INFO -   P4(Agent4): chips=789, bet=20, status=active
2025-10-31 18:53:48,316 - poker_game - INFO - ==================================================
2025-10-31 18:53:48,316 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 18:53:48,329 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:53:48,329 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:48,330 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:53:48,330 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:53:48,331 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:48,331 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:48,332 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:53:48,332 - poker_game - INFO - Community cards: []
2025-10-31 18:53:48,332 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:48,333 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=active
2025-10-31 18:53:48,333 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=active
2025-10-31 18:53:48,334 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:48,334 - poker_game - INFO -   P4(Agent4): chips=789, bet=20, status=active
2025-10-31 18:53:48,335 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 18:53:48,335 - poker_game - INFO - ==================================================
2025-10-31 18:53:48,336 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:53:48,336 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:53:48,336 - poker_game - DEBUG - Active players: [1, 2, 4]
2025-10-31 18:53:48,337 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:53:48,337 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:53:48,337 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:53:48,338 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:53:48,338 - poker_game - DEBUG - Player bets: [10, 20, 20], Current bet: 20, All same: False
2025-10-31 18:53:48,338 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:53:48,338 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:53:48,339 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:48,339 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:53:48,340 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:53:48,340 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:48,341 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:48,341 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:53:48,342 - poker_game - INFO - Community cards: []
2025-10-31 18:53:48,342 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:48,343 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=active
2025-10-31 18:53:48,344 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=active
2025-10-31 18:53:48,344 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:48,345 - poker_game - INFO -   P4(Agent4): chips=789, bet=20, status=active
2025-10-31 18:53:48,346 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:53:48,346 - poker_game - INFO - ==================================================
2025-10-31 18:53:48,448 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "7♦",
    "6♠"
  ],
  "community": [],
  "your_chips": 6085,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 50,
  "to_call": 10,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 5,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1666,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 789,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (6085)"
  ],
  "history": [
    "Flop dealt: 3♣, Q♥, J♣",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: A♠",
    "Player 3 checked",
    "Player 4 checked",
    "River dealt: K♦",
    "Player 3 checked",
    "Player 4 raised to 46",
    "Player 3 called 46",
    "Showdown: Player 3 hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦ cards=10♦, A♣",
    "Showdown: Player 4 hand=One Pair: Ks - A♠, K♥, K♦, Q♥, J♣ cards=9♠, K♥",
    "Side pot layer 0: amount=40, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 1: amount=30, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 2: amount=92, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 folded"
  ]
}
2025-10-31 18:53:48,463 - poker_game - DEBUG - Create Session: {'id': '4793b260-d2cc-4389-a88e-8be374f4cef8', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904428.4598646}
2025-10-31 18:53:50,495 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（カードが配られた直後）で、手札は7♦6♠です。これは「コネクター」と呼ばれる、連続した数字のカードですが、スート（♦や♠など）が揃っていないため、それほど強い手ではありません。ポットには50、コールするには10必要です。しかし、他のプレイヤーのベット状況を見ると、すでに20のベットがあり、さらにレイズ（ベット額を上げる）の選択肢もあります。この手札でコールまたはレイズをして勝つ確率は低いため、フォールド（降りる）するのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 155, 'promptTokenCount': 987, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 987}], 'totalTokenCount': 1142}, 'invocationId': 'e-d857ccb2-98af-4c9e-a291-ac1dcc3312e6', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'KkJ3mW7n', 'timestamp': 1761904428.475724}]
2025-10-31 18:53:50,496 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:53:50,496 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（カードが配られた直後）で、手札は7♦6♠です。これは「コネクター」と呼ばれる、連続した数字のカードですが、スート（♦や♠など）が揃っていないため、それほど強い手ではありません。ポットには50、コールするには10必要です。しかし、他のプレイヤーのベット状況を見ると、すでに20のベットがあり、さらにレイズ（ベット額を上げる）の選択肢もあります。この手札でコールまたはレイズをして勝つ確率は低いため、フォールド（降りる）するのが最善です。"
}
```
2025-10-31 18:53:50,496 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:53:50,496 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（カードが配られた直後）で、手札は7♦6♠です。これは「コネクター」と呼ばれる、連続した数字のカードですが、スート（♦や♠など）が揃っていないため、それほど強い手ではありません。ポットには50、コールするには10必要です。しかし、他のプレイヤーのベット状況を見ると、すでに20のベットがあり、さらにレイズ（ベット額を上げる）の選択肢もあります。この手札でコールまたはレイズをして勝つ確率は低いため、フォールド（降りる）するのが最善です。"\n}\n```'
2025-10-31 18:53:50,496 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:53:50,496 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（カードが配られた直後）で、手札は7♦6♠です。これは「コネクター」と呼ばれる、連続した数字のカードですが、スート（♦や♠など）が揃っていないため、それほど強い手ではありません。ポットには50、コールするには10必要です。しかし、他のプレイヤーのベット状況を見ると、すでに20のベットがあり、さらにレイズ（ベット額を上げる）の選択肢もあります。この手札でコールまたはレイズをして勝つ確率は低いため、フォールド（降りる）するのが最善です。"\n}'
2025-10-31 18:53:50,497 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（カードが配られた直後）で、手札は7♦6♠です。これは「コネクター」と呼ばれる、連続した数字のカードですが、スート（♦や♠など）が揃っていないため、それほど強い手ではありません。ポットには50、コールするには10必要です。しかし、他のプレイヤーのベット状況を見ると、すでに20のベットがあり、さらにレイズ（ベット額を上げる）の選択肢もあります。この手札でコールまたはレイズをして勝つ確率は低いため、フォールド（降りる）するのが最善です。"
}
2025-10-31 18:53:50,497 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（カードが配られた直後）で、手札は7♦6♠です。これは「コネクター」と呼ばれる、連続した数字のカードですが、スート（♦や♠など）が揃っていないため、それほど強い手ではありません。ポットには50、コールするには10必要です。しかし、他のプレイヤーのベット状況を見ると、すでに20のベットがあり、さらにレイズ（ベット額を上げる）の選択肢もあります。この手札でコールまたはレイズをして勝つ確率は低いため、フォールド（降りる）するのが最善です。'}
2025-10-31 18:53:50,497 - poker_game - DEBUG - [Agent1] Extracted values - action: 'fold', amount: 0
2025-10-31 18:53:50,497 - poker_game - DEBUG - [Agent1] Action 'fold' normalized - amount set to 0
2025-10-31 18:53:50,497 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:53:50,497 - poker_game - INFO - [Agent1] Successfully parsed decision: fold, 0, プリフロップ（カードが配られた直後）で、手札は7♦6♠です。これは「コネクター」と呼ばれる、連続した数字のカードですが、スート（♦や♠など）が揃っていないため、それほど強い手ではありません。ポットには50、コールするには10必要です。しかし、他のプレイヤーのベット状況を見ると、すでに20のベットがあり、さらにレイズ（ベット額を上げる）の選択肢もあります。この手札でコールまたはレイズをして勝つ確率は低いため、フォールド（降りる）するのが最善です。
2025-10-31 18:53:50,498 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'fold' with amount 0
2025-10-31 18:53:50,498 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:53:50,498 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:50,499 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:53:50,499 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:53:50,499 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:50,499 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:50,499 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 2
2025-10-31 18:53:50,499 - poker_game - INFO - Community cards: []
2025-10-31 18:53:50,499 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:50,500 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=active
2025-10-31 18:53:50,500 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=active
2025-10-31 18:53:50,500 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:50,500 - poker_game - INFO -   P4(Agent4): chips=789, bet=20, status=active
2025-10-31 18:53:50,500 - poker_game - INFO - ==================================================
2025-10-31 18:53:50,501 - poker_game - INFO - ACTION_EXECUTED: Player 1 folded
2025-10-31 18:53:50,510 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:53:50,511 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:50,511 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:53:50,511 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:53:50,511 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:50,512 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:50,512 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:50,512 - poker_game - INFO - Community cards: []
2025-10-31 18:53:50,512 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:50,513 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=folded
2025-10-31 18:53:50,513 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=active
2025-10-31 18:53:50,513 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:50,514 - poker_game - INFO -   P4(Agent4): chips=789, bet=20, status=active
2025-10-31 18:53:50,514 - poker_game - INFO - Extra: Action: Player 1 folded
2025-10-31 18:53:50,515 - poker_game - INFO - ==================================================
2025-10-31 18:53:50,515 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:53:50,515 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:53:50,515 - poker_game - DEBUG - Active players: [2, 4]
2025-10-31 18:53:50,516 - poker_game - INFO - Advanced from player 1 to player 2 (seat order)
2025-10-31 18:53:50,516 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:53:50,516 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:53:50,516 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:53:50,516 - poker_game - DEBUG - Player bets: [20, 20], Current bet: 20, All same: True
2025-10-31 18:53:50,516 - poker_game - DEBUG - Active player indices: [2, 4]
2025-10-31 18:53:50,516 - poker_game - DEBUG - Last raiser index: 2
2025-10-31 18:53:50,516 - poker_game - DEBUG - Current player index: 2
2025-10-31 18:53:50,516 - poker_game - DEBUG - Next after last raiser 2: 4
2025-10-31 18:53:50,516 - poker_game - DEBUG - Betting continues: Current player 2 != next after raiser 4
2025-10-31 18:53:50,516 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:53:50,516 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:50,517 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:53:50,517 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:53:50,517 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:50,517 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:50,517 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:50,518 - poker_game - INFO - Community cards: []
2025-10-31 18:53:50,518 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:50,518 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=folded
2025-10-31 18:53:50,518 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=active
2025-10-31 18:53:50,519 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:50,519 - poker_game - INFO -   P4(Agent4): chips=789, bet=20, status=active
2025-10-31 18:53:50,519 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:53:50,519 - poker_game - INFO - ==================================================
2025-10-31 18:53:50,622 - poker_game - DEBUG - LLM Prompt for Agent2: {
  "your_id": 2,
  "phase": "preflop",
  "your_cards": [
    "2♣",
    "6♦"
  ],
  "community": [],
  "your_chips": 5,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 50,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 2,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6085,
      "bet": 10,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1666,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 789,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "all-in (5)"
  ],
  "history": [
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: A♠",
    "Player 3 checked",
    "Player 4 checked",
    "River dealt: K♦",
    "Player 3 checked",
    "Player 4 raised to 46",
    "Player 3 called 46",
    "Showdown: Player 3 hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦ cards=10♦, A♣",
    "Showdown: Player 4 hand=One Pair: Ks - A♠, K♥, K♦, Q♥, J♣ cards=9♠, K♥",
    "Side pot layer 0: amount=40, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 1: amount=30, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 2: amount=92, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded"
  ]
}
2025-10-31 18:53:50,632 - poker_game - DEBUG - Create Session: {'id': '9a0ee6f5-2187-475d-aae2-56494ed66cc3', 'appName': 'beginner_agent', 'userId': 'player_2', 'state': {}, 'events': [], 'lastUpdateTime': 1761904430.629834}
2025-10-31 18:53:52,584 - poker_game - INFO - LLM raw Response for Agent2: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（Preflop）で、あなたの手札は2と6（フロップが開かれる前の最初のベッティングラウンド）であり、これは非常に弱いハンドです。ポットには50ありますが、あなたがアクションを起こすためには20をコールする必要があります。すでにあなたのアクションには20がベットされているため、コールするには20です。しかし、あなたの手札は、このポットに参加するには弱すぎます。相手のプレイヤー（Player 4）が20をベットし、他のプレイヤーはフォールドしています。この状況では、より強いハンドを持っている可能性が高いため、フォールドするのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 159, 'promptTokenCount': 961, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 961}], 'totalTokenCount': 1120}, 'invocationId': 'e-5db54c4c-ec25-4f0b-bf3c-9010f2aea83a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'zeRStGwy', 'timestamp': 1761904430.644088}]
2025-10-31 18:53:52,585 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent2:
2025-10-31 18:53:52,585 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（Preflop）で、あなたの手札は2と6（フロップが開かれる前の最初のベッティングラウンド）であり、これは非常に弱いハンドです。ポットには50ありますが、あなたがアクションを起こすためには20をコールする必要があります。すでにあなたのアクションには20がベットされているため、コールするには20です。しかし、あなたの手札は、このポットに参加するには弱すぎます。相手のプレイヤー（Player 4）が20をベットし、他のプレイヤーはフォールドしています。この状況では、より強いハンドを持っている可能性が高いため、フォールドするのが最善の選択です。"
}
```
2025-10-31 18:53:52,585 - poker_game - DEBUG - [Agent2] Starting LLM API response parsing
2025-10-31 18:53:52,585 - poker_game - DEBUG - [Agent2] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（Preflop）で、あなたの手札は2と6（フロップが開かれる前の最初のベッティングラウンド）であり、これは非常に弱いハンドです。ポットには50ありますが、あなたがアクションを起こすためには20をコールする必要があります。すでにあなたのアクションには20がベットされているため、コールするには20です。しかし、あなたの手札は、このポットに参加するには弱すぎます。相手のプレイヤー（Player 4）が20をベットし、他のプレイヤーはフォールドしています。この状況では、より強いハンドを持っている可能性が高いため、フォールドするのが最善の選択です。"\n}\n```'
2025-10-31 18:53:52,585 - poker_game - DEBUG - [Agent2] Markdown code block detected
2025-10-31 18:53:52,586 - poker_game - DEBUG - [Agent2] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（Preflop）で、あなたの手札は2と6（フロップが開かれる前の最初のベッティングラウンド）であり、これは非常に弱いハンドです。ポットには50ありますが、あなたがアクションを起こすためには20をコールする必要があります。すでにあなたのアクションには20がベットされているため、コールするには20です。しかし、あなたの手札は、このポットに参加するには弱すぎます。相手のプレイヤー（Player 4）が20をベットし、他のプレイヤーはフォールドしています。この状況では、より強いハンドを持っている可能性が高いため、フォールドするのが最善の選択です。"\n}'
2025-10-31 18:53:52,586 - poker_game - DEBUG - [Agent2] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（Preflop）で、あなたの手札は2と6（フロップが開かれる前の最初のベッティングラウンド）であり、これは非常に弱いハンドです。ポットには50ありますが、あなたがアクションを起こすためには20をコールする必要があります。すでにあなたのアクションには20がベットされているため、コールするには20です。しかし、あなたの手札は、このポットに参加するには弱すぎます。相手のプレイヤー（Player 4）が20をベットし、他のプレイヤーはフォールドしています。この状況では、より強いハンドを持っている可能性が高いため、フォールドするのが最善の選択です。"
}
2025-10-31 18:53:52,586 - poker_game - DEBUG - [Agent2] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（Preflop）で、あなたの手札は2と6（フロップが開かれる前の最初のベッティングラウンド）であり、これは非常に弱いハンドです。ポットには50ありますが、あなたがアクションを起こすためには20をコールする必要があります。すでにあなたのアクションには20がベットされているため、コールするには20です。しかし、あなたの手札は、このポットに参加するには弱すぎます。相手のプレイヤー（Player 4）が20をベットし、他のプレイヤーはフォールドしています。この状況では、より強いハンドを持っている可能性が高いため、フォールドするのが最善の選択です。'}
2025-10-31 18:53:52,586 - poker_game - DEBUG - [Agent2] Extracted values - action: 'fold', amount: 0
2025-10-31 18:53:52,586 - poker_game - DEBUG - [Agent2] Action 'fold' normalized - amount set to 0
2025-10-31 18:53:52,586 - poker_game - DEBUG - [Agent2] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:53:52,586 - poker_game - INFO - [Agent2] Successfully parsed decision: fold, 0, プリフロップ（Preflop）で、あなたの手札は2と6（フロップが開かれる前の最初のベッティングラウンド）であり、これは非常に弱いハンドです。ポットには50ありますが、あなたがアクションを起こすためには20をコールする必要があります。すでにあなたのアクションには20がベットされているため、コールするには20です。しかし、あなたの手札は、このポットに参加するには弱すぎます。相手のプレイヤー（Player 4）が20をベットし、他のプレイヤーはフォールドしています。この状況では、より強いハンドを持っている可能性が高いため、フォールドするのが最善の選択です。
2025-10-31 18:53:52,587 - poker_game - INFO - >>> PROCESS_ACTION: Player 2 attempts 'fold' with amount 0
2025-10-31 18:53:52,587 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:53:52,587 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:52,588 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:53:52,588 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:53:52,588 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:52,588 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:52,588 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 3
2025-10-31 18:53:52,588 - poker_game - INFO - Community cards: []
2025-10-31 18:53:52,589 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:52,589 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=folded
2025-10-31 18:53:52,589 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=active
2025-10-31 18:53:52,589 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:52,589 - poker_game - INFO -   P4(Agent4): chips=789, bet=20, status=active
2025-10-31 18:53:52,590 - poker_game - INFO - ==================================================
2025-10-31 18:53:52,590 - poker_game - INFO - ACTION_EXECUTED: Player 2 folded
2025-10-31 18:53:52,614 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:53:52,614 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:52,615 - poker_game - INFO - Current player: 2, Dealer: 0
2025-10-31 18:53:52,615 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:53:52,615 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:52,615 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:52,615 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 4
2025-10-31 18:53:52,616 - poker_game - INFO - Community cards: []
2025-10-31 18:53:52,616 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:52,616 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=folded
2025-10-31 18:53:52,616 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=folded
2025-10-31 18:53:52,616 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:52,617 - poker_game - INFO -   P4(Agent4): chips=789, bet=20, status=active
2025-10-31 18:53:52,617 - poker_game - INFO - Extra: Action: Player 2 folded
2025-10-31 18:53:52,617 - poker_game - INFO - ==================================================
2025-10-31 18:53:52,617 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:53:52,617 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:53:52,618 - poker_game - DEBUG - Active players: [4]
2025-10-31 18:53:52,618 - poker_game - INFO - Advanced from player 2 to player 4 (seat order)
2025-10-31 18:53:52,618 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:53:52,618 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:53:52,618 - poker_game - DEBUG - Active: 1, All-in: 0
2025-10-31 18:53:52,618 - poker_game - INFO - Betting complete: Only 1 or fewer players remaining
2025-10-31 18:53:52,619 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:53:52,619 - poker_game - INFO - Hand #12, Phase: preflop
2025-10-31 18:53:52,619 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:53:52,619 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:53:52,620 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:52,620 - poker_game - INFO - Betting round complete: True
2025-10-31 18:53:52,621 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 4
2025-10-31 18:53:52,621 - poker_game - INFO - Community cards: []
2025-10-31 18:53:52,622 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:52,622 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=folded
2025-10-31 18:53:52,623 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=folded
2025-10-31 18:53:52,623 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:52,623 - poker_game - INFO -   P4(Agent4): chips=789, bet=20, status=active
2025-10-31 18:53:52,624 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:53:52,624 - poker_game - INFO - ==================================================
2025-10-31 18:53:52,728 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:53:52,728 - poker_game - INFO - Betting round complete: True
2025-10-31 18:53:52,729 - poker_game - INFO - Remaining players: 1
2025-10-31 18:53:52,729 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:53:52,730 - poker_game - INFO - Going to SHOWDOWN - only 1 or fewer players remaining
2025-10-31 18:53:52,730 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:53:52,730 - poker_game - INFO - Hand #12, Phase: showdown
2025-10-31 18:53:52,731 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:53:52,731 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:53:52,731 - poker_game - INFO - Last raiser: 2
2025-10-31 18:53:52,732 - poker_game - INFO - Betting round complete: True
2025-10-31 18:53:52,732 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 4
2025-10-31 18:53:52,732 - poker_game - INFO - Community cards: []
2025-10-31 18:53:52,732 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:53:52,733 - poker_game - INFO -   P1(Agent1): chips=6085, bet=10, status=folded
2025-10-31 18:53:52,733 - poker_game - INFO -   P2(Agent2): chips=5, bet=20, status=folded
2025-10-31 18:53:52,733 - poker_game - INFO -   P3(Agent3): chips=1666, bet=0, status=folded
2025-10-31 18:53:52,733 - poker_game - INFO -   P4(Agent4): chips=789, bet=20, status=active
2025-10-31 18:53:52,734 - poker_game - INFO - ==================================================
2025-10-31 18:53:52,734 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:53:52,734 - poker_game - INFO - Pot: 50, Community cards: []
2025-10-31 18:53:52,735 - poker_game - INFO -   Player 4 status=active cards=['10♣', '9♥']
2025-10-31 18:53:52,735 - poker_game - INFO - Showdown winner by default: Player 4 awarded 50
2025-10-31 18:53:52,735 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:53:52,736 - poker_game - INFO - === STARTING NEW HAND #13 ===
2025-10-31 18:53:52,736 - poker_game - INFO - Active players for new hand: 5
2025-10-31 18:53:52,737 - poker_game - INFO - Moving dealer button
2025-10-31 18:53:52,737 - poker_game - INFO - Posting blinds
2025-10-31 18:53:52,756 - poker_game - INFO - Dealing hole cards
2025-10-31 18:53:52,757 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:53:52,767 - poker_game - INFO - Started new hand in database: hand_id=13
2025-10-31 18:53:52,768 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:53:52,768 - poker_game - INFO - Hand #13, Phase: preflop
2025-10-31 18:53:52,769 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:53:52,769 - poker_game - INFO - Pot: 25, Current bet: 20
2025-10-31 18:53:52,770 - poker_game - INFO - Last raiser: 3
2025-10-31 18:53:52,770 - poker_game - INFO - Betting round complete: False
2025-10-31 18:53:52,770 - poker_game - INFO - Active players: 4, All-in: 1, Folded: 0
2025-10-31 18:53:52,771 - poker_game - INFO - Community cards: []
2025-10-31 18:53:52,771 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=active
2025-10-31 18:53:52,771 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=active
2025-10-31 18:53:52,771 - poker_game - INFO -   P2(Agent2): chips=0, bet=5, status=all_in
2025-10-31 18:53:52,772 - poker_game - INFO -   P3(Agent3): chips=1646, bet=20, status=active
2025-10-31 18:53:52,772 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=active
2025-10-31 18:53:52,773 - poker_game - INFO - ==================================================
2025-10-31 18:53:52,773 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "9♥",
    "Q♠"
  ],
  "community": [],
  "your_chips": 839,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 25,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6085,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 0,
      "bet": 5,
      "status": "all_in"
    },
    {
      "id": 3,
      "chips": 1646,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (839)"
  ],
  "history": [
    "Player 4 checked",
    "River dealt: K♦",
    "Player 3 checked",
    "Player 4 raised to 46",
    "Player 3 called 46",
    "Showdown: Player 3 hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦ cards=10♦, A♣",
    "Showdown: Player 4 hand=One Pair: Ks - A♠, K♥, K♦, Q♥, J♣ cards=9♠, K♥",
    "Side pot layer 0: amount=40, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 1: amount=30, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 2: amount=92, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 2 posted small blind 5",
    "Player 3 posted big blind 20"
  ]
}
2025-10-31 18:53:52,790 - poker_game - DEBUG - Create Session: {'id': 'e60d3b78-4df8-4915-b87c-c0fbde38da9d', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904432.7882814}
2025-10-31 18:54:02,822 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:54:06,814 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_SQmcX6kKZT3i8J6J3Bv0PzHD', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1295, 'totalTokenCount': 1312}, 'invocationId': 'e-c7a0ef55-143b-4aa7-9516-54f9afafef21', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'HzZdKmlY', 'timestamp': 1761904432.800881}, {'content': {'parts': [{'functionResponse': {'id': 'call_SQmcX6kKZT3i8J6J3Bv0PzHD', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-c7a0ef55-143b-4aa7-9516-54f9afafef21', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'wsyzaz1A', 'timestamp': 1761904434.293403}, {'content': {'parts': [{'functionCall': {'id': 'call_QscDts8cYFE95IJrqLDV7XrB', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1819, 'totalTokenCount': 1839}, 'invocationId': 'e-c7a0ef55-143b-4aa7-9516-54f9afafef21', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'FTNKToVL', 'timestamp': 1761904434.294989}, {'content': {'parts': [{'functionResponse': {'id': 'call_QscDts8cYFE95IJrqLDV7XrB', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-c7a0ef55-143b-4aa7-9516-54f9afafef21', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'FbiM5okt', 'timestamp': 1761904435.279714}, {'content': {'parts': [{'functionCall': {'id': 'call_hDmfhgpl3Z2Tit1Qfi1VIlZM', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1381, 'totalTokenCount': 1398}, 'invocationId': 'e-c7a0ef55-143b-4aa7-9516-54f9afafef21', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '6CU6Xjv2', 'timestamp': 1761904435.283949}, {'content': {'parts': [{'functionResponse': {'id': 'call_hDmfhgpl3Z2Tit1Qfi1VIlZM', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-c7a0ef55-143b-4aa7-9516-54f9afafef21', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'mvpmJNvj', 'timestamp': 1761904436.298317}, {'content': {'parts': [{'functionCall': {'id': 'call_mwAvoqOuCUd1Efua8Q1RcVIh', 'args': {'call_amount': 20, 'pot_after_call': 45, 'equity': 0.4}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 29, 'promptTokenCount': 1911, 'totalTokenCount': 1940}, 'invocationId': 'e-c7a0ef55-143b-4aa7-9516-54f9afafef21', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '4fSc6uBp', 'timestamp': 1761904436.30431}, {'content': {'parts': [{'functionResponse': {'id': 'call_mwAvoqOuCUd1Efua8Q1RcVIh', 'name': 'action_decision', 'response': {'error': 'Invoking `action_decision()` failed as the following mandatory input parameters are not present:\ngame_state\nYou could retry calling this tool, but it is IMPORTANT for you to provide all the mandatory parameters.'}}}], 'role': 'user'}, 'invocationId': 'e-c7a0ef55-143b-4aa7-9516-54f9afafef21', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'CopSfodh', 'timestamp': 1761904434.822273}, {'content': {'parts': [{'functionCall': {'id': 'call_W5ayJvvl76dnXRD6fNGKPHOt', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['9♥', 'Q♠'], 'community': [], 'your_chips': 839, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 0, 'pot': 25, 'to_call': 20, 'dealer_button': 1, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1405, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 6085, 'bet': 0, 'status': 'active'}, {'id': 2, 'chips': 0, 'bet': 5, 'status': 'all_in'}, {'id': 3, 'chips': 1646, 'bet': 20, 'status': 'active'}], 'actions': ['fold', 'call (20)', 'raise (min 40)', 'all-in (839)'], 'history': ['Player 4 checked', 'River dealt: K♦', 'Player 3 checked', 'Player 4 raised to 46', 'Player 3 called 46', 'Showdown: Player 3 hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦ cards=10♦, A♣', 'Showdown: Player 4 hand=One Pair: Ks - A♠, K♥, K♦, Q♥, J♣ cards=9♠, K♥', 'Side pot layer 0: amount=40, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦', 'Side pot layer 1: amount=30, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦', 'Side pot layer 2: amount=92, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦', 'Player 1 posted small blind 10', 'Player 2 posted big blind 20', 'Player 3 folded', 'Player 4 called 20', 'Player 0 folded', 'Player 1 folded', 'Player 2 folded', 'Showdown: Player 4 won 50', 'Player 2 posted small blind 5', 'Player 3 posted big blind 20']}, 'call_amount': 20, 'pot_after_call': 45, 'equity': 0.4}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 495, 'promptTokenCount': 1996, 'totalTokenCount': 2491}, 'invocationId': 'e-c7a0ef55-143b-4aa7-9516-54f9afafef21', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'Dd3pOheE', 'timestamp': 1761904434.826631}, {'content': {'parts': [{'functionResponse': {'id': 'call_W5ayJvvl76dnXRD6fNGKPHOt', 'name': 'action_decision', 'response': {'action': 'fold', 'amount': 0, 'reasoning': '期待値が6.00(ポットに対して24.00%で、マイナスなのでフォールド'}}}], 'role': 'user'}, 'invocationId': 'e-c7a0ef55-143b-4aa7-9516-54f9afafef21', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'AdKCRsZ5', 'timestamp': 1761904444.733814}, {'content': {'parts': [{'text': '{"action":"fold","amount":0,"reasoning":"期待値が6.00(ポットに対して24.00%で、マイナスなのでフォールド"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 39, 'promptTokenCount': 2543, 'totalTokenCount': 2582}, 'invocationId': 'e-c7a0ef55-143b-4aa7-9516-54f9afafef21', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'B9CZS2Ps', 'timestamp': 1761904444.736265}]
2025-10-31 18:54:06,814 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:54:06,814 - poker_game - DEBUG - {"action":"fold","amount":0,"reasoning":"期待値が6.00(ポットに対して24.00%で、マイナスなのでフォールド"}
2025-10-31 18:54:06,815 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:54:06,815 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"fold","amount":0,"reasoning":"期待値が6.00(ポットに対して24.00%で、マイナスなのでフォールド"}'
2025-10-31 18:54:06,815 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:54:06,815 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"fold","amount":0,"reasoning":"期待値が6.00(ポットに対して24.00%で、マイナスなのでフォールド"}
2025-10-31 18:54:06,815 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': '期待値が6.00(ポットに対して24.00%で、マイナスなのでフォールド'}
2025-10-31 18:54:06,815 - poker_game - DEBUG - [Agent4] Extracted values - action: 'fold', amount: 0
2025-10-31 18:54:06,816 - poker_game - DEBUG - [Agent4] Action 'fold' normalized - amount set to 0
2025-10-31 18:54:06,816 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:54:06,816 - poker_game - INFO - [Agent4] Successfully parsed decision: fold, 0, 期待値が6.00(ポットに対して24.00%で、マイナスなのでフォールド
2025-10-31 18:54:06,816 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'fold' with amount 0
2025-10-31 18:54:06,817 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:54:06,817 - poker_game - INFO - Hand #13, Phase: preflop
2025-10-31 18:54:06,817 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:54:06,817 - poker_game - INFO - Pot: 25, Current bet: 20
2025-10-31 18:54:06,818 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:06,818 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:06,818 - poker_game - INFO - Active players: 4, All-in: 1, Folded: 0
2025-10-31 18:54:06,818 - poker_game - INFO - Community cards: []
2025-10-31 18:54:06,818 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=active
2025-10-31 18:54:06,818 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=active
2025-10-31 18:54:06,818 - poker_game - INFO -   P2(Agent2): chips=0, bet=5, status=all_in
2025-10-31 18:54:06,819 - poker_game - INFO -   P3(Agent3): chips=1646, bet=20, status=active
2025-10-31 18:54:06,819 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=active
2025-10-31 18:54:06,819 - poker_game - INFO - ==================================================
2025-10-31 18:54:06,819 - poker_game - INFO - ACTION_EXECUTED: Player 4 folded
2025-10-31 18:54:06,829 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:54:06,830 - poker_game - INFO - Hand #13, Phase: preflop
2025-10-31 18:54:06,830 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:54:06,830 - poker_game - INFO - Pot: 25, Current bet: 20
2025-10-31 18:54:06,830 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:06,830 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:06,831 - poker_game - INFO - Active players: 3, All-in: 1, Folded: 1
2025-10-31 18:54:06,831 - poker_game - INFO - Community cards: []
2025-10-31 18:54:06,832 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=active
2025-10-31 18:54:06,832 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=active
2025-10-31 18:54:06,832 - poker_game - INFO -   P2(Agent2): chips=0, bet=5, status=all_in
2025-10-31 18:54:06,832 - poker_game - INFO -   P3(Agent3): chips=1646, bet=20, status=active
2025-10-31 18:54:06,833 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:06,833 - poker_game - INFO - Extra: Action: Player 4 folded
2025-10-31 18:54:06,833 - poker_game - INFO - ==================================================
2025-10-31 18:54:06,833 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:54:06,833 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:54:06,833 - poker_game - DEBUG - Active players: [0, 1, 3]
2025-10-31 18:54:06,834 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:54:06,834 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:54:06,834 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:54:06,834 - poker_game - DEBUG - Active: 3, All-in: 1
2025-10-31 18:54:06,834 - poker_game - DEBUG - Player bets: [0, 0, 20], Current bet: 20, All same: False
2025-10-31 18:54:06,834 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:54:06,835 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:54:06,835 - poker_game - INFO - Hand #13, Phase: preflop
2025-10-31 18:54:06,835 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:54:06,835 - poker_game - INFO - Pot: 25, Current bet: 20
2025-10-31 18:54:06,835 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:06,836 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:06,836 - poker_game - INFO - Active players: 3, All-in: 1, Folded: 1
2025-10-31 18:54:06,836 - poker_game - INFO - Community cards: []
2025-10-31 18:54:06,836 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=active
2025-10-31 18:54:06,836 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=active
2025-10-31 18:54:06,837 - poker_game - INFO -   P2(Agent2): chips=0, bet=5, status=all_in
2025-10-31 18:54:06,837 - poker_game - INFO -   P3(Agent3): chips=1646, bet=20, status=active
2025-10-31 18:54:06,837 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:06,837 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:54:06,837 - poker_game - INFO - ==================================================
2025-10-31 18:54:06,939 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "3♥",
    "2♥"
  ],
  "community": [],
  "your_chips": 1405,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 25,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6085,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 2,
      "chips": 0,
      "bet": 5,
      "status": "all_in"
    },
    {
      "id": 3,
      "chips": 1646,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 839,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1405)"
  ],
  "history": [
    "River dealt: K♦",
    "Player 3 checked",
    "Player 4 raised to 46",
    "Player 3 called 46",
    "Showdown: Player 3 hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦ cards=10♦, A♣",
    "Showdown: Player 4 hand=One Pair: Ks - A♠, K♥, K♦, Q♥, J♣ cards=9♠, K♥",
    "Side pot layer 0: amount=40, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 1: amount=30, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 2: amount=92, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 2 posted small blind 5",
    "Player 3 posted big blind 20",
    "Player 4 folded"
  ]
}
2025-10-31 18:54:06,948 - poker_game - DEBUG - Create Session: {'id': '886438dd-5cae-4c51-acdd-1e9392e5e682', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904446.946322}
2025-10-31 18:54:09,024 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は3♥2♥と非常に弱いです。これは「スーテッドコネクター」ですが、数字が低いため、強い役を作る可能性が低いです。ポットにはすでに25ありますが、コールするには20必要です。これはそれほど大きくありませんが、私の手札の弱さを考えると、フォールド（降りる）するのが最善です。特に、他のプレイヤーのベット状況やプレイスタイルが不明なため、リスクを避けるのが賢明です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 144, 'promptTokenCount': 991, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 991}], 'totalTokenCount': 1135}, 'invocationId': 'e-584f698f-f203-4dac-aa4c-13147dc69426', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'iufx6lln', 'timestamp': 1761904446.958121}]
2025-10-31 18:54:09,024 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:54:09,024 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は3♥2♥と非常に弱いです。これは「スーテッドコネクター」ですが、数字が低いため、強い役を作る可能性が低いです。ポットにはすでに25ありますが、コールするには20必要です。これはそれほど大きくありませんが、私の手札の弱さを考えると、フォールド（降りる）するのが最善です。特に、他のプレイヤーのベット状況やプレイスタイルが不明なため、リスクを避けるのが賢明です。"
}
```
2025-10-31 18:54:09,025 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:54:09,025 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は3♥2♥と非常に弱いです。これは「スーテッドコネクター」ですが、数字が低いため、強い役を作る可能性が低いです。ポットにはすでに25ありますが、コールするには20必要です。これはそれほど大きくありませんが、私の手札の弱さを考えると、フォールド（降りる）するのが最善です。特に、他のプレイヤーのベット状況やプレイスタイルが不明なため、リスクを避けるのが賢明です。"\n}\n```'
2025-10-31 18:54:09,025 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:54:09,025 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は3♥2♥と非常に弱いです。これは「スーテッドコネクター」ですが、数字が低いため、強い役を作る可能性が低いです。ポットにはすでに25ありますが、コールするには20必要です。これはそれほど大きくありませんが、私の手札の弱さを考えると、フォールド（降りる）するのが最善です。特に、他のプレイヤーのベット状況やプレイスタイルが不明なため、リスクを避けるのが賢明です。"\n}'
2025-10-31 18:54:09,025 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は3♥2♥と非常に弱いです。これは「スーテッドコネクター」ですが、数字が低いため、強い役を作る可能性が低いです。ポットにはすでに25ありますが、コールするには20必要です。これはそれほど大きくありませんが、私の手札の弱さを考えると、フォールド（降りる）するのが最善です。特に、他のプレイヤーのベット状況やプレイスタイルが不明なため、リスクを避けるのが賢明です。"
}
2025-10-31 18:54:09,025 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（最初のカードが配られた後）で、私の手札は3♥2♥と非常に弱いです。これは「スーテッドコネクター」ですが、数字が低いため、強い役を作る可能性が低いです。ポットにはすでに25ありますが、コールするには20必要です。これはそれほど大きくありませんが、私の手札の弱さを考えると、フォールド（降りる）するのが最善です。特に、他のプレイヤーのベット状況やプレイスタイルが不明なため、リスクを避けるのが賢明です。'}
2025-10-31 18:54:09,025 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 18:54:09,025 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 18:54:09,025 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:54:09,025 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップ（最初のカードが配られた後）で、私の手札は3♥2♥と非常に弱いです。これは「スーテッドコネクター」ですが、数字が低いため、強い役を作る可能性が低いです。ポットにはすでに25ありますが、コールするには20必要です。これはそれほど大きくありませんが、私の手札の弱さを考えると、フォールド（降りる）するのが最善です。特に、他のプレイヤーのベット状況やプレイスタイルが不明なため、リスクを避けるのが賢明です。
2025-10-31 18:54:09,026 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 18:54:09,027 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:54:09,027 - poker_game - INFO - Hand #13, Phase: preflop
2025-10-31 18:54:09,027 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:54:09,027 - poker_game - INFO - Pot: 25, Current bet: 20
2025-10-31 18:54:09,028 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:09,028 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:09,028 - poker_game - INFO - Active players: 3, All-in: 1, Folded: 1
2025-10-31 18:54:09,028 - poker_game - INFO - Community cards: []
2025-10-31 18:54:09,028 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=active
2025-10-31 18:54:09,028 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=active
2025-10-31 18:54:09,028 - poker_game - INFO -   P2(Agent2): chips=0, bet=5, status=all_in
2025-10-31 18:54:09,029 - poker_game - INFO -   P3(Agent3): chips=1646, bet=20, status=active
2025-10-31 18:54:09,029 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:09,029 - poker_game - INFO - ==================================================
2025-10-31 18:54:09,029 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 18:54:09,040 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:54:09,040 - poker_game - INFO - Hand #13, Phase: preflop
2025-10-31 18:54:09,040 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:54:09,041 - poker_game - INFO - Pot: 25, Current bet: 20
2025-10-31 18:54:09,041 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:09,041 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:09,041 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 2
2025-10-31 18:54:09,042 - poker_game - INFO - Community cards: []
2025-10-31 18:54:09,042 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:09,042 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=active
2025-10-31 18:54:09,042 - poker_game - INFO -   P2(Agent2): chips=0, bet=5, status=all_in
2025-10-31 18:54:09,042 - poker_game - INFO -   P3(Agent3): chips=1646, bet=20, status=active
2025-10-31 18:54:09,042 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:09,042 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 18:54:09,043 - poker_game - INFO - ==================================================
2025-10-31 18:54:09,043 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:54:09,043 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:54:09,043 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:54:09,043 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:54:09,043 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:54:09,044 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:54:09,044 - poker_game - DEBUG - Active: 2, All-in: 1
2025-10-31 18:54:09,044 - poker_game - DEBUG - Player bets: [0, 20], Current bet: 20, All same: False
2025-10-31 18:54:09,044 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:54:09,044 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:54:09,044 - poker_game - INFO - Hand #13, Phase: preflop
2025-10-31 18:54:09,044 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:54:09,045 - poker_game - INFO - Pot: 25, Current bet: 20
2025-10-31 18:54:09,045 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:09,045 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:09,045 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 2
2025-10-31 18:54:09,045 - poker_game - INFO - Community cards: []
2025-10-31 18:54:09,045 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:09,045 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=active
2025-10-31 18:54:09,046 - poker_game - INFO -   P2(Agent2): chips=0, bet=5, status=all_in
2025-10-31 18:54:09,046 - poker_game - INFO -   P3(Agent3): chips=1646, bet=20, status=active
2025-10-31 18:54:09,046 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:09,046 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:54:09,047 - poker_game - INFO - ==================================================
2025-10-31 18:54:09,149 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "J♠",
    "2♦"
  ],
  "community": [],
  "your_chips": 6085,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 25,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 0,
      "bet": 5,
      "status": "all_in"
    },
    {
      "id": 3,
      "chips": 1646,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 839,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (6085)"
  ],
  "history": [
    "Player 3 checked",
    "Player 4 raised to 46",
    "Player 3 called 46",
    "Showdown: Player 3 hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦ cards=10♦, A♣",
    "Showdown: Player 4 hand=One Pair: Ks - A♠, K♥, K♦, Q♥, J♣ cards=9♠, K♥",
    "Side pot layer 0: amount=40, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 1: amount=30, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 2: amount=92, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 2 posted small blind 5",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded"
  ]
}
2025-10-31 18:54:09,162 - poker_game - DEBUG - Create Session: {'id': '8f07726c-9590-4555-909e-cc4fa1fea99a', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904449.159073}
2025-10-31 18:54:10,597 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "J2オフスート（J♠2♦）は、フロップ前の非常に弱いハンドです。ポットにはすでに25ありますが、コールするには20必要で、さらにプリフロップではレイズも難しいため、フォールドが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 85, 'promptTokenCount': 990, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 990}], 'totalTokenCount': 1075}, 'invocationId': 'e-c6038f08-d08c-4e13-9ff9-d7a03d7ed52b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '1ht5kD5u', 'timestamp': 1761904449.171648}]
2025-10-31 18:54:10,597 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:54:10,597 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "J2オフスート（J♠2♦）は、フロップ前の非常に弱いハンドです。ポットにはすでに25ありますが、コールするには20必要で、さらにプリフロップではレイズも難しいため、フォールドが最善です。"
}
```
2025-10-31 18:54:10,599 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:54:10,599 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "J2オフスート（J♠2♦）は、フロップ前の非常に弱いハンドです。ポットにはすでに25ありますが、コールするには20必要で、さらにプリフロップではレイズも難しいため、フォールドが最善です。"\n}\n```'
2025-10-31 18:54:10,599 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:54:10,599 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "J2オフスート（J♠2♦）は、フロップ前の非常に弱いハンドです。ポットにはすでに25ありますが、コールするには20必要で、さらにプリフロップではレイズも難しいため、フォールドが最善です。"\n}'
2025-10-31 18:54:10,600 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "J2オフスート（J♠2♦）は、フロップ前の非常に弱いハンドです。ポットにはすでに25ありますが、コールするには20必要で、さらにプリフロップではレイズも難しいため、フォールドが最善です。"
}
2025-10-31 18:54:10,600 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'J2オフスート（J♠2♦）は、フロップ前の非常に弱いハンドです。ポットにはすでに25ありますが、コールするには20必要で、さらにプリフロップではレイズも難しいため、フォールドが最善です。'}
2025-10-31 18:54:10,600 - poker_game - DEBUG - [Agent1] Extracted values - action: 'fold', amount: 0
2025-10-31 18:54:10,600 - poker_game - DEBUG - [Agent1] Action 'fold' normalized - amount set to 0
2025-10-31 18:54:10,600 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:54:10,600 - poker_game - INFO - [Agent1] Successfully parsed decision: fold, 0, J2オフスート（J♠2♦）は、フロップ前の非常に弱いハンドです。ポットにはすでに25ありますが、コールするには20必要で、さらにプリフロップではレイズも難しいため、フォールドが最善です。
2025-10-31 18:54:10,601 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'fold' with amount 0
2025-10-31 18:54:10,601 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:54:10,601 - poker_game - INFO - Hand #13, Phase: preflop
2025-10-31 18:54:10,602 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:54:10,602 - poker_game - INFO - Pot: 25, Current bet: 20
2025-10-31 18:54:10,602 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:10,602 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:10,602 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 2
2025-10-31 18:54:10,602 - poker_game - INFO - Community cards: []
2025-10-31 18:54:10,603 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:10,603 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=active
2025-10-31 18:54:10,603 - poker_game - INFO -   P2(Agent2): chips=0, bet=5, status=all_in
2025-10-31 18:54:10,604 - poker_game - INFO -   P3(Agent3): chips=1646, bet=20, status=active
2025-10-31 18:54:10,604 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:10,604 - poker_game - INFO - ==================================================
2025-10-31 18:54:10,604 - poker_game - INFO - ACTION_EXECUTED: Player 1 folded
2025-10-31 18:54:10,616 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:54:10,617 - poker_game - INFO - Hand #13, Phase: preflop
2025-10-31 18:54:10,617 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:54:10,618 - poker_game - INFO - Pot: 25, Current bet: 20
2025-10-31 18:54:10,618 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:10,618 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:10,618 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 3
2025-10-31 18:54:10,619 - poker_game - INFO - Community cards: []
2025-10-31 18:54:10,619 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:10,619 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:10,620 - poker_game - INFO -   P2(Agent2): chips=0, bet=5, status=all_in
2025-10-31 18:54:10,620 - poker_game - INFO -   P3(Agent3): chips=1646, bet=20, status=active
2025-10-31 18:54:10,620 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:10,620 - poker_game - INFO - Extra: Action: Player 1 folded
2025-10-31 18:54:10,621 - poker_game - INFO - ==================================================
2025-10-31 18:54:10,621 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:54:10,621 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:54:10,621 - poker_game - DEBUG - Active players: [3]
2025-10-31 18:54:10,621 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 18:54:10,621 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:54:10,622 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:54:10,622 - poker_game - DEBUG - Active: 1, All-in: 1
2025-10-31 18:54:10,622 - poker_game - INFO - Betting complete: Single active player has matched the bet
2025-10-31 18:54:10,622 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:54:10,623 - poker_game - INFO - Hand #13, Phase: preflop
2025-10-31 18:54:10,623 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:54:10,623 - poker_game - INFO - Pot: 25, Current bet: 20
2025-10-31 18:54:10,624 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:10,624 - poker_game - INFO - Betting round complete: True
2025-10-31 18:54:10,624 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 3
2025-10-31 18:54:10,627 - poker_game - INFO - Community cards: []
2025-10-31 18:54:10,629 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:10,632 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:10,634 - poker_game - INFO -   P2(Agent2): chips=0, bet=5, status=all_in
2025-10-31 18:54:10,635 - poker_game - INFO -   P3(Agent3): chips=1646, bet=20, status=active
2025-10-31 18:54:10,636 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:10,636 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:54:10,636 - poker_game - INFO - ==================================================
2025-10-31 18:54:10,737 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:54:10,737 - poker_game - INFO - Betting round complete: True
2025-10-31 18:54:10,738 - poker_game - INFO - Remaining players: 2
2025-10-31 18:54:10,738 - poker_game - DEBUG -   Remaining P2: Agent2, status: all_in
2025-10-31 18:54:10,739 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:54:10,739 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:54:10,763 - poker_game - INFO - Starting new betting round
2025-10-31 18:54:10,764 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:54:10,764 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:54:10,765 - poker_game - DEBUG - Active players for new betting round: [3]
2025-10-31 18:54:10,765 - poker_game - DEBUG - Dealer button: 1
2025-10-31 18:54:10,765 - poker_game - INFO - First actor: Player 3 (by phase rule), was 3
2025-10-31 18:54:10,766 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:54:10,766 - poker_game - INFO - Hand #13, Phase: flop
2025-10-31 18:54:10,767 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:54:10,767 - poker_game - INFO - Pot: 25, Current bet: 0
2025-10-31 18:54:10,767 - poker_game - INFO - Last raiser: None
2025-10-31 18:54:10,767 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:10,768 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 3
2025-10-31 18:54:10,768 - poker_game - INFO - Community cards: ['6♣', '8♣', '2♣']
2025-10-31 18:54:10,769 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:10,769 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:10,769 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=all_in
2025-10-31 18:54:10,770 - poker_game - INFO -   P3(Agent3): chips=1646, bet=0, status=active
2025-10-31 18:54:10,771 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:10,772 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:54:10,772 - poker_game - INFO - ==================================================
2025-10-31 18:54:10,775 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "flop",
  "your_cards": [
    "8♥",
    "9♠"
  ],
  "community": [
    "6♣",
    "8♣",
    "2♣"
  ],
  "your_chips": 1646,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 25,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6085,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 0,
      "bet": 0,
      "status": "all_in"
    },
    {
      "id": 4,
      "chips": 839,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1646)"
  ],
  "history": [
    "Player 3 called 46",
    "Showdown: Player 3 hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦ cards=10♦, A♣",
    "Showdown: Player 4 hand=One Pair: Ks - A♠, K♥, K♦, Q♥, J♣ cards=9♠, K♥",
    "Side pot layer 0: amount=40, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 1: amount=30, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 2: amount=92, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 2 posted small blind 5",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 6♣, 8♣, 2♣"
  ]
}
2025-10-31 18:54:10,827 - poker_game - DEBUG - Create Session: {'id': '9a6aa6fd-bf25-43a4-8be9-3448fd8f9f29', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904450.8238697}
2025-10-31 18:54:12,783 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "フロップでペアができており（8♥, 8♣）、フラッシュの可能性もある（8♥, 8♣, 6♣, 2♣）。ポットサイズを考えると、ベット額を増やして相手にプレッシャーをかけるのが良い戦略です。相手がオールインしているプレイヤー1名以外は全員フォールドしているので、残りのプレイヤーのベット額を考慮して、最低限のレイズで様子を見ます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 125, 'promptTokenCount': 1013, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1013}], 'totalTokenCount': 1138}, 'invocationId': 'e-1b30c1d1-73a3-42dd-b13a-7b8e32b01684', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'un2CaT4v', 'timestamp': 1761904450.841461}]
2025-10-31 18:54:12,784 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:54:12,784 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 60,
  "reasoning": "フロップでペアができており（8♥, 8♣）、フラッシュの可能性もある（8♥, 8♣, 6♣, 2♣）。ポットサイズを考えると、ベット額を増やして相手にプレッシャーをかけるのが良い戦略です。相手がオールインしているプレイヤー1名以外は全員フォールドしているので、残りのプレイヤーのベット額を考慮して、最低限のレイズで様子を見ます。"
}
```
2025-10-31 18:54:12,784 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:54:12,785 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "フロップでペアができており（8♥, 8♣）、フラッシュの可能性もある（8♥, 8♣, 6♣, 2♣）。ポットサイズを考えると、ベット額を増やして相手にプレッシャーをかけるのが良い戦略です。相手がオールインしているプレイヤー1名以外は全員フォールドしているので、残りのプレイヤーのベット額を考慮して、最低限のレイズで様子を見ます。"\n}\n```'
2025-10-31 18:54:12,785 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:54:12,785 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "フロップでペアができており（8♥, 8♣）、フラッシュの可能性もある（8♥, 8♣, 6♣, 2♣）。ポットサイズを考えると、ベット額を増やして相手にプレッシャーをかけるのが良い戦略です。相手がオールインしているプレイヤー1名以外は全員フォールドしているので、残りのプレイヤーのベット額を考慮して、最低限のレイズで様子を見ます。"\n}'
2025-10-31 18:54:12,785 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "raise",
  "amount": 60,
  "reasoning": "フロップでペアができており（8♥, 8♣）、フラッシュの可能性もある（8♥, 8♣, 6♣, 2♣）。ポットサイズを考えると、ベット額を増やして相手にプレッシャーをかけるのが良い戦略です。相手がオールインしているプレイヤー1名以外は全員フォールドしているので、残りのプレイヤーのベット額を考慮して、最低限のレイズで様子を見ます。"
}
2025-10-31 18:54:12,785 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'raise', 'amount': 60, 'reasoning': 'フロップでペアができており（8♥, 8♣）、フラッシュの可能性もある（8♥, 8♣, 6♣, 2♣）。ポットサイズを考えると、ベット額を増やして相手にプレッシャーをかけるのが良い戦略です。相手がオールインしているプレイヤー1名以外は全員フォールドしているので、残りのプレイヤーのベット額を考慮して、最低限のレイズで様子を見ます。'}
2025-10-31 18:54:12,785 - poker_game - DEBUG - [Agent3] Extracted values - action: 'raise', amount: 60
2025-10-31 18:54:12,786 - poker_game - DEBUG - [Agent3] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1646)']
2025-10-31 18:54:12,786 - poker_game - DEBUG - [Agent3] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:54:12,786 - poker_game - DEBUG - [Agent3] Raise amount 60 is valid (min: 20)
2025-10-31 18:54:12,786 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'raise', 'amount': 60}
2025-10-31 18:54:12,787 - poker_game - INFO - [Agent3] Successfully parsed decision: raise, 60, フロップでペアができており（8♥, 8♣）、フラッシュの可能性もある（8♥, 8♣, 6♣, 2♣）。ポットサイズを考えると、ベット額を増やして相手にプレッシャーをかけるのが良い戦略です。相手がオールインしているプレイヤー1名以外は全員フォールドしているので、残りのプレイヤーのベット額を考慮して、最低限のレイズで様子を見ます。
2025-10-31 18:54:12,788 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'raise' with amount 60
2025-10-31 18:54:12,788 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:54:12,789 - poker_game - INFO - Hand #13, Phase: flop
2025-10-31 18:54:12,789 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:54:12,790 - poker_game - INFO - Pot: 25, Current bet: 0
2025-10-31 18:54:12,790 - poker_game - INFO - Last raiser: None
2025-10-31 18:54:12,790 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:12,790 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 3
2025-10-31 18:54:12,791 - poker_game - INFO - Community cards: ['6♣', '8♣', '2♣']
2025-10-31 18:54:12,792 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:12,792 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:12,793 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=all_in
2025-10-31 18:54:12,794 - poker_game - INFO -   P3(Agent3): chips=1646, bet=0, status=active
2025-10-31 18:54:12,794 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:12,795 - poker_game - INFO - ==================================================
2025-10-31 18:54:12,795 - poker_game - INFO - ACTION_EXECUTED: Player 3 raised to 60
2025-10-31 18:54:12,811 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:54:12,812 - poker_game - INFO - Hand #13, Phase: flop
2025-10-31 18:54:12,813 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:54:12,813 - poker_game - INFO - Pot: 85, Current bet: 60
2025-10-31 18:54:12,814 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:12,814 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:12,814 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 3
2025-10-31 18:54:12,814 - poker_game - INFO - Community cards: ['6♣', '8♣', '2♣']
2025-10-31 18:54:12,815 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:12,815 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:12,815 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=all_in
2025-10-31 18:54:12,816 - poker_game - INFO -   P3(Agent3): chips=1586, bet=60, status=active
2025-10-31 18:54:12,816 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:12,816 - poker_game - INFO - Extra: Action: Player 3 raised to 60
2025-10-31 18:54:12,817 - poker_game - INFO - ==================================================
2025-10-31 18:54:12,817 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:54:12,818 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:54:12,818 - poker_game - DEBUG - Active players: [3]
2025-10-31 18:54:12,818 - poker_game - INFO - Advanced from player 3 to player 3 (seat order)
2025-10-31 18:54:12,818 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:54:12,819 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:54:12,819 - poker_game - DEBUG - Active: 1, All-in: 1
2025-10-31 18:54:12,819 - poker_game - INFO - Betting complete: Single active player has matched the bet
2025-10-31 18:54:12,819 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:54:12,820 - poker_game - INFO - Hand #13, Phase: flop
2025-10-31 18:54:12,820 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:54:12,820 - poker_game - INFO - Pot: 85, Current bet: 60
2025-10-31 18:54:12,821 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:12,821 - poker_game - INFO - Betting round complete: True
2025-10-31 18:54:12,822 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 3
2025-10-31 18:54:12,822 - poker_game - INFO - Community cards: ['6♣', '8♣', '2♣']
2025-10-31 18:54:12,823 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:12,823 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:12,824 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=all_in
2025-10-31 18:54:12,824 - poker_game - INFO -   P3(Agent3): chips=1586, bet=60, status=active
2025-10-31 18:54:12,824 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:12,824 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:54:12,825 - poker_game - INFO - ==================================================
2025-10-31 18:54:12,926 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:54:12,926 - poker_game - INFO - Betting round complete: True
2025-10-31 18:54:12,927 - poker_game - INFO - Remaining players: 2
2025-10-31 18:54:12,927 - poker_game - DEBUG -   Remaining P2: Agent2, status: all_in
2025-10-31 18:54:12,927 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:54:12,927 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 18:54:12,938 - poker_game - INFO - Starting new betting round
2025-10-31 18:54:12,939 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:54:12,939 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:54:12,939 - poker_game - DEBUG - Active players for new betting round: [3]
2025-10-31 18:54:12,940 - poker_game - DEBUG - Dealer button: 1
2025-10-31 18:54:12,940 - poker_game - INFO - First actor: Player 3 (by phase rule), was 3
2025-10-31 18:54:12,940 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:54:12,941 - poker_game - INFO - Hand #13, Phase: turn
2025-10-31 18:54:12,941 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:54:12,941 - poker_game - INFO - Pot: 85, Current bet: 0
2025-10-31 18:54:12,942 - poker_game - INFO - Last raiser: None
2025-10-31 18:54:12,942 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:12,943 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 3
2025-10-31 18:54:12,943 - poker_game - INFO - Community cards: ['6♣', '8♣', '2♣', '10♥']
2025-10-31 18:54:12,944 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:12,945 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:12,946 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=all_in
2025-10-31 18:54:12,947 - poker_game - INFO -   P3(Agent3): chips=1586, bet=0, status=active
2025-10-31 18:54:12,947 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:12,947 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 18:54:12,948 - poker_game - INFO - ==================================================
2025-10-31 18:54:12,949 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "turn",
  "your_cards": [
    "8♥",
    "9♠"
  ],
  "community": [
    "6♣",
    "8♣",
    "2♣",
    "10♥"
  ],
  "your_chips": 1586,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 85,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6085,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 0,
      "bet": 0,
      "status": "all_in"
    },
    {
      "id": 4,
      "chips": 839,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1586)"
  ],
  "history": [
    "Showdown: Player 4 hand=One Pair: Ks - A♠, K♥, K♦, Q♥, J♣ cards=9♠, K♥",
    "Side pot layer 0: amount=40, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 1: amount=30, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 2: amount=92, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 2 posted small blind 5",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 6♣, 8♣, 2♣",
    "Player 3 raised to 60",
    "Turn dealt: 10♥"
  ]
}
2025-10-31 18:54:12,975 - poker_game - DEBUG - Create Session: {'id': '8768035c-6509-4c79-b957-155496e83608', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904452.9717908}
2025-10-31 18:54:15,287 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたの手札（8♥, 9♠）はコミュニティカード（6♣, 8♣, 2♣, 10♥）と組み合わせて、ワンペア（8のペア）ができています。これはそこそこ強いハンドですが、相手がフラッシュ（♣のカードが3枚ある）やストレート（10♥があるので、JやQなど）を完成させている可能性も考慮する必要があります。ポットサイズ（85）に対して、コール金額（to_call: 0）は0なので、チェックして次のカード（リバー）を見るのが最もリスクが低く、情報収集にも役立ちます。もし相手がベットしてきたら、その額を見てから判断しましょう。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 184, 'promptTokenCount': 990, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 990}], 'totalTokenCount': 1174}, 'invocationId': 'e-aa8a81b2-90f0-40ec-9d87-68af8a0c3cdd', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '91wa5x23', 'timestamp': 1761904452.991417}]
2025-10-31 18:54:15,288 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:54:15,288 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "現在の状況では、あなたの手札（8♥, 9♠）はコミュニティカード（6♣, 8♣, 2♣, 10♥）と組み合わせて、ワンペア（8のペア）ができています。これはそこそこ強いハンドですが、相手がフラッシュ（♣のカードが3枚ある）やストレート（10♥があるので、JやQなど）を完成させている可能性も考慮する必要があります。ポットサイズ（85）に対して、コール金額（to_call: 0）は0なので、チェックして次のカード（リバー）を見るのが最もリスクが低く、情報収集にも役立ちます。もし相手がベットしてきたら、その額を見てから判断しましょう。"
}
```
2025-10-31 18:54:15,289 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:54:15,289 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたの手札（8♥, 9♠）はコミュニティカード（6♣, 8♣, 2♣, 10♥）と組み合わせて、ワンペア（8のペア）ができています。これはそこそこ強いハンドですが、相手がフラッシュ（♣のカードが3枚ある）やストレート（10♥があるので、JやQなど）を完成させている可能性も考慮する必要があります。ポットサイズ（85）に対して、コール金額（to_call: 0）は0なので、チェックして次のカード（リバー）を見るのが最もリスクが低く、情報収集にも役立ちます。もし相手がベットしてきたら、その額を見てから判断しましょう。"\n}\n```'
2025-10-31 18:54:15,289 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:54:15,290 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたの手札（8♥, 9♠）はコミュニティカード（6♣, 8♣, 2♣, 10♥）と組み合わせて、ワンペア（8のペア）ができています。これはそこそこ強いハンドですが、相手がフラッシュ（♣のカードが3枚ある）やストレート（10♥があるので、JやQなど）を完成させている可能性も考慮する必要があります。ポットサイズ（85）に対して、コール金額（to_call: 0）は0なので、チェックして次のカード（リバー）を見るのが最もリスクが低く、情報収集にも役立ちます。もし相手がベットしてきたら、その額を見てから判断しましょう。"\n}'
2025-10-31 18:54:15,290 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "現在の状況では、あなたの手札（8♥, 9♠）はコミュニティカード（6♣, 8♣, 2♣, 10♥）と組み合わせて、ワンペア（8のペア）ができています。これはそこそこ強いハンドですが、相手がフラッシュ（♣のカードが3枚ある）やストレート（10♥があるので、JやQなど）を完成させている可能性も考慮する必要があります。ポットサイズ（85）に対して、コール金額（to_call: 0）は0なので、チェックして次のカード（リバー）を見るのが最もリスクが低く、情報収集にも役立ちます。もし相手がベットしてきたら、その額を見てから判断しましょう。"
}
2025-10-31 18:54:15,291 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '現在の状況では、あなたの手札（8♥, 9♠）はコミュニティカード（6♣, 8♣, 2♣, 10♥）と組み合わせて、ワンペア（8のペア）ができています。これはそこそこ強いハンドですが、相手がフラッシュ（♣のカードが3枚ある）やストレート（10♥があるので、JやQなど）を完成させている可能性も考慮する必要があります。ポットサイズ（85）に対して、コール金額（to_call: 0）は0なので、チェックして次のカード（リバー）を見るのが最もリスクが低く、情報収集にも役立ちます。もし相手がベットしてきたら、その額を見てから判断しましょう。'}
2025-10-31 18:54:15,291 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 18:54:15,291 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 18:54:15,291 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:54:15,292 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, 現在の状況では、あなたの手札（8♥, 9♠）はコミュニティカード（6♣, 8♣, 2♣, 10♥）と組み合わせて、ワンペア（8のペア）ができています。これはそこそこ強いハンドですが、相手がフラッシュ（♣のカードが3枚ある）やストレート（10♥があるので、JやQなど）を完成させている可能性も考慮する必要があります。ポットサイズ（85）に対して、コール金額（to_call: 0）は0なので、チェックして次のカード（リバー）を見るのが最もリスクが低く、情報収集にも役立ちます。もし相手がベットしてきたら、その額を見てから判断しましょう。
2025-10-31 18:54:15,293 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 18:54:15,294 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:54:15,294 - poker_game - INFO - Hand #13, Phase: turn
2025-10-31 18:54:15,295 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:54:15,295 - poker_game - INFO - Pot: 85, Current bet: 0
2025-10-31 18:54:15,296 - poker_game - INFO - Last raiser: None
2025-10-31 18:54:15,296 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:15,298 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 3
2025-10-31 18:54:15,298 - poker_game - INFO - Community cards: ['6♣', '8♣', '2♣', '10♥']
2025-10-31 18:54:15,299 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:15,300 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:15,301 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=all_in
2025-10-31 18:54:15,308 - poker_game - INFO -   P3(Agent3): chips=1586, bet=0, status=active
2025-10-31 18:54:15,308 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:15,308 - poker_game - INFO - ==================================================
2025-10-31 18:54:15,309 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 18:54:15,332 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:54:15,333 - poker_game - INFO - Hand #13, Phase: turn
2025-10-31 18:54:15,334 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:54:15,334 - poker_game - INFO - Pot: 85, Current bet: 0
2025-10-31 18:54:15,334 - poker_game - INFO - Last raiser: None
2025-10-31 18:54:15,335 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:15,335 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 3
2025-10-31 18:54:15,336 - poker_game - INFO - Community cards: ['6♣', '8♣', '2♣', '10♥']
2025-10-31 18:54:15,336 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:15,337 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:15,337 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=all_in
2025-10-31 18:54:15,338 - poker_game - INFO -   P3(Agent3): chips=1586, bet=0, status=active
2025-10-31 18:54:15,338 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:15,338 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 18:54:15,339 - poker_game - INFO - ==================================================
2025-10-31 18:54:15,339 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:54:15,340 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:54:15,340 - poker_game - DEBUG - Active players: [3]
2025-10-31 18:54:15,340 - poker_game - INFO - Advanced from player 3 to player 3 (seat order)
2025-10-31 18:54:15,341 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:54:15,344 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:54:15,346 - poker_game - DEBUG - Active: 1, All-in: 1
2025-10-31 18:54:15,346 - poker_game - INFO - Betting complete: Single active player has matched the bet
2025-10-31 18:54:15,347 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:54:15,347 - poker_game - INFO - Hand #13, Phase: turn
2025-10-31 18:54:15,349 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:54:15,349 - poker_game - INFO - Pot: 85, Current bet: 0
2025-10-31 18:54:15,350 - poker_game - INFO - Last raiser: None
2025-10-31 18:54:15,350 - poker_game - INFO - Betting round complete: True
2025-10-31 18:54:15,351 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 3
2025-10-31 18:54:15,353 - poker_game - INFO - Community cards: ['6♣', '8♣', '2♣', '10♥']
2025-10-31 18:54:15,355 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:15,355 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:15,355 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=all_in
2025-10-31 18:54:15,355 - poker_game - INFO -   P3(Agent3): chips=1586, bet=0, status=active
2025-10-31 18:54:15,356 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:15,356 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:54:15,356 - poker_game - INFO - ==================================================
2025-10-31 18:54:15,457 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 18:54:15,457 - poker_game - INFO - Betting round complete: True
2025-10-31 18:54:15,458 - poker_game - INFO - Remaining players: 2
2025-10-31 18:54:15,458 - poker_game - DEBUG -   Remaining P2: Agent2, status: all_in
2025-10-31 18:54:15,459 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:54:15,459 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 18:54:15,475 - poker_game - INFO - Starting new betting round
2025-10-31 18:54:15,476 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:54:15,477 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:54:15,477 - poker_game - DEBUG - Active players for new betting round: [3]
2025-10-31 18:54:15,477 - poker_game - DEBUG - Dealer button: 1
2025-10-31 18:54:15,478 - poker_game - INFO - First actor: Player 3 (by phase rule), was 3
2025-10-31 18:54:15,478 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:54:15,478 - poker_game - INFO - Hand #13, Phase: river
2025-10-31 18:54:15,479 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:54:15,479 - poker_game - INFO - Pot: 85, Current bet: 0
2025-10-31 18:54:15,479 - poker_game - INFO - Last raiser: None
2025-10-31 18:54:15,479 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:15,480 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 3
2025-10-31 18:54:15,480 - poker_game - INFO - Community cards: ['6♣', '8♣', '2♣', '10♥', '10♠']
2025-10-31 18:54:15,480 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:15,481 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:15,481 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=all_in
2025-10-31 18:54:15,482 - poker_game - INFO -   P3(Agent3): chips=1586, bet=0, status=active
2025-10-31 18:54:15,482 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:15,482 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 18:54:15,483 - poker_game - INFO - ==================================================
2025-10-31 18:54:15,484 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "river",
  "your_cards": [
    "8♥",
    "9♠"
  ],
  "community": [
    "6♣",
    "8♣",
    "2♣",
    "10♥",
    "10♠"
  ],
  "your_chips": 1586,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 85,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1405,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6085,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 2,
      "chips": 0,
      "bet": 0,
      "status": "all_in"
    },
    {
      "id": 4,
      "chips": 839,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1586)"
  ],
  "history": [
    "Side pot layer 1: amount=30, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Side pot layer 2: amount=92, winners=3 best_hand=Straight: A-high - A♠, K♦, Q♥, J♣, 10♦",
    "Player 1 posted small blind 10",
    "Player 2 posted big blind 20",
    "Player 3 folded",
    "Player 4 called 20",
    "Player 0 folded",
    "Player 1 folded",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 2 posted small blind 5",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 6♣, 8♣, 2♣",
    "Player 3 raised to 60",
    "Turn dealt: 10♥",
    "Player 3 checked",
    "River dealt: 10♠"
  ]
}
2025-10-31 18:54:15,509 - poker_game - DEBUG - Create Session: {'id': 'eabe7546-5544-4a8e-aa3d-e3b4e31f5e62', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904455.5047257}
2025-10-31 18:54:17,520 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 1586,\n  "reasoning": "リバーで10が落ち、あなたの手札の8と合わせてツーペア（8と10のペア）が完成しました。コミュニティカードには10が2枚あるため、相手も10のペアを持っている可能性があります。しかし、あなたのツーペアは比較的強いハンドです。ポットサイズ（85）に対して、あなたのチップ（1586）は十分な量があります。All-in（全額ベット）することで、相手にプレッシャーを与え、ポットを最大限に獲得するチャンスがあります。相手がAll-inでコールした場合、あなたのツーペアは勝つ可能性が高いと考えられます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 164, 'promptTokenCount': 934, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 934}], 'totalTokenCount': 1098}, 'invocationId': 'e-87ffdd54-65ff-42e5-9aec-35c3766cbe59', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'KhLA3LvL', 'timestamp': 1761904455.523766}]
2025-10-31 18:54:17,520 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:54:17,520 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 1586,
  "reasoning": "リバーで10が落ち、あなたの手札の8と合わせてツーペア（8と10のペア）が完成しました。コミュニティカードには10が2枚あるため、相手も10のペアを持っている可能性があります。しかし、あなたのツーペアは比較的強いハンドです。ポットサイズ（85）に対して、あなたのチップ（1586）は十分な量があります。All-in（全額ベット）することで、相手にプレッシャーを与え、ポットを最大限に獲得するチャンスがあります。相手がAll-inでコールした場合、あなたのツーペアは勝つ可能性が高いと考えられます。"
}
```
2025-10-31 18:54:17,520 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:54:17,521 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 1586,\n  "reasoning": "リバーで10が落ち、あなたの手札の8と合わせてツーペア（8と10のペア）が完成しました。コミュニティカードには10が2枚あるため、相手も10のペアを持っている可能性があります。しかし、あなたのツーペアは比較的強いハンドです。ポットサイズ（85）に対して、あなたのチップ（1586）は十分な量があります。All-in（全額ベット）することで、相手にプレッシャーを与え、ポットを最大限に獲得するチャンスがあります。相手がAll-inでコールした場合、あなたのツーペアは勝つ可能性が高いと考えられます。"\n}\n```'
2025-10-31 18:54:17,521 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:54:17,521 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 1586,\n  "reasoning": "リバーで10が落ち、あなたの手札の8と合わせてツーペア（8と10のペア）が完成しました。コミュニティカードには10が2枚あるため、相手も10のペアを持っている可能性があります。しかし、あなたのツーペアは比較的強いハンドです。ポットサイズ（85）に対して、あなたのチップ（1586）は十分な量があります。All-in（全額ベット）することで、相手にプレッシャーを与え、ポットを最大限に獲得するチャンスがあります。相手がAll-inでコールした場合、あなたのツーペアは勝つ可能性が高いと考えられます。"\n}'
2025-10-31 18:54:17,521 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "raise",
  "amount": 1586,
  "reasoning": "リバーで10が落ち、あなたの手札の8と合わせてツーペア（8と10のペア）が完成しました。コミュニティカードには10が2枚あるため、相手も10のペアを持っている可能性があります。しかし、あなたのツーペアは比較的強いハンドです。ポットサイズ（85）に対して、あなたのチップ（1586）は十分な量があります。All-in（全額ベット）することで、相手にプレッシャーを与え、ポットを最大限に獲得するチャンスがあります。相手がAll-inでコールした場合、あなたのツーペアは勝つ可能性が高いと考えられます。"
}
2025-10-31 18:54:17,521 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'raise', 'amount': 1586, 'reasoning': 'リバーで10が落ち、あなたの手札の8と合わせてツーペア（8と10のペア）が完成しました。コミュニティカードには10が2枚あるため、相手も10のペアを持っている可能性があります。しかし、あなたのツーペアは比較的強いハンドです。ポットサイズ（85）に対して、あなたのチップ（1586）は十分な量があります。All-in（全額ベット）することで、相手にプレッシャーを与え、ポットを最大限に獲得するチャンスがあります。相手がAll-inでコールした場合、あなたのツーペアは勝つ可能性が高いと考えられます。'}
2025-10-31 18:54:17,521 - poker_game - DEBUG - [Agent3] Extracted values - action: 'raise', amount: 1586
2025-10-31 18:54:17,521 - poker_game - DEBUG - [Agent3] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1586)']
2025-10-31 18:54:17,522 - poker_game - DEBUG - [Agent3] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:54:17,522 - poker_game - DEBUG - [Agent3] Raise amount 1586 is valid (min: 20)
2025-10-31 18:54:17,522 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'raise', 'amount': 1586}
2025-10-31 18:54:17,522 - poker_game - INFO - [Agent3] Successfully parsed decision: raise, 1586, リバーで10が落ち、あなたの手札の8と合わせてツーペア（8と10のペア）が完成しました。コミュニティカードには10が2枚あるため、相手も10のペアを持っている可能性があります。しかし、あなたのツーペアは比較的強いハンドです。ポットサイズ（85）に対して、あなたのチップ（1586）は十分な量があります。All-in（全額ベット）することで、相手にプレッシャーを与え、ポットを最大限に獲得するチャンスがあります。相手がAll-inでコールした場合、あなたのツーペアは勝つ可能性が高いと考えられます。
2025-10-31 18:54:17,522 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'raise' with amount 1586
2025-10-31 18:54:17,523 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:54:17,523 - poker_game - INFO - Hand #13, Phase: river
2025-10-31 18:54:17,523 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:54:17,523 - poker_game - INFO - Pot: 85, Current bet: 0
2025-10-31 18:54:17,523 - poker_game - INFO - Last raiser: None
2025-10-31 18:54:17,523 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:17,524 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 3
2025-10-31 18:54:17,524 - poker_game - INFO - Community cards: ['6♣', '8♣', '2♣', '10♥', '10♠']
2025-10-31 18:54:17,524 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:17,524 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:17,524 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=all_in
2025-10-31 18:54:17,524 - poker_game - INFO -   P3(Agent3): chips=1586, bet=0, status=active
2025-10-31 18:54:17,524 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:17,525 - poker_game - INFO - ==================================================
2025-10-31 18:54:17,525 - poker_game - INFO - ACTION_EXECUTED: Player 3 raised to 1586
2025-10-31 18:54:17,533 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:54:17,534 - poker_game - INFO - Hand #13, Phase: river
2025-10-31 18:54:17,534 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:54:17,534 - poker_game - INFO - Pot: 1671, Current bet: 1586
2025-10-31 18:54:17,535 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:17,535 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:17,535 - poker_game - INFO - Active players: 0, All-in: 2, Folded: 3
2025-10-31 18:54:17,535 - poker_game - INFO - Community cards: ['6♣', '8♣', '2♣', '10♥', '10♠']
2025-10-31 18:54:17,536 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:17,536 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:17,536 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=all_in
2025-10-31 18:54:17,536 - poker_game - INFO -   P3(Agent3): chips=0, bet=1586, status=all_in
2025-10-31 18:54:17,537 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:17,537 - poker_game - INFO - Extra: Action: Player 3 raised to 1586
2025-10-31 18:54:17,537 - poker_game - INFO - ==================================================
2025-10-31 18:54:17,537 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:54:17,537 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:54:17,537 - poker_game - DEBUG - Active players: []
2025-10-31 18:54:17,538 - poker_game - WARNING - No active player found in seat order - marking betting round complete
2025-10-31 18:54:17,539 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:54:17,539 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:54:17,541 - poker_game - DEBUG - Active: 0, All-in: 2
2025-10-31 18:54:17,542 - poker_game - INFO - Betting complete: No active players
2025-10-31 18:54:17,543 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:54:17,543 - poker_game - INFO - Hand #13, Phase: river
2025-10-31 18:54:17,543 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:54:17,544 - poker_game - INFO - Pot: 1671, Current bet: 1586
2025-10-31 18:54:17,544 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:17,544 - poker_game - INFO - Betting round complete: True
2025-10-31 18:54:17,544 - poker_game - INFO - Active players: 0, All-in: 2, Folded: 3
2025-10-31 18:54:17,544 - poker_game - INFO - Community cards: ['6♣', '8♣', '2♣', '10♥', '10♠']
2025-10-31 18:54:17,545 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:17,545 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:17,545 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=all_in
2025-10-31 18:54:17,545 - poker_game - INFO -   P3(Agent3): chips=0, bet=1586, status=all_in
2025-10-31 18:54:17,546 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:17,546 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:54:17,546 - poker_game - INFO - ==================================================
2025-10-31 18:54:17,647 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 18:54:17,648 - poker_game - INFO - Betting round complete: True
2025-10-31 18:54:17,648 - poker_game - INFO - Remaining players: 2
2025-10-31 18:54:17,649 - poker_game - DEBUG -   Remaining P2: Agent2, status: all_in
2025-10-31 18:54:17,649 - poker_game - DEBUG -   Remaining P3: Agent3, status: all_in
2025-10-31 18:54:17,649 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 18:54:17,649 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:54:17,650 - poker_game - INFO - Hand #13, Phase: showdown
2025-10-31 18:54:17,650 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:54:17,651 - poker_game - INFO - Pot: 1671, Current bet: 1586
2025-10-31 18:54:17,651 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:17,651 - poker_game - INFO - Betting round complete: True
2025-10-31 18:54:17,652 - poker_game - INFO - Active players: 0, All-in: 2, Folded: 3
2025-10-31 18:54:17,652 - poker_game - INFO - Community cards: ['6♣', '8♣', '2♣', '10♥', '10♠']
2025-10-31 18:54:17,653 - poker_game - INFO -   P0(Agent0): chips=1405, bet=0, status=folded
2025-10-31 18:54:17,653 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=folded
2025-10-31 18:54:17,653 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=all_in
2025-10-31 18:54:17,654 - poker_game - INFO -   P3(Agent3): chips=0, bet=1586, status=all_in
2025-10-31 18:54:17,654 - poker_game - INFO -   P4(Agent4): chips=839, bet=0, status=folded
2025-10-31 18:54:17,655 - poker_game - INFO - ==================================================
2025-10-31 18:54:17,655 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:54:17,656 - poker_game - INFO - Pot: 1671, Community cards: ['6♣', '8♣', '2♣', '10♥', '10♠']
2025-10-31 18:54:17,656 - poker_game - INFO -   Player 2 status=all_in cards=['4♦', 'K♠']
2025-10-31 18:54:17,657 - poker_game - INFO -   Player 3 status=all_in cards=['8♥', '9♠']
2025-10-31 18:54:17,660 - poker_game - INFO -   Player 2 hand=One Pair: 10s - K♠, 10♥, 10♠, 8♣, 6♣ cards=['4♦', 'K♠']
2025-10-31 18:54:17,661 - poker_game - INFO -   Player 3 hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣ cards=['8♥', '9♠']
2025-10-31 18:54:17,662 - poker_game - INFO - Pot layer 0: amount=10, contributors=[2, 3]
2025-10-31 18:54:17,662 - poker_game - INFO - Pot layer 1: amount=1661, contributors=[3]
2025-10-31 18:54:17,664 - poker_game - INFO - Showdown total awarded: 1671 (game.pot=1671)
2025-10-31 18:54:17,664 - poker_game - INFO - Showdown winners (aggregated): [3]
2025-10-31 18:54:17,665 - poker_game - INFO -   Awarded 1671 to Player 3 (hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣)
2025-10-31 18:54:17,665 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:54:17,696 - poker_game - INFO - === STARTING NEW HAND #14 ===
2025-10-31 18:54:17,697 - poker_game - INFO - Active players for new hand: 4
2025-10-31 18:54:17,698 - poker_game - INFO - Moving dealer button
2025-10-31 18:54:17,698 - poker_game - INFO - Posting blinds
2025-10-31 18:54:17,721 - poker_game - INFO - Dealing hole cards
2025-10-31 18:54:17,722 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:54:17,736 - poker_game - INFO - Started new hand in database: hand_id=14
2025-10-31 18:54:17,737 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:54:17,737 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:54:17,738 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:54:17,739 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:54:17,739 - poker_game - INFO - Last raiser: 0
2025-10-31 18:54:17,740 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:17,741 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:54:17,741 - poker_game - INFO - Community cards: []
2025-10-31 18:54:17,742 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=active
2025-10-31 18:54:17,742 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=active
2025-10-31 18:54:17,743 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:54:17,743 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 18:54:17,744 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=active
2025-10-31 18:54:17,744 - poker_game - INFO - ==================================================
2025-10-31 18:54:17,745 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "Q♦",
    "10♥"
  ],
  "community": [],
  "your_chips": 6085,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1385,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1671,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (6085)"
  ],
  "history": [
    "Player 1 folded",
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 2 posted small blind 5",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 6♣, 8♣, 2♣",
    "Player 3 raised to 60",
    "Turn dealt: 10♥",
    "Player 3 checked",
    "River dealt: 10♠",
    "Player 3 raised to 1586",
    "Showdown: Player 2 hand=One Pair: 10s - K♠, 10♥, 10♠, 8♣, 6♣ cards=4♦, K♠",
    "Showdown: Player 3 hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣ cards=8♥, 9♠",
    "Side pot layer 0: amount=10, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20"
  ]
}
2025-10-31 18:54:17,837 - poker_game - DEBUG - Create Session: {'id': 'e944d103-7122-40a6-b9ba-01a0472b3924', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904457.834838}
2025-10-31 18:54:20,048 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップでQ10オフスート（異なるスートのクイーンと10）は、中程度の強さの手札です。ポットオッズ（コールに必要な金額に対するポットのサイズ）が良いため、コールを選択します。相手のベット額（20）は、ポット（30）と比較して、コールする価値があると判断しました。フロップ（コミュニティカード）を見て、さらに戦略を練ります。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 123, 'promptTokenCount': 977, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 977}], 'totalTokenCount': 1100}, 'invocationId': 'e-6faa2b6d-d6f0-4875-adf5-953e44133f38', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '9vy27jlw', 'timestamp': 1761904457.856091}]
2025-10-31 18:54:20,049 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:54:20,050 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップでQ10オフスート（異なるスートのクイーンと10）は、中程度の強さの手札です。ポットオッズ（コールに必要な金額に対するポットのサイズ）が良いため、コールを選択します。相手のベット額（20）は、ポット（30）と比較して、コールする価値があると判断しました。フロップ（コミュニティカード）を見て、さらに戦略を練ります。"
}
```
2025-10-31 18:54:20,050 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:54:20,050 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップでQ10オフスート（異なるスートのクイーンと10）は、中程度の強さの手札です。ポットオッズ（コールに必要な金額に対するポットのサイズ）が良いため、コールを選択します。相手のベット額（20）は、ポット（30）と比較して、コールする価値があると判断しました。フロップ（コミュニティカード）を見て、さらに戦略を練ります。"\n}\n```'
2025-10-31 18:54:20,051 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:54:20,051 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップでQ10オフスート（異なるスートのクイーンと10）は、中程度の強さの手札です。ポットオッズ（コールに必要な金額に対するポットのサイズ）が良いため、コールを選択します。相手のベット額（20）は、ポット（30）と比較して、コールする価値があると判断しました。フロップ（コミュニティカード）を見て、さらに戦略を練ります。"\n}'
2025-10-31 18:54:20,051 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップでQ10オフスート（異なるスートのクイーンと10）は、中程度の強さの手札です。ポットオッズ（コールに必要な金額に対するポットのサイズ）が良いため、コールを選択します。相手のベット額（20）は、ポット（30）と比較して、コールする価値があると判断しました。フロップ（コミュニティカード）を見て、さらに戦略を練ります。"
}
2025-10-31 18:54:20,051 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'プリフロップでQ10オフスート（異なるスートのクイーンと10）は、中程度の強さの手札です。ポットオッズ（コールに必要な金額に対するポットのサイズ）が良いため、コールを選択します。相手のベット額（20）は、ポット（30）と比較して、コールする価値があると判断しました。フロップ（コミュニティカード）を見て、さらに戦略を練ります。'}
2025-10-31 18:54:20,052 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 20
2025-10-31 18:54:20,052 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (6085)']
2025-10-31 18:54:20,052 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (20)': 20
2025-10-31 18:54:20,052 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:54:20,052 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 20, プリフロップでQ10オフスート（異なるスートのクイーンと10）は、中程度の強さの手札です。ポットオッズ（コールに必要な金額に対するポットのサイズ）が良いため、コールを選択します。相手のベット額（20）は、ポット（30）と比較して、コールする価値があると判断しました。フロップ（コミュニティカード）を見て、さらに戦略を練ります。
2025-10-31 18:54:20,054 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 20
2025-10-31 18:54:20,054 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:54:20,055 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:54:20,055 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:54:20,055 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:54:20,056 - poker_game - INFO - Last raiser: 0
2025-10-31 18:54:20,057 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:20,057 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:54:20,058 - poker_game - INFO - Community cards: []
2025-10-31 18:54:20,058 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=active
2025-10-31 18:54:20,059 - poker_game - INFO -   P1(Agent1): chips=6085, bet=0, status=active
2025-10-31 18:54:20,060 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:54:20,061 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 18:54:20,062 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=active
2025-10-31 18:54:20,064 - poker_game - INFO - ==================================================
2025-10-31 18:54:20,065 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 20
2025-10-31 18:54:20,080 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:54:20,081 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:54:20,082 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:54:20,082 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:54:20,082 - poker_game - INFO - Last raiser: 0
2025-10-31 18:54:20,083 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:20,083 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:54:20,084 - poker_game - INFO - Community cards: []
2025-10-31 18:54:20,084 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=active
2025-10-31 18:54:20,084 - poker_game - INFO -   P1(Agent1): chips=6065, bet=20, status=active
2025-10-31 18:54:20,085 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:54:20,085 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 18:54:20,085 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=active
2025-10-31 18:54:20,086 - poker_game - INFO - Extra: Action: Player 1 called 20
2025-10-31 18:54:20,086 - poker_game - INFO - ==================================================
2025-10-31 18:54:20,087 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:54:20,087 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:54:20,087 - poker_game - DEBUG - Active players: [0, 1, 3, 4]
2025-10-31 18:54:20,088 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 18:54:20,088 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:54:20,088 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:54:20,089 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:54:20,089 - poker_game - DEBUG - Player bets: [20, 20, 0, 10], Current bet: 20, All same: False
2025-10-31 18:54:20,089 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:54:20,089 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:54:20,090 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:54:20,090 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:54:20,090 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:54:20,091 - poker_game - INFO - Last raiser: 0
2025-10-31 18:54:20,091 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:20,091 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:54:20,092 - poker_game - INFO - Community cards: []
2025-10-31 18:54:20,092 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=active
2025-10-31 18:54:20,093 - poker_game - INFO -   P1(Agent1): chips=6065, bet=20, status=active
2025-10-31 18:54:20,093 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:54:20,094 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 18:54:20,094 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=active
2025-10-31 18:54:20,095 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:54:20,096 - poker_game - INFO - ==================================================
2025-10-31 18:54:20,199 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "7♦",
    "10♦"
  ],
  "community": [],
  "your_chips": 1671,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 50,
  "to_call": 20,
  "dealer_button": 3,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1385,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6065,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1671)"
  ],
  "history": [
    "Player 2 folded",
    "Showdown: Player 4 won 50",
    "Player 2 posted small blind 5",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 6♣, 8♣, 2♣",
    "Player 3 raised to 60",
    "Turn dealt: 10♥",
    "Player 3 checked",
    "River dealt: 10♠",
    "Player 3 raised to 1586",
    "Showdown: Player 2 hand=One Pair: 10s - K♠, 10♥, 10♠, 8♣, 6♣ cards=4♦, K♠",
    "Showdown: Player 3 hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣ cards=8♥, 9♠",
    "Side pot layer 0: amount=10, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20"
  ]
}
2025-10-31 18:54:20,213 - poker_game - DEBUG - Create Session: {'id': 'db8524dd-9b0b-4a77-a0fb-0a89765597c7', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904460.2098684}
2025-10-31 18:54:22,889 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "プリフロップ（ flop が配られる前）の状況です。手札は 7♦ 10♦ で、フラッシュ（同じ絵柄のカードが5枚揃うこと）の可能性を秘めています。ポットは 50 で、コールするには 20 必要です。現在のベット額 20 に対して、私は 60 にレイズします。これは、相手にプレッシャーを与え、ポットを大きくするためです。相手の 4 番プレイヤーは既に 10 をベットしており、コールするか、さらにレイズするか、フォールド（降りること）するかを選択する必要があります。私の手札はまだ完成していませんが、フラッシュのドロー（完成させるためのカードがまだある状態）であり、将来的に強い役になる可能性があります。相手がコールすればポットは大きくなり、私に有利な状況を作れる可能性があります。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 212, 'promptTokenCount': 981, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 981}], 'totalTokenCount': 1193}, 'invocationId': 'e-e97aba33-b0b8-4f4a-89da-57e7752d2dbd', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'LHj8cf1M', 'timestamp': 1761904460.224113}]
2025-10-31 18:54:22,890 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:54:22,891 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 60,
  "reasoning": "プリフロップ（ flop が配られる前）の状況です。手札は 7♦ 10♦ で、フラッシュ（同じ絵柄のカードが5枚揃うこと）の可能性を秘めています。ポットは 50 で、コールするには 20 必要です。現在のベット額 20 に対して、私は 60 にレイズします。これは、相手にプレッシャーを与え、ポットを大きくするためです。相手の 4 番プレイヤーは既に 10 をベットしており、コールするか、さらにレイズするか、フォールド（降りること）するかを選択する必要があります。私の手札はまだ完成していませんが、フラッシュのドロー（完成させるためのカードがまだある状態）であり、将来的に強い役になる可能性があります。相手がコールすればポットは大きくなり、私に有利な状況を作れる可能性があります。"
}
```
2025-10-31 18:54:22,891 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:54:22,892 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "プリフロップ（ flop が配られる前）の状況です。手札は 7♦ 10♦ で、フラッシュ（同じ絵柄のカードが5枚揃うこと）の可能性を秘めています。ポットは 50 で、コールするには 20 必要です。現在のベット額 20 に対して、私は 60 にレイズします。これは、相手にプレッシャーを与え、ポットを大きくするためです。相手の 4 番プレイヤーは既に 10 をベットしており、コールするか、さらにレイズするか、フォールド（降りること）するかを選択する必要があります。私の手札はまだ完成していませんが、フラッシュのドロー（完成させるためのカードがまだある状態）であり、将来的に強い役になる可能性があります。相手がコールすればポットは大きくなり、私に有利な状況を作れる可能性があります。"\n}\n```'
2025-10-31 18:54:22,893 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:54:22,893 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "プリフロップ（ flop が配られる前）の状況です。手札は 7♦ 10♦ で、フラッシュ（同じ絵柄のカードが5枚揃うこと）の可能性を秘めています。ポットは 50 で、コールするには 20 必要です。現在のベット額 20 に対して、私は 60 にレイズします。これは、相手にプレッシャーを与え、ポットを大きくするためです。相手の 4 番プレイヤーは既に 10 をベットしており、コールするか、さらにレイズするか、フォールド（降りること）するかを選択する必要があります。私の手札はまだ完成していませんが、フラッシュのドロー（完成させるためのカードがまだある状態）であり、将来的に強い役になる可能性があります。相手がコールすればポットは大きくなり、私に有利な状況を作れる可能性があります。"\n}'
2025-10-31 18:54:22,893 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "raise",
  "amount": 60,
  "reasoning": "プリフロップ（ flop が配られる前）の状況です。手札は 7♦ 10♦ で、フラッシュ（同じ絵柄のカードが5枚揃うこと）の可能性を秘めています。ポットは 50 で、コールするには 20 必要です。現在のベット額 20 に対して、私は 60 にレイズします。これは、相手にプレッシャーを与え、ポットを大きくするためです。相手の 4 番プレイヤーは既に 10 をベットしており、コールするか、さらにレイズするか、フォールド（降りること）するかを選択する必要があります。私の手札はまだ完成していませんが、フラッシュのドロー（完成させるためのカードがまだある状態）であり、将来的に強い役になる可能性があります。相手がコールすればポットは大きくなり、私に有利な状況を作れる可能性があります。"
}
2025-10-31 18:54:22,894 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'raise', 'amount': 60, 'reasoning': 'プリフロップ（ flop が配られる前）の状況です。手札は 7♦ 10♦ で、フラッシュ（同じ絵柄のカードが5枚揃うこと）の可能性を秘めています。ポットは 50 で、コールするには 20 必要です。現在のベット額 20 に対して、私は 60 にレイズします。これは、相手にプレッシャーを与え、ポットを大きくするためです。相手の 4 番プレイヤーは既に 10 をベットしており、コールするか、さらにレイズするか、フォールド（降りること）するかを選択する必要があります。私の手札はまだ完成していませんが、フラッシュのドロー（完成させるためのカードがまだある状態）であり、将来的に強い役になる可能性があります。相手がコールすればポットは大きくなり、私に有利な状況を作れる可能性があります。'}
2025-10-31 18:54:22,894 - poker_game - DEBUG - [Agent3] Extracted values - action: 'raise', amount: 60
2025-10-31 18:54:22,894 - poker_game - DEBUG - [Agent3] Processing raise action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1671)']
2025-10-31 18:54:22,894 - poker_game - DEBUG - [Agent3] Minimum raise amount extracted from 'raise (min 40)': 40
2025-10-31 18:54:22,894 - poker_game - DEBUG - [Agent3] Raise amount 60 is valid (min: 40)
2025-10-31 18:54:22,894 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'raise', 'amount': 60}
2025-10-31 18:54:22,895 - poker_game - INFO - [Agent3] Successfully parsed decision: raise, 60, プリフロップ（ flop が配られる前）の状況です。手札は 7♦ 10♦ で、フラッシュ（同じ絵柄のカードが5枚揃うこと）の可能性を秘めています。ポットは 50 で、コールするには 20 必要です。現在のベット額 20 に対して、私は 60 にレイズします。これは、相手にプレッシャーを与え、ポットを大きくするためです。相手の 4 番プレイヤーは既に 10 をベットしており、コールするか、さらにレイズするか、フォールド（降りること）するかを選択する必要があります。私の手札はまだ完成していませんが、フラッシュのドロー（完成させるためのカードがまだある状態）であり、将来的に強い役になる可能性があります。相手がコールすればポットは大きくなり、私に有利な状況を作れる可能性があります。
2025-10-31 18:54:22,896 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'raise' with amount 60
2025-10-31 18:54:22,896 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:54:22,897 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:54:22,897 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:54:22,898 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:54:22,898 - poker_game - INFO - Last raiser: 0
2025-10-31 18:54:22,898 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:22,899 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:54:22,899 - poker_game - INFO - Community cards: []
2025-10-31 18:54:22,900 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=active
2025-10-31 18:54:22,900 - poker_game - INFO -   P1(Agent1): chips=6065, bet=20, status=active
2025-10-31 18:54:22,901 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:54:22,901 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 18:54:22,902 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=active
2025-10-31 18:54:22,902 - poker_game - INFO - ==================================================
2025-10-31 18:54:22,902 - poker_game - INFO - ACTION_EXECUTED: Player 3 raised to 80
2025-10-31 18:54:22,918 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:54:22,919 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:54:22,919 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:54:22,919 - poker_game - INFO - Pot: 130, Current bet: 80
2025-10-31 18:54:22,920 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:22,920 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:22,921 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:54:22,921 - poker_game - INFO - Community cards: []
2025-10-31 18:54:22,922 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=active
2025-10-31 18:54:22,922 - poker_game - INFO -   P1(Agent1): chips=6065, bet=20, status=active
2025-10-31 18:54:22,922 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:54:22,922 - poker_game - INFO -   P3(Agent3): chips=1591, bet=80, status=active
2025-10-31 18:54:22,923 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=active
2025-10-31 18:54:22,923 - poker_game - INFO - Extra: Action: Player 3 raised to 80
2025-10-31 18:54:22,924 - poker_game - INFO - ==================================================
2025-10-31 18:54:22,924 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:54:22,925 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:54:22,925 - poker_game - DEBUG - Active players: [0, 1, 3, 4]
2025-10-31 18:54:22,925 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:54:22,926 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:54:22,926 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:54:22,927 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:54:22,927 - poker_game - DEBUG - Player bets: [20, 20, 80, 10], Current bet: 80, All same: False
2025-10-31 18:54:22,927 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:54:22,927 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:54:22,928 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:54:22,928 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:54:22,929 - poker_game - INFO - Pot: 130, Current bet: 80
2025-10-31 18:54:22,929 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:22,929 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:22,930 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:54:22,930 - poker_game - INFO - Community cards: []
2025-10-31 18:54:22,931 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=active
2025-10-31 18:54:22,931 - poker_game - INFO -   P1(Agent1): chips=6065, bet=20, status=active
2025-10-31 18:54:22,931 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:54:22,932 - poker_game - INFO -   P3(Agent3): chips=1591, bet=80, status=active
2025-10-31 18:54:22,933 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=active
2025-10-31 18:54:22,933 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:54:22,934 - poker_game - INFO - ==================================================
2025-10-31 18:54:23,036 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "J♠",
    "9♣"
  ],
  "community": [],
  "your_chips": 829,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 130,
  "to_call": 70,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1385,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6065,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1591,
      "bet": 80,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (70)",
    "raise (min 100)",
    "all-in (829)"
  ],
  "history": [
    "Showdown: Player 4 won 50",
    "Player 2 posted small blind 5",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 6♣, 8♣, 2♣",
    "Player 3 raised to 60",
    "Turn dealt: 10♥",
    "Player 3 checked",
    "River dealt: 10♠",
    "Player 3 raised to 1586",
    "Showdown: Player 2 hand=One Pair: 10s - K♠, 10♥, 10♠, 8♣, 6♣ cards=4♦, K♠",
    "Showdown: Player 3 hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣ cards=8♥, 9♠",
    "Side pot layer 0: amount=10, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 raised to 80"
  ]
}
2025-10-31 18:54:23,049 - poker_game - DEBUG - Create Session: {'id': '985be695-2f06-49d4-a1d7-178cd0556e6d', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904463.0459878}
2025-10-31 18:54:33,053 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:54:43,095 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 18:54:54,176 - poker_game - INFO - Waiting for LLM API response for Agent4... 30 seconds elapsed
2025-10-31 18:54:56,934 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_NpTn5WT5puYaNLGwHKciTc5d', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1295, 'totalTokenCount': 1312}, 'invocationId': 'e-9e55d41d-9c06-4ea9-b033-ec84c1992a03', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'YAOw60nM', 'timestamp': 1761904463.065511}, {'content': {'parts': [{'functionResponse': {'id': 'call_NpTn5WT5puYaNLGwHKciTc5d', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-9e55d41d-9c06-4ea9-b033-ec84c1992a03', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '83jI3Uy7', 'timestamp': 1761904464.094253}, {'content': {'parts': [{'functionCall': {'id': 'call_3wUjLjZzZ72tQvtn7sbwxEvs', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['J♠', '9♣'], 'community': [], 'your_chips': 829, 'your_bet_this_round': 10, 'your_total_bet_this_hand': 10, 'pot': 130, 'to_call': 70, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1385, 'bet': 20, 'status': 'active'}, {'id': 1, 'chips': 6065, 'bet': 20, 'status': 'active'}, {'id': 3, 'chips': 1591, 'bet': 80, 'status': 'active'}], 'actions': ['fold', 'call (70)', 'raise (min 100)', 'all-in (829)'], 'history': ['Showdown: Player 4 won 50', 'Player 2 posted small blind 5', 'Player 3 posted big blind 20', 'Player 4 folded', 'Player 0 folded', 'Player 1 folded', 'Flop dealt: 6♣, 8♣, 2♣', 'Player 3 raised to 60', 'Turn dealt: 10♥', 'Player 3 checked', 'River dealt: 10♠', 'Player 3 raised to 1586', 'Showdown: Player 2 hand=One Pair: 10s - K♠, 10♥, 10♠, 8♣, 6♣ cards=4♦, K♠', 'Showdown: Player 3 hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣ cards=8♥, 9♠', 'Side pot layer 0: amount=10, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣', 'Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 called 20', 'Player 3 raised to 80']}, 'call_amount': 70, 'pot_after_call': 200, 'equity': 0.3}, 'name': 'action_decision'}}, {'functionCall': {'id': 'call_6iMHUH0TMWpwOLEpDTQT8DqT', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['J♠', '9♣'], 'community': [], 'your_chips': 829, 'your_bet_this_round': 10, 'your_total_bet_this_hand': 10, 'pot': 130, 'to_call': 70, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1385, 'bet': 20, 'status': 'active'}, {'id': 1, 'chips': 6065, 'bet': 20, 'status': 'active'}, {'id': 3, 'chips': 1591, 'bet': 80, 'status': 'active'}], 'actions': ['fold', 'call (70)', 'raise (min 100)', 'all-in (829)'], 'history': ['Showdown: Player 4 won 50', 'Player 2 posted small blind 5', 'Player 3 posted big blind 20', 'Player 4 folded', 'Player 0 folded', 'Player 1 folded', 'Flop dealt: 6♣, 8♣, 2♣', 'Player 3 raised to 60', 'Turn dealt: 10♥', 'Player 3 checked', 'River dealt: 10♠', 'Player 3 raised to 1586', 'Showdown: Player 2 hand=One Pair: 10s - K♠, 10♥, 10♠, 8♣, 6♣ cards=4♦, K♠', 'Showdown: Player 3 hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣ cards=8♥, 9♠', 'Side pot layer 0: amount=10, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣', 'Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 called 20', 'Player 3 raised to 80']}, 'call_amount': 70, 'pot_after_call': 200, 'equity': 0.3}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 1038, 'promptTokenCount': 1819, 'totalTokenCount': 2857}, 'invocationId': 'e-9e55d41d-9c06-4ea9-b033-ec84c1992a03', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'FVyVoNcd', 'timestamp': 1761904464.097514}, {'content': {'parts': [{'functionResponse': {'id': 'call_3wUjLjZzZ72tQvtn7sbwxEvs', 'name': 'action_decision', 'response': {'action': 'fold', 'amount': 0, 'reasoning': '期待値が11.00(ポットに対して8.46%で、マイナスなのでフォールド'}}}, {'functionResponse': {'id': 'call_6iMHUH0TMWpwOLEpDTQT8DqT', 'name': 'action_decision', 'response': {'action': 'fold', 'amount': 0, 'reasoning': '期待値が11.00(ポットに対して8.46%で、マイナスなのでフォールド'}}}], 'role': 'user'}, 'invocationId': 'MSXVrr5n', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'FSnUJkWz', 'timestamp': 1761904485.942327}, {'content': {'parts': [{'functionCall': {'id': 'call_FfFInbjeyiFHZXpbRYiXLsnS', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['J♠', '9♣'], 'community': [], 'your_chips': 829, 'your_bet_this_round': 10, 'your_total_bet_this_hand': 10, 'pot': 130, 'to_call': 70, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1385, 'bet': 20, 'status': 'active'}, {'id': 1, 'chips': 6065, 'bet': 20, 'status': 'active'}, {'id': 3, 'chips': 1591, 'bet': 80, 'status': 'active'}], 'actions': ['fold', 'call (70)', 'raise (min 100)', 'all-in (829)'], 'history': ['Showdown: Player 4 won 50', 'Player 2 posted small blind 5', 'Player 3 posted big blind 20', 'Player 4 folded', 'Player 0 folded', 'Player 1 folded', 'Flop dealt: 6♣, 8♣, 2♣', 'Player 3 raised to 60', 'Turn dealt: 10♥', 'Player 3 checked', 'River dealt: 10♠', 'Player 3 raised to 1586', 'Showdown: Player 2 hand=One Pair: 10s - K♠, 10♥, 10♠, 8♣, 6♣ cards=4♦, K♠', 'Showdown: Player 3 hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣ cards=8♥, 9♠', 'Side pot layer 0: amount=10, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣', 'Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 called 20', 'Player 3 raised to 80']}, 'call_amount': 70, 'pot_after_call': 200, 'equity': 0.3}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 511, 'promptTokenCount': 3087, 'totalTokenCount': 3598}, 'invocationId': 'e-9e55d41d-9c06-4ea9-b033-ec84c1992a03', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'QDIIQWYv', 'timestamp': 1761904485.945999}, {'content': {'parts': [{'functionResponse': {'id': 'call_FfFInbjeyiFHZXpbRYiXLsnS', 'name': 'action_decision', 'response': {'action': 'fold', 'amount': 0, 'reasoning': '期待値が11.00(ポットに対して8.46%で、マイナスなのでフォールド'}}}], 'role': 'user'}, 'invocationId': 'e-9e55d41d-9c06-4ea9-b033-ec84c1992a03', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '1y5khUwI', 'timestamp': 1761904495.358114}, {'content': {'parts': [{'text': '{"action":"fold","amount":0,"reasoning":"期待値が11.00(ポットに対して8.46%で、マイナスなのでフォールド"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 39, 'promptTokenCount': 3650, 'totalTokenCount': 3689}, 'invocationId': 'e-9e55d41d-9c06-4ea9-b033-ec84c1992a03', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '7Y6AZSus', 'timestamp': 1761904495.360832}]
2025-10-31 18:54:56,934 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:54:56,935 - poker_game - DEBUG - {"action":"fold","amount":0,"reasoning":"期待値が11.00(ポットに対して8.46%で、マイナスなのでフォールド"}
2025-10-31 18:54:56,935 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:54:56,935 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"fold","amount":0,"reasoning":"期待値が11.00(ポットに対して8.46%で、マイナスなのでフォールド"}'
2025-10-31 18:54:56,936 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:54:56,936 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"fold","amount":0,"reasoning":"期待値が11.00(ポットに対して8.46%で、マイナスなのでフォールド"}
2025-10-31 18:54:56,936 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': '期待値が11.00(ポットに対して8.46%で、マイナスなのでフォールド'}
2025-10-31 18:54:56,936 - poker_game - DEBUG - [Agent4] Extracted values - action: 'fold', amount: 0
2025-10-31 18:54:56,936 - poker_game - DEBUG - [Agent4] Action 'fold' normalized - amount set to 0
2025-10-31 18:54:56,936 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:54:56,936 - poker_game - INFO - [Agent4] Successfully parsed decision: fold, 0, 期待値が11.00(ポットに対して8.46%で、マイナスなのでフォールド
2025-10-31 18:54:56,937 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'fold' with amount 0
2025-10-31 18:54:56,937 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:54:56,937 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:54:56,937 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:54:56,938 - poker_game - INFO - Pot: 130, Current bet: 80
2025-10-31 18:54:56,938 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:56,938 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:56,938 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:54:56,939 - poker_game - INFO - Community cards: []
2025-10-31 18:54:56,939 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=active
2025-10-31 18:54:56,939 - poker_game - INFO -   P1(Agent1): chips=6065, bet=20, status=active
2025-10-31 18:54:56,939 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:54:56,940 - poker_game - INFO -   P3(Agent3): chips=1591, bet=80, status=active
2025-10-31 18:54:56,940 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=active
2025-10-31 18:54:56,940 - poker_game - INFO - ==================================================
2025-10-31 18:54:56,940 - poker_game - INFO - ACTION_EXECUTED: Player 4 folded
2025-10-31 18:54:56,948 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:54:56,949 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:54:56,949 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:54:56,949 - poker_game - INFO - Pot: 130, Current bet: 80
2025-10-31 18:54:56,950 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:56,950 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:56,950 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:54:56,950 - poker_game - INFO - Community cards: []
2025-10-31 18:54:56,951 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=active
2025-10-31 18:54:56,951 - poker_game - INFO -   P1(Agent1): chips=6065, bet=20, status=active
2025-10-31 18:54:56,952 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:54:56,954 - poker_game - INFO -   P3(Agent3): chips=1591, bet=80, status=active
2025-10-31 18:54:56,954 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=folded
2025-10-31 18:54:56,954 - poker_game - INFO - Extra: Action: Player 4 folded
2025-10-31 18:54:56,955 - poker_game - INFO - ==================================================
2025-10-31 18:54:56,955 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:54:56,955 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:54:56,956 - poker_game - DEBUG - Active players: [0, 1, 3]
2025-10-31 18:54:56,956 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:54:56,956 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:54:56,956 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:54:56,957 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:54:56,957 - poker_game - DEBUG - Player bets: [20, 20, 80], Current bet: 80, All same: False
2025-10-31 18:54:56,957 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:54:56,957 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:54:56,958 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:54:56,958 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:54:56,958 - poker_game - INFO - Pot: 130, Current bet: 80
2025-10-31 18:54:56,959 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:56,959 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:56,960 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:54:56,960 - poker_game - INFO - Community cards: []
2025-10-31 18:54:56,960 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=active
2025-10-31 18:54:56,960 - poker_game - INFO -   P1(Agent1): chips=6065, bet=20, status=active
2025-10-31 18:54:56,961 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:54:56,961 - poker_game - INFO -   P3(Agent3): chips=1591, bet=80, status=active
2025-10-31 18:54:56,961 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=folded
2025-10-31 18:54:56,962 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:54:56,962 - poker_game - INFO - ==================================================
2025-10-31 18:54:57,064 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "8♠",
    "5♠"
  ],
  "community": [],
  "your_chips": 1385,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 130,
  "to_call": 60,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6065,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1591,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 10,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (60)",
    "raise (min 100)",
    "all-in (1385)"
  ],
  "history": [
    "Player 2 posted small blind 5",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 6♣, 8♣, 2♣",
    "Player 3 raised to 60",
    "Turn dealt: 10♥",
    "Player 3 checked",
    "River dealt: 10♠",
    "Player 3 raised to 1586",
    "Showdown: Player 2 hand=One Pair: 10s - K♠, 10♥, 10♠, 8♣, 6♣ cards=4♦, K♠",
    "Showdown: Player 3 hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣ cards=8♥, 9♠",
    "Side pot layer 0: amount=10, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 raised to 80",
    "Player 4 folded"
  ]
}
2025-10-31 18:54:57,075 - poker_game - DEBUG - Create Session: {'id': '0bf6e14b-7b8d-4646-98bf-55adac40017c', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904497.0722737}
2025-10-31 18:54:59,205 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、私の手札は8♠5♠で、これは弱いスーテッドコネクター（同じマークで数字が連続しているカード）です。ポットは130で、コールするには60必要です。しかし、プレイヤー3はすでに80をベットしており、さらにレイズする可能性があります。私の手札の強さと、相手のベット額を考慮すると、フォールドが最善の選択です。この状況はプリフロップですが、履歴にフロップ以降の展開が含まれているため、手札の強さを正確に判断するには情報が不足しています。ただし、プリフロップの標準的な戦略では、この手札でコールするのはリスクが高いと判断します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 176, 'promptTokenCount': 982, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 982}], 'totalTokenCount': 1158}, 'invocationId': 'e-8e703721-f9e1-4a1c-9164-889c30d87b82', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Riy1WMeL', 'timestamp': 1761904497.088446}]
2025-10-31 18:54:59,206 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:54:59,206 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで、私の手札は8♠5♠で、これは弱いスーテッドコネクター（同じマークで数字が連続しているカード）です。ポットは130で、コールするには60必要です。しかし、プレイヤー3はすでに80をベットしており、さらにレイズする可能性があります。私の手札の強さと、相手のベット額を考慮すると、フォールドが最善の選択です。この状況はプリフロップですが、履歴にフロップ以降の展開が含まれているため、手札の強さを正確に判断するには情報が不足しています。ただし、プリフロップの標準的な戦略では、この手札でコールするのはリスクが高いと判断します。"
}
```
2025-10-31 18:54:59,206 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:54:59,206 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、私の手札は8♠5♠で、これは弱いスーテッドコネクター（同じマークで数字が連続しているカード）です。ポットは130で、コールするには60必要です。しかし、プレイヤー3はすでに80をベットしており、さらにレイズする可能性があります。私の手札の強さと、相手のベット額を考慮すると、フォールドが最善の選択です。この状況はプリフロップですが、履歴にフロップ以降の展開が含まれているため、手札の強さを正確に判断するには情報が不足しています。ただし、プリフロップの標準的な戦略では、この手札でコールするのはリスクが高いと判断します。"\n}\n```'
2025-10-31 18:54:59,206 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:54:59,206 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、私の手札は8♠5♠で、これは弱いスーテッドコネクター（同じマークで数字が連続しているカード）です。ポットは130で、コールするには60必要です。しかし、プレイヤー3はすでに80をベットしており、さらにレイズする可能性があります。私の手札の強さと、相手のベット額を考慮すると、フォールドが最善の選択です。この状況はプリフロップですが、履歴にフロップ以降の展開が含まれているため、手札の強さを正確に判断するには情報が不足しています。ただし、プリフロップの標準的な戦略では、この手札でコールするのはリスクが高いと判断します。"\n}'
2025-10-31 18:54:59,206 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで、私の手札は8♠5♠で、これは弱いスーテッドコネクター（同じマークで数字が連続しているカード）です。ポットは130で、コールするには60必要です。しかし、プレイヤー3はすでに80をベットしており、さらにレイズする可能性があります。私の手札の強さと、相手のベット額を考慮すると、フォールドが最善の選択です。この状況はプリフロップですが、履歴にフロップ以降の展開が含まれているため、手札の強さを正確に判断するには情報が不足しています。ただし、プリフロップの標準的な戦略では、この手札でコールするのはリスクが高いと判断します。"
}
2025-10-31 18:54:59,207 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップで、私の手札は8♠5♠で、これは弱いスーテッドコネクター（同じマークで数字が連続しているカード）です。ポットは130で、コールするには60必要です。しかし、プレイヤー3はすでに80をベットしており、さらにレイズする可能性があります。私の手札の強さと、相手のベット額を考慮すると、フォールドが最善の選択です。この状況はプリフロップですが、履歴にフロップ以降の展開が含まれているため、手札の強さを正確に判断するには情報が不足しています。ただし、プリフロップの標準的な戦略では、この手札でコールするのはリスクが高いと判断します。'}
2025-10-31 18:54:59,207 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 18:54:59,207 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 18:54:59,207 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:54:59,207 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップで、私の手札は8♠5♠で、これは弱いスーテッドコネクター（同じマークで数字が連続しているカード）です。ポットは130で、コールするには60必要です。しかし、プレイヤー3はすでに80をベットしており、さらにレイズする可能性があります。私の手札の強さと、相手のベット額を考慮すると、フォールドが最善の選択です。この状況はプリフロップですが、履歴にフロップ以降の展開が含まれているため、手札の強さを正確に判断するには情報が不足しています。ただし、プリフロップの標準的な戦略では、この手札でコールするのはリスクが高いと判断します。
2025-10-31 18:54:59,208 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 18:54:59,208 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:54:59,208 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:54:59,209 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:54:59,209 - poker_game - INFO - Pot: 130, Current bet: 80
2025-10-31 18:54:59,209 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:59,209 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:59,209 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:54:59,210 - poker_game - INFO - Community cards: []
2025-10-31 18:54:59,210 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=active
2025-10-31 18:54:59,210 - poker_game - INFO -   P1(Agent1): chips=6065, bet=20, status=active
2025-10-31 18:54:59,210 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:54:59,210 - poker_game - INFO -   P3(Agent3): chips=1591, bet=80, status=active
2025-10-31 18:54:59,210 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=folded
2025-10-31 18:54:59,210 - poker_game - INFO - ==================================================
2025-10-31 18:54:59,212 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 18:54:59,226 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:54:59,227 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:54:59,227 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:54:59,227 - poker_game - INFO - Pot: 130, Current bet: 80
2025-10-31 18:54:59,227 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:59,227 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:59,228 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:54:59,228 - poker_game - INFO - Community cards: []
2025-10-31 18:54:59,228 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=folded
2025-10-31 18:54:59,228 - poker_game - INFO -   P1(Agent1): chips=6065, bet=20, status=active
2025-10-31 18:54:59,228 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:54:59,228 - poker_game - INFO -   P3(Agent3): chips=1591, bet=80, status=active
2025-10-31 18:54:59,228 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=folded
2025-10-31 18:54:59,229 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 18:54:59,229 - poker_game - INFO - ==================================================
2025-10-31 18:54:59,229 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:54:59,229 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:54:59,229 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:54:59,229 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:54:59,229 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:54:59,230 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:54:59,230 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:54:59,230 - poker_game - DEBUG - Player bets: [20, 80], Current bet: 80, All same: False
2025-10-31 18:54:59,230 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:54:59,230 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:54:59,230 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:54:59,230 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:54:59,231 - poker_game - INFO - Pot: 130, Current bet: 80
2025-10-31 18:54:59,231 - poker_game - INFO - Last raiser: 3
2025-10-31 18:54:59,231 - poker_game - INFO - Betting round complete: False
2025-10-31 18:54:59,231 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:54:59,232 - poker_game - INFO - Community cards: []
2025-10-31 18:54:59,232 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=folded
2025-10-31 18:54:59,232 - poker_game - INFO -   P1(Agent1): chips=6065, bet=20, status=active
2025-10-31 18:54:59,233 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:54:59,233 - poker_game - INFO -   P3(Agent3): chips=1591, bet=80, status=active
2025-10-31 18:54:59,234 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=folded
2025-10-31 18:54:59,234 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:54:59,235 - poker_game - INFO - ==================================================
2025-10-31 18:54:59,338 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "Q♦",
    "10♥"
  ],
  "community": [],
  "your_chips": 6065,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 130,
  "to_call": 60,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1385,
      "bet": 20,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1591,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 10,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (60)",
    "raise (min 100)",
    "all-in (6065)"
  ],
  "history": [
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 6♣, 8♣, 2♣",
    "Player 3 raised to 60",
    "Turn dealt: 10♥",
    "Player 3 checked",
    "River dealt: 10♠",
    "Player 3 raised to 1586",
    "Showdown: Player 2 hand=One Pair: 10s - K♠, 10♥, 10♠, 8♣, 6♣ cards=4♦, K♠",
    "Showdown: Player 3 hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣ cards=8♥, 9♠",
    "Side pot layer 0: amount=10, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 raised to 80",
    "Player 4 folded",
    "Player 0 folded"
  ]
}
2025-10-31 18:54:59,353 - poker_game - DEBUG - Create Session: {'id': '5031ecdd-367c-48c6-b83c-f7ddc8110216', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904499.3506}
2025-10-31 18:55:02,695 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "プリフロップ（Preflop）で、あなたの手札はQ♦ 10♥です。これは「コネクター（Connector）」と呼ばれる、連続したランクのカードの組み合わせで、フラッシュ（Flush - 同じスートのカードが5枚揃うこと）やストレート（Straight - ランクが連続する5枚のカードが揃うこと）の可能性を秘めています。しかし、現時点ではまだコミュニティカード（Community cards - 全員で共有するカード）は配られていません。ポット（Pot - これまでの賭け金の合計）は130で、コール（Call - 相手のベット額と同じ額を賭けてゲームを続けること）するために必要な金額は60です。プレイヤー3はすでに80をベットしており、これはビッグブラインド（Big blind - プリフロップで最初に強制的に賭けられる最も高い金額）の2倍にあたります。プレイヤー3はアグレッシブ（Aggressive - 積極的にベットやレイズをするプレイスタイル）なプレイヤーである可能性が高いです。あなたの手札はまだ完成していませんが、フロップ（Flop - 最初の3枚のコミュニティカード）でストレートやフラッシュが完成する可能性はあります。プレイヤー3のベット額は、強い手札を持っている可能性を示唆していますが、あなたの手札のポテンシャル（Potential - 将来的に強い役ができる可能性）を考慮すると、コールしてフロップを見る価値はあります。レイズ（Raise - 相手のベット額よりさらに高い金額を賭けること）するには、あなたの手札がまだ弱すぎるため、リスクが高いです。フォールド（Fold - ゲームから降りること）するには、まだ可能性があるため、もったいないです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 393, 'promptTokenCount': 979, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 979}], 'totalTokenCount': 1372}, 'invocationId': 'e-89772498-4804-4360-9419-eac4f90dc1e8', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '1uAKBdV4', 'timestamp': 1761904499.363901}]
2025-10-31 18:55:02,695 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:55:02,696 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 60,
  "reasoning": "プリフロップ（Preflop）で、あなたの手札はQ♦ 10♥です。これは「コネクター（Connector）」と呼ばれる、連続したランクのカードの組み合わせで、フラッシュ（Flush - 同じスートのカードが5枚揃うこと）やストレート（Straight - ランクが連続する5枚のカードが揃うこと）の可能性を秘めています。しかし、現時点ではまだコミュニティカード（Community cards - 全員で共有するカード）は配られていません。ポット（Pot - これまでの賭け金の合計）は130で、コール（Call - 相手のベット額と同じ額を賭けてゲームを続けること）するために必要な金額は60です。プレイヤー3はすでに80をベットしており、これはビッグブラインド（Big blind - プリフロップで最初に強制的に賭けられる最も高い金額）の2倍にあたります。プレイヤー3はアグレッシブ（Aggressive - 積極的にベットやレイズをするプレイスタイル）なプレイヤーである可能性が高いです。あなたの手札はまだ完成していませんが、フロップ（Flop - 最初の3枚のコミュニティカード）でストレートやフラッシュが完成する可能性はあります。プレイヤー3のベット額は、強い手札を持っている可能性を示唆していますが、あなたの手札のポテンシャル（Potential - 将来的に強い役ができる可能性）を考慮すると、コールしてフロップを見る価値はあります。レイズ（Raise - 相手のベット額よりさらに高い金額を賭けること）するには、あなたの手札がまだ弱すぎるため、リスクが高いです。フォールド（Fold - ゲームから降りること）するには、まだ可能性があるため、もったいないです。"
}
```
2025-10-31 18:55:02,696 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:55:02,696 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "プリフロップ（Preflop）で、あなたの手札はQ♦ 10♥です。これは「コネクター（Connector）」と呼ばれる、連続したランクのカードの組み合わせで、フラッシュ（Flush - 同じスートのカードが5枚揃うこと）やストレート（Straight - ランクが連続する5枚のカードが揃うこと）の可能性を秘めています。しかし、現時点ではまだコミュニティカード（Community cards - 全員で共有するカード）は配られていません。ポット（Pot - これまでの賭け金の合計）は130で、コール（Call - 相手のベット額と同じ額を賭けてゲームを続けること）するために必要な金額は60です。プレイヤー3はすでに80をベットしており、これはビッグブラインド（Big blind - プリフロップで最初に強制的に賭けられる最も高い金額）の2倍にあたります。プレイヤー3はアグレッシブ（Aggressive - 積極的にベットやレイズをするプレイスタイル）なプレイヤーである可能性が高いです。あなたの手札はまだ完成していませんが、フロップ（Flop - 最初の3枚のコミュニティカード）でストレートやフラッシュが完成する可能性はあります。プレイヤー3のベット額は、強い手札を持っている可能性を示唆していますが、あなたの手札のポテンシャル（Potential - 将来的に強い役ができる可能性）を考慮すると、コールしてフロップを見る価値はあります。レイズ（Raise - 相手のベット額よりさらに高い金額を賭けること）するには、あなたの手札がまだ弱すぎるため、リスクが高いです。フォールド（Fold - ゲームから降りること）するには、まだ可能性があるため、もったいないです。"\n}\n```'
2025-10-31 18:55:02,697 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:55:02,697 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "プリフロップ（Preflop）で、あなたの手札はQ♦ 10♥です。これは「コネクター（Connector）」と呼ばれる、連続したランクのカードの組み合わせで、フラッシュ（Flush - 同じスートのカードが5枚揃うこと）やストレート（Straight - ランクが連続する5枚のカードが揃うこと）の可能性を秘めています。しかし、現時点ではまだコミュニティカード（Community cards - 全員で共有するカード）は配られていません。ポット（Pot - これまでの賭け金の合計）は130で、コール（Call - 相手のベット額と同じ額を賭けてゲームを続けること）するために必要な金額は60です。プレイヤー3はすでに80をベットしており、これはビッグブラインド（Big blind - プリフロップで最初に強制的に賭けられる最も高い金額）の2倍にあたります。プレイヤー3はアグレッシブ（Aggressive - 積極的にベットやレイズをするプレイスタイル）なプレイヤーである可能性が高いです。あなたの手札はまだ完成していませんが、フロップ（Flop - 最初の3枚のコミュニティカード）でストレートやフラッシュが完成する可能性はあります。プレイヤー3のベット額は、強い手札を持っている可能性を示唆していますが、あなたの手札のポテンシャル（Potential - 将来的に強い役ができる可能性）を考慮すると、コールしてフロップを見る価値はあります。レイズ（Raise - 相手のベット額よりさらに高い金額を賭けること）するには、あなたの手札がまだ弱すぎるため、リスクが高いです。フォールド（Fold - ゲームから降りること）するには、まだ可能性があるため、もったいないです。"\n}'
2025-10-31 18:55:02,697 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 60,
  "reasoning": "プリフロップ（Preflop）で、あなたの手札はQ♦ 10♥です。これは「コネクター（Connector）」と呼ばれる、連続したランクのカードの組み合わせで、フラッシュ（Flush - 同じスートのカードが5枚揃うこと）やストレート（Straight - ランクが連続する5枚のカードが揃うこと）の可能性を秘めています。しかし、現時点ではまだコミュニティカード（Community cards - 全員で共有するカード）は配られていません。ポット（Pot - これまでの賭け金の合計）は130で、コール（Call - 相手のベット額と同じ額を賭けてゲームを続けること）するために必要な金額は60です。プレイヤー3はすでに80をベットしており、これはビッグブラインド（Big blind - プリフロップで最初に強制的に賭けられる最も高い金額）の2倍にあたります。プレイヤー3はアグレッシブ（Aggressive - 積極的にベットやレイズをするプレイスタイル）なプレイヤーである可能性が高いです。あなたの手札はまだ完成していませんが、フロップ（Flop - 最初の3枚のコミュニティカード）でストレートやフラッシュが完成する可能性はあります。プレイヤー3のベット額は、強い手札を持っている可能性を示唆していますが、あなたの手札のポテンシャル（Potential - 将来的に強い役ができる可能性）を考慮すると、コールしてフロップを見る価値はあります。レイズ（Raise - 相手のベット額よりさらに高い金額を賭けること）するには、あなたの手札がまだ弱すぎるため、リスクが高いです。フォールド（Fold - ゲームから降りること）するには、まだ可能性があるため、もったいないです。"
}
2025-10-31 18:55:02,697 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 60, 'reasoning': 'プリフロップ（Preflop）で、あなたの手札はQ♦ 10♥です。これは「コネクター（Connector）」と呼ばれる、連続したランクのカードの組み合わせで、フラッシュ（Flush - 同じスートのカードが5枚揃うこと）やストレート（Straight - ランクが連続する5枚のカードが揃うこと）の可能性を秘めています。しかし、現時点ではまだコミュニティカード（Community cards - 全員で共有するカード）は配られていません。ポット（Pot - これまでの賭け金の合計）は130で、コール（Call - 相手のベット額と同じ額を賭けてゲームを続けること）するために必要な金額は60です。プレイヤー3はすでに80をベットしており、これはビッグブラインド（Big blind - プリフロップで最初に強制的に賭けられる最も高い金額）の2倍にあたります。プレイヤー3はアグレッシブ（Aggressive - 積極的にベットやレイズをするプレイスタイル）なプレイヤーである可能性が高いです。あなたの手札はまだ完成していませんが、フロップ（Flop - 最初の3枚のコミュニティカード）でストレートやフラッシュが完成する可能性はあります。プレイヤー3のベット額は、強い手札を持っている可能性を示唆していますが、あなたの手札のポテンシャル（Potential - 将来的に強い役ができる可能性）を考慮すると、コールしてフロップを見る価値はあります。レイズ（Raise - 相手のベット額よりさらに高い金額を賭けること）するには、あなたの手札がまだ弱すぎるため、リスクが高いです。フォールド（Fold - ゲームから降りること）するには、まだ可能性があるため、もったいないです。'}
2025-10-31 18:55:02,697 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 60
2025-10-31 18:55:02,697 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (60)', 'raise (min 100)', 'all-in (6065)']
2025-10-31 18:55:02,698 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (60)': 60
2025-10-31 18:55:02,698 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 60}
2025-10-31 18:55:02,698 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 60, プリフロップ（Preflop）で、あなたの手札はQ♦ 10♥です。これは「コネクター（Connector）」と呼ばれる、連続したランクのカードの組み合わせで、フラッシュ（Flush - 同じスートのカードが5枚揃うこと）やストレート（Straight - ランクが連続する5枚のカードが揃うこと）の可能性を秘めています。しかし、現時点ではまだコミュニティカード（Community cards - 全員で共有するカード）は配られていません。ポット（Pot - これまでの賭け金の合計）は130で、コール（Call - 相手のベット額と同じ額を賭けてゲームを続けること）するために必要な金額は60です。プレイヤー3はすでに80をベットしており、これはビッグブラインド（Big blind - プリフロップで最初に強制的に賭けられる最も高い金額）の2倍にあたります。プレイヤー3はアグレッシブ（Aggressive - 積極的にベットやレイズをするプレイスタイル）なプレイヤーである可能性が高いです。あなたの手札はまだ完成していませんが、フロップ（Flop - 最初の3枚のコミュニティカード）でストレートやフラッシュが完成する可能性はあります。プレイヤー3のベット額は、強い手札を持っている可能性を示唆していますが、あなたの手札のポテンシャル（Potential - 将来的に強い役ができる可能性）を考慮すると、コールしてフロップを見る価値はあります。レイズ（Raise - 相手のベット額よりさらに高い金額を賭けること）するには、あなたの手札がまだ弱すぎるため、リスクが高いです。フォールド（Fold - ゲームから降りること）するには、まだ可能性があるため、もったいないです。
2025-10-31 18:55:02,699 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 60
2025-10-31 18:55:02,699 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:55:02,699 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:55:02,700 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:55:02,700 - poker_game - INFO - Pot: 130, Current bet: 80
2025-10-31 18:55:02,700 - poker_game - INFO - Last raiser: 3
2025-10-31 18:55:02,700 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:02,700 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:02,701 - poker_game - INFO - Community cards: []
2025-10-31 18:55:02,701 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=folded
2025-10-31 18:55:02,701 - poker_game - INFO -   P1(Agent1): chips=6065, bet=20, status=active
2025-10-31 18:55:02,701 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:02,702 - poker_game - INFO -   P3(Agent3): chips=1591, bet=80, status=active
2025-10-31 18:55:02,702 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=folded
2025-10-31 18:55:02,702 - poker_game - INFO - ==================================================
2025-10-31 18:55:02,702 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 60
2025-10-31 18:55:02,714 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:55:02,714 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:55:02,714 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:55:02,714 - poker_game - INFO - Pot: 190, Current bet: 80
2025-10-31 18:55:02,715 - poker_game - INFO - Last raiser: 3
2025-10-31 18:55:02,715 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:02,715 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:02,715 - poker_game - INFO - Community cards: []
2025-10-31 18:55:02,715 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=folded
2025-10-31 18:55:02,715 - poker_game - INFO -   P1(Agent1): chips=6005, bet=80, status=active
2025-10-31 18:55:02,715 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:02,715 - poker_game - INFO -   P3(Agent3): chips=1591, bet=80, status=active
2025-10-31 18:55:02,716 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=folded
2025-10-31 18:55:02,716 - poker_game - INFO - Extra: Action: Player 1 called 60
2025-10-31 18:55:02,716 - poker_game - INFO - ==================================================
2025-10-31 18:55:02,716 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:55:02,716 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:55:02,716 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:55:02,717 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 18:55:02,717 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:55:02,717 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:55:02,718 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:55:02,718 - poker_game - DEBUG - Player bets: [80, 80], Current bet: 80, All same: True
2025-10-31 18:55:02,718 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:55:02,718 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:55:02,718 - poker_game - INFO - Hand #14, Phase: preflop
2025-10-31 18:55:02,718 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:55:02,718 - poker_game - INFO - Pot: 190, Current bet: 80
2025-10-31 18:55:02,718 - poker_game - INFO - Last raiser: 3
2025-10-31 18:55:02,719 - poker_game - INFO - Betting round complete: True
2025-10-31 18:55:02,719 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:02,719 - poker_game - INFO - Community cards: []
2025-10-31 18:55:02,719 - poker_game - INFO -   P0(Agent0): chips=1385, bet=20, status=folded
2025-10-31 18:55:02,719 - poker_game - INFO -   P1(Agent1): chips=6005, bet=80, status=active
2025-10-31 18:55:02,719 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:02,720 - poker_game - INFO -   P3(Agent3): chips=1591, bet=80, status=active
2025-10-31 18:55:02,720 - poker_game - INFO -   P4(Agent4): chips=829, bet=10, status=folded
2025-10-31 18:55:02,720 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:55:02,720 - poker_game - INFO - ==================================================
2025-10-31 18:55:02,821 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:55:02,821 - poker_game - INFO - Betting round complete: True
2025-10-31 18:55:02,822 - poker_game - INFO - Remaining players: 2
2025-10-31 18:55:02,822 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:55:02,822 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:55:02,823 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:55:02,833 - poker_game - INFO - Starting new betting round
2025-10-31 18:55:02,834 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:55:02,834 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:55:02,835 - poker_game - DEBUG - Active players for new betting round: [1, 3]
2025-10-31 18:55:02,835 - poker_game - DEBUG - Dealer button: 3
2025-10-31 18:55:02,835 - poker_game - INFO - First actor: Player 1 (by phase rule), was 3
2025-10-31 18:55:02,836 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:55:02,836 - poker_game - INFO - Hand #14, Phase: flop
2025-10-31 18:55:02,836 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:55:02,837 - poker_game - INFO - Pot: 190, Current bet: 0
2025-10-31 18:55:02,837 - poker_game - INFO - Last raiser: None
2025-10-31 18:55:02,838 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:02,838 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:02,839 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥']
2025-10-31 18:55:02,839 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:02,839 - poker_game - INFO -   P1(Agent1): chips=6005, bet=0, status=active
2025-10-31 18:55:02,840 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:02,840 - poker_game - INFO -   P3(Agent3): chips=1591, bet=0, status=active
2025-10-31 18:55:02,841 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:02,842 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:55:02,843 - poker_game - INFO - ==================================================
2025-10-31 18:55:02,844 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "flop",
  "your_cards": [
    "Q♦",
    "10♥"
  ],
  "community": [
    "A♠",
    "A♣",
    "J♥"
  ],
  "your_chips": 6005,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 190,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1385,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1591,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (6005)"
  ],
  "history": [
    "Player 0 folded",
    "Player 1 folded",
    "Flop dealt: 6♣, 8♣, 2♣",
    "Player 3 raised to 60",
    "Turn dealt: 10♥",
    "Player 3 checked",
    "River dealt: 10♠",
    "Player 3 raised to 1586",
    "Showdown: Player 2 hand=One Pair: 10s - K♠, 10♥, 10♠, 8♣, 6♣ cards=4♦, K♠",
    "Showdown: Player 3 hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣ cards=8♥, 9♠",
    "Side pot layer 0: amount=10, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 raised to 80",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: A♠, A♣, J♥"
  ]
}
2025-10-31 18:55:02,859 - poker_game - DEBUG - Create Session: {'id': '7edf3ff7-a88c-45db-b08a-a861c6103781', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904502.856262}
2025-10-31 18:55:05,004 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（ボードに出された最初の3枚のカード）では、あなたはAペア（アシペア）を持っています。これは強いハンドですが、ボードにはAが2枚出ているため、相手もAペアを持っている可能性が高いです。しかし、現在の状況では、あなたはポットをコールするのに十分なチップを持っており、相手のベット額はあなたのチップ量に対してそれほど大きくありません。そのため、コールして次のカード（ターン）を見るのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 128, 'promptTokenCount': 996, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 996}], 'totalTokenCount': 1124}, 'invocationId': 'e-39c9afd1-ad20-48ab-8983-5a662bb869f9', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'QqY8CeRx', 'timestamp': 1761904502.870666}]
2025-10-31 18:55:05,004 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:55:05,004 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "フロップ（ボードに出された最初の3枚のカード）では、あなたはAペア（アシペア）を持っています。これは強いハンドですが、ボードにはAが2枚出ているため、相手もAペアを持っている可能性が高いです。しかし、現在の状況では、あなたはポットをコールするのに十分なチップを持っており、相手のベット額はあなたのチップ量に対してそれほど大きくありません。そのため、コールして次のカード（ターン）を見るのが最善の選択です。"
}
```
2025-10-31 18:55:05,005 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:55:05,006 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（ボードに出された最初の3枚のカード）では、あなたはAペア（アシペア）を持っています。これは強いハンドですが、ボードにはAが2枚出ているため、相手もAペアを持っている可能性が高いです。しかし、現在の状況では、あなたはポットをコールするのに十分なチップを持っており、相手のベット額はあなたのチップ量に対してそれほど大きくありません。そのため、コールして次のカード（ターン）を見るのが最善の選択です。"\n}\n```'
2025-10-31 18:55:05,006 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:55:05,006 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（ボードに出された最初の3枚のカード）では、あなたはAペア（アシペア）を持っています。これは強いハンドですが、ボードにはAが2枚出ているため、相手もAペアを持っている可能性が高いです。しかし、現在の状況では、あなたはポットをコールするのに十分なチップを持っており、相手のベット額はあなたのチップ量に対してそれほど大きくありません。そのため、コールして次のカード（ターン）を見るのが最善の選択です。"\n}'
2025-10-31 18:55:05,006 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "フロップ（ボードに出された最初の3枚のカード）では、あなたはAペア（アシペア）を持っています。これは強いハンドですが、ボードにはAが2枚出ているため、相手もAペアを持っている可能性が高いです。しかし、現在の状況では、あなたはポットをコールするのに十分なチップを持っており、相手のベット額はあなたのチップ量に対してそれほど大きくありません。そのため、コールして次のカード（ターン）を見るのが最善の選択です。"
}
2025-10-31 18:55:05,006 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'フロップ（ボードに出された最初の3枚のカード）では、あなたはAペア（アシペア）を持っています。これは強いハンドですが、ボードにはAが2枚出ているため、相手もAペアを持っている可能性が高いです。しかし、現在の状況では、あなたはポットをコールするのに十分なチップを持っており、相手のベット額はあなたのチップ量に対してそれほど大きくありません。そのため、コールして次のカード（ターン）を見るのが最善の選択です。'}
2025-10-31 18:55:05,007 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 0
2025-10-31 18:55:05,007 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (6005)']
2025-10-31 18:55:05,007 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:55:05,007 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 0, フロップ（ボードに出された最初の3枚のカード）では、あなたはAペア（アシペア）を持っています。これは強いハンドですが、ボードにはAが2枚出ているため、相手もAペアを持っている可能性が高いです。しかし、現在の状況では、あなたはポットをコールするのに十分なチップを持っており、相手のベット額はあなたのチップ量に対してそれほど大きくありません。そのため、コールして次のカード（ターン）を見るのが最善の選択です。
2025-10-31 18:55:05,008 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 0
2025-10-31 18:55:05,008 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:55:05,009 - poker_game - INFO - Hand #14, Phase: flop
2025-10-31 18:55:05,009 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:55:05,009 - poker_game - INFO - Pot: 190, Current bet: 0
2025-10-31 18:55:05,009 - poker_game - INFO - Last raiser: None
2025-10-31 18:55:05,009 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:05,010 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:05,010 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥']
2025-10-31 18:55:05,010 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:05,010 - poker_game - INFO -   P1(Agent1): chips=6005, bet=0, status=active
2025-10-31 18:55:05,010 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:05,011 - poker_game - INFO -   P3(Agent3): chips=1591, bet=0, status=active
2025-10-31 18:55:05,011 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:05,011 - poker_game - INFO - ==================================================
2025-10-31 18:55:05,011 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:55:05,024 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:55:05,025 - poker_game - INFO - Hand #14, Phase: flop
2025-10-31 18:55:05,025 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:55:05,026 - poker_game - INFO - Pot: 190, Current bet: 0
2025-10-31 18:55:05,026 - poker_game - INFO - Last raiser: None
2025-10-31 18:55:05,026 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:05,027 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:05,027 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥']
2025-10-31 18:55:05,027 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:05,028 - poker_game - INFO -   P1(Agent1): chips=6005, bet=0, status=active
2025-10-31 18:55:05,028 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:05,028 - poker_game - INFO -   P3(Agent3): chips=1591, bet=0, status=active
2025-10-31 18:55:05,029 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:05,029 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:55:05,029 - poker_game - INFO - ==================================================
2025-10-31 18:55:05,030 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:55:05,030 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:55:05,030 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:55:05,030 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 18:55:05,031 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:55:05,031 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:55:05,031 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:55:05,031 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:55:05,031 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 18:55:05,032 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:55:05,032 - poker_game - DEBUG - Current player index: 3
2025-10-31 18:55:05,032 - poker_game - DEBUG - First actor index: 1
2025-10-31 18:55:05,032 - poker_game - DEBUG - Betting continues: Current player 3 != first actor 1
2025-10-31 18:55:05,032 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:55:05,033 - poker_game - INFO - Hand #14, Phase: flop
2025-10-31 18:55:05,034 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:55:05,034 - poker_game - INFO - Pot: 190, Current bet: 0
2025-10-31 18:55:05,035 - poker_game - INFO - Last raiser: None
2025-10-31 18:55:05,036 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:05,037 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:05,038 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥']
2025-10-31 18:55:05,040 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:05,042 - poker_game - INFO -   P1(Agent1): chips=6005, bet=0, status=active
2025-10-31 18:55:05,043 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:05,044 - poker_game - INFO -   P3(Agent3): chips=1591, bet=0, status=active
2025-10-31 18:55:05,044 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:05,044 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:55:05,045 - poker_game - INFO - ==================================================
2025-10-31 18:55:05,147 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "flop",
  "your_cards": [
    "7♦",
    "10♦"
  ],
  "community": [
    "A♠",
    "A♣",
    "J♥"
  ],
  "your_chips": 1591,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 190,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1385,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6005,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1591)"
  ],
  "history": [
    "Player 1 folded",
    "Flop dealt: 6♣, 8♣, 2♣",
    "Player 3 raised to 60",
    "Turn dealt: 10♥",
    "Player 3 checked",
    "River dealt: 10♠",
    "Player 3 raised to 1586",
    "Showdown: Player 2 hand=One Pair: 10s - K♠, 10♥, 10♠, 8♣, 6♣ cards=4♦, K♠",
    "Showdown: Player 3 hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣ cards=8♥, 9♠",
    "Side pot layer 0: amount=10, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 raised to 80",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: A♠, A♣, J♥",
    "Player 1 checked"
  ]
}
2025-10-31 18:55:05,169 - poker_game - DEBUG - Create Session: {'id': 'e49738d6-4fb8-4692-a6b7-39d17431d25f', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904505.166192}
2025-10-31 18:55:06,864 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（Flop）はA♠, A♣, J♥で、あなたの手札は7♦, 10♦です。ボードにペア（A）があり、あなたはそれを持っていません。しかし、相手（Player 1）はチェック（check）しているので、このハンドでまだ大きなベットをしていない可能性が高いです。コール（call）は無料なので、次のカード（ターン、turn）を見て、より良いカードが出るか判断します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 127, 'promptTokenCount': 996, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 996}], 'totalTokenCount': 1123}, 'invocationId': 'e-fac30bb9-2efc-4d2b-a6b5-42cc3a502435', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '1YvH884A', 'timestamp': 1761904505.180845}]
2025-10-31 18:55:06,864 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:55:06,865 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "フロップ（Flop）はA♠, A♣, J♥で、あなたの手札は7♦, 10♦です。ボードにペア（A）があり、あなたはそれを持っていません。しかし、相手（Player 1）はチェック（check）しているので、このハンドでまだ大きなベットをしていない可能性が高いです。コール（call）は無料なので、次のカード（ターン、turn）を見て、より良いカードが出るか判断します。"
}
```
2025-10-31 18:55:06,865 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:55:06,865 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（Flop）はA♠, A♣, J♥で、あなたの手札は7♦, 10♦です。ボードにペア（A）があり、あなたはそれを持っていません。しかし、相手（Player 1）はチェック（check）しているので、このハンドでまだ大きなベットをしていない可能性が高いです。コール（call）は無料なので、次のカード（ターン、turn）を見て、より良いカードが出るか判断します。"\n}\n```'
2025-10-31 18:55:06,865 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:55:06,866 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（Flop）はA♠, A♣, J♥で、あなたの手札は7♦, 10♦です。ボードにペア（A）があり、あなたはそれを持っていません。しかし、相手（Player 1）はチェック（check）しているので、このハンドでまだ大きなベットをしていない可能性が高いです。コール（call）は無料なので、次のカード（ターン、turn）を見て、より良いカードが出るか判断します。"\n}'
2025-10-31 18:55:06,866 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "フロップ（Flop）はA♠, A♣, J♥で、あなたの手札は7♦, 10♦です。ボードにペア（A）があり、あなたはそれを持っていません。しかし、相手（Player 1）はチェック（check）しているので、このハンドでまだ大きなベットをしていない可能性が高いです。コール（call）は無料なので、次のカード（ターン、turn）を見て、より良いカードが出るか判断します。"
}
2025-10-31 18:55:06,866 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'フロップ（Flop）はA♠, A♣, J♥で、あなたの手札は7♦, 10♦です。ボードにペア（A）があり、あなたはそれを持っていません。しかし、相手（Player 1）はチェック（check）しているので、このハンドでまだ大きなベットをしていない可能性が高いです。コール（call）は無料なので、次のカード（ターン、turn）を見て、より良いカードが出るか判断します。'}
2025-10-31 18:55:06,866 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 0
2025-10-31 18:55:06,866 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1591)']
2025-10-31 18:55:06,866 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:55:06,867 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 0, フロップ（Flop）はA♠, A♣, J♥で、あなたの手札は7♦, 10♦です。ボードにペア（A）があり、あなたはそれを持っていません。しかし、相手（Player 1）はチェック（check）しているので、このハンドでまだ大きなベットをしていない可能性が高いです。コール（call）は無料なので、次のカード（ターン、turn）を見て、より良いカードが出るか判断します。
2025-10-31 18:55:06,868 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 0
2025-10-31 18:55:06,868 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:55:06,869 - poker_game - INFO - Hand #14, Phase: flop
2025-10-31 18:55:06,869 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:55:06,870 - poker_game - INFO - Pot: 190, Current bet: 0
2025-10-31 18:55:06,870 - poker_game - INFO - Last raiser: None
2025-10-31 18:55:06,871 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:06,871 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:06,871 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥']
2025-10-31 18:55:06,872 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:06,872 - poker_game - INFO -   P1(Agent1): chips=6005, bet=0, status=active
2025-10-31 18:55:06,873 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:06,873 - poker_game - INFO -   P3(Agent3): chips=1591, bet=0, status=active
2025-10-31 18:55:06,874 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:06,874 - poker_game - INFO - ==================================================
2025-10-31 18:55:06,875 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 18:55:06,890 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:55:06,890 - poker_game - INFO - Hand #14, Phase: flop
2025-10-31 18:55:06,891 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:55:06,891 - poker_game - INFO - Pot: 190, Current bet: 0
2025-10-31 18:55:06,892 - poker_game - INFO - Last raiser: None
2025-10-31 18:55:06,892 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:06,892 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:06,893 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥']
2025-10-31 18:55:06,893 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:06,894 - poker_game - INFO -   P1(Agent1): chips=6005, bet=0, status=active
2025-10-31 18:55:06,894 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:06,894 - poker_game - INFO -   P3(Agent3): chips=1591, bet=0, status=active
2025-10-31 18:55:06,895 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:06,895 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 18:55:06,896 - poker_game - INFO - ==================================================
2025-10-31 18:55:06,896 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:55:06,897 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:55:06,897 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:55:06,897 - poker_game - INFO - Advanced from player 3 to player 1 (seat order)
2025-10-31 18:55:06,898 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:55:06,898 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:55:06,899 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:55:06,899 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:55:06,899 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 18:55:06,899 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:55:06,899 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:55:06,900 - poker_game - DEBUG - First actor index: 1
2025-10-31 18:55:06,900 - poker_game - INFO - Betting complete: Back to first actor 1 (all players have acted)
2025-10-31 18:55:06,900 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:55:06,900 - poker_game - INFO - Hand #14, Phase: flop
2025-10-31 18:55:06,901 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:55:06,901 - poker_game - INFO - Pot: 190, Current bet: 0
2025-10-31 18:55:06,902 - poker_game - INFO - Last raiser: None
2025-10-31 18:55:06,902 - poker_game - INFO - Betting round complete: True
2025-10-31 18:55:06,903 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:06,903 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥']
2025-10-31 18:55:06,904 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:06,904 - poker_game - INFO -   P1(Agent1): chips=6005, bet=0, status=active
2025-10-31 18:55:06,905 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:06,905 - poker_game - INFO -   P3(Agent3): chips=1591, bet=0, status=active
2025-10-31 18:55:06,905 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:06,906 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:55:06,906 - poker_game - INFO - ==================================================
2025-10-31 18:55:07,008 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:55:07,009 - poker_game - INFO - Betting round complete: True
2025-10-31 18:55:07,009 - poker_game - INFO - Remaining players: 2
2025-10-31 18:55:07,010 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:55:07,010 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:55:07,010 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 18:55:07,021 - poker_game - INFO - Starting new betting round
2025-10-31 18:55:07,022 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:55:07,023 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:55:07,023 - poker_game - DEBUG - Active players for new betting round: [1, 3]
2025-10-31 18:55:07,023 - poker_game - DEBUG - Dealer button: 3
2025-10-31 18:55:07,024 - poker_game - INFO - First actor: Player 1 (by phase rule), was 1
2025-10-31 18:55:07,024 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:55:07,025 - poker_game - INFO - Hand #14, Phase: turn
2025-10-31 18:55:07,025 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:55:07,026 - poker_game - INFO - Pot: 190, Current bet: 0
2025-10-31 18:55:07,027 - poker_game - INFO - Last raiser: None
2025-10-31 18:55:07,028 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:07,029 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:07,029 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥', 'K♠']
2025-10-31 18:55:07,030 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:07,031 - poker_game - INFO -   P1(Agent1): chips=6005, bet=0, status=active
2025-10-31 18:55:07,032 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:07,033 - poker_game - INFO -   P3(Agent3): chips=1591, bet=0, status=active
2025-10-31 18:55:07,033 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:07,034 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 18:55:07,035 - poker_game - INFO - ==================================================
2025-10-31 18:55:07,036 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "turn",
  "your_cards": [
    "Q♦",
    "10♥"
  ],
  "community": [
    "A♠",
    "A♣",
    "J♥",
    "K♠"
  ],
  "your_chips": 6005,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 190,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1385,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1591,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (6005)"
  ],
  "history": [
    "Player 3 raised to 60",
    "Turn dealt: 10♥",
    "Player 3 checked",
    "River dealt: 10♠",
    "Player 3 raised to 1586",
    "Showdown: Player 2 hand=One Pair: 10s - K♠, 10♥, 10♠, 8♣, 6♣ cards=4♦, K♠",
    "Showdown: Player 3 hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣ cards=8♥, 9♠",
    "Side pot layer 0: amount=10, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 raised to 80",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: A♠, A♣, J♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: K♠"
  ]
}
2025-10-31 18:55:07,049 - poker_game - DEBUG - Create Session: {'id': '05235c9a-6bc8-464f-8bc1-5a95be975a02', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904507.0455415}
2025-10-31 18:55:10,055 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 180,\n  "reasoning": "コミュニティカードにAが2枚あるので、相手がAを持っている可能性が高いです。しかし、私の手札はQ10で、ストレート（QJKA10）の可能性を秘めています。相手のベット額は80で、ポットは190です。相手がAを持っているとしても、私のストレートの可能性はあります。相手がAを持っている場合、私のストレートの完成確率はまだ残っています。相手のベット額をコールするだけでは、有利な状況とは言えません。この状況でレイズすることで、相手にプレッシャーを与え、ポットを大きくすることができます。相手がAを持っていない、あるいは私のストレートを恐れている場合、フォールドしてくれる可能性があります。もしコールされても、次のリバーでストレートが完成すれば、勝てる可能性は十分にあります。レイズ額は、相手のチップ量とポットサイズを考慮して、2倍のベット（160）に少し足して180にします。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 240, 'promptTokenCount': 992, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 992}], 'totalTokenCount': 1232}, 'invocationId': 'e-a1431640-27b2-40f3-9b44-b28ddcd69066', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'UHGIYzmn', 'timestamp': 1761904507.061366}]
2025-10-31 18:55:10,056 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:55:10,056 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 180,
  "reasoning": "コミュニティカードにAが2枚あるので、相手がAを持っている可能性が高いです。しかし、私の手札はQ10で、ストレート（QJKA10）の可能性を秘めています。相手のベット額は80で、ポットは190です。相手がAを持っているとしても、私のストレートの可能性はあります。相手がAを持っている場合、私のストレートの完成確率はまだ残っています。相手のベット額をコールするだけでは、有利な状況とは言えません。この状況でレイズすることで、相手にプレッシャーを与え、ポットを大きくすることができます。相手がAを持っていない、あるいは私のストレートを恐れている場合、フォールドしてくれる可能性があります。もしコールされても、次のリバーでストレートが完成すれば、勝てる可能性は十分にあります。レイズ額は、相手のチップ量とポットサイズを考慮して、2倍のベット（160）に少し足して180にします。"
}
```
2025-10-31 18:55:10,056 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:55:10,057 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 180,\n  "reasoning": "コミュニティカードにAが2枚あるので、相手がAを持っている可能性が高いです。しかし、私の手札はQ10で、ストレート（QJKA10）の可能性を秘めています。相手のベット額は80で、ポットは190です。相手がAを持っているとしても、私のストレートの可能性はあります。相手がAを持っている場合、私のストレートの完成確率はまだ残っています。相手のベット額をコールするだけでは、有利な状況とは言えません。この状況でレイズすることで、相手にプレッシャーを与え、ポットを大きくすることができます。相手がAを持っていない、あるいは私のストレートを恐れている場合、フォールドしてくれる可能性があります。もしコールされても、次のリバーでストレートが完成すれば、勝てる可能性は十分にあります。レイズ額は、相手のチップ量とポットサイズを考慮して、2倍のベット（160）に少し足して180にします。"\n}\n```'
2025-10-31 18:55:10,057 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:55:10,057 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 180,\n  "reasoning": "コミュニティカードにAが2枚あるので、相手がAを持っている可能性が高いです。しかし、私の手札はQ10で、ストレート（QJKA10）の可能性を秘めています。相手のベット額は80で、ポットは190です。相手がAを持っているとしても、私のストレートの可能性はあります。相手がAを持っている場合、私のストレートの完成確率はまだ残っています。相手のベット額をコールするだけでは、有利な状況とは言えません。この状況でレイズすることで、相手にプレッシャーを与え、ポットを大きくすることができます。相手がAを持っていない、あるいは私のストレートを恐れている場合、フォールドしてくれる可能性があります。もしコールされても、次のリバーでストレートが完成すれば、勝てる可能性は十分にあります。レイズ額は、相手のチップ量とポットサイズを考慮して、2倍のベット（160）に少し足して180にします。"\n}'
2025-10-31 18:55:10,057 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "raise",
  "amount": 180,
  "reasoning": "コミュニティカードにAが2枚あるので、相手がAを持っている可能性が高いです。しかし、私の手札はQ10で、ストレート（QJKA10）の可能性を秘めています。相手のベット額は80で、ポットは190です。相手がAを持っているとしても、私のストレートの可能性はあります。相手がAを持っている場合、私のストレートの完成確率はまだ残っています。相手のベット額をコールするだけでは、有利な状況とは言えません。この状況でレイズすることで、相手にプレッシャーを与え、ポットを大きくすることができます。相手がAを持っていない、あるいは私のストレートを恐れている場合、フォールドしてくれる可能性があります。もしコールされても、次のリバーでストレートが完成すれば、勝てる可能性は十分にあります。レイズ額は、相手のチップ量とポットサイズを考慮して、2倍のベット（160）に少し足して180にします。"
}
2025-10-31 18:55:10,058 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'raise', 'amount': 180, 'reasoning': 'コミュニティカードにAが2枚あるので、相手がAを持っている可能性が高いです。しかし、私の手札はQ10で、ストレート（QJKA10）の可能性を秘めています。相手のベット額は80で、ポットは190です。相手がAを持っているとしても、私のストレートの可能性はあります。相手がAを持っている場合、私のストレートの完成確率はまだ残っています。相手のベット額をコールするだけでは、有利な状況とは言えません。この状況でレイズすることで、相手にプレッシャーを与え、ポットを大きくすることができます。相手がAを持っていない、あるいは私のストレートを恐れている場合、フォールドしてくれる可能性があります。もしコールされても、次のリバーでストレートが完成すれば、勝てる可能性は十分にあります。レイズ額は、相手のチップ量とポットサイズを考慮して、2倍のベット（160）に少し足して180にします。'}
2025-10-31 18:55:10,058 - poker_game - DEBUG - [Agent1] Extracted values - action: 'raise', amount: 180
2025-10-31 18:55:10,058 - poker_game - DEBUG - [Agent1] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (6005)']
2025-10-31 18:55:10,058 - poker_game - DEBUG - [Agent1] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:55:10,059 - poker_game - DEBUG - [Agent1] Raise amount 180 is valid (min: 20)
2025-10-31 18:55:10,059 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'raise', 'amount': 180}
2025-10-31 18:55:10,059 - poker_game - INFO - [Agent1] Successfully parsed decision: raise, 180, コミュニティカードにAが2枚あるので、相手がAを持っている可能性が高いです。しかし、私の手札はQ10で、ストレート（QJKA10）の可能性を秘めています。相手のベット額は80で、ポットは190です。相手がAを持っているとしても、私のストレートの可能性はあります。相手がAを持っている場合、私のストレートの完成確率はまだ残っています。相手のベット額をコールするだけでは、有利な状況とは言えません。この状況でレイズすることで、相手にプレッシャーを与え、ポットを大きくすることができます。相手がAを持っていない、あるいは私のストレートを恐れている場合、フォールドしてくれる可能性があります。もしコールされても、次のリバーでストレートが完成すれば、勝てる可能性は十分にあります。レイズ額は、相手のチップ量とポットサイズを考慮して、2倍のベット（160）に少し足して180にします。
2025-10-31 18:55:10,061 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'raise' with amount 180
2025-10-31 18:55:10,062 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:55:10,062 - poker_game - INFO - Hand #14, Phase: turn
2025-10-31 18:55:10,063 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:55:10,063 - poker_game - INFO - Pot: 190, Current bet: 0
2025-10-31 18:55:10,064 - poker_game - INFO - Last raiser: None
2025-10-31 18:55:10,064 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:10,066 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:10,066 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥', 'K♠']
2025-10-31 18:55:10,067 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:10,068 - poker_game - INFO -   P1(Agent1): chips=6005, bet=0, status=active
2025-10-31 18:55:10,068 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:10,071 - poker_game - INFO -   P3(Agent3): chips=1591, bet=0, status=active
2025-10-31 18:55:10,072 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:10,074 - poker_game - INFO - ==================================================
2025-10-31 18:55:10,074 - poker_game - INFO - ACTION_EXECUTED: Player 1 raised to 180
2025-10-31 18:55:10,085 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:55:10,086 - poker_game - INFO - Hand #14, Phase: turn
2025-10-31 18:55:10,087 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:55:10,087 - poker_game - INFO - Pot: 370, Current bet: 180
2025-10-31 18:55:10,087 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:10,088 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:10,088 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:10,089 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥', 'K♠']
2025-10-31 18:55:10,089 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:10,089 - poker_game - INFO -   P1(Agent1): chips=5825, bet=180, status=active
2025-10-31 18:55:10,089 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:10,090 - poker_game - INFO -   P3(Agent3): chips=1591, bet=0, status=active
2025-10-31 18:55:10,090 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:10,090 - poker_game - INFO - Extra: Action: Player 1 raised to 180
2025-10-31 18:55:10,091 - poker_game - INFO - ==================================================
2025-10-31 18:55:10,091 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:55:10,091 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:55:10,092 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:55:10,093 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 18:55:10,094 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:55:10,094 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:55:10,095 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:55:10,095 - poker_game - DEBUG - Player bets: [180, 0], Current bet: 180, All same: False
2025-10-31 18:55:10,096 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:55:10,096 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:55:10,096 - poker_game - INFO - Hand #14, Phase: turn
2025-10-31 18:55:10,096 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:55:10,097 - poker_game - INFO - Pot: 370, Current bet: 180
2025-10-31 18:55:10,098 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:10,099 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:10,100 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:10,100 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥', 'K♠']
2025-10-31 18:55:10,100 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:10,102 - poker_game - INFO -   P1(Agent1): chips=5825, bet=180, status=active
2025-10-31 18:55:10,102 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:10,103 - poker_game - INFO -   P3(Agent3): chips=1591, bet=0, status=active
2025-10-31 18:55:10,103 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:10,103 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:55:10,103 - poker_game - INFO - ==================================================
2025-10-31 18:55:10,205 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "turn",
  "your_cards": [
    "7♦",
    "10♦"
  ],
  "community": [
    "A♠",
    "A♣",
    "J♥",
    "K♠"
  ],
  "your_chips": 1591,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 370,
  "to_call": 180,
  "dealer_button": 3,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1385,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5825,
      "bet": 180,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (180)",
    "raise (min 200)",
    "all-in (1591)"
  ],
  "history": [
    "Turn dealt: 10♥",
    "Player 3 checked",
    "River dealt: 10♠",
    "Player 3 raised to 1586",
    "Showdown: Player 2 hand=One Pair: 10s - K♠, 10♥, 10♠, 8♣, 6♣ cards=4♦, K♠",
    "Showdown: Player 3 hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣ cards=8♥, 9♠",
    "Side pot layer 0: amount=10, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 raised to 80",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: A♠, A♣, J♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: K♠",
    "Player 1 raised to 180"
  ]
}
2025-10-31 18:55:10,300 - poker_game - DEBUG - Create Session: {'id': '432f25a2-d197-4d80-a156-698336f43ddc', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904510.2960384}
2025-10-31 18:55:12,393 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 180,\n  "reasoning": "あなたの手札は7♦, 10♦で、コミュニティカードはA♠, A♣, J♥, K♠です。現在の状況はターン（Turn）で、あなたの番です。プレイヤー1が180をベットしており、コールするには180が必要です。あなたの手札では、Aペア（A♠, A♣）に次ぐ2ペア（J♥, K♠）が成立していますが、プレイヤー1がより強いハンドを持っている可能性があります。しかし、ポットサイズ（370）に対するコール額（180）はそれほど大きくなく、あなたのチップ量（1591）も十分にあるため、コールしてリバー（River）のカードを見るのが妥当な判断です。フォールド（fold）するとポットを獲得できず、レイズ（raise）は相手がより強いハンドを持っている可能性を考えるとリスクが高いです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 216, 'promptTokenCount': 1002, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1002}], 'totalTokenCount': 1218}, 'invocationId': 'e-51729a82-f7bd-40d2-bfab-0e8029abda80', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'ubtexmLY', 'timestamp': 1761904510.331103}]
2025-10-31 18:55:12,393 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:55:12,393 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 180,
  "reasoning": "あなたの手札は7♦, 10♦で、コミュニティカードはA♠, A♣, J♥, K♠です。現在の状況はターン（Turn）で、あなたの番です。プレイヤー1が180をベットしており、コールするには180が必要です。あなたの手札では、Aペア（A♠, A♣）に次ぐ2ペア（J♥, K♠）が成立していますが、プレイヤー1がより強いハンドを持っている可能性があります。しかし、ポットサイズ（370）に対するコール額（180）はそれほど大きくなく、あなたのチップ量（1591）も十分にあるため、コールしてリバー（River）のカードを見るのが妥当な判断です。フォールド（fold）するとポットを獲得できず、レイズ（raise）は相手がより強いハンドを持っている可能性を考えるとリスクが高いです。"
}
```
2025-10-31 18:55:12,394 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:55:12,394 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 180,\n  "reasoning": "あなたの手札は7♦, 10♦で、コミュニティカードはA♠, A♣, J♥, K♠です。現在の状況はターン（Turn）で、あなたの番です。プレイヤー1が180をベットしており、コールするには180が必要です。あなたの手札では、Aペア（A♠, A♣）に次ぐ2ペア（J♥, K♠）が成立していますが、プレイヤー1がより強いハンドを持っている可能性があります。しかし、ポットサイズ（370）に対するコール額（180）はそれほど大きくなく、あなたのチップ量（1591）も十分にあるため、コールしてリバー（River）のカードを見るのが妥当な判断です。フォールド（fold）するとポットを獲得できず、レイズ（raise）は相手がより強いハンドを持っている可能性を考えるとリスクが高いです。"\n}\n```'
2025-10-31 18:55:12,394 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:55:12,394 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 180,\n  "reasoning": "あなたの手札は7♦, 10♦で、コミュニティカードはA♠, A♣, J♥, K♠です。現在の状況はターン（Turn）で、あなたの番です。プレイヤー1が180をベットしており、コールするには180が必要です。あなたの手札では、Aペア（A♠, A♣）に次ぐ2ペア（J♥, K♠）が成立していますが、プレイヤー1がより強いハンドを持っている可能性があります。しかし、ポットサイズ（370）に対するコール額（180）はそれほど大きくなく、あなたのチップ量（1591）も十分にあるため、コールしてリバー（River）のカードを見るのが妥当な判断です。フォールド（fold）するとポットを獲得できず、レイズ（raise）は相手がより強いハンドを持っている可能性を考えるとリスクが高いです。"\n}'
2025-10-31 18:55:12,394 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 180,
  "reasoning": "あなたの手札は7♦, 10♦で、コミュニティカードはA♠, A♣, J♥, K♠です。現在の状況はターン（Turn）で、あなたの番です。プレイヤー1が180をベットしており、コールするには180が必要です。あなたの手札では、Aペア（A♠, A♣）に次ぐ2ペア（J♥, K♠）が成立していますが、プレイヤー1がより強いハンドを持っている可能性があります。しかし、ポットサイズ（370）に対するコール額（180）はそれほど大きくなく、あなたのチップ量（1591）も十分にあるため、コールしてリバー（River）のカードを見るのが妥当な判断です。フォールド（fold）するとポットを獲得できず、レイズ（raise）は相手がより強いハンドを持っている可能性を考えるとリスクが高いです。"
}
2025-10-31 18:55:12,395 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 180, 'reasoning': 'あなたの手札は7♦, 10♦で、コミュニティカードはA♠, A♣, J♥, K♠です。現在の状況はターン（Turn）で、あなたの番です。プレイヤー1が180をベットしており、コールするには180が必要です。あなたの手札では、Aペア（A♠, A♣）に次ぐ2ペア（J♥, K♠）が成立していますが、プレイヤー1がより強いハンドを持っている可能性があります。しかし、ポットサイズ（370）に対するコール額（180）はそれほど大きくなく、あなたのチップ量（1591）も十分にあるため、コールしてリバー（River）のカードを見るのが妥当な判断です。フォールド（fold）するとポットを獲得できず、レイズ（raise）は相手がより強いハンドを持っている可能性を考えるとリスクが高いです。'}
2025-10-31 18:55:12,395 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 180
2025-10-31 18:55:12,395 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'call (180)', 'raise (min 200)', 'all-in (1591)']
2025-10-31 18:55:12,395 - poker_game - DEBUG - [Agent3] Call amount extracted from 'call (180)': 180
2025-10-31 18:55:12,395 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 180}
2025-10-31 18:55:12,395 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 180, あなたの手札は7♦, 10♦で、コミュニティカードはA♠, A♣, J♥, K♠です。現在の状況はターン（Turn）で、あなたの番です。プレイヤー1が180をベットしており、コールするには180が必要です。あなたの手札では、Aペア（A♠, A♣）に次ぐ2ペア（J♥, K♠）が成立していますが、プレイヤー1がより強いハンドを持っている可能性があります。しかし、ポットサイズ（370）に対するコール額（180）はそれほど大きくなく、あなたのチップ量（1591）も十分にあるため、コールしてリバー（River）のカードを見るのが妥当な判断です。フォールド（fold）するとポットを獲得できず、レイズ（raise）は相手がより強いハンドを持っている可能性を考えるとリスクが高いです。
2025-10-31 18:55:12,396 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 180
2025-10-31 18:55:12,397 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:55:12,397 - poker_game - INFO - Hand #14, Phase: turn
2025-10-31 18:55:12,398 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:55:12,398 - poker_game - INFO - Pot: 370, Current bet: 180
2025-10-31 18:55:12,399 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:12,399 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:12,400 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:12,400 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥', 'K♠']
2025-10-31 18:55:12,401 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:12,401 - poker_game - INFO -   P1(Agent1): chips=5825, bet=180, status=active
2025-10-31 18:55:12,402 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:12,402 - poker_game - INFO -   P3(Agent3): chips=1591, bet=0, status=active
2025-10-31 18:55:12,402 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:12,403 - poker_game - INFO - ==================================================
2025-10-31 18:55:12,403 - poker_game - INFO - ACTION_EXECUTED: Player 3 called 180
2025-10-31 18:55:12,415 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:55:12,415 - poker_game - INFO - Hand #14, Phase: turn
2025-10-31 18:55:12,416 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:55:12,416 - poker_game - INFO - Pot: 550, Current bet: 180
2025-10-31 18:55:12,417 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:12,417 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:12,418 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:12,418 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥', 'K♠']
2025-10-31 18:55:12,419 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:12,420 - poker_game - INFO -   P1(Agent1): chips=5825, bet=180, status=active
2025-10-31 18:55:12,421 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:12,422 - poker_game - INFO -   P3(Agent3): chips=1411, bet=180, status=active
2025-10-31 18:55:12,424 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:12,426 - poker_game - INFO - Extra: Action: Player 3 called 180
2025-10-31 18:55:12,426 - poker_game - INFO - ==================================================
2025-10-31 18:55:12,427 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:55:12,427 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:55:12,427 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 18:55:12,428 - poker_game - INFO - Advanced from player 3 to player 1 (seat order)
2025-10-31 18:55:12,428 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:55:12,428 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:55:12,429 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:55:12,429 - poker_game - DEBUG - Player bets: [180, 180], Current bet: 180, All same: True
2025-10-31 18:55:12,429 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:55:12,430 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:55:12,430 - poker_game - INFO - Hand #14, Phase: turn
2025-10-31 18:55:12,430 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:55:12,431 - poker_game - INFO - Pot: 550, Current bet: 180
2025-10-31 18:55:12,431 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:12,432 - poker_game - INFO - Betting round complete: True
2025-10-31 18:55:12,432 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:12,433 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥', 'K♠']
2025-10-31 18:55:12,433 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:12,433 - poker_game - INFO -   P1(Agent1): chips=5825, bet=180, status=active
2025-10-31 18:55:12,434 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:12,434 - poker_game - INFO -   P3(Agent3): chips=1411, bet=180, status=active
2025-10-31 18:55:12,435 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:12,435 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:55:12,435 - poker_game - INFO - ==================================================
2025-10-31 18:55:12,537 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 18:55:12,538 - poker_game - INFO - Betting round complete: True
2025-10-31 18:55:12,538 - poker_game - INFO - Remaining players: 2
2025-10-31 18:55:12,539 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:55:12,539 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:55:12,539 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 18:55:12,551 - poker_game - INFO - Starting new betting round
2025-10-31 18:55:12,552 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:55:12,552 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:55:12,553 - poker_game - DEBUG - Active players for new betting round: [1, 3]
2025-10-31 18:55:12,553 - poker_game - DEBUG - Dealer button: 3
2025-10-31 18:55:12,553 - poker_game - INFO - First actor: Player 1 (by phase rule), was 1
2025-10-31 18:55:12,554 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:55:12,554 - poker_game - INFO - Hand #14, Phase: river
2025-10-31 18:55:12,554 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:55:12,555 - poker_game - INFO - Pot: 550, Current bet: 0
2025-10-31 18:55:12,555 - poker_game - INFO - Last raiser: None
2025-10-31 18:55:12,556 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:12,556 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:12,557 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥', 'K♠', '2♠']
2025-10-31 18:55:12,557 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:12,557 - poker_game - INFO -   P1(Agent1): chips=5825, bet=0, status=active
2025-10-31 18:55:12,558 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:12,558 - poker_game - INFO -   P3(Agent3): chips=1411, bet=0, status=active
2025-10-31 18:55:12,559 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:12,560 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 18:55:12,560 - poker_game - INFO - ==================================================
2025-10-31 18:55:12,562 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "river",
  "your_cards": [
    "Q♦",
    "10♥"
  ],
  "community": [
    "A♠",
    "A♣",
    "J♥",
    "K♠",
    "2♠"
  ],
  "your_chips": 5825,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 260,
  "pot": 550,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1385,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1411,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (5825)"
  ],
  "history": [
    "River dealt: 10♠",
    "Player 3 raised to 1586",
    "Showdown: Player 2 hand=One Pair: 10s - K♠, 10♥, 10♠, 8♣, 6♣ cards=4♦, K♠",
    "Showdown: Player 3 hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣ cards=8♥, 9♠",
    "Side pot layer 0: amount=10, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 raised to 80",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: A♠, A♣, J♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: K♠",
    "Player 1 raised to 180",
    "Player 3 called 180",
    "River dealt: 2♠"
  ]
}
2025-10-31 18:55:12,631 - poker_game - DEBUG - Create Session: {'id': '221b878a-d62e-4567-b4dc-e42fac94dd2b', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904512.6289008}
2025-10-31 18:55:15,218 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカード）が配られた後、あなたの手札は「Q♦」「10♥」で、コミュニティカードは「A♠」「A♣」「J♥」「K♠」「2♠」です。このボードでは、あなたのベストハンドは「A♦、A♣、K♠、J♥、Q♦」で、エースのワンペア（Aペア）です。しかし、プレイヤー3はすでに1586をベットしており、あなたがコールするにはそれだけのチップが必要です。プレイヤー3のベット額は、あなたのポットに対するベット額（260）や、あなたの残りチップ（5825）と比較しても非常に大きく、それに見合うだけの強いハンドを持っている可能性が高いです。過去の履歴を見ると、プレイヤー3はすでにかなりのベットをしており、相手は強いハンドを持っている可能性が高いです。あなたのハンドはエースのワンペアだけでは、相手の大きなベットに対抗するには弱すぎると判断し、フォールド（降りる）を選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 238, 'promptTokenCount': 1003, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1003}], 'totalTokenCount': 1241}, 'invocationId': 'e-1711cc7b-e15d-44af-a1c9-fbe6b6b6e378', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'abCUc7U7', 'timestamp': 1761904512.641475}]
2025-10-31 18:55:15,219 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:55:15,220 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "リバー（最後のコミュニティカード）が配られた後、あなたの手札は「Q♦」「10♥」で、コミュニティカードは「A♠」「A♣」「J♥」「K♠」「2♠」です。このボードでは、あなたのベストハンドは「A♦、A♣、K♠、J♥、Q♦」で、エースのワンペア（Aペア）です。しかし、プレイヤー3はすでに1586をベットしており、あなたがコールするにはそれだけのチップが必要です。プレイヤー3のベット額は、あなたのポットに対するベット額（260）や、あなたの残りチップ（5825）と比較しても非常に大きく、それに見合うだけの強いハンドを持っている可能性が高いです。過去の履歴を見ると、プレイヤー3はすでにかなりのベットをしており、相手は強いハンドを持っている可能性が高いです。あなたのハンドはエースのワンペアだけでは、相手の大きなベットに対抗するには弱すぎると判断し、フォールド（降りる）を選択します。"
}
```
2025-10-31 18:55:15,220 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:55:15,220 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカード）が配られた後、あなたの手札は「Q♦」「10♥」で、コミュニティカードは「A♠」「A♣」「J♥」「K♠」「2♠」です。このボードでは、あなたのベストハンドは「A♦、A♣、K♠、J♥、Q♦」で、エースのワンペア（Aペア）です。しかし、プレイヤー3はすでに1586をベットしており、あなたがコールするにはそれだけのチップが必要です。プレイヤー3のベット額は、あなたのポットに対するベット額（260）や、あなたの残りチップ（5825）と比較しても非常に大きく、それに見合うだけの強いハンドを持っている可能性が高いです。過去の履歴を見ると、プレイヤー3はすでにかなりのベットをしており、相手は強いハンドを持っている可能性が高いです。あなたのハンドはエースのワンペアだけでは、相手の大きなベットに対抗するには弱すぎると判断し、フォールド（降りる）を選択します。"\n}\n```'
2025-10-31 18:55:15,221 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:55:15,221 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカード）が配られた後、あなたの手札は「Q♦」「10♥」で、コミュニティカードは「A♠」「A♣」「J♥」「K♠」「2♠」です。このボードでは、あなたのベストハンドは「A♦、A♣、K♠、J♥、Q♦」で、エースのワンペア（Aペア）です。しかし、プレイヤー3はすでに1586をベットしており、あなたがコールするにはそれだけのチップが必要です。プレイヤー3のベット額は、あなたのポットに対するベット額（260）や、あなたの残りチップ（5825）と比較しても非常に大きく、それに見合うだけの強いハンドを持っている可能性が高いです。過去の履歴を見ると、プレイヤー3はすでにかなりのベットをしており、相手は強いハンドを持っている可能性が高いです。あなたのハンドはエースのワンペアだけでは、相手の大きなベットに対抗するには弱すぎると判断し、フォールド（降りる）を選択します。"\n}'
2025-10-31 18:55:15,221 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "リバー（最後のコミュニティカード）が配られた後、あなたの手札は「Q♦」「10♥」で、コミュニティカードは「A♠」「A♣」「J♥」「K♠」「2♠」です。このボードでは、あなたのベストハンドは「A♦、A♣、K♠、J♥、Q♦」で、エースのワンペア（Aペア）です。しかし、プレイヤー3はすでに1586をベットしており、あなたがコールするにはそれだけのチップが必要です。プレイヤー3のベット額は、あなたのポットに対するベット額（260）や、あなたの残りチップ（5825）と比較しても非常に大きく、それに見合うだけの強いハンドを持っている可能性が高いです。過去の履歴を見ると、プレイヤー3はすでにかなりのベットをしており、相手は強いハンドを持っている可能性が高いです。あなたのハンドはエースのワンペアだけでは、相手の大きなベットに対抗するには弱すぎると判断し、フォールド（降りる）を選択します。"
}
2025-10-31 18:55:15,221 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'リバー（最後のコミュニティカード）が配られた後、あなたの手札は「Q♦」「10♥」で、コミュニティカードは「A♠」「A♣」「J♥」「K♠」「2♠」です。このボードでは、あなたのベストハンドは「A♦、A♣、K♠、J♥、Q♦」で、エースのワンペア（Aペア）です。しかし、プレイヤー3はすでに1586をベットしており、あなたがコールするにはそれだけのチップが必要です。プレイヤー3のベット額は、あなたのポットに対するベット額（260）や、あなたの残りチップ（5825）と比較しても非常に大きく、それに見合うだけの強いハンドを持っている可能性が高いです。過去の履歴を見ると、プレイヤー3はすでにかなりのベットをしており、相手は強いハンドを持っている可能性が高いです。あなたのハンドはエースのワンペアだけでは、相手の大きなベットに対抗するには弱すぎると判断し、フォールド（降りる）を選択します。'}
2025-10-31 18:55:15,222 - poker_game - DEBUG - [Agent1] Extracted values - action: 'fold', amount: 0
2025-10-31 18:55:15,222 - poker_game - DEBUG - [Agent1] Action 'fold' normalized - amount set to 0
2025-10-31 18:55:15,222 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:55:15,222 - poker_game - INFO - [Agent1] Successfully parsed decision: fold, 0, リバー（最後のコミュニティカード）が配られた後、あなたの手札は「Q♦」「10♥」で、コミュニティカードは「A♠」「A♣」「J♥」「K♠」「2♠」です。このボードでは、あなたのベストハンドは「A♦、A♣、K♠、J♥、Q♦」で、エースのワンペア（Aペア）です。しかし、プレイヤー3はすでに1586をベットしており、あなたがコールするにはそれだけのチップが必要です。プレイヤー3のベット額は、あなたのポットに対するベット額（260）や、あなたの残りチップ（5825）と比較しても非常に大きく、それに見合うだけの強いハンドを持っている可能性が高いです。過去の履歴を見ると、プレイヤー3はすでにかなりのベットをしており、相手は強いハンドを持っている可能性が高いです。あなたのハンドはエースのワンペアだけでは、相手の大きなベットに対抗するには弱すぎると判断し、フォールド（降りる）を選択します。
2025-10-31 18:55:15,224 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'fold' with amount 0
2025-10-31 18:55:15,224 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:55:15,225 - poker_game - INFO - Hand #14, Phase: river
2025-10-31 18:55:15,225 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:55:15,226 - poker_game - INFO - Pot: 550, Current bet: 0
2025-10-31 18:55:15,226 - poker_game - INFO - Last raiser: None
2025-10-31 18:55:15,227 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:15,227 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:15,228 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥', 'K♠', '2♠']
2025-10-31 18:55:15,228 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:15,229 - poker_game - INFO -   P1(Agent1): chips=5825, bet=0, status=active
2025-10-31 18:55:15,229 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:15,230 - poker_game - INFO -   P3(Agent3): chips=1411, bet=0, status=active
2025-10-31 18:55:15,231 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:15,232 - poker_game - INFO - ==================================================
2025-10-31 18:55:15,232 - poker_game - INFO - ACTION_EXECUTED: Player 1 folded
2025-10-31 18:55:15,247 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:55:15,248 - poker_game - INFO - Hand #14, Phase: river
2025-10-31 18:55:15,248 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:55:15,249 - poker_game - INFO - Pot: 550, Current bet: 0
2025-10-31 18:55:15,250 - poker_game - INFO - Last raiser: None
2025-10-31 18:55:15,250 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:15,251 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 3
2025-10-31 18:55:15,251 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥', 'K♠', '2♠']
2025-10-31 18:55:15,251 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:15,252 - poker_game - INFO -   P1(Agent1): chips=5825, bet=0, status=folded
2025-10-31 18:55:15,252 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:15,253 - poker_game - INFO -   P3(Agent3): chips=1411, bet=0, status=active
2025-10-31 18:55:15,253 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:15,253 - poker_game - INFO - Extra: Action: Player 1 folded
2025-10-31 18:55:15,254 - poker_game - INFO - ==================================================
2025-10-31 18:55:15,254 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:55:15,255 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:55:15,255 - poker_game - DEBUG - Active players: [3]
2025-10-31 18:55:15,255 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 18:55:15,256 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:55:15,256 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:55:15,257 - poker_game - DEBUG - Active: 1, All-in: 0
2025-10-31 18:55:15,257 - poker_game - INFO - Betting complete: Only 1 or fewer players remaining
2025-10-31 18:55:15,257 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:55:15,258 - poker_game - INFO - Hand #14, Phase: river
2025-10-31 18:55:15,258 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:55:15,259 - poker_game - INFO - Pot: 550, Current bet: 0
2025-10-31 18:55:15,259 - poker_game - INFO - Last raiser: None
2025-10-31 18:55:15,260 - poker_game - INFO - Betting round complete: True
2025-10-31 18:55:15,261 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 3
2025-10-31 18:55:15,261 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥', 'K♠', '2♠']
2025-10-31 18:55:15,262 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:15,262 - poker_game - INFO -   P1(Agent1): chips=5825, bet=0, status=folded
2025-10-31 18:55:15,263 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:15,263 - poker_game - INFO -   P3(Agent3): chips=1411, bet=0, status=active
2025-10-31 18:55:15,264 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:15,264 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:55:15,264 - poker_game - INFO - ==================================================
2025-10-31 18:55:15,366 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 18:55:15,366 - poker_game - INFO - Betting round complete: True
2025-10-31 18:55:15,367 - poker_game - INFO - Remaining players: 1
2025-10-31 18:55:15,367 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 18:55:15,368 - poker_game - INFO - Going to SHOWDOWN - only 1 or fewer players remaining
2025-10-31 18:55:15,368 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:55:15,368 - poker_game - INFO - Hand #14, Phase: showdown
2025-10-31 18:55:15,369 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:55:15,369 - poker_game - INFO - Pot: 550, Current bet: 0
2025-10-31 18:55:15,370 - poker_game - INFO - Last raiser: None
2025-10-31 18:55:15,370 - poker_game - INFO - Betting round complete: True
2025-10-31 18:55:15,371 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 3
2025-10-31 18:55:15,371 - poker_game - INFO - Community cards: ['A♠', 'A♣', 'J♥', 'K♠', '2♠']
2025-10-31 18:55:15,372 - poker_game - INFO -   P0(Agent0): chips=1385, bet=0, status=folded
2025-10-31 18:55:15,372 - poker_game - INFO -   P1(Agent1): chips=5825, bet=0, status=folded
2025-10-31 18:55:15,372 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:15,373 - poker_game - INFO -   P3(Agent3): chips=1411, bet=0, status=active
2025-10-31 18:55:15,373 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:15,374 - poker_game - INFO - ==================================================
2025-10-31 18:55:15,374 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:55:15,375 - poker_game - INFO - Pot: 550, Community cards: ['A♠', 'A♣', 'J♥', 'K♠', '2♠']
2025-10-31 18:55:15,375 - poker_game - INFO -   Player 3 status=active cards=['7♦', '10♦']
2025-10-31 18:55:15,376 - poker_game - INFO - Showdown winner by default: Player 3 awarded 550
2025-10-31 18:55:15,376 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:55:15,376 - poker_game - INFO - === STARTING NEW HAND #15 ===
2025-10-31 18:55:15,377 - poker_game - INFO - Active players for new hand: 4
2025-10-31 18:55:15,378 - poker_game - INFO - Moving dealer button
2025-10-31 18:55:15,378 - poker_game - INFO - Posting blinds
2025-10-31 18:55:15,401 - poker_game - INFO - Dealing hole cards
2025-10-31 18:55:15,402 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:55:15,415 - poker_game - INFO - Started new hand in database: hand_id=15
2025-10-31 18:55:15,416 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:55:15,416 - poker_game - INFO - Hand #15, Phase: preflop
2025-10-31 18:55:15,417 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:55:15,417 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:55:15,417 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:15,418 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:15,418 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:55:15,419 - poker_game - INFO - Community cards: []
2025-10-31 18:55:15,419 - poker_game - INFO -   P0(Agent0): chips=1375, bet=10, status=active
2025-10-31 18:55:15,420 - poker_game - INFO -   P1(Agent1): chips=5805, bet=20, status=active
2025-10-31 18:55:15,420 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:15,420 - poker_game - INFO -   P3(Agent3): chips=1961, bet=0, status=active
2025-10-31 18:55:15,421 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=active
2025-10-31 18:55:15,421 - poker_game - INFO - ==================================================
2025-10-31 18:55:15,422 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "9♥",
    "2♥"
  ],
  "community": [],
  "your_chips": 1961,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 4,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1375,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 5805,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1961)"
  ],
  "history": [
    "Side pot layer 0: amount=10, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 raised to 80",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: A♠, A♣, J♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: K♠",
    "Player 1 raised to 180",
    "Player 3 called 180",
    "River dealt: 2♠",
    "Player 1 folded",
    "Showdown: Player 3 won 550",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20"
  ]
}
2025-10-31 18:55:15,438 - poker_game - DEBUG - Create Session: {'id': '06670523-6d9d-443e-ae4f-0940c6e9c3fa', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904515.4353712}
2025-10-31 18:55:18,060 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（各プレイヤーに2枚のカードが配られた後の最初のラウンド）で、私の手札は9♥2♥です。これは「スーテッド・オフスーツ」（同じスートだが数字が離れている）で、一般的に弱いハンドです。すでにポットには30（SB10 + BB20）があり、コールするには20必要です。しかし、前のプレイヤーはすでに80までベットしており、さらにレイズ（ベット額を上げる）の選択肢もあります。この弱いハンドで、相手のレイズに対応するために20以上をベットするのは、期待値が低く、長期的に見て損失になる可能性が高いです。したがって、フォールド（全てのカードを伏せてゲームから降りる）するのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 190, 'promptTokenCount': 897, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 897}], 'totalTokenCount': 1087}, 'invocationId': 'e-a7c171fa-fd12-4c38-8026-4141a3a6441f', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'M2wYZhm8', 'timestamp': 1761904515.451351}]
2025-10-31 18:55:18,061 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:55:18,061 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（各プレイヤーに2枚のカードが配られた後の最初のラウンド）で、私の手札は9♥2♥です。これは「スーテッド・オフスーツ」（同じスートだが数字が離れている）で、一般的に弱いハンドです。すでにポットには30（SB10 + BB20）があり、コールするには20必要です。しかし、前のプレイヤーはすでに80までベットしており、さらにレイズ（ベット額を上げる）の選択肢もあります。この弱いハンドで、相手のレイズに対応するために20以上をベットするのは、期待値が低く、長期的に見て損失になる可能性が高いです。したがって、フォールド（全てのカードを伏せてゲームから降りる）するのが最善の選択です。"
}
```
2025-10-31 18:55:18,061 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:55:18,061 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（各プレイヤーに2枚のカードが配られた後の最初のラウンド）で、私の手札は9♥2♥です。これは「スーテッド・オフスーツ」（同じスートだが数字が離れている）で、一般的に弱いハンドです。すでにポットには30（SB10 + BB20）があり、コールするには20必要です。しかし、前のプレイヤーはすでに80までベットしており、さらにレイズ（ベット額を上げる）の選択肢もあります。この弱いハンドで、相手のレイズに対応するために20以上をベットするのは、期待値が低く、長期的に見て損失になる可能性が高いです。したがって、フォールド（全てのカードを伏せてゲームから降りる）するのが最善の選択です。"\n}\n```'
2025-10-31 18:55:18,061 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:55:18,062 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（各プレイヤーに2枚のカードが配られた後の最初のラウンド）で、私の手札は9♥2♥です。これは「スーテッド・オフスーツ」（同じスートだが数字が離れている）で、一般的に弱いハンドです。すでにポットには30（SB10 + BB20）があり、コールするには20必要です。しかし、前のプレイヤーはすでに80までベットしており、さらにレイズ（ベット額を上げる）の選択肢もあります。この弱いハンドで、相手のレイズに対応するために20以上をベットするのは、期待値が低く、長期的に見て損失になる可能性が高いです。したがって、フォールド（全てのカードを伏せてゲームから降りる）するのが最善の選択です。"\n}'
2025-10-31 18:55:18,062 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（各プレイヤーに2枚のカードが配られた後の最初のラウンド）で、私の手札は9♥2♥です。これは「スーテッド・オフスーツ」（同じスートだが数字が離れている）で、一般的に弱いハンドです。すでにポットには30（SB10 + BB20）があり、コールするには20必要です。しかし、前のプレイヤーはすでに80までベットしており、さらにレイズ（ベット額を上げる）の選択肢もあります。この弱いハンドで、相手のレイズに対応するために20以上をベットするのは、期待値が低く、長期的に見て損失になる可能性が高いです。したがって、フォールド（全てのカードを伏せてゲームから降りる）するのが最善の選択です。"
}
2025-10-31 18:55:18,062 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（各プレイヤーに2枚のカードが配られた後の最初のラウンド）で、私の手札は9♥2♥です。これは「スーテッド・オフスーツ」（同じスートだが数字が離れている）で、一般的に弱いハンドです。すでにポットには30（SB10 + BB20）があり、コールするには20必要です。しかし、前のプレイヤーはすでに80までベットしており、さらにレイズ（ベット額を上げる）の選択肢もあります。この弱いハンドで、相手のレイズに対応するために20以上をベットするのは、期待値が低く、長期的に見て損失になる可能性が高いです。したがって、フォールド（全てのカードを伏せてゲームから降りる）するのが最善の選択です。'}
2025-10-31 18:55:18,062 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 18:55:18,062 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 18:55:18,062 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:55:18,062 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップ（各プレイヤーに2枚のカードが配られた後の最初のラウンド）で、私の手札は9♥2♥です。これは「スーテッド・オフスーツ」（同じスートだが数字が離れている）で、一般的に弱いハンドです。すでにポットには30（SB10 + BB20）があり、コールするには20必要です。しかし、前のプレイヤーはすでに80までベットしており、さらにレイズ（ベット額を上げる）の選択肢もあります。この弱いハンドで、相手のレイズに対応するために20以上をベットするのは、期待値が低く、長期的に見て損失になる可能性が高いです。したがって、フォールド（全てのカードを伏せてゲームから降りる）するのが最善の選択です。
2025-10-31 18:55:18,063 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 18:55:18,063 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:55:18,063 - poker_game - INFO - Hand #15, Phase: preflop
2025-10-31 18:55:18,064 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:55:18,064 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:55:18,064 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:18,064 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:18,064 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:55:18,064 - poker_game - INFO - Community cards: []
2025-10-31 18:55:18,064 - poker_game - INFO -   P0(Agent0): chips=1375, bet=10, status=active
2025-10-31 18:55:18,064 - poker_game - INFO -   P1(Agent1): chips=5805, bet=20, status=active
2025-10-31 18:55:18,064 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:18,064 - poker_game - INFO -   P3(Agent3): chips=1961, bet=0, status=active
2025-10-31 18:55:18,064 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=active
2025-10-31 18:55:18,064 - poker_game - INFO - ==================================================
2025-10-31 18:55:18,065 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 18:55:18,084 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:55:18,085 - poker_game - INFO - Hand #15, Phase: preflop
2025-10-31 18:55:18,085 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 18:55:18,085 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:55:18,086 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:18,086 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:18,086 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:55:18,086 - poker_game - INFO - Community cards: []
2025-10-31 18:55:18,086 - poker_game - INFO -   P0(Agent0): chips=1375, bet=10, status=active
2025-10-31 18:55:18,086 - poker_game - INFO -   P1(Agent1): chips=5805, bet=20, status=active
2025-10-31 18:55:18,087 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:18,087 - poker_game - INFO -   P3(Agent3): chips=1961, bet=0, status=folded
2025-10-31 18:55:18,087 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=active
2025-10-31 18:55:18,087 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 18:55:18,087 - poker_game - INFO - ==================================================
2025-10-31 18:55:18,087 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:55:18,088 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:55:18,088 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 18:55:18,088 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:55:18,088 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:55:18,088 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:55:18,088 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:55:18,088 - poker_game - DEBUG - Player bets: [10, 20, 0], Current bet: 20, All same: False
2025-10-31 18:55:18,089 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:55:18,089 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:55:18,089 - poker_game - INFO - Hand #15, Phase: preflop
2025-10-31 18:55:18,089 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:55:18,089 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:55:18,090 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:18,090 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:18,090 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:55:18,090 - poker_game - INFO - Community cards: []
2025-10-31 18:55:18,090 - poker_game - INFO -   P0(Agent0): chips=1375, bet=10, status=active
2025-10-31 18:55:18,090 - poker_game - INFO -   P1(Agent1): chips=5805, bet=20, status=active
2025-10-31 18:55:18,091 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:18,091 - poker_game - INFO -   P3(Agent3): chips=1961, bet=0, status=folded
2025-10-31 18:55:18,091 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=active
2025-10-31 18:55:18,091 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:55:18,091 - poker_game - INFO - ==================================================
2025-10-31 18:55:18,194 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "Q♣",
    "7♣"
  ],
  "community": [],
  "your_chips": 829,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1375,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 5805,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1961,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (829)"
  ],
  "history": [
    "Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 raised to 80",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: A♠, A♣, J♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: K♠",
    "Player 1 raised to 180",
    "Player 3 called 180",
    "River dealt: 2♠",
    "Player 1 folded",
    "Showdown: Player 3 won 550",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded"
  ]
}
2025-10-31 18:55:18,206 - poker_game - DEBUG - Create Session: {'id': '61025543-c38a-4d4d-af93-266d31d24983', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904518.2044492}
2025-10-31 18:55:28,353 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:55:33,412 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_lbZjSSTib5zYi0imyrokXEBr', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1160, 'totalTokenCount': 1177}, 'invocationId': 'e-6d33cbfc-62a7-4a05-b16c-2785332f47bc', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '2xDX0t96', 'timestamp': 1761904518.218153}, {'content': {'parts': [{'functionResponse': {'id': 'call_lbZjSSTib5zYi0imyrokXEBr', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-6d33cbfc-62a7-4a05-b16c-2785332f47bc', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'neVzAPiE', 'timestamp': 1761904516.699371}, {'content': {'parts': [{'functionCall': {'id': 'call_gHg4siXcdMtaLzuJUydQwAmM', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1684, 'totalTokenCount': 1704}, 'invocationId': 'e-6d33cbfc-62a7-4a05-b16c-2785332f47bc', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'dR10GDY4', 'timestamp': 1761904516.703819}, {'content': {'parts': [{'functionResponse': {'id': 'call_gHg4siXcdMtaLzuJUydQwAmM', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-6d33cbfc-62a7-4a05-b16c-2785332f47bc', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'V6dsbMZZ', 'timestamp': 1761904518.305604}, {'content': {'parts': [{'functionCall': {'id': 'call_SCFyCDrt3sYEMqY1jGoVQ4jP', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1246, 'totalTokenCount': 1263}, 'invocationId': 'e-6d33cbfc-62a7-4a05-b16c-2785332f47bc', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'T8bibJvE', 'timestamp': 1761904518.307116}, {'content': {'parts': [{'functionResponse': {'id': 'call_SCFyCDrt3sYEMqY1jGoVQ4jP', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-6d33cbfc-62a7-4a05-b16c-2785332f47bc', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '0UzpizDh', 'timestamp': 1761904519.43419}, {'content': {'parts': [{'functionCall': {'id': 'call_65qNfd5J3lvjE93qYUixzhGb', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['Q♣', '7♣'], 'community': [], 'your_chips': 829, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 0, 'pot': 30, 'to_call': 20, 'dealer_button': 4, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1375, 'bet': 10, 'status': 'active'}, {'id': 1, 'chips': 5805, 'bet': 20, 'status': 'active'}, {'id': 3, 'chips': 1961, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'call (20)', 'raise (min 40)', 'all-in (829)'], 'history': ['Side pot layer 1: amount=1661, winners=3 best_hand=Two Pair: 10s and 8s - 10♥, 10♠, 9♠, 8♥, 8♣', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 called 20', 'Player 3 raised to 80', 'Player 4 folded', 'Player 0 folded', 'Player 1 called 60', 'Flop dealt: A♠, A♣, J♥', 'Player 1 checked', 'Player 3 checked', 'Turn dealt: K♠', 'Player 1 raised to 180', 'Player 3 called 180', 'River dealt: 2♠', 'Player 1 folded', 'Showdown: Player 3 won 550', 'Player 0 posted small blind 10', 'Player 1 posted big blind 20', 'Player 3 folded']}, 'call_amount': 20, 'pot_after_call': 50, 'equity': 0.2}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 376, 'promptTokenCount': 1776, 'totalTokenCount': 2152}, 'invocationId': 'e-6d33cbfc-62a7-4a05-b16c-2785332f47bc', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'rtjL8Lsd', 'timestamp': 1761904519.436295}, {'content': {'parts': [{'functionResponse': {'id': 'call_65qNfd5J3lvjE93qYUixzhGb', 'name': 'action_decision', 'response': {'action': 'fold', 'amount': 0, 'reasoning': '期待値が-6.00(ポットに対して-20.00%で、マイナスなのでフォールド'}}}], 'role': 'user'}, 'invocationId': 'e-6d33cbfc-62a7-4a05-b16c-2785332f47bc', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'xlr1GuuJ', 'timestamp': 1761904531.710887}, {'content': {'parts': [{'text': '{"action":"fold","amount":0,"reasoning":"期待値が-6.00(ポットに対して-20.00%で、マイナスなのでフォールド"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 41, 'promptTokenCount': 2206, 'totalTokenCount': 2247}, 'invocationId': 'e-6d33cbfc-62a7-4a05-b16c-2785332f47bc', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '3oj4MSEw', 'timestamp': 1761904531.713967}]
2025-10-31 18:55:33,412 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:55:33,412 - poker_game - DEBUG - {"action":"fold","amount":0,"reasoning":"期待値が-6.00(ポットに対して-20.00%で、マイナスなのでフォールド"}
2025-10-31 18:55:33,413 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:55:33,413 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"fold","amount":0,"reasoning":"期待値が-6.00(ポットに対して-20.00%で、マイナスなのでフォールド"}'
2025-10-31 18:55:33,413 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:55:33,413 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"fold","amount":0,"reasoning":"期待値が-6.00(ポットに対して-20.00%で、マイナスなのでフォールド"}
2025-10-31 18:55:33,413 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': '期待値が-6.00(ポットに対して-20.00%で、マイナスなのでフォールド'}
2025-10-31 18:55:33,413 - poker_game - DEBUG - [Agent4] Extracted values - action: 'fold', amount: 0
2025-10-31 18:55:33,414 - poker_game - DEBUG - [Agent4] Action 'fold' normalized - amount set to 0
2025-10-31 18:55:33,414 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:55:33,414 - poker_game - INFO - [Agent4] Successfully parsed decision: fold, 0, 期待値が-6.00(ポットに対して-20.00%で、マイナスなのでフォールド
2025-10-31 18:55:33,414 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'fold' with amount 0
2025-10-31 18:55:33,415 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:55:33,415 - poker_game - INFO - Hand #15, Phase: preflop
2025-10-31 18:55:33,415 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:55:33,415 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:55:33,415 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:33,416 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:33,416 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:55:33,416 - poker_game - INFO - Community cards: []
2025-10-31 18:55:33,416 - poker_game - INFO -   P0(Agent0): chips=1375, bet=10, status=active
2025-10-31 18:55:33,417 - poker_game - INFO -   P1(Agent1): chips=5805, bet=20, status=active
2025-10-31 18:55:33,417 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:33,417 - poker_game - INFO -   P3(Agent3): chips=1961, bet=0, status=folded
2025-10-31 18:55:33,417 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=active
2025-10-31 18:55:33,417 - poker_game - INFO - ==================================================
2025-10-31 18:55:33,418 - poker_game - INFO - ACTION_EXECUTED: Player 4 folded
2025-10-31 18:55:33,432 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:55:33,432 - poker_game - INFO - Hand #15, Phase: preflop
2025-10-31 18:55:33,432 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 18:55:33,433 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:55:33,433 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:33,433 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:33,433 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:33,433 - poker_game - INFO - Community cards: []
2025-10-31 18:55:33,434 - poker_game - INFO -   P0(Agent0): chips=1375, bet=10, status=active
2025-10-31 18:55:33,434 - poker_game - INFO -   P1(Agent1): chips=5805, bet=20, status=active
2025-10-31 18:55:33,434 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:33,434 - poker_game - INFO -   P3(Agent3): chips=1961, bet=0, status=folded
2025-10-31 18:55:33,434 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:33,434 - poker_game - INFO - Extra: Action: Player 4 folded
2025-10-31 18:55:33,434 - poker_game - INFO - ==================================================
2025-10-31 18:55:33,435 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:55:33,435 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:55:33,435 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:55:33,435 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:55:33,435 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:55:33,435 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:55:33,435 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:55:33,435 - poker_game - DEBUG - Player bets: [10, 20], Current bet: 20, All same: False
2025-10-31 18:55:33,435 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:55:33,435 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:55:33,435 - poker_game - INFO - Hand #15, Phase: preflop
2025-10-31 18:55:33,435 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:55:33,435 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:55:33,436 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:33,436 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:33,436 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:33,436 - poker_game - INFO - Community cards: []
2025-10-31 18:55:33,436 - poker_game - INFO -   P0(Agent0): chips=1375, bet=10, status=active
2025-10-31 18:55:33,436 - poker_game - INFO -   P1(Agent1): chips=5805, bet=20, status=active
2025-10-31 18:55:33,436 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:33,436 - poker_game - INFO -   P3(Agent3): chips=1961, bet=0, status=folded
2025-10-31 18:55:33,436 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:33,436 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:55:33,437 - poker_game - INFO - ==================================================
2025-10-31 18:55:33,538 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "5♥",
    "10♣"
  ],
  "community": [],
  "your_chips": 1375,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 30,
  "to_call": 10,
  "dealer_button": 4,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 5805,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1961,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (1375)"
  ],
  "history": [
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 raised to 80",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: A♠, A♣, J♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: K♠",
    "Player 1 raised to 180",
    "Player 3 called 180",
    "River dealt: 2♠",
    "Player 1 folded",
    "Showdown: Player 3 won 550",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded"
  ]
}
2025-10-31 18:55:33,547 - poker_game - DEBUG - Create Session: {'id': '793a6d05-81b6-4302-b6c5-1562bfed9725', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904533.5443602}
2025-10-31 18:55:35,001 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopで5-10オフスーツは弱いハンドなので、レイズに対してフォールドするのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 55, 'promptTokenCount': 803, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 803}], 'totalTokenCount': 858}, 'invocationId': 'e-f0eec71a-66c4-465f-98e3-90f5a89fbb79', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '0fjvTMcB', 'timestamp': 1761904533.557576}]
2025-10-31 18:55:35,001 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:55:35,002 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "Preflopで5-10オフスーツは弱いハンドなので、レイズに対してフォールドするのが最善です。"
}
```
2025-10-31 18:55:35,002 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:55:35,002 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopで5-10オフスーツは弱いハンドなので、レイズに対してフォールドするのが最善です。"\n}\n```'
2025-10-31 18:55:35,003 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:55:35,003 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopで5-10オフスーツは弱いハンドなので、レイズに対してフォールドするのが最善です。"\n}'
2025-10-31 18:55:35,003 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "Preflopで5-10オフスーツは弱いハンドなので、レイズに対してフォールドするのが最善です。"
}
2025-10-31 18:55:35,003 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'Preflopで5-10オフスーツは弱いハンドなので、レイズに対してフォールドするのが最善です。'}
2025-10-31 18:55:35,004 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 18:55:35,004 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 18:55:35,004 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:55:35,004 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, Preflopで5-10オフスーツは弱いハンドなので、レイズに対してフォールドするのが最善です。
2025-10-31 18:55:35,005 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 18:55:35,011 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:55:35,012 - poker_game - INFO - Hand #15, Phase: preflop
2025-10-31 18:55:35,012 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:55:35,013 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:55:35,013 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:35,014 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:35,014 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:55:35,014 - poker_game - INFO - Community cards: []
2025-10-31 18:55:35,015 - poker_game - INFO -   P0(Agent0): chips=1375, bet=10, status=active
2025-10-31 18:55:35,015 - poker_game - INFO -   P1(Agent1): chips=5805, bet=20, status=active
2025-10-31 18:55:35,016 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:35,016 - poker_game - INFO -   P3(Agent3): chips=1961, bet=0, status=folded
2025-10-31 18:55:35,016 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:35,017 - poker_game - INFO - ==================================================
2025-10-31 18:55:35,017 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 18:55:35,030 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:55:35,031 - poker_game - INFO - Hand #15, Phase: preflop
2025-10-31 18:55:35,031 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 18:55:35,032 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:55:35,032 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:35,033 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:35,033 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 3
2025-10-31 18:55:35,034 - poker_game - INFO - Community cards: []
2025-10-31 18:55:35,034 - poker_game - INFO -   P0(Agent0): chips=1375, bet=10, status=folded
2025-10-31 18:55:35,034 - poker_game - INFO -   P1(Agent1): chips=5805, bet=20, status=active
2025-10-31 18:55:35,035 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:35,035 - poker_game - INFO -   P3(Agent3): chips=1961, bet=0, status=folded
2025-10-31 18:55:35,036 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:35,036 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 18:55:35,037 - poker_game - INFO - ==================================================
2025-10-31 18:55:35,037 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:55:35,037 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:55:35,038 - poker_game - DEBUG - Active players: [1]
2025-10-31 18:55:35,038 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:55:35,038 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:55:35,039 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:55:35,039 - poker_game - DEBUG - Active: 1, All-in: 0
2025-10-31 18:55:35,039 - poker_game - INFO - Betting complete: Only 1 or fewer players remaining
2025-10-31 18:55:35,040 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:55:35,040 - poker_game - INFO - Hand #15, Phase: preflop
2025-10-31 18:55:35,041 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:55:35,041 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:55:35,042 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:35,042 - poker_game - INFO - Betting round complete: True
2025-10-31 18:55:35,042 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 3
2025-10-31 18:55:35,043 - poker_game - INFO - Community cards: []
2025-10-31 18:55:35,043 - poker_game - INFO -   P0(Agent0): chips=1375, bet=10, status=folded
2025-10-31 18:55:35,043 - poker_game - INFO -   P1(Agent1): chips=5805, bet=20, status=active
2025-10-31 18:55:35,044 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:35,044 - poker_game - INFO -   P3(Agent3): chips=1961, bet=0, status=folded
2025-10-31 18:55:35,045 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:35,045 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:55:35,045 - poker_game - INFO - ==================================================
2025-10-31 18:55:35,147 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:55:35,147 - poker_game - INFO - Betting round complete: True
2025-10-31 18:55:35,148 - poker_game - INFO - Remaining players: 1
2025-10-31 18:55:35,148 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:55:35,148 - poker_game - INFO - Going to SHOWDOWN - only 1 or fewer players remaining
2025-10-31 18:55:35,149 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:55:35,149 - poker_game - INFO - Hand #15, Phase: showdown
2025-10-31 18:55:35,150 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 18:55:35,150 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:55:35,151 - poker_game - INFO - Last raiser: 1
2025-10-31 18:55:35,151 - poker_game - INFO - Betting round complete: True
2025-10-31 18:55:35,152 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 3
2025-10-31 18:55:35,152 - poker_game - INFO - Community cards: []
2025-10-31 18:55:35,152 - poker_game - INFO -   P0(Agent0): chips=1375, bet=10, status=folded
2025-10-31 18:55:35,153 - poker_game - INFO -   P1(Agent1): chips=5805, bet=20, status=active
2025-10-31 18:55:35,153 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:35,154 - poker_game - INFO -   P3(Agent3): chips=1961, bet=0, status=folded
2025-10-31 18:55:35,154 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:55:35,155 - poker_game - INFO - ==================================================
2025-10-31 18:55:35,155 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:55:35,156 - poker_game - INFO - Pot: 30, Community cards: []
2025-10-31 18:55:35,156 - poker_game - INFO -   Player 1 status=active cards=['7♥', 'A♠']
2025-10-31 18:55:35,157 - poker_game - INFO - Showdown winner by default: Player 1 awarded 30
2025-10-31 18:55:35,157 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:55:35,159 - poker_game - INFO - === STARTING NEW HAND #16 ===
2025-10-31 18:55:35,160 - poker_game - INFO - Active players for new hand: 4
2025-10-31 18:55:35,161 - poker_game - INFO - Moving dealer button
2025-10-31 18:55:35,161 - poker_game - INFO - Posting blinds
2025-10-31 18:55:35,185 - poker_game - INFO - Dealing hole cards
2025-10-31 18:55:35,186 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:55:35,199 - poker_game - INFO - Started new hand in database: hand_id=16
2025-10-31 18:55:35,200 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:55:35,200 - poker_game - INFO - Hand #16, Phase: preflop
2025-10-31 18:55:35,201 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:55:35,201 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:55:35,201 - poker_game - INFO - Last raiser: 3
2025-10-31 18:55:35,202 - poker_game - INFO - Betting round complete: False
2025-10-31 18:55:35,202 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:55:35,202 - poker_game - INFO - Community cards: []
2025-10-31 18:55:35,203 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:55:35,203 - poker_game - INFO -   P1(Agent1): chips=5825, bet=10, status=active
2025-10-31 18:55:35,203 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:55:35,204 - poker_game - INFO -   P3(Agent3): chips=1941, bet=20, status=active
2025-10-31 18:55:35,204 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=active
2025-10-31 18:55:35,205 - poker_game - INFO - ==================================================
2025-10-31 18:55:35,206 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "A♠",
    "J♠"
  ],
  "community": [],
  "your_chips": 829,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1375,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 5825,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1941,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (829)"
  ],
  "history": [
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: A♠, A♣, J♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: K♠",
    "Player 1 raised to 180",
    "Player 3 called 180",
    "River dealt: 2♠",
    "Player 1 folded",
    "Showdown: Player 3 won 550",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20"
  ]
}
2025-10-31 18:55:35,221 - poker_game - DEBUG - Create Session: {'id': 'f6ea3e90-3dd8-490b-a52d-f5be77d36f74', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904535.2186277}
2025-10-31 18:55:45,418 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:55:55,230 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 18:56:05,378 - poker_game - INFO - Waiting for LLM API response for Agent4... 30 seconds elapsed
2025-10-31 18:56:16,180 - poker_game - WARNING - LLM API response timeout for Agent4 after 40 seconds - folding
2025-10-31 18:56:13,835 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'fold' with amount 0
2025-10-31 18:56:13,835 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:13,836 - poker_game - INFO - Hand #16, Phase: preflop
2025-10-31 18:56:13,836 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:56:13,836 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:56:13,836 - poker_game - INFO - Last raiser: 3
2025-10-31 18:56:13,837 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:13,837 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:56:13,837 - poker_game - INFO - Community cards: []
2025-10-31 18:56:13,837 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:56:13,837 - poker_game - INFO -   P1(Agent1): chips=5825, bet=10, status=active
2025-10-31 18:56:13,838 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:13,838 - poker_game - INFO -   P3(Agent3): chips=1941, bet=20, status=active
2025-10-31 18:56:13,838 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=active
2025-10-31 18:56:13,838 - poker_game - INFO - ==================================================
2025-10-31 18:56:13,839 - poker_game - INFO - ACTION_EXECUTED: Player 4 folded
2025-10-31 18:56:13,859 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:13,860 - poker_game - INFO - Hand #16, Phase: preflop
2025-10-31 18:56:13,860 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 18:56:13,860 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:56:13,860 - poker_game - INFO - Last raiser: 3
2025-10-31 18:56:13,861 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:13,861 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:13,861 - poker_game - INFO - Community cards: []
2025-10-31 18:56:13,861 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:56:13,861 - poker_game - INFO -   P1(Agent1): chips=5825, bet=10, status=active
2025-10-31 18:56:13,862 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:13,862 - poker_game - INFO -   P3(Agent3): chips=1941, bet=20, status=active
2025-10-31 18:56:13,862 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:13,862 - poker_game - INFO - Extra: Action: Player 4 folded
2025-10-31 18:56:13,862 - poker_game - INFO - ==================================================
2025-10-31 18:56:13,863 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:13,863 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:13,863 - poker_game - DEBUG - Active players: [0, 1, 3]
2025-10-31 18:56:13,863 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:56:13,863 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:13,863 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:13,863 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:56:13,864 - poker_game - DEBUG - Player bets: [0, 10, 20], Current bet: 20, All same: False
2025-10-31 18:56:13,864 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:56:13,864 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:13,864 - poker_game - INFO - Hand #16, Phase: preflop
2025-10-31 18:56:13,864 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:56:13,864 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:56:13,865 - poker_game - INFO - Last raiser: 3
2025-10-31 18:56:13,865 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:13,865 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:13,865 - poker_game - INFO - Community cards: []
2025-10-31 18:56:13,865 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:56:13,866 - poker_game - INFO -   P1(Agent1): chips=5825, bet=10, status=active
2025-10-31 18:56:13,866 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:13,866 - poker_game - INFO -   P3(Agent3): chips=1941, bet=20, status=active
2025-10-31 18:56:13,866 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:13,866 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:56:13,866 - poker_game - INFO - ==================================================
2025-10-31 18:56:13,973 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "K♠",
    "Q♠"
  ],
  "community": [],
  "your_chips": 1375,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 5825,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1941,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1375)"
  ],
  "history": [
    "Player 0 folded",
    "Player 1 called 60",
    "Flop dealt: A♠, A♣, J♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: K♠",
    "Player 1 raised to 180",
    "Player 3 called 180",
    "River dealt: 2♠",
    "Player 1 folded",
    "Showdown: Player 3 won 550",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded"
  ]
}
2025-10-31 18:56:14,055 - poker_game - DEBUG - Create Session: {'id': '4b269651-3f42-4166-9c55-11fc24ef2f17', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904574.052056}
2025-10-31 18:56:15,487 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで、K♠Q♠は強いハンドです。ポットは30で、コールするには20必要です。これは比較的少額であり、ハンドの可能性を考えるとコールするのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 76, 'promptTokenCount': 800, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 800}], 'totalTokenCount': 876}, 'invocationId': 'e-4d390661-fe39-4bf8-a83c-0227cae8b3ae', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'GFm3ku07', 'timestamp': 1761904574.064766}]
2025-10-31 18:56:15,488 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:56:15,488 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップで、K♠Q♠は強いハンドです。ポットは30で、コールするには20必要です。これは比較的少額であり、ハンドの可能性を考えるとコールするのが最善です。"
}
```
2025-10-31 18:56:15,488 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:56:15,488 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで、K♠Q♠は強いハンドです。ポットは30で、コールするには20必要です。これは比較的少額であり、ハンドの可能性を考えるとコールするのが最善です。"\n}\n```'
2025-10-31 18:56:15,488 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:56:15,489 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで、K♠Q♠は強いハンドです。ポットは30で、コールするには20必要です。これは比較的少額であり、ハンドの可能性を考えるとコールするのが最善です。"\n}'
2025-10-31 18:56:15,489 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップで、K♠Q♠は強いハンドです。ポットは30で、コールするには20必要です。これは比較的少額であり、ハンドの可能性を考えるとコールするのが最善です。"
}
2025-10-31 18:56:15,489 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'プリフロップで、K♠Q♠は強いハンドです。ポットは30で、コールするには20必要です。これは比較的少額であり、ハンドの可能性を考えるとコールするのが最善です。'}
2025-10-31 18:56:15,489 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 20
2025-10-31 18:56:15,489 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1375)']
2025-10-31 18:56:15,489 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (20)': 20
2025-10-31 18:56:15,489 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:56:15,489 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 20, プリフロップで、K♠Q♠は強いハンドです。ポットは30で、コールするには20必要です。これは比較的少額であり、ハンドの可能性を考えるとコールするのが最善です。
2025-10-31 18:56:15,490 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 20
2025-10-31 18:56:15,490 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:15,490 - poker_game - INFO - Hand #16, Phase: preflop
2025-10-31 18:56:15,491 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:56:15,491 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:56:15,491 - poker_game - INFO - Last raiser: 3
2025-10-31 18:56:15,491 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:15,491 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:15,491 - poker_game - INFO - Community cards: []
2025-10-31 18:56:15,491 - poker_game - INFO -   P0(Agent0): chips=1375, bet=0, status=active
2025-10-31 18:56:15,492 - poker_game - INFO -   P1(Agent1): chips=5825, bet=10, status=active
2025-10-31 18:56:15,492 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:15,492 - poker_game - INFO -   P3(Agent3): chips=1941, bet=20, status=active
2025-10-31 18:56:15,492 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:15,492 - poker_game - INFO - ==================================================
2025-10-31 18:56:15,492 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 20
2025-10-31 18:56:15,502 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:15,503 - poker_game - INFO - Hand #16, Phase: preflop
2025-10-31 18:56:15,503 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:56:15,504 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:56:15,504 - poker_game - INFO - Last raiser: 3
2025-10-31 18:56:15,504 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:15,505 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:15,505 - poker_game - INFO - Community cards: []
2025-10-31 18:56:15,506 - poker_game - INFO -   P0(Agent0): chips=1355, bet=20, status=active
2025-10-31 18:56:15,506 - poker_game - INFO -   P1(Agent1): chips=5825, bet=10, status=active
2025-10-31 18:56:15,506 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:15,507 - poker_game - INFO -   P3(Agent3): chips=1941, bet=20, status=active
2025-10-31 18:56:15,507 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:15,507 - poker_game - INFO - Extra: Action: Player 0 called 20
2025-10-31 18:56:15,508 - poker_game - INFO - ==================================================
2025-10-31 18:56:15,508 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:15,508 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:15,508 - poker_game - DEBUG - Active players: [0, 1, 3]
2025-10-31 18:56:15,509 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:56:15,509 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:15,509 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:15,509 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:56:15,510 - poker_game - DEBUG - Player bets: [20, 10, 20], Current bet: 20, All same: False
2025-10-31 18:56:15,510 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:56:15,510 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:15,510 - poker_game - INFO - Hand #16, Phase: preflop
2025-10-31 18:56:15,510 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:15,511 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:56:15,511 - poker_game - INFO - Last raiser: 3
2025-10-31 18:56:15,511 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:15,511 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:15,512 - poker_game - INFO - Community cards: []
2025-10-31 18:56:15,512 - poker_game - INFO -   P0(Agent0): chips=1355, bet=20, status=active
2025-10-31 18:56:15,512 - poker_game - INFO -   P1(Agent1): chips=5825, bet=10, status=active
2025-10-31 18:56:15,512 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:15,512 - poker_game - INFO -   P3(Agent3): chips=1941, bet=20, status=active
2025-10-31 18:56:15,513 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:15,513 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:56:15,513 - poker_game - INFO - ==================================================
2025-10-31 18:56:15,616 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "K♥",
    "4♥"
  ],
  "community": [],
  "your_chips": 5825,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 50,
  "to_call": 10,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1355,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1941,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (5825)"
  ],
  "history": [
    "Player 1 called 60",
    "Flop dealt: A♠, A♣, J♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: K♠",
    "Player 1 raised to 180",
    "Player 3 called 180",
    "River dealt: 2♠",
    "Player 1 folded",
    "Showdown: Player 3 won 550",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20"
  ]
}
2025-10-31 18:56:15,632 - poker_game - DEBUG - Create Session: {'id': '590d85f2-38a9-4546-899f-86944a236575', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904575.628703}
2025-10-31 18:56:17,243 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "K♥4♥は、プリフロップ（カードが配られる前の段階）ではあまり強くないハンドです。しかし、ポットのサイズ（50）と、コールに必要な金額（10）を考慮すると、コールしてフロップ（コミュニティカード3枚）を見るのは妥当な選択です。相手のベット額（20）は、まだそれほど大きくなく、これ以上リスクを負わずに様子を見ることができます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 124, 'promptTokenCount': 805, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 805}], 'totalTokenCount': 929}, 'invocationId': 'e-ca577716-12a7-4720-aeae-46715bc314aa', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'adR1JnrE', 'timestamp': 1761904575.645059}]
2025-10-31 18:56:17,244 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:56:17,245 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 10,
  "reasoning": "K♥4♥は、プリフロップ（カードが配られる前の段階）ではあまり強くないハンドです。しかし、ポットのサイズ（50）と、コールに必要な金額（10）を考慮すると、コールしてフロップ（コミュニティカード3枚）を見るのは妥当な選択です。相手のベット額（20）は、まだそれほど大きくなく、これ以上リスクを負わずに様子を見ることができます。"
}
```
2025-10-31 18:56:17,245 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:56:17,245 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "K♥4♥は、プリフロップ（カードが配られる前の段階）ではあまり強くないハンドです。しかし、ポットのサイズ（50）と、コールに必要な金額（10）を考慮すると、コールしてフロップ（コミュニティカード3枚）を見るのは妥当な選択です。相手のベット額（20）は、まだそれほど大きくなく、これ以上リスクを負わずに様子を見ることができます。"\n}\n```'
2025-10-31 18:56:17,245 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:56:17,246 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "K♥4♥は、プリフロップ（カードが配られる前の段階）ではあまり強くないハンドです。しかし、ポットのサイズ（50）と、コールに必要な金額（10）を考慮すると、コールしてフロップ（コミュニティカード3枚）を見るのは妥当な選択です。相手のベット額（20）は、まだそれほど大きくなく、これ以上リスクを負わずに様子を見ることができます。"\n}'
2025-10-31 18:56:17,246 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 10,
  "reasoning": "K♥4♥は、プリフロップ（カードが配られる前の段階）ではあまり強くないハンドです。しかし、ポットのサイズ（50）と、コールに必要な金額（10）を考慮すると、コールしてフロップ（コミュニティカード3枚）を見るのは妥当な選択です。相手のベット額（20）は、まだそれほど大きくなく、これ以上リスクを負わずに様子を見ることができます。"
}
2025-10-31 18:56:17,246 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 10, 'reasoning': 'K♥4♥は、プリフロップ（カードが配られる前の段階）ではあまり強くないハンドです。しかし、ポットのサイズ（50）と、コールに必要な金額（10）を考慮すると、コールしてフロップ（コミュニティカード3枚）を見るのは妥当な選択です。相手のベット額（20）は、まだそれほど大きくなく、これ以上リスクを負わずに様子を見ることができます。'}
2025-10-31 18:56:17,246 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 10
2025-10-31 18:56:17,247 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (10)', 'raise (min 40)', 'all-in (5825)']
2025-10-31 18:56:17,247 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (10)': 10
2025-10-31 18:56:17,247 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 10}
2025-10-31 18:56:17,247 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 10, K♥4♥は、プリフロップ（カードが配られる前の段階）ではあまり強くないハンドです。しかし、ポットのサイズ（50）と、コールに必要な金額（10）を考慮すると、コールしてフロップ（コミュニティカード3枚）を見るのは妥当な選択です。相手のベット額（20）は、まだそれほど大きくなく、これ以上リスクを負わずに様子を見ることができます。
2025-10-31 18:56:17,249 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 10
2025-10-31 18:56:17,250 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:17,252 - poker_game - INFO - Hand #16, Phase: preflop
2025-10-31 18:56:17,252 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:17,253 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:56:17,253 - poker_game - INFO - Last raiser: 3
2025-10-31 18:56:17,254 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:17,254 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:17,255 - poker_game - INFO - Community cards: []
2025-10-31 18:56:17,256 - poker_game - INFO -   P0(Agent0): chips=1355, bet=20, status=active
2025-10-31 18:56:17,257 - poker_game - INFO -   P1(Agent1): chips=5825, bet=10, status=active
2025-10-31 18:56:17,258 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:17,258 - poker_game - INFO -   P3(Agent3): chips=1941, bet=20, status=active
2025-10-31 18:56:17,258 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:17,258 - poker_game - INFO - ==================================================
2025-10-31 18:56:17,259 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 10
2025-10-31 18:56:17,275 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:17,275 - poker_game - INFO - Hand #16, Phase: preflop
2025-10-31 18:56:17,276 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:17,276 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:56:17,277 - poker_game - INFO - Last raiser: 3
2025-10-31 18:56:17,277 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:17,278 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:17,278 - poker_game - INFO - Community cards: []
2025-10-31 18:56:17,278 - poker_game - INFO -   P0(Agent0): chips=1355, bet=20, status=active
2025-10-31 18:56:17,279 - poker_game - INFO -   P1(Agent1): chips=5815, bet=20, status=active
2025-10-31 18:56:17,279 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:17,279 - poker_game - INFO -   P3(Agent3): chips=1941, bet=20, status=active
2025-10-31 18:56:17,279 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:17,280 - poker_game - INFO - Extra: Action: Player 1 called 10
2025-10-31 18:56:17,280 - poker_game - INFO - ==================================================
2025-10-31 18:56:17,280 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:17,281 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:17,281 - poker_game - DEBUG - Active players: [0, 1, 3]
2025-10-31 18:56:17,281 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 18:56:17,281 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:17,282 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:17,282 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:56:17,282 - poker_game - DEBUG - Player bets: [20, 20, 20], Current bet: 20, All same: True
2025-10-31 18:56:17,282 - poker_game - DEBUG - Active player indices: [0, 1, 3]
2025-10-31 18:56:17,282 - poker_game - DEBUG - Last raiser index: 3
2025-10-31 18:56:17,282 - poker_game - DEBUG - Current player index: 3
2025-10-31 18:56:17,283 - poker_game - DEBUG - Next after last raiser 3: 0
2025-10-31 18:56:17,283 - poker_game - DEBUG - Betting continues: Current player 3 != next after raiser 0
2025-10-31 18:56:17,283 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:17,283 - poker_game - INFO - Hand #16, Phase: preflop
2025-10-31 18:56:17,284 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:56:17,285 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:56:17,285 - poker_game - INFO - Last raiser: 3
2025-10-31 18:56:17,287 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:17,288 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:17,289 - poker_game - INFO - Community cards: []
2025-10-31 18:56:17,290 - poker_game - INFO -   P0(Agent0): chips=1355, bet=20, status=active
2025-10-31 18:56:17,290 - poker_game - INFO -   P1(Agent1): chips=5815, bet=20, status=active
2025-10-31 18:56:17,291 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:17,292 - poker_game - INFO -   P3(Agent3): chips=1941, bet=20, status=active
2025-10-31 18:56:17,292 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:17,293 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:56:17,294 - poker_game - INFO - ==================================================
2025-10-31 18:56:17,397 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "8♣",
    "2♣"
  ],
  "community": [],
  "your_chips": 1941,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1355,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 5815,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 40)",
    "all-in (1941)"
  ],
  "history": [
    "Flop dealt: A♠, A♣, J♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: K♠",
    "Player 1 raised to 180",
    "Player 3 called 180",
    "River dealt: 2♠",
    "Player 1 folded",
    "Showdown: Player 3 won 550",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 called 10"
  ]
}
2025-10-31 18:56:17,559 - poker_game - DEBUG - Create Session: {'id': '4d4dd9f0-aaa8-4718-b703-714d3cfd50fc', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904577.554297}
2025-10-31 18:56:19,741 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで8♣2♣という非常に弱いハンドを持っています。このハンドはペアを作ることも、ストレートやフラッシュを作る可能性も低いです。ポットのサイズや他のプレイヤーのベット額を考慮しても、このハンドでコールしてポットに参加する価値はありません。したがって、フォールドするのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 99, 'promptTokenCount': 801, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 801}], 'totalTokenCount': 900}, 'invocationId': 'e-c09c5c26-fa0c-4500-9241-f0e3f292500b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'yIM7c9R2', 'timestamp': 1761904577.571858}]
2025-10-31 18:56:19,741 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:56:19,742 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで8♣2♣という非常に弱いハンドを持っています。このハンドはペアを作ることも、ストレートやフラッシュを作る可能性も低いです。ポットのサイズや他のプレイヤーのベット額を考慮しても、このハンドでコールしてポットに参加する価値はありません。したがって、フォールドするのが最善の選択です。"
}
```
2025-10-31 18:56:19,742 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:56:19,743 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで8♣2♣という非常に弱いハンドを持っています。このハンドはペアを作ることも、ストレートやフラッシュを作る可能性も低いです。ポットのサイズや他のプレイヤーのベット額を考慮しても、このハンドでコールしてポットに参加する価値はありません。したがって、フォールドするのが最善の選択です。"\n}\n```'
2025-10-31 18:56:19,743 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:56:19,743 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで8♣2♣という非常に弱いハンドを持っています。このハンドはペアを作ることも、ストレートやフラッシュを作る可能性も低いです。ポットのサイズや他のプレイヤーのベット額を考慮しても、このハンドでコールしてポットに参加する価値はありません。したがって、フォールドするのが最善の選択です。"\n}'
2025-10-31 18:56:19,744 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで8♣2♣という非常に弱いハンドを持っています。このハンドはペアを作ることも、ストレートやフラッシュを作る可能性も低いです。ポットのサイズや他のプレイヤーのベット額を考慮しても、このハンドでコールしてポットに参加する価値はありません。したがって、フォールドするのが最善の選択です。"
}
2025-10-31 18:56:19,744 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップで8♣2♣という非常に弱いハンドを持っています。このハンドはペアを作ることも、ストレートやフラッシュを作る可能性も低いです。ポットのサイズや他のプレイヤーのベット額を考慮しても、このハンドでコールしてポットに参加する価値はありません。したがって、フォールドするのが最善の選択です。'}
2025-10-31 18:56:19,744 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 18:56:19,744 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 18:56:19,744 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:56:19,745 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップで8♣2♣という非常に弱いハンドを持っています。このハンドはペアを作ることも、ストレートやフラッシュを作る可能性も低いです。ポットのサイズや他のプレイヤーのベット額を考慮しても、このハンドでコールしてポットに参加する価値はありません。したがって、フォールドするのが最善の選択です。
2025-10-31 18:56:19,748 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 18:56:19,750 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:19,752 - poker_game - INFO - Hand #16, Phase: preflop
2025-10-31 18:56:19,753 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:56:19,754 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:56:19,755 - poker_game - INFO - Last raiser: 3
2025-10-31 18:56:19,756 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:19,756 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:19,756 - poker_game - INFO - Community cards: []
2025-10-31 18:56:19,757 - poker_game - INFO -   P0(Agent0): chips=1355, bet=20, status=active
2025-10-31 18:56:19,757 - poker_game - INFO -   P1(Agent1): chips=5815, bet=20, status=active
2025-10-31 18:56:19,758 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:19,758 - poker_game - INFO -   P3(Agent3): chips=1941, bet=20, status=active
2025-10-31 18:56:19,758 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:19,758 - poker_game - INFO - ==================================================
2025-10-31 18:56:19,759 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 18:56:19,775 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:19,776 - poker_game - INFO - Hand #16, Phase: preflop
2025-10-31 18:56:19,776 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 18:56:19,777 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:56:19,778 - poker_game - INFO - Last raiser: 3
2025-10-31 18:56:19,778 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:19,778 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:19,779 - poker_game - INFO - Community cards: []
2025-10-31 18:56:19,780 - poker_game - INFO -   P0(Agent0): chips=1355, bet=20, status=active
2025-10-31 18:56:19,780 - poker_game - INFO -   P1(Agent1): chips=5815, bet=20, status=active
2025-10-31 18:56:19,781 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:19,781 - poker_game - INFO -   P3(Agent3): chips=1941, bet=20, status=folded
2025-10-31 18:56:19,781 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:19,782 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 18:56:19,782 - poker_game - INFO - ==================================================
2025-10-31 18:56:19,783 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:19,784 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:19,784 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:56:19,785 - poker_game - INFO - Advanced from player 3 to player 0 (seat order)
2025-10-31 18:56:19,785 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:19,787 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:19,787 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:56:19,788 - poker_game - DEBUG - Player bets: [20, 20], Current bet: 20, All same: True
2025-10-31 18:56:19,788 - poker_game - DEBUG - Active player indices: [0, 1]
2025-10-31 18:56:19,788 - poker_game - DEBUG - Last raiser index: 3
2025-10-31 18:56:19,789 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:56:19,789 - poker_game - INFO - Betting complete: Last raiser 3 is no longer active
2025-10-31 18:56:19,790 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:19,790 - poker_game - INFO - Hand #16, Phase: preflop
2025-10-31 18:56:19,791 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:56:19,791 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:56:19,791 - poker_game - INFO - Last raiser: 3
2025-10-31 18:56:19,792 - poker_game - INFO - Betting round complete: True
2025-10-31 18:56:19,793 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:19,793 - poker_game - INFO - Community cards: []
2025-10-31 18:56:19,793 - poker_game - INFO -   P0(Agent0): chips=1355, bet=20, status=active
2025-10-31 18:56:19,794 - poker_game - INFO -   P1(Agent1): chips=5815, bet=20, status=active
2025-10-31 18:56:19,794 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:19,794 - poker_game - INFO -   P3(Agent3): chips=1941, bet=20, status=folded
2025-10-31 18:56:19,795 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:19,795 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:56:19,796 - poker_game - INFO - ==================================================
2025-10-31 18:56:19,898 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:56:19,899 - poker_game - INFO - Betting round complete: True
2025-10-31 18:56:19,900 - poker_game - INFO - Remaining players: 2
2025-10-31 18:56:19,900 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:56:19,901 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:56:19,901 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:56:19,914 - poker_game - INFO - Starting new betting round
2025-10-31 18:56:19,915 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:56:19,916 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:56:19,916 - poker_game - DEBUG - Active players for new betting round: [0, 1]
2025-10-31 18:56:19,917 - poker_game - DEBUG - Dealer button: 0
2025-10-31 18:56:19,917 - poker_game - INFO - First actor: Player 1 (by phase rule), was 0
2025-10-31 18:56:19,917 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:56:19,918 - poker_game - INFO - Hand #16, Phase: flop
2025-10-31 18:56:19,918 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:19,919 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:56:19,919 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:19,924 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:19,925 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:19,925 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦']
2025-10-31 18:56:19,926 - poker_game - INFO -   P0(Agent0): chips=1355, bet=0, status=active
2025-10-31 18:56:19,926 - poker_game - INFO -   P1(Agent1): chips=5815, bet=0, status=active
2025-10-31 18:56:19,926 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:19,926 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:19,927 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:19,927 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:56:19,927 - poker_game - INFO - ==================================================
2025-10-31 18:56:19,928 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "flop",
  "your_cards": [
    "K♥",
    "4♥"
  ],
  "community": [
    "9♣",
    "7♦",
    "10♦"
  ],
  "your_chips": 5815,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1355,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1941,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (5815)"
  ],
  "history": [
    "Player 3 checked",
    "Turn dealt: K♠",
    "Player 1 raised to 180",
    "Player 3 called 180",
    "River dealt: 2♠",
    "Player 1 folded",
    "Showdown: Player 3 won 550",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 3 folded",
    "Flop dealt: 9♣, 7♦, 10♦"
  ]
}
2025-10-31 18:56:20,214 - poker_game - DEBUG - Create Session: {'id': '830e3a83-f0b8-449e-bfcf-d1f5e2d2c39d', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904580.2108846}
2025-10-31 18:56:22,063 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ (Flop) のコミュニティカード (Community cards) は 9♣, 7♦, 10♦ です。あなたの手札 (Your cards) は K♥, 4♥ で、ペアもストレート (Straight) の可能性もありません。まだ何も役ができていない（ノンヒット）ので、相手のアクションを見てから判断するためにチェック (Check) を選択します。相手がベット (Bet) してきた場合は、状況を見てコール (Call) するかフォールド (Fold) するか判断します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 143, 'promptTokenCount': 823, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 823}], 'totalTokenCount': 966}, 'invocationId': 'e-8a51bc65-da8b-40a7-a1af-a509c45f2aa2', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '7MnL1fxI', 'timestamp': 1761904580.229658}]
2025-10-31 18:56:22,063 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:56:22,063 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ (Flop) のコミュニティカード (Community cards) は 9♣, 7♦, 10♦ です。あなたの手札 (Your cards) は K♥, 4♥ で、ペアもストレート (Straight) の可能性もありません。まだ何も役ができていない（ノンヒット）ので、相手のアクションを見てから判断するためにチェック (Check) を選択します。相手がベット (Bet) してきた場合は、状況を見てコール (Call) するかフォールド (Fold) するか判断します。"
}
```
2025-10-31 18:56:22,063 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:56:22,064 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ (Flop) のコミュニティカード (Community cards) は 9♣, 7♦, 10♦ です。あなたの手札 (Your cards) は K♥, 4♥ で、ペアもストレート (Straight) の可能性もありません。まだ何も役ができていない（ノンヒット）ので、相手のアクションを見てから判断するためにチェック (Check) を選択します。相手がベット (Bet) してきた場合は、状況を見てコール (Call) するかフォールド (Fold) するか判断します。"\n}\n```'
2025-10-31 18:56:22,064 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:56:22,064 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ (Flop) のコミュニティカード (Community cards) は 9♣, 7♦, 10♦ です。あなたの手札 (Your cards) は K♥, 4♥ で、ペアもストレート (Straight) の可能性もありません。まだ何も役ができていない（ノンヒット）ので、相手のアクションを見てから判断するためにチェック (Check) を選択します。相手がベット (Bet) してきた場合は、状況を見てコール (Call) するかフォールド (Fold) するか判断します。"\n}'
2025-10-31 18:56:22,064 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ (Flop) のコミュニティカード (Community cards) は 9♣, 7♦, 10♦ です。あなたの手札 (Your cards) は K♥, 4♥ で、ペアもストレート (Straight) の可能性もありません。まだ何も役ができていない（ノンヒット）ので、相手のアクションを見てから判断するためにチェック (Check) を選択します。相手がベット (Bet) してきた場合は、状況を見てコール (Call) するかフォールド (Fold) するか判断します。"
}
2025-10-31 18:56:22,064 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'フロップ (Flop) のコミュニティカード (Community cards) は 9♣, 7♦, 10♦ です。あなたの手札 (Your cards) は K♥, 4♥ で、ペアもストレート (Straight) の可能性もありません。まだ何も役ができていない（ノンヒット）ので、相手のアクションを見てから判断するためにチェック (Check) を選択します。相手がベット (Bet) してきた場合は、状況を見てコール (Call) するかフォールド (Fold) するか判断します。'}
2025-10-31 18:56:22,064 - poker_game - DEBUG - [Agent1] Extracted values - action: 'check', amount: 0
2025-10-31 18:56:22,064 - poker_game - DEBUG - [Agent1] Action 'check' normalized - amount set to 0
2025-10-31 18:56:22,064 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:56:22,065 - poker_game - INFO - [Agent1] Successfully parsed decision: check, 0, フロップ (Flop) のコミュニティカード (Community cards) は 9♣, 7♦, 10♦ です。あなたの手札 (Your cards) は K♥, 4♥ で、ペアもストレート (Straight) の可能性もありません。まだ何も役ができていない（ノンヒット）ので、相手のアクションを見てから判断するためにチェック (Check) を選択します。相手がベット (Bet) してきた場合は、状況を見てコール (Call) するかフォールド (Fold) するか判断します。
2025-10-31 18:56:22,065 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'check' with amount 0
2025-10-31 18:56:22,066 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:22,066 - poker_game - INFO - Hand #16, Phase: flop
2025-10-31 18:56:22,066 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:22,066 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:56:22,066 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:22,066 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:22,066 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:22,067 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦']
2025-10-31 18:56:22,067 - poker_game - INFO -   P0(Agent0): chips=1355, bet=0, status=active
2025-10-31 18:56:22,067 - poker_game - INFO -   P1(Agent1): chips=5815, bet=0, status=active
2025-10-31 18:56:22,067 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:22,067 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:22,067 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:22,068 - poker_game - INFO - ==================================================
2025-10-31 18:56:22,068 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:56:22,078 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:22,079 - poker_game - INFO - Hand #16, Phase: flop
2025-10-31 18:56:22,079 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:22,079 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:56:22,080 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:22,080 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:22,080 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:22,080 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦']
2025-10-31 18:56:22,080 - poker_game - INFO -   P0(Agent0): chips=1355, bet=0, status=active
2025-10-31 18:56:22,081 - poker_game - INFO -   P1(Agent1): chips=5815, bet=0, status=active
2025-10-31 18:56:22,081 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:22,081 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:22,081 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:22,082 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:56:22,082 - poker_game - INFO - ==================================================
2025-10-31 18:56:22,082 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:22,082 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:22,082 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:56:22,083 - poker_game - INFO - Advanced from player 1 to player 0 (seat order)
2025-10-31 18:56:22,083 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:22,083 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:22,083 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:56:22,083 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:56:22,083 - poker_game - DEBUG - Active player indices: [0, 1]
2025-10-31 18:56:22,083 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:56:22,083 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:56:22,083 - poker_game - DEBUG - First actor index: 1
2025-10-31 18:56:22,083 - poker_game - DEBUG - Betting continues: Current player 0 != first actor 1
2025-10-31 18:56:22,084 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:22,084 - poker_game - INFO - Hand #16, Phase: flop
2025-10-31 18:56:22,084 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:56:22,084 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:56:22,084 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:22,085 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:22,085 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:22,086 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦']
2025-10-31 18:56:22,086 - poker_game - INFO -   P0(Agent0): chips=1355, bet=0, status=active
2025-10-31 18:56:22,086 - poker_game - INFO -   P1(Agent1): chips=5815, bet=0, status=active
2025-10-31 18:56:22,086 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:22,087 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:22,087 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:22,087 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:56:22,087 - poker_game - INFO - ==================================================
2025-10-31 18:56:22,189 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "flop",
  "your_cards": [
    "K♠",
    "Q♠"
  ],
  "community": [
    "9♣",
    "7♦",
    "10♦"
  ],
  "your_chips": 1355,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 5815,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1941,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1355)"
  ],
  "history": [
    "Turn dealt: K♠",
    "Player 1 raised to 180",
    "Player 3 called 180",
    "River dealt: 2♠",
    "Player 1 folded",
    "Showdown: Player 3 won 550",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 3 folded",
    "Flop dealt: 9♣, 7♦, 10♦",
    "Player 1 checked"
  ]
}
2025-10-31 18:56:22,199 - poker_game - DEBUG - Create Session: {'id': '0c0dd8dc-8bc4-4493-a903-9cdfba0ff630', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904582.1969783}
2025-10-31 18:56:25,002 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "フロップ（Flop）では、あなたの手札（ホールカード）はK♠ Q♠、コミュニティカードは9♣ 7♦ 10♦です。これはストレート（Straight）のドロー（Draw）で、あと1枚でストレートが完成する可能性があります（Jがあれば）。また、フラッシュ（Flush）のドローも持っています（あと1枚♠があれば）。ポットは60で、相手（Player 1）はチェック（Check）しています。この状況では、相手がチェックしたことにより、あなたがベットする機会を得ています。ストレートやフラッシュの可能性を秘めているため、積極的にベットしてポットを大きくし、相手にプレッシャーをかけるのが良いでしょう。ミニマムベットは20なので、ポットサイズ（60）と同額の60をベットするのが、相手に十分なプレッシャーを与えつつ、ポットを大きくするのに効果的だと判断しました。これは、相手が弱いハンド（Hand）を持っていた場合にフォールド（Fold）させるか、強いハンドを持っていた場合でも、より多くのチップをポットに入れることを期待する戦略です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 268, 'promptTokenCount': 823, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 823}], 'totalTokenCount': 1091}, 'invocationId': 'e-93dc9a42-be47-4a18-82a8-2025294e2d09', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'InCnFolH', 'timestamp': 1761904582.211485}]
2025-10-31 18:56:25,002 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:56:25,003 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 60,
  "reasoning": "フロップ（Flop）では、あなたの手札（ホールカード）はK♠ Q♠、コミュニティカードは9♣ 7♦ 10♦です。これはストレート（Straight）のドロー（Draw）で、あと1枚でストレートが完成する可能性があります（Jがあれば）。また、フラッシュ（Flush）のドローも持っています（あと1枚♠があれば）。ポットは60で、相手（Player 1）はチェック（Check）しています。この状況では、相手がチェックしたことにより、あなたがベットする機会を得ています。ストレートやフラッシュの可能性を秘めているため、積極的にベットしてポットを大きくし、相手にプレッシャーをかけるのが良いでしょう。ミニマムベットは20なので、ポットサイズ（60）と同額の60をベットするのが、相手に十分なプレッシャーを与えつつ、ポットを大きくするのに効果的だと判断しました。これは、相手が弱いハンド（Hand）を持っていた場合にフォールド（Fold）させるか、強いハンドを持っていた場合でも、より多くのチップをポットに入れることを期待する戦略です。"
}
```
2025-10-31 18:56:25,003 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:56:25,003 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "フロップ（Flop）では、あなたの手札（ホールカード）はK♠ Q♠、コミュニティカードは9♣ 7♦ 10♦です。これはストレート（Straight）のドロー（Draw）で、あと1枚でストレートが完成する可能性があります（Jがあれば）。また、フラッシュ（Flush）のドローも持っています（あと1枚♠があれば）。ポットは60で、相手（Player 1）はチェック（Check）しています。この状況では、相手がチェックしたことにより、あなたがベットする機会を得ています。ストレートやフラッシュの可能性を秘めているため、積極的にベットしてポットを大きくし、相手にプレッシャーをかけるのが良いでしょう。ミニマムベットは20なので、ポットサイズ（60）と同額の60をベットするのが、相手に十分なプレッシャーを与えつつ、ポットを大きくするのに効果的だと判断しました。これは、相手が弱いハンド（Hand）を持っていた場合にフォールド（Fold）させるか、強いハンドを持っていた場合でも、より多くのチップをポットに入れることを期待する戦略です。"\n}\n```'
2025-10-31 18:56:25,004 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:56:25,004 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "フロップ（Flop）では、あなたの手札（ホールカード）はK♠ Q♠、コミュニティカードは9♣ 7♦ 10♦です。これはストレート（Straight）のドロー（Draw）で、あと1枚でストレートが完成する可能性があります（Jがあれば）。また、フラッシュ（Flush）のドローも持っています（あと1枚♠があれば）。ポットは60で、相手（Player 1）はチェック（Check）しています。この状況では、相手がチェックしたことにより、あなたがベットする機会を得ています。ストレートやフラッシュの可能性を秘めているため、積極的にベットしてポットを大きくし、相手にプレッシャーをかけるのが良いでしょう。ミニマムベットは20なので、ポットサイズ（60）と同額の60をベットするのが、相手に十分なプレッシャーを与えつつ、ポットを大きくするのに効果的だと判断しました。これは、相手が弱いハンド（Hand）を持っていた場合にフォールド（Fold）させるか、強いハンドを持っていた場合でも、より多くのチップをポットに入れることを期待する戦略です。"\n}'
2025-10-31 18:56:25,004 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "raise",
  "amount": 60,
  "reasoning": "フロップ（Flop）では、あなたの手札（ホールカード）はK♠ Q♠、コミュニティカードは9♣ 7♦ 10♦です。これはストレート（Straight）のドロー（Draw）で、あと1枚でストレートが完成する可能性があります（Jがあれば）。また、フラッシュ（Flush）のドローも持っています（あと1枚♠があれば）。ポットは60で、相手（Player 1）はチェック（Check）しています。この状況では、相手がチェックしたことにより、あなたがベットする機会を得ています。ストレートやフラッシュの可能性を秘めているため、積極的にベットしてポットを大きくし、相手にプレッシャーをかけるのが良いでしょう。ミニマムベットは20なので、ポットサイズ（60）と同額の60をベットするのが、相手に十分なプレッシャーを与えつつ、ポットを大きくするのに効果的だと判断しました。これは、相手が弱いハンド（Hand）を持っていた場合にフォールド（Fold）させるか、強いハンドを持っていた場合でも、より多くのチップをポットに入れることを期待する戦略です。"
}
2025-10-31 18:56:25,004 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'raise', 'amount': 60, 'reasoning': 'フロップ（Flop）では、あなたの手札（ホールカード）はK♠ Q♠、コミュニティカードは9♣ 7♦ 10♦です。これはストレート（Straight）のドロー（Draw）で、あと1枚でストレートが完成する可能性があります（Jがあれば）。また、フラッシュ（Flush）のドローも持っています（あと1枚♠があれば）。ポットは60で、相手（Player 1）はチェック（Check）しています。この状況では、相手がチェックしたことにより、あなたがベットする機会を得ています。ストレートやフラッシュの可能性を秘めているため、積極的にベットしてポットを大きくし、相手にプレッシャーをかけるのが良いでしょう。ミニマムベットは20なので、ポットサイズ（60）と同額の60をベットするのが、相手に十分なプレッシャーを与えつつ、ポットを大きくするのに効果的だと判断しました。これは、相手が弱いハンド（Hand）を持っていた場合にフォールド（Fold）させるか、強いハンドを持っていた場合でも、より多くのチップをポットに入れることを期待する戦略です。'}
2025-10-31 18:56:25,004 - poker_game - DEBUG - [Agent0] Extracted values - action: 'raise', amount: 60
2025-10-31 18:56:25,005 - poker_game - DEBUG - [Agent0] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1355)']
2025-10-31 18:56:25,005 - poker_game - DEBUG - [Agent0] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:56:25,005 - poker_game - DEBUG - [Agent0] Raise amount 60 is valid (min: 20)
2025-10-31 18:56:25,005 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'raise', 'amount': 60}
2025-10-31 18:56:25,005 - poker_game - INFO - [Agent0] Successfully parsed decision: raise, 60, フロップ（Flop）では、あなたの手札（ホールカード）はK♠ Q♠、コミュニティカードは9♣ 7♦ 10♦です。これはストレート（Straight）のドロー（Draw）で、あと1枚でストレートが完成する可能性があります（Jがあれば）。また、フラッシュ（Flush）のドローも持っています（あと1枚♠があれば）。ポットは60で、相手（Player 1）はチェック（Check）しています。この状況では、相手がチェックしたことにより、あなたがベットする機会を得ています。ストレートやフラッシュの可能性を秘めているため、積極的にベットしてポットを大きくし、相手にプレッシャーをかけるのが良いでしょう。ミニマムベットは20なので、ポットサイズ（60）と同額の60をベットするのが、相手に十分なプレッシャーを与えつつ、ポットを大きくするのに効果的だと判断しました。これは、相手が弱いハンド（Hand）を持っていた場合にフォールド（Fold）させるか、強いハンドを持っていた場合でも、より多くのチップをポットに入れることを期待する戦略です。
2025-10-31 18:56:25,006 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'raise' with amount 60
2025-10-31 18:56:25,007 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:25,007 - poker_game - INFO - Hand #16, Phase: flop
2025-10-31 18:56:25,008 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:56:25,009 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 18:56:25,009 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:25,010 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:25,011 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:25,011 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦']
2025-10-31 18:56:25,012 - poker_game - INFO -   P0(Agent0): chips=1355, bet=0, status=active
2025-10-31 18:56:25,013 - poker_game - INFO -   P1(Agent1): chips=5815, bet=0, status=active
2025-10-31 18:56:25,013 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:25,014 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:25,014 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:25,015 - poker_game - INFO - ==================================================
2025-10-31 18:56:25,016 - poker_game - INFO - ACTION_EXECUTED: Player 0 raised to 60
2025-10-31 18:56:25,028 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:25,029 - poker_game - INFO - Hand #16, Phase: flop
2025-10-31 18:56:25,029 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:56:25,030 - poker_game - INFO - Pot: 120, Current bet: 60
2025-10-31 18:56:25,031 - poker_game - INFO - Last raiser: 0
2025-10-31 18:56:25,032 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:25,032 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:25,033 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦']
2025-10-31 18:56:25,034 - poker_game - INFO -   P0(Agent0): chips=1295, bet=60, status=active
2025-10-31 18:56:25,034 - poker_game - INFO -   P1(Agent1): chips=5815, bet=0, status=active
2025-10-31 18:56:25,035 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:25,035 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:25,036 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:25,036 - poker_game - INFO - Extra: Action: Player 0 raised to 60
2025-10-31 18:56:25,036 - poker_game - INFO - ==================================================
2025-10-31 18:56:25,037 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:25,037 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:25,037 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:56:25,038 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:56:25,039 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:25,041 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:25,042 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:56:25,043 - poker_game - DEBUG - Player bets: [60, 0], Current bet: 60, All same: False
2025-10-31 18:56:25,043 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:56:25,043 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:25,044 - poker_game - INFO - Hand #16, Phase: flop
2025-10-31 18:56:25,044 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:25,045 - poker_game - INFO - Pot: 120, Current bet: 60
2025-10-31 18:56:25,045 - poker_game - INFO - Last raiser: 0
2025-10-31 18:56:25,045 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:25,046 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:25,046 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦']
2025-10-31 18:56:25,047 - poker_game - INFO -   P0(Agent0): chips=1295, bet=60, status=active
2025-10-31 18:56:25,047 - poker_game - INFO -   P1(Agent1): chips=5815, bet=0, status=active
2025-10-31 18:56:25,048 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:25,048 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:25,049 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:25,049 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:56:25,049 - poker_game - INFO - ==================================================
2025-10-31 18:56:25,151 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "flop",
  "your_cards": [
    "K♥",
    "4♥"
  ],
  "community": [
    "9♣",
    "7♦",
    "10♦"
  ],
  "your_chips": 5815,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 120,
  "to_call": 60,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1295,
      "bet": 60,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1941,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (60)",
    "raise (min 80)",
    "all-in (5815)"
  ],
  "history": [
    "Player 1 raised to 180",
    "Player 3 called 180",
    "River dealt: 2♠",
    "Player 1 folded",
    "Showdown: Player 3 won 550",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 3 folded",
    "Flop dealt: 9♣, 7♦, 10♦",
    "Player 1 checked",
    "Player 0 raised to 60"
  ]
}
2025-10-31 18:56:25,170 - poker_game - DEBUG - Create Session: {'id': '42f5fe45-3747-4ce4-be6e-df70c2bec759', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904585.166053}
2025-10-31 18:56:27,613 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、私の手札（K♥ 4♥）とコミュニティカード（9♣ 7♦ 10♦）を合わせても、まだ強い役はできていません。しかし、相手（プレイヤー0）がレイズ（ベット額を上げる行為）をしてきたものの、ポットサイズ（現在の賭け金の総額）に対してコール（相手のベット額と同じ額を賭けてゲームを続ける行為）するのに必要な金額（60）は、比較的少額です。相手のベット額から、相手がそれほど強い役を持っているとは限らない可能性もあります。そのため、ここではコールして、次のカード（ターン）で役が完成するか、または相手の出方を見て判断することにします。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 190, 'promptTokenCount': 832, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 832}], 'totalTokenCount': 1022}, 'invocationId': 'e-f46780c0-4e65-499c-913e-aaa45c41dadd', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '4TAdjlA1', 'timestamp': 1761904585.219694}]
2025-10-31 18:56:27,614 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:56:27,614 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 60,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、私の手札（K♥ 4♥）とコミュニティカード（9♣ 7♦ 10♦）を合わせても、まだ強い役はできていません。しかし、相手（プレイヤー0）がレイズ（ベット額を上げる行為）をしてきたものの、ポットサイズ（現在の賭け金の総額）に対してコール（相手のベット額と同じ額を賭けてゲームを続ける行為）するのに必要な金額（60）は、比較的少額です。相手のベット額から、相手がそれほど強い役を持っているとは限らない可能性もあります。そのため、ここではコールして、次のカード（ターン）で役が完成するか、または相手の出方を見て判断することにします。"
}
```
2025-10-31 18:56:27,614 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:56:27,615 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、私の手札（K♥ 4♥）とコミュニティカード（9♣ 7♦ 10♦）を合わせても、まだ強い役はできていません。しかし、相手（プレイヤー0）がレイズ（ベット額を上げる行為）をしてきたものの、ポットサイズ（現在の賭け金の総額）に対してコール（相手のベット額と同じ額を賭けてゲームを続ける行為）するのに必要な金額（60）は、比較的少額です。相手のベット額から、相手がそれほど強い役を持っているとは限らない可能性もあります。そのため、ここではコールして、次のカード（ターン）で役が完成するか、または相手の出方を見て判断することにします。"\n}\n```'
2025-10-31 18:56:27,615 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:56:27,615 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、私の手札（K♥ 4♥）とコミュニティカード（9♣ 7♦ 10♦）を合わせても、まだ強い役はできていません。しかし、相手（プレイヤー0）がレイズ（ベット額を上げる行為）をしてきたものの、ポットサイズ（現在の賭け金の総額）に対してコール（相手のベット額と同じ額を賭けてゲームを続ける行為）するのに必要な金額（60）は、比較的少額です。相手のベット額から、相手がそれほど強い役を持っているとは限らない可能性もあります。そのため、ここではコールして、次のカード（ターン）で役が完成するか、または相手の出方を見て判断することにします。"\n}'
2025-10-31 18:56:27,616 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 60,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、私の手札（K♥ 4♥）とコミュニティカード（9♣ 7♦ 10♦）を合わせても、まだ強い役はできていません。しかし、相手（プレイヤー0）がレイズ（ベット額を上げる行為）をしてきたものの、ポットサイズ（現在の賭け金の総額）に対してコール（相手のベット額と同じ額を賭けてゲームを続ける行為）するのに必要な金額（60）は、比較的少額です。相手のベット額から、相手がそれほど強い役を持っているとは限らない可能性もあります。そのため、ここではコールして、次のカード（ターン）で役が完成するか、または相手の出方を見て判断することにします。"
}
2025-10-31 18:56:27,616 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 60, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）では、私の手札（K♥ 4♥）とコミュニティカード（9♣ 7♦ 10♦）を合わせても、まだ強い役はできていません。しかし、相手（プレイヤー0）がレイズ（ベット額を上げる行為）をしてきたものの、ポットサイズ（現在の賭け金の総額）に対してコール（相手のベット額と同じ額を賭けてゲームを続ける行為）するのに必要な金額（60）は、比較的少額です。相手のベット額から、相手がそれほど強い役を持っているとは限らない可能性もあります。そのため、ここではコールして、次のカード（ターン）で役が完成するか、または相手の出方を見て判断することにします。'}
2025-10-31 18:56:27,616 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 60
2025-10-31 18:56:27,616 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (60)', 'raise (min 80)', 'all-in (5815)']
2025-10-31 18:56:27,617 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (60)': 60
2025-10-31 18:56:27,617 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 60}
2025-10-31 18:56:27,617 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 60, フロップ（最初の3枚のコミュニティカード）では、私の手札（K♥ 4♥）とコミュニティカード（9♣ 7♦ 10♦）を合わせても、まだ強い役はできていません。しかし、相手（プレイヤー0）がレイズ（ベット額を上げる行為）をしてきたものの、ポットサイズ（現在の賭け金の総額）に対してコール（相手のベット額と同じ額を賭けてゲームを続ける行為）するのに必要な金額（60）は、比較的少額です。相手のベット額から、相手がそれほど強い役を持っているとは限らない可能性もあります。そのため、ここではコールして、次のカード（ターン）で役が完成するか、または相手の出方を見て判断することにします。
2025-10-31 18:56:27,618 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 60
2025-10-31 18:56:27,619 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:27,619 - poker_game - INFO - Hand #16, Phase: flop
2025-10-31 18:56:27,620 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:27,620 - poker_game - INFO - Pot: 120, Current bet: 60
2025-10-31 18:56:27,621 - poker_game - INFO - Last raiser: 0
2025-10-31 18:56:27,621 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:27,621 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:27,622 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦']
2025-10-31 18:56:27,622 - poker_game - INFO -   P0(Agent0): chips=1295, bet=60, status=active
2025-10-31 18:56:27,622 - poker_game - INFO -   P1(Agent1): chips=5815, bet=0, status=active
2025-10-31 18:56:27,623 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:27,623 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:27,623 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:27,623 - poker_game - INFO - ==================================================
2025-10-31 18:56:27,624 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 60
2025-10-31 18:56:27,640 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:27,641 - poker_game - INFO - Hand #16, Phase: flop
2025-10-31 18:56:27,642 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:27,642 - poker_game - INFO - Pot: 180, Current bet: 60
2025-10-31 18:56:27,643 - poker_game - INFO - Last raiser: 0
2025-10-31 18:56:27,643 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:27,644 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:27,645 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦']
2025-10-31 18:56:27,645 - poker_game - INFO -   P0(Agent0): chips=1295, bet=60, status=active
2025-10-31 18:56:27,646 - poker_game - INFO -   P1(Agent1): chips=5755, bet=60, status=active
2025-10-31 18:56:27,647 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:27,648 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:27,648 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:27,649 - poker_game - INFO - Extra: Action: Player 1 called 60
2025-10-31 18:56:27,649 - poker_game - INFO - ==================================================
2025-10-31 18:56:27,649 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:27,650 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:27,650 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:56:27,650 - poker_game - INFO - Advanced from player 1 to player 0 (seat order)
2025-10-31 18:56:27,651 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:27,652 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:27,653 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:56:27,654 - poker_game - DEBUG - Player bets: [60, 60], Current bet: 60, All same: True
2025-10-31 18:56:27,654 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:56:27,655 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:27,657 - poker_game - INFO - Hand #16, Phase: flop
2025-10-31 18:56:27,658 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:56:27,658 - poker_game - INFO - Pot: 180, Current bet: 60
2025-10-31 18:56:27,659 - poker_game - INFO - Last raiser: 0
2025-10-31 18:56:27,659 - poker_game - INFO - Betting round complete: True
2025-10-31 18:56:27,659 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:27,659 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦']
2025-10-31 18:56:27,660 - poker_game - INFO -   P0(Agent0): chips=1295, bet=60, status=active
2025-10-31 18:56:27,660 - poker_game - INFO -   P1(Agent1): chips=5755, bet=60, status=active
2025-10-31 18:56:27,660 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:27,661 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:27,661 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:27,661 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:56:27,662 - poker_game - INFO - ==================================================
2025-10-31 18:56:27,764 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:56:27,765 - poker_game - INFO - Betting round complete: True
2025-10-31 18:56:27,765 - poker_game - INFO - Remaining players: 2
2025-10-31 18:56:27,766 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:56:27,766 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:56:27,766 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 18:56:27,779 - poker_game - INFO - Starting new betting round
2025-10-31 18:56:27,780 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:56:27,780 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:56:27,781 - poker_game - DEBUG - Active players for new betting round: [0, 1]
2025-10-31 18:56:27,781 - poker_game - DEBUG - Dealer button: 0
2025-10-31 18:56:27,781 - poker_game - INFO - First actor: Player 1 (by phase rule), was 0
2025-10-31 18:56:27,782 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:56:27,782 - poker_game - INFO - Hand #16, Phase: turn
2025-10-31 18:56:27,783 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:27,783 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 18:56:27,784 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:27,784 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:27,785 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:27,785 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦']
2025-10-31 18:56:27,786 - poker_game - INFO -   P0(Agent0): chips=1295, bet=0, status=active
2025-10-31 18:56:27,786 - poker_game - INFO -   P1(Agent1): chips=5755, bet=0, status=active
2025-10-31 18:56:27,787 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:27,788 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:27,788 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:27,788 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 18:56:27,789 - poker_game - INFO - ==================================================
2025-10-31 18:56:27,790 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "turn",
  "your_cards": [
    "K♥",
    "4♥"
  ],
  "community": [
    "9♣",
    "7♦",
    "10♦",
    "4♦"
  ],
  "your_chips": 5755,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 180,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1295,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1941,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (5755)"
  ],
  "history": [
    "River dealt: 2♠",
    "Player 1 folded",
    "Showdown: Player 3 won 550",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 3 folded",
    "Flop dealt: 9♣, 7♦, 10♦",
    "Player 1 checked",
    "Player 0 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 4♦"
  ]
}
2025-10-31 18:56:27,805 - poker_game - DEBUG - Create Session: {'id': 'f4c888cf-5470-4e8b-bb0b-c29418481d5c', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904587.8012898}
2025-10-31 18:56:30,275 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 180,\n  "reasoning": "現在のボード（コミュニティカード）は 9♣, 7♦, 10♦, 4♦ です。あなたの手札は K♥, 4♥ です。ボードにダイヤが3枚（フラッシュの可能性）あり、あなたの手札にもハートが2枚（フラッシュの可能性）ありますが、ダイヤのフラッシュは完成しません。しかし、あなたの4♥はボードの4♦とペアになっています。相手（プレイヤー0）は、ポットが180で、ベット額が0（チェックした状態）なので、チェックしたか、あるいはベットを避けたと考えられます。相手はさらにベットを増やすこともできますが、現時点では様子見の姿勢です。相手のチップは1295、あなたのチップは5755です。相手のチップが少ないことを考えると、この状況でベットをしてポットを大きくし、相手にプレッシャーをかけるのが良いでしょう。ミニマムレイズは20なので、180（現在のポットサイズ）までレイズして、相手の判断を仰ぎます。これにより、相手が弱いハンドでコールしてきた場合に、より大きなポットを獲得するチャンスが生まれます。これは「バリューベット」と呼ばれる戦略で、強いハンドを持っている時に、相手からより多くのチップを獲得するために行います。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 304, 'promptTokenCount': 829, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 829}], 'totalTokenCount': 1133}, 'invocationId': 'e-b995e651-6e2e-4349-8f3a-7da9b8194015', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'F5htShMx', 'timestamp': 1761904587.819557}]
2025-10-31 18:56:30,276 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:56:30,276 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 180,
  "reasoning": "現在のボード（コミュニティカード）は 9♣, 7♦, 10♦, 4♦ です。あなたの手札は K♥, 4♥ です。ボードにダイヤが3枚（フラッシュの可能性）あり、あなたの手札にもハートが2枚（フラッシュの可能性）ありますが、ダイヤのフラッシュは完成しません。しかし、あなたの4♥はボードの4♦とペアになっています。相手（プレイヤー0）は、ポットが180で、ベット額が0（チェックした状態）なので、チェックしたか、あるいはベットを避けたと考えられます。相手はさらにベットを増やすこともできますが、現時点では様子見の姿勢です。相手のチップは1295、あなたのチップは5755です。相手のチップが少ないことを考えると、この状況でベットをしてポットを大きくし、相手にプレッシャーをかけるのが良いでしょう。ミニマムレイズは20なので、180（現在のポットサイズ）までレイズして、相手の判断を仰ぎます。これにより、相手が弱いハンドでコールしてきた場合に、より大きなポットを獲得するチャンスが生まれます。これは「バリューベット」と呼ばれる戦略で、強いハンドを持っている時に、相手からより多くのチップを獲得するために行います。"
}
```
2025-10-31 18:56:30,276 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:56:30,276 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 180,\n  "reasoning": "現在のボード（コミュニティカード）は 9♣, 7♦, 10♦, 4♦ です。あなたの手札は K♥, 4♥ です。ボードにダイヤが3枚（フラッシュの可能性）あり、あなたの手札にもハートが2枚（フラッシュの可能性）ありますが、ダイヤのフラッシュは完成しません。しかし、あなたの4♥はボードの4♦とペアになっています。相手（プレイヤー0）は、ポットが180で、ベット額が0（チェックした状態）なので、チェックしたか、あるいはベットを避けたと考えられます。相手はさらにベットを増やすこともできますが、現時点では様子見の姿勢です。相手のチップは1295、あなたのチップは5755です。相手のチップが少ないことを考えると、この状況でベットをしてポットを大きくし、相手にプレッシャーをかけるのが良いでしょう。ミニマムレイズは20なので、180（現在のポットサイズ）までレイズして、相手の判断を仰ぎます。これにより、相手が弱いハンドでコールしてきた場合に、より大きなポットを獲得するチャンスが生まれます。これは「バリューベット」と呼ばれる戦略で、強いハンドを持っている時に、相手からより多くのチップを獲得するために行います。"\n}\n```'
2025-10-31 18:56:30,277 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:56:30,277 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 180,\n  "reasoning": "現在のボード（コミュニティカード）は 9♣, 7♦, 10♦, 4♦ です。あなたの手札は K♥, 4♥ です。ボードにダイヤが3枚（フラッシュの可能性）あり、あなたの手札にもハートが2枚（フラッシュの可能性）ありますが、ダイヤのフラッシュは完成しません。しかし、あなたの4♥はボードの4♦とペアになっています。相手（プレイヤー0）は、ポットが180で、ベット額が0（チェックした状態）なので、チェックしたか、あるいはベットを避けたと考えられます。相手はさらにベットを増やすこともできますが、現時点では様子見の姿勢です。相手のチップは1295、あなたのチップは5755です。相手のチップが少ないことを考えると、この状況でベットをしてポットを大きくし、相手にプレッシャーをかけるのが良いでしょう。ミニマムレイズは20なので、180（現在のポットサイズ）までレイズして、相手の判断を仰ぎます。これにより、相手が弱いハンドでコールしてきた場合に、より大きなポットを獲得するチャンスが生まれます。これは「バリューベット」と呼ばれる戦略で、強いハンドを持っている時に、相手からより多くのチップを獲得するために行います。"\n}'
2025-10-31 18:56:30,277 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "raise",
  "amount": 180,
  "reasoning": "現在のボード（コミュニティカード）は 9♣, 7♦, 10♦, 4♦ です。あなたの手札は K♥, 4♥ です。ボードにダイヤが3枚（フラッシュの可能性）あり、あなたの手札にもハートが2枚（フラッシュの可能性）ありますが、ダイヤのフラッシュは完成しません。しかし、あなたの4♥はボードの4♦とペアになっています。相手（プレイヤー0）は、ポットが180で、ベット額が0（チェックした状態）なので、チェックしたか、あるいはベットを避けたと考えられます。相手はさらにベットを増やすこともできますが、現時点では様子見の姿勢です。相手のチップは1295、あなたのチップは5755です。相手のチップが少ないことを考えると、この状況でベットをしてポットを大きくし、相手にプレッシャーをかけるのが良いでしょう。ミニマムレイズは20なので、180（現在のポットサイズ）までレイズして、相手の判断を仰ぎます。これにより、相手が弱いハンドでコールしてきた場合に、より大きなポットを獲得するチャンスが生まれます。これは「バリューベット」と呼ばれる戦略で、強いハンドを持っている時に、相手からより多くのチップを獲得するために行います。"
}
2025-10-31 18:56:30,277 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'raise', 'amount': 180, 'reasoning': '現在のボード（コミュニティカード）は 9♣, 7♦, 10♦, 4♦ です。あなたの手札は K♥, 4♥ です。ボードにダイヤが3枚（フラッシュの可能性）あり、あなたの手札にもハートが2枚（フラッシュの可能性）ありますが、ダイヤのフラッシュは完成しません。しかし、あなたの4♥はボードの4♦とペアになっています。相手（プレイヤー0）は、ポットが180で、ベット額が0（チェックした状態）なので、チェックしたか、あるいはベットを避けたと考えられます。相手はさらにベットを増やすこともできますが、現時点では様子見の姿勢です。相手のチップは1295、あなたのチップは5755です。相手のチップが少ないことを考えると、この状況でベットをしてポットを大きくし、相手にプレッシャーをかけるのが良いでしょう。ミニマムレイズは20なので、180（現在のポットサイズ）までレイズして、相手の判断を仰ぎます。これにより、相手が弱いハンドでコールしてきた場合に、より大きなポットを獲得するチャンスが生まれます。これは「バリューベット」と呼ばれる戦略で、強いハンドを持っている時に、相手からより多くのチップを獲得するために行います。'}
2025-10-31 18:56:30,277 - poker_game - DEBUG - [Agent1] Extracted values - action: 'raise', amount: 180
2025-10-31 18:56:30,278 - poker_game - DEBUG - [Agent1] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (5755)']
2025-10-31 18:56:30,278 - poker_game - DEBUG - [Agent1] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:56:30,278 - poker_game - DEBUG - [Agent1] Raise amount 180 is valid (min: 20)
2025-10-31 18:56:30,278 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'raise', 'amount': 180}
2025-10-31 18:56:30,278 - poker_game - INFO - [Agent1] Successfully parsed decision: raise, 180, 現在のボード（コミュニティカード）は 9♣, 7♦, 10♦, 4♦ です。あなたの手札は K♥, 4♥ です。ボードにダイヤが3枚（フラッシュの可能性）あり、あなたの手札にもハートが2枚（フラッシュの可能性）ありますが、ダイヤのフラッシュは完成しません。しかし、あなたの4♥はボードの4♦とペアになっています。相手（プレイヤー0）は、ポットが180で、ベット額が0（チェックした状態）なので、チェックしたか、あるいはベットを避けたと考えられます。相手はさらにベットを増やすこともできますが、現時点では様子見の姿勢です。相手のチップは1295、あなたのチップは5755です。相手のチップが少ないことを考えると、この状況でベットをしてポットを大きくし、相手にプレッシャーをかけるのが良いでしょう。ミニマムレイズは20なので、180（現在のポットサイズ）までレイズして、相手の判断を仰ぎます。これにより、相手が弱いハンドでコールしてきた場合に、より大きなポットを獲得するチャンスが生まれます。これは「バリューベット」と呼ばれる戦略で、強いハンドを持っている時に、相手からより多くのチップを獲得するために行います。
2025-10-31 18:56:30,279 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'raise' with amount 180
2025-10-31 18:56:30,279 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:30,280 - poker_game - INFO - Hand #16, Phase: turn
2025-10-31 18:56:30,280 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:30,280 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 18:56:30,280 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:30,280 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:30,281 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:30,281 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦']
2025-10-31 18:56:30,281 - poker_game - INFO -   P0(Agent0): chips=1295, bet=0, status=active
2025-10-31 18:56:30,282 - poker_game - INFO -   P1(Agent1): chips=5755, bet=0, status=active
2025-10-31 18:56:30,282 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:30,282 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:30,282 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:30,282 - poker_game - INFO - ==================================================
2025-10-31 18:56:30,283 - poker_game - INFO - ACTION_EXECUTED: Player 1 raised to 180
2025-10-31 18:56:30,293 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:30,294 - poker_game - INFO - Hand #16, Phase: turn
2025-10-31 18:56:30,295 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:30,297 - poker_game - INFO - Pot: 360, Current bet: 180
2025-10-31 18:56:30,297 - poker_game - INFO - Last raiser: 1
2025-10-31 18:56:30,297 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:30,298 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:30,298 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦']
2025-10-31 18:56:30,298 - poker_game - INFO -   P0(Agent0): chips=1295, bet=0, status=active
2025-10-31 18:56:30,298 - poker_game - INFO -   P1(Agent1): chips=5575, bet=180, status=active
2025-10-31 18:56:30,298 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:30,299 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:30,299 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:30,299 - poker_game - INFO - Extra: Action: Player 1 raised to 180
2025-10-31 18:56:30,299 - poker_game - INFO - ==================================================
2025-10-31 18:56:30,299 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:30,300 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:30,300 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:56:30,300 - poker_game - INFO - Advanced from player 1 to player 0 (seat order)
2025-10-31 18:56:30,300 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:30,301 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:30,301 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:56:30,301 - poker_game - DEBUG - Player bets: [0, 180], Current bet: 180, All same: False
2025-10-31 18:56:30,301 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:56:30,301 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:30,302 - poker_game - INFO - Hand #16, Phase: turn
2025-10-31 18:56:30,302 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:56:30,302 - poker_game - INFO - Pot: 360, Current bet: 180
2025-10-31 18:56:30,302 - poker_game - INFO - Last raiser: 1
2025-10-31 18:56:30,303 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:30,303 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:30,303 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦']
2025-10-31 18:56:30,303 - poker_game - INFO -   P0(Agent0): chips=1295, bet=0, status=active
2025-10-31 18:56:30,304 - poker_game - INFO -   P1(Agent1): chips=5575, bet=180, status=active
2025-10-31 18:56:30,304 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:30,304 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:30,304 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:30,304 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:56:30,305 - poker_game - INFO - ==================================================
2025-10-31 18:56:30,406 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "turn",
  "your_cards": [
    "K♠",
    "Q♠"
  ],
  "community": [
    "9♣",
    "7♦",
    "10♦",
    "4♦"
  ],
  "your_chips": 1295,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 360,
  "to_call": 180,
  "dealer_button": 0,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 5575,
      "bet": 180,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1941,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (180)",
    "raise (min 200)",
    "all-in (1295)"
  ],
  "history": [
    "Player 1 folded",
    "Showdown: Player 3 won 550",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 3 folded",
    "Flop dealt: 9♣, 7♦, 10♦",
    "Player 1 checked",
    "Player 0 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 4♦",
    "Player 1 raised to 180"
  ]
}
2025-10-31 18:56:30,420 - poker_game - DEBUG - Create Session: {'id': 'd060a094-7588-444c-aa1c-09457e6c76d0', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904590.4169326}
2025-10-31 18:56:32,472 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 180,\n  "reasoning": "フラッシュのドロー（同じスーツのカードが4枚揃っている状態）があり、さらにストレートの可能性（連続した数字のカードが揃っている状態）もあります。相手のレイズ額はポットサイズに対してそこまで大きくないので、コールして次のカード（リバー）を見て、完成した役で勝負します。ドローがあれば、コールして役の完成を狙うのがセオリーです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 120, 'promptTokenCount': 841, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 841}], 'totalTokenCount': 961}, 'invocationId': 'e-58af1696-8c02-48e0-ba9f-c7279d281b8e', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'viTaLUZ0', 'timestamp': 1761904590.43341}]
2025-10-31 18:56:32,472 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:56:32,473 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 180,
  "reasoning": "フラッシュのドロー（同じスーツのカードが4枚揃っている状態）があり、さらにストレートの可能性（連続した数字のカードが揃っている状態）もあります。相手のレイズ額はポットサイズに対してそこまで大きくないので、コールして次のカード（リバー）を見て、完成した役で勝負します。ドローがあれば、コールして役の完成を狙うのがセオリーです。"
}
```
2025-10-31 18:56:32,473 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:56:32,473 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 180,\n  "reasoning": "フラッシュのドロー（同じスーツのカードが4枚揃っている状態）があり、さらにストレートの可能性（連続した数字のカードが揃っている状態）もあります。相手のレイズ額はポットサイズに対してそこまで大きくないので、コールして次のカード（リバー）を見て、完成した役で勝負します。ドローがあれば、コールして役の完成を狙うのがセオリーです。"\n}\n```'
2025-10-31 18:56:32,473 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:56:32,474 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 180,\n  "reasoning": "フラッシュのドロー（同じスーツのカードが4枚揃っている状態）があり、さらにストレートの可能性（連続した数字のカードが揃っている状態）もあります。相手のレイズ額はポットサイズに対してそこまで大きくないので、コールして次のカード（リバー）を見て、完成した役で勝負します。ドローがあれば、コールして役の完成を狙うのがセオリーです。"\n}'
2025-10-31 18:56:32,474 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 180,
  "reasoning": "フラッシュのドロー（同じスーツのカードが4枚揃っている状態）があり、さらにストレートの可能性（連続した数字のカードが揃っている状態）もあります。相手のレイズ額はポットサイズに対してそこまで大きくないので、コールして次のカード（リバー）を見て、完成した役で勝負します。ドローがあれば、コールして役の完成を狙うのがセオリーです。"
}
2025-10-31 18:56:32,474 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 180, 'reasoning': 'フラッシュのドロー（同じスーツのカードが4枚揃っている状態）があり、さらにストレートの可能性（連続した数字のカードが揃っている状態）もあります。相手のレイズ額はポットサイズに対してそこまで大きくないので、コールして次のカード（リバー）を見て、完成した役で勝負します。ドローがあれば、コールして役の完成を狙うのがセオリーです。'}
2025-10-31 18:56:32,474 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 180
2025-10-31 18:56:32,475 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (180)', 'raise (min 200)', 'all-in (1295)']
2025-10-31 18:56:32,475 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (180)': 180
2025-10-31 18:56:32,475 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 180}
2025-10-31 18:56:32,475 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 180, フラッシュのドロー（同じスーツのカードが4枚揃っている状態）があり、さらにストレートの可能性（連続した数字のカードが揃っている状態）もあります。相手のレイズ額はポットサイズに対してそこまで大きくないので、コールして次のカード（リバー）を見て、完成した役で勝負します。ドローがあれば、コールして役の完成を狙うのがセオリーです。
2025-10-31 18:56:32,476 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 180
2025-10-31 18:56:32,477 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:32,477 - poker_game - INFO - Hand #16, Phase: turn
2025-10-31 18:56:32,478 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:56:32,478 - poker_game - INFO - Pot: 360, Current bet: 180
2025-10-31 18:56:32,478 - poker_game - INFO - Last raiser: 1
2025-10-31 18:56:32,478 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:32,479 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:32,479 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦']
2025-10-31 18:56:32,479 - poker_game - INFO -   P0(Agent0): chips=1295, bet=0, status=active
2025-10-31 18:56:32,480 - poker_game - INFO -   P1(Agent1): chips=5575, bet=180, status=active
2025-10-31 18:56:32,480 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:32,480 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:32,481 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:32,482 - poker_game - INFO - ==================================================
2025-10-31 18:56:32,483 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 180
2025-10-31 18:56:32,496 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:32,496 - poker_game - INFO - Hand #16, Phase: turn
2025-10-31 18:56:32,496 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:56:32,497 - poker_game - INFO - Pot: 540, Current bet: 180
2025-10-31 18:56:32,497 - poker_game - INFO - Last raiser: 1
2025-10-31 18:56:32,498 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:32,498 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:32,499 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦']
2025-10-31 18:56:32,499 - poker_game - INFO -   P0(Agent0): chips=1115, bet=180, status=active
2025-10-31 18:56:32,499 - poker_game - INFO -   P1(Agent1): chips=5575, bet=180, status=active
2025-10-31 18:56:32,500 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:32,500 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:32,500 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:32,501 - poker_game - INFO - Extra: Action: Player 0 called 180
2025-10-31 18:56:32,501 - poker_game - INFO - ==================================================
2025-10-31 18:56:32,502 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:32,502 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:32,502 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:56:32,503 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:56:32,503 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:32,503 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:32,503 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:56:32,504 - poker_game - DEBUG - Player bets: [180, 180], Current bet: 180, All same: True
2025-10-31 18:56:32,504 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:56:32,504 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:32,505 - poker_game - INFO - Hand #16, Phase: turn
2025-10-31 18:56:32,505 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:32,506 - poker_game - INFO - Pot: 540, Current bet: 180
2025-10-31 18:56:32,506 - poker_game - INFO - Last raiser: 1
2025-10-31 18:56:32,506 - poker_game - INFO - Betting round complete: True
2025-10-31 18:56:32,506 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:32,507 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦']
2025-10-31 18:56:32,507 - poker_game - INFO -   P0(Agent0): chips=1115, bet=180, status=active
2025-10-31 18:56:32,508 - poker_game - INFO -   P1(Agent1): chips=5575, bet=180, status=active
2025-10-31 18:56:32,509 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:32,510 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:32,511 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:32,512 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:56:32,512 - poker_game - INFO - ==================================================
2025-10-31 18:56:32,614 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 18:56:32,615 - poker_game - INFO - Betting round complete: True
2025-10-31 18:56:32,615 - poker_game - INFO - Remaining players: 2
2025-10-31 18:56:32,616 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:56:32,616 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:56:32,616 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 18:56:32,628 - poker_game - INFO - Starting new betting round
2025-10-31 18:56:32,629 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:56:32,629 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:56:32,629 - poker_game - DEBUG - Active players for new betting round: [0, 1]
2025-10-31 18:56:32,629 - poker_game - DEBUG - Dealer button: 0
2025-10-31 18:56:32,630 - poker_game - INFO - First actor: Player 1 (by phase rule), was 1
2025-10-31 18:56:32,630 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:56:32,630 - poker_game - INFO - Hand #16, Phase: river
2025-10-31 18:56:32,631 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:32,631 - poker_game - INFO - Pot: 540, Current bet: 0
2025-10-31 18:56:32,631 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:32,632 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:32,632 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:32,633 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦', '9♦']
2025-10-31 18:56:32,633 - poker_game - INFO -   P0(Agent0): chips=1115, bet=0, status=active
2025-10-31 18:56:32,634 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:56:32,634 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:32,635 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:32,635 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:32,636 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 18:56:32,637 - poker_game - INFO - ==================================================
2025-10-31 18:56:32,638 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "river",
  "your_cards": [
    "K♥",
    "4♥"
  ],
  "community": [
    "9♣",
    "7♦",
    "10♦",
    "4♦",
    "9♦"
  ],
  "your_chips": 5575,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 260,
  "pot": 540,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1115,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1941,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (5575)"
  ],
  "history": [
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 3 folded",
    "Flop dealt: 9♣, 7♦, 10♦",
    "Player 1 checked",
    "Player 0 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 4♦",
    "Player 1 raised to 180",
    "Player 0 called 180",
    "River dealt: 9♦"
  ]
}
2025-10-31 18:56:32,651 - poker_game - DEBUG - Create Session: {'id': 'a4f59959-933e-4089-9af9-51eda16a88e7', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904592.6492364}
2025-10-31 18:56:35,640 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「K♥ 4♥」で、コミュニティカードは「9♣ 7♦ 10♦ 4♦ 9♦」です。これにより、あなたは「4のペア」と「ダイヤのフラッシュ」の可能性を持つことができます。しかし、コミュニティカードには「9♦」があり、相手が「9」を持っていればスリーカード、または「4♦」があり、相手が「4」を持っていればツーペアの可能性があります。さらに、「9♦」と「4♦」があるため、相手が「K♦ Q♦」のような強いダイヤのハンドを持っていれば、より強いフラッシュの可能性があります。現在のポットは540で、あなたはベットしておらず、コール金額も0です。相手（Player 0）のベットも0です。あなたのハンドは「4のペア」ですが、相手が「9」や「4」のセット（スリーカード）を持っている可能性や、より強いフラッシュを持っている可能性を考えると、積極的にベットするほど強いハンドではありません。また、相手もベットしていないため、チェックしてショーダウン（お互いの手札を見せ合うこと）に進むのが最善です。これにより、相手のハンドを見て、勝敗を判断できます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 297, 'promptTokenCount': 838, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 838}], 'totalTokenCount': 1135}, 'invocationId': 'e-bd7f5618-9330-44cf-9ed3-8ea25187f9e3', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'WcqfyCPQ', 'timestamp': 1761904592.664037}]
2025-10-31 18:56:35,640 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:56:35,640 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「K♥ 4♥」で、コミュニティカードは「9♣ 7♦ 10♦ 4♦ 9♦」です。これにより、あなたは「4のペア」と「ダイヤのフラッシュ」の可能性を持つことができます。しかし、コミュニティカードには「9♦」があり、相手が「9」を持っていればスリーカード、または「4♦」があり、相手が「4」を持っていればツーペアの可能性があります。さらに、「9♦」と「4♦」があるため、相手が「K♦ Q♦」のような強いダイヤのハンドを持っていれば、より強いフラッシュの可能性があります。現在のポットは540で、あなたはベットしておらず、コール金額も0です。相手（Player 0）のベットも0です。あなたのハンドは「4のペア」ですが、相手が「9」や「4」のセット（スリーカード）を持っている可能性や、より強いフラッシュを持っている可能性を考えると、積極的にベットするほど強いハンドではありません。また、相手もベットしていないため、チェックしてショーダウン（お互いの手札を見せ合うこと）に進むのが最善です。これにより、相手のハンドを見て、勝敗を判断できます。"
}
```
2025-10-31 18:56:35,641 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:56:35,641 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「K♥ 4♥」で、コミュニティカードは「9♣ 7♦ 10♦ 4♦ 9♦」です。これにより、あなたは「4のペア」と「ダイヤのフラッシュ」の可能性を持つことができます。しかし、コミュニティカードには「9♦」があり、相手が「9」を持っていればスリーカード、または「4♦」があり、相手が「4」を持っていればツーペアの可能性があります。さらに、「9♦」と「4♦」があるため、相手が「K♦ Q♦」のような強いダイヤのハンドを持っていれば、より強いフラッシュの可能性があります。現在のポットは540で、あなたはベットしておらず、コール金額も0です。相手（Player 0）のベットも0です。あなたのハンドは「4のペア」ですが、相手が「9」や「4」のセット（スリーカード）を持っている可能性や、より強いフラッシュを持っている可能性を考えると、積極的にベットするほど強いハンドではありません。また、相手もベットしていないため、チェックしてショーダウン（お互いの手札を見せ合うこと）に進むのが最善です。これにより、相手のハンドを見て、勝敗を判断できます。"\n}\n```'
2025-10-31 18:56:35,641 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:56:35,641 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「K♥ 4♥」で、コミュニティカードは「9♣ 7♦ 10♦ 4♦ 9♦」です。これにより、あなたは「4のペア」と「ダイヤのフラッシュ」の可能性を持つことができます。しかし、コミュニティカードには「9♦」があり、相手が「9」を持っていればスリーカード、または「4♦」があり、相手が「4」を持っていればツーペアの可能性があります。さらに、「9♦」と「4♦」があるため、相手が「K♦ Q♦」のような強いダイヤのハンドを持っていれば、より強いフラッシュの可能性があります。現在のポットは540で、あなたはベットしておらず、コール金額も0です。相手（Player 0）のベットも0です。あなたのハンドは「4のペア」ですが、相手が「9」や「4」のセット（スリーカード）を持っている可能性や、より強いフラッシュを持っている可能性を考えると、積極的にベットするほど強いハンドではありません。また、相手もベットしていないため、チェックしてショーダウン（お互いの手札を見せ合うこと）に進むのが最善です。これにより、相手のハンドを見て、勝敗を判断できます。"\n}'
2025-10-31 18:56:35,641 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ラウンド）で、あなたの手札は「K♥ 4♥」で、コミュニティカードは「9♣ 7♦ 10♦ 4♦ 9♦」です。これにより、あなたは「4のペア」と「ダイヤのフラッシュ」の可能性を持つことができます。しかし、コミュニティカードには「9♦」があり、相手が「9」を持っていればスリーカード、または「4♦」があり、相手が「4」を持っていればツーペアの可能性があります。さらに、「9♦」と「4♦」があるため、相手が「K♦ Q♦」のような強いダイヤのハンドを持っていれば、より強いフラッシュの可能性があります。現在のポットは540で、あなたはベットしておらず、コール金額も0です。相手（Player 0）のベットも0です。あなたのハンドは「4のペア」ですが、相手が「9」や「4」のセット（スリーカード）を持っている可能性や、より強いフラッシュを持っている可能性を考えると、積極的にベットするほど強いハンドではありません。また、相手もベットしていないため、チェックしてショーダウン（お互いの手札を見せ合うこと）に進むのが最善です。これにより、相手のハンドを見て、勝敗を判断できます。"
}
2025-10-31 18:56:35,641 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最終ラウンド）で、あなたの手札は「K♥ 4♥」で、コミュニティカードは「9♣ 7♦ 10♦ 4♦ 9♦」です。これにより、あなたは「4のペア」と「ダイヤのフラッシュ」の可能性を持つことができます。しかし、コミュニティカードには「9♦」があり、相手が「9」を持っていればスリーカード、または「4♦」があり、相手が「4」を持っていればツーペアの可能性があります。さらに、「9♦」と「4♦」があるため、相手が「K♦ Q♦」のような強いダイヤのハンドを持っていれば、より強いフラッシュの可能性があります。現在のポットは540で、あなたはベットしておらず、コール金額も0です。相手（Player 0）のベットも0です。あなたのハンドは「4のペア」ですが、相手が「9」や「4」のセット（スリーカード）を持っている可能性や、より強いフラッシュを持っている可能性を考えると、積極的にベットするほど強いハンドではありません。また、相手もベットしていないため、チェックしてショーダウン（お互いの手札を見せ合うこと）に進むのが最善です。これにより、相手のハンドを見て、勝敗を判断できます。'}
2025-10-31 18:56:35,641 - poker_game - DEBUG - [Agent1] Extracted values - action: 'check', amount: 0
2025-10-31 18:56:35,641 - poker_game - DEBUG - [Agent1] Action 'check' normalized - amount set to 0
2025-10-31 18:56:35,641 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:56:35,641 - poker_game - INFO - [Agent1] Successfully parsed decision: check, 0, リバー（最終ラウンド）で、あなたの手札は「K♥ 4♥」で、コミュニティカードは「9♣ 7♦ 10♦ 4♦ 9♦」です。これにより、あなたは「4のペア」と「ダイヤのフラッシュ」の可能性を持つことができます。しかし、コミュニティカードには「9♦」があり、相手が「9」を持っていればスリーカード、または「4♦」があり、相手が「4」を持っていればツーペアの可能性があります。さらに、「9♦」と「4♦」があるため、相手が「K♦ Q♦」のような強いダイヤのハンドを持っていれば、より強いフラッシュの可能性があります。現在のポットは540で、あなたはベットしておらず、コール金額も0です。相手（Player 0）のベットも0です。あなたのハンドは「4のペア」ですが、相手が「9」や「4」のセット（スリーカード）を持っている可能性や、より強いフラッシュを持っている可能性を考えると、積極的にベットするほど強いハンドではありません。また、相手もベットしていないため、チェックしてショーダウン（お互いの手札を見せ合うこと）に進むのが最善です。これにより、相手のハンドを見て、勝敗を判断できます。
2025-10-31 18:56:35,642 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'check' with amount 0
2025-10-31 18:56:35,642 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:35,643 - poker_game - INFO - Hand #16, Phase: river
2025-10-31 18:56:35,643 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:35,643 - poker_game - INFO - Pot: 540, Current bet: 0
2025-10-31 18:56:35,643 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:35,643 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:35,644 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:35,644 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦', '9♦']
2025-10-31 18:56:35,644 - poker_game - INFO -   P0(Agent0): chips=1115, bet=0, status=active
2025-10-31 18:56:35,644 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:56:35,644 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:35,645 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:35,645 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:35,645 - poker_game - INFO - ==================================================
2025-10-31 18:56:35,645 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:56:35,726 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:35,726 - poker_game - INFO - Hand #16, Phase: river
2025-10-31 18:56:35,727 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:35,727 - poker_game - INFO - Pot: 540, Current bet: 0
2025-10-31 18:56:35,728 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:35,728 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:35,729 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:35,729 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦', '9♦']
2025-10-31 18:56:35,729 - poker_game - INFO -   P0(Agent0): chips=1115, bet=0, status=active
2025-10-31 18:56:35,730 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:56:35,730 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:35,730 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:35,731 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:35,731 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:56:35,731 - poker_game - INFO - ==================================================
2025-10-31 18:56:35,732 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:35,732 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:35,732 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:56:35,732 - poker_game - INFO - Advanced from player 1 to player 0 (seat order)
2025-10-31 18:56:35,733 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:35,733 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:35,733 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:56:35,733 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:56:35,733 - poker_game - DEBUG - Active player indices: [0, 1]
2025-10-31 18:56:35,733 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:56:35,734 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:56:35,734 - poker_game - DEBUG - First actor index: 1
2025-10-31 18:56:35,734 - poker_game - DEBUG - Betting continues: Current player 0 != first actor 1
2025-10-31 18:56:35,734 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:35,734 - poker_game - INFO - Hand #16, Phase: river
2025-10-31 18:56:35,734 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:56:35,735 - poker_game - INFO - Pot: 540, Current bet: 0
2025-10-31 18:56:35,735 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:35,736 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:35,736 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:35,736 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦', '9♦']
2025-10-31 18:56:35,737 - poker_game - INFO -   P0(Agent0): chips=1115, bet=0, status=active
2025-10-31 18:56:35,737 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:56:35,737 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:35,738 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:35,738 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:35,738 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:56:35,738 - poker_game - INFO - ==================================================
2025-10-31 18:56:35,840 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "river",
  "your_cards": [
    "K♠",
    "Q♠"
  ],
  "community": [
    "9♣",
    "7♦",
    "10♦",
    "4♦",
    "9♦"
  ],
  "your_chips": 1115,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 260,
  "pot": 540,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 5575,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1941,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 829,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1115)"
  ],
  "history": [
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 4 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 3 folded",
    "Flop dealt: 9♣, 7♦, 10♦",
    "Player 1 checked",
    "Player 0 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 4♦",
    "Player 1 raised to 180",
    "Player 0 called 180",
    "River dealt: 9♦",
    "Player 1 checked"
  ]
}
2025-10-31 18:56:35,860 - poker_game - DEBUG - Create Session: {'id': '84a7394c-5c14-42f6-9b89-00bfcbde4a55', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904595.8565123}
2025-10-31 18:56:38,227 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "River (最後のカードが開かれた後) で、あなたの手札はK♠Q♠、コミュニティカードは9♣7♦10♦4♦9♦です。これはフラッシュ (同じスートのカードが5枚揃うこと) を完成させます。プレイヤー1はチェックしたので、あなたがポットをチェックするか、コールする (相手のベット額と同額を支払う) か、レイズする (ベット額をさらに増やす) ことができます。プレイヤー1がチェックしたので、あなたは無料でカードを見ることができます。あなたのフラッシュは強いハンドですが、プレイヤー1がより強いフラッシュやフルハウス (3枚の同じ数字と2枚の同じ数字の組み合わせ) を持っている可能性も否定できません。しかし、ポットサイズとあなたのチップ量、そして相手のベット額を考慮すると、コール (この場合はベット額が0なので、実質チェックと同じ) が最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 222, 'promptTokenCount': 833, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 833}], 'totalTokenCount': 1055}, 'invocationId': 'e-46bfd8ef-acbd-48e7-8b51-3826b210dbb4', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'LiYBb0qS', 'timestamp': 1761904595.874394}]
2025-10-31 18:56:38,227 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:56:38,227 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "River (最後のカードが開かれた後) で、あなたの手札はK♠Q♠、コミュニティカードは9♣7♦10♦4♦9♦です。これはフラッシュ (同じスートのカードが5枚揃うこと) を完成させます。プレイヤー1はチェックしたので、あなたがポットをチェックするか、コールする (相手のベット額と同額を支払う) か、レイズする (ベット額をさらに増やす) ことができます。プレイヤー1がチェックしたので、あなたは無料でカードを見ることができます。あなたのフラッシュは強いハンドですが、プレイヤー1がより強いフラッシュやフルハウス (3枚の同じ数字と2枚の同じ数字の組み合わせ) を持っている可能性も否定できません。しかし、ポットサイズとあなたのチップ量、そして相手のベット額を考慮すると、コール (この場合はベット額が0なので、実質チェックと同じ) が最善の選択です。"
}
```
2025-10-31 18:56:38,228 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:56:38,228 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "River (最後のカードが開かれた後) で、あなたの手札はK♠Q♠、コミュニティカードは9♣7♦10♦4♦9♦です。これはフラッシュ (同じスートのカードが5枚揃うこと) を完成させます。プレイヤー1はチェックしたので、あなたがポットをチェックするか、コールする (相手のベット額と同額を支払う) か、レイズする (ベット額をさらに増やす) ことができます。プレイヤー1がチェックしたので、あなたは無料でカードを見ることができます。あなたのフラッシュは強いハンドですが、プレイヤー1がより強いフラッシュやフルハウス (3枚の同じ数字と2枚の同じ数字の組み合わせ) を持っている可能性も否定できません。しかし、ポットサイズとあなたのチップ量、そして相手のベット額を考慮すると、コール (この場合はベット額が0なので、実質チェックと同じ) が最善の選択です。"\n}\n```'
2025-10-31 18:56:38,228 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:56:38,228 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "River (最後のカードが開かれた後) で、あなたの手札はK♠Q♠、コミュニティカードは9♣7♦10♦4♦9♦です。これはフラッシュ (同じスートのカードが5枚揃うこと) を完成させます。プレイヤー1はチェックしたので、あなたがポットをチェックするか、コールする (相手のベット額と同額を支払う) か、レイズする (ベット額をさらに増やす) ことができます。プレイヤー1がチェックしたので、あなたは無料でカードを見ることができます。あなたのフラッシュは強いハンドですが、プレイヤー1がより強いフラッシュやフルハウス (3枚の同じ数字と2枚の同じ数字の組み合わせ) を持っている可能性も否定できません。しかし、ポットサイズとあなたのチップ量、そして相手のベット額を考慮すると、コール (この場合はベット額が0なので、実質チェックと同じ) が最善の選択です。"\n}'
2025-10-31 18:56:38,228 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "River (最後のカードが開かれた後) で、あなたの手札はK♠Q♠、コミュニティカードは9♣7♦10♦4♦9♦です。これはフラッシュ (同じスートのカードが5枚揃うこと) を完成させます。プレイヤー1はチェックしたので、あなたがポットをチェックするか、コールする (相手のベット額と同額を支払う) か、レイズする (ベット額をさらに増やす) ことができます。プレイヤー1がチェックしたので、あなたは無料でカードを見ることができます。あなたのフラッシュは強いハンドですが、プレイヤー1がより強いフラッシュやフルハウス (3枚の同じ数字と2枚の同じ数字の組み合わせ) を持っている可能性も否定できません。しかし、ポットサイズとあなたのチップ量、そして相手のベット額を考慮すると、コール (この場合はベット額が0なので、実質チェックと同じ) が最善の選択です。"
}
2025-10-31 18:56:38,228 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'River (最後のカードが開かれた後) で、あなたの手札はK♠Q♠、コミュニティカードは9♣7♦10♦4♦9♦です。これはフラッシュ (同じスートのカードが5枚揃うこと) を完成させます。プレイヤー1はチェックしたので、あなたがポットをチェックするか、コールする (相手のベット額と同額を支払う) か、レイズする (ベット額をさらに増やす) ことができます。プレイヤー1がチェックしたので、あなたは無料でカードを見ることができます。あなたのフラッシュは強いハンドですが、プレイヤー1がより強いフラッシュやフルハウス (3枚の同じ数字と2枚の同じ数字の組み合わせ) を持っている可能性も否定できません。しかし、ポットサイズとあなたのチップ量、そして相手のベット額を考慮すると、コール (この場合はベット額が0なので、実質チェックと同じ) が最善の選択です。'}
2025-10-31 18:56:38,229 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 0
2025-10-31 18:56:38,229 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1115)']
2025-10-31 18:56:38,229 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:56:38,229 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 0, River (最後のカードが開かれた後) で、あなたの手札はK♠Q♠、コミュニティカードは9♣7♦10♦4♦9♦です。これはフラッシュ (同じスートのカードが5枚揃うこと) を完成させます。プレイヤー1はチェックしたので、あなたがポットをチェックするか、コールする (相手のベット額と同額を支払う) か、レイズする (ベット額をさらに増やす) ことができます。プレイヤー1がチェックしたので、あなたは無料でカードを見ることができます。あなたのフラッシュは強いハンドですが、プレイヤー1がより強いフラッシュやフルハウス (3枚の同じ数字と2枚の同じ数字の組み合わせ) を持っている可能性も否定できません。しかし、ポットサイズとあなたのチップ量、そして相手のベット額を考慮すると、コール (この場合はベット額が0なので、実質チェックと同じ) が最善の選択です。
2025-10-31 18:56:38,230 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 0
2025-10-31 18:56:38,230 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:38,231 - poker_game - INFO - Hand #16, Phase: river
2025-10-31 18:56:38,231 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:56:38,231 - poker_game - INFO - Pot: 540, Current bet: 0
2025-10-31 18:56:38,231 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:38,231 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:38,232 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:38,232 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦', '9♦']
2025-10-31 18:56:38,232 - poker_game - INFO -   P0(Agent0): chips=1115, bet=0, status=active
2025-10-31 18:56:38,232 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:56:38,232 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:38,232 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:38,233 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:38,233 - poker_game - INFO - ==================================================
2025-10-31 18:56:38,233 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 18:56:38,249 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:38,249 - poker_game - INFO - Hand #16, Phase: river
2025-10-31 18:56:38,250 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 18:56:38,251 - poker_game - INFO - Pot: 540, Current bet: 0
2025-10-31 18:56:38,251 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:38,251 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:38,251 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:38,251 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦', '9♦']
2025-10-31 18:56:38,252 - poker_game - INFO -   P0(Agent0): chips=1115, bet=0, status=active
2025-10-31 18:56:38,252 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:56:38,252 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:38,252 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:38,252 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:38,253 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 18:56:38,253 - poker_game - INFO - ==================================================
2025-10-31 18:56:38,253 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:38,253 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:38,254 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 18:56:38,254 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:56:38,254 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:38,254 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:38,254 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:56:38,254 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:56:38,255 - poker_game - DEBUG - Active player indices: [0, 1]
2025-10-31 18:56:38,255 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:56:38,255 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:56:38,255 - poker_game - DEBUG - First actor index: 1
2025-10-31 18:56:38,255 - poker_game - INFO - Betting complete: Back to first actor 1 (all players have acted)
2025-10-31 18:56:38,255 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:38,256 - poker_game - INFO - Hand #16, Phase: river
2025-10-31 18:56:38,256 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:38,256 - poker_game - INFO - Pot: 540, Current bet: 0
2025-10-31 18:56:38,256 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:38,256 - poker_game - INFO - Betting round complete: True
2025-10-31 18:56:38,257 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:38,257 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦', '9♦']
2025-10-31 18:56:38,257 - poker_game - INFO -   P0(Agent0): chips=1115, bet=0, status=active
2025-10-31 18:56:38,257 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:56:38,258 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:38,258 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:38,258 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:38,258 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:56:38,259 - poker_game - INFO - ==================================================
2025-10-31 18:56:38,359 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 18:56:38,360 - poker_game - INFO - Betting round complete: True
2025-10-31 18:56:38,360 - poker_game - INFO - Remaining players: 2
2025-10-31 18:56:38,362 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:56:38,362 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:56:38,362 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 18:56:38,363 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:56:38,364 - poker_game - INFO - Hand #16, Phase: showdown
2025-10-31 18:56:38,364 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 18:56:38,364 - poker_game - INFO - Pot: 540, Current bet: 0
2025-10-31 18:56:38,365 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:38,365 - poker_game - INFO - Betting round complete: True
2025-10-31 18:56:38,366 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:38,366 - poker_game - INFO - Community cards: ['9♣', '7♦', '10♦', '4♦', '9♦']
2025-10-31 18:56:38,367 - poker_game - INFO -   P0(Agent0): chips=1115, bet=0, status=active
2025-10-31 18:56:38,367 - poker_game - INFO -   P1(Agent1): chips=5575, bet=0, status=active
2025-10-31 18:56:38,367 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:38,368 - poker_game - INFO -   P3(Agent3): chips=1941, bet=0, status=folded
2025-10-31 18:56:38,368 - poker_game - INFO -   P4(Agent4): chips=829, bet=0, status=folded
2025-10-31 18:56:38,369 - poker_game - INFO - ==================================================
2025-10-31 18:56:38,369 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:56:38,369 - poker_game - INFO - Pot: 540, Community cards: ['9♣', '7♦', '10♦', '4♦', '9♦']
2025-10-31 18:56:38,370 - poker_game - INFO -   Player 0 status=active cards=['K♠', 'Q♠']
2025-10-31 18:56:38,370 - poker_game - INFO -   Player 1 status=active cards=['K♥', '4♥']
2025-10-31 18:56:38,373 - poker_game - INFO -   Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=['K♠', 'Q♠']
2025-10-31 18:56:38,373 - poker_game - INFO -   Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=['K♥', '4♥']
2025-10-31 18:56:38,374 - poker_game - INFO - Pot layer 0: amount=60, contributors=[0, 1, 3]
2025-10-31 18:56:38,376 - poker_game - INFO - Pot layer 1: amount=480, contributors=[0, 1]
2025-10-31 18:56:38,377 - poker_game - INFO - Showdown total awarded: 540 (game.pot=540)
2025-10-31 18:56:38,378 - poker_game - INFO - Showdown winners (aggregated): [1]
2025-10-31 18:56:38,379 - poker_game - INFO -   Awarded 540 to Player 1 (hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦)
2025-10-31 18:56:38,379 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:56:38,413 - poker_game - INFO - === STARTING NEW HAND #17 ===
2025-10-31 18:56:38,414 - poker_game - INFO - Active players for new hand: 4
2025-10-31 18:56:38,415 - poker_game - INFO - Moving dealer button
2025-10-31 18:56:38,415 - poker_game - INFO - Posting blinds
2025-10-31 18:56:38,440 - poker_game - INFO - Dealing hole cards
2025-10-31 18:56:38,440 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:56:38,452 - poker_game - INFO - Started new hand in database: hand_id=17
2025-10-31 18:56:38,454 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:56:38,454 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:38,455 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:56:38,455 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:56:38,456 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:38,456 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:38,457 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:56:38,457 - poker_game - INFO - Community cards: []
2025-10-31 18:56:38,458 - poker_game - INFO -   P0(Agent0): chips=1115, bet=0, status=active
2025-10-31 18:56:38,458 - poker_game - INFO -   P1(Agent1): chips=6115, bet=0, status=active
2025-10-31 18:56:38,458 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:38,459 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=active
2025-10-31 18:56:38,459 - poker_game - INFO -   P4(Agent4): chips=809, bet=20, status=active
2025-10-31 18:56:38,460 - poker_game - INFO - ==================================================
2025-10-31 18:56:38,461 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "A♥",
    "4♦"
  ],
  "community": [],
  "your_chips": 1115,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6115,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 809,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1115)"
  ],
  "history": [
    "Player 4 folded",
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 3 folded",
    "Flop dealt: 9♣, 7♦, 10♦",
    "Player 1 checked",
    "Player 0 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 4♦",
    "Player 1 raised to 180",
    "Player 0 called 180",
    "River dealt: 9♦",
    "Player 1 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠",
    "Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥",
    "Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20"
  ]
}
2025-10-31 18:56:38,633 - poker_game - DEBUG - Create Session: {'id': '7aea64be-16ac-4c94-b40b-1392ea4ced56', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904598.6298456}
2025-10-31 18:56:40,725 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "PreflopでAハイ（エースハイ）は、強力なハンドではないため、コールするのが妥当です。ポットオッズ（ポットのサイズに対するベット額の比率）を考慮すると、このベット額でコールし、フロップ（コミュニティカードの最初の3枚）を見て、その後の展開を判断するのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 103, 'promptTokenCount': 956, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 956}], 'totalTokenCount': 1059}, 'invocationId': 'e-1bd6b54c-24bc-4aa5-8c6d-f656cb8cead7', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'geQPWkk7', 'timestamp': 1761904598.82934}]
2025-10-31 18:56:40,726 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:56:40,726 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "PreflopでAハイ（エースハイ）は、強力なハンドではないため、コールするのが妥当です。ポットオッズ（ポットのサイズに対するベット額の比率）を考慮すると、このベット額でコールし、フロップ（コミュニティカードの最初の3枚）を見て、その後の展開を判断するのが最善です。"
}
```
2025-10-31 18:56:40,727 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:56:40,727 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "PreflopでAハイ（エースハイ）は、強力なハンドではないため、コールするのが妥当です。ポットオッズ（ポットのサイズに対するベット額の比率）を考慮すると、このベット額でコールし、フロップ（コミュニティカードの最初の3枚）を見て、その後の展開を判断するのが最善です。"\n}\n```'
2025-10-31 18:56:40,727 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:56:40,728 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "PreflopでAハイ（エースハイ）は、強力なハンドではないため、コールするのが妥当です。ポットオッズ（ポットのサイズに対するベット額の比率）を考慮すると、このベット額でコールし、フロップ（コミュニティカードの最初の3枚）を見て、その後の展開を判断するのが最善です。"\n}'
2025-10-31 18:56:40,728 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "PreflopでAハイ（エースハイ）は、強力なハンドではないため、コールするのが妥当です。ポットオッズ（ポットのサイズに対するベット額の比率）を考慮すると、このベット額でコールし、フロップ（コミュニティカードの最初の3枚）を見て、その後の展開を判断するのが最善です。"
}
2025-10-31 18:56:40,729 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'PreflopでAハイ（エースハイ）は、強力なハンドではないため、コールするのが妥当です。ポットオッズ（ポットのサイズに対するベット額の比率）を考慮すると、このベット額でコールし、フロップ（コミュニティカードの最初の3枚）を見て、その後の展開を判断するのが最善です。'}
2025-10-31 18:56:40,730 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 20
2025-10-31 18:56:43,177 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1115)']
2025-10-31 18:56:43,178 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (20)': 20
2025-10-31 18:56:43,178 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:56:43,178 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 20, PreflopでAハイ（エースハイ）は、強力なハンドではないため、コールするのが妥当です。ポットオッズ（ポットのサイズに対するベット額の比率）を考慮すると、このベット額でコールし、フロップ（コミュニティカードの最初の3枚）を見て、その後の展開を判断するのが最善です。
2025-10-31 18:56:43,180 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 20
2025-10-31 18:56:43,181 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:43,181 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:43,182 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:56:43,183 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:56:43,183 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:43,184 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:43,184 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:56:43,184 - poker_game - INFO - Community cards: []
2025-10-31 18:56:43,184 - poker_game - INFO -   P0(Agent0): chips=1115, bet=0, status=active
2025-10-31 18:56:43,185 - poker_game - INFO -   P1(Agent1): chips=6115, bet=0, status=active
2025-10-31 18:56:43,185 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:43,185 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=active
2025-10-31 18:56:43,186 - poker_game - INFO -   P4(Agent4): chips=809, bet=20, status=active
2025-10-31 18:56:43,186 - poker_game - INFO - ==================================================
2025-10-31 18:56:43,186 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 20
2025-10-31 18:56:43,202 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:43,202 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:43,203 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:56:43,204 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:56:43,204 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:43,204 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:43,205 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:56:43,205 - poker_game - INFO - Community cards: []
2025-10-31 18:56:43,206 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=active
2025-10-31 18:56:43,206 - poker_game - INFO -   P1(Agent1): chips=6115, bet=0, status=active
2025-10-31 18:56:43,206 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:43,207 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=active
2025-10-31 18:56:43,207 - poker_game - INFO -   P4(Agent4): chips=809, bet=20, status=active
2025-10-31 18:56:43,208 - poker_game - INFO - Extra: Action: Player 0 called 20
2025-10-31 18:56:43,208 - poker_game - INFO - ==================================================
2025-10-31 18:56:43,208 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:43,209 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:43,209 - poker_game - DEBUG - Active players: [0, 1, 3, 4]
2025-10-31 18:56:43,209 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:56:43,210 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:43,213 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:43,213 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:56:43,214 - poker_game - DEBUG - Player bets: [20, 0, 10, 20], Current bet: 20, All same: False
2025-10-31 18:56:43,214 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:56:43,214 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:43,215 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:43,215 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:56:43,215 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:56:43,216 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:43,216 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:43,216 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:56:43,217 - poker_game - INFO - Community cards: []
2025-10-31 18:56:43,217 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=active
2025-10-31 18:56:43,217 - poker_game - INFO -   P1(Agent1): chips=6115, bet=0, status=active
2025-10-31 18:56:43,218 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:43,218 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=active
2025-10-31 18:56:43,219 - poker_game - INFO -   P4(Agent4): chips=809, bet=20, status=active
2025-10-31 18:56:43,219 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:56:43,219 - poker_game - INFO - ==================================================
2025-10-31 18:56:43,321 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "10♦",
    "9♠"
  ],
  "community": [],
  "your_chips": 6115,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 50,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1095,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 809,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (6115)"
  ],
  "history": [
    "Player 0 called 20",
    "Player 1 called 10",
    "Player 3 folded",
    "Flop dealt: 9♣, 7♦, 10♦",
    "Player 1 checked",
    "Player 0 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 4♦",
    "Player 1 raised to 180",
    "Player 0 called 180",
    "River dealt: 9♦",
    "Player 1 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠",
    "Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥",
    "Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 called 20"
  ]
}
2025-10-31 18:56:43,336 - poker_game - DEBUG - Create Session: {'id': 'fcd625da-7783-4d01-b04d-1119fadf4f89', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904603.3335795}
2025-10-31 18:56:40,621 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで10♦ 9♠は、ポジションによってはレイズの選択肢もありますが、現在の状況ではコールが最適です。ポットオッズ（コールに必要な額に対するポットの大きさ）は有利であり、フロップ以降で改善される可能性のあるコネクターハンド（連続した数字のカード）やスーテッドカード（同じマークのカード）ではないものの、ペアを作る可能性は十分にあります。相手のベット額（20）は、それほど強いハンドを暗示しているわけではないため、コールしてフロップを確認するのが妥当な判断です。ブラインド（ポットの初期額）は50で、コールに必要な額は20なので、ポットオッズは2.5:1であり、これはコールするのに十分なオッズです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 191, 'promptTokenCount': 961, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 961}], 'totalTokenCount': 1152}, 'invocationId': 'e-38ed2756-7d7d-4838-9f2c-fb2cd928beb2', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'grID09xx', 'timestamp': 1761904603.350067}]
2025-10-31 18:56:40,622 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:56:40,623 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップで10♦ 9♠は、ポジションによってはレイズの選択肢もありますが、現在の状況ではコールが最適です。ポットオッズ（コールに必要な額に対するポットの大きさ）は有利であり、フロップ以降で改善される可能性のあるコネクターハンド（連続した数字のカード）やスーテッドカード（同じマークのカード）ではないものの、ペアを作る可能性は十分にあります。相手のベット額（20）は、それほど強いハンドを暗示しているわけではないため、コールしてフロップを確認するのが妥当な判断です。ブラインド（ポットの初期額）は50で、コールに必要な額は20なので、ポットオッズは2.5:1であり、これはコールするのに十分なオッズです。"
}
```
2025-10-31 18:56:40,623 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:56:40,623 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで10♦ 9♠は、ポジションによってはレイズの選択肢もありますが、現在の状況ではコールが最適です。ポットオッズ（コールに必要な額に対するポットの大きさ）は有利であり、フロップ以降で改善される可能性のあるコネクターハンド（連続した数字のカード）やスーテッドカード（同じマークのカード）ではないものの、ペアを作る可能性は十分にあります。相手のベット額（20）は、それほど強いハンドを暗示しているわけではないため、コールしてフロップを確認するのが妥当な判断です。ブラインド（ポットの初期額）は50で、コールに必要な額は20なので、ポットオッズは2.5:1であり、これはコールするのに十分なオッズです。"\n}\n```'
2025-10-31 18:56:40,623 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:56:40,624 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで10♦ 9♠は、ポジションによってはレイズの選択肢もありますが、現在の状況ではコールが最適です。ポットオッズ（コールに必要な額に対するポットの大きさ）は有利であり、フロップ以降で改善される可能性のあるコネクターハンド（連続した数字のカード）やスーテッドカード（同じマークのカード）ではないものの、ペアを作る可能性は十分にあります。相手のベット額（20）は、それほど強いハンドを暗示しているわけではないため、コールしてフロップを確認するのが妥当な判断です。ブラインド（ポットの初期額）は50で、コールに必要な額は20なので、ポットオッズは2.5:1であり、これはコールするのに十分なオッズです。"\n}'
2025-10-31 18:56:40,624 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップで10♦ 9♠は、ポジションによってはレイズの選択肢もありますが、現在の状況ではコールが最適です。ポットオッズ（コールに必要な額に対するポットの大きさ）は有利であり、フロップ以降で改善される可能性のあるコネクターハンド（連続した数字のカード）やスーテッドカード（同じマークのカード）ではないものの、ペアを作る可能性は十分にあります。相手のベット額（20）は、それほど強いハンドを暗示しているわけではないため、コールしてフロップを確認するのが妥当な判断です。ブラインド（ポットの初期額）は50で、コールに必要な額は20なので、ポットオッズは2.5:1であり、これはコールするのに十分なオッズです。"
}
2025-10-31 18:56:40,624 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'プリフロップで10♦ 9♠は、ポジションによってはレイズの選択肢もありますが、現在の状況ではコールが最適です。ポットオッズ（コールに必要な額に対するポットの大きさ）は有利であり、フロップ以降で改善される可能性のあるコネクターハンド（連続した数字のカード）やスーテッドカード（同じマークのカード）ではないものの、ペアを作る可能性は十分にあります。相手のベット額（20）は、それほど強いハンドを暗示しているわけではないため、コールしてフロップを確認するのが妥当な判断です。ブラインド（ポットの初期額）は50で、コールに必要な額は20なので、ポットオッズは2.5:1であり、これはコールするのに十分なオッズです。'}
2025-10-31 18:56:40,625 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 20
2025-10-31 18:56:40,625 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (6115)']
2025-10-31 18:56:40,625 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (20)': 20
2025-10-31 18:56:40,626 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:56:40,626 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 20, プリフロップで10♦ 9♠は、ポジションによってはレイズの選択肢もありますが、現在の状況ではコールが最適です。ポットオッズ（コールに必要な額に対するポットの大きさ）は有利であり、フロップ以降で改善される可能性のあるコネクターハンド（連続した数字のカード）やスーテッドカード（同じマークのカード）ではないものの、ペアを作る可能性は十分にあります。相手のベット額（20）は、それほど強いハンドを暗示しているわけではないため、コールしてフロップを確認するのが妥当な判断です。ブラインド（ポットの初期額）は50で、コールに必要な額は20なので、ポットオッズは2.5:1であり、これはコールするのに十分なオッズです。
2025-10-31 18:56:40,628 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 20
2025-10-31 18:56:40,628 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:40,629 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:40,629 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:56:40,630 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 18:56:40,630 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:40,630 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:40,631 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:56:40,631 - poker_game - INFO - Community cards: []
2025-10-31 18:56:40,632 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=active
2025-10-31 18:56:40,632 - poker_game - INFO -   P1(Agent1): chips=6115, bet=0, status=active
2025-10-31 18:56:40,632 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:40,633 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=active
2025-10-31 18:56:40,633 - poker_game - INFO -   P4(Agent4): chips=809, bet=20, status=active
2025-10-31 18:56:40,634 - poker_game - INFO - ==================================================
2025-10-31 18:56:40,634 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 20
2025-10-31 18:56:40,654 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:40,654 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:40,655 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:56:40,655 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:56:40,656 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:40,656 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:40,656 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:56:40,657 - poker_game - INFO - Community cards: []
2025-10-31 18:56:40,657 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=active
2025-10-31 18:56:40,657 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:56:40,658 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:40,658 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=active
2025-10-31 18:56:40,659 - poker_game - INFO -   P4(Agent4): chips=809, bet=20, status=active
2025-10-31 18:56:40,659 - poker_game - INFO - Extra: Action: Player 1 called 20
2025-10-31 18:56:40,659 - poker_game - INFO - ==================================================
2025-10-31 18:56:40,660 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:40,660 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:40,661 - poker_game - DEBUG - Active players: [0, 1, 3, 4]
2025-10-31 18:56:40,661 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 18:56:40,661 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:40,662 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:40,662 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 18:56:40,662 - poker_game - DEBUG - Player bets: [20, 20, 10, 20], Current bet: 20, All same: False
2025-10-31 18:56:40,662 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:56:40,663 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:40,663 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:40,664 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:56:40,664 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:56:40,664 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:40,665 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:40,665 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:56:40,666 - poker_game - INFO - Community cards: []
2025-10-31 18:56:40,667 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=active
2025-10-31 18:56:40,667 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:56:40,668 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:40,668 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=active
2025-10-31 18:56:40,669 - poker_game - INFO -   P4(Agent4): chips=809, bet=20, status=active
2025-10-31 18:56:40,670 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:56:40,670 - poker_game - INFO - ==================================================
2025-10-31 18:56:40,772 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "5♦",
    "9♥"
  ],
  "community": [],
  "your_chips": 1931,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 70,
  "to_call": 10,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1095,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6095,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 809,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (1931)"
  ],
  "history": [
    "Player 1 called 10",
    "Player 3 folded",
    "Flop dealt: 9♣, 7♦, 10♦",
    "Player 1 checked",
    "Player 0 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 4♦",
    "Player 1 raised to 180",
    "Player 0 called 180",
    "River dealt: 9♦",
    "Player 1 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠",
    "Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥",
    "Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 called 20",
    "Player 1 called 20"
  ]
}
2025-10-31 18:56:40,788 - poker_game - DEBUG - Create Session: {'id': '37394ac8-b483-4eee-a86c-0bbc06ee1587', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904600.7853801}
2025-10-31 18:56:42,642 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、5-9オフスート（異なるスートの5と9）は、弱いハンドです。特に、他のプレイヤーがすでにコールしており、レイズの可能性もある状況では、さらに価値が下がります。このハンドでポットに参加するよりも、より良いハンドを待つ方が賢明です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 99, 'promptTokenCount': 962, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 962}], 'totalTokenCount': 1061}, 'invocationId': 'e-979f435b-8c9c-4065-bc5f-cca44f6d26a5', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'IQ7zhMfg', 'timestamp': 1761904600.800148}]
2025-10-31 18:56:42,643 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:56:42,643 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで、5-9オフスート（異なるスートの5と9）は、弱いハンドです。特に、他のプレイヤーがすでにコールしており、レイズの可能性もある状況では、さらに価値が下がります。このハンドでポットに参加するよりも、より良いハンドを待つ方が賢明です。"
}
```
2025-10-31 18:56:42,644 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:56:42,644 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、5-9オフスート（異なるスートの5と9）は、弱いハンドです。特に、他のプレイヤーがすでにコールしており、レイズの可能性もある状況では、さらに価値が下がります。このハンドでポットに参加するよりも、より良いハンドを待つ方が賢明です。"\n}\n```'
2025-10-31 18:56:42,644 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:56:42,645 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、5-9オフスート（異なるスートの5と9）は、弱いハンドです。特に、他のプレイヤーがすでにコールしており、レイズの可能性もある状況では、さらに価値が下がります。このハンドでポットに参加するよりも、より良いハンドを待つ方が賢明です。"\n}'
2025-10-31 18:56:42,645 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで、5-9オフスート（異なるスートの5と9）は、弱いハンドです。特に、他のプレイヤーがすでにコールしており、レイズの可能性もある状況では、さらに価値が下がります。このハンドでポットに参加するよりも、より良いハンドを待つ方が賢明です。"
}
2025-10-31 18:56:42,645 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップで、5-9オフスート（異なるスートの5と9）は、弱いハンドです。特に、他のプレイヤーがすでにコールしており、レイズの可能性もある状況では、さらに価値が下がります。このハンドでポットに参加するよりも、より良いハンドを待つ方が賢明です。'}
2025-10-31 18:56:42,646 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 18:56:42,646 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 18:56:42,646 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:56:42,646 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップで、5-9オフスート（異なるスートの5と9）は、弱いハンドです。特に、他のプレイヤーがすでにコールしており、レイズの可能性もある状況では、さらに価値が下がります。このハンドでポットに参加するよりも、より良いハンドを待つ方が賢明です。
2025-10-31 18:56:42,648 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 18:56:42,648 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:42,649 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:42,649 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:56:42,649 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:56:42,650 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:42,651 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:42,652 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:56:42,652 - poker_game - INFO - Community cards: []
2025-10-31 18:56:42,653 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=active
2025-10-31 18:56:42,653 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:56:42,654 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:42,654 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=active
2025-10-31 18:56:42,655 - poker_game - INFO -   P4(Agent4): chips=809, bet=20, status=active
2025-10-31 18:56:42,655 - poker_game - INFO - ==================================================
2025-10-31 18:56:42,656 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 18:56:42,668 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:42,669 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:42,669 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 18:56:42,670 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:56:42,670 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:42,671 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:42,671 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:42,671 - poker_game - INFO - Community cards: []
2025-10-31 18:56:42,672 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=active
2025-10-31 18:56:42,672 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:56:42,673 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:42,673 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=folded
2025-10-31 18:56:42,673 - poker_game - INFO -   P4(Agent4): chips=809, bet=20, status=active
2025-10-31 18:56:42,674 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 18:56:42,674 - poker_game - INFO - ==================================================
2025-10-31 18:56:42,675 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:42,675 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:42,675 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 18:56:42,675 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:56:42,675 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:42,676 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:42,676 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:56:42,676 - poker_game - DEBUG - Player bets: [20, 20, 20], Current bet: 20, All same: True
2025-10-31 18:56:42,676 - poker_game - DEBUG - Active player indices: [0, 1, 4]
2025-10-31 18:56:42,676 - poker_game - DEBUG - Last raiser index: 4
2025-10-31 18:56:42,676 - poker_game - DEBUG - Current player index: 4
2025-10-31 18:56:42,676 - poker_game - DEBUG - Next after last raiser 4: 0
2025-10-31 18:56:42,677 - poker_game - DEBUG - Betting continues: Current player 4 != next after raiser 0
2025-10-31 18:56:42,677 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:42,677 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:42,677 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:56:42,677 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:56:42,678 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:42,678 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:42,678 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:42,679 - poker_game - INFO - Community cards: []
2025-10-31 18:56:42,680 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=active
2025-10-31 18:56:42,681 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:56:42,681 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:42,682 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=folded
2025-10-31 18:56:42,683 - poker_game - INFO -   P4(Agent4): chips=809, bet=20, status=active
2025-10-31 18:56:42,683 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:56:42,684 - poker_game - INFO - ==================================================
2025-10-31 18:56:42,786 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "A♠",
    "8♥"
  ],
  "community": [],
  "your_chips": 809,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 70,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1095,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6095,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 10,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 40)",
    "all-in (809)"
  ],
  "history": [
    "Player 3 folded",
    "Flop dealt: 9♣, 7♦, 10♦",
    "Player 1 checked",
    "Player 0 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 4♦",
    "Player 1 raised to 180",
    "Player 0 called 180",
    "River dealt: 9♦",
    "Player 1 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠",
    "Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥",
    "Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 3 folded"
  ]
}
2025-10-31 18:56:42,804 - poker_game - DEBUG - Create Session: {'id': 'ef104bf2-5824-43cb-a9bf-b2c529234ba8', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904602.8014138}
2025-10-31 18:56:48,034 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_FFWVZFaHZ5sCkALmN5nrsqXY', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1267, 'totalTokenCount': 1284}, 'invocationId': 'e-5eaa321f-a87d-4889-861c-9e1d5247a3bc', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'DmVXkoYH', 'timestamp': 1761904602.817574}, {'content': {'parts': [{'functionResponse': {'id': 'call_FFWVZFaHZ5sCkALmN5nrsqXY', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-5eaa321f-a87d-4889-861c-9e1d5247a3bc', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'zwmfHwUr', 'timestamp': 1761904604.057449}, {'content': {'parts': [{'functionCall': {'id': 'call_ApzLcil336sXhvw1YrcIa6ut', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1791, 'totalTokenCount': 1811}, 'invocationId': 'e-5eaa321f-a87d-4889-861c-9e1d5247a3bc', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'Z4doR7J0', 'timestamp': 1761904604.062275}, {'content': {'parts': [{'functionResponse': {'id': 'call_ApzLcil336sXhvw1YrcIa6ut', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-5eaa321f-a87d-4889-861c-9e1d5247a3bc', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'WYxyi25X', 'timestamp': 1761904605.42962}, {'content': {'parts': [{'text': '{\n  "action": "raise",\n  "amount": 40,\n  "reasoning": "手札にエースが含まれており、8はストレートやフラッシュの潜在的な強化に寄与します。そのため、最低レイズを行うことでポットを増やしつつ相手にプレッシャーをかけるのが良いと判断しました。"\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 93, 'promptTokenCount': 1353, 'totalTokenCount': 1446}, 'invocationId': 'e-5eaa321f-a87d-4889-861c-9e1d5247a3bc', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Ua74vZm4', 'timestamp': 1761904605.432348}]
2025-10-31 18:56:48,034 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:56:48,035 - poker_game - DEBUG - {
  "action": "raise",
  "amount": 40,
  "reasoning": "手札にエースが含まれており、8はストレートやフラッシュの潜在的な強化に寄与します。そのため、最低レイズを行うことでポットを増やしつつ相手にプレッシャーをかけるのが良いと判断しました。"
}
2025-10-31 18:56:48,035 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:56:48,036 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "raise",\n  "amount": 40,\n  "reasoning": "手札にエースが含まれており、8はストレートやフラッシュの潜在的な強化に寄与します。そのため、最低レイズを行うことでポットを増やしつつ相手にプレッシャーをかけるのが良いと判断しました。"\n}'
2025-10-31 18:56:48,036 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:56:48,036 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "raise",
  "amount": 40,
  "reasoning": "手札にエースが含まれており、8はストレートやフラッシュの潜在的な強化に寄与します。そのため、最低レイズを行うことでポットを増やしつつ相手にプレッシャーをかけるのが良いと判断しました。"
}
2025-10-31 18:56:48,036 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'raise', 'amount': 40, 'reasoning': '手札にエースが含まれており、8はストレートやフラッシュの潜在的な強化に寄与します。そのため、最低レイズを行うことでポットを増やしつつ相手にプレッシャーをかけるのが良いと判断しました。'}
2025-10-31 18:56:48,036 - poker_game - DEBUG - [Agent4] Extracted values - action: 'raise', amount: 40
2025-10-31 18:56:48,037 - poker_game - DEBUG - [Agent4] Processing raise action - available actions: ['fold', 'check', 'raise (min 40)', 'all-in (809)']
2025-10-31 18:56:48,037 - poker_game - DEBUG - [Agent4] Minimum raise amount extracted from 'raise (min 40)': 40
2025-10-31 18:56:48,037 - poker_game - DEBUG - [Agent4] Raise amount 40 is valid (min: 40)
2025-10-31 18:56:48,037 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'raise', 'amount': 40}
2025-10-31 18:56:48,037 - poker_game - INFO - [Agent4] Successfully parsed decision: raise, 40, 手札にエースが含まれており、8はストレートやフラッシュの潜在的な強化に寄与します。そのため、最低レイズを行うことでポットを増やしつつ相手にプレッシャーをかけるのが良いと判断しました。
2025-10-31 18:56:48,039 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'raise' with amount 40
2025-10-31 18:56:48,040 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:48,040 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:48,041 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:56:48,041 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 18:56:48,042 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:48,042 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:48,043 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:48,043 - poker_game - INFO - Community cards: []
2025-10-31 18:56:48,043 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=active
2025-10-31 18:56:48,044 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:56:48,044 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:48,045 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=folded
2025-10-31 18:56:48,045 - poker_game - INFO -   P4(Agent4): chips=809, bet=20, status=active
2025-10-31 18:56:48,045 - poker_game - INFO - ==================================================
2025-10-31 18:56:48,046 - poker_game - INFO - ACTION_EXECUTED: Player 4 raised to 60
2025-10-31 18:56:48,058 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:48,059 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:48,060 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:56:48,060 - poker_game - INFO - Pot: 110, Current bet: 60
2025-10-31 18:56:48,061 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:48,061 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:48,062 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:48,063 - poker_game - INFO - Community cards: []
2025-10-31 18:56:48,063 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=active
2025-10-31 18:56:48,064 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:56:48,064 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:48,065 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=folded
2025-10-31 18:56:48,065 - poker_game - INFO -   P4(Agent4): chips=769, bet=60, status=active
2025-10-31 18:56:48,065 - poker_game - INFO - Extra: Action: Player 4 raised to 60
2025-10-31 18:56:48,066 - poker_game - INFO - ==================================================
2025-10-31 18:56:48,066 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:48,066 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:48,066 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 18:56:48,067 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:56:48,067 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:48,067 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:48,067 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:56:48,068 - poker_game - DEBUG - Player bets: [20, 20, 60], Current bet: 60, All same: False
2025-10-31 18:56:48,068 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:56:48,068 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:48,069 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:48,069 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:56:48,070 - poker_game - INFO - Pot: 110, Current bet: 60
2025-10-31 18:56:48,070 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:48,070 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:48,071 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:48,071 - poker_game - INFO - Community cards: []
2025-10-31 18:56:48,072 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=active
2025-10-31 18:56:48,072 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:56:48,072 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:48,073 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=folded
2025-10-31 18:56:48,073 - poker_game - INFO -   P4(Agent4): chips=769, bet=60, status=active
2025-10-31 18:56:48,074 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:56:48,074 - poker_game - INFO - ==================================================
2025-10-31 18:56:48,179 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "A♥",
    "4♦"
  ],
  "community": [],
  "your_chips": 1095,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 110,
  "to_call": 40,
  "dealer_button": 1,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6095,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 10,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 769,
      "bet": 60,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (40)",
    "raise (min 80)",
    "all-in (1095)"
  ],
  "history": [
    "Flop dealt: 9♣, 7♦, 10♦",
    "Player 1 checked",
    "Player 0 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 4♦",
    "Player 1 raised to 180",
    "Player 0 called 180",
    "River dealt: 9♦",
    "Player 1 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠",
    "Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥",
    "Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 raised to 60"
  ]
}
2025-10-31 18:56:48,187 - poker_game - DEBUG - Create Session: {'id': '9e4315a2-2f89-4942-94ea-47fdb69811b9', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904608.185801}
2025-10-31 18:56:49,949 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでAハイ（エースハイ）は強いハンドではありません。相手のプレイヤー4がレイズしているため、コールするにはポットオッズが悪く、勝つ見込みが低いです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 72, 'promptTokenCount': 964, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 964}], 'totalTokenCount': 1036}, 'invocationId': 'e-7a671512-95e4-44e9-90b8-2729eaefc018', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'cel1Wx15', 'timestamp': 1761904608.198596}]
2025-10-31 18:56:49,950 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:56:49,950 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップでAハイ（エースハイ）は強いハンドではありません。相手のプレイヤー4がレイズしているため、コールするにはポットオッズが悪く、勝つ見込みが低いです。"
}
```
2025-10-31 18:56:49,950 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:56:49,951 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでAハイ（エースハイ）は強いハンドではありません。相手のプレイヤー4がレイズしているため、コールするにはポットオッズが悪く、勝つ見込みが低いです。"\n}\n```'
2025-10-31 18:56:49,951 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:56:49,951 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでAハイ（エースハイ）は強いハンドではありません。相手のプレイヤー4がレイズしているため、コールするにはポットオッズが悪く、勝つ見込みが低いです。"\n}'
2025-10-31 18:56:49,951 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップでAハイ（エースハイ）は強いハンドではありません。相手のプレイヤー4がレイズしているため、コールするにはポットオッズが悪く、勝つ見込みが低いです。"
}
2025-10-31 18:56:49,952 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップでAハイ（エースハイ）は強いハンドではありません。相手のプレイヤー4がレイズしているため、コールするにはポットオッズが悪く、勝つ見込みが低いです。'}
2025-10-31 18:56:49,952 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 18:56:49,952 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 18:56:49,952 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:56:49,952 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップでAハイ（エースハイ）は強いハンドではありません。相手のプレイヤー4がレイズしているため、コールするにはポットオッズが悪く、勝つ見込みが低いです。
2025-10-31 18:56:49,954 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 18:56:49,954 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:49,955 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:49,955 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:56:49,955 - poker_game - INFO - Pot: 110, Current bet: 60
2025-10-31 18:56:49,956 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:49,956 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:49,957 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:56:49,957 - poker_game - INFO - Community cards: []
2025-10-31 18:56:49,957 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=active
2025-10-31 18:56:49,958 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:56:49,958 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:49,959 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=folded
2025-10-31 18:56:49,959 - poker_game - INFO -   P4(Agent4): chips=769, bet=60, status=active
2025-10-31 18:56:49,959 - poker_game - INFO - ==================================================
2025-10-31 18:56:49,960 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 18:56:49,975 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:49,976 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:49,976 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 18:56:49,976 - poker_game - INFO - Pot: 110, Current bet: 60
2025-10-31 18:56:49,976 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:49,977 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:49,977 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:49,978 - poker_game - INFO - Community cards: []
2025-10-31 18:56:49,978 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=folded
2025-10-31 18:56:49,978 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:56:49,979 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:49,979 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=folded
2025-10-31 18:56:49,979 - poker_game - INFO -   P4(Agent4): chips=769, bet=60, status=active
2025-10-31 18:56:49,980 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 18:56:49,980 - poker_game - INFO - ==================================================
2025-10-31 18:56:49,981 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:49,981 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:49,982 - poker_game - DEBUG - Active players: [1, 4]
2025-10-31 18:56:49,982 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 18:56:49,982 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:49,983 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:49,983 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:56:49,983 - poker_game - DEBUG - Player bets: [20, 60], Current bet: 60, All same: False
2025-10-31 18:56:49,983 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:56:49,984 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:49,984 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:49,984 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:56:49,985 - poker_game - INFO - Pot: 110, Current bet: 60
2025-10-31 18:56:49,985 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:49,986 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:49,987 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:49,988 - poker_game - INFO - Community cards: []
2025-10-31 18:56:49,989 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=folded
2025-10-31 18:56:49,990 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:56:49,990 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:49,991 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=folded
2025-10-31 18:56:49,992 - poker_game - INFO -   P4(Agent4): chips=769, bet=60, status=active
2025-10-31 18:56:49,993 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:56:49,993 - poker_game - INFO - ==================================================
2025-10-31 18:56:50,095 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "10♦",
    "9♠"
  ],
  "community": [],
  "your_chips": 6095,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 110,
  "to_call": 40,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1095,
      "bet": 20,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 10,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 769,
      "bet": 60,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (40)",
    "raise (min 80)",
    "all-in (6095)"
  ],
  "history": [
    "Player 1 checked",
    "Player 0 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 4♦",
    "Player 1 raised to 180",
    "Player 0 called 180",
    "River dealt: 9♦",
    "Player 1 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠",
    "Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥",
    "Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 raised to 60",
    "Player 0 folded"
  ]
}
2025-10-31 18:56:50,105 - poker_game - DEBUG - Create Session: {'id': 'bb752fd3-066a-45ad-b261-2e96d8845620', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904610.1022134}
2025-10-31 18:56:51,985 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 40,\n  "reasoning": "プリフロップで10♦9♠は、アグレッシブなプレイをせず、コールしてフロップを見るのが最善です。相手（プレイヤー4）は既に60ベットしており、コールするには40追加する必要があります。ポットオッズ（現在のポット110に対して40をコール）は、このハンドでフロップを見るのに十分な価値を提供します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 112, 'promptTokenCount': 953, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 953}], 'totalTokenCount': 1065}, 'invocationId': 'e-ac61fe52-f4c5-448d-adc4-e131b27f2ea1', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'OdTWjdV2', 'timestamp': 1761904610.112777}]
2025-10-31 18:56:51,986 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:56:51,986 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 40,
  "reasoning": "プリフロップで10♦9♠は、アグレッシブなプレイをせず、コールしてフロップを見るのが最善です。相手（プレイヤー4）は既に60ベットしており、コールするには40追加する必要があります。ポットオッズ（現在のポット110に対して40をコール）は、このハンドでフロップを見るのに十分な価値を提供します。"
}
```
2025-10-31 18:56:51,987 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:56:51,987 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 40,\n  "reasoning": "プリフロップで10♦9♠は、アグレッシブなプレイをせず、コールしてフロップを見るのが最善です。相手（プレイヤー4）は既に60ベットしており、コールするには40追加する必要があります。ポットオッズ（現在のポット110に対して40をコール）は、このハンドでフロップを見るのに十分な価値を提供します。"\n}\n```'
2025-10-31 18:56:51,987 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:56:51,987 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 40,\n  "reasoning": "プリフロップで10♦9♠は、アグレッシブなプレイをせず、コールしてフロップを見るのが最善です。相手（プレイヤー4）は既に60ベットしており、コールするには40追加する必要があります。ポットオッズ（現在のポット110に対して40をコール）は、このハンドでフロップを見るのに十分な価値を提供します。"\n}'
2025-10-31 18:56:51,988 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 40,
  "reasoning": "プリフロップで10♦9♠は、アグレッシブなプレイをせず、コールしてフロップを見るのが最善です。相手（プレイヤー4）は既に60ベットしており、コールするには40追加する必要があります。ポットオッズ（現在のポット110に対して40をコール）は、このハンドでフロップを見るのに十分な価値を提供します。"
}
2025-10-31 18:56:51,988 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 40, 'reasoning': 'プリフロップで10♦9♠は、アグレッシブなプレイをせず、コールしてフロップを見るのが最善です。相手（プレイヤー4）は既に60ベットしており、コールするには40追加する必要があります。ポットオッズ（現在のポット110に対して40をコール）は、このハンドでフロップを見るのに十分な価値を提供します。'}
2025-10-31 18:56:51,988 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 40
2025-10-31 18:56:51,988 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (40)', 'raise (min 80)', 'all-in (6095)']
2025-10-31 18:56:51,988 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (40)': 40
2025-10-31 18:56:51,989 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 40}
2025-10-31 18:56:51,989 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 40, プリフロップで10♦9♠は、アグレッシブなプレイをせず、コールしてフロップを見るのが最善です。相手（プレイヤー4）は既に60ベットしており、コールするには40追加する必要があります。ポットオッズ（現在のポット110に対して40をコール）は、このハンドでフロップを見るのに十分な価値を提供します。
2025-10-31 18:56:51,990 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 40
2025-10-31 18:56:51,991 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:56:51,991 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:51,992 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:56:51,992 - poker_game - INFO - Pot: 110, Current bet: 60
2025-10-31 18:56:51,992 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:51,993 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:51,993 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:51,994 - poker_game - INFO - Community cards: []
2025-10-31 18:56:51,994 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=folded
2025-10-31 18:56:51,995 - poker_game - INFO -   P1(Agent1): chips=6095, bet=20, status=active
2025-10-31 18:56:51,995 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:51,995 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=folded
2025-10-31 18:56:51,995 - poker_game - INFO -   P4(Agent4): chips=769, bet=60, status=active
2025-10-31 18:56:51,996 - poker_game - INFO - ==================================================
2025-10-31 18:56:51,996 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 40
2025-10-31 18:56:52,007 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:56:52,009 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:52,009 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:56:52,010 - poker_game - INFO - Pot: 150, Current bet: 60
2025-10-31 18:56:52,010 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:52,011 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:52,011 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:52,012 - poker_game - INFO - Community cards: []
2025-10-31 18:56:52,012 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=folded
2025-10-31 18:56:52,013 - poker_game - INFO -   P1(Agent1): chips=6055, bet=60, status=active
2025-10-31 18:56:52,013 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:52,014 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=folded
2025-10-31 18:56:52,014 - poker_game - INFO -   P4(Agent4): chips=769, bet=60, status=active
2025-10-31 18:56:52,014 - poker_game - INFO - Extra: Action: Player 1 called 40
2025-10-31 18:56:52,015 - poker_game - INFO - ==================================================
2025-10-31 18:56:52,015 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:56:52,015 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:56:52,015 - poker_game - DEBUG - Active players: [1, 4]
2025-10-31 18:56:52,015 - poker_game - INFO - Advanced from player 1 to player 4 (seat order)
2025-10-31 18:56:52,016 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:56:52,016 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:56:52,016 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:56:52,016 - poker_game - DEBUG - Player bets: [60, 60], Current bet: 60, All same: True
2025-10-31 18:56:52,016 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:56:52,017 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:56:52,017 - poker_game - INFO - Hand #17, Phase: preflop
2025-10-31 18:56:52,018 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:56:52,018 - poker_game - INFO - Pot: 150, Current bet: 60
2025-10-31 18:56:52,018 - poker_game - INFO - Last raiser: 4
2025-10-31 18:56:52,019 - poker_game - INFO - Betting round complete: True
2025-10-31 18:56:52,019 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:52,020 - poker_game - INFO - Community cards: []
2025-10-31 18:56:52,020 - poker_game - INFO -   P0(Agent0): chips=1095, bet=20, status=folded
2025-10-31 18:56:52,021 - poker_game - INFO -   P1(Agent1): chips=6055, bet=60, status=active
2025-10-31 18:56:52,021 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:52,022 - poker_game - INFO -   P3(Agent3): chips=1931, bet=10, status=folded
2025-10-31 18:56:52,022 - poker_game - INFO -   P4(Agent4): chips=769, bet=60, status=active
2025-10-31 18:56:52,023 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:56:52,023 - poker_game - INFO - ==================================================
2025-10-31 18:56:52,125 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:56:52,126 - poker_game - INFO - Betting round complete: True
2025-10-31 18:56:52,126 - poker_game - INFO - Remaining players: 2
2025-10-31 18:56:52,127 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:56:52,127 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:56:52,127 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:56:52,138 - poker_game - INFO - Starting new betting round
2025-10-31 18:56:52,139 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:56:52,139 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:56:52,140 - poker_game - DEBUG - Active players for new betting round: [1, 4]
2025-10-31 18:56:52,140 - poker_game - DEBUG - Dealer button: 1
2025-10-31 18:56:52,140 - poker_game - INFO - First actor: Player 4 (by phase rule), was 4
2025-10-31 18:56:52,140 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:56:52,141 - poker_game - INFO - Hand #17, Phase: flop
2025-10-31 18:56:52,141 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:56:52,142 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:56:52,142 - poker_game - INFO - Last raiser: None
2025-10-31 18:56:52,143 - poker_game - INFO - Betting round complete: False
2025-10-31 18:56:52,143 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:56:52,144 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥']
2025-10-31 18:56:52,145 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:56:52,145 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:56:52,146 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:56:52,146 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:56:52,146 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:56:52,147 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:56:52,147 - poker_game - INFO - ==================================================
2025-10-31 18:56:52,148 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "flop",
  "your_cards": [
    "A♠",
    "8♥"
  ],
  "community": [
    "2♣",
    "7♥",
    "3♥"
  ],
  "your_chips": 769,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 150,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1095,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6055,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (769)"
  ],
  "history": [
    "Player 1 called 60",
    "Turn dealt: 4♦",
    "Player 1 raised to 180",
    "Player 0 called 180",
    "River dealt: 9♦",
    "Player 1 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠",
    "Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥",
    "Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 raised to 60",
    "Player 0 folded",
    "Player 1 called 40",
    "Flop dealt: 2♣, 7♥, 3♥"
  ]
}
2025-10-31 18:56:52,241 - poker_game - DEBUG - Create Session: {'id': 'd07fecfb-3e59-450b-9371-b8e55c883cef', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904612.2375798}
2025-10-31 18:57:02,411 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:57:06,366 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_kl6Cqasmv87XFi11xmmYMrYk', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1287, 'totalTokenCount': 1304}, 'invocationId': 'e-fa0377de-c933-4fc4-9218-5131fc8b7e8e', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'HtCtixyC', 'timestamp': 1761904612.256367}, {'content': {'parts': [{'functionResponse': {'id': 'call_kl6Cqasmv87XFi11xmmYMrYk', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-fa0377de-c933-4fc4-9218-5131fc8b7e8e', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'sB9cFlRh', 'timestamp': 1761904613.26759}, {'content': {'parts': [{'functionCall': {'id': 'call_m7qyH2ncwmRTt88y6F7xu68D', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1811, 'totalTokenCount': 1831}, 'invocationId': 'e-fa0377de-c933-4fc4-9218-5131fc8b7e8e', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'OaZgerzF', 'timestamp': 1761904613.271575}, {'content': {'parts': [{'functionResponse': {'id': 'call_m7qyH2ncwmRTt88y6F7xu68D', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-fa0377de-c933-4fc4-9218-5131fc8b7e8e', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': '6MRHrzix', 'timestamp': 1761904614.887468}, {'content': {'parts': [{'functionCall': {'id': 'call_Q8absZ1lkk3cI3z1qLFwNYuC', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1373, 'totalTokenCount': 1390}, 'invocationId': 'e-fa0377de-c933-4fc4-9218-5131fc8b7e8e', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'eCiOJdQD', 'timestamp': 1761904614.889679}, {'content': {'parts': [{'functionResponse': {'id': 'call_Q8absZ1lkk3cI3z1qLFwNYuC', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-fa0377de-c933-4fc4-9218-5131fc8b7e8e', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'xgFWpaci', 'timestamp': 1761904616.467707}, {'content': {'parts': [{'functionCall': {'id': 'call_j98WKDOUWATXKsyLjKuukT0h', 'args': {'game_state': {'your_id': 4, 'phase': 'flop', 'your_cards': ['A♠', '8♥'], 'community': ['2♣', '7♥', '3♥'], 'your_chips': 769, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 60, 'pot': 150, 'to_call': 0, 'dealer_button': 1, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1095, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 6055, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1931, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (769)'], 'history': ['Player 1 called 60', 'Turn dealt: 4♦', 'Player 1 raised to 180', 'Player 0 called 180', 'River dealt: 9♦', 'Player 1 checked', 'Player 0 checked', 'Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠', 'Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥', 'Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦', 'Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 called 20', 'Player 1 called 20', 'Player 3 folded', 'Player 4 raised to 60', 'Player 0 folded', 'Player 1 called 40', 'Flop dealt: 2♣, 7♥, 3♥']}, 'call_amount': 0, 'pot_after_call': 150, 'equity': 0.3}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 494, 'promptTokenCount': 1903, 'totalTokenCount': 2397}, 'invocationId': 'e-fa0377de-c933-4fc4-9218-5131fc8b7e8e', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'bMPJJqZn', 'timestamp': 1761904616.472641}, {'content': {'parts': [{'functionResponse': {'id': 'call_j98WKDOUWATXKsyLjKuukT0h', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（45.00(ポットに対して30.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'e-fa0377de-c933-4fc4-9218-5131fc8b7e8e', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'YuU6j4um', 'timestamp': 1761904627.056179}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い（45.00(ポットに対して30.00%）ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 38, 'promptTokenCount': 2448, 'totalTokenCount': 2486}, 'invocationId': 'e-fa0377de-c933-4fc4-9218-5131fc8b7e8e', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'nnkoKzbM', 'timestamp': 1761904627.059458}]
2025-10-31 18:57:06,367 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:57:06,368 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い（45.00(ポットに対して30.00%）ため、チェックします"}
2025-10-31 18:57:06,369 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:57:06,369 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い（45.00(ポットに対して30.00%）ため、チェックします"}'
2025-10-31 18:57:06,369 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:57:06,369 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い（45.00(ポットに対して30.00%）ため、チェックします"}
2025-10-31 18:57:06,370 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（45.00(ポットに対して30.00%）ため、チェックします'}
2025-10-31 18:57:06,370 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 18:57:06,370 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 18:57:06,370 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:57:06,370 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い（45.00(ポットに対して30.00%）ため、チェックします
2025-10-31 18:57:06,371 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 18:57:06,372 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:57:06,372 - poker_game - INFO - Hand #17, Phase: flop
2025-10-31 18:57:06,373 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:57:06,374 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:57:06,375 - poker_game - INFO - Last raiser: None
2025-10-31 18:57:06,375 - poker_game - INFO - Betting round complete: False
2025-10-31 18:57:06,376 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:57:06,377 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥']
2025-10-31 18:57:06,378 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:57:06,378 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:57:06,379 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:57:06,379 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:57:06,381 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:57:06,382 - poker_game - INFO - ==================================================
2025-10-31 18:57:06,382 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 18:57:06,398 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:57:06,399 - poker_game - INFO - Hand #17, Phase: flop
2025-10-31 18:57:06,399 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:57:06,400 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:57:06,400 - poker_game - INFO - Last raiser: None
2025-10-31 18:57:06,401 - poker_game - INFO - Betting round complete: False
2025-10-31 18:57:06,401 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:57:06,402 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥']
2025-10-31 18:57:06,402 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:57:06,402 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:57:06,403 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:57:06,403 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:57:06,404 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:57:06,404 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 18:57:06,405 - poker_game - INFO - ==================================================
2025-10-31 18:57:06,405 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:57:06,405 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:57:06,406 - poker_game - DEBUG - Active players: [1, 4]
2025-10-31 18:57:06,406 - poker_game - INFO - Advanced from player 4 to player 1 (seat order)
2025-10-31 18:57:06,406 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:57:06,407 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:57:06,407 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:57:06,407 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:57:06,407 - poker_game - DEBUG - Active player indices: [1, 4]
2025-10-31 18:57:06,408 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:57:06,408 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:57:06,408 - poker_game - DEBUG - First actor index: 4
2025-10-31 18:57:06,408 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 4
2025-10-31 18:57:06,409 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:57:06,409 - poker_game - INFO - Hand #17, Phase: flop
2025-10-31 18:57:06,410 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:57:06,410 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:57:06,411 - poker_game - INFO - Last raiser: None
2025-10-31 18:57:06,411 - poker_game - INFO - Betting round complete: False
2025-10-31 18:57:06,412 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:57:06,413 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥']
2025-10-31 18:57:06,414 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:57:06,414 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:57:06,415 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:57:06,415 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:57:06,417 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:57:06,418 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:57:06,418 - poker_game - INFO - ==================================================
2025-10-31 18:57:06,520 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "flop",
  "your_cards": [
    "10♦",
    "9♠"
  ],
  "community": [
    "2♣",
    "7♥",
    "3♥"
  ],
  "your_chips": 6055,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 150,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1095,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 769,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (6055)"
  ],
  "history": [
    "Turn dealt: 4♦",
    "Player 1 raised to 180",
    "Player 0 called 180",
    "River dealt: 9♦",
    "Player 1 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠",
    "Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥",
    "Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 raised to 60",
    "Player 0 folded",
    "Player 1 called 40",
    "Flop dealt: 2♣, 7♥, 3♥",
    "Player 4 checked"
  ]
}
2025-10-31 18:57:06,538 - poker_game - DEBUG - Create Session: {'id': 'b3c66039-0576-4fd3-b5ce-1aeb005f86d9', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904626.5345547}
2025-10-31 18:57:08,532 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたの手札（10♦, 9♠）は、コミュニティカード（2♣, 7♥, 3♥）と組み合わせて、強い役を作っていません。ペアもストレートもフラッシュもありません。相手（Player 4）はベットせずチェックしたので、こちらもリスクを冒さずに次のカード（ターン）を見るのが最善です。これを「チェック」と言います。ポット（賭けられたチップの総額）は150で、コール（相手のベット額と同額を賭けること）の必要はありません。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 162, 'promptTokenCount': 972, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 972}], 'totalTokenCount': 1134}, 'invocationId': 'e-78dc02b2-a978-4204-a40c-f9089e1fbd5b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '1zIpoj7E', 'timestamp': 1761904626.553768}]
2025-10-31 18:57:08,533 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:57:08,533 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたの手札（10♦, 9♠）は、コミュニティカード（2♣, 7♥, 3♥）と組み合わせて、強い役を作っていません。ペアもストレートもフラッシュもありません。相手（Player 4）はベットせずチェックしたので、こちらもリスクを冒さずに次のカード（ターン）を見るのが最善です。これを「チェック」と言います。ポット（賭けられたチップの総額）は150で、コール（相手のベット額と同額を賭けること）の必要はありません。"
}
```
2025-10-31 18:57:08,533 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:57:08,533 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたの手札（10♦, 9♠）は、コミュニティカード（2♣, 7♥, 3♥）と組み合わせて、強い役を作っていません。ペアもストレートもフラッシュもありません。相手（Player 4）はベットせずチェックしたので、こちらもリスクを冒さずに次のカード（ターン）を見るのが最善です。これを「チェック」と言います。ポット（賭けられたチップの総額）は150で、コール（相手のベット額と同額を賭けること）の必要はありません。"\n}\n```'
2025-10-31 18:57:08,534 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:57:08,534 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたの手札（10♦, 9♠）は、コミュニティカード（2♣, 7♥, 3♥）と組み合わせて、強い役を作っていません。ペアもストレートもフラッシュもありません。相手（Player 4）はベットせずチェックしたので、こちらもリスクを冒さずに次のカード（ターン）を見るのが最善です。これを「チェック」と言います。ポット（賭けられたチップの総額）は150で、コール（相手のベット額と同額を賭けること）の必要はありません。"\n}'
2025-10-31 18:57:08,534 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたの手札（10♦, 9♠）は、コミュニティカード（2♣, 7♥, 3♥）と組み合わせて、強い役を作っていません。ペアもストレートもフラッシュもありません。相手（Player 4）はベットせずチェックしたので、こちらもリスクを冒さずに次のカード（ターン）を見るのが最善です。これを「チェック」と言います。ポット（賭けられたチップの総額）は150で、コール（相手のベット額と同額を賭けること）の必要はありません。"
}
2025-10-31 18:57:08,535 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）で、あなたの手札（10♦, 9♠）は、コミュニティカード（2♣, 7♥, 3♥）と組み合わせて、強い役を作っていません。ペアもストレートもフラッシュもありません。相手（Player 4）はベットせずチェックしたので、こちらもリスクを冒さずに次のカード（ターン）を見るのが最善です。これを「チェック」と言います。ポット（賭けられたチップの総額）は150で、コール（相手のベット額と同額を賭けること）の必要はありません。'}
2025-10-31 18:57:08,535 - poker_game - DEBUG - [Agent1] Extracted values - action: 'check', amount: 0
2025-10-31 18:57:08,535 - poker_game - DEBUG - [Agent1] Action 'check' normalized - amount set to 0
2025-10-31 18:57:08,535 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:57:08,535 - poker_game - INFO - [Agent1] Successfully parsed decision: check, 0, フロップ（最初の3枚のコミュニティカード）で、あなたの手札（10♦, 9♠）は、コミュニティカード（2♣, 7♥, 3♥）と組み合わせて、強い役を作っていません。ペアもストレートもフラッシュもありません。相手（Player 4）はベットせずチェックしたので、こちらもリスクを冒さずに次のカード（ターン）を見るのが最善です。これを「チェック」と言います。ポット（賭けられたチップの総額）は150で、コール（相手のベット額と同額を賭けること）の必要はありません。
2025-10-31 18:57:08,537 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'check' with amount 0
2025-10-31 18:57:08,537 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:57:08,538 - poker_game - INFO - Hand #17, Phase: flop
2025-10-31 18:57:08,538 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:57:08,538 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:57:08,539 - poker_game - INFO - Last raiser: None
2025-10-31 18:57:08,539 - poker_game - INFO - Betting round complete: False
2025-10-31 18:57:08,539 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:57:08,540 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥']
2025-10-31 18:57:08,540 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:57:08,540 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:57:08,541 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:57:08,541 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:57:08,542 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:57:08,542 - poker_game - INFO - ==================================================
2025-10-31 18:57:08,542 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:57:08,558 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:57:08,559 - poker_game - INFO - Hand #17, Phase: flop
2025-10-31 18:57:08,559 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:57:08,560 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:57:08,560 - poker_game - INFO - Last raiser: None
2025-10-31 18:57:08,561 - poker_game - INFO - Betting round complete: False
2025-10-31 18:57:08,561 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:57:08,561 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥']
2025-10-31 18:57:08,562 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:57:08,562 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:57:08,563 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:57:08,563 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:57:08,564 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:57:08,564 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:57:08,564 - poker_game - INFO - ==================================================
2025-10-31 18:57:08,565 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:57:08,565 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:57:08,566 - poker_game - DEBUG - Active players: [1, 4]
2025-10-31 18:57:08,566 - poker_game - INFO - Advanced from player 1 to player 4 (seat order)
2025-10-31 18:57:08,566 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:57:08,567 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:57:08,567 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:57:08,567 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:57:08,567 - poker_game - DEBUG - Active player indices: [1, 4]
2025-10-31 18:57:08,568 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:57:08,568 - poker_game - DEBUG - Current player index: 4
2025-10-31 18:57:08,569 - poker_game - DEBUG - First actor index: 4
2025-10-31 18:57:08,569 - poker_game - INFO - Betting complete: Back to first actor 4 (all players have acted)
2025-10-31 18:57:08,569 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:57:08,570 - poker_game - INFO - Hand #17, Phase: flop
2025-10-31 18:57:08,570 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:57:08,571 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:57:08,572 - poker_game - INFO - Last raiser: None
2025-10-31 18:57:08,572 - poker_game - INFO - Betting round complete: True
2025-10-31 18:57:08,572 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:57:08,573 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥']
2025-10-31 18:57:08,573 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:57:08,573 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:57:08,574 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:57:08,575 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:57:08,576 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:57:08,576 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:57:08,576 - poker_game - INFO - ==================================================
2025-10-31 18:57:08,678 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:57:08,678 - poker_game - INFO - Betting round complete: True
2025-10-31 18:57:08,679 - poker_game - INFO - Remaining players: 2
2025-10-31 18:57:08,679 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:57:08,679 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:57:08,680 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 18:57:08,691 - poker_game - INFO - Starting new betting round
2025-10-31 18:57:08,692 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:57:08,692 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:57:08,692 - poker_game - DEBUG - Active players for new betting round: [1, 4]
2025-10-31 18:57:08,693 - poker_game - DEBUG - Dealer button: 1
2025-10-31 18:57:08,693 - poker_game - INFO - First actor: Player 4 (by phase rule), was 4
2025-10-31 18:57:08,694 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:57:08,695 - poker_game - INFO - Hand #17, Phase: turn
2025-10-31 18:57:08,696 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:57:08,696 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:57:08,697 - poker_game - INFO - Last raiser: None
2025-10-31 18:57:08,697 - poker_game - INFO - Betting round complete: False
2025-10-31 18:57:08,698 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:57:08,698 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥']
2025-10-31 18:57:08,699 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:57:08,699 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:57:08,699 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:57:08,700 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:57:08,700 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:57:08,701 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 18:57:08,701 - poker_game - INFO - ==================================================
2025-10-31 18:57:08,702 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "turn",
  "your_cards": [
    "A♠",
    "8♥"
  ],
  "community": [
    "2♣",
    "7♥",
    "3♥",
    "6♥"
  ],
  "your_chips": 769,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 150,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1095,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6055,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (769)"
  ],
  "history": [
    "Player 0 called 180",
    "River dealt: 9♦",
    "Player 1 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠",
    "Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥",
    "Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 raised to 60",
    "Player 0 folded",
    "Player 1 called 40",
    "Flop dealt: 2♣, 7♥, 3♥",
    "Player 4 checked",
    "Player 1 checked",
    "Turn dealt: 6♥"
  ]
}
2025-10-31 18:57:08,713 - poker_game - DEBUG - Create Session: {'id': 'c45c5b30-36b6-4284-ba21-0cd6ad7938f3', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904628.7110167}
2025-10-31 18:57:18,894 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:57:28,869 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 18:57:38,741 - poker_game - INFO - Waiting for LLM API response for Agent4... 30 seconds elapsed
2025-10-31 18:57:40,304 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_SfvRnYkrDznKgMD5cOnFA1Y0', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1286, 'totalTokenCount': 1303}, 'invocationId': 'e-93cfab39-2621-4fc4-8060-96952a24ad6a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'yDqjAF8w', 'timestamp': 1761904628.725821}, {'content': {'parts': [{'functionResponse': {'id': 'call_SfvRnYkrDznKgMD5cOnFA1Y0', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-93cfab39-2621-4fc4-8060-96952a24ad6a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'NaOkihby', 'timestamp': 1761904629.675496}, {'content': {'parts': [{'functionCall': {'id': 'call_YIzZgOCFiwjJkD6yqmI6Gr3K', 'args': {'game_state': {'your_id': 4, 'phase': 'turn', 'your_cards': ['A♠', '8♥'], 'community': ['2♣', '7♥', '3♥', '6♥'], 'your_chips': 769, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 60, 'pot': 150, 'to_call': 0, 'dealer_button': 1, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1095, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 6055, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1931, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (769)'], 'history': ['Player 0 called 180', 'River dealt: 9♦', 'Player 1 checked', 'Player 0 checked', 'Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠', 'Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥', 'Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦', 'Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 called 20', 'Player 1 called 20', 'Player 3 folded', 'Player 4 raised to 60', 'Player 0 folded', 'Player 1 called 40', 'Flop dealt: 2♣, 7♥, 3♥', 'Player 4 checked', 'Player 1 checked', 'Turn dealt: 6♥']}, 'call_amount': 0, 'pot_after_call': 150, 'equity': 0.45}, 'name': 'action_decision'}}, {'functionCall': {'id': 'call_4J2O0WMg8kiQdFpJjOrbqGr2', 'args': {'game_state': {'your_id': 4, 'phase': 'turn', 'your_cards': ['A♠', '8♥'], 'community': ['2♣', '7♥', '3♥', '6♥'], 'your_chips': 769, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 60, 'pot': 150, 'to_call': 0, 'dealer_button': 1, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1095, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 6055, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1931, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (769)'], 'history': ['Player 0 called 180', 'River dealt: 9♦', 'Player 1 checked', 'Player 0 checked', 'Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠', 'Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥', 'Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦', 'Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 called 20', 'Player 1 called 20', 'Player 3 folded', 'Player 4 raised to 60', 'Player 0 folded', 'Player 1 called 40', 'Flop dealt: 2♣, 7♥, 3♥', 'Player 4 checked', 'Player 1 checked', 'Turn dealt: 6♥']}, 'call_amount': 0, 'pot_after_call': 150, 'equity': 0.45}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 998, 'promptTokenCount': 1810, 'totalTokenCount': 2808}, 'invocationId': 'e-93cfab39-2621-4fc4-8060-96952a24ad6a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'qbzcBVAM', 'timestamp': 1761904629.682467}, {'content': {'parts': [{'functionResponse': {'id': 'call_YIzZgOCFiwjJkD6yqmI6Gr3K', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（67.50(ポットに対して45.00%）ため、チェックします'}}}, {'functionResponse': {'id': 'call_4J2O0WMg8kiQdFpJjOrbqGr2', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（67.50(ポットに対して45.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'CkHWIpus', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Tj2WXzkt', 'timestamp': 1761904650.455211}, {'content': {'parts': [{'functionCall': {'id': 'call_oCYxtNkwCTuyazhikviaojSP', 'args': {'game_state': {'your_id': 4, 'phase': 'turn', 'your_cards': ['A♠', '8♥'], 'community': ['2♣', '7♥', '3♥', '6♥'], 'your_chips': 769, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 60, 'pot': 150, 'to_call': 0, 'dealer_button': 1, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1095, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 6055, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1931, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (769)'], 'history': ['Player 0 called 180', 'River dealt: 9♦', 'Player 1 checked', 'Player 0 checked', 'Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠', 'Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥', 'Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦', 'Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 called 20', 'Player 1 called 20', 'Player 3 folded', 'Player 4 raised to 60', 'Player 0 folded', 'Player 1 called 40', 'Flop dealt: 2♣, 7♥, 3♥', 'Player 4 checked', 'Player 1 checked', 'Turn dealt: 6♥']}, 'call_amount': 0, 'pot_after_call': 150, 'equity': 0.45}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 491, 'promptTokenCount': 3034, 'totalTokenCount': 3525}, 'invocationId': 'e-93cfab39-2621-4fc4-8060-96952a24ad6a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'PWSTseOx', 'timestamp': 1761904650.459846}, {'content': {'parts': [{'functionResponse': {'id': 'call_oCYxtNkwCTuyazhikviaojSP', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（67.50(ポットに対して45.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'e-93cfab39-2621-4fc4-8060-96952a24ad6a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'fYlRhIPx', 'timestamp': 1761904658.717903}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い（67.50(ポットに対して45.00%）ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 38, 'promptTokenCount': 3576, 'totalTokenCount': 3614}, 'invocationId': 'e-93cfab39-2621-4fc4-8060-96952a24ad6a', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'HfKjcNkN', 'timestamp': 1761904658.720041}]
2025-10-31 18:57:40,304 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:57:40,305 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い（67.50(ポットに対して45.00%）ため、チェックします"}
2025-10-31 18:57:40,305 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:57:40,305 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い（67.50(ポットに対して45.00%）ため、チェックします"}'
2025-10-31 18:57:40,306 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:57:40,306 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い（67.50(ポットに対して45.00%）ため、チェックします"}
2025-10-31 18:57:40,306 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（67.50(ポットに対して45.00%）ため、チェックします'}
2025-10-31 18:57:40,306 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 18:57:40,306 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 18:57:40,306 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:57:40,306 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い（67.50(ポットに対して45.00%）ため、チェックします
2025-10-31 18:57:40,307 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 18:57:40,307 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:57:40,307 - poker_game - INFO - Hand #17, Phase: turn
2025-10-31 18:57:40,308 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:57:40,308 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:57:40,308 - poker_game - INFO - Last raiser: None
2025-10-31 18:57:40,308 - poker_game - INFO - Betting round complete: False
2025-10-31 18:57:40,308 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:57:40,309 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥']
2025-10-31 18:57:40,309 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:57:40,309 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:57:40,309 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:57:40,309 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:57:40,310 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:57:40,310 - poker_game - INFO - ==================================================
2025-10-31 18:57:40,310 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 18:57:40,321 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:57:40,322 - poker_game - INFO - Hand #17, Phase: turn
2025-10-31 18:57:40,322 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:57:40,322 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:57:40,322 - poker_game - INFO - Last raiser: None
2025-10-31 18:57:40,323 - poker_game - INFO - Betting round complete: False
2025-10-31 18:57:40,323 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:57:40,323 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥']
2025-10-31 18:57:40,323 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:57:40,324 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:57:40,324 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:57:40,324 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:57:40,324 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:57:40,324 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 18:57:40,324 - poker_game - INFO - ==================================================
2025-10-31 18:57:40,324 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:57:40,325 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:57:40,325 - poker_game - DEBUG - Active players: [1, 4]
2025-10-31 18:57:40,325 - poker_game - INFO - Advanced from player 4 to player 1 (seat order)
2025-10-31 18:57:40,325 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:57:40,325 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:57:40,325 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:57:40,325 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:57:40,326 - poker_game - DEBUG - Active player indices: [1, 4]
2025-10-31 18:57:40,326 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:57:40,326 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:57:40,326 - poker_game - DEBUG - First actor index: 4
2025-10-31 18:57:40,326 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 4
2025-10-31 18:57:40,326 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:57:40,326 - poker_game - INFO - Hand #17, Phase: turn
2025-10-31 18:57:40,326 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:57:40,327 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:57:40,327 - poker_game - INFO - Last raiser: None
2025-10-31 18:57:40,327 - poker_game - INFO - Betting round complete: False
2025-10-31 18:57:40,327 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:57:40,327 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥']
2025-10-31 18:57:40,327 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:57:40,328 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:57:40,328 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:57:40,328 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:57:40,328 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:57:40,328 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:57:40,328 - poker_game - INFO - ==================================================
2025-10-31 18:57:40,430 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "turn",
  "your_cards": [
    "10♦",
    "9♠"
  ],
  "community": [
    "2♣",
    "7♥",
    "3♥",
    "6♥"
  ],
  "your_chips": 6055,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 150,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1095,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 769,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (6055)"
  ],
  "history": [
    "River dealt: 9♦",
    "Player 1 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠",
    "Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥",
    "Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 raised to 60",
    "Player 0 folded",
    "Player 1 called 40",
    "Flop dealt: 2♣, 7♥, 3♥",
    "Player 4 checked",
    "Player 1 checked",
    "Turn dealt: 6♥",
    "Player 4 checked"
  ]
}
2025-10-31 18:57:40,439 - poker_game - DEBUG - Create Session: {'id': '7bbf655b-53c9-406e-be8e-0c9327cbf987', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904660.4362612}
2025-10-31 18:57:43,091 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、フロップ（最初の3枚のコミュニティカード）とターン（4枚目のカード）で、あなたは何もベットしていません（your_bet_this_round = 0）。ポットには150チップがあります。対戦相手（Player 4）はベットしておらず、チェック（check）というアクションを選択しました。あなたの手札は10♦、9♠で、コミュニティカードは2♣、7♥、3♥、6♥です。この組み合わせで、あなたはストレート（straight）やフラッシュ（flush）といった強い役を作ることはできません。しかし、対戦相手がベットしておらず、コール（call）する必要のある金額が0（to_call = 0）なので、チェック（check）をして次のカード（リバー）を見るのが最善です。もし対戦相手がベットしてきた場合は、あなたの手札の強さとポットオッズ（pot odds - ポットの大きさに対するベット額の比率）を考慮してコールするかフォールド（fold - 降りる）するかを判断します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 253, 'promptTokenCount': 969, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 969}], 'totalTokenCount': 1222}, 'invocationId': 'e-20ffb67c-8b87-4538-aafd-2e2424a7184f', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'q4Mrq7La', 'timestamp': 1761904660.450528}]
2025-10-31 18:57:43,092 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:57:43,092 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "現在の状況では、フロップ（最初の3枚のコミュニティカード）とターン（4枚目のカード）で、あなたは何もベットしていません（your_bet_this_round = 0）。ポットには150チップがあります。対戦相手（Player 4）はベットしておらず、チェック（check）というアクションを選択しました。あなたの手札は10♦、9♠で、コミュニティカードは2♣、7♥、3♥、6♥です。この組み合わせで、あなたはストレート（straight）やフラッシュ（flush）といった強い役を作ることはできません。しかし、対戦相手がベットしておらず、コール（call）する必要のある金額が0（to_call = 0）なので、チェック（check）をして次のカード（リバー）を見るのが最善です。もし対戦相手がベットしてきた場合は、あなたの手札の強さとポットオッズ（pot odds - ポットの大きさに対するベット額の比率）を考慮してコールするかフォールド（fold - 降りる）するかを判断します。"
}
```
2025-10-31 18:57:43,093 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:57:43,093 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、フロップ（最初の3枚のコミュニティカード）とターン（4枚目のカード）で、あなたは何もベットしていません（your_bet_this_round = 0）。ポットには150チップがあります。対戦相手（Player 4）はベットしておらず、チェック（check）というアクションを選択しました。あなたの手札は10♦、9♠で、コミュニティカードは2♣、7♥、3♥、6♥です。この組み合わせで、あなたはストレート（straight）やフラッシュ（flush）といった強い役を作ることはできません。しかし、対戦相手がベットしておらず、コール（call）する必要のある金額が0（to_call = 0）なので、チェック（check）をして次のカード（リバー）を見るのが最善です。もし対戦相手がベットしてきた場合は、あなたの手札の強さとポットオッズ（pot odds - ポットの大きさに対するベット額の比率）を考慮してコールするかフォールド（fold - 降りる）するかを判断します。"\n}\n```'
2025-10-31 18:57:43,093 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:57:43,094 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、フロップ（最初の3枚のコミュニティカード）とターン（4枚目のカード）で、あなたは何もベットしていません（your_bet_this_round = 0）。ポットには150チップがあります。対戦相手（Player 4）はベットしておらず、チェック（check）というアクションを選択しました。あなたの手札は10♦、9♠で、コミュニティカードは2♣、7♥、3♥、6♥です。この組み合わせで、あなたはストレート（straight）やフラッシュ（flush）といった強い役を作ることはできません。しかし、対戦相手がベットしておらず、コール（call）する必要のある金額が0（to_call = 0）なので、チェック（check）をして次のカード（リバー）を見るのが最善です。もし対戦相手がベットしてきた場合は、あなたの手札の強さとポットオッズ（pot odds - ポットの大きさに対するベット額の比率）を考慮してコールするかフォールド（fold - 降りる）するかを判断します。"\n}'
2025-10-31 18:57:43,094 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "現在の状況では、フロップ（最初の3枚のコミュニティカード）とターン（4枚目のカード）で、あなたは何もベットしていません（your_bet_this_round = 0）。ポットには150チップがあります。対戦相手（Player 4）はベットしておらず、チェック（check）というアクションを選択しました。あなたの手札は10♦、9♠で、コミュニティカードは2♣、7♥、3♥、6♥です。この組み合わせで、あなたはストレート（straight）やフラッシュ（flush）といった強い役を作ることはできません。しかし、対戦相手がベットしておらず、コール（call）する必要のある金額が0（to_call = 0）なので、チェック（check）をして次のカード（リバー）を見るのが最善です。もし対戦相手がベットしてきた場合は、あなたの手札の強さとポットオッズ（pot odds - ポットの大きさに対するベット額の比率）を考慮してコールするかフォールド（fold - 降りる）するかを判断します。"
}
2025-10-31 18:57:43,094 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': '現在の状況では、フロップ（最初の3枚のコミュニティカード）とターン（4枚目のカード）で、あなたは何もベットしていません（your_bet_this_round = 0）。ポットには150チップがあります。対戦相手（Player 4）はベットしておらず、チェック（check）というアクションを選択しました。あなたの手札は10♦、9♠で、コミュニティカードは2♣、7♥、3♥、6♥です。この組み合わせで、あなたはストレート（straight）やフラッシュ（flush）といった強い役を作ることはできません。しかし、対戦相手がベットしておらず、コール（call）する必要のある金額が0（to_call = 0）なので、チェック（check）をして次のカード（リバー）を見るのが最善です。もし対戦相手がベットしてきた場合は、あなたの手札の強さとポットオッズ（pot odds - ポットの大きさに対するベット額の比率）を考慮してコールするかフォールド（fold - 降りる）するかを判断します。'}
2025-10-31 18:57:43,094 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 0
2025-10-31 18:57:43,094 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (6055)']
2025-10-31 18:57:43,094 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:57:43,094 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 0, 現在の状況では、フロップ（最初の3枚のコミュニティカード）とターン（4枚目のカード）で、あなたは何もベットしていません（your_bet_this_round = 0）。ポットには150チップがあります。対戦相手（Player 4）はベットしておらず、チェック（check）というアクションを選択しました。あなたの手札は10♦、9♠で、コミュニティカードは2♣、7♥、3♥、6♥です。この組み合わせで、あなたはストレート（straight）やフラッシュ（flush）といった強い役を作ることはできません。しかし、対戦相手がベットしておらず、コール（call）する必要のある金額が0（to_call = 0）なので、チェック（check）をして次のカード（リバー）を見るのが最善です。もし対戦相手がベットしてきた場合は、あなたの手札の強さとポットオッズ（pot odds - ポットの大きさに対するベット額の比率）を考慮してコールするかフォールド（fold - 降りる）するかを判断します。
2025-10-31 18:57:43,095 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 0
2025-10-31 18:57:43,096 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:57:43,096 - poker_game - INFO - Hand #17, Phase: turn
2025-10-31 18:57:43,097 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:57:43,097 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:57:43,097 - poker_game - INFO - Last raiser: None
2025-10-31 18:57:43,098 - poker_game - INFO - Betting round complete: False
2025-10-31 18:57:43,098 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:57:43,099 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥']
2025-10-31 18:57:43,099 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:57:43,099 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:57:43,100 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:57:43,100 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:57:43,101 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:57:43,101 - poker_game - INFO - ==================================================
2025-10-31 18:57:43,102 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:57:43,117 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:57:43,118 - poker_game - INFO - Hand #17, Phase: turn
2025-10-31 18:57:43,118 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:57:43,119 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:57:43,119 - poker_game - INFO - Last raiser: None
2025-10-31 18:57:43,120 - poker_game - INFO - Betting round complete: False
2025-10-31 18:57:43,120 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:57:43,121 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥']
2025-10-31 18:57:43,121 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:57:43,121 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:57:43,122 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:57:43,122 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:57:43,123 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:57:43,124 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:57:43,125 - poker_game - INFO - ==================================================
2025-10-31 18:57:43,126 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:57:43,127 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:57:43,127 - poker_game - DEBUG - Active players: [1, 4]
2025-10-31 18:57:43,128 - poker_game - INFO - Advanced from player 1 to player 4 (seat order)
2025-10-31 18:57:43,129 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:57:43,129 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:57:43,129 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:57:43,129 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:57:43,129 - poker_game - DEBUG - Active player indices: [1, 4]
2025-10-31 18:57:43,129 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:57:43,130 - poker_game - DEBUG - Current player index: 4
2025-10-31 18:57:43,130 - poker_game - DEBUG - First actor index: 4
2025-10-31 18:57:43,130 - poker_game - INFO - Betting complete: Back to first actor 4 (all players have acted)
2025-10-31 18:57:43,130 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:57:43,131 - poker_game - INFO - Hand #17, Phase: turn
2025-10-31 18:57:43,131 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:57:43,132 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:57:43,132 - poker_game - INFO - Last raiser: None
2025-10-31 18:57:43,133 - poker_game - INFO - Betting round complete: True
2025-10-31 18:57:43,133 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:57:43,134 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥']
2025-10-31 18:57:43,135 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:57:43,135 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:57:43,136 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:57:43,136 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:57:43,136 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:57:43,137 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:57:43,137 - poker_game - INFO - ==================================================
2025-10-31 18:57:43,239 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 18:57:43,240 - poker_game - INFO - Betting round complete: True
2025-10-31 18:57:43,240 - poker_game - INFO - Remaining players: 2
2025-10-31 18:57:43,241 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:57:43,241 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:57:43,241 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 18:57:43,253 - poker_game - INFO - Starting new betting round
2025-10-31 18:57:43,254 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:57:43,254 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:57:43,254 - poker_game - DEBUG - Active players for new betting round: [1, 4]
2025-10-31 18:57:43,255 - poker_game - DEBUG - Dealer button: 1
2025-10-31 18:57:43,255 - poker_game - INFO - First actor: Player 4 (by phase rule), was 4
2025-10-31 18:57:43,255 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:57:43,256 - poker_game - INFO - Hand #17, Phase: river
2025-10-31 18:57:43,257 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:57:43,258 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:57:43,258 - poker_game - INFO - Last raiser: None
2025-10-31 18:57:43,259 - poker_game - INFO - Betting round complete: False
2025-10-31 18:57:43,259 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:57:43,260 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥', 'Q♥']
2025-10-31 18:57:43,260 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:57:43,260 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:57:43,260 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:57:43,261 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:57:43,261 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:57:43,261 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 18:57:43,262 - poker_game - INFO - ==================================================
2025-10-31 18:57:43,262 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "river",
  "your_cards": [
    "A♠",
    "8♥"
  ],
  "community": [
    "2♣",
    "7♥",
    "3♥",
    "6♥",
    "Q♥"
  ],
  "your_chips": 769,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 150,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1095,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6055,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (769)"
  ],
  "history": [
    "Player 0 checked",
    "Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠",
    "Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥",
    "Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 raised to 60",
    "Player 0 folded",
    "Player 1 called 40",
    "Flop dealt: 2♣, 7♥, 3♥",
    "Player 4 checked",
    "Player 1 checked",
    "Turn dealt: 6♥",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: Q♥"
  ]
}
2025-10-31 18:57:43,407 - poker_game - DEBUG - Create Session: {'id': '141c6195-fcea-460e-b784-a813a130b778', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904663.4043057}
2025-10-31 18:57:53,543 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:58:05,104 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 18:58:07,080 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_qpXEHygYtPIpLoTKIF0JuvxU', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1288, 'totalTokenCount': 1305}, 'invocationId': 'e-de090481-85dd-4d2c-a246-559209a52c3b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'Vf3GCtM2', 'timestamp': 1761904663.421412}, {'content': {'parts': [{'functionResponse': {'id': 'call_qpXEHygYtPIpLoTKIF0JuvxU', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-de090481-85dd-4d2c-a246-559209a52c3b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '7OEnaX78', 'timestamp': 1761904664.616321}, {'content': {'parts': [{'functionCall': {'id': 'call_VmhtvCEex8rOl3mjppYzQN7j', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1812, 'totalTokenCount': 1832}, 'invocationId': 'e-de090481-85dd-4d2c-a246-559209a52c3b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'Sqci6pWg', 'timestamp': 1761904664.620466}, {'content': {'parts': [{'functionResponse': {'id': 'call_VmhtvCEex8rOl3mjppYzQN7j', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-de090481-85dd-4d2c-a246-559209a52c3b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'bpF2JBIk', 'timestamp': 1761904666.011466}, {'content': {'parts': [{'functionCall': {'id': 'call_WVMU7EGWhE056p3lb76JpaZQ', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1374, 'totalTokenCount': 1391}, 'invocationId': 'e-de090481-85dd-4d2c-a246-559209a52c3b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'eOSWBDm6', 'timestamp': 1761904666.019395}, {'content': {'parts': [{'functionResponse': {'id': 'call_WVMU7EGWhE056p3lb76JpaZQ', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-de090481-85dd-4d2c-a246-559209a52c3b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'wJOguunC', 'timestamp': 1761904667.065462}, {'content': {'parts': [{'functionCall': {'id': 'call_DKtjgJDMDfz0UMCIhjco3DLI', 'args': {'game_state': {'your_id': 4, 'phase': 'river', 'your_cards': ['A♠', '8♥'], 'community': ['2♣', '7♥', '3♥', '6♥', 'Q♥'], 'your_chips': 769, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 60, 'pot': 150, 'to_call': 0, 'dealer_button': 1, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1095, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 6055, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1931, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (769)'], 'history': ['Player 0 checked', 'Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠', 'Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥', 'Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦', 'Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 called 20', 'Player 1 called 20', 'Player 3 folded', 'Player 4 raised to 60', 'Player 0 folded', 'Player 1 called 40', 'Flop dealt: 2♣, 7♥, 3♥', 'Player 4 checked', 'Player 1 checked', 'Turn dealt: 6♥', 'Player 4 checked', 'Player 1 checked', 'River dealt: Q♥']}, 'call_amount': 0, 'pot_after_call': 150, 'equity': 0.3}, 'name': 'action_decision'}}, {'functionCall': {'id': 'call_suCa9cQOTLrl7tSO8mcpgVuw', 'args': {'game_state': {'your_id': 4, 'phase': 'river', 'your_cards': ['A♠', '8♥'], 'community': ['2♣', '7♥', '3♥', '6♥', 'Q♥'], 'your_chips': 769, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 60, 'pot': 150, 'to_call': 0, 'dealer_button': 1, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1095, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 6055, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1931, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (769)'], 'history': ['Player 0 checked', 'Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠', 'Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥', 'Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦', 'Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 called 20', 'Player 1 called 20', 'Player 3 folded', 'Player 4 raised to 60', 'Player 0 folded', 'Player 1 called 40', 'Flop dealt: 2♣, 7♥, 3♥', 'Player 4 checked', 'Player 1 checked', 'Turn dealt: 6♥', 'Player 4 checked', 'Player 1 checked', 'River dealt: Q♥']}, 'call_amount': 0, 'pot_after_call': 150, 'equity': 0.3}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 998, 'promptTokenCount': 1904, 'totalTokenCount': 2902}, 'invocationId': 'e-de090481-85dd-4d2c-a246-559209a52c3b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'h8Cwuayr', 'timestamp': 1761904667.076098}, {'content': {'parts': [{'functionResponse': {'id': 'call_DKtjgJDMDfz0UMCIhjco3DLI', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（45.00(ポットに対して30.00%）ため、チェックします'}}}, {'functionResponse': {'id': 'call_suCa9cQOTLrl7tSO8mcpgVuw', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（45.00(ポットに対して30.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'FsWM5mmH', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '0IB1e3ck', 'timestamp': 1761904685.579434}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い(45.00(ポットに対して30.00%)ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 37, 'promptTokenCount': 3128, 'totalTokenCount': 3165}, 'invocationId': 'e-de090481-85dd-4d2c-a246-559209a52c3b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'b1V6mRVw', 'timestamp': 1761904685.582254}]
2025-10-31 18:58:07,081 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:58:07,081 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い(45.00(ポットに対して30.00%)ため、チェックします"}
2025-10-31 18:58:07,082 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:58:07,083 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い(45.00(ポットに対して30.00%)ため、チェックします"}'
2025-10-31 18:58:07,083 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:58:07,083 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い(45.00(ポットに対して30.00%)ため、チェックします"}
2025-10-31 18:58:07,083 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い(45.00(ポットに対して30.00%)ため、チェックします'}
2025-10-31 18:58:07,083 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 18:58:07,083 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 18:58:07,083 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:58:07,083 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い(45.00(ポットに対して30.00%)ため、チェックします
2025-10-31 18:58:07,085 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 18:58:07,085 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:58:07,085 - poker_game - INFO - Hand #17, Phase: river
2025-10-31 18:58:07,087 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:58:07,088 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:58:07,091 - poker_game - INFO - Last raiser: None
2025-10-31 18:58:07,093 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:07,094 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:07,094 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥', 'Q♥']
2025-10-31 18:58:07,095 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:58:07,095 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:58:07,096 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:07,096 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:07,097 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:58:07,097 - poker_game - INFO - ==================================================
2025-10-31 18:58:07,097 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 18:58:07,110 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:58:07,111 - poker_game - INFO - Hand #17, Phase: river
2025-10-31 18:58:07,111 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:58:07,112 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:58:07,112 - poker_game - INFO - Last raiser: None
2025-10-31 18:58:07,113 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:07,113 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:07,113 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥', 'Q♥']
2025-10-31 18:58:07,114 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:58:07,114 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:58:07,115 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:07,115 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:07,115 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:58:07,116 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 18:58:07,117 - poker_game - INFO - ==================================================
2025-10-31 18:58:07,119 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:58:07,119 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:58:07,120 - poker_game - DEBUG - Active players: [1, 4]
2025-10-31 18:58:07,121 - poker_game - INFO - Advanced from player 4 to player 1 (seat order)
2025-10-31 18:58:07,121 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:58:07,122 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:58:07,122 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:58:07,122 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:58:07,122 - poker_game - DEBUG - Active player indices: [1, 4]
2025-10-31 18:58:07,123 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:58:07,123 - poker_game - DEBUG - Current player index: 1
2025-10-31 18:58:07,123 - poker_game - DEBUG - First actor index: 4
2025-10-31 18:58:07,123 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 4
2025-10-31 18:58:07,123 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:58:07,124 - poker_game - INFO - Hand #17, Phase: river
2025-10-31 18:58:07,124 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:58:07,125 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:58:07,125 - poker_game - INFO - Last raiser: None
2025-10-31 18:58:07,125 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:07,126 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:07,126 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥', 'Q♥']
2025-10-31 18:58:07,126 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:58:07,127 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:58:07,127 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:07,127 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:07,127 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:58:07,128 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:58:07,128 - poker_game - INFO - ==================================================
2025-10-31 18:58:07,229 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "river",
  "your_cards": [
    "10♦",
    "9♠"
  ],
  "community": [
    "2♣",
    "7♥",
    "3♥",
    "6♥",
    "Q♥"
  ],
  "your_chips": 6055,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 150,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1095,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 769,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (6055)"
  ],
  "history": [
    "Showdown: Player 0 hand=One Pair: 9s - K♠, Q♠, 10♦, 9♣, 9♦ cards=K♠, Q♠",
    "Showdown: Player 1 hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦ cards=K♥, 4♥",
    "Side pot layer 0: amount=60, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Side pot layer 1: amount=480, winners=1 best_hand=Two Pair: 9s and 4s - K♥, 9♣, 9♦, 4♥, 4♦",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 called 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 raised to 60",
    "Player 0 folded",
    "Player 1 called 40",
    "Flop dealt: 2♣, 7♥, 3♥",
    "Player 4 checked",
    "Player 1 checked",
    "Turn dealt: 6♥",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: Q♥",
    "Player 4 checked"
  ]
}
2025-10-31 18:58:07,240 - poker_game - DEBUG - Create Session: {'id': 'dc3175fb-3f51-4b37-9960-f1258f6395b8', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904687.238124}
2025-10-31 18:58:09,352 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ターン）で、コミュニティカードにはハートが4枚（7♥, 3♥, 6♥, Q♥）あります。私はハートのカードを持っていませんが、相手（プレイヤー4）もチェックしているので、おそらく強いハートの役（フラッシュ）は持っていないと考えられます。私の手札（10♦, 9♠）では、ペアすらできていないため、これ以上のベットはリスクが高いです。相手もチェックしているので、こちらもチェックしてショーダウン（カードを開いて勝者を決めること）に進むのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 151, 'promptTokenCount': 974, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 974}], 'totalTokenCount': 1125}, 'invocationId': 'e-d2e619e6-eec2-45b5-9c51-ef47e9a8a3b2', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'DKkvm56c', 'timestamp': 1761904687.253952}]
2025-10-31 18:58:09,353 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:58:09,353 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ターン）で、コミュニティカードにはハートが4枚（7♥, 3♥, 6♥, Q♥）あります。私はハートのカードを持っていませんが、相手（プレイヤー4）もチェックしているので、おそらく強いハートの役（フラッシュ）は持っていないと考えられます。私の手札（10♦, 9♠）では、ペアすらできていないため、これ以上のベットはリスクが高いです。相手もチェックしているので、こちらもチェックしてショーダウン（カードを開いて勝者を決めること）に進むのが最善です。"
}
```
2025-10-31 18:58:09,354 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:58:09,354 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ターン）で、コミュニティカードにはハートが4枚（7♥, 3♥, 6♥, Q♥）あります。私はハートのカードを持っていませんが、相手（プレイヤー4）もチェックしているので、おそらく強いハートの役（フラッシュ）は持っていないと考えられます。私の手札（10♦, 9♠）では、ペアすらできていないため、これ以上のベットはリスクが高いです。相手もチェックしているので、こちらもチェックしてショーダウン（カードを開いて勝者を決めること）に進むのが最善です。"\n}\n```'
2025-10-31 18:58:09,354 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:58:09,354 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ターン）で、コミュニティカードにはハートが4枚（7♥, 3♥, 6♥, Q♥）あります。私はハートのカードを持っていませんが、相手（プレイヤー4）もチェックしているので、おそらく強いハートの役（フラッシュ）は持っていないと考えられます。私の手札（10♦, 9♠）では、ペアすらできていないため、これ以上のベットはリスクが高いです。相手もチェックしているので、こちらもチェックしてショーダウン（カードを開いて勝者を決めること）に進むのが最善です。"\n}'
2025-10-31 18:58:09,355 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ターン）で、コミュニティカードにはハートが4枚（7♥, 3♥, 6♥, Q♥）あります。私はハートのカードを持っていませんが、相手（プレイヤー4）もチェックしているので、おそらく強いハートの役（フラッシュ）は持っていないと考えられます。私の手札（10♦, 9♠）では、ペアすらできていないため、これ以上のベットはリスクが高いです。相手もチェックしているので、こちらもチェックしてショーダウン（カードを開いて勝者を決めること）に進むのが最善です。"
}
2025-10-31 18:58:09,355 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最終ターン）で、コミュニティカードにはハートが4枚（7♥, 3♥, 6♥, Q♥）あります。私はハートのカードを持っていませんが、相手（プレイヤー4）もチェックしているので、おそらく強いハートの役（フラッシュ）は持っていないと考えられます。私の手札（10♦, 9♠）では、ペアすらできていないため、これ以上のベットはリスクが高いです。相手もチェックしているので、こちらもチェックしてショーダウン（カードを開いて勝者を決めること）に進むのが最善です。'}
2025-10-31 18:58:09,355 - poker_game - DEBUG - [Agent1] Extracted values - action: 'check', amount: 0
2025-10-31 18:58:09,355 - poker_game - DEBUG - [Agent1] Action 'check' normalized - amount set to 0
2025-10-31 18:58:09,355 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 18:58:09,356 - poker_game - INFO - [Agent1] Successfully parsed decision: check, 0, リバー（最終ターン）で、コミュニティカードにはハートが4枚（7♥, 3♥, 6♥, Q♥）あります。私はハートのカードを持っていませんが、相手（プレイヤー4）もチェックしているので、おそらく強いハートの役（フラッシュ）は持っていないと考えられます。私の手札（10♦, 9♠）では、ペアすらできていないため、これ以上のベットはリスクが高いです。相手もチェックしているので、こちらもチェックしてショーダウン（カードを開いて勝者を決めること）に進むのが最善です。
2025-10-31 18:58:09,361 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'check' with amount 0
2025-10-31 18:58:09,362 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:58:09,363 - poker_game - INFO - Hand #17, Phase: river
2025-10-31 18:58:09,363 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:58:09,364 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:58:09,364 - poker_game - INFO - Last raiser: None
2025-10-31 18:58:09,364 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:09,365 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:09,365 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥', 'Q♥']
2025-10-31 18:58:09,365 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:58:09,366 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:58:09,366 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:09,367 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:09,367 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:58:09,367 - poker_game - INFO - ==================================================
2025-10-31 18:58:09,367 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 18:58:09,381 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:58:09,382 - poker_game - INFO - Hand #17, Phase: river
2025-10-31 18:58:09,383 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 18:58:09,383 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:58:09,384 - poker_game - INFO - Last raiser: None
2025-10-31 18:58:09,384 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:09,385 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:09,385 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥', 'Q♥']
2025-10-31 18:58:09,385 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:58:09,386 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:58:09,386 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:09,387 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:09,387 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:58:09,388 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 18:58:09,388 - poker_game - INFO - ==================================================
2025-10-31 18:58:09,388 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:58:09,389 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:58:09,389 - poker_game - DEBUG - Active players: [1, 4]
2025-10-31 18:58:09,389 - poker_game - INFO - Advanced from player 1 to player 4 (seat order)
2025-10-31 18:58:09,390 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:58:09,390 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:58:09,390 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:58:09,390 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 18:58:09,390 - poker_game - DEBUG - Active player indices: [1, 4]
2025-10-31 18:58:09,391 - poker_game - DEBUG - Last raiser index: None
2025-10-31 18:58:09,391 - poker_game - DEBUG - Current player index: 4
2025-10-31 18:58:09,391 - poker_game - DEBUG - First actor index: 4
2025-10-31 18:58:09,391 - poker_game - INFO - Betting complete: Back to first actor 4 (all players have acted)
2025-10-31 18:58:09,392 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:58:09,392 - poker_game - INFO - Hand #17, Phase: river
2025-10-31 18:58:09,392 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:58:09,393 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:58:09,393 - poker_game - INFO - Last raiser: None
2025-10-31 18:58:09,393 - poker_game - INFO - Betting round complete: True
2025-10-31 18:58:09,394 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:09,394 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥', 'Q♥']
2025-10-31 18:58:09,395 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:58:09,395 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:58:09,395 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:09,396 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:09,396 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:58:09,397 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:58:09,397 - poker_game - INFO - ==================================================
2025-10-31 18:58:09,499 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 18:58:09,499 - poker_game - INFO - Betting round complete: True
2025-10-31 18:58:09,500 - poker_game - INFO - Remaining players: 2
2025-10-31 18:58:09,500 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 18:58:09,500 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:58:09,501 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 18:58:09,501 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 18:58:09,501 - poker_game - INFO - Hand #17, Phase: showdown
2025-10-31 18:58:09,502 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 18:58:09,502 - poker_game - INFO - Pot: 150, Current bet: 0
2025-10-31 18:58:09,503 - poker_game - INFO - Last raiser: None
2025-10-31 18:58:09,503 - poker_game - INFO - Betting round complete: True
2025-10-31 18:58:09,504 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:09,504 - poker_game - INFO - Community cards: ['2♣', '7♥', '3♥', '6♥', 'Q♥']
2025-10-31 18:58:09,505 - poker_game - INFO -   P0(Agent0): chips=1095, bet=0, status=folded
2025-10-31 18:58:09,505 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:58:09,505 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:09,506 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:09,506 - poker_game - INFO -   P4(Agent4): chips=769, bet=0, status=active
2025-10-31 18:58:09,507 - poker_game - INFO - ==================================================
2025-10-31 18:58:09,507 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 18:58:09,508 - poker_game - INFO - Pot: 150, Community cards: ['2♣', '7♥', '3♥', '6♥', 'Q♥']
2025-10-31 18:58:09,508 - poker_game - INFO -   Player 1 status=active cards=['10♦', '9♠']
2025-10-31 18:58:09,509 - poker_game - INFO -   Player 4 status=active cards=['A♠', '8♥']
2025-10-31 18:58:09,512 - poker_game - INFO -   Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=['10♦', '9♠']
2025-10-31 18:58:09,512 - poker_game - INFO -   Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=['A♠', '8♥']
2025-10-31 18:58:09,513 - poker_game - INFO - Pot layer 0: amount=40, contributors=[0, 1, 3, 4]
2025-10-31 18:58:09,514 - poker_game - INFO - Pot layer 1: amount=30, contributors=[0, 1, 4]
2025-10-31 18:58:09,515 - poker_game - INFO - Pot layer 2: amount=80, contributors=[1, 4]
2025-10-31 18:58:09,516 - poker_game - INFO - Showdown total awarded: 150 (game.pot=150)
2025-10-31 18:58:09,516 - poker_game - INFO - Showdown winners (aggregated): [4]
2025-10-31 18:58:09,517 - poker_game - INFO -   Awarded 150 to Player 4 (hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥)
2025-10-31 18:58:09,519 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 18:58:09,552 - poker_game - INFO - === STARTING NEW HAND #18 ===
2025-10-31 18:58:09,553 - poker_game - INFO - Active players for new hand: 4
2025-10-31 18:58:09,553 - poker_game - INFO - Moving dealer button
2025-10-31 18:58:09,554 - poker_game - INFO - Posting blinds
2025-10-31 18:58:09,578 - poker_game - INFO - Dealing hole cards
2025-10-31 18:58:09,578 - poker_game - INFO - Setting first actor for preflop
2025-10-31 18:58:09,588 - poker_game - INFO - Started new hand in database: hand_id=18
2025-10-31 18:58:09,589 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 18:58:09,589 - poker_game - INFO - Hand #18, Phase: preflop
2025-10-31 18:58:09,590 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:58:09,590 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:58:09,591 - poker_game - INFO - Last raiser: 0
2025-10-31 18:58:09,592 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:09,592 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:58:09,593 - poker_game - INFO - Community cards: []
2025-10-31 18:58:09,593 - poker_game - INFO -   P0(Agent0): chips=1075, bet=20, status=active
2025-10-31 18:58:09,594 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:58:09,595 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:09,595 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=active
2025-10-31 18:58:09,596 - poker_game - INFO -   P4(Agent4): chips=909, bet=10, status=active
2025-10-31 18:58:09,596 - poker_game - INFO - ==================================================
2025-10-31 18:58:09,597 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "2♥",
    "7♣"
  ],
  "community": [],
  "your_chips": 6055,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 1075,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 909,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (6055)"
  ],
  "history": [
    "Player 3 folded",
    "Player 4 raised to 60",
    "Player 0 folded",
    "Player 1 called 40",
    "Flop dealt: 2♣, 7♥, 3♥",
    "Player 4 checked",
    "Player 1 checked",
    "Turn dealt: 6♥",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: Q♥",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠",
    "Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥",
    "Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20"
  ]
}
2025-10-31 18:58:09,609 - poker_game - DEBUG - Create Session: {'id': '8d3faf38-4c88-4483-9c33-134d478fbc42', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904689.6058176}
2025-10-31 18:58:11,116 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで2と7のオフスート（同じスーツでない）は非常に弱いハンドであり、レイズに対してコールするのは不利です。ポットサイズは小さいですが、このハンドで勝つ可能性は低いです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 77, 'promptTokenCount': 967, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 967}], 'totalTokenCount': 1044}, 'invocationId': 'e-15095a84-9000-4dd8-b933-2d8ec3f3f6d3', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'MAI4BtVY', 'timestamp': 1761904689.6231}]
2025-10-31 18:58:11,117 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 18:58:11,117 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで2と7のオフスート（同じスーツでない）は非常に弱いハンドであり、レイズに対してコールするのは不利です。ポットサイズは小さいですが、このハンドで勝つ可能性は低いです。"
}
```
2025-10-31 18:58:11,118 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 18:58:11,118 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで2と7のオフスート（同じスーツでない）は非常に弱いハンドであり、レイズに対してコールするのは不利です。ポットサイズは小さいですが、このハンドで勝つ可能性は低いです。"\n}\n```'
2025-10-31 18:58:11,118 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 18:58:11,118 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで2と7のオフスート（同じスーツでない）は非常に弱いハンドであり、レイズに対してコールするのは不利です。ポットサイズは小さいですが、このハンドで勝つ可能性は低いです。"\n}'
2025-10-31 18:58:11,119 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで2と7のオフスート（同じスーツでない）は非常に弱いハンドであり、レイズに対してコールするのは不利です。ポットサイズは小さいですが、このハンドで勝つ可能性は低いです。"
}
2025-10-31 18:58:11,119 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップで2と7のオフスート（同じスーツでない）は非常に弱いハンドであり、レイズに対してコールするのは不利です。ポットサイズは小さいですが、このハンドで勝つ可能性は低いです。'}
2025-10-31 18:58:11,119 - poker_game - DEBUG - [Agent1] Extracted values - action: 'fold', amount: 0
2025-10-31 18:58:11,119 - poker_game - DEBUG - [Agent1] Action 'fold' normalized - amount set to 0
2025-10-31 18:58:11,119 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:58:11,120 - poker_game - INFO - [Agent1] Successfully parsed decision: fold, 0, プリフロップで2と7のオフスート（同じスーツでない）は非常に弱いハンドであり、レイズに対してコールするのは不利です。ポットサイズは小さいですが、このハンドで勝つ可能性は低いです。
2025-10-31 18:58:11,121 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'fold' with amount 0
2025-10-31 18:58:11,121 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:58:11,122 - poker_game - INFO - Hand #18, Phase: preflop
2025-10-31 18:58:11,122 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:58:11,123 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:58:11,123 - poker_game - INFO - Last raiser: 0
2025-10-31 18:58:11,123 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:11,124 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 18:58:11,124 - poker_game - INFO - Community cards: []
2025-10-31 18:58:11,125 - poker_game - INFO -   P0(Agent0): chips=1075, bet=20, status=active
2025-10-31 18:58:11,125 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 18:58:11,125 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:11,125 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=active
2025-10-31 18:58:11,125 - poker_game - INFO -   P4(Agent4): chips=909, bet=10, status=active
2025-10-31 18:58:11,125 - poker_game - INFO - ==================================================
2025-10-31 18:58:11,126 - poker_game - INFO - ACTION_EXECUTED: Player 1 folded
2025-10-31 18:58:11,137 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:58:11,137 - poker_game - INFO - Hand #18, Phase: preflop
2025-10-31 18:58:11,138 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 18:58:11,138 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:58:11,139 - poker_game - INFO - Last raiser: 0
2025-10-31 18:58:11,139 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:11,140 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:58:11,140 - poker_game - INFO - Community cards: []
2025-10-31 18:58:11,140 - poker_game - INFO -   P0(Agent0): chips=1075, bet=20, status=active
2025-10-31 18:58:11,141 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:11,141 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:11,142 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=active
2025-10-31 18:58:11,142 - poker_game - INFO -   P4(Agent4): chips=909, bet=10, status=active
2025-10-31 18:58:11,142 - poker_game - INFO - Extra: Action: Player 1 folded
2025-10-31 18:58:11,143 - poker_game - INFO - ==================================================
2025-10-31 18:58:11,143 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:58:11,144 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:58:11,144 - poker_game - DEBUG - Active players: [0, 3, 4]
2025-10-31 18:58:11,144 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 18:58:11,145 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:58:11,145 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:58:11,145 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 18:58:11,146 - poker_game - DEBUG - Player bets: [20, 0, 10], Current bet: 20, All same: False
2025-10-31 18:58:11,146 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:58:11,146 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:58:11,146 - poker_game - INFO - Hand #18, Phase: preflop
2025-10-31 18:58:11,147 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:58:11,147 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:58:11,148 - poker_game - INFO - Last raiser: 0
2025-10-31 18:58:11,148 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:11,148 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:58:11,149 - poker_game - INFO - Community cards: []
2025-10-31 18:58:11,149 - poker_game - INFO -   P0(Agent0): chips=1075, bet=20, status=active
2025-10-31 18:58:11,150 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:11,150 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:11,150 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=active
2025-10-31 18:58:11,151 - poker_game - INFO -   P4(Agent4): chips=909, bet=10, status=active
2025-10-31 18:58:11,152 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:58:11,153 - poker_game - INFO - ==================================================
2025-10-31 18:58:11,255 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "2♠",
    "6♦"
  ],
  "community": [],
  "your_chips": 1931,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 3,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 1075,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6055,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 909,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1931)"
  ],
  "history": [
    "Player 4 raised to 60",
    "Player 0 folded",
    "Player 1 called 40",
    "Flop dealt: 2♣, 7♥, 3♥",
    "Player 4 checked",
    "Player 1 checked",
    "Turn dealt: 6♥",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: Q♥",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠",
    "Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥",
    "Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 folded"
  ]
}
2025-10-31 18:58:11,269 - poker_game - DEBUG - Create Session: {'id': '78b5fc0d-25bc-4c9c-bc43-9e11c1b66445', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904691.2659132}
2025-10-31 18:58:12,687 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopで26オフスーツは非常に弱いハンドです。レイズ額も大きく、コールするにはリスクが高すぎます。フォールドが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 66, 'promptTokenCount': 967, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 967}], 'totalTokenCount': 1033}, 'invocationId': 'e-e8eca329-93bc-440e-9fae-c8c41669b4e5', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'DMMGwFgc', 'timestamp': 1761904691.279737}]
2025-10-31 18:58:12,687 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 18:58:12,688 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "Preflopで26オフスーツは非常に弱いハンドです。レイズ額も大きく、コールするにはリスクが高すぎます。フォールドが最善の選択です。"
}
```
2025-10-31 18:58:12,688 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 18:58:12,688 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopで26オフスーツは非常に弱いハンドです。レイズ額も大きく、コールするにはリスクが高すぎます。フォールドが最善の選択です。"\n}\n```'
2025-10-31 18:58:12,688 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 18:58:12,688 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopで26オフスーツは非常に弱いハンドです。レイズ額も大きく、コールするにはリスクが高すぎます。フォールドが最善の選択です。"\n}'
2025-10-31 18:58:12,689 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "Preflopで26オフスーツは非常に弱いハンドです。レイズ額も大きく、コールするにはリスクが高すぎます。フォールドが最善の選択です。"
}
2025-10-31 18:58:12,689 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'Preflopで26オフスーツは非常に弱いハンドです。レイズ額も大きく、コールするにはリスクが高すぎます。フォールドが最善の選択です。'}
2025-10-31 18:58:12,689 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 18:58:12,689 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 18:58:12,689 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 18:58:12,689 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, Preflopで26オフスーツは非常に弱いハンドです。レイズ額も大きく、コールするにはリスクが高すぎます。フォールドが最善の選択です。
2025-10-31 18:58:12,690 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 18:58:12,690 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:58:12,690 - poker_game - INFO - Hand #18, Phase: preflop
2025-10-31 18:58:12,690 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:58:12,691 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:58:12,691 - poker_game - INFO - Last raiser: 0
2025-10-31 18:58:12,691 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:12,691 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 18:58:12,691 - poker_game - INFO - Community cards: []
2025-10-31 18:58:12,692 - poker_game - INFO -   P0(Agent0): chips=1075, bet=20, status=active
2025-10-31 18:58:12,692 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:12,692 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:12,692 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=active
2025-10-31 18:58:12,692 - poker_game - INFO -   P4(Agent4): chips=909, bet=10, status=active
2025-10-31 18:58:12,692 - poker_game - INFO - ==================================================
2025-10-31 18:58:12,692 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 18:58:12,707 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:58:12,708 - poker_game - INFO - Hand #18, Phase: preflop
2025-10-31 18:58:12,708 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 18:58:12,708 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:58:12,709 - poker_game - INFO - Last raiser: 0
2025-10-31 18:58:12,710 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:12,710 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:12,711 - poker_game - INFO - Community cards: []
2025-10-31 18:58:12,711 - poker_game - INFO -   P0(Agent0): chips=1075, bet=20, status=active
2025-10-31 18:58:12,711 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:12,712 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:12,712 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:12,712 - poker_game - INFO -   P4(Agent4): chips=909, bet=10, status=active
2025-10-31 18:58:12,713 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 18:58:12,713 - poker_game - INFO - ==================================================
2025-10-31 18:58:12,713 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:58:12,713 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:58:12,713 - poker_game - DEBUG - Active players: [0, 4]
2025-10-31 18:58:12,714 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 18:58:12,714 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:58:12,714 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:58:12,714 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:58:12,714 - poker_game - DEBUG - Player bets: [20, 10], Current bet: 20, All same: False
2025-10-31 18:58:12,714 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:58:12,715 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:58:12,715 - poker_game - INFO - Hand #18, Phase: preflop
2025-10-31 18:58:12,715 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:58:12,715 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:58:12,715 - poker_game - INFO - Last raiser: 0
2025-10-31 18:58:12,715 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:12,716 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:12,716 - poker_game - INFO - Community cards: []
2025-10-31 18:58:12,716 - poker_game - INFO -   P0(Agent0): chips=1075, bet=20, status=active
2025-10-31 18:58:12,716 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:12,717 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:12,717 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:12,717 - poker_game - INFO -   P4(Agent4): chips=909, bet=10, status=active
2025-10-31 18:58:12,717 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:58:12,718 - poker_game - INFO - ==================================================
2025-10-31 18:58:12,819 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "6♣",
    "5♣"
  ],
  "community": [],
  "your_chips": 909,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 30,
  "to_call": 10,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1075,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6055,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (909)"
  ],
  "history": [
    "Player 0 folded",
    "Player 1 called 40",
    "Flop dealt: 2♣, 7♥, 3♥",
    "Player 4 checked",
    "Player 1 checked",
    "Turn dealt: 6♥",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: Q♥",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠",
    "Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥",
    "Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 folded",
    "Player 3 folded"
  ]
}
2025-10-31 18:58:12,835 - poker_game - DEBUG - Create Session: {'id': '12098f0e-34e9-4698-a193-6d8f40d11255', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904692.8314307}
2025-10-31 18:58:22,910 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:58:28,674 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_SNecC7LG9s0x6KglyCtMlXsB', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1278, 'totalTokenCount': 1295}, 'invocationId': 'e-be4491cd-3c20-417e-bf0d-f3d4c7cfe49e', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'cSeUBViH', 'timestamp': 1761904692.849671}, {'content': {'parts': [{'functionResponse': {'id': 'call_SNecC7LG9s0x6KglyCtMlXsB', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-be4491cd-3c20-417e-bf0d-f3d4c7cfe49e', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'E4Jkywyc', 'timestamp': 1761904693.789512}, {'content': {'parts': [{'functionCall': {'id': 'call_BjS8jFsHY92Pbfl5vWizY8zE', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['6♣', '5♣'], 'community': [], 'your_chips': 909, 'your_bet_this_round': 10, 'your_total_bet_this_hand': 10, 'pot': 30, 'to_call': 10, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1075, 'bet': 20, 'status': 'active'}, {'id': 1, 'chips': 6055, 'bet': 0, 'status': 'folded'}, {'id': 3, 'chips': 1931, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'call (10)', 'raise (min 40)', 'all-in (909)'], 'history': ['Player 0 folded', 'Player 1 called 40', 'Flop dealt: 2♣, 7♥, 3♥', 'Player 4 checked', 'Player 1 checked', 'Turn dealt: 6♥', 'Player 4 checked', 'Player 1 checked', 'River dealt: Q♥', 'Player 4 checked', 'Player 1 checked', 'Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠', 'Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥', 'Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 folded', 'Player 3 folded']}, 'call_amount': 10, 'pot_after_call': 40, 'equity': 0.3}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 510, 'promptTokenCount': 1802, 'totalTokenCount': 2312}, 'invocationId': 'e-be4491cd-3c20-417e-bf0d-f3d4c7cfe49e', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'xaVDqQPR', 'timestamp': 1761904693.790966}, {'content': {'parts': [{'functionResponse': {'id': 'call_BjS8jFsHY92Pbfl5vWizY8zE', 'name': 'action_decision', 'response': {'action': 'call', 'amount': 10, 'reasoning': 'ポットオッズを満たしており（5.00(ポットに対して16.67%）、コールが妥当と判断。コール額: 10'}}}], 'role': 'user'}, 'invocationId': 'e-be4491cd-3c20-417e-bf0d-f3d4c7cfe49e', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'VyqTn6UU', 'timestamp': 1761904706.542226}, {'content': {'parts': [{'text': '{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "ポットオッズを満たしており（5.00(ポットに対して16.67%）、コールが妥当と判断。コール額: 10"\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 64, 'promptTokenCount': 2363, 'totalTokenCount': 2427}, 'invocationId': 'e-be4491cd-3c20-417e-bf0d-f3d4c7cfe49e', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'uSP36jcy', 'timestamp': 1761904706.547246}]
2025-10-31 18:58:28,674 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:58:28,674 - poker_game - DEBUG - {
  "action": "call",
  "amount": 10,
  "reasoning": "ポットオッズを満たしており（5.00(ポットに対して16.67%）、コールが妥当と判断。コール額: 10"
}
2025-10-31 18:58:28,675 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:58:28,675 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "ポットオッズを満たしており（5.00(ポットに対して16.67%）、コールが妥当と判断。コール額: 10"\n}'
2025-10-31 18:58:28,675 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:58:28,675 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "call",
  "amount": 10,
  "reasoning": "ポットオッズを満たしており（5.00(ポットに対して16.67%）、コールが妥当と判断。コール額: 10"
}
2025-10-31 18:58:28,675 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'call', 'amount': 10, 'reasoning': 'ポットオッズを満たしており（5.00(ポットに対して16.67%）、コールが妥当と判断。コール額: 10'}
2025-10-31 18:58:28,675 - poker_game - DEBUG - [Agent4] Extracted values - action: 'call', amount: 10
2025-10-31 18:58:28,675 - poker_game - DEBUG - [Agent4] Processing call action - available actions: ['fold', 'call (10)', 'raise (min 40)', 'all-in (909)']
2025-10-31 18:58:28,676 - poker_game - DEBUG - [Agent4] Call amount extracted from 'call (10)': 10
2025-10-31 18:58:28,676 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'call', 'amount': 10}
2025-10-31 18:58:28,676 - poker_game - INFO - [Agent4] Successfully parsed decision: call, 10, ポットオッズを満たしており（5.00(ポットに対して16.67%）、コールが妥当と判断。コール額: 10
2025-10-31 18:58:28,677 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'call' with amount 10
2025-10-31 18:58:28,677 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:58:28,677 - poker_game - INFO - Hand #18, Phase: preflop
2025-10-31 18:58:28,677 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:58:28,677 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 18:58:28,678 - poker_game - INFO - Last raiser: 0
2025-10-31 18:58:28,678 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:28,678 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:28,678 - poker_game - INFO - Community cards: []
2025-10-31 18:58:28,678 - poker_game - INFO -   P0(Agent0): chips=1075, bet=20, status=active
2025-10-31 18:58:28,678 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:28,679 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:28,679 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:28,679 - poker_game - INFO -   P4(Agent4): chips=909, bet=10, status=active
2025-10-31 18:58:28,679 - poker_game - INFO - ==================================================
2025-10-31 18:58:28,679 - poker_game - INFO - ACTION_EXECUTED: Player 4 called 10
2025-10-31 18:58:28,702 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:58:28,703 - poker_game - INFO - Hand #18, Phase: preflop
2025-10-31 18:58:28,703 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:58:28,703 - poker_game - INFO - Pot: 40, Current bet: 20
2025-10-31 18:58:28,703 - poker_game - INFO - Last raiser: 0
2025-10-31 18:58:28,703 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:28,703 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:28,703 - poker_game - INFO - Community cards: []
2025-10-31 18:58:28,703 - poker_game - INFO -   P0(Agent0): chips=1075, bet=20, status=active
2025-10-31 18:58:28,703 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:28,703 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:28,704 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:28,704 - poker_game - INFO -   P4(Agent4): chips=899, bet=20, status=active
2025-10-31 18:58:28,704 - poker_game - INFO - Extra: Action: Player 4 called 10
2025-10-31 18:58:28,704 - poker_game - INFO - ==================================================
2025-10-31 18:58:28,704 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:58:28,704 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:58:28,704 - poker_game - DEBUG - Active players: [0, 4]
2025-10-31 18:58:28,704 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:58:28,704 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:58:28,704 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:58:28,705 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:58:28,705 - poker_game - DEBUG - Player bets: [20, 20], Current bet: 20, All same: True
2025-10-31 18:58:28,705 - poker_game - DEBUG - Active player indices: [0, 4]
2025-10-31 18:58:28,705 - poker_game - DEBUG - Last raiser index: 0
2025-10-31 18:58:28,705 - poker_game - DEBUG - Current player index: 0
2025-10-31 18:58:28,705 - poker_game - DEBUG - Next after last raiser 0: 4
2025-10-31 18:58:28,705 - poker_game - DEBUG - Betting continues: Current player 0 != next after raiser 4
2025-10-31 18:58:28,705 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:58:28,705 - poker_game - INFO - Hand #18, Phase: preflop
2025-10-31 18:58:28,705 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:58:28,705 - poker_game - INFO - Pot: 40, Current bet: 20
2025-10-31 18:58:28,705 - poker_game - INFO - Last raiser: 0
2025-10-31 18:58:28,706 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:28,706 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:28,706 - poker_game - INFO - Community cards: []
2025-10-31 18:58:28,706 - poker_game - INFO -   P0(Agent0): chips=1075, bet=20, status=active
2025-10-31 18:58:28,706 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:28,706 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:28,706 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:28,706 - poker_game - INFO -   P4(Agent4): chips=899, bet=20, status=active
2025-10-31 18:58:28,707 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:58:28,707 - poker_game - INFO - ==================================================
2025-10-31 18:58:28,808 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "4♥",
    "4♣"
  ],
  "community": [],
  "your_chips": 1075,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 40,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6055,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 899,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 40)",
    "all-in (1075)"
  ],
  "history": [
    "Player 1 called 40",
    "Flop dealt: 2♣, 7♥, 3♥",
    "Player 4 checked",
    "Player 1 checked",
    "Turn dealt: 6♥",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: Q♥",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠",
    "Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥",
    "Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 folded",
    "Player 3 folded",
    "Player 4 called 10"
  ]
}
2025-10-31 18:58:28,819 - poker_game - DEBUG - Create Session: {'id': 'c0dc7d6d-b2ea-4043-9392-da1d1d90e4bf', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904708.8157663}
2025-10-31 18:58:28,035 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "Preflopで44を持っている。これはミドルペアで、ポットをコールするには十分な強さがある。相手はすでにベットしており、ポットは40なので、コールしてフロップを見るのが最善。相手がレイズしてきた場合は、状況に応じて判断する。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 87, 'promptTokenCount': 963, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 963}], 'totalTokenCount': 1050}, 'invocationId': 'e-5affe79b-26ce-4dc4-95cc-5be0c796d0c9', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'gFrT9njz', 'timestamp': 1761904708.830608}]
2025-10-31 18:58:28,035 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:58:28,036 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "Preflopで44を持っている。これはミドルペアで、ポットをコールするには十分な強さがある。相手はすでにベットしており、ポットは40なので、コールしてフロップを見るのが最善。相手がレイズしてきた場合は、状況に応じて判断する。"
}
```
2025-10-31 18:58:28,036 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:58:28,037 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "Preflopで44を持っている。これはミドルペアで、ポットをコールするには十分な強さがある。相手はすでにベットしており、ポットは40なので、コールしてフロップを見るのが最善。相手がレイズしてきた場合は、状況に応じて判断する。"\n}\n```'
2025-10-31 18:58:28,037 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:58:28,037 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "Preflopで44を持っている。これはミドルペアで、ポットをコールするには十分な強さがある。相手はすでにベットしており、ポットは40なので、コールしてフロップを見るのが最善。相手がレイズしてきた場合は、状況に応じて判断する。"\n}'
2025-10-31 18:58:28,037 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "Preflopで44を持っている。これはミドルペアで、ポットをコールするには十分な強さがある。相手はすでにベットしており、ポットは40なので、コールしてフロップを見るのが最善。相手がレイズしてきた場合は、状況に応じて判断する。"
}
2025-10-31 18:58:28,037 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'Preflopで44を持っている。これはミドルペアで、ポットをコールするには十分な強さがある。相手はすでにベットしており、ポットは40なので、コールしてフロップを見るのが最善。相手がレイズしてきた場合は、状況に応じて判断する。'}
2025-10-31 18:58:28,037 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 0
2025-10-31 18:58:28,037 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'check', 'raise (min 40)', 'all-in (1075)']
2025-10-31 18:58:28,037 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 18:58:28,037 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 0, Preflopで44を持っている。これはミドルペアで、ポットをコールするには十分な強さがある。相手はすでにベットしており、ポットは40なので、コールしてフロップを見るのが最善。相手がレイズしてきた場合は、状況に応じて判断する。
2025-10-31 18:58:28,038 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 0
2025-10-31 18:58:28,039 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:58:28,039 - poker_game - INFO - Hand #18, Phase: preflop
2025-10-31 18:58:28,040 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:58:28,040 - poker_game - INFO - Pot: 40, Current bet: 20
2025-10-31 18:58:28,040 - poker_game - INFO - Last raiser: 0
2025-10-31 18:58:28,041 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:28,041 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:28,041 - poker_game - INFO - Community cards: []
2025-10-31 18:58:28,041 - poker_game - INFO -   P0(Agent0): chips=1075, bet=20, status=active
2025-10-31 18:58:28,041 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:28,042 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:28,042 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:28,043 - poker_game - INFO -   P4(Agent4): chips=899, bet=20, status=active
2025-10-31 18:58:28,043 - poker_game - INFO - ==================================================
2025-10-31 18:58:28,044 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 18:58:28,054 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:58:28,055 - poker_game - INFO - Hand #18, Phase: preflop
2025-10-31 18:58:28,055 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:58:28,055 - poker_game - INFO - Pot: 40, Current bet: 20
2025-10-31 18:58:28,056 - poker_game - INFO - Last raiser: 0
2025-10-31 18:58:28,056 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:28,056 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:28,057 - poker_game - INFO - Community cards: []
2025-10-31 18:58:28,057 - poker_game - INFO -   P0(Agent0): chips=1075, bet=20, status=active
2025-10-31 18:58:28,058 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:28,058 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:28,059 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:28,059 - poker_game - INFO -   P4(Agent4): chips=899, bet=20, status=active
2025-10-31 18:58:28,060 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 18:58:28,060 - poker_game - INFO - ==================================================
2025-10-31 18:58:28,060 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:58:28,061 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:58:28,061 - poker_game - DEBUG - Active players: [0, 4]
2025-10-31 18:58:28,061 - poker_game - INFO - Advanced from player 0 to player 4 (seat order)
2025-10-31 18:58:28,062 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:58:28,062 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:58:28,062 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:58:28,063 - poker_game - DEBUG - Player bets: [20, 20], Current bet: 20, All same: True
2025-10-31 18:58:28,063 - poker_game - DEBUG - Active player indices: [0, 4]
2025-10-31 18:58:28,063 - poker_game - DEBUG - Last raiser index: 0
2025-10-31 18:58:28,063 - poker_game - DEBUG - Current player index: 4
2025-10-31 18:58:28,063 - poker_game - DEBUG - Next after last raiser 0: 4
2025-10-31 18:58:28,063 - poker_game - INFO - Betting complete: Back to player 4 after last raiser 0
2025-10-31 18:58:28,064 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:58:28,064 - poker_game - INFO - Hand #18, Phase: preflop
2025-10-31 18:58:28,065 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:58:28,065 - poker_game - INFO - Pot: 40, Current bet: 20
2025-10-31 18:58:28,065 - poker_game - INFO - Last raiser: 0
2025-10-31 18:58:28,066 - poker_game - INFO - Betting round complete: True
2025-10-31 18:58:28,066 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:28,067 - poker_game - INFO - Community cards: []
2025-10-31 18:58:28,067 - poker_game - INFO -   P0(Agent0): chips=1075, bet=20, status=active
2025-10-31 18:58:28,068 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:28,068 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:28,068 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:28,069 - poker_game - INFO -   P4(Agent4): chips=899, bet=20, status=active
2025-10-31 18:58:28,069 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:58:28,070 - poker_game - INFO - ==================================================
2025-10-31 18:58:28,171 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 18:58:28,172 - poker_game - INFO - Betting round complete: True
2025-10-31 18:58:28,173 - poker_game - INFO - Remaining players: 2
2025-10-31 18:58:28,173 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:58:28,174 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:58:28,174 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 18:58:28,193 - poker_game - INFO - Starting new betting round
2025-10-31 18:58:28,194 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:58:28,194 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:58:28,194 - poker_game - DEBUG - Active players for new betting round: [0, 4]
2025-10-31 18:58:28,195 - poker_game - DEBUG - Dealer button: 3
2025-10-31 18:58:28,195 - poker_game - INFO - First actor: Player 4 (by phase rule), was 4
2025-10-31 18:58:28,195 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:58:28,196 - poker_game - INFO - Hand #18, Phase: flop
2025-10-31 18:58:28,196 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:58:28,197 - poker_game - INFO - Pot: 40, Current bet: 0
2025-10-31 18:58:28,197 - poker_game - INFO - Last raiser: None
2025-10-31 18:58:28,198 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:28,198 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:28,198 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠']
2025-10-31 18:58:28,199 - poker_game - INFO -   P0(Agent0): chips=1075, bet=0, status=active
2025-10-31 18:58:28,199 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:28,200 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:28,200 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:28,201 - poker_game - INFO -   P4(Agent4): chips=899, bet=0, status=active
2025-10-31 18:58:28,201 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 18:58:28,202 - poker_game - INFO - ==================================================
2025-10-31 18:58:28,206 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "flop",
  "your_cards": [
    "6♣",
    "5♣"
  ],
  "community": [
    "7♥",
    "5♦",
    "Q♠"
  ],
  "your_chips": 899,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 40,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1075,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6055,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (899)"
  ],
  "history": [
    "Player 4 checked",
    "Player 1 checked",
    "Turn dealt: 6♥",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: Q♥",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠",
    "Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥",
    "Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 7♥, 5♦, Q♠"
  ]
}
2025-10-31 18:58:28,226 - poker_game - DEBUG - Create Session: {'id': 'ebeaa96d-b79b-4c86-a800-14a8abb0a33f', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904708.222782}
2025-10-31 18:58:38,315 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:58:48,429 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 18:58:55,475 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_0nCjl1wUApgS991ogjW9WfSB', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1292, 'totalTokenCount': 1309}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 's2K85LFg', 'timestamp': 1761904708.2417}, {'content': {'parts': [{'functionResponse': {'id': 'call_0nCjl1wUApgS991ogjW9WfSB', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'Utf62N2t', 'timestamp': 1761904709.352311}, {'content': {'parts': [{'functionCall': {'id': 'call_jnwIvlHSbeksNElNiAcACgIH', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1816, 'totalTokenCount': 1836}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'zchXGzzm', 'timestamp': 1761904709.356177}, {'content': {'parts': [{'functionResponse': {'id': 'call_jnwIvlHSbeksNElNiAcACgIH', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'AT4vjtQW', 'timestamp': 1761904710.645208}, {'content': {'parts': [{'functionCall': {'id': 'call_OfDfeVt70Brw7WN4H2gFrMFI', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1378, 'totalTokenCount': 1395}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'aWAhoHbG', 'timestamp': 1761904710.64975}, {'content': {'parts': [{'functionResponse': {'id': 'call_OfDfeVt70Brw7WN4H2gFrMFI', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '95M3uq2n', 'timestamp': 1761904711.795205}, {'content': {'parts': [{'functionCall': {'id': 'call_NBEtfmpQGZJc3tn4RSUnIs1U', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1908, 'totalTokenCount': 1928}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'l5w6V7eY', 'timestamp': 1761904711.797555}, {'content': {'parts': [{'functionResponse': {'id': 'call_NBEtfmpQGZJc3tn4RSUnIs1U', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'bQQvTnJ3', 'timestamp': 1761904712.939638}, {'content': {'parts': [{'functionCall': {'id': 'call_6y65W5EepNIKxJjNUP5baTPa', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1464, 'totalTokenCount': 1481}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'NU40Yjem', 'timestamp': 1761904712.943152}, {'content': {'parts': [{'functionResponse': {'id': 'call_6y65W5EepNIKxJjNUP5baTPa', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'jsAhtaeM', 'timestamp': 1761904715.950757}, {'content': {'parts': [{'functionCall': {'id': 'call_3BZT2GaTuP7oAYK2qFVXnN77', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 2000, 'totalTokenCount': 2020}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'UJb28xZy', 'timestamp': 1761904715.953047}, {'content': {'parts': [{'functionResponse': {'id': 'call_3BZT2GaTuP7oAYK2qFVXnN77', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'yW8kj8uJ', 'timestamp': 1761904717.190337}, {'content': {'parts': [{'functionCall': {'id': 'call_wCT1M5R1YOjr2gzJranKMmvT', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1550, 'totalTokenCount': 1567}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '9r6RH80B', 'timestamp': 1761904717.19411}, {'content': {'parts': [{'functionResponse': {'id': 'call_wCT1M5R1YOjr2gzJranKMmvT', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'F3l0YZXS', 'timestamp': 1761904718.427797}, {'content': {'parts': [{'functionCall': {'id': 'call_UJKaBEvisVfYXpNkUlOaENDg', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 2092, 'totalTokenCount': 2112}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'bf0FTKSt', 'timestamp': 1761904718.430242}, {'content': {'parts': [{'functionResponse': {'id': 'call_UJKaBEvisVfYXpNkUlOaENDg', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'AAdEmzwF', 'timestamp': 1761904720.004985}, {'content': {'parts': [{'functionCall': {'id': 'call_zeWzoyvCAUjOaZ8m7zdA3fO1', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1636, 'totalTokenCount': 1653}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'AJ6u1ux8', 'timestamp': 1761904720.007276}, {'content': {'parts': [{'functionResponse': {'id': 'call_zeWzoyvCAUjOaZ8m7zdA3fO1', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'x9OCkloy', 'timestamp': 1761904721.134629}, {'content': {'parts': [{'functionCall': {'id': 'call_wySZFVOspaO599qmG6s2O9M4', 'args': {'call_amount': 0, 'pot_after_call': 40, 'equity': 0.5}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 45, 'promptTokenCount': 2184, 'totalTokenCount': 2229}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'FfXnaIXD', 'timestamp': 1761904721.13832}, {'content': {'parts': [{'functionResponse': {'id': 'call_wySZFVOspaO599qmG6s2O9M4', 'name': 'action_decision', 'response': {'error': 'Invoking `action_decision()` failed as the following mandatory input parameters are not present:\ngame_state\nYou could retry calling this tool, but it is IMPORTANT for you to provide all the mandatory parameters.'}}}], 'role': 'user'}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '4mRPLQAh', 'timestamp': 1761904723.052645}, {'content': {'parts': [{'functionCall': {'id': 'call_NHtyjZSWcksx01XtVH1Ebsas', 'args': {'game_state': {'your_id': 4, 'phase': 'flop', 'your_cards': ['6♣', '5♣'], 'community': ['7♥', '5♦', 'Q♠'], 'your_chips': 899, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 20, 'pot': 40, 'to_call': 0, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1075, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 6055, 'bet': 0, 'status': 'folded'}, {'id': 3, 'chips': 1931, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (899)'], 'history': ['Player 4 checked', 'Player 1 checked', 'Turn dealt: 6♥', 'Player 4 checked', 'Player 1 checked', 'River dealt: Q♥', 'Player 4 checked', 'Player 1 checked', 'Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠', 'Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥', 'Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 folded', 'Player 3 folded', 'Player 4 called 10', 'Player 0 checked', 'Flop dealt: 7♥, 5♦, Q♠']}, 'call_amount': 0, 'pot_after_call': 40, 'equity': 0.5}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 499, 'promptTokenCount': 2269, 'totalTokenCount': 2768}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '8nUk6YEU', 'timestamp': 1761904723.055803}, {'content': {'parts': [{'functionResponse': {'id': 'call_NHtyjZSWcksx01XtVH1Ebsas', 'name': 'action_decision', 'response': {'action': 'raise', 'amount': 20, 'reasoning': '期待値が見込める（20.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 20'}}}], 'role': 'user'}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Ghzm3ct5', 'timestamp': 1761904733.869701}, {'content': {'parts': [{'text': '{"action":"raise","amount":20,"reasoning":"期待値が見込める（20.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 20"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 56, 'promptTokenCount': 2837, 'totalTokenCount': 2893}, 'invocationId': 'e-0b0264d3-7369-42f5-8f3a-0463cd45d5ac', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'CRUzZFGd', 'timestamp': 1761904733.873325}]
2025-10-31 18:58:55,476 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:58:55,477 - poker_game - DEBUG - {"action":"raise","amount":20,"reasoning":"期待値が見込める（20.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 20"}
2025-10-31 18:58:55,479 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:58:55,479 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"raise","amount":20,"reasoning":"期待値が見込める（20.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 20"}'
2025-10-31 18:58:55,479 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:58:55,480 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"raise","amount":20,"reasoning":"期待値が見込める（20.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 20"}
2025-10-31 18:58:55,480 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'raise', 'amount': 20, 'reasoning': '期待値が見込める（20.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 20'}
2025-10-31 18:58:55,480 - poker_game - DEBUG - [Agent4] Extracted values - action: 'raise', amount: 20
2025-10-31 18:58:55,480 - poker_game - DEBUG - [Agent4] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (899)']
2025-10-31 18:58:55,481 - poker_game - DEBUG - [Agent4] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:58:55,481 - poker_game - DEBUG - [Agent4] Raise amount 20 is valid (min: 20)
2025-10-31 18:58:55,481 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'raise', 'amount': 20}
2025-10-31 18:58:55,481 - poker_game - INFO - [Agent4] Successfully parsed decision: raise, 20, 期待値が見込める（20.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 20
2025-10-31 18:58:55,483 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'raise' with amount 20
2025-10-31 18:58:55,483 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:58:55,484 - poker_game - INFO - Hand #18, Phase: flop
2025-10-31 18:58:55,484 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:58:55,485 - poker_game - INFO - Pot: 40, Current bet: 0
2025-10-31 18:58:55,485 - poker_game - INFO - Last raiser: None
2025-10-31 18:58:55,485 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:55,486 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:55,486 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠']
2025-10-31 18:58:55,486 - poker_game - INFO -   P0(Agent0): chips=1075, bet=0, status=active
2025-10-31 18:58:55,486 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:55,487 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:55,487 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:55,487 - poker_game - INFO -   P4(Agent4): chips=899, bet=0, status=active
2025-10-31 18:58:55,488 - poker_game - INFO - ==================================================
2025-10-31 18:58:55,488 - poker_game - INFO - ACTION_EXECUTED: Player 4 raised to 20
2025-10-31 18:58:55,502 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:58:55,503 - poker_game - INFO - Hand #18, Phase: flop
2025-10-31 18:58:55,503 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:58:55,504 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:58:55,504 - poker_game - INFO - Last raiser: 4
2025-10-31 18:58:55,504 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:55,505 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:55,505 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠']
2025-10-31 18:58:55,506 - poker_game - INFO -   P0(Agent0): chips=1075, bet=0, status=active
2025-10-31 18:58:55,506 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:55,507 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:55,507 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:55,507 - poker_game - INFO -   P4(Agent4): chips=879, bet=20, status=active
2025-10-31 18:58:55,508 - poker_game - INFO - Extra: Action: Player 4 raised to 20
2025-10-31 18:58:55,508 - poker_game - INFO - ==================================================
2025-10-31 18:58:55,508 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:58:55,509 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:58:55,509 - poker_game - DEBUG - Active players: [0, 4]
2025-10-31 18:58:55,509 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:58:55,510 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:58:55,510 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:58:55,510 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:58:55,511 - poker_game - DEBUG - Player bets: [0, 20], Current bet: 20, All same: False
2025-10-31 18:58:55,511 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:58:55,511 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:58:55,511 - poker_game - INFO - Hand #18, Phase: flop
2025-10-31 18:58:55,512 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:58:55,512 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:58:55,513 - poker_game - INFO - Last raiser: 4
2025-10-31 18:58:55,514 - poker_game - INFO - Betting round complete: False
2025-10-31 18:58:55,514 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:58:55,514 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠']
2025-10-31 18:58:55,515 - poker_game - INFO -   P0(Agent0): chips=1075, bet=0, status=active
2025-10-31 18:58:55,515 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:58:55,515 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:58:55,516 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:58:55,516 - poker_game - INFO -   P4(Agent4): chips=879, bet=20, status=active
2025-10-31 18:58:55,517 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:58:55,517 - poker_game - INFO - ==================================================
2025-10-31 18:58:55,619 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "flop",
  "your_cards": [
    "4♥",
    "4♣"
  ],
  "community": [
    "7♥",
    "5♦",
    "Q♠"
  ],
  "your_chips": 1075,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 20,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6055,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 879,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1075)"
  ],
  "history": [
    "Player 1 checked",
    "Turn dealt: 6♥",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: Q♥",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠",
    "Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥",
    "Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 7♥, 5♦, Q♠",
    "Player 4 raised to 20"
  ]
}
2025-10-31 18:58:55,765 - poker_game - DEBUG - Create Session: {'id': 'cb4fc4a6-9e31-41be-ab6f-dbd8e281d1db', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904735.7621853}
2025-10-31 18:59:00,833 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "フロップ（Flop）は7♥ 5♦ Q♠で、あなたの手札は4♥ 4♣です。これはペア（Pair）ですが、ボード（Board：コミュニティカード）との組み合わせではあまり強くありません。相手（Player 4）が20をベットしてきました。コール（Call）するには20を支払う必要があります。現状では相手が強い手を持っている可能性はありますが、あなたのペアはそこそこの強さがあり、さらにカードが配られる（ターン、リバー）ことで改善される可能性もあります。ポット（Pot：賭け金の総額）は60で、コールに必要な20はポットサイズに対して許容範囲内です。フォールド（Fold：降りる）するには弱すぎ、レイズ（Raise：さらに賭け金を上げる）するには情報が不足しています。したがって、コールして次のカードを見るのが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 216, 'promptTokenCount': 986, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 986}], 'totalTokenCount': 1202}, 'invocationId': 'e-014896f6-3df9-4a52-aef2-624162f6b7a3', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '9JxiwrNB', 'timestamp': 1761904735.779038}]
2025-10-31 18:59:00,833 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 18:59:00,834 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "フロップ（Flop）は7♥ 5♦ Q♠で、あなたの手札は4♥ 4♣です。これはペア（Pair）ですが、ボード（Board：コミュニティカード）との組み合わせではあまり強くありません。相手（Player 4）が20をベットしてきました。コール（Call）するには20を支払う必要があります。現状では相手が強い手を持っている可能性はありますが、あなたのペアはそこそこの強さがあり、さらにカードが配られる（ターン、リバー）ことで改善される可能性もあります。ポット（Pot：賭け金の総額）は60で、コールに必要な20はポットサイズに対して許容範囲内です。フォールド（Fold：降りる）するには弱すぎ、レイズ（Raise：さらに賭け金を上げる）するには情報が不足しています。したがって、コールして次のカードを見るのが最善の選択です。"
}
```
2025-10-31 18:59:00,834 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 18:59:00,834 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "フロップ（Flop）は7♥ 5♦ Q♠で、あなたの手札は4♥ 4♣です。これはペア（Pair）ですが、ボード（Board：コミュニティカード）との組み合わせではあまり強くありません。相手（Player 4）が20をベットしてきました。コール（Call）するには20を支払う必要があります。現状では相手が強い手を持っている可能性はありますが、あなたのペアはそこそこの強さがあり、さらにカードが配られる（ターン、リバー）ことで改善される可能性もあります。ポット（Pot：賭け金の総額）は60で、コールに必要な20はポットサイズに対して許容範囲内です。フォールド（Fold：降りる）するには弱すぎ、レイズ（Raise：さらに賭け金を上げる）するには情報が不足しています。したがって、コールして次のカードを見るのが最善の選択です。"\n}\n```'
2025-10-31 18:59:00,835 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 18:59:00,835 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "フロップ（Flop）は7♥ 5♦ Q♠で、あなたの手札は4♥ 4♣です。これはペア（Pair）ですが、ボード（Board：コミュニティカード）との組み合わせではあまり強くありません。相手（Player 4）が20をベットしてきました。コール（Call）するには20を支払う必要があります。現状では相手が強い手を持っている可能性はありますが、あなたのペアはそこそこの強さがあり、さらにカードが配られる（ターン、リバー）ことで改善される可能性もあります。ポット（Pot：賭け金の総額）は60で、コールに必要な20はポットサイズに対して許容範囲内です。フォールド（Fold：降りる）するには弱すぎ、レイズ（Raise：さらに賭け金を上げる）するには情報が不足しています。したがって、コールして次のカードを見るのが最善の選択です。"\n}'
2025-10-31 18:59:00,835 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "フロップ（Flop）は7♥ 5♦ Q♠で、あなたの手札は4♥ 4♣です。これはペア（Pair）ですが、ボード（Board：コミュニティカード）との組み合わせではあまり強くありません。相手（Player 4）が20をベットしてきました。コール（Call）するには20を支払う必要があります。現状では相手が強い手を持っている可能性はありますが、あなたのペアはそこそこの強さがあり、さらにカードが配られる（ターン、リバー）ことで改善される可能性もあります。ポット（Pot：賭け金の総額）は60で、コールに必要な20はポットサイズに対して許容範囲内です。フォールド（Fold：降りる）するには弱すぎ、レイズ（Raise：さらに賭け金を上げる）するには情報が不足しています。したがって、コールして次のカードを見るのが最善の選択です。"
}
2025-10-31 18:59:00,836 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'フロップ（Flop）は7♥ 5♦ Q♠で、あなたの手札は4♥ 4♣です。これはペア（Pair）ですが、ボード（Board：コミュニティカード）との組み合わせではあまり強くありません。相手（Player 4）が20をベットしてきました。コール（Call）するには20を支払う必要があります。現状では相手が強い手を持っている可能性はありますが、あなたのペアはそこそこの強さがあり、さらにカードが配られる（ターン、リバー）ことで改善される可能性もあります。ポット（Pot：賭け金の総額）は60で、コールに必要な20はポットサイズに対して許容範囲内です。フォールド（Fold：降りる）するには弱すぎ、レイズ（Raise：さらに賭け金を上げる）するには情報が不足しています。したがって、コールして次のカードを見るのが最善の選択です。'}
2025-10-31 18:59:00,836 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 20
2025-10-31 18:59:00,836 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1075)']
2025-10-31 18:59:00,836 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (20)': 20
2025-10-31 18:59:00,836 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 18:59:00,837 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 20, フロップ（Flop）は7♥ 5♦ Q♠で、あなたの手札は4♥ 4♣です。これはペア（Pair）ですが、ボード（Board：コミュニティカード）との組み合わせではあまり強くありません。相手（Player 4）が20をベットしてきました。コール（Call）するには20を支払う必要があります。現状では相手が強い手を持っている可能性はありますが、あなたのペアはそこそこの強さがあり、さらにカードが配られる（ターン、リバー）ことで改善される可能性もあります。ポット（Pot：賭け金の総額）は60で、コールに必要な20はポットサイズに対して許容範囲内です。フォールド（Fold：降りる）するには弱すぎ、レイズ（Raise：さらに賭け金を上げる）するには情報が不足しています。したがって、コールして次のカードを見るのが最善の選択です。
2025-10-31 18:59:00,838 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 20
2025-10-31 18:59:00,838 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:59:00,839 - poker_game - INFO - Hand #18, Phase: flop
2025-10-31 18:59:00,840 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:59:00,840 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 18:59:00,841 - poker_game - INFO - Last raiser: 4
2025-10-31 18:59:00,842 - poker_game - INFO - Betting round complete: False
2025-10-31 18:59:00,843 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:59:00,843 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠']
2025-10-31 18:59:00,844 - poker_game - INFO -   P0(Agent0): chips=1075, bet=0, status=active
2025-10-31 18:59:00,845 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:59:00,845 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:59:00,846 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:59:00,847 - poker_game - INFO -   P4(Agent4): chips=879, bet=20, status=active
2025-10-31 18:59:00,847 - poker_game - INFO - ==================================================
2025-10-31 18:59:00,848 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 20
2025-10-31 18:59:00,861 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:59:00,862 - poker_game - INFO - Hand #18, Phase: flop
2025-10-31 18:59:00,863 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:59:00,863 - poker_game - INFO - Pot: 80, Current bet: 20
2025-10-31 18:59:00,864 - poker_game - INFO - Last raiser: 4
2025-10-31 18:59:00,864 - poker_game - INFO - Betting round complete: False
2025-10-31 18:59:00,865 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:59:00,865 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠']
2025-10-31 18:59:00,866 - poker_game - INFO -   P0(Agent0): chips=1055, bet=20, status=active
2025-10-31 18:59:00,866 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:59:00,866 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:59:00,867 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:59:00,867 - poker_game - INFO -   P4(Agent4): chips=879, bet=20, status=active
2025-10-31 18:59:00,868 - poker_game - INFO - Extra: Action: Player 0 called 20
2025-10-31 18:59:00,868 - poker_game - INFO - ==================================================
2025-10-31 18:59:00,868 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:59:00,869 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:59:00,869 - poker_game - DEBUG - Active players: [0, 4]
2025-10-31 18:59:00,869 - poker_game - INFO - Advanced from player 0 to player 4 (seat order)
2025-10-31 18:59:00,870 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:59:00,870 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:59:00,870 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:59:00,871 - poker_game - DEBUG - Player bets: [20, 20], Current bet: 20, All same: True
2025-10-31 18:59:00,871 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 18:59:00,871 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:59:00,871 - poker_game - INFO - Hand #18, Phase: flop
2025-10-31 18:59:00,872 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:59:00,873 - poker_game - INFO - Pot: 80, Current bet: 20
2025-10-31 18:59:00,873 - poker_game - INFO - Last raiser: 4
2025-10-31 18:59:00,874 - poker_game - INFO - Betting round complete: True
2025-10-31 18:59:00,874 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:59:00,875 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠']
2025-10-31 18:59:00,875 - poker_game - INFO -   P0(Agent0): chips=1055, bet=20, status=active
2025-10-31 18:59:00,876 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:59:00,876 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:59:00,876 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:59:00,877 - poker_game - INFO -   P4(Agent4): chips=879, bet=20, status=active
2025-10-31 18:59:00,878 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 18:59:00,878 - poker_game - INFO - ==================================================
2025-10-31 18:59:00,979 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 18:59:00,980 - poker_game - INFO - Betting round complete: True
2025-10-31 18:59:00,981 - poker_game - INFO - Remaining players: 2
2025-10-31 18:59:00,981 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 18:59:00,982 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 18:59:00,982 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 18:59:00,993 - poker_game - INFO - Starting new betting round
2025-10-31 18:59:00,994 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 18:59:00,994 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 18:59:00,995 - poker_game - DEBUG - Active players for new betting round: [0, 4]
2025-10-31 18:59:00,995 - poker_game - DEBUG - Dealer button: 3
2025-10-31 18:59:00,995 - poker_game - INFO - First actor: Player 4 (by phase rule), was 4
2025-10-31 18:59:00,996 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 18:59:00,996 - poker_game - INFO - Hand #18, Phase: turn
2025-10-31 18:59:00,997 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:59:00,997 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 18:59:00,998 - poker_game - INFO - Last raiser: None
2025-10-31 18:59:00,998 - poker_game - INFO - Betting round complete: False
2025-10-31 18:59:00,998 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:59:00,999 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣']
2025-10-31 18:59:01,000 - poker_game - INFO -   P0(Agent0): chips=1055, bet=0, status=active
2025-10-31 18:59:01,000 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:59:01,000 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:59:01,001 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:59:01,001 - poker_game - INFO -   P4(Agent4): chips=879, bet=0, status=active
2025-10-31 18:59:01,002 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 18:59:01,002 - poker_game - INFO - ==================================================
2025-10-31 18:59:01,003 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "turn",
  "your_cards": [
    "6♣",
    "5♣"
  ],
  "community": [
    "7♥",
    "5♦",
    "Q♠",
    "Q♣"
  ],
  "your_chips": 879,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 40,
  "pot": 80,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1055,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6055,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (879)"
  ],
  "history": [
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: Q♥",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠",
    "Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥",
    "Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 7♥, 5♦, Q♠",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Turn dealt: Q♣"
  ]
}
2025-10-31 18:58:55,876 - poker_game - DEBUG - Create Session: {'id': '8755f611-8715-41c3-af0e-7bb8a8266172', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904735.8725307}
2025-10-31 18:59:06,066 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 18:59:16,008 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 18:59:23,200 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_FHrH5gPF9HceU4GBEYX0RuOz', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1302, 'totalTokenCount': 1319}, 'invocationId': 'e-f790472a-dc05-435e-83e4-49d1075c9a62', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'b4CqsA0j', 'timestamp': 1761904735.890478}, {'content': {'parts': [{'functionResponse': {'id': 'call_FHrH5gPF9HceU4GBEYX0RuOz', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-f790472a-dc05-435e-83e4-49d1075c9a62', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'gjygLi71', 'timestamp': 1761904736.639294}, {'content': {'parts': [{'functionCall': {'id': 'call_1VSq5xcl9TAZjw6CIS0qxFrR', 'args': {'game_state': {'your_id': 4, 'phase': 'turn', 'your_cards': ['6♣', '5♣'], 'community': ['7♥', '5♦', 'Q♠', 'Q♣'], 'your_chips': 879, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 40, 'pot': 80, 'to_call': 0, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1055, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 6055, 'bet': 0, 'status': 'folded'}, {'id': 3, 'chips': 1931, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (879)'], 'history': ['Player 4 checked', 'Player 1 checked', 'River dealt: Q♥', 'Player 4 checked', 'Player 1 checked', 'Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠', 'Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥', 'Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 folded', 'Player 3 folded', 'Player 4 called 10', 'Player 0 checked', 'Flop dealt: 7♥, 5♦, Q♠', 'Player 4 raised to 20', 'Player 0 called 20', 'Turn dealt: Q♣']}, 'call_amount': 0, 'pot_after_call': 80, 'equity': 0.95}, 'name': 'action_decision'}}, {'functionCall': {'id': 'call_IP1hy10uqmS36mt1ABvVfHBp', 'args': {'game_state': {'your_id': 4, 'phase': 'turn', 'your_cards': ['6♣', '5♣'], 'community': ['7♥', '5♦', 'Q♠', 'Q♣'], 'your_chips': 879, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 40, 'pot': 80, 'to_call': 0, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1055, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 6055, 'bet': 0, 'status': 'folded'}, {'id': 3, 'chips': 1931, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (879)'], 'history': ['Player 4 checked', 'Player 1 checked', 'River dealt: Q♥', 'Player 4 checked', 'Player 1 checked', 'Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠', 'Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥', 'Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 folded', 'Player 3 folded', 'Player 4 called 10', 'Player 0 checked', 'Flop dealt: 7♥, 5♦, Q♠', 'Player 4 raised to 20', 'Player 0 called 20', 'Turn dealt: Q♣']}, 'call_amount': 0, 'pot_after_call': 80, 'equity': 0.95}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 1030, 'promptTokenCount': 1826, 'totalTokenCount': 2856}, 'invocationId': 'e-f790472a-dc05-435e-83e4-49d1075c9a62', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'NoeDp5kr', 'timestamp': 1761904736.642972}, {'content': {'parts': [{'functionResponse': {'id': 'call_1VSq5xcl9TAZjw6CIS0qxFrR', 'name': 'action_decision', 'response': {'action': 'raise', 'amount': 52, 'reasoning': '期待値が高い（76.00(ポットに対して95.00%）ため、2/3ポットでベットします。ベット額: 52'}}}, {'functionResponse': {'id': 'call_IP1hy10uqmS36mt1ABvVfHBp', 'name': 'action_decision', 'response': {'action': 'raise', 'amount': 52, 'reasoning': '期待値が高い（76.00(ポットに対して95.00%）ため、2/3ポットでベットします。ベット額: 52'}}}], 'role': 'user'}, 'invocationId': 'ld6h1GrQ', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'GrJtRWXV', 'timestamp': 1761904760.780197}, {'content': {'parts': [{'text': '{"action":"raise","amount":52,"reasoning":"期待値が高い（76.00（ポットに対して95.00%）ため、1/3ポットでベットします。ポット額: 52"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 52, 'promptTokenCount': 3148, 'totalTokenCount': 3200}, 'invocationId': 'e-f790472a-dc05-435e-83e4-49d1075c9a62', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'zNFh8TIm', 'timestamp': 1761904760.788206}]
2025-10-31 18:59:23,201 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 18:59:23,202 - poker_game - DEBUG - {"action":"raise","amount":52,"reasoning":"期待値が高い（76.00（ポットに対して95.00%）ため、1/3ポットでベットします。ポット額: 52"}
2025-10-31 18:59:23,203 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 18:59:23,203 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"raise","amount":52,"reasoning":"期待値が高い（76.00（ポットに対して95.00%）ため、1/3ポットでベットします。ポット額: 52"}'
2025-10-31 18:59:23,203 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 18:59:23,204 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"raise","amount":52,"reasoning":"期待値が高い（76.00（ポットに対して95.00%）ため、1/3ポットでベットします。ポット額: 52"}
2025-10-31 18:59:23,204 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'raise', 'amount': 52, 'reasoning': '期待値が高い（76.00（ポットに対して95.00%）ため、1/3ポットでベットします。ポット額: 52'}
2025-10-31 18:59:23,204 - poker_game - DEBUG - [Agent4] Extracted values - action: 'raise', amount: 52
2025-10-31 18:59:23,204 - poker_game - DEBUG - [Agent4] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (879)']
2025-10-31 18:59:23,205 - poker_game - DEBUG - [Agent4] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 18:59:23,205 - poker_game - DEBUG - [Agent4] Raise amount 52 is valid (min: 20)
2025-10-31 18:59:23,205 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'raise', 'amount': 52}
2025-10-31 18:59:23,205 - poker_game - INFO - [Agent4] Successfully parsed decision: raise, 52, 期待値が高い（76.00（ポットに対して95.00%）ため、1/3ポットでベットします。ポット額: 52
2025-10-31 18:59:23,207 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'raise' with amount 52
2025-10-31 18:59:23,207 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 18:59:23,208 - poker_game - INFO - Hand #18, Phase: turn
2025-10-31 18:59:23,208 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:59:23,209 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 18:59:23,209 - poker_game - INFO - Last raiser: None
2025-10-31 18:59:23,209 - poker_game - INFO - Betting round complete: False
2025-10-31 18:59:23,210 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:59:23,210 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣']
2025-10-31 18:59:23,210 - poker_game - INFO -   P0(Agent0): chips=1055, bet=0, status=active
2025-10-31 18:59:23,211 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:59:23,211 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:59:23,211 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:59:23,212 - poker_game - INFO -   P4(Agent4): chips=879, bet=0, status=active
2025-10-31 18:59:23,213 - poker_game - INFO - ==================================================
2025-10-31 18:59:23,214 - poker_game - INFO - ACTION_EXECUTED: Player 4 raised to 52
2025-10-31 18:59:23,230 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 18:59:23,230 - poker_game - INFO - Hand #18, Phase: turn
2025-10-31 18:59:23,231 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 18:59:23,232 - poker_game - INFO - Pot: 132, Current bet: 52
2025-10-31 18:59:23,233 - poker_game - INFO - Last raiser: 4
2025-10-31 18:59:23,233 - poker_game - INFO - Betting round complete: False
2025-10-31 18:59:23,234 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:59:23,235 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣']
2025-10-31 18:59:23,235 - poker_game - INFO -   P0(Agent0): chips=1055, bet=0, status=active
2025-10-31 18:59:23,236 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:59:23,237 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:59:23,238 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:59:23,238 - poker_game - INFO -   P4(Agent4): chips=827, bet=52, status=active
2025-10-31 18:59:23,238 - poker_game - INFO - Extra: Action: Player 4 raised to 52
2025-10-31 18:59:23,239 - poker_game - INFO - ==================================================
2025-10-31 18:59:23,239 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 18:59:23,240 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 18:59:23,240 - poker_game - DEBUG - Active players: [0, 4]
2025-10-31 18:59:23,241 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 18:59:23,242 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 18:59:23,242 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 18:59:23,243 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 18:59:23,244 - poker_game - DEBUG - Player bets: [0, 52], Current bet: 52, All same: False
2025-10-31 18:59:23,245 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 18:59:23,245 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 18:59:23,245 - poker_game - INFO - Hand #18, Phase: turn
2025-10-31 18:59:23,246 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 18:59:23,248 - poker_game - INFO - Pot: 132, Current bet: 52
2025-10-31 18:59:23,249 - poker_game - INFO - Last raiser: 4
2025-10-31 18:59:23,249 - poker_game - INFO - Betting round complete: False
2025-10-31 18:59:23,249 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 18:59:23,250 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣']
2025-10-31 18:59:23,250 - poker_game - INFO -   P0(Agent0): chips=1055, bet=0, status=active
2025-10-31 18:59:23,250 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 18:59:23,251 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 18:59:23,251 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 18:59:23,252 - poker_game - INFO -   P4(Agent4): chips=827, bet=52, status=active
2025-10-31 18:59:23,252 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 18:59:23,253 - poker_game - INFO - ==================================================
2025-10-31 18:59:23,354 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "turn",
  "your_cards": [
    "4♥",
    "4♣"
  ],
  "community": [
    "7♥",
    "5♦",
    "Q♠",
    "Q♣"
  ],
  "your_chips": 1055,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 40,
  "pot": 132,
  "to_call": 52,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6055,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 827,
      "bet": 52,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (52)",
    "raise (min 72)",
    "all-in (1055)"
  ],
  "history": [
    "Player 1 checked",
    "River dealt: Q♥",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠",
    "Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥",
    "Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 7♥, 5♦, Q♠",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Turn dealt: Q♣",
    "Player 4 raised to 52"
  ]
}
2025-10-31 18:59:23,367 - poker_game - DEBUG - Create Session: {'id': '0f9aa317-2dff-4adc-b57e-f64907644e0e', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904763.363979}
2025-10-31 18:59:33,513 - poker_game - INFO - Waiting for LLM API response for Agent0... 10 seconds elapsed
2025-10-31 18:59:43,405 - poker_game - INFO - Waiting for LLM API response for Agent0... 20 seconds elapsed
2025-10-31 18:59:54,274 - poker_game - INFO - Waiting for LLM API response for Agent0... 30 seconds elapsed
2025-10-31 19:00:01,829 - poker_game - ERROR - LLM decision error for Agent0: HTTPConnectionPool(host='api-server', port=8000): Read timed out. (read timeout=44)
2025-10-31 19:00:01,830 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 52
2025-10-31 19:00:01,830 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:00:01,830 - poker_game - INFO - Hand #18, Phase: turn
2025-10-31 19:00:01,831 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:00:01,831 - poker_game - INFO - Pot: 132, Current bet: 52
2025-10-31 19:00:01,831 - poker_game - INFO - Last raiser: 4
2025-10-31 19:00:01,831 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:01,831 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:00:01,832 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣']
2025-10-31 19:00:01,832 - poker_game - INFO -   P0(Agent0): chips=1055, bet=0, status=active
2025-10-31 19:00:01,832 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 19:00:01,832 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:01,832 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 19:00:01,833 - poker_game - INFO -   P4(Agent4): chips=827, bet=52, status=active
2025-10-31 19:00:01,833 - poker_game - INFO - ==================================================
2025-10-31 19:00:01,833 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 52
2025-10-31 19:00:01,845 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:00:01,846 - poker_game - INFO - Hand #18, Phase: turn
2025-10-31 19:00:01,847 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:00:01,847 - poker_game - INFO - Pot: 184, Current bet: 52
2025-10-31 19:00:01,847 - poker_game - INFO - Last raiser: 4
2025-10-31 19:00:01,847 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:01,848 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:00:01,848 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣']
2025-10-31 19:00:01,848 - poker_game - INFO -   P0(Agent0): chips=1003, bet=52, status=active
2025-10-31 19:00:01,849 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 19:00:01,849 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:01,849 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 19:00:01,849 - poker_game - INFO -   P4(Agent4): chips=827, bet=52, status=active
2025-10-31 19:00:01,849 - poker_game - INFO - Extra: Action: Player 0 called 52
2025-10-31 19:00:01,850 - poker_game - INFO - ==================================================
2025-10-31 19:00:01,850 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:00:01,850 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:00:01,850 - poker_game - DEBUG - Active players: [0, 4]
2025-10-31 19:00:01,850 - poker_game - INFO - Advanced from player 0 to player 4 (seat order)
2025-10-31 19:00:01,850 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:00:01,851 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:00:01,851 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:00:01,851 - poker_game - DEBUG - Player bets: [52, 52], Current bet: 52, All same: True
2025-10-31 19:00:01,851 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 19:00:01,852 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:00:01,852 - poker_game - INFO - Hand #18, Phase: turn
2025-10-31 19:00:01,853 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:00:01,853 - poker_game - INFO - Pot: 184, Current bet: 52
2025-10-31 19:00:01,853 - poker_game - INFO - Last raiser: 4
2025-10-31 19:00:01,854 - poker_game - INFO - Betting round complete: True
2025-10-31 19:00:01,854 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:00:01,854 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣']
2025-10-31 19:00:01,855 - poker_game - INFO -   P0(Agent0): chips=1003, bet=52, status=active
2025-10-31 19:00:01,855 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 19:00:01,855 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:01,855 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 19:00:01,856 - poker_game - INFO -   P4(Agent4): chips=827, bet=52, status=active
2025-10-31 19:00:01,856 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:00:01,856 - poker_game - INFO - ==================================================
2025-10-31 19:00:01,958 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 19:00:01,959 - poker_game - INFO - Betting round complete: True
2025-10-31 19:00:01,960 - poker_game - INFO - Remaining players: 2
2025-10-31 19:00:01,960 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 19:00:01,961 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 19:00:01,961 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 19:00:01,991 - poker_game - INFO - Starting new betting round
2025-10-31 19:00:01,992 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:00:01,993 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:00:01,993 - poker_game - DEBUG - Active players for new betting round: [0, 4]
2025-10-31 19:00:01,993 - poker_game - DEBUG - Dealer button: 3
2025-10-31 19:00:01,994 - poker_game - INFO - First actor: Player 4 (by phase rule), was 4
2025-10-31 19:00:01,996 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:00:01,996 - poker_game - INFO - Hand #18, Phase: river
2025-10-31 19:00:01,996 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:00:01,997 - poker_game - INFO - Pot: 184, Current bet: 0
2025-10-31 19:00:01,997 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:01,998 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:01,998 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:00:01,999 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣', '10♣']
2025-10-31 19:00:01,999 - poker_game - INFO -   P0(Agent0): chips=1003, bet=0, status=active
2025-10-31 19:00:02,000 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 19:00:02,000 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:02,000 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 19:00:02,001 - poker_game - INFO -   P4(Agent4): chips=827, bet=0, status=active
2025-10-31 19:00:02,001 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 19:00:02,001 - poker_game - INFO - ==================================================
2025-10-31 19:00:02,004 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "river",
  "your_cards": [
    "6♣",
    "5♣"
  ],
  "community": [
    "7♥",
    "5♦",
    "Q♠",
    "Q♣",
    "10♣"
  ],
  "your_chips": 827,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 92,
  "pot": 184,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 1003,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6055,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (827)"
  ],
  "history": [
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠",
    "Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥",
    "Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 7♥, 5♦, Q♠",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Turn dealt: Q♣",
    "Player 4 raised to 52",
    "Player 0 called 52",
    "River dealt: 10♣"
  ]
}
2025-10-31 19:00:02,107 - poker_game - DEBUG - Create Session: {'id': '73b07bcc-1f72-4546-829f-25763b064d15', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904802.1023808}
2025-10-31 19:00:12,290 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 19:00:14,804 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_7a9Vd35SvfJhT7dG7X7JrnCz', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1315, 'totalTokenCount': 1332}, 'invocationId': 'e-41d87567-7bd2-4ed4-97e2-63132e7420a5', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '374otPT6', 'timestamp': 1761904802.12439}, {'content': {'parts': [{'functionResponse': {'id': 'call_7a9Vd35SvfJhT7dG7X7JrnCz', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-41d87567-7bd2-4ed4-97e2-63132e7420a5', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'L1wykRjf', 'timestamp': 1761904803.179307}, {'content': {'parts': [{'functionCall': {'id': 'call_akmB1eJ7l6b6Q2E9iNAOy4c2', 'args': {'game_state': {'your_id': 4, 'phase': 'river', 'your_cards': ['6♣', '5♣'], 'community': ['7♥', '5♦', 'Q♠', 'Q♣', '10♣'], 'your_chips': 827, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 92, 'pot': 184, 'to_call': 0, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 1003, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 6055, 'bet': 0, 'status': 'folded'}, {'id': 3, 'chips': 1931, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (827)'], 'history': ['Player 4 checked', 'Player 1 checked', 'Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠', 'Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥', 'Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 folded', 'Player 3 folded', 'Player 4 called 10', 'Player 0 checked', 'Flop dealt: 7♥, 5♦, Q♠', 'Player 4 raised to 20', 'Player 0 called 20', 'Turn dealt: Q♣', 'Player 4 raised to 52', 'Player 0 called 52']}, 'call_amount': 0, 'pot_after_call': 184, 'equity': 0.5}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 526, 'promptTokenCount': 1839, 'totalTokenCount': 2365}, 'invocationId': 'e-41d87567-7bd2-4ed4-97e2-63132e7420a5', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'IMOzHvfw', 'timestamp': 1761904803.182918}, {'content': {'parts': [{'functionResponse': {'id': 'call_akmB1eJ7l6b6Q2E9iNAOy4c2', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（92.00(ポットに対して50.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'e-41d87567-7bd2-4ed4-97e2-63132e7420a5', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'yDytwqwA', 'timestamp': 1761904812.960594}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い（92.00(ポットに対して50.00%）ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 38, 'promptTokenCount': 2400, 'totalTokenCount': 2438}, 'invocationId': 'e-41d87567-7bd2-4ed4-97e2-63132e7420a5', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'sUHdIdpP', 'timestamp': 1761904812.963991}]
2025-10-31 19:00:14,805 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:00:14,805 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い（92.00(ポットに対して50.00%）ため、チェックします"}
2025-10-31 19:00:14,806 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:00:14,806 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い（92.00(ポットに対して50.00%）ため、チェックします"}'
2025-10-31 19:00:14,806 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:00:14,807 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い（92.00(ポットに対して50.00%）ため、チェックします"}
2025-10-31 19:00:14,807 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（92.00(ポットに対して50.00%）ため、チェックします'}
2025-10-31 19:00:14,807 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 19:00:14,807 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 19:00:14,807 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:00:14,807 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い（92.00(ポットに対して50.00%）ため、チェックします
2025-10-31 19:00:14,810 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 19:00:14,813 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:00:14,813 - poker_game - INFO - Hand #18, Phase: river
2025-10-31 19:00:14,815 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:00:14,816 - poker_game - INFO - Pot: 184, Current bet: 0
2025-10-31 19:00:14,817 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:14,818 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:14,819 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:00:14,820 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣', '10♣']
2025-10-31 19:00:14,821 - poker_game - INFO -   P0(Agent0): chips=1003, bet=0, status=active
2025-10-31 19:00:14,821 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 19:00:14,822 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:14,822 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 19:00:14,822 - poker_game - INFO -   P4(Agent4): chips=827, bet=0, status=active
2025-10-31 19:00:14,823 - poker_game - INFO - ==================================================
2025-10-31 19:00:14,823 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 19:00:14,874 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:00:14,875 - poker_game - INFO - Hand #18, Phase: river
2025-10-31 19:00:14,876 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:00:14,876 - poker_game - INFO - Pot: 184, Current bet: 0
2025-10-31 19:00:14,876 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:14,877 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:14,877 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:00:14,878 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣', '10♣']
2025-10-31 19:00:14,878 - poker_game - INFO -   P0(Agent0): chips=1003, bet=0, status=active
2025-10-31 19:00:14,879 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 19:00:14,879 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:14,881 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 19:00:14,882 - poker_game - INFO -   P4(Agent4): chips=827, bet=0, status=active
2025-10-31 19:00:14,883 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 19:00:14,885 - poker_game - INFO - ==================================================
2025-10-31 19:00:14,886 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:00:14,886 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:00:14,887 - poker_game - DEBUG - Active players: [0, 4]
2025-10-31 19:00:14,888 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 19:00:14,889 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:00:14,889 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:00:14,890 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:00:14,890 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 19:00:14,890 - poker_game - DEBUG - Active player indices: [0, 4]
2025-10-31 19:00:14,890 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:00:14,891 - poker_game - DEBUG - Current player index: 0
2025-10-31 19:00:14,891 - poker_game - DEBUG - First actor index: 4
2025-10-31 19:00:14,891 - poker_game - DEBUG - Betting continues: Current player 0 != first actor 4
2025-10-31 19:00:14,891 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:00:14,891 - poker_game - INFO - Hand #18, Phase: river
2025-10-31 19:00:14,891 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:00:14,891 - poker_game - INFO - Pot: 184, Current bet: 0
2025-10-31 19:00:14,892 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:14,892 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:14,892 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:00:14,892 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣', '10♣']
2025-10-31 19:00:14,893 - poker_game - INFO -   P0(Agent0): chips=1003, bet=0, status=active
2025-10-31 19:00:14,893 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 19:00:14,894 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:14,894 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 19:00:14,894 - poker_game - INFO -   P4(Agent4): chips=827, bet=0, status=active
2025-10-31 19:00:14,895 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:00:14,895 - poker_game - INFO - ==================================================
2025-10-31 19:00:14,997 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "river",
  "your_cards": [
    "4♥",
    "4♣"
  ],
  "community": [
    "7♥",
    "5♦",
    "Q♠",
    "Q♣",
    "10♣"
  ],
  "your_chips": 1003,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 92,
  "pot": 184,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6055,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1931,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 827,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1003)"
  ],
  "history": [
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: Q♥ - Q♥, 10♦, 9♠, 7♥, 6♥ cards=10♦, 9♠",
    "Showdown: Player 4 hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥ cards=A♠, 8♥",
    "Side pot layer 0: amount=40, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 1: amount=30, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Side pot layer 2: amount=80, winners=4 best_hand=Flush: Q♥-high - Q♥, 8♥, 7♥, 6♥, 3♥",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 7♥, 5♦, Q♠",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Turn dealt: Q♣",
    "Player 4 raised to 52",
    "Player 0 called 52",
    "River dealt: 10♣",
    "Player 4 checked"
  ]
}
2025-10-31 19:00:15,012 - poker_game - DEBUG - Create Session: {'id': 'd7481aeb-4d03-44b0-8905-c84842112061', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904815.0060892}
2025-10-31 19:00:16,735 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ターン）で、あなたの手札はペア（4のペア）です。コミュニティカードにはQが2枚あり、相手（Player 4）はそれを持っている可能性が高いです。相手はチェックしたため、こちらもチェックして、相手の手札を確認します。コールやレイズは、相手がより強い手札を持っている可能性が高いため、避けます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 110, 'promptTokenCount': 1006, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 1006}], 'totalTokenCount': 1116}, 'invocationId': 'e-09951066-5744-491b-b50d-35eff862567a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'lSufRTtJ', 'timestamp': 1761904815.024525}]
2025-10-31 19:00:16,736 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:00:16,736 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ターン）で、あなたの手札はペア（4のペア）です。コミュニティカードにはQが2枚あり、相手（Player 4）はそれを持っている可能性が高いです。相手はチェックしたため、こちらもチェックして、相手の手札を確認します。コールやレイズは、相手がより強い手札を持っている可能性が高いため、避けます。"
}
```
2025-10-31 19:00:16,737 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:00:16,738 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ターン）で、あなたの手札はペア（4のペア）です。コミュニティカードにはQが2枚あり、相手（Player 4）はそれを持っている可能性が高いです。相手はチェックしたため、こちらもチェックして、相手の手札を確認します。コールやレイズは、相手がより強い手札を持っている可能性が高いため、避けます。"\n}\n```'
2025-10-31 19:00:16,738 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:00:16,738 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ターン）で、あなたの手札はペア（4のペア）です。コミュニティカードにはQが2枚あり、相手（Player 4）はそれを持っている可能性が高いです。相手はチェックしたため、こちらもチェックして、相手の手札を確認します。コールやレイズは、相手がより強い手札を持っている可能性が高いため、避けます。"\n}'
2025-10-31 19:00:16,738 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ターン）で、あなたの手札はペア（4のペア）です。コミュニティカードにはQが2枚あり、相手（Player 4）はそれを持っている可能性が高いです。相手はチェックしたため、こちらもチェックして、相手の手札を確認します。コールやレイズは、相手がより強い手札を持っている可能性が高いため、避けます。"
}
2025-10-31 19:00:16,739 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最終ターン）で、あなたの手札はペア（4のペア）です。コミュニティカードにはQが2枚あり、相手（Player 4）はそれを持っている可能性が高いです。相手はチェックしたため、こちらもチェックして、相手の手札を確認します。コールやレイズは、相手がより強い手札を持っている可能性が高いため、避けます。'}
2025-10-31 19:00:16,739 - poker_game - DEBUG - [Agent0] Extracted values - action: 'check', amount: 0
2025-10-31 19:00:16,739 - poker_game - DEBUG - [Agent0] Action 'check' normalized - amount set to 0
2025-10-31 19:00:16,739 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:00:16,739 - poker_game - INFO - [Agent0] Successfully parsed decision: check, 0, リバー（最終ターン）で、あなたの手札はペア（4のペア）です。コミュニティカードにはQが2枚あり、相手（Player 4）はそれを持っている可能性が高いです。相手はチェックしたため、こちらもチェックして、相手の手札を確認します。コールやレイズは、相手がより強い手札を持っている可能性が高いため、避けます。
2025-10-31 19:00:16,741 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'check' with amount 0
2025-10-31 19:00:16,741 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:00:16,742 - poker_game - INFO - Hand #18, Phase: river
2025-10-31 19:00:16,742 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:00:16,743 - poker_game - INFO - Pot: 184, Current bet: 0
2025-10-31 19:00:16,743 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:16,743 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:16,744 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:00:16,745 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣', '10♣']
2025-10-31 19:00:16,745 - poker_game - INFO -   P0(Agent0): chips=1003, bet=0, status=active
2025-10-31 19:00:16,745 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 19:00:16,746 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:16,747 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 19:00:16,747 - poker_game - INFO -   P4(Agent4): chips=827, bet=0, status=active
2025-10-31 19:00:16,748 - poker_game - INFO - ==================================================
2025-10-31 19:00:16,748 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 19:00:16,760 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:00:16,761 - poker_game - INFO - Hand #18, Phase: river
2025-10-31 19:00:16,761 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:00:16,762 - poker_game - INFO - Pot: 184, Current bet: 0
2025-10-31 19:00:16,763 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:16,764 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:16,764 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:00:16,765 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣', '10♣']
2025-10-31 19:00:16,765 - poker_game - INFO -   P0(Agent0): chips=1003, bet=0, status=active
2025-10-31 19:00:16,765 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 19:00:16,766 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:16,766 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 19:00:16,767 - poker_game - INFO -   P4(Agent4): chips=827, bet=0, status=active
2025-10-31 19:00:16,768 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 19:00:16,768 - poker_game - INFO - ==================================================
2025-10-31 19:00:16,768 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:00:16,769 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:00:16,769 - poker_game - DEBUG - Active players: [0, 4]
2025-10-31 19:00:16,769 - poker_game - INFO - Advanced from player 0 to player 4 (seat order)
2025-10-31 19:00:16,769 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:00:16,770 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:00:16,771 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:00:16,771 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 19:00:16,771 - poker_game - DEBUG - Active player indices: [0, 4]
2025-10-31 19:00:16,771 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:00:16,772 - poker_game - DEBUG - Current player index: 4
2025-10-31 19:00:16,772 - poker_game - DEBUG - First actor index: 4
2025-10-31 19:00:16,772 - poker_game - INFO - Betting complete: Back to first actor 4 (all players have acted)
2025-10-31 19:00:16,773 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:00:16,773 - poker_game - INFO - Hand #18, Phase: river
2025-10-31 19:00:16,774 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:00:16,775 - poker_game - INFO - Pot: 184, Current bet: 0
2025-10-31 19:00:16,776 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:16,776 - poker_game - INFO - Betting round complete: True
2025-10-31 19:00:16,777 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:00:16,777 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣', '10♣']
2025-10-31 19:00:16,778 - poker_game - INFO -   P0(Agent0): chips=1003, bet=0, status=active
2025-10-31 19:00:16,778 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 19:00:16,778 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:16,779 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 19:00:16,779 - poker_game - INFO -   P4(Agent4): chips=827, bet=0, status=active
2025-10-31 19:00:16,780 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:00:16,780 - poker_game - INFO - ==================================================
2025-10-31 19:00:16,881 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 19:00:16,882 - poker_game - INFO - Betting round complete: True
2025-10-31 19:00:16,883 - poker_game - INFO - Remaining players: 2
2025-10-31 19:00:16,883 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 19:00:16,884 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 19:00:16,884 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 19:00:16,884 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 19:00:16,884 - poker_game - INFO - Hand #18, Phase: showdown
2025-10-31 19:00:16,885 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:00:16,885 - poker_game - INFO - Pot: 184, Current bet: 0
2025-10-31 19:00:16,886 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:16,886 - poker_game - INFO - Betting round complete: True
2025-10-31 19:00:16,886 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:00:16,887 - poker_game - INFO - Community cards: ['7♥', '5♦', 'Q♠', 'Q♣', '10♣']
2025-10-31 19:00:16,887 - poker_game - INFO -   P0(Agent0): chips=1003, bet=0, status=active
2025-10-31 19:00:16,889 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=folded
2025-10-31 19:00:16,889 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:16,889 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=folded
2025-10-31 19:00:16,890 - poker_game - INFO -   P4(Agent4): chips=827, bet=0, status=active
2025-10-31 19:00:16,890 - poker_game - INFO - ==================================================
2025-10-31 19:00:16,891 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 19:00:16,892 - poker_game - INFO - Pot: 184, Community cards: ['7♥', '5♦', 'Q♠', 'Q♣', '10♣']
2025-10-31 19:00:16,893 - poker_game - INFO -   Player 0 status=active cards=['4♥', '4♣']
2025-10-31 19:00:16,893 - poker_game - INFO -   Player 4 status=active cards=['6♣', '5♣']
2025-10-31 19:00:16,897 - poker_game - INFO -   Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=['4♥', '4♣']
2025-10-31 19:00:16,898 - poker_game - INFO -   Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=['6♣', '5♣']
2025-10-31 19:00:16,898 - poker_game - INFO - Pot layer 0: amount=184, contributors=[0, 4]
2025-10-31 19:00:16,899 - poker_game - INFO - Showdown total awarded: 184 (game.pot=184)
2025-10-31 19:00:16,900 - poker_game - INFO - Showdown winners (aggregated): [4]
2025-10-31 19:00:16,900 - poker_game - INFO -   Awarded 184 to Player 4 (hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦)
2025-10-31 19:00:16,901 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 19:00:16,941 - poker_game - INFO - === STARTING NEW HAND #19 ===
2025-10-31 19:00:16,942 - poker_game - INFO - Active players for new hand: 4
2025-10-31 19:00:16,944 - poker_game - INFO - Moving dealer button
2025-10-31 19:00:16,944 - poker_game - INFO - Posting blinds
2025-10-31 19:00:16,969 - poker_game - INFO - Dealing hole cards
2025-10-31 19:00:16,970 - poker_game - INFO - Setting first actor for preflop
2025-10-31 19:00:16,982 - poker_game - INFO - Started new hand in database: hand_id=19
2025-10-31 19:00:16,982 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 19:00:16,983 - poker_game - INFO - Hand #19, Phase: preflop
2025-10-31 19:00:16,983 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:00:16,984 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:00:16,984 - poker_game - INFO - Last raiser: 1
2025-10-31 19:00:16,985 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:16,985 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:00:16,986 - poker_game - INFO - Community cards: []
2025-10-31 19:00:16,987 - poker_game - INFO -   P0(Agent0): chips=993, bet=10, status=active
2025-10-31 19:00:16,988 - poker_game - INFO -   P1(Agent1): chips=6035, bet=20, status=active
2025-10-31 19:00:16,990 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:16,991 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=active
2025-10-31 19:00:16,992 - poker_game - INFO -   P4(Agent4): chips=1011, bet=0, status=active
2025-10-31 19:00:16,993 - poker_game - INFO - ==================================================
2025-10-31 19:00:16,995 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "9♣",
    "7♠"
  ],
  "community": [],
  "your_chips": 1931,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 4,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 993,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6035,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 1011,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1931)"
  ],
  "history": [
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 7♥, 5♦, Q♠",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Turn dealt: Q♣",
    "Player 4 raised to 52",
    "Player 0 called 52",
    "River dealt: 10♣",
    "Player 4 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣",
    "Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣",
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20"
  ]
}
2025-10-31 19:00:17,163 - poker_game - DEBUG - Create Session: {'id': 'a9d379e1-b6ba-46b1-bdca-3f1d8ee304ed', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904817.1594946}
2025-10-31 19:00:16,546 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで9と7オフスーツは弱いハンドです。しかし、ポットにはすでに30があり、コールするには20しか必要ありません。これは、ポットオッズ（リスクに見合うリターン）が良いことを意味するため、コールするのが最善の選択です。レイズするにはハンドが弱すぎ、フォールドするにはポットオッズが良すぎます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 107, 'promptTokenCount': 918, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 918}], 'totalTokenCount': 1025}, 'invocationId': 'e-77346c1c-01ae-4e43-ae50-5cd55df62757', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'FFVELTIs', 'timestamp': 1761904817.175582}]
2025-10-31 19:00:16,547 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:00:16,547 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップで9と7オフスーツは弱いハンドです。しかし、ポットにはすでに30があり、コールするには20しか必要ありません。これは、ポットオッズ（リスクに見合うリターン）が良いことを意味するため、コールするのが最善の選択です。レイズするにはハンドが弱すぎ、フォールドするにはポットオッズが良すぎます。"
}
```
2025-10-31 19:00:16,548 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:00:16,548 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで9と7オフスーツは弱いハンドです。しかし、ポットにはすでに30があり、コールするには20しか必要ありません。これは、ポットオッズ（リスクに見合うリターン）が良いことを意味するため、コールするのが最善の選択です。レイズするにはハンドが弱すぎ、フォールドするにはポットオッズが良すぎます。"\n}\n```'
2025-10-31 19:00:16,548 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:00:16,548 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップで9と7オフスーツは弱いハンドです。しかし、ポットにはすでに30があり、コールするには20しか必要ありません。これは、ポットオッズ（リスクに見合うリターン）が良いことを意味するため、コールするのが最善の選択です。レイズするにはハンドが弱すぎ、フォールドするにはポットオッズが良すぎます。"\n}'
2025-10-31 19:00:16,549 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップで9と7オフスーツは弱いハンドです。しかし、ポットにはすでに30があり、コールするには20しか必要ありません。これは、ポットオッズ（リスクに見合うリターン）が良いことを意味するため、コールするのが最善の選択です。レイズするにはハンドが弱すぎ、フォールドするにはポットオッズが良すぎます。"
}
2025-10-31 19:00:16,549 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'プリフロップで9と7オフスーツは弱いハンドです。しかし、ポットにはすでに30があり、コールするには20しか必要ありません。これは、ポットオッズ（リスクに見合うリターン）が良いことを意味するため、コールするのが最善の選択です。レイズするにはハンドが弱すぎ、フォールドするにはポットオッズが良すぎます。'}
2025-10-31 19:00:16,549 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 20
2025-10-31 19:00:16,549 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1931)']
2025-10-31 19:00:16,550 - poker_game - DEBUG - [Agent3] Call amount extracted from 'call (20)': 20
2025-10-31 19:00:16,550 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 19:00:16,550 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 20, プリフロップで9と7オフスーツは弱いハンドです。しかし、ポットにはすでに30があり、コールするには20しか必要ありません。これは、ポットオッズ（リスクに見合うリターン）が良いことを意味するため、コールするのが最善の選択です。レイズするにはハンドが弱すぎ、フォールドするにはポットオッズが良すぎます。
2025-10-31 19:00:16,552 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 20
2025-10-31 19:00:16,552 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:00:16,553 - poker_game - INFO - Hand #19, Phase: preflop
2025-10-31 19:00:16,555 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:00:16,557 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:00:16,557 - poker_game - INFO - Last raiser: 1
2025-10-31 19:00:16,559 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:16,561 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:00:16,561 - poker_game - INFO - Community cards: []
2025-10-31 19:00:16,562 - poker_game - INFO -   P0(Agent0): chips=993, bet=10, status=active
2025-10-31 19:00:16,562 - poker_game - INFO -   P1(Agent1): chips=6035, bet=20, status=active
2025-10-31 19:00:16,563 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:16,563 - poker_game - INFO -   P3(Agent3): chips=1931, bet=0, status=active
2025-10-31 19:00:16,563 - poker_game - INFO -   P4(Agent4): chips=1011, bet=0, status=active
2025-10-31 19:00:16,564 - poker_game - INFO - ==================================================
2025-10-31 19:00:16,564 - poker_game - INFO - ACTION_EXECUTED: Player 3 called 20
2025-10-31 19:00:16,584 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:00:16,585 - poker_game - INFO - Hand #19, Phase: preflop
2025-10-31 19:00:16,585 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:00:16,586 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:00:16,586 - poker_game - INFO - Last raiser: 1
2025-10-31 19:00:16,586 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:16,587 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:00:16,587 - poker_game - INFO - Community cards: []
2025-10-31 19:00:16,587 - poker_game - INFO -   P0(Agent0): chips=993, bet=10, status=active
2025-10-31 19:00:16,588 - poker_game - INFO -   P1(Agent1): chips=6035, bet=20, status=active
2025-10-31 19:00:16,588 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:16,589 - poker_game - INFO -   P3(Agent3): chips=1911, bet=20, status=active
2025-10-31 19:00:16,590 - poker_game - INFO -   P4(Agent4): chips=1011, bet=0, status=active
2025-10-31 19:00:16,590 - poker_game - INFO - Extra: Action: Player 3 called 20
2025-10-31 19:00:16,590 - poker_game - INFO - ==================================================
2025-10-31 19:00:16,591 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:00:16,593 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:00:16,593 - poker_game - DEBUG - Active players: [0, 1, 3, 4]
2025-10-31 19:00:16,593 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 19:00:16,593 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:00:16,594 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:00:16,594 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 19:00:16,594 - poker_game - DEBUG - Player bets: [10, 20, 20, 0], Current bet: 20, All same: False
2025-10-31 19:00:16,595 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:00:16,595 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:00:16,595 - poker_game - INFO - Hand #19, Phase: preflop
2025-10-31 19:00:16,596 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 19:00:16,596 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:00:16,597 - poker_game - INFO - Last raiser: 1
2025-10-31 19:00:16,597 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:16,597 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:00:16,598 - poker_game - INFO - Community cards: []
2025-10-31 19:00:16,598 - poker_game - INFO -   P0(Agent0): chips=993, bet=10, status=active
2025-10-31 19:00:16,599 - poker_game - INFO -   P1(Agent1): chips=6035, bet=20, status=active
2025-10-31 19:00:16,600 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:16,600 - poker_game - INFO -   P3(Agent3): chips=1911, bet=20, status=active
2025-10-31 19:00:16,600 - poker_game - INFO -   P4(Agent4): chips=1011, bet=0, status=active
2025-10-31 19:00:16,601 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:00:16,601 - poker_game - INFO - ==================================================
2025-10-31 19:00:16,705 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "4♥",
    "A♠"
  ],
  "community": [],
  "your_chips": 1011,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 50,
  "to_call": 20,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 993,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6035,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1911,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1011)"
  ],
  "history": [
    "Player 0 posted big blind 20",
    "Player 1 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 7♥, 5♦, Q♠",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Turn dealt: Q♣",
    "Player 4 raised to 52",
    "Player 0 called 52",
    "River dealt: 10♣",
    "Player 4 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣",
    "Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣",
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 called 20"
  ]
}
2025-10-31 19:00:16,715 - poker_game - DEBUG - Create Session: {'id': 'b66c1eef-63ae-4691-bc52-fa76f0747ff4', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904816.7125413}
2025-10-31 19:00:26,828 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 19:00:33,258 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_IaTgSFatEUukG0Iml2cT6kDr', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1239, 'totalTokenCount': 1256}, 'invocationId': 'e-7cc6e517-3207-40a8-ad37-1a286db30a5b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'yC9C6EUo', 'timestamp': 1761904816.726754}, {'content': {'parts': [{'functionResponse': {'id': 'call_IaTgSFatEUukG0Iml2cT6kDr', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-7cc6e517-3207-40a8-ad37-1a286db30a5b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'KXhOYbO4', 'timestamp': 1761904817.870442}, {'content': {'parts': [{'functionCall': {'id': 'call_6UnZ8vNF0bMws7Jb8DWYXehv', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1763, 'totalTokenCount': 1780}, 'invocationId': 'e-7cc6e517-3207-40a8-ad37-1a286db30a5b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'juFVmAl0', 'timestamp': 1761904817.877436}, {'content': {'parts': [{'functionResponse': {'id': 'call_6UnZ8vNF0bMws7Jb8DWYXehv', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-7cc6e517-3207-40a8-ad37-1a286db30a5b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'picp0EMg', 'timestamp': 1761904819.009018}, {'content': {'parts': [{'functionCall': {'id': 'call_lqhw38JeEevQHhZuJf03c1xt', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['4♥', 'A♠'], 'community': [], 'your_chips': 1011, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 0, 'pot': 50, 'to_call': 20, 'dealer_button': 4, 'current_turn': 4, 'players': [{'id': 0, 'chips': 993, 'bet': 10, 'status': 'active'}, {'id': 1, 'chips': 6035, 'bet': 20, 'status': 'active'}, {'id': 3, 'chips': 1911, 'bet': 20, 'status': 'active'}], 'actions': ['fold', 'call (20)', 'raise (min 40)', 'all-in (1011)'], 'history': ['Player 0 posted big blind 20', 'Player 1 folded', 'Player 3 folded', 'Player 4 called 10', 'Player 0 checked', 'Flop dealt: 7♥, 5♦, Q♠', 'Player 4 raised to 20', 'Player 0 called 20', 'Turn dealt: Q♣', 'Player 4 raised to 52', 'Player 0 called 52', 'River dealt: 10♣', 'Player 4 checked', 'Player 0 checked', 'Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣', 'Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦', 'Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦', 'Player 0 posted small blind 10', 'Player 1 posted big blind 20', 'Player 3 called 20']}, 'call_amount': 20, 'pot_after_call': 70, 'equity': 0.4}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 461, 'promptTokenCount': 1794, 'totalTokenCount': 2255}, 'invocationId': 'e-7cc6e517-3207-40a8-ad37-1a286db30a5b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'NkWZxSco', 'timestamp': 1761904819.01379}, {'content': {'parts': [{'functionResponse': {'id': 'call_lqhw38JeEevQHhZuJf03c1xt', 'name': 'action_decision', 'response': {'action': 'call', 'amount': 20, 'reasoning': 'ポットオッズを満たしており（16.00(ポットに対して32.00%）、コールが妥当と判断。コール額: 20'}}}], 'role': 'user'}, 'invocationId': 'e-7cc6e517-3207-40a8-ad37-1a286db30a5b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'P2cKZ0dH', 'timestamp': 1761904830.862039}, {'content': {'parts': [{'text': '{"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（16.00(ポットに対して32.00%）、コールが妥当と判断。コール額: 20"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 54, 'promptTokenCount': 2306, 'totalTokenCount': 2360}, 'invocationId': 'e-7cc6e517-3207-40a8-ad37-1a286db30a5b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'EC93hTic', 'timestamp': 1761904830.863812}]
2025-10-31 19:00:33,258 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:00:33,259 - poker_game - DEBUG - {"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（16.00(ポットに対して32.00%）、コールが妥当と判断。コール額: 20"}
2025-10-31 19:00:33,260 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:00:33,261 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（16.00(ポットに対して32.00%）、コールが妥当と判断。コール額: 20"}'
2025-10-31 19:00:33,261 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:00:33,261 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"call","amount":20,"reasoning":"ポットオッズを満たしており（16.00(ポットに対して32.00%）、コールが妥当と判断。コール額: 20"}
2025-10-31 19:00:33,261 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'ポットオッズを満たしており（16.00(ポットに対して32.00%）、コールが妥当と判断。コール額: 20'}
2025-10-31 19:00:33,262 - poker_game - DEBUG - [Agent4] Extracted values - action: 'call', amount: 20
2025-10-31 19:00:33,262 - poker_game - DEBUG - [Agent4] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (1011)']
2025-10-31 19:00:33,262 - poker_game - DEBUG - [Agent4] Call amount extracted from 'call (20)': 20
2025-10-31 19:00:33,262 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 19:00:33,262 - poker_game - INFO - [Agent4] Successfully parsed decision: call, 20, ポットオッズを満たしており（16.00(ポットに対して32.00%）、コールが妥当と判断。コール額: 20
2025-10-31 19:00:33,264 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'call' with amount 20
2025-10-31 19:00:33,264 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:00:33,265 - poker_game - INFO - Hand #19, Phase: preflop
2025-10-31 19:00:33,265 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 19:00:33,266 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:00:33,267 - poker_game - INFO - Last raiser: 1
2025-10-31 19:00:33,267 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:33,268 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:00:33,269 - poker_game - INFO - Community cards: []
2025-10-31 19:00:33,269 - poker_game - INFO -   P0(Agent0): chips=993, bet=10, status=active
2025-10-31 19:00:33,270 - poker_game - INFO -   P1(Agent1): chips=6035, bet=20, status=active
2025-10-31 19:00:33,270 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:33,270 - poker_game - INFO -   P3(Agent3): chips=1911, bet=20, status=active
2025-10-31 19:00:33,271 - poker_game - INFO -   P4(Agent4): chips=1011, bet=0, status=active
2025-10-31 19:00:33,271 - poker_game - INFO - ==================================================
2025-10-31 19:00:33,272 - poker_game - INFO - ACTION_EXECUTED: Player 4 called 20
2025-10-31 19:00:33,284 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:00:33,285 - poker_game - INFO - Hand #19, Phase: preflop
2025-10-31 19:00:33,285 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 19:00:33,285 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 19:00:33,286 - poker_game - INFO - Last raiser: 1
2025-10-31 19:00:33,286 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:33,287 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:00:33,287 - poker_game - INFO - Community cards: []
2025-10-31 19:00:33,287 - poker_game - INFO -   P0(Agent0): chips=993, bet=10, status=active
2025-10-31 19:00:33,288 - poker_game - INFO -   P1(Agent1): chips=6035, bet=20, status=active
2025-10-31 19:00:33,288 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:33,288 - poker_game - INFO -   P3(Agent3): chips=1911, bet=20, status=active
2025-10-31 19:00:33,289 - poker_game - INFO -   P4(Agent4): chips=991, bet=20, status=active
2025-10-31 19:00:33,289 - poker_game - INFO - Extra: Action: Player 4 called 20
2025-10-31 19:00:33,290 - poker_game - INFO - ==================================================
2025-10-31 19:00:33,290 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:00:33,290 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:00:33,291 - poker_game - DEBUG - Active players: [0, 1, 3, 4]
2025-10-31 19:00:33,291 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 19:00:33,291 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:00:33,292 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:00:33,292 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 19:00:33,293 - poker_game - DEBUG - Player bets: [10, 20, 20, 20], Current bet: 20, All same: False
2025-10-31 19:00:33,293 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:00:33,294 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:00:33,295 - poker_game - INFO - Hand #19, Phase: preflop
2025-10-31 19:00:33,298 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:00:33,299 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 19:00:33,300 - poker_game - INFO - Last raiser: 1
2025-10-31 19:00:33,300 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:33,301 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:00:33,301 - poker_game - INFO - Community cards: []
2025-10-31 19:00:33,302 - poker_game - INFO -   P0(Agent0): chips=993, bet=10, status=active
2025-10-31 19:00:33,302 - poker_game - INFO -   P1(Agent1): chips=6035, bet=20, status=active
2025-10-31 19:00:33,302 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:33,303 - poker_game - INFO -   P3(Agent3): chips=1911, bet=20, status=active
2025-10-31 19:00:33,303 - poker_game - INFO -   P4(Agent4): chips=991, bet=20, status=active
2025-10-31 19:00:33,304 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:00:33,304 - poker_game - INFO - ==================================================
2025-10-31 19:00:33,406 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "4♠",
    "10♣"
  ],
  "community": [],
  "your_chips": 993,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 70,
  "to_call": 10,
  "dealer_button": 4,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6035,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1911,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 991,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (993)"
  ],
  "history": [
    "Player 1 folded",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 7♥, 5♦, Q♠",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Turn dealt: Q♣",
    "Player 4 raised to 52",
    "Player 0 called 52",
    "River dealt: 10♣",
    "Player 4 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣",
    "Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣",
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20"
  ]
}
2025-10-31 19:00:33,419 - poker_game - DEBUG - Create Session: {'id': 'e34b511b-506e-4f0f-9004-2c9c93ba36ad', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904833.4169037}
2025-10-31 19:00:35,495 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "プリフロップ（preflop）で、あなたの手札は「4♠ 10♣」です。これはあまり強い手ではありません。しかし、現在の状況では、あなたは既に10をベットしており、コール（call）に必要な金額も10です。他のプレイヤーのベット額もそれほど高くなく、ポット（pot）もそこそこ大きくなっています。ここでは、より多くの情報を見るためにコールするのが合理的です。もしフロップ（flop - 最初の3枚のコミュニティカード）で強い手ができる可能性があれば、その後に戦略を練ることができます。レイズ（raise - ベット額を上げる）するには、この手札ではリスクが高すぎます。フォールド（fold - 降りる）するには、既にベットしたチップがもったいないです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 192, 'promptTokenCount': 916, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 916}], 'totalTokenCount': 1108}, 'invocationId': 'e-f428c295-7c66-4d59-af56-ab40f47eec96', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'i2h2wzx4', 'timestamp': 1761904833.435385}]
2025-10-31 19:00:35,495 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:00:35,496 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 10,
  "reasoning": "プリフロップ（preflop）で、あなたの手札は「4♠ 10♣」です。これはあまり強い手ではありません。しかし、現在の状況では、あなたは既に10をベットしており、コール（call）に必要な金額も10です。他のプレイヤーのベット額もそれほど高くなく、ポット（pot）もそこそこ大きくなっています。ここでは、より多くの情報を見るためにコールするのが合理的です。もしフロップ（flop - 最初の3枚のコミュニティカード）で強い手ができる可能性があれば、その後に戦略を練ることができます。レイズ（raise - ベット額を上げる）するには、この手札ではリスクが高すぎます。フォールド（fold - 降りる）するには、既にベットしたチップがもったいないです。"
}
```
2025-10-31 19:00:35,496 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:00:35,496 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "プリフロップ（preflop）で、あなたの手札は「4♠ 10♣」です。これはあまり強い手ではありません。しかし、現在の状況では、あなたは既に10をベットしており、コール（call）に必要な金額も10です。他のプレイヤーのベット額もそれほど高くなく、ポット（pot）もそこそこ大きくなっています。ここでは、より多くの情報を見るためにコールするのが合理的です。もしフロップ（flop - 最初の3枚のコミュニティカード）で強い手ができる可能性があれば、その後に戦略を練ることができます。レイズ（raise - ベット額を上げる）するには、この手札ではリスクが高すぎます。フォールド（fold - 降りる）するには、既にベットしたチップがもったいないです。"\n}\n```'
2025-10-31 19:00:35,497 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:00:35,497 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "プリフロップ（preflop）で、あなたの手札は「4♠ 10♣」です。これはあまり強い手ではありません。しかし、現在の状況では、あなたは既に10をベットしており、コール（call）に必要な金額も10です。他のプレイヤーのベット額もそれほど高くなく、ポット（pot）もそこそこ大きくなっています。ここでは、より多くの情報を見るためにコールするのが合理的です。もしフロップ（flop - 最初の3枚のコミュニティカード）で強い手ができる可能性があれば、その後に戦略を練ることができます。レイズ（raise - ベット額を上げる）するには、この手札ではリスクが高すぎます。フォールド（fold - 降りる）するには、既にベットしたチップがもったいないです。"\n}'
2025-10-31 19:00:35,497 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 10,
  "reasoning": "プリフロップ（preflop）で、あなたの手札は「4♠ 10♣」です。これはあまり強い手ではありません。しかし、現在の状況では、あなたは既に10をベットしており、コール（call）に必要な金額も10です。他のプレイヤーのベット額もそれほど高くなく、ポット（pot）もそこそこ大きくなっています。ここでは、より多くの情報を見るためにコールするのが合理的です。もしフロップ（flop - 最初の3枚のコミュニティカード）で強い手ができる可能性があれば、その後に戦略を練ることができます。レイズ（raise - ベット額を上げる）するには、この手札ではリスクが高すぎます。フォールド（fold - 降りる）するには、既にベットしたチップがもったいないです。"
}
2025-10-31 19:00:35,497 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 10, 'reasoning': 'プリフロップ（preflop）で、あなたの手札は「4♠ 10♣」です。これはあまり強い手ではありません。しかし、現在の状況では、あなたは既に10をベットしており、コール（call）に必要な金額も10です。他のプレイヤーのベット額もそれほど高くなく、ポット（pot）もそこそこ大きくなっています。ここでは、より多くの情報を見るためにコールするのが合理的です。もしフロップ（flop - 最初の3枚のコミュニティカード）で強い手ができる可能性があれば、その後に戦略を練ることができます。レイズ（raise - ベット額を上げる）するには、この手札ではリスクが高すぎます。フォールド（fold - 降りる）するには、既にベットしたチップがもったいないです。'}
2025-10-31 19:00:35,497 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 10
2025-10-31 19:00:35,497 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (10)', 'raise (min 40)', 'all-in (993)']
2025-10-31 19:00:35,498 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (10)': 10
2025-10-31 19:00:35,498 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 10}
2025-10-31 19:00:35,498 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 10, プリフロップ（preflop）で、あなたの手札は「4♠ 10♣」です。これはあまり強い手ではありません。しかし、現在の状況では、あなたは既に10をベットしており、コール（call）に必要な金額も10です。他のプレイヤーのベット額もそれほど高くなく、ポット（pot）もそこそこ大きくなっています。ここでは、より多くの情報を見るためにコールするのが合理的です。もしフロップ（flop - 最初の3枚のコミュニティカード）で強い手ができる可能性があれば、その後に戦略を練ることができます。レイズ（raise - ベット額を上げる）するには、この手札ではリスクが高すぎます。フォールド（fold - 降りる）するには、既にベットしたチップがもったいないです。
2025-10-31 19:00:35,499 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 10
2025-10-31 19:00:35,499 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:00:35,500 - poker_game - INFO - Hand #19, Phase: preflop
2025-10-31 19:00:35,500 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:00:35,501 - poker_game - INFO - Pot: 70, Current bet: 20
2025-10-31 19:00:35,502 - poker_game - INFO - Last raiser: 1
2025-10-31 19:00:35,502 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:35,502 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:00:35,502 - poker_game - INFO - Community cards: []
2025-10-31 19:00:35,503 - poker_game - INFO -   P0(Agent0): chips=993, bet=10, status=active
2025-10-31 19:00:35,503 - poker_game - INFO -   P1(Agent1): chips=6035, bet=20, status=active
2025-10-31 19:00:35,504 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:35,504 - poker_game - INFO -   P3(Agent3): chips=1911, bet=20, status=active
2025-10-31 19:00:35,504 - poker_game - INFO -   P4(Agent4): chips=991, bet=20, status=active
2025-10-31 19:00:35,505 - poker_game - INFO - ==================================================
2025-10-31 19:00:35,509 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 10
2025-10-31 19:00:35,534 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:00:35,534 - poker_game - INFO - Hand #19, Phase: preflop
2025-10-31 19:00:35,535 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:00:35,535 - poker_game - INFO - Pot: 80, Current bet: 20
2025-10-31 19:00:35,535 - poker_game - INFO - Last raiser: 1
2025-10-31 19:00:35,536 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:35,537 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:00:35,538 - poker_game - INFO - Community cards: []
2025-10-31 19:00:35,539 - poker_game - INFO -   P0(Agent0): chips=983, bet=20, status=active
2025-10-31 19:00:35,540 - poker_game - INFO -   P1(Agent1): chips=6035, bet=20, status=active
2025-10-31 19:00:35,541 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:35,542 - poker_game - INFO -   P3(Agent3): chips=1911, bet=20, status=active
2025-10-31 19:00:35,542 - poker_game - INFO -   P4(Agent4): chips=991, bet=20, status=active
2025-10-31 19:00:35,543 - poker_game - INFO - Extra: Action: Player 0 called 10
2025-10-31 19:00:35,543 - poker_game - INFO - ==================================================
2025-10-31 19:00:35,543 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:00:35,544 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:00:35,544 - poker_game - DEBUG - Active players: [0, 1, 3, 4]
2025-10-31 19:00:35,544 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:00:35,545 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:00:35,545 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:00:35,545 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 19:00:35,546 - poker_game - DEBUG - Player bets: [20, 20, 20, 20], Current bet: 20, All same: True
2025-10-31 19:00:35,546 - poker_game - DEBUG - Active player indices: [0, 1, 3, 4]
2025-10-31 19:00:35,546 - poker_game - DEBUG - Last raiser index: 1
2025-10-31 19:00:35,546 - poker_game - DEBUG - Current player index: 1
2025-10-31 19:00:35,546 - poker_game - DEBUG - Next after last raiser 1: 3
2025-10-31 19:00:35,546 - poker_game - DEBUG - Betting continues: Current player 1 != next after raiser 3
2025-10-31 19:00:35,547 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:00:35,547 - poker_game - INFO - Hand #19, Phase: preflop
2025-10-31 19:00:35,547 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 19:00:35,548 - poker_game - INFO - Pot: 80, Current bet: 20
2025-10-31 19:00:35,548 - poker_game - INFO - Last raiser: 1
2025-10-31 19:00:35,548 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:35,548 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:00:35,549 - poker_game - INFO - Community cards: []
2025-10-31 19:00:35,549 - poker_game - INFO -   P0(Agent0): chips=983, bet=20, status=active
2025-10-31 19:00:35,549 - poker_game - INFO -   P1(Agent1): chips=6035, bet=20, status=active
2025-10-31 19:00:35,549 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:35,550 - poker_game - INFO -   P3(Agent3): chips=1911, bet=20, status=active
2025-10-31 19:00:35,550 - poker_game - INFO -   P4(Agent4): chips=991, bet=20, status=active
2025-10-31 19:00:35,550 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:00:35,551 - poker_game - INFO - ==================================================
2025-10-31 19:00:35,652 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "10♥",
    "2♣"
  ],
  "community": [],
  "your_chips": 6035,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 80,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 983,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1911,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 991,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 40)",
    "all-in (6035)"
  ],
  "history": [
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 7♥, 5♦, Q♠",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Turn dealt: Q♣",
    "Player 4 raised to 52",
    "Player 0 called 52",
    "River dealt: 10♣",
    "Player 4 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣",
    "Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣",
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 10"
  ]
}
2025-10-31 19:00:35,734 - poker_game - DEBUG - Create Session: {'id': 'd6d21ea6-9f3d-4c81-88ce-e235a57dab11', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904835.7314422}
2025-10-31 19:00:37,085 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は10と2で、これは非常に弱いハンドです。ポットも小さく、コールするにはリスクが高すぎます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 72, 'promptTokenCount': 916, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 916}], 'totalTokenCount': 988}, 'invocationId': 'e-7dfdb6dd-e55f-4b37-9d32-a22ade98356b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'mV1x4oeH', 'timestamp': 1761904835.748154}]
2025-10-31 19:00:37,086 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:00:37,086 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は10と2で、これは非常に弱いハンドです。ポットも小さく、コールするにはリスクが高すぎます。"
}
```
2025-10-31 19:00:37,086 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:00:37,086 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は10と2で、これは非常に弱いハンドです。ポットも小さく、コールするにはリスクが高すぎます。"\n}\n```'
2025-10-31 19:00:37,087 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:00:37,087 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は10と2で、これは非常に弱いハンドです。ポットも小さく、コールするにはリスクが高すぎます。"\n}'
2025-10-31 19:00:37,087 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後）で、私の手札は10と2で、これは非常に弱いハンドです。ポットも小さく、コールするにはリスクが高すぎます。"
}
2025-10-31 19:00:37,087 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（最初のカードが配られた後）で、私の手札は10と2で、これは非常に弱いハンドです。ポットも小さく、コールするにはリスクが高すぎます。'}
2025-10-31 19:00:37,087 - poker_game - DEBUG - [Agent1] Extracted values - action: 'fold', amount: 0
2025-10-31 19:00:37,087 - poker_game - DEBUG - [Agent1] Action 'fold' normalized - amount set to 0
2025-10-31 19:00:37,087 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:00:37,087 - poker_game - INFO - [Agent1] Successfully parsed decision: fold, 0, プリフロップ（最初のカードが配られた後）で、私の手札は10と2で、これは非常に弱いハンドです。ポットも小さく、コールするにはリスクが高すぎます。
2025-10-31 19:00:37,088 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'fold' with amount 0
2025-10-31 19:00:37,089 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:00:37,089 - poker_game - INFO - Hand #19, Phase: preflop
2025-10-31 19:00:37,089 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 19:00:37,090 - poker_game - INFO - Pot: 80, Current bet: 20
2025-10-31 19:00:37,090 - poker_game - INFO - Last raiser: 1
2025-10-31 19:00:37,090 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:37,091 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:00:37,091 - poker_game - INFO - Community cards: []
2025-10-31 19:00:37,092 - poker_game - INFO -   P0(Agent0): chips=983, bet=20, status=active
2025-10-31 19:00:37,092 - poker_game - INFO -   P1(Agent1): chips=6035, bet=20, status=active
2025-10-31 19:00:37,092 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:37,093 - poker_game - INFO -   P3(Agent3): chips=1911, bet=20, status=active
2025-10-31 19:00:37,093 - poker_game - INFO -   P4(Agent4): chips=991, bet=20, status=active
2025-10-31 19:00:37,094 - poker_game - INFO - ==================================================
2025-10-31 19:00:37,094 - poker_game - INFO - ACTION_EXECUTED: Player 1 folded
2025-10-31 19:00:37,107 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:00:37,107 - poker_game - INFO - Hand #19, Phase: preflop
2025-10-31 19:00:37,108 - poker_game - INFO - Current player: 1, Dealer: 4
2025-10-31 19:00:37,108 - poker_game - INFO - Pot: 80, Current bet: 20
2025-10-31 19:00:37,108 - poker_game - INFO - Last raiser: 1
2025-10-31 19:00:37,109 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:37,109 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:37,110 - poker_game - INFO - Community cards: []
2025-10-31 19:00:37,110 - poker_game - INFO -   P0(Agent0): chips=983, bet=20, status=active
2025-10-31 19:00:37,110 - poker_game - INFO -   P1(Agent1): chips=6035, bet=20, status=folded
2025-10-31 19:00:37,111 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:37,111 - poker_game - INFO -   P3(Agent3): chips=1911, bet=20, status=active
2025-10-31 19:00:37,112 - poker_game - INFO -   P4(Agent4): chips=991, bet=20, status=active
2025-10-31 19:00:37,112 - poker_game - INFO - Extra: Action: Player 1 folded
2025-10-31 19:00:37,112 - poker_game - INFO - ==================================================
2025-10-31 19:00:37,113 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:00:37,113 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:00:37,113 - poker_game - DEBUG - Active players: [0, 3, 4]
2025-10-31 19:00:37,114 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:00:37,114 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:00:37,114 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:00:37,114 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:00:37,114 - poker_game - DEBUG - Player bets: [20, 20, 20], Current bet: 20, All same: True
2025-10-31 19:00:37,114 - poker_game - DEBUG - Active player indices: [0, 3, 4]
2025-10-31 19:00:37,115 - poker_game - DEBUG - Last raiser index: 1
2025-10-31 19:00:37,115 - poker_game - DEBUG - Current player index: 3
2025-10-31 19:00:37,115 - poker_game - INFO - Betting complete: Last raiser 1 is no longer active
2025-10-31 19:00:37,115 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:00:37,115 - poker_game - INFO - Hand #19, Phase: preflop
2025-10-31 19:00:37,116 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:00:37,116 - poker_game - INFO - Pot: 80, Current bet: 20
2025-10-31 19:00:37,116 - poker_game - INFO - Last raiser: 1
2025-10-31 19:00:37,117 - poker_game - INFO - Betting round complete: True
2025-10-31 19:00:37,117 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:37,118 - poker_game - INFO - Community cards: []
2025-10-31 19:00:37,118 - poker_game - INFO -   P0(Agent0): chips=983, bet=20, status=active
2025-10-31 19:00:37,118 - poker_game - INFO -   P1(Agent1): chips=6035, bet=20, status=folded
2025-10-31 19:00:37,119 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:37,119 - poker_game - INFO -   P3(Agent3): chips=1911, bet=20, status=active
2025-10-31 19:00:37,120 - poker_game - INFO -   P4(Agent4): chips=991, bet=20, status=active
2025-10-31 19:00:37,120 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:00:37,121 - poker_game - INFO - ==================================================
2025-10-31 19:00:37,228 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 19:00:37,229 - poker_game - INFO - Betting round complete: True
2025-10-31 19:00:37,229 - poker_game - INFO - Remaining players: 3
2025-10-31 19:00:37,230 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 19:00:37,230 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:00:37,231 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 19:00:37,231 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 19:00:37,240 - poker_game - INFO - Starting new betting round
2025-10-31 19:00:37,241 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:00:37,241 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:00:37,242 - poker_game - DEBUG - Active players for new betting round: [0, 3, 4]
2025-10-31 19:00:37,242 - poker_game - DEBUG - Dealer button: 4
2025-10-31 19:00:37,242 - poker_game - INFO - First actor: Player 0 (by phase rule), was 3
2025-10-31 19:00:37,243 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:00:37,243 - poker_game - INFO - Hand #19, Phase: flop
2025-10-31 19:00:37,243 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:00:37,244 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:37,244 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:37,245 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:37,245 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:37,246 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠']
2025-10-31 19:00:37,246 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:37,247 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:37,247 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:37,248 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:37,248 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:37,248 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 19:00:37,249 - poker_game - INFO - ==================================================
2025-10-31 19:00:37,251 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "flop",
  "your_cards": [
    "4♠",
    "10♣"
  ],
  "community": [
    "2♥",
    "Q♦",
    "9♠"
  ],
  "your_chips": 983,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 80,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6035,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1911,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 991,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (983)"
  ],
  "history": [
    "Player 0 checked",
    "Flop dealt: 7♥, 5♦, Q♠",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Turn dealt: Q♣",
    "Player 4 raised to 52",
    "Player 0 called 52",
    "River dealt: 10♣",
    "Player 4 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣",
    "Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣",
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 10",
    "Player 1 folded",
    "Flop dealt: 2♥, Q♦, 9♠"
  ]
}
2025-10-31 19:00:37,263 - poker_game - DEBUG - Create Session: {'id': 'eedeb3b5-b51e-4cbb-ac2d-78a90bd263ec', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904837.260547}
2025-10-31 19:00:39,441 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠）を組み合わせても、強い役（強いポーカーハンド）はできていません。Q♦がコミュニティカードにあるため、Qをペア（同じカードが2枚揃うこと）にできるカードがあれば強いのですが、あなたの手札にはありません。しかし、ポット（これまでに賭けられたチップの総額）は80で、コール（相手のベットと同額を支払うこと）する必要があるのは0です。これは、前のプレイヤーがベットしなかったか、チェック（ベットせずに次のプレイヤーに番を回すこと）したことを意味します。この状況では、リスクを冒してベット（チップを賭けること）するよりも、チェックをして様子を見るのが賢明です。これにより、無料で次のカード（ターンカード）を見ることができます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 227, 'promptTokenCount': 938, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 938}], 'totalTokenCount': 1165}, 'invocationId': 'e-71b49a87-cffe-4bda-b878-2e387acabdcd', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'gawlomC6', 'timestamp': 1761904837.275377}]
2025-10-31 19:00:39,442 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:00:39,442 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠）を組み合わせても、強い役（強いポーカーハンド）はできていません。Q♦がコミュニティカードにあるため、Qをペア（同じカードが2枚揃うこと）にできるカードがあれば強いのですが、あなたの手札にはありません。しかし、ポット（これまでに賭けられたチップの総額）は80で、コール（相手のベットと同額を支払うこと）する必要があるのは0です。これは、前のプレイヤーがベットしなかったか、チェック（ベットせずに次のプレイヤーに番を回すこと）したことを意味します。この状況では、リスクを冒してベット（チップを賭けること）するよりも、チェックをして様子を見るのが賢明です。これにより、無料で次のカード（ターンカード）を見ることができます。"
}
```
2025-10-31 19:00:39,443 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:00:39,443 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠）を組み合わせても、強い役（強いポーカーハンド）はできていません。Q♦がコミュニティカードにあるため、Qをペア（同じカードが2枚揃うこと）にできるカードがあれば強いのですが、あなたの手札にはありません。しかし、ポット（これまでに賭けられたチップの総額）は80で、コール（相手のベットと同額を支払うこと）する必要があるのは0です。これは、前のプレイヤーがベットしなかったか、チェック（ベットせずに次のプレイヤーに番を回すこと）したことを意味します。この状況では、リスクを冒してベット（チップを賭けること）するよりも、チェックをして様子を見るのが賢明です。これにより、無料で次のカード（ターンカード）を見ることができます。"\n}\n```'
2025-10-31 19:00:39,443 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:00:39,444 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠）を組み合わせても、強い役（強いポーカーハンド）はできていません。Q♦がコミュニティカードにあるため、Qをペア（同じカードが2枚揃うこと）にできるカードがあれば強いのですが、あなたの手札にはありません。しかし、ポット（これまでに賭けられたチップの総額）は80で、コール（相手のベットと同額を支払うこと）する必要があるのは0です。これは、前のプレイヤーがベットしなかったか、チェック（ベットせずに次のプレイヤーに番を回すこと）したことを意味します。この状況では、リスクを冒してベット（チップを賭けること）するよりも、チェックをして様子を見るのが賢明です。これにより、無料で次のカード（ターンカード）を見ることができます。"\n}'
2025-10-31 19:00:39,444 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠）を組み合わせても、強い役（強いポーカーハンド）はできていません。Q♦がコミュニティカードにあるため、Qをペア（同じカードが2枚揃うこと）にできるカードがあれば強いのですが、あなたの手札にはありません。しかし、ポット（これまでに賭けられたチップの総額）は80で、コール（相手のベットと同額を支払うこと）する必要があるのは0です。これは、前のプレイヤーがベットしなかったか、チェック（ベットせずに次のプレイヤーに番を回すこと）したことを意味します。この状況では、リスクを冒してベット（チップを賭けること）するよりも、チェックをして様子を見るのが賢明です。これにより、無料で次のカード（ターンカード）を見ることができます。"
}
2025-10-31 19:00:39,444 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠）を組み合わせても、強い役（強いポーカーハンド）はできていません。Q♦がコミュニティカードにあるため、Qをペア（同じカードが2枚揃うこと）にできるカードがあれば強いのですが、あなたの手札にはありません。しかし、ポット（これまでに賭けられたチップの総額）は80で、コール（相手のベットと同額を支払うこと）する必要があるのは0です。これは、前のプレイヤーがベットしなかったか、チェック（ベットせずに次のプレイヤーに番を回すこと）したことを意味します。この状況では、リスクを冒してベット（チップを賭けること）するよりも、チェックをして様子を見るのが賢明です。これにより、無料で次のカード（ターンカード）を見ることができます。'}
2025-10-31 19:00:39,444 - poker_game - DEBUG - [Agent0] Extracted values - action: 'check', amount: 0
2025-10-31 19:00:39,444 - poker_game - DEBUG - [Agent0] Action 'check' normalized - amount set to 0
2025-10-31 19:00:39,445 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:00:39,445 - poker_game - INFO - [Agent0] Successfully parsed decision: check, 0, フロップ（最初の3枚のコミュニティカード）では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠）を組み合わせても、強い役（強いポーカーハンド）はできていません。Q♦がコミュニティカードにあるため、Qをペア（同じカードが2枚揃うこと）にできるカードがあれば強いのですが、あなたの手札にはありません。しかし、ポット（これまでに賭けられたチップの総額）は80で、コール（相手のベットと同額を支払うこと）する必要があるのは0です。これは、前のプレイヤーがベットしなかったか、チェック（ベットせずに次のプレイヤーに番を回すこと）したことを意味します。この状況では、リスクを冒してベット（チップを賭けること）するよりも、チェックをして様子を見るのが賢明です。これにより、無料で次のカード（ターンカード）を見ることができます。
2025-10-31 19:00:39,446 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'check' with amount 0
2025-10-31 19:00:39,447 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:00:39,447 - poker_game - INFO - Hand #19, Phase: flop
2025-10-31 19:00:39,448 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:00:39,448 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:39,448 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:39,449 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:39,449 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:39,450 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠']
2025-10-31 19:00:39,451 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:39,451 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:39,452 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:39,452 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:39,453 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:39,453 - poker_game - INFO - ==================================================
2025-10-31 19:00:39,454 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 19:00:39,467 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:00:39,467 - poker_game - INFO - Hand #19, Phase: flop
2025-10-31 19:00:39,468 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:00:39,469 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:39,469 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:39,470 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:39,470 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:39,471 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠']
2025-10-31 19:00:39,471 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:39,472 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:39,472 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:39,472 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:39,473 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:39,474 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 19:00:39,474 - poker_game - INFO - ==================================================
2025-10-31 19:00:39,475 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:00:39,476 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:00:39,476 - poker_game - DEBUG - Active players: [0, 3, 4]
2025-10-31 19:00:39,477 - poker_game - INFO - Advanced from player 0 to player 3 (seat order)
2025-10-31 19:00:39,477 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:00:39,478 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:00:39,478 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:00:39,478 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:00:39,478 - poker_game - DEBUG - Active player indices: [0, 3, 4]
2025-10-31 19:00:39,479 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:00:39,479 - poker_game - DEBUG - Current player index: 3
2025-10-31 19:00:39,479 - poker_game - DEBUG - First actor index: 0
2025-10-31 19:00:39,479 - poker_game - DEBUG - Betting continues: Current player 3 != first actor 0
2025-10-31 19:00:39,479 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:00:39,480 - poker_game - INFO - Hand #19, Phase: flop
2025-10-31 19:00:39,481 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:00:39,482 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:39,482 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:39,483 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:39,483 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:39,484 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠']
2025-10-31 19:00:39,484 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:39,485 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:39,485 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:39,486 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:39,486 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:39,487 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:00:39,487 - poker_game - INFO - ==================================================
2025-10-31 19:00:39,590 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "flop",
  "your_cards": [
    "9♣",
    "7♠"
  ],
  "community": [
    "2♥",
    "Q♦",
    "9♠"
  ],
  "your_chips": 1911,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 80,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 983,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6035,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 991,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1911)"
  ],
  "history": [
    "Flop dealt: 7♥, 5♦, Q♠",
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Turn dealt: Q♣",
    "Player 4 raised to 52",
    "Player 0 called 52",
    "River dealt: 10♣",
    "Player 4 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣",
    "Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣",
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 10",
    "Player 1 folded",
    "Flop dealt: 2♥, Q♦, 9♠",
    "Player 0 checked"
  ]
}
2025-10-31 19:00:39,602 - poker_game - DEBUG - Create Session: {'id': '5950340c-7609-4fd0-a5ac-76ed2c96aff5', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904839.5994854}
2025-10-31 19:00:41,588 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、あなたはペア（9）を作りました。しかし、ボードにはQもあり、相手がより強いペアやツーペアを持っている可能性があります。ポットは80で、コール額は0なので、チェックして次のカード（ターン）を見るのが最善です。これにより、追加のベットなしで次のカードを見ることができます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 106, 'promptTokenCount': 938, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 938}], 'totalTokenCount': 1044}, 'invocationId': 'e-d7508f06-131d-43b0-8366-de9b985caa1b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'ze0sDMYv', 'timestamp': 1761904839.614476}]
2025-10-31 19:00:41,588 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:00:41,589 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、あなたはペア（9）を作りました。しかし、ボードにはQもあり、相手がより強いペアやツーペアを持っている可能性があります。ポットは80で、コール額は0なので、チェックして次のカード（ターン）を見るのが最善です。これにより、追加のベットなしで次のカードを見ることができます。"
}
```
2025-10-31 19:00:41,589 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:00:41,590 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、あなたはペア（9）を作りました。しかし、ボードにはQもあり、相手がより強いペアやツーペアを持っている可能性があります。ポットは80で、コール額は0なので、チェックして次のカード（ターン）を見るのが最善です。これにより、追加のベットなしで次のカードを見ることができます。"\n}\n```'
2025-10-31 19:00:41,590 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:00:41,590 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、あなたはペア（9）を作りました。しかし、ボードにはQもあり、相手がより強いペアやツーペアを持っている可能性があります。ポットは80で、コール額は0なので、チェックして次のカード（ターン）を見るのが最善です。これにより、追加のベットなしで次のカードを見ることができます。"\n}'
2025-10-31 19:00:41,590 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、あなたはペア（9）を作りました。しかし、ボードにはQもあり、相手がより強いペアやツーペアを持っている可能性があります。ポットは80で、コール額は0なので、チェックして次のカード（ターン）を見るのが最善です。これにより、追加のベットなしで次のカードを見ることができます。"
}
2025-10-31 19:00:41,590 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'フロップ（コミュニティカードが開かれた段階）で、あなたはペア（9）を作りました。しかし、ボードにはQもあり、相手がより強いペアやツーペアを持っている可能性があります。ポットは80で、コール額は0なので、チェックして次のカード（ターン）を見るのが最善です。これにより、追加のベットなしで次のカードを見ることができます。'}
2025-10-31 19:00:41,591 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 19:00:41,591 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 19:00:41,591 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:00:41,591 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, フロップ（コミュニティカードが開かれた段階）で、あなたはペア（9）を作りました。しかし、ボードにはQもあり、相手がより強いペアやツーペアを持っている可能性があります。ポットは80で、コール額は0なので、チェックして次のカード（ターン）を見るのが最善です。これにより、追加のベットなしで次のカードを見ることができます。
2025-10-31 19:00:41,592 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 19:00:41,593 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:00:41,593 - poker_game - INFO - Hand #19, Phase: flop
2025-10-31 19:00:41,594 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:00:41,594 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:41,595 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:41,595 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:41,595 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:41,596 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠']
2025-10-31 19:00:41,596 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:41,596 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:41,598 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:41,598 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:41,599 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:41,600 - poker_game - INFO - ==================================================
2025-10-31 19:00:41,602 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 19:00:41,614 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:00:41,615 - poker_game - INFO - Hand #19, Phase: flop
2025-10-31 19:00:41,616 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:00:41,616 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:41,617 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:41,617 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:41,617 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:41,618 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠']
2025-10-31 19:00:41,618 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:41,619 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:41,619 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:41,620 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:41,620 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:41,620 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 19:00:41,621 - poker_game - INFO - ==================================================
2025-10-31 19:00:41,622 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:00:41,623 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:00:41,624 - poker_game - DEBUG - Active players: [0, 3, 4]
2025-10-31 19:00:41,624 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 19:00:41,624 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:00:41,625 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:00:41,625 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:00:41,626 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:00:41,626 - poker_game - DEBUG - Active player indices: [0, 3, 4]
2025-10-31 19:00:41,626 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:00:41,626 - poker_game - DEBUG - Current player index: 4
2025-10-31 19:00:41,627 - poker_game - DEBUG - First actor index: 0
2025-10-31 19:00:41,627 - poker_game - DEBUG - Betting continues: Current player 4 != first actor 0
2025-10-31 19:00:41,627 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:00:41,628 - poker_game - INFO - Hand #19, Phase: flop
2025-10-31 19:00:41,629 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 19:00:41,630 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:41,632 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:41,632 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:41,633 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:41,633 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠']
2025-10-31 19:00:41,634 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:41,634 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:41,634 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:41,635 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:41,635 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:41,636 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:00:41,636 - poker_game - INFO - ==================================================
2025-10-31 19:00:41,737 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "flop",
  "your_cards": [
    "4♥",
    "A♠"
  ],
  "community": [
    "2♥",
    "Q♦",
    "9♠"
  ],
  "your_chips": 991,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 80,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 983,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6035,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1911,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (991)"
  ],
  "history": [
    "Player 4 raised to 20",
    "Player 0 called 20",
    "Turn dealt: Q♣",
    "Player 4 raised to 52",
    "Player 0 called 52",
    "River dealt: 10♣",
    "Player 4 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣",
    "Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣",
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 10",
    "Player 1 folded",
    "Flop dealt: 2♥, Q♦, 9♠",
    "Player 0 checked",
    "Player 3 checked"
  ]
}
2025-10-31 19:00:41,752 - poker_game - DEBUG - Create Session: {'id': 'fbbd4027-e364-488c-bc4b-1d92d2149c5d', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904841.7483628}
2025-10-31 19:00:43,967 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_edhtFhMaCs0OfWvt58SX2fuE', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1251, 'totalTokenCount': 1268}, 'invocationId': 'e-7a83b1c9-20f5-4219-b45d-c415c6e08ada', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'vYlLcqNW', 'timestamp': 1761904841.764978}, {'content': {'parts': [{'functionResponse': {'id': 'call_edhtFhMaCs0OfWvt58SX2fuE', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-7a83b1c9-20f5-4219-b45d-c415c6e08ada', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '4UiLwyYg', 'timestamp': 1761904842.813568}, {'content': {'parts': [{'functionCall': {'id': 'call_iFY1pqZIBMuknOtlmDxvQCa4', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1775, 'totalTokenCount': 1795}, 'invocationId': 'e-7a83b1c9-20f5-4219-b45d-c415c6e08ada', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'dexwc52c', 'timestamp': 1761904842.818615}, {'content': {'parts': [{'functionResponse': {'id': 'call_iFY1pqZIBMuknOtlmDxvQCa4', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-7a83b1c9-20f5-4219-b45d-c415c6e08ada', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'dElyHy9v', 'timestamp': 1761904844.30737}, {'content': {'parts': [{'text': '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在のフロップで強い手がないため、相手の動きを観察しつつポットを維持するためにチェックします。"\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 58, 'promptTokenCount': 1337, 'totalTokenCount': 1395}, 'invocationId': 'e-7a83b1c9-20f5-4219-b45d-c415c6e08ada', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'b7NAQKA8', 'timestamp': 1761904844.309421}]
2025-10-31 19:00:43,967 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:00:43,968 - poker_game - DEBUG - {
  "action": "check",
  "amount": 0,
  "reasoning": "現在のフロップで強い手がないため、相手の動きを観察しつつポットを維持するためにチェックします。"
}
2025-10-31 19:00:43,968 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:00:43,968 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在のフロップで強い手がないため、相手の動きを観察しつつポットを維持するためにチェックします。"\n}'
2025-10-31 19:00:43,968 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:00:43,968 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "現在のフロップで強い手がないため、相手の動きを観察しつつポットを維持するためにチェックします。"
}
2025-10-31 19:00:43,968 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '現在のフロップで強い手がないため、相手の動きを観察しつつポットを維持するためにチェックします。'}
2025-10-31 19:00:43,968 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 19:00:43,968 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 19:00:43,968 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:00:43,968 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 現在のフロップで強い手がないため、相手の動きを観察しつつポットを維持するためにチェックします。
2025-10-31 19:00:43,969 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 19:00:43,969 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:00:43,969 - poker_game - INFO - Hand #19, Phase: flop
2025-10-31 19:00:43,970 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 19:00:43,970 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:43,970 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:43,970 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:43,970 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:43,971 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠']
2025-10-31 19:00:43,971 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:43,971 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:43,971 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:43,972 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:43,972 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:43,972 - poker_game - INFO - ==================================================
2025-10-31 19:00:43,972 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 19:00:43,981 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:00:43,981 - poker_game - INFO - Hand #19, Phase: flop
2025-10-31 19:00:43,981 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 19:00:43,981 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:43,982 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:43,982 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:43,982 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:43,982 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠']
2025-10-31 19:00:43,982 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:43,983 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:43,983 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:43,983 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:43,983 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:43,983 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 19:00:43,983 - poker_game - INFO - ==================================================
2025-10-31 19:00:43,984 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:00:43,984 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:00:43,984 - poker_game - DEBUG - Active players: [0, 3, 4]
2025-10-31 19:00:43,984 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 19:00:43,984 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:00:43,985 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:00:43,985 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:00:43,985 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:00:43,985 - poker_game - DEBUG - Active player indices: [0, 3, 4]
2025-10-31 19:00:43,985 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:00:43,985 - poker_game - DEBUG - Current player index: 0
2025-10-31 19:00:43,985 - poker_game - DEBUG - First actor index: 0
2025-10-31 19:00:43,985 - poker_game - INFO - Betting complete: Back to first actor 0 (all players have acted)
2025-10-31 19:00:43,986 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:00:43,986 - poker_game - INFO - Hand #19, Phase: flop
2025-10-31 19:00:43,986 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:00:43,986 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:43,986 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:43,987 - poker_game - INFO - Betting round complete: True
2025-10-31 19:00:43,987 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:43,987 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠']
2025-10-31 19:00:43,987 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:43,988 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:43,988 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:43,990 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:43,990 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:43,990 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:00:43,991 - poker_game - INFO - ==================================================
2025-10-31 19:00:44,091 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 19:00:44,092 - poker_game - INFO - Betting round complete: True
2025-10-31 19:00:44,093 - poker_game - INFO - Remaining players: 3
2025-10-31 19:00:44,093 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 19:00:44,093 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:00:44,094 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 19:00:44,094 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 19:00:44,108 - poker_game - INFO - Starting new betting round
2025-10-31 19:00:44,109 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:00:44,109 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:00:44,109 - poker_game - DEBUG - Active players for new betting round: [0, 3, 4]
2025-10-31 19:00:44,110 - poker_game - DEBUG - Dealer button: 4
2025-10-31 19:00:44,110 - poker_game - INFO - First actor: Player 0 (by phase rule), was 0
2025-10-31 19:00:44,110 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:00:44,111 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:00:44,111 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:00:44,111 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:44,112 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:44,112 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:44,113 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:44,113 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:00:44,114 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:44,114 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:44,114 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:44,115 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:44,115 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:44,116 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 19:00:44,117 - poker_game - INFO - ==================================================
2025-10-31 19:00:44,117 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "turn",
  "your_cards": [
    "4♠",
    "10♣"
  ],
  "community": [
    "2♥",
    "Q♦",
    "9♠",
    "3♠"
  ],
  "your_chips": 983,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 80,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6035,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1911,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 991,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (983)"
  ],
  "history": [
    "Turn dealt: Q♣",
    "Player 4 raised to 52",
    "Player 0 called 52",
    "River dealt: 10♣",
    "Player 4 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣",
    "Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣",
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 10",
    "Player 1 folded",
    "Flop dealt: 2♥, Q♦, 9♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: 3♠"
  ]
}
2025-10-31 19:00:44,131 - poker_game - DEBUG - Create Session: {'id': '4ce71bc6-f3ba-4d41-9396-7ae2b8f6c406', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904844.1278212}
2025-10-31 19:00:46,071 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠, 3♠）から、ツーペア（Qと9）ができています。これは悪くないハンドですが、相手がより強いツーペアやスリーカード、あるいはストレートやフラッシュを持っている可能性も考慮する必要があります。相手のベット額が0（チェック）であり、あなたもベットする必要がないため、チェックを選択します。これにより、次のリバーカードを見て、より正確な判断をすることができます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 145, 'promptTokenCount': 929, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 929}], 'totalTokenCount': 1074}, 'invocationId': 'e-a355ce5c-9099-44ad-9e30-3423aefa76d6', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'WIfg4Cij', 'timestamp': 1761904844.14139}]
2025-10-31 19:00:46,071 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:00:46,072 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "現在の状況では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠, 3♠）から、ツーペア（Qと9）ができています。これは悪くないハンドですが、相手がより強いツーペアやスリーカード、あるいはストレートやフラッシュを持っている可能性も考慮する必要があります。相手のベット額が0（チェック）であり、あなたもベットする必要がないため、チェックを選択します。これにより、次のリバーカードを見て、より正確な判断をすることができます。"
}
```
2025-10-31 19:00:46,072 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:00:46,072 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠, 3♠）から、ツーペア（Qと9）ができています。これは悪くないハンドですが、相手がより強いツーペアやスリーカード、あるいはストレートやフラッシュを持っている可能性も考慮する必要があります。相手のベット額が0（チェック）であり、あなたもベットする必要がないため、チェックを選択します。これにより、次のリバーカードを見て、より正確な判断をすることができます。"\n}\n```'
2025-10-31 19:00:46,073 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:00:46,073 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "現在の状況では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠, 3♠）から、ツーペア（Qと9）ができています。これは悪くないハンドですが、相手がより強いツーペアやスリーカード、あるいはストレートやフラッシュを持っている可能性も考慮する必要があります。相手のベット額が0（チェック）であり、あなたもベットする必要がないため、チェックを選択します。これにより、次のリバーカードを見て、より正確な判断をすることができます。"\n}'
2025-10-31 19:00:46,073 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "現在の状況では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠, 3♠）から、ツーペア（Qと9）ができています。これは悪くないハンドですが、相手がより強いツーペアやスリーカード、あるいはストレートやフラッシュを持っている可能性も考慮する必要があります。相手のベット額が0（チェック）であり、あなたもベットする必要がないため、チェックを選択します。これにより、次のリバーカードを見て、より正確な判断をすることができます。"
}
2025-10-31 19:00:46,073 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '現在の状況では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠, 3♠）から、ツーペア（Qと9）ができています。これは悪くないハンドですが、相手がより強いツーペアやスリーカード、あるいはストレートやフラッシュを持っている可能性も考慮する必要があります。相手のベット額が0（チェック）であり、あなたもベットする必要がないため、チェックを選択します。これにより、次のリバーカードを見て、より正確な判断をすることができます。'}
2025-10-31 19:00:46,073 - poker_game - DEBUG - [Agent0] Extracted values - action: 'check', amount: 0
2025-10-31 19:00:46,074 - poker_game - DEBUG - [Agent0] Action 'check' normalized - amount set to 0
2025-10-31 19:00:46,074 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:00:46,074 - poker_game - INFO - [Agent0] Successfully parsed decision: check, 0, 現在の状況では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠, 3♠）から、ツーペア（Qと9）ができています。これは悪くないハンドですが、相手がより強いツーペアやスリーカード、あるいはストレートやフラッシュを持っている可能性も考慮する必要があります。相手のベット額が0（チェック）であり、あなたもベットする必要がないため、チェックを選択します。これにより、次のリバーカードを見て、より正確な判断をすることができます。
2025-10-31 19:00:46,076 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'check' with amount 0
2025-10-31 19:00:46,076 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:00:46,077 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:00:46,077 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:00:46,078 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:46,079 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:46,079 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:46,080 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:46,080 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:00:46,081 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:46,082 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:46,083 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:46,083 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:46,084 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:46,084 - poker_game - INFO - ==================================================
2025-10-31 19:00:46,085 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 19:00:46,103 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:00:46,104 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:00:46,105 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:00:46,105 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:46,106 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:46,106 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:46,107 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:46,107 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:00:46,108 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:46,108 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:46,108 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:46,109 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:46,109 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:46,110 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 19:00:46,110 - poker_game - INFO - ==================================================
2025-10-31 19:00:46,111 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:00:46,111 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:00:46,112 - poker_game - DEBUG - Active players: [0, 3, 4]
2025-10-31 19:00:46,112 - poker_game - INFO - Advanced from player 0 to player 3 (seat order)
2025-10-31 19:00:46,112 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:00:46,114 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:00:46,116 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:00:46,116 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:00:46,117 - poker_game - DEBUG - Active player indices: [0, 3, 4]
2025-10-31 19:00:46,118 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:00:46,119 - poker_game - DEBUG - Current player index: 3
2025-10-31 19:00:46,119 - poker_game - DEBUG - First actor index: 0
2025-10-31 19:00:46,120 - poker_game - DEBUG - Betting continues: Current player 3 != first actor 0
2025-10-31 19:00:46,120 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:00:46,120 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:00:46,121 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:00:46,121 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:46,121 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:46,122 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:46,122 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:46,122 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:00:46,122 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:46,123 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:46,123 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:46,123 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:46,124 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:46,124 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:00:46,125 - poker_game - INFO - ==================================================
2025-10-31 19:00:46,227 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "turn",
  "your_cards": [
    "9♣",
    "7♠"
  ],
  "community": [
    "2♥",
    "Q♦",
    "9♠",
    "3♠"
  ],
  "your_chips": 1911,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 80,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 983,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6035,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 991,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1911)"
  ],
  "history": [
    "Player 4 raised to 52",
    "Player 0 called 52",
    "River dealt: 10♣",
    "Player 4 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣",
    "Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣",
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 10",
    "Player 1 folded",
    "Flop dealt: 2♥, Q♦, 9♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: 3♠",
    "Player 0 checked"
  ]
}
2025-10-31 19:00:46,241 - poker_game - DEBUG - Create Session: {'id': '2ada7831-d8bc-482a-aee5-d0d84ed0dd13', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904846.238055}
2025-10-31 19:00:47,988 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "あなたの手札は9♣7♠で、コミュニティカードは2♥Q♦9♠3♠です。これでペアができていますが（9のペア）、あまり強くありません。相手（プレイヤー0とプレイヤー4）はまだチェックしているので、より強い手札を持っている可能性は低いですが、 bluff (ブラフ) の可能性もあります。損失を抑え、次のカード（リバー）を見てから判断するためにチェックします。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 119, 'promptTokenCount': 928, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 928}], 'totalTokenCount': 1047}, 'invocationId': 'e-6fe98771-a951-42dc-b709-e585c772c22f', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'gNM9sP5F', 'timestamp': 1761904846.256521}]
2025-10-31 19:00:47,989 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:00:47,990 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "あなたの手札は9♣7♠で、コミュニティカードは2♥Q♦9♠3♠です。これでペアができていますが（9のペア）、あまり強くありません。相手（プレイヤー0とプレイヤー4）はまだチェックしているので、より強い手札を持っている可能性は低いですが、 bluff (ブラフ) の可能性もあります。損失を抑え、次のカード（リバー）を見てから判断するためにチェックします。"
}
```
2025-10-31 19:00:47,990 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:00:47,990 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "あなたの手札は9♣7♠で、コミュニティカードは2♥Q♦9♠3♠です。これでペアができていますが（9のペア）、あまり強くありません。相手（プレイヤー0とプレイヤー4）はまだチェックしているので、より強い手札を持っている可能性は低いですが、 bluff (ブラフ) の可能性もあります。損失を抑え、次のカード（リバー）を見てから判断するためにチェックします。"\n}\n```'
2025-10-31 19:00:47,991 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:00:47,991 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "あなたの手札は9♣7♠で、コミュニティカードは2♥Q♦9♠3♠です。これでペアができていますが（9のペア）、あまり強くありません。相手（プレイヤー0とプレイヤー4）はまだチェックしているので、より強い手札を持っている可能性は低いですが、 bluff (ブラフ) の可能性もあります。損失を抑え、次のカード（リバー）を見てから判断するためにチェックします。"\n}'
2025-10-31 19:00:47,991 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "あなたの手札は9♣7♠で、コミュニティカードは2♥Q♦9♠3♠です。これでペアができていますが（9のペア）、あまり強くありません。相手（プレイヤー0とプレイヤー4）はまだチェックしているので、より強い手札を持っている可能性は低いですが、 bluff (ブラフ) の可能性もあります。損失を抑え、次のカード（リバー）を見てから判断するためにチェックします。"
}
2025-10-31 19:00:47,992 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'あなたの手札は9♣7♠で、コミュニティカードは2♥Q♦9♠3♠です。これでペアができていますが（9のペア）、あまり強くありません。相手（プレイヤー0とプレイヤー4）はまだチェックしているので、より強い手札を持っている可能性は低いですが、 bluff (ブラフ) の可能性もあります。損失を抑え、次のカード（リバー）を見てから判断するためにチェックします。'}
2025-10-31 19:00:47,992 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 19:00:47,992 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 19:00:47,992 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:00:47,992 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, あなたの手札は9♣7♠で、コミュニティカードは2♥Q♦9♠3♠です。これでペアができていますが（9のペア）、あまり強くありません。相手（プレイヤー0とプレイヤー4）はまだチェックしているので、より強い手札を持っている可能性は低いですが、 bluff (ブラフ) の可能性もあります。損失を抑え、次のカード（リバー）を見てから判断するためにチェックします。
2025-10-31 19:00:47,993 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 19:00:47,994 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:00:47,995 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:00:47,995 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:00:47,995 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:47,996 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:47,996 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:47,997 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:47,997 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:00:47,998 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:47,998 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:47,999 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:48,001 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:48,003 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:48,005 - poker_game - INFO - ==================================================
2025-10-31 19:00:48,006 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 19:00:48,022 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:00:48,022 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:00:48,023 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:00:48,024 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:48,024 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:48,024 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:48,025 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:48,025 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:00:48,025 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:48,026 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:48,026 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:48,027 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:48,027 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:48,027 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 19:00:48,028 - poker_game - INFO - ==================================================
2025-10-31 19:00:48,028 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:00:48,029 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:00:48,029 - poker_game - DEBUG - Active players: [0, 3, 4]
2025-10-31 19:00:48,029 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 19:00:48,029 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:00:48,030 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:00:48,030 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:00:48,030 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:00:48,030 - poker_game - DEBUG - Active player indices: [0, 3, 4]
2025-10-31 19:00:48,031 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:00:48,031 - poker_game - DEBUG - Current player index: 4
2025-10-31 19:00:48,031 - poker_game - DEBUG - First actor index: 0
2025-10-31 19:00:48,031 - poker_game - DEBUG - Betting continues: Current player 4 != first actor 0
2025-10-31 19:00:48,031 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:00:48,032 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:00:48,033 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 19:00:48,033 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:00:48,034 - poker_game - INFO - Last raiser: None
2025-10-31 19:00:48,035 - poker_game - INFO - Betting round complete: False
2025-10-31 19:00:48,036 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:00:48,038 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:00:48,039 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:00:48,039 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:00:48,040 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:00:48,041 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:00:48,041 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:00:48,041 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:00:48,041 - poker_game - INFO - ==================================================
2025-10-31 19:00:48,149 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "turn",
  "your_cards": [
    "4♥",
    "A♠"
  ],
  "community": [
    "2♥",
    "Q♦",
    "9♠",
    "3♠"
  ],
  "your_chips": 991,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 80,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 983,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6035,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1911,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (991)"
  ],
  "history": [
    "Player 0 called 52",
    "River dealt: 10♣",
    "Player 4 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣",
    "Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣",
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 10",
    "Player 1 folded",
    "Flop dealt: 2♥, Q♦, 9♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: 3♠",
    "Player 0 checked",
    "Player 3 checked"
  ]
}
2025-10-31 19:00:48,165 - poker_game - DEBUG - Create Session: {'id': '7f241425-20be-4e1b-bb5b-308a81942c98', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904848.1612175}
2025-10-31 19:00:58,204 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 19:01:02,593 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_Z0RJeH1aXNP1qUjxpI44GRjl', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1249, 'totalTokenCount': 1266}, 'invocationId': 'e-28245205-388b-4cc0-9348-0f14fc29df0d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'SE3HcD65', 'timestamp': 1761904848.177102}, {'content': {'parts': [{'functionResponse': {'id': 'call_Z0RJeH1aXNP1qUjxpI44GRjl', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-28245205-388b-4cc0-9348-0f14fc29df0d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'iW3xPoHY', 'timestamp': 1761904849.314825}, {'content': {'parts': [{'functionCall': {'id': 'call_OPfIDpn6URrJjIjs4HFHr7v0', 'args': {'game_state': {'your_id': 4, 'phase': 'turn', 'your_cards': ['4♥', 'A♠'], 'community': ['2♥', 'Q♦', '9♠', '3♠'], 'your_chips': 991, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 20, 'pot': 80, 'to_call': 0, 'dealer_button': 4, 'current_turn': 4, 'players': [{'id': 0, 'chips': 983, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 6035, 'bet': 0, 'status': 'folded'}, {'id': 3, 'chips': 1911, 'bet': 0, 'status': 'active'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (991)'], 'history': ['Player 0 called 52', 'River dealt: 10♣', 'Player 4 checked', 'Player 0 checked', 'Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣', 'Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣', 'Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦', 'Player 0 posted small blind 10', 'Player 1 posted big blind 20', 'Player 3 called 20', 'Player 4 called 20', 'Player 0 called 10', 'Player 1 folded', 'Flop dealt: 2♥, Q♦, 9♠', 'Player 0 checked', 'Player 3 checked', 'Player 4 checked', 'Turn dealt: 3♠', 'Player 0 checked', 'Player 3 checked']}, 'call_amount': 0, 'pot_after_call': 80, 'equity': 0.5}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 470, 'promptTokenCount': 1773, 'totalTokenCount': 2243}, 'invocationId': 'e-28245205-388b-4cc0-9348-0f14fc29df0d', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'nr8t00jI', 'timestamp': 1761904849.317404}, {'content': {'parts': [{'functionResponse': {'id': 'call_OPfIDpn6URrJjIjs4HFHr7v0', 'name': 'action_decision', 'response': {'action': 'raise', 'amount': 40, 'reasoning': '期待値が見込める（40.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 40'}}}], 'role': 'user'}, 'invocationId': 'e-28245205-388b-4cc0-9348-0f14fc29df0d', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'U5nswmoE', 'timestamp': 1761904860.808369}, {'content': {'parts': [{'text': '{"action":"raise","amount":40,"reasoning":"期待値が見込める（40.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 40"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 56, 'promptTokenCount': 2296, 'totalTokenCount': 2352}, 'invocationId': 'e-28245205-388b-4cc0-9348-0f14fc29df0d', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'c6kOvI1x', 'timestamp': 1761904860.810549}]
2025-10-31 19:01:02,593 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:01:02,593 - poker_game - DEBUG - {"action":"raise","amount":40,"reasoning":"期待値が見込める（40.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 40"}
2025-10-31 19:01:02,594 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:01:02,594 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"raise","amount":40,"reasoning":"期待値が見込める（40.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 40"}'
2025-10-31 19:01:02,594 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:01:02,594 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"raise","amount":40,"reasoning":"期待値が見込める（40.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 40"}
2025-10-31 19:01:02,594 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'raise', 'amount': 40, 'reasoning': '期待値が見込める（40.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 40'}
2025-10-31 19:01:02,594 - poker_game - DEBUG - [Agent4] Extracted values - action: 'raise', amount: 40
2025-10-31 19:01:02,595 - poker_game - DEBUG - [Agent4] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (991)']
2025-10-31 19:01:02,595 - poker_game - DEBUG - [Agent4] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 19:01:02,595 - poker_game - DEBUG - [Agent4] Raise amount 40 is valid (min: 20)
2025-10-31 19:01:02,595 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'raise', 'amount': 40}
2025-10-31 19:01:02,595 - poker_game - INFO - [Agent4] Successfully parsed decision: raise, 40, 期待値が見込める（40.00(ポットに対して50.00%）ため、1/2ポットでセミブラフします。ベット額: 40
2025-10-31 19:01:02,596 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'raise' with amount 40
2025-10-31 19:01:02,596 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:01:02,596 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:01:02,597 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 19:01:02,597 - poker_game - INFO - Pot: 80, Current bet: 0
2025-10-31 19:01:02,597 - poker_game - INFO - Last raiser: None
2025-10-31 19:01:02,597 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:02,597 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:02,598 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:01:02,598 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:01:02,598 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:02,598 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:02,598 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:01:02,599 - poker_game - INFO -   P4(Agent4): chips=991, bet=0, status=active
2025-10-31 19:01:02,599 - poker_game - INFO - ==================================================
2025-10-31 19:01:02,599 - poker_game - INFO - ACTION_EXECUTED: Player 4 raised to 40
2025-10-31 19:01:02,609 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:01:02,609 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:01:02,609 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 19:01:02,609 - poker_game - INFO - Pot: 120, Current bet: 40
2025-10-31 19:01:02,610 - poker_game - INFO - Last raiser: 4
2025-10-31 19:01:02,610 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:02,610 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:02,611 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:01:02,611 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:01:02,611 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:02,612 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:02,612 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:01:02,613 - poker_game - INFO -   P4(Agent4): chips=951, bet=40, status=active
2025-10-31 19:01:02,614 - poker_game - INFO - Extra: Action: Player 4 raised to 40
2025-10-31 19:01:02,614 - poker_game - INFO - ==================================================
2025-10-31 19:01:02,614 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:01:02,615 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:01:02,615 - poker_game - DEBUG - Active players: [0, 3, 4]
2025-10-31 19:01:02,615 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 19:01:02,615 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:01:02,616 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:01:02,616 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:01:02,616 - poker_game - DEBUG - Player bets: [0, 0, 40], Current bet: 40, All same: False
2025-10-31 19:01:02,616 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:01:02,616 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:01:02,617 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:01:02,617 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:01:02,617 - poker_game - INFO - Pot: 120, Current bet: 40
2025-10-31 19:01:02,618 - poker_game - INFO - Last raiser: 4
2025-10-31 19:01:02,618 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:02,618 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:02,618 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:01:02,618 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:01:02,619 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:02,619 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:02,619 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:01:02,619 - poker_game - INFO -   P4(Agent4): chips=951, bet=40, status=active
2025-10-31 19:01:02,620 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:01:02,620 - poker_game - INFO - ==================================================
2025-10-31 19:01:02,721 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "turn",
  "your_cards": [
    "4♠",
    "10♣"
  ],
  "community": [
    "2♥",
    "Q♦",
    "9♠",
    "3♠"
  ],
  "your_chips": 983,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 120,
  "to_call": 40,
  "dealer_button": 4,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6035,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1911,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 951,
      "bet": 40,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (40)",
    "raise (min 60)",
    "all-in (983)"
  ],
  "history": [
    "River dealt: 10♣",
    "Player 4 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣",
    "Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣",
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 10",
    "Player 1 folded",
    "Flop dealt: 2♥, Q♦, 9♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: 3♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 raised to 40"
  ]
}
2025-10-31 19:01:02,733 - poker_game - DEBUG - Create Session: {'id': 'b72c5fcc-bf2b-42a9-a910-fa9ddbabdb9b', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904862.730099}
2025-10-31 19:01:05,426 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 40,\n  "reasoning": "現在の状況では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠, 3♠）から、ストレートもフラッシュも完成していません。あなたのハンドは、Q♦と4♠のペア（ワンペア）であり、これはそれほど強いハンドではありません。しかし、ポットサイズ（120）と比較してコールに必要な金額（40）はそれほど大きくなく、相手のベット額もそれほど高くありません。相手がレイズしてきたものの、まだフロップ（最初の3枚のコミュニティカード）からの進行で、相手のベットはそれほど大きくないため、ワンペアでもコールして様子を見る価値があります。また、相手のベット額（40）は、あなた自身がポットに既にベットしている額（20）よりも大きいですが、コールすることでポットの大部分を獲得できる可能性もあります。フォールド（降りる）にはまだ早いと考えられます。レイズ（さらにベット額を上げる）は、あなたのハンドがそれほど強くないため、リスクが高いです。したがって、コールして次のカード（リバー）でハンドが改善されるか、相手の次のアクションを見て判断するのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 283, 'promptTokenCount': 931, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 931}], 'totalTokenCount': 1214}, 'invocationId': 'e-26c096ff-7692-489a-801c-3c6eba04734f', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'ewNFxgwg', 'timestamp': 1761904862.7447}]
2025-10-31 19:01:05,427 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:01:05,427 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 40,
  "reasoning": "現在の状況では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠, 3♠）から、ストレートもフラッシュも完成していません。あなたのハンドは、Q♦と4♠のペア（ワンペア）であり、これはそれほど強いハンドではありません。しかし、ポットサイズ（120）と比較してコールに必要な金額（40）はそれほど大きくなく、相手のベット額もそれほど高くありません。相手がレイズしてきたものの、まだフロップ（最初の3枚のコミュニティカード）からの進行で、相手のベットはそれほど大きくないため、ワンペアでもコールして様子を見る価値があります。また、相手のベット額（40）は、あなた自身がポットに既にベットしている額（20）よりも大きいですが、コールすることでポットの大部分を獲得できる可能性もあります。フォールド（降りる）にはまだ早いと考えられます。レイズ（さらにベット額を上げる）は、あなたのハンドがそれほど強くないため、リスクが高いです。したがって、コールして次のカード（リバー）でハンドが改善されるか、相手の次のアクションを見て判断するのが最善です。"
}
```
2025-10-31 19:01:05,428 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:01:05,428 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 40,\n  "reasoning": "現在の状況では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠, 3♠）から、ストレートもフラッシュも完成していません。あなたのハンドは、Q♦と4♠のペア（ワンペア）であり、これはそれほど強いハンドではありません。しかし、ポットサイズ（120）と比較してコールに必要な金額（40）はそれほど大きくなく、相手のベット額もそれほど高くありません。相手がレイズしてきたものの、まだフロップ（最初の3枚のコミュニティカード）からの進行で、相手のベットはそれほど大きくないため、ワンペアでもコールして様子を見る価値があります。また、相手のベット額（40）は、あなた自身がポットに既にベットしている額（20）よりも大きいですが、コールすることでポットの大部分を獲得できる可能性もあります。フォールド（降りる）にはまだ早いと考えられます。レイズ（さらにベット額を上げる）は、あなたのハンドがそれほど強くないため、リスクが高いです。したがって、コールして次のカード（リバー）でハンドが改善されるか、相手の次のアクションを見て判断するのが最善です。"\n}\n```'
2025-10-31 19:01:05,428 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:01:05,428 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 40,\n  "reasoning": "現在の状況では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠, 3♠）から、ストレートもフラッシュも完成していません。あなたのハンドは、Q♦と4♠のペア（ワンペア）であり、これはそれほど強いハンドではありません。しかし、ポットサイズ（120）と比較してコールに必要な金額（40）はそれほど大きくなく、相手のベット額もそれほど高くありません。相手がレイズしてきたものの、まだフロップ（最初の3枚のコミュニティカード）からの進行で、相手のベットはそれほど大きくないため、ワンペアでもコールして様子を見る価値があります。また、相手のベット額（40）は、あなた自身がポットに既にベットしている額（20）よりも大きいですが、コールすることでポットの大部分を獲得できる可能性もあります。フォールド（降りる）にはまだ早いと考えられます。レイズ（さらにベット額を上げる）は、あなたのハンドがそれほど強くないため、リスクが高いです。したがって、コールして次のカード（リバー）でハンドが改善されるか、相手の次のアクションを見て判断するのが最善です。"\n}'
2025-10-31 19:01:05,428 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 40,
  "reasoning": "現在の状況では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠, 3♠）から、ストレートもフラッシュも完成していません。あなたのハンドは、Q♦と4♠のペア（ワンペア）であり、これはそれほど強いハンドではありません。しかし、ポットサイズ（120）と比較してコールに必要な金額（40）はそれほど大きくなく、相手のベット額もそれほど高くありません。相手がレイズしてきたものの、まだフロップ（最初の3枚のコミュニティカード）からの進行で、相手のベットはそれほど大きくないため、ワンペアでもコールして様子を見る価値があります。また、相手のベット額（40）は、あなた自身がポットに既にベットしている額（20）よりも大きいですが、コールすることでポットの大部分を獲得できる可能性もあります。フォールド（降りる）にはまだ早いと考えられます。レイズ（さらにベット額を上げる）は、あなたのハンドがそれほど強くないため、リスクが高いです。したがって、コールして次のカード（リバー）でハンドが改善されるか、相手の次のアクションを見て判断するのが最善です。"
}
2025-10-31 19:01:05,429 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 40, 'reasoning': '現在の状況では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠, 3♠）から、ストレートもフラッシュも完成していません。あなたのハンドは、Q♦と4♠のペア（ワンペア）であり、これはそれほど強いハンドではありません。しかし、ポットサイズ（120）と比較してコールに必要な金額（40）はそれほど大きくなく、相手のベット額もそれほど高くありません。相手がレイズしてきたものの、まだフロップ（最初の3枚のコミュニティカード）からの進行で、相手のベットはそれほど大きくないため、ワンペアでもコールして様子を見る価値があります。また、相手のベット額（40）は、あなた自身がポットに既にベットしている額（20）よりも大きいですが、コールすることでポットの大部分を獲得できる可能性もあります。フォールド（降りる）にはまだ早いと考えられます。レイズ（さらにベット額を上げる）は、あなたのハンドがそれほど強くないため、リスクが高いです。したがって、コールして次のカード（リバー）でハンドが改善されるか、相手の次のアクションを見て判断するのが最善です。'}
2025-10-31 19:01:05,429 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 40
2025-10-31 19:01:05,429 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (40)', 'raise (min 60)', 'all-in (983)']
2025-10-31 19:01:05,429 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (40)': 40
2025-10-31 19:01:05,429 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 40}
2025-10-31 19:01:05,429 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 40, 現在の状況では、あなたの手札（4♠, 10♣）とコミュニティカード（2♥, Q♦, 9♠, 3♠）から、ストレートもフラッシュも完成していません。あなたのハンドは、Q♦と4♠のペア（ワンペア）であり、これはそれほど強いハンドではありません。しかし、ポットサイズ（120）と比較してコールに必要な金額（40）はそれほど大きくなく、相手のベット額もそれほど高くありません。相手がレイズしてきたものの、まだフロップ（最初の3枚のコミュニティカード）からの進行で、相手のベットはそれほど大きくないため、ワンペアでもコールして様子を見る価値があります。また、相手のベット額（40）は、あなた自身がポットに既にベットしている額（20）よりも大きいですが、コールすることでポットの大部分を獲得できる可能性もあります。フォールド（降りる）にはまだ早いと考えられます。レイズ（さらにベット額を上げる）は、あなたのハンドがそれほど強くないため、リスクが高いです。したがって、コールして次のカード（リバー）でハンドが改善されるか、相手の次のアクションを見て判断するのが最善です。
2025-10-31 19:01:05,431 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 40
2025-10-31 19:01:05,431 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:01:05,432 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:01:05,432 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:01:05,433 - poker_game - INFO - Pot: 120, Current bet: 40
2025-10-31 19:01:05,433 - poker_game - INFO - Last raiser: 4
2025-10-31 19:01:05,434 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:05,434 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:05,435 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:01:05,435 - poker_game - INFO -   P0(Agent0): chips=983, bet=0, status=active
2025-10-31 19:01:05,436 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:05,436 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:05,438 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:01:05,440 - poker_game - INFO -   P4(Agent4): chips=951, bet=40, status=active
2025-10-31 19:01:05,441 - poker_game - INFO - ==================================================
2025-10-31 19:01:05,442 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 40
2025-10-31 19:01:05,452 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:01:05,452 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:01:05,452 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:01:05,452 - poker_game - INFO - Pot: 160, Current bet: 40
2025-10-31 19:01:05,452 - poker_game - INFO - Last raiser: 4
2025-10-31 19:01:05,453 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:05,453 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:05,453 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:01:05,453 - poker_game - INFO -   P0(Agent0): chips=943, bet=40, status=active
2025-10-31 19:01:05,454 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:05,454 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:05,455 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:01:05,455 - poker_game - INFO -   P4(Agent4): chips=951, bet=40, status=active
2025-10-31 19:01:05,455 - poker_game - INFO - Extra: Action: Player 0 called 40
2025-10-31 19:01:05,455 - poker_game - INFO - ==================================================
2025-10-31 19:01:05,456 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:01:05,456 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:01:05,456 - poker_game - DEBUG - Active players: [0, 3, 4]
2025-10-31 19:01:05,456 - poker_game - INFO - Advanced from player 0 to player 3 (seat order)
2025-10-31 19:01:05,457 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:01:05,457 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:01:05,457 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:01:05,457 - poker_game - DEBUG - Player bets: [40, 0, 40], Current bet: 40, All same: False
2025-10-31 19:01:05,458 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:01:05,458 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:01:05,458 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:01:05,458 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:01:05,459 - poker_game - INFO - Pot: 160, Current bet: 40
2025-10-31 19:01:05,459 - poker_game - INFO - Last raiser: 4
2025-10-31 19:01:05,460 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:05,460 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:05,462 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:01:05,462 - poker_game - INFO -   P0(Agent0): chips=943, bet=40, status=active
2025-10-31 19:01:05,463 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:05,463 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:05,464 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:01:05,464 - poker_game - INFO -   P4(Agent4): chips=951, bet=40, status=active
2025-10-31 19:01:05,465 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:01:05,465 - poker_game - INFO - ==================================================
2025-10-31 19:01:05,566 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "turn",
  "your_cards": [
    "9♣",
    "7♠"
  ],
  "community": [
    "2♥",
    "Q♦",
    "9♠",
    "3♠"
  ],
  "your_chips": 1911,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 160,
  "to_call": 40,
  "dealer_button": 4,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 40,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6035,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 951,
      "bet": 40,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (40)",
    "raise (min 60)",
    "all-in (1911)"
  ],
  "history": [
    "Player 4 checked",
    "Player 0 checked",
    "Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣",
    "Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣",
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 10",
    "Player 1 folded",
    "Flop dealt: 2♥, Q♦, 9♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: 3♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 raised to 40",
    "Player 0 called 40"
  ]
}
2025-10-31 19:01:05,582 - poker_game - DEBUG - Create Session: {'id': 'acad096c-484c-417f-bcd2-2861a4b30c79', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904865.5779462}
2025-10-31 19:01:08,005 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 40,\n  "reasoning": "あなたの手札は「9♣ 7♠」、コミュニティカードは「2♥ Q♦ 9♠ 3♠」です。あなたはボードにペア（9）を持っており、これは悪くないハンドです。しかし、相手（Player 4）がレイズしており、まだポットはそれほど大きくありません（160）。コール（40）することで、次のカード（リバー）を見る権利を得られます。もしリバーであなたのハンドが強くなる（例えば9が3枚目になったり、ストレートやフラッシュが完成したり）すれば、有利に戦える可能性があります。フォールド（見捨てる）するには、まだハンドが強すぎる可能性があります。レイズ（さらにベット額を上げる）するには、相手のハンドが不明なためリスクが高すぎます。したがって、コールが最もバランスの取れた選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 207, 'promptTokenCount': 932, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 932}], 'totalTokenCount': 1139}, 'invocationId': 'e-e7259333-3748-46a2-a488-910c7afc398e', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '6AVOTiV8', 'timestamp': 1761904865.5934}]
2025-10-31 19:01:08,005 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:01:08,005 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 40,
  "reasoning": "あなたの手札は「9♣ 7♠」、コミュニティカードは「2♥ Q♦ 9♠ 3♠」です。あなたはボードにペア（9）を持っており、これは悪くないハンドです。しかし、相手（Player 4）がレイズしており、まだポットはそれほど大きくありません（160）。コール（40）することで、次のカード（リバー）を見る権利を得られます。もしリバーであなたのハンドが強くなる（例えば9が3枚目になったり、ストレートやフラッシュが完成したり）すれば、有利に戦える可能性があります。フォールド（見捨てる）するには、まだハンドが強すぎる可能性があります。レイズ（さらにベット額を上げる）するには、相手のハンドが不明なためリスクが高すぎます。したがって、コールが最もバランスの取れた選択です。"
}
```
2025-10-31 19:01:08,006 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:01:08,006 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 40,\n  "reasoning": "あなたの手札は「9♣ 7♠」、コミュニティカードは「2♥ Q♦ 9♠ 3♠」です。あなたはボードにペア（9）を持っており、これは悪くないハンドです。しかし、相手（Player 4）がレイズしており、まだポットはそれほど大きくありません（160）。コール（40）することで、次のカード（リバー）を見る権利を得られます。もしリバーであなたのハンドが強くなる（例えば9が3枚目になったり、ストレートやフラッシュが完成したり）すれば、有利に戦える可能性があります。フォールド（見捨てる）するには、まだハンドが強すぎる可能性があります。レイズ（さらにベット額を上げる）するには、相手のハンドが不明なためリスクが高すぎます。したがって、コールが最もバランスの取れた選択です。"\n}\n```'
2025-10-31 19:01:08,006 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:01:08,006 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 40,\n  "reasoning": "あなたの手札は「9♣ 7♠」、コミュニティカードは「2♥ Q♦ 9♠ 3♠」です。あなたはボードにペア（9）を持っており、これは悪くないハンドです。しかし、相手（Player 4）がレイズしており、まだポットはそれほど大きくありません（160）。コール（40）することで、次のカード（リバー）を見る権利を得られます。もしリバーであなたのハンドが強くなる（例えば9が3枚目になったり、ストレートやフラッシュが完成したり）すれば、有利に戦える可能性があります。フォールド（見捨てる）するには、まだハンドが強すぎる可能性があります。レイズ（さらにベット額を上げる）するには、相手のハンドが不明なためリスクが高すぎます。したがって、コールが最もバランスの取れた選択です。"\n}'
2025-10-31 19:01:08,006 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 40,
  "reasoning": "あなたの手札は「9♣ 7♠」、コミュニティカードは「2♥ Q♦ 9♠ 3♠」です。あなたはボードにペア（9）を持っており、これは悪くないハンドです。しかし、相手（Player 4）がレイズしており、まだポットはそれほど大きくありません（160）。コール（40）することで、次のカード（リバー）を見る権利を得られます。もしリバーであなたのハンドが強くなる（例えば9が3枚目になったり、ストレートやフラッシュが完成したり）すれば、有利に戦える可能性があります。フォールド（見捨てる）するには、まだハンドが強すぎる可能性があります。レイズ（さらにベット額を上げる）するには、相手のハンドが不明なためリスクが高すぎます。したがって、コールが最もバランスの取れた選択です。"
}
2025-10-31 19:01:08,007 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 40, 'reasoning': 'あなたの手札は「9♣ 7♠」、コミュニティカードは「2♥ Q♦ 9♠ 3♠」です。あなたはボードにペア（9）を持っており、これは悪くないハンドです。しかし、相手（Player 4）がレイズしており、まだポットはそれほど大きくありません（160）。コール（40）することで、次のカード（リバー）を見る権利を得られます。もしリバーであなたのハンドが強くなる（例えば9が3枚目になったり、ストレートやフラッシュが完成したり）すれば、有利に戦える可能性があります。フォールド（見捨てる）するには、まだハンドが強すぎる可能性があります。レイズ（さらにベット額を上げる）するには、相手のハンドが不明なためリスクが高すぎます。したがって、コールが最もバランスの取れた選択です。'}
2025-10-31 19:01:08,007 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 40
2025-10-31 19:01:08,007 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'call (40)', 'raise (min 60)', 'all-in (1911)']
2025-10-31 19:01:08,007 - poker_game - DEBUG - [Agent3] Call amount extracted from 'call (40)': 40
2025-10-31 19:01:08,007 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 40}
2025-10-31 19:01:08,007 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 40, あなたの手札は「9♣ 7♠」、コミュニティカードは「2♥ Q♦ 9♠ 3♠」です。あなたはボードにペア（9）を持っており、これは悪くないハンドです。しかし、相手（Player 4）がレイズしており、まだポットはそれほど大きくありません（160）。コール（40）することで、次のカード（リバー）を見る権利を得られます。もしリバーであなたのハンドが強くなる（例えば9が3枚目になったり、ストレートやフラッシュが完成したり）すれば、有利に戦える可能性があります。フォールド（見捨てる）するには、まだハンドが強すぎる可能性があります。レイズ（さらにベット額を上げる）するには、相手のハンドが不明なためリスクが高すぎます。したがって、コールが最もバランスの取れた選択です。
2025-10-31 19:01:08,008 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 40
2025-10-31 19:01:08,008 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:01:08,009 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:01:08,009 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:01:08,009 - poker_game - INFO - Pot: 160, Current bet: 40
2025-10-31 19:01:08,009 - poker_game - INFO - Last raiser: 4
2025-10-31 19:01:08,009 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:08,010 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:08,010 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:01:08,010 - poker_game - INFO -   P0(Agent0): chips=943, bet=40, status=active
2025-10-31 19:01:08,010 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:08,011 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:08,011 - poker_game - INFO -   P3(Agent3): chips=1911, bet=0, status=active
2025-10-31 19:01:08,011 - poker_game - INFO -   P4(Agent4): chips=951, bet=40, status=active
2025-10-31 19:01:08,011 - poker_game - INFO - ==================================================
2025-10-31 19:01:08,011 - poker_game - INFO - ACTION_EXECUTED: Player 3 called 40
2025-10-31 19:01:08,019 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:01:08,019 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:01:08,020 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:01:08,020 - poker_game - INFO - Pot: 200, Current bet: 40
2025-10-31 19:01:08,020 - poker_game - INFO - Last raiser: 4
2025-10-31 19:01:08,021 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:08,021 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:08,021 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:01:08,021 - poker_game - INFO -   P0(Agent0): chips=943, bet=40, status=active
2025-10-31 19:01:08,022 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:08,022 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:08,022 - poker_game - INFO -   P3(Agent3): chips=1871, bet=40, status=active
2025-10-31 19:01:08,022 - poker_game - INFO -   P4(Agent4): chips=951, bet=40, status=active
2025-10-31 19:01:08,022 - poker_game - INFO - Extra: Action: Player 3 called 40
2025-10-31 19:01:08,023 - poker_game - INFO - ==================================================
2025-10-31 19:01:08,023 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:01:08,023 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:01:08,023 - poker_game - DEBUG - Active players: [0, 3, 4]
2025-10-31 19:01:08,023 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 19:01:08,024 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:01:08,024 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:01:08,024 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:01:08,024 - poker_game - DEBUG - Player bets: [40, 40, 40], Current bet: 40, All same: True
2025-10-31 19:01:08,024 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 19:01:08,025 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:01:08,025 - poker_game - INFO - Hand #19, Phase: turn
2025-10-31 19:01:08,025 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 19:01:08,025 - poker_game - INFO - Pot: 200, Current bet: 40
2025-10-31 19:01:08,026 - poker_game - INFO - Last raiser: 4
2025-10-31 19:01:08,026 - poker_game - INFO - Betting round complete: True
2025-10-31 19:01:08,026 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:08,026 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠']
2025-10-31 19:01:08,027 - poker_game - INFO -   P0(Agent0): chips=943, bet=40, status=active
2025-10-31 19:01:08,027 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:08,027 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:08,027 - poker_game - INFO -   P3(Agent3): chips=1871, bet=40, status=active
2025-10-31 19:01:08,028 - poker_game - INFO -   P4(Agent4): chips=951, bet=40, status=active
2025-10-31 19:01:08,028 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:01:08,028 - poker_game - INFO - ==================================================
2025-10-31 19:01:08,129 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 19:01:08,130 - poker_game - INFO - Betting round complete: True
2025-10-31 19:01:08,130 - poker_game - INFO - Remaining players: 3
2025-10-31 19:01:08,130 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 19:01:08,131 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:01:08,131 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 19:01:08,131 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 19:01:08,142 - poker_game - INFO - Starting new betting round
2025-10-31 19:01:08,142 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:01:08,142 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:01:08,143 - poker_game - DEBUG - Active players for new betting round: [0, 3, 4]
2025-10-31 19:01:08,143 - poker_game - DEBUG - Dealer button: 4
2025-10-31 19:01:08,143 - poker_game - INFO - First actor: Player 0 (by phase rule), was 4
2025-10-31 19:01:08,144 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:01:08,145 - poker_game - INFO - Hand #19, Phase: river
2025-10-31 19:01:08,145 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:01:08,146 - poker_game - INFO - Pot: 200, Current bet: 0
2025-10-31 19:01:08,146 - poker_game - INFO - Last raiser: None
2025-10-31 19:01:08,147 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:08,147 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:08,148 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠', '6♠']
2025-10-31 19:01:08,148 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:08,149 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:08,149 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:08,150 - poker_game - INFO -   P3(Agent3): chips=1871, bet=0, status=active
2025-10-31 19:01:08,150 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=active
2025-10-31 19:01:08,151 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 19:01:08,151 - poker_game - INFO - ==================================================
2025-10-31 19:01:08,152 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "river",
  "your_cards": [
    "4♠",
    "10♣"
  ],
  "community": [
    "2♥",
    "Q♦",
    "9♠",
    "3♠",
    "6♠"
  ],
  "your_chips": 943,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 200,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6035,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1871,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 951,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (943)"
  ],
  "history": [
    "Showdown: Player 0 hand=Two Pair: Qs and 4s - Q♠, Q♣, 10♣, 4♥, 4♣ cards=4♥, 4♣",
    "Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣",
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 10",
    "Player 1 folded",
    "Flop dealt: 2♥, Q♦, 9♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: 3♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 raised to 40",
    "Player 0 called 40",
    "Player 3 called 40",
    "River dealt: 6♠"
  ]
}
2025-10-31 19:01:08,165 - poker_game - DEBUG - Create Session: {'id': '60a516d2-6e4b-4249-b561-9f18817cfbfb', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904868.1615334}
2025-10-31 19:01:10,302 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）に到達し、あなたの手札は「4♠」「10♣」です。コミュニティカードは「2♥」「Q♦」「9♠」「3♠」「6♠」です。これにより、あなたは「♠（スペード）」のスリーカード（同じスートのカードが3枚揃った状態）が完成しました（あなたの「4♠」とコミュニティカードの「9♠」「3♠」「6♠」）。しかし、相手のプレイヤー3は「1871」チップ、プレイヤー4は「951」チップを持っており、ポットは「200」です。前回のターンでプレイヤー4が「40」にレイズし、あなたとプレイヤー3がコールしました。リバーで、相手からのベットがないため、チェック（ベットせずに次のプレイヤーにターンを渡すこと）を選択します。これにより、ショーダウン（お互いの手札を見せ合って勝者を決めること）に進むことができます。もし相手がベットしてきた場合は、あなたのハンドの強さを考慮してコールするかフォールドするかを判断します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 266, 'promptTokenCount': 937, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 937}], 'totalTokenCount': 1203}, 'invocationId': 'e-a773e5b8-6972-4b1d-8274-8ce1f826ea6b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'mZX3lYek', 'timestamp': 1761904868.176556}]
2025-10-31 19:01:10,302 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:01:10,303 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最後のコミュニティカードが配られた後）に到達し、あなたの手札は「4♠」「10♣」です。コミュニティカードは「2♥」「Q♦」「9♠」「3♠」「6♠」です。これにより、あなたは「♠（スペード）」のスリーカード（同じスートのカードが3枚揃った状態）が完成しました（あなたの「4♠」とコミュニティカードの「9♠」「3♠」「6♠」）。しかし、相手のプレイヤー3は「1871」チップ、プレイヤー4は「951」チップを持っており、ポットは「200」です。前回のターンでプレイヤー4が「40」にレイズし、あなたとプレイヤー3がコールしました。リバーで、相手からのベットがないため、チェック（ベットせずに次のプレイヤーにターンを渡すこと）を選択します。これにより、ショーダウン（お互いの手札を見せ合って勝者を決めること）に進むことができます。もし相手がベットしてきた場合は、あなたのハンドの強さを考慮してコールするかフォールドするかを判断します。"
}
```
2025-10-31 19:01:10,303 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:01:10,303 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）に到達し、あなたの手札は「4♠」「10♣」です。コミュニティカードは「2♥」「Q♦」「9♠」「3♠」「6♠」です。これにより、あなたは「♠（スペード）」のスリーカード（同じスートのカードが3枚揃った状態）が完成しました（あなたの「4♠」とコミュニティカードの「9♠」「3♠」「6♠」）。しかし、相手のプレイヤー3は「1871」チップ、プレイヤー4は「951」チップを持っており、ポットは「200」です。前回のターンでプレイヤー4が「40」にレイズし、あなたとプレイヤー3がコールしました。リバーで、相手からのベットがないため、チェック（ベットせずに次のプレイヤーにターンを渡すこと）を選択します。これにより、ショーダウン（お互いの手札を見せ合って勝者を決めること）に進むことができます。もし相手がベットしてきた場合は、あなたのハンドの強さを考慮してコールするかフォールドするかを判断します。"\n}\n```'
2025-10-31 19:01:10,303 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:01:10,303 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）に到達し、あなたの手札は「4♠」「10♣」です。コミュニティカードは「2♥」「Q♦」「9♠」「3♠」「6♠」です。これにより、あなたは「♠（スペード）」のスリーカード（同じスートのカードが3枚揃った状態）が完成しました（あなたの「4♠」とコミュニティカードの「9♠」「3♠」「6♠」）。しかし、相手のプレイヤー3は「1871」チップ、プレイヤー4は「951」チップを持っており、ポットは「200」です。前回のターンでプレイヤー4が「40」にレイズし、あなたとプレイヤー3がコールしました。リバーで、相手からのベットがないため、チェック（ベットせずに次のプレイヤーにターンを渡すこと）を選択します。これにより、ショーダウン（お互いの手札を見せ合って勝者を決めること）に進むことができます。もし相手がベットしてきた場合は、あなたのハンドの強さを考慮してコールするかフォールドするかを判断します。"\n}'
2025-10-31 19:01:10,304 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最後のコミュニティカードが配られた後）に到達し、あなたの手札は「4♠」「10♣」です。コミュニティカードは「2♥」「Q♦」「9♠」「3♠」「6♠」です。これにより、あなたは「♠（スペード）」のスリーカード（同じスートのカードが3枚揃った状態）が完成しました（あなたの「4♠」とコミュニティカードの「9♠」「3♠」「6♠」）。しかし、相手のプレイヤー3は「1871」チップ、プレイヤー4は「951」チップを持っており、ポットは「200」です。前回のターンでプレイヤー4が「40」にレイズし、あなたとプレイヤー3がコールしました。リバーで、相手からのベットがないため、チェック（ベットせずに次のプレイヤーにターンを渡すこと）を選択します。これにより、ショーダウン（お互いの手札を見せ合って勝者を決めること）に進むことができます。もし相手がベットしてきた場合は、あなたのハンドの強さを考慮してコールするかフォールドするかを判断します。"
}
2025-10-31 19:01:10,304 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最後のコミュニティカードが配られた後）に到達し、あなたの手札は「4♠」「10♣」です。コミュニティカードは「2♥」「Q♦」「9♠」「3♠」「6♠」です。これにより、あなたは「♠（スペード）」のスリーカード（同じスートのカードが3枚揃った状態）が完成しました（あなたの「4♠」とコミュニティカードの「9♠」「3♠」「6♠」）。しかし、相手のプレイヤー3は「1871」チップ、プレイヤー4は「951」チップを持っており、ポットは「200」です。前回のターンでプレイヤー4が「40」にレイズし、あなたとプレイヤー3がコールしました。リバーで、相手からのベットがないため、チェック（ベットせずに次のプレイヤーにターンを渡すこと）を選択します。これにより、ショーダウン（お互いの手札を見せ合って勝者を決めること）に進むことができます。もし相手がベットしてきた場合は、あなたのハンドの強さを考慮してコールするかフォールドするかを判断します。'}
2025-10-31 19:01:10,304 - poker_game - DEBUG - [Agent0] Extracted values - action: 'check', amount: 0
2025-10-31 19:01:10,304 - poker_game - DEBUG - [Agent0] Action 'check' normalized - amount set to 0
2025-10-31 19:01:10,304 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:01:10,304 - poker_game - INFO - [Agent0] Successfully parsed decision: check, 0, リバー（最後のコミュニティカードが配られた後）に到達し、あなたの手札は「4♠」「10♣」です。コミュニティカードは「2♥」「Q♦」「9♠」「3♠」「6♠」です。これにより、あなたは「♠（スペード）」のスリーカード（同じスートのカードが3枚揃った状態）が完成しました（あなたの「4♠」とコミュニティカードの「9♠」「3♠」「6♠」）。しかし、相手のプレイヤー3は「1871」チップ、プレイヤー4は「951」チップを持っており、ポットは「200」です。前回のターンでプレイヤー4が「40」にレイズし、あなたとプレイヤー3がコールしました。リバーで、相手からのベットがないため、チェック（ベットせずに次のプレイヤーにターンを渡すこと）を選択します。これにより、ショーダウン（お互いの手札を見せ合って勝者を決めること）に進むことができます。もし相手がベットしてきた場合は、あなたのハンドの強さを考慮してコールするかフォールドするかを判断します。
2025-10-31 19:01:10,305 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'check' with amount 0
2025-10-31 19:01:10,306 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:01:10,307 - poker_game - INFO - Hand #19, Phase: river
2025-10-31 19:01:10,307 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:01:10,308 - poker_game - INFO - Pot: 200, Current bet: 0
2025-10-31 19:01:10,309 - poker_game - INFO - Last raiser: None
2025-10-31 19:01:10,310 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:10,310 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:10,310 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠', '6♠']
2025-10-31 19:01:10,311 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:10,311 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:10,312 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:10,312 - poker_game - INFO -   P3(Agent3): chips=1871, bet=0, status=active
2025-10-31 19:01:10,313 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=active
2025-10-31 19:01:10,313 - poker_game - INFO - ==================================================
2025-10-31 19:01:10,314 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 19:01:10,325 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:01:10,326 - poker_game - INFO - Hand #19, Phase: river
2025-10-31 19:01:10,327 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:01:10,327 - poker_game - INFO - Pot: 200, Current bet: 0
2025-10-31 19:01:10,327 - poker_game - INFO - Last raiser: None
2025-10-31 19:01:10,328 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:10,328 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:10,329 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠', '6♠']
2025-10-31 19:01:10,329 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:10,330 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:10,330 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:10,330 - poker_game - INFO -   P3(Agent3): chips=1871, bet=0, status=active
2025-10-31 19:01:10,331 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=active
2025-10-31 19:01:10,331 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 19:01:10,331 - poker_game - INFO - ==================================================
2025-10-31 19:01:10,332 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:01:10,332 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:01:10,332 - poker_game - DEBUG - Active players: [0, 3, 4]
2025-10-31 19:01:10,332 - poker_game - INFO - Advanced from player 0 to player 3 (seat order)
2025-10-31 19:01:10,333 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:01:10,333 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:01:10,334 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:01:10,334 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:01:10,334 - poker_game - DEBUG - Active player indices: [0, 3, 4]
2025-10-31 19:01:10,334 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:01:10,334 - poker_game - DEBUG - Current player index: 3
2025-10-31 19:01:10,334 - poker_game - DEBUG - First actor index: 0
2025-10-31 19:01:10,335 - poker_game - DEBUG - Betting continues: Current player 3 != first actor 0
2025-10-31 19:01:10,335 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:01:10,335 - poker_game - INFO - Hand #19, Phase: river
2025-10-31 19:01:10,335 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:01:10,336 - poker_game - INFO - Pot: 200, Current bet: 0
2025-10-31 19:01:10,336 - poker_game - INFO - Last raiser: None
2025-10-31 19:01:10,337 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:10,337 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:10,338 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠', '6♠']
2025-10-31 19:01:10,338 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:10,339 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:10,340 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:10,341 - poker_game - INFO -   P3(Agent3): chips=1871, bet=0, status=active
2025-10-31 19:01:10,342 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=active
2025-10-31 19:01:10,342 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:01:10,342 - poker_game - INFO - ==================================================
2025-10-31 19:01:10,444 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "river",
  "your_cards": [
    "9♣",
    "7♠"
  ],
  "community": [
    "2♥",
    "Q♦",
    "9♠",
    "3♠",
    "6♠"
  ],
  "your_chips": 1871,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 200,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6035,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 951,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1871)"
  ],
  "history": [
    "Showdown: Player 4 hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦ cards=6♣, 5♣",
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 10",
    "Player 1 folded",
    "Flop dealt: 2♥, Q♦, 9♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: 3♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 raised to 40",
    "Player 0 called 40",
    "Player 3 called 40",
    "River dealt: 6♠",
    "Player 0 checked"
  ]
}
2025-10-31 19:01:10,454 - poker_game - DEBUG - Create Session: {'id': '424e74ca-0b89-4a00-a5a8-8fd445ef9092', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904870.4510999}
2025-10-31 19:01:12,999 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況です。あなたの手札は9♣, 7♠で、コミュニティカードは2♥, Q♦, 9♠, 3♠, 6♠です。これであなたのハンドは9のペア（9♣, 9♠）になります。しかし、ボードにはストレート（2-3-4-5-6）やフラッシュ（♠）の可能性も示唆されています。対戦相手のプレイヤー0はチェックし、プレイヤー4は以前レイズしましたが、現在はプレイヤー0がチェックしたため、あなたもチェックしてショーダウン（カードを見せ合って勝者を決めること）に進むのが最善です。これで、あなたのハンドの強さと相手のハンドの強さを比較できます。もし相手がベットしてきた場合は、そのベット額とあなたのハンドの強さを比較してコールするかフォールド（諦めること）するかを判断します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 228, 'promptTokenCount': 897, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 897}], 'totalTokenCount': 1125}, 'invocationId': 'e-c69f2da8-863b-46b3-b9c2-b4d08fc77165', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Bhob2OiJ', 'timestamp': 1761904870.465133}]
2025-10-31 19:01:13,000 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:01:13,000 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況です。あなたの手札は9♣, 7♠で、コミュニティカードは2♥, Q♦, 9♠, 3♠, 6♠です。これであなたのハンドは9のペア（9♣, 9♠）になります。しかし、ボードにはストレート（2-3-4-5-6）やフラッシュ（♠）の可能性も示唆されています。対戦相手のプレイヤー0はチェックし、プレイヤー4は以前レイズしましたが、現在はプレイヤー0がチェックしたため、あなたもチェックしてショーダウン（カードを見せ合って勝者を決めること）に進むのが最善です。これで、あなたのハンドの強さと相手のハンドの強さを比較できます。もし相手がベットしてきた場合は、そのベット額とあなたのハンドの強さを比較してコールするかフォールド（諦めること）するかを判断します。"
}
```
2025-10-31 19:01:13,000 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:01:13,000 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況です。あなたの手札は9♣, 7♠で、コミュニティカードは2♥, Q♦, 9♠, 3♠, 6♠です。これであなたのハンドは9のペア（9♣, 9♠）になります。しかし、ボードにはストレート（2-3-4-5-6）やフラッシュ（♠）の可能性も示唆されています。対戦相手のプレイヤー0はチェックし、プレイヤー4は以前レイズしましたが、現在はプレイヤー0がチェックしたため、あなたもチェックしてショーダウン（カードを見せ合って勝者を決めること）に進むのが最善です。これで、あなたのハンドの強さと相手のハンドの強さを比較できます。もし相手がベットしてきた場合は、そのベット額とあなたのハンドの強さを比較してコールするかフォールド（諦めること）するかを判断します。"\n}\n```'
2025-10-31 19:01:13,000 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:01:13,000 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況です。あなたの手札は9♣, 7♠で、コミュニティカードは2♥, Q♦, 9♠, 3♠, 6♠です。これであなたのハンドは9のペア（9♣, 9♠）になります。しかし、ボードにはストレート（2-3-4-5-6）やフラッシュ（♠）の可能性も示唆されています。対戦相手のプレイヤー0はチェックし、プレイヤー4は以前レイズしましたが、現在はプレイヤー0がチェックしたため、あなたもチェックしてショーダウン（カードを見せ合って勝者を決めること）に進むのが最善です。これで、あなたのハンドの強さと相手のハンドの強さを比較できます。もし相手がベットしてきた場合は、そのベット額とあなたのハンドの強さを比較してコールするかフォールド（諦めること）するかを判断します。"\n}'
2025-10-31 19:01:13,001 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況です。あなたの手札は9♣, 7♠で、コミュニティカードは2♥, Q♦, 9♠, 3♠, 6♠です。これであなたのハンドは9のペア（9♣, 9♠）になります。しかし、ボードにはストレート（2-3-4-5-6）やフラッシュ（♠）の可能性も示唆されています。対戦相手のプレイヤー0はチェックし、プレイヤー4は以前レイズしましたが、現在はプレイヤー0がチェックしたため、あなたもチェックしてショーダウン（カードを見せ合って勝者を決めること）に進むのが最善です。これで、あなたのハンドの強さと相手のハンドの強さを比較できます。もし相手がベットしてきた場合は、そのベット額とあなたのハンドの強さを比較してコールするかフォールド（諦めること）するかを判断します。"
}
2025-10-31 19:01:13,001 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最後のコミュニティカードが配られた後）の状況です。あなたの手札は9♣, 7♠で、コミュニティカードは2♥, Q♦, 9♠, 3♠, 6♠です。これであなたのハンドは9のペア（9♣, 9♠）になります。しかし、ボードにはストレート（2-3-4-5-6）やフラッシュ（♠）の可能性も示唆されています。対戦相手のプレイヤー0はチェックし、プレイヤー4は以前レイズしましたが、現在はプレイヤー0がチェックしたため、あなたもチェックしてショーダウン（カードを見せ合って勝者を決めること）に進むのが最善です。これで、あなたのハンドの強さと相手のハンドの強さを比較できます。もし相手がベットしてきた場合は、そのベット額とあなたのハンドの強さを比較してコールするかフォールド（諦めること）するかを判断します。'}
2025-10-31 19:01:13,001 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 19:01:13,001 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 19:01:13,001 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:01:13,001 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, リバー（最後のコミュニティカードが配られた後）の状況です。あなたの手札は9♣, 7♠で、コミュニティカードは2♥, Q♦, 9♠, 3♠, 6♠です。これであなたのハンドは9のペア（9♣, 9♠）になります。しかし、ボードにはストレート（2-3-4-5-6）やフラッシュ（♠）の可能性も示唆されています。対戦相手のプレイヤー0はチェックし、プレイヤー4は以前レイズしましたが、現在はプレイヤー0がチェックしたため、あなたもチェックしてショーダウン（カードを見せ合って勝者を決めること）に進むのが最善です。これで、あなたのハンドの強さと相手のハンドの強さを比較できます。もし相手がベットしてきた場合は、そのベット額とあなたのハンドの強さを比較してコールするかフォールド（諦めること）するかを判断します。
2025-10-31 19:01:13,002 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 19:01:13,002 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:01:13,002 - poker_game - INFO - Hand #19, Phase: river
2025-10-31 19:01:13,002 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:01:13,003 - poker_game - INFO - Pot: 200, Current bet: 0
2025-10-31 19:01:13,003 - poker_game - INFO - Last raiser: None
2025-10-31 19:01:13,003 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:13,003 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:13,003 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠', '6♠']
2025-10-31 19:01:13,003 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:13,003 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:13,003 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:13,004 - poker_game - INFO -   P3(Agent3): chips=1871, bet=0, status=active
2025-10-31 19:01:13,004 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=active
2025-10-31 19:01:13,004 - poker_game - INFO - ==================================================
2025-10-31 19:01:13,004 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 19:01:13,037 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:01:13,038 - poker_game - INFO - Hand #19, Phase: river
2025-10-31 19:01:13,038 - poker_game - INFO - Current player: 3, Dealer: 4
2025-10-31 19:01:13,038 - poker_game - INFO - Pot: 200, Current bet: 0
2025-10-31 19:01:13,038 - poker_game - INFO - Last raiser: None
2025-10-31 19:01:13,038 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:13,038 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:13,038 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠', '6♠']
2025-10-31 19:01:13,038 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:13,038 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:13,039 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:13,039 - poker_game - INFO -   P3(Agent3): chips=1871, bet=0, status=active
2025-10-31 19:01:13,039 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=active
2025-10-31 19:01:13,039 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 19:01:13,039 - poker_game - INFO - ==================================================
2025-10-31 19:01:13,040 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:01:13,040 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:01:13,040 - poker_game - DEBUG - Active players: [0, 3, 4]
2025-10-31 19:01:13,040 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 19:01:13,040 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:01:13,040 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:01:13,040 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:01:13,040 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:01:13,041 - poker_game - DEBUG - Active player indices: [0, 3, 4]
2025-10-31 19:01:13,041 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:01:13,041 - poker_game - DEBUG - Current player index: 4
2025-10-31 19:01:13,041 - poker_game - DEBUG - First actor index: 0
2025-10-31 19:01:13,041 - poker_game - DEBUG - Betting continues: Current player 4 != first actor 0
2025-10-31 19:01:13,041 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:01:13,041 - poker_game - INFO - Hand #19, Phase: river
2025-10-31 19:01:13,041 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 19:01:13,041 - poker_game - INFO - Pot: 200, Current bet: 0
2025-10-31 19:01:13,041 - poker_game - INFO - Last raiser: None
2025-10-31 19:01:13,042 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:13,042 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:13,042 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠', '6♠']
2025-10-31 19:01:13,042 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:13,042 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:13,042 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:13,043 - poker_game - INFO -   P3(Agent3): chips=1871, bet=0, status=active
2025-10-31 19:01:13,043 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=active
2025-10-31 19:01:13,051 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:01:13,052 - poker_game - INFO - ==================================================
2025-10-31 19:01:13,154 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "river",
  "your_cards": [
    "4♥",
    "A♠"
  ],
  "community": [
    "2♥",
    "Q♦",
    "9♠",
    "3♠",
    "6♠"
  ],
  "your_chips": 951,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 200,
  "to_call": 0,
  "dealer_button": 4,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6035,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1871,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (951)"
  ],
  "history": [
    "Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 called 20",
    "Player 4 called 20",
    "Player 0 called 10",
    "Player 1 folded",
    "Flop dealt: 2♥, Q♦, 9♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: 3♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 raised to 40",
    "Player 0 called 40",
    "Player 3 called 40",
    "River dealt: 6♠",
    "Player 0 checked",
    "Player 3 checked"
  ]
}
2025-10-31 19:01:13,163 - poker_game - DEBUG - Create Session: {'id': '711d2d63-49f0-4ab0-8d03-92da63f405ff', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904873.1615958}
2025-10-31 19:01:23,288 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 19:01:25,549 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_kL4vLSwCrKv3OVMHwsMB7JDB', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1171, 'totalTokenCount': 1188}, 'invocationId': 'e-ac16e7cd-faa3-40c8-8057-9aa473cfa298', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'x8ctotCi', 'timestamp': 1761904873.172529}, {'content': {'parts': [{'functionResponse': {'id': 'call_kL4vLSwCrKv3OVMHwsMB7JDB', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-ac16e7cd-faa3-40c8-8057-9aa473cfa298', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '0M5iGFmB', 'timestamp': 1761904871.461959}, {'content': {'parts': [{'functionCall': {'id': 'call_EESQlPiSnSLMvW8Srg2aXSYw', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1695, 'totalTokenCount': 1712}, 'invocationId': 'e-ac16e7cd-faa3-40c8-8057-9aa473cfa298', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'fDq7Vc34', 'timestamp': 1761904871.463555}, {'content': {'parts': [{'functionResponse': {'id': 'call_EESQlPiSnSLMvW8Srg2aXSYw', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-ac16e7cd-faa3-40c8-8057-9aa473cfa298', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'jVSHYzv7', 'timestamp': 1761904873.15042}, {'content': {'parts': [{'functionCall': {'id': 'call_9fqOGW3myFyWuKeLlN8PMghi', 'args': {'game_state': {'your_id': 4, 'phase': 'river', 'your_cards': ['4♥', 'A♠'], 'community': ['2♥', 'Q♦', '9♠', '3♠', '6♠'], 'your_chips': 951, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 60, 'pot': 200, 'to_call': 0, 'dealer_button': 4, 'current_turn': 4, 'players': [{'id': 0, 'chips': 943, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 6035, 'bet': 0, 'status': 'folded'}, {'id': 3, 'chips': 1871, 'bet': 0, 'status': 'active'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (951)'], 'history': ['Side pot layer 0: amount=184, winners=4 best_hand=Two Pair: Qs and 5s - Q♠, Q♣, 10♣, 5♣, 5♦', 'Player 0 posted small blind 10', 'Player 1 posted big blind 20', 'Player 3 called 20', 'Player 4 called 20', 'Player 0 called 10', 'Player 1 folded', 'Flop dealt: 2♥, Q♦, 9♠', 'Player 0 checked', 'Player 3 checked', 'Player 4 checked', 'Turn dealt: 3♠', 'Player 0 checked', 'Player 3 checked', 'Player 4 raised to 40', 'Player 0 called 40', 'Player 3 called 40', 'River dealt: 6♠', 'Player 0 checked', 'Player 3 checked']}, 'call_amount': 0, 'pot_after_call': 200, 'equity': 0.25}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 390, 'promptTokenCount': 1726, 'totalTokenCount': 2116}, 'invocationId': 'e-ac16e7cd-faa3-40c8-8057-9aa473cfa298', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'O0qx7wVj', 'timestamp': 1761904873.152133}, {'content': {'parts': [{'functionResponse': {'id': 'call_9fqOGW3myFyWuKeLlN8PMghi', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（50.00(ポットに対して25.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'e-ac16e7cd-faa3-40c8-8057-9aa473cfa298', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'oY6I2oc2', 'timestamp': 1761904883.065269}, {'content': {'parts': [{'text': '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "期待値が低い（50.00(ポットに対して25.00%）ため、チェックします"\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 48, 'promptTokenCount': 2151, 'totalTokenCount': 2199}, 'invocationId': 'e-ac16e7cd-faa3-40c8-8057-9aa473cfa298', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Xcjs7ARW', 'timestamp': 1761904883.067285}]
2025-10-31 19:01:25,550 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:01:25,550 - poker_game - DEBUG - {
  "action": "check",
  "amount": 0,
  "reasoning": "期待値が低い（50.00(ポットに対して25.00%）ため、チェックします"
}
2025-10-31 19:01:25,550 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:01:25,550 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "期待値が低い（50.00(ポットに対して25.00%）ため、チェックします"\n}'
2025-10-31 19:01:25,550 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:01:25,550 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "期待値が低い（50.00(ポットに対して25.00%）ため、チェックします"
}
2025-10-31 19:01:25,551 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（50.00(ポットに対して25.00%）ため、チェックします'}
2025-10-31 19:01:25,551 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 19:01:25,551 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 19:01:25,551 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:01:25,551 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い（50.00(ポットに対して25.00%）ため、チェックします
2025-10-31 19:01:25,551 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 19:01:25,552 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:01:25,552 - poker_game - INFO - Hand #19, Phase: river
2025-10-31 19:01:25,552 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 19:01:25,552 - poker_game - INFO - Pot: 200, Current bet: 0
2025-10-31 19:01:25,552 - poker_game - INFO - Last raiser: None
2025-10-31 19:01:25,552 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:25,553 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:25,553 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠', '6♠']
2025-10-31 19:01:25,553 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:25,553 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:25,553 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:25,553 - poker_game - INFO -   P3(Agent3): chips=1871, bet=0, status=active
2025-10-31 19:01:25,553 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=active
2025-10-31 19:01:25,553 - poker_game - INFO - ==================================================
2025-10-31 19:01:25,553 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 19:01:25,590 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:01:25,591 - poker_game - INFO - Hand #19, Phase: river
2025-10-31 19:01:25,592 - poker_game - INFO - Current player: 4, Dealer: 4
2025-10-31 19:01:25,594 - poker_game - INFO - Pot: 200, Current bet: 0
2025-10-31 19:01:25,595 - poker_game - INFO - Last raiser: None
2025-10-31 19:01:25,595 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:25,595 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:25,596 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠', '6♠']
2025-10-31 19:01:25,596 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:25,596 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:25,596 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:25,596 - poker_game - INFO -   P3(Agent3): chips=1871, bet=0, status=active
2025-10-31 19:01:25,597 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=active
2025-10-31 19:01:25,597 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 19:01:25,597 - poker_game - INFO - ==================================================
2025-10-31 19:01:25,597 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:01:25,597 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:01:25,597 - poker_game - DEBUG - Active players: [0, 3, 4]
2025-10-31 19:01:25,597 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 19:01:25,597 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:01:25,597 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:01:25,597 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:01:25,597 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:01:25,597 - poker_game - DEBUG - Active player indices: [0, 3, 4]
2025-10-31 19:01:25,597 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:01:25,598 - poker_game - DEBUG - Current player index: 0
2025-10-31 19:01:25,598 - poker_game - DEBUG - First actor index: 0
2025-10-31 19:01:25,598 - poker_game - INFO - Betting complete: Back to first actor 0 (all players have acted)
2025-10-31 19:01:25,598 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:01:25,598 - poker_game - INFO - Hand #19, Phase: river
2025-10-31 19:01:25,598 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:01:25,598 - poker_game - INFO - Pot: 200, Current bet: 0
2025-10-31 19:01:25,598 - poker_game - INFO - Last raiser: None
2025-10-31 19:01:25,599 - poker_game - INFO - Betting round complete: True
2025-10-31 19:01:25,599 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:25,599 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠', '6♠']
2025-10-31 19:01:25,599 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:25,599 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:25,599 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:25,599 - poker_game - INFO -   P3(Agent3): chips=1871, bet=0, status=active
2025-10-31 19:01:25,599 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=active
2025-10-31 19:01:25,599 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:01:25,599 - poker_game - INFO - ==================================================
2025-10-31 19:01:25,700 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 19:01:25,701 - poker_game - INFO - Betting round complete: True
2025-10-31 19:01:25,701 - poker_game - INFO - Remaining players: 3
2025-10-31 19:01:25,702 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 19:01:25,702 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:01:25,702 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 19:01:25,702 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 19:01:25,703 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 19:01:25,703 - poker_game - INFO - Hand #19, Phase: showdown
2025-10-31 19:01:25,703 - poker_game - INFO - Current player: 0, Dealer: 4
2025-10-31 19:01:25,704 - poker_game - INFO - Pot: 200, Current bet: 0
2025-10-31 19:01:25,704 - poker_game - INFO - Last raiser: None
2025-10-31 19:01:25,704 - poker_game - INFO - Betting round complete: True
2025-10-31 19:01:25,704 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:25,705 - poker_game - INFO - Community cards: ['2♥', 'Q♦', '9♠', '3♠', '6♠']
2025-10-31 19:01:25,705 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:25,706 - poker_game - INFO -   P1(Agent1): chips=6035, bet=0, status=folded
2025-10-31 19:01:25,707 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:25,708 - poker_game - INFO -   P3(Agent3): chips=1871, bet=0, status=active
2025-10-31 19:01:25,708 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=active
2025-10-31 19:01:25,709 - poker_game - INFO - ==================================================
2025-10-31 19:01:25,710 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 19:01:25,710 - poker_game - INFO - Pot: 200, Community cards: ['2♥', 'Q♦', '9♠', '3♠', '6♠']
2025-10-31 19:01:25,711 - poker_game - INFO -   Player 0 status=active cards=['4♠', '10♣']
2025-10-31 19:01:25,711 - poker_game - INFO -   Player 3 status=active cards=['9♣', '7♠']
2025-10-31 19:01:25,713 - poker_game - INFO -   Player 4 status=active cards=['4♥', 'A♠']
2025-10-31 19:01:25,717 - poker_game - INFO -   Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=['4♠', '10♣']
2025-10-31 19:01:25,717 - poker_game - INFO -   Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=['9♣', '7♠']
2025-10-31 19:01:25,718 - poker_game - INFO -   Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=['4♥', 'A♠']
2025-10-31 19:01:25,719 - poker_game - INFO - Pot layer 0: amount=80, contributors=[0, 1, 3, 4]
2025-10-31 19:01:25,719 - poker_game - INFO - Pot layer 1: amount=120, contributors=[0, 3, 4]
2025-10-31 19:01:25,720 - poker_game - INFO - Showdown total awarded: 200 (game.pot=200)
2025-10-31 19:01:25,720 - poker_game - INFO - Showdown winners (aggregated): [3]
2025-10-31 19:01:25,720 - poker_game - INFO -   Awarded 200 to Player 3 (hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠)
2025-10-31 19:01:25,721 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 19:01:25,770 - poker_game - INFO - === STARTING NEW HAND #20 ===
2025-10-31 19:01:25,771 - poker_game - INFO - Active players for new hand: 4
2025-10-31 19:01:25,771 - poker_game - INFO - Moving dealer button
2025-10-31 19:01:25,772 - poker_game - INFO - Posting blinds
2025-10-31 19:01:25,793 - poker_game - INFO - Dealing hole cards
2025-10-31 19:01:25,794 - poker_game - INFO - Setting first actor for preflop
2025-10-31 19:01:25,804 - poker_game - INFO - Started new hand in database: hand_id=20
2025-10-31 19:01:25,804 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 19:01:25,805 - poker_game - INFO - Hand #20, Phase: preflop
2025-10-31 19:01:25,805 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 19:01:25,807 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:01:25,808 - poker_game - INFO - Last raiser: 3
2025-10-31 19:01:25,809 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:25,809 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:01:25,810 - poker_game - INFO - Community cards: []
2025-10-31 19:01:25,811 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:25,811 - poker_game - INFO -   P1(Agent1): chips=6025, bet=10, status=active
2025-10-31 19:01:25,812 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:25,812 - poker_game - INFO -   P3(Agent3): chips=2051, bet=20, status=active
2025-10-31 19:01:25,812 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=active
2025-10-31 19:01:25,813 - poker_game - INFO - ==================================================
2025-10-31 19:01:25,813 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "Q♦",
    "5♠"
  ],
  "community": [],
  "your_chips": 951,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6025,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2051,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (951)"
  ],
  "history": [
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: 3♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 raised to 40",
    "Player 0 called 40",
    "Player 3 called 40",
    "River dealt: 6♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣",
    "Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠",
    "Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠",
    "Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20"
  ]
}
2025-10-31 19:01:25,821 - poker_game - DEBUG - Create Session: {'id': '18e5c42c-ddee-4f97-ae43-9eccb03068a9', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904885.819821}
2025-10-31 19:01:35,913 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 19:01:45,878 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 19:01:52,681 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_9KEBOTp8utPxI5w3a4jWXYyK', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1290, 'totalTokenCount': 1307}, 'invocationId': 'e-42e4a06a-01ce-4cc6-8c51-42430f9f003c', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'iehVY5jP', 'timestamp': 1761904885.832838}, {'content': {'parts': [{'functionResponse': {'id': 'call_9KEBOTp8utPxI5w3a4jWXYyK', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-42e4a06a-01ce-4cc6-8c51-42430f9f003c', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'PJLdu6i0', 'timestamp': 1761904887.231598}, {'content': {'parts': [{'functionCall': {'id': 'call_yDoBCW9vHGUoQFQLTdA0CpDt', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['Q♦', '5♠'], 'community': [], 'your_chips': 951, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 0, 'pot': 30, 'to_call': 20, 'dealer_button': 0, 'current_turn': 4, 'players': [{'id': 0, 'chips': 943, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 6025, 'bet': 10, 'status': 'active'}, {'id': 3, 'chips': 2051, 'bet': 20, 'status': 'active'}], 'actions': ['fold', 'call (20)', 'raise (min 40)', 'all-in (951)'], 'history': ['Player 0 checked', 'Player 3 checked', 'Player 4 checked', 'Turn dealt: 3♠', 'Player 0 checked', 'Player 3 checked', 'Player 4 raised to 40', 'Player 0 called 40', 'Player 3 called 40', 'River dealt: 6♠', 'Player 0 checked', 'Player 3 checked', 'Player 4 checked', 'Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣', 'Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠', 'Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠', 'Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠', 'Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠', 'Player 1 posted small blind 10', 'Player 3 posted big blind 20']}, 'call_amount': 20, 'pot_after_call': 50, 'equity': 0.3}, 'name': 'action_decision'}}, {'functionCall': {'id': 'call_Iv5hZh9DEzZgNhgqesAwl5HV', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['Q♦', '5♠'], 'community': [], 'your_chips': 951, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 0, 'pot': 30, 'to_call': 20, 'dealer_button': 0, 'current_turn': 4, 'players': [{'id': 0, 'chips': 943, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 6025, 'bet': 10, 'status': 'active'}, {'id': 3, 'chips': 2051, 'bet': 20, 'status': 'active'}], 'actions': ['fold', 'call (20)', 'raise (min 40)', 'all-in (951)'], 'history': ['Player 0 checked', 'Player 3 checked', 'Player 4 checked', 'Turn dealt: 3♠', 'Player 0 checked', 'Player 3 checked', 'Player 4 raised to 40', 'Player 0 called 40', 'Player 3 called 40', 'River dealt: 6♠', 'Player 0 checked', 'Player 3 checked', 'Player 4 checked', 'Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣', 'Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠', 'Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠', 'Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠', 'Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠', 'Player 1 posted small blind 10', 'Player 3 posted big blind 20']}, 'call_amount': 20, 'pot_after_call': 50, 'equity': 0.3}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 1028, 'promptTokenCount': 1814, 'totalTokenCount': 2842}, 'invocationId': 'e-42e4a06a-01ce-4cc6-8c51-42430f9f003c', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'omeTclDY', 'timestamp': 1761904887.233026}, {'content': {'parts': [{'functionResponse': {'id': 'call_yDoBCW9vHGUoQFQLTdA0CpDt', 'name': 'action_decision', 'response': {'action': 'fold', 'amount': 0, 'reasoning': '期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド'}}}, {'functionResponse': {'id': 'call_Iv5hZh9DEzZgNhgqesAwl5HV', 'name': 'action_decision', 'response': {'action': 'fold', 'amount': 0, 'reasoning': '期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド'}}}], 'role': 'user'}, 'invocationId': 'RLDuU9Bl', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'aMn6svvQ', 'timestamp': 1761904909.740568}, {'content': {'parts': [{'text': '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド"\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 49, 'promptTokenCount': 3072, 'totalTokenCount': 3121}, 'invocationId': 'e-42e4a06a-01ce-4cc6-8c51-42430f9f003c', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'aphYozh6', 'timestamp': 1761904909.743555}]
2025-10-31 19:01:52,682 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:01:52,682 - poker_game - DEBUG - {
  "action": "fold",
  "amount": 0,
  "reasoning": "期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド"
}
2025-10-31 19:01:52,683 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:01:52,683 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド"\n}'
2025-10-31 19:01:52,684 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:01:52,684 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド"
}
2025-10-31 19:01:52,684 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': '期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド'}
2025-10-31 19:01:52,684 - poker_game - DEBUG - [Agent4] Extracted values - action: 'fold', amount: 0
2025-10-31 19:01:52,684 - poker_game - DEBUG - [Agent4] Action 'fold' normalized - amount set to 0
2025-10-31 19:01:52,685 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:01:52,685 - poker_game - INFO - [Agent4] Successfully parsed decision: fold, 0, 期待値が1.00(ポットに対して3.33%で、マイナスなのでフォールド
2025-10-31 19:01:52,686 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'fold' with amount 0
2025-10-31 19:01:52,687 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:01:52,687 - poker_game - INFO - Hand #20, Phase: preflop
2025-10-31 19:01:52,688 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 19:01:52,689 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:01:52,689 - poker_game - INFO - Last raiser: 3
2025-10-31 19:01:52,689 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:52,690 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:01:52,690 - poker_game - INFO - Community cards: []
2025-10-31 19:01:52,690 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:52,691 - poker_game - INFO -   P1(Agent1): chips=6025, bet=10, status=active
2025-10-31 19:01:52,691 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:52,691 - poker_game - INFO -   P3(Agent3): chips=2051, bet=20, status=active
2025-10-31 19:01:52,692 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=active
2025-10-31 19:01:52,692 - poker_game - INFO - ==================================================
2025-10-31 19:01:52,693 - poker_game - INFO - ACTION_EXECUTED: Player 4 folded
2025-10-31 19:01:52,707 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:01:52,708 - poker_game - INFO - Hand #20, Phase: preflop
2025-10-31 19:01:52,708 - poker_game - INFO - Current player: 4, Dealer: 0
2025-10-31 19:01:52,709 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:01:52,709 - poker_game - INFO - Last raiser: 3
2025-10-31 19:01:52,709 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:52,710 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:52,710 - poker_game - INFO - Community cards: []
2025-10-31 19:01:52,710 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:52,711 - poker_game - INFO -   P1(Agent1): chips=6025, bet=10, status=active
2025-10-31 19:01:52,711 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:52,712 - poker_game - INFO -   P3(Agent3): chips=2051, bet=20, status=active
2025-10-31 19:01:52,712 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=folded
2025-10-31 19:01:52,713 - poker_game - INFO - Extra: Action: Player 4 folded
2025-10-31 19:01:52,713 - poker_game - INFO - ==================================================
2025-10-31 19:01:52,713 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:01:52,714 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:01:52,714 - poker_game - DEBUG - Active players: [0, 1, 3]
2025-10-31 19:01:52,714 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 19:01:52,714 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:01:52,715 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:01:52,715 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:01:52,715 - poker_game - DEBUG - Player bets: [0, 10, 20], Current bet: 20, All same: False
2025-10-31 19:01:52,716 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:01:52,716 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:01:52,716 - poker_game - INFO - Hand #20, Phase: preflop
2025-10-31 19:01:52,717 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:01:52,717 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:01:52,718 - poker_game - INFO - Last raiser: 3
2025-10-31 19:01:52,718 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:52,719 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:52,719 - poker_game - INFO - Community cards: []
2025-10-31 19:01:52,720 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:52,721 - poker_game - INFO -   P1(Agent1): chips=6025, bet=10, status=active
2025-10-31 19:01:52,721 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:52,721 - poker_game - INFO -   P3(Agent3): chips=2051, bet=20, status=active
2025-10-31 19:01:52,722 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=folded
2025-10-31 19:01:52,723 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:01:52,723 - poker_game - INFO - ==================================================
2025-10-31 19:01:52,825 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "J♥",
    "6♣"
  ],
  "community": [],
  "your_chips": 943,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6025,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2051,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 951,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (943)"
  ],
  "history": [
    "Player 3 checked",
    "Player 4 checked",
    "Turn dealt: 3♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 raised to 40",
    "Player 0 called 40",
    "Player 3 called 40",
    "River dealt: 6♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣",
    "Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠",
    "Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠",
    "Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded"
  ]
}
2025-10-31 19:01:52,835 - poker_game - DEBUG - Create Session: {'id': 'deb07e7e-278b-40b2-a862-bcb22f404832', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904912.8320537}
2025-10-31 19:01:54,818 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでJと6のオフスート（異なるスート）という弱いハンドを持っています。ポットへのコール額（20）はポットサイズ（30）と比較して大きく、さらにレイズされた場合にさらに多くのチップを失うリスクがあります。このハンドで勝つ確率は低いため、フォールドするのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 103, 'promptTokenCount': 954, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 954}], 'totalTokenCount': 1057}, 'invocationId': 'e-4491daa0-9601-4b8b-81ed-a5cb006dcf18', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'dtYZhwD0', 'timestamp': 1761904912.846304}]
2025-10-31 19:01:54,818 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:01:54,818 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップでJと6のオフスート（異なるスート）という弱いハンドを持っています。ポットへのコール額（20）はポットサイズ（30）と比較して大きく、さらにレイズされた場合にさらに多くのチップを失うリスクがあります。このハンドで勝つ確率は低いため、フォールドするのが最善です。"
}
```
2025-10-31 19:01:54,818 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:01:54,819 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでJと6のオフスート（異なるスート）という弱いハンドを持っています。ポットへのコール額（20）はポットサイズ（30）と比較して大きく、さらにレイズされた場合にさらに多くのチップを失うリスクがあります。このハンドで勝つ確率は低いため、フォールドするのが最善です。"\n}\n```'
2025-10-31 19:01:54,819 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:01:54,819 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでJと6のオフスート（異なるスート）という弱いハンドを持っています。ポットへのコール額（20）はポットサイズ（30）と比較して大きく、さらにレイズされた場合にさらに多くのチップを失うリスクがあります。このハンドで勝つ確率は低いため、フォールドするのが最善です。"\n}'
2025-10-31 19:01:54,819 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップでJと6のオフスート（異なるスート）という弱いハンドを持っています。ポットへのコール額（20）はポットサイズ（30）と比較して大きく、さらにレイズされた場合にさらに多くのチップを失うリスクがあります。このハンドで勝つ確率は低いため、フォールドするのが最善です。"
}
2025-10-31 19:01:54,819 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップでJと6のオフスート（異なるスート）という弱いハンドを持っています。ポットへのコール額（20）はポットサイズ（30）と比較して大きく、さらにレイズされた場合にさらに多くのチップを失うリスクがあります。このハンドで勝つ確率は低いため、フォールドするのが最善です。'}
2025-10-31 19:01:54,819 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 19:01:54,819 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 19:01:54,820 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:01:54,820 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップでJと6のオフスート（異なるスート）という弱いハンドを持っています。ポットへのコール額（20）はポットサイズ（30）と比較して大きく、さらにレイズされた場合にさらに多くのチップを失うリスクがあります。このハンドで勝つ確率は低いため、フォールドするのが最善です。
2025-10-31 19:01:54,820 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 19:01:54,820 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:01:54,821 - poker_game - INFO - Hand #20, Phase: preflop
2025-10-31 19:01:54,821 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:01:54,821 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:01:54,821 - poker_game - INFO - Last raiser: 3
2025-10-31 19:01:54,821 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:54,821 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:01:54,822 - poker_game - INFO - Community cards: []
2025-10-31 19:01:54,822 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:54,822 - poker_game - INFO -   P1(Agent1): chips=6025, bet=10, status=active
2025-10-31 19:01:54,822 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:54,822 - poker_game - INFO -   P3(Agent3): chips=2051, bet=20, status=active
2025-10-31 19:01:54,822 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=folded
2025-10-31 19:01:54,822 - poker_game - INFO - ==================================================
2025-10-31 19:01:54,822 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 19:01:54,844 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:01:54,844 - poker_game - INFO - Hand #20, Phase: preflop
2025-10-31 19:01:54,844 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:01:54,844 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:01:54,845 - poker_game - INFO - Last raiser: 3
2025-10-31 19:01:54,845 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:54,845 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:01:54,845 - poker_game - INFO - Community cards: []
2025-10-31 19:01:54,845 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:01:54,845 - poker_game - INFO -   P1(Agent1): chips=6025, bet=10, status=active
2025-10-31 19:01:54,846 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:54,846 - poker_game - INFO -   P3(Agent3): chips=2051, bet=20, status=active
2025-10-31 19:01:54,846 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=folded
2025-10-31 19:01:54,846 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 19:01:54,846 - poker_game - INFO - ==================================================
2025-10-31 19:01:54,846 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:01:54,846 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:01:54,846 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:01:54,846 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:01:54,846 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:01:54,846 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:01:54,847 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:01:54,847 - poker_game - DEBUG - Player bets: [10, 20], Current bet: 20, All same: False
2025-10-31 19:01:54,847 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:01:54,847 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:01:54,847 - poker_game - INFO - Hand #20, Phase: preflop
2025-10-31 19:01:54,847 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:01:54,847 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:01:54,847 - poker_game - INFO - Last raiser: 3
2025-10-31 19:01:54,847 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:54,847 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:01:54,847 - poker_game - INFO - Community cards: []
2025-10-31 19:01:54,847 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:01:54,848 - poker_game - INFO -   P1(Agent1): chips=6025, bet=10, status=active
2025-10-31 19:01:54,848 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:54,848 - poker_game - INFO -   P3(Agent3): chips=2051, bet=20, status=active
2025-10-31 19:01:54,848 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=folded
2025-10-31 19:01:54,848 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:01:54,848 - poker_game - INFO - ==================================================
2025-10-31 19:01:54,949 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "9♦",
    "8♠"
  ],
  "community": [],
  "your_chips": 6025,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 30,
  "to_call": 10,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2051,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 951,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (6025)"
  ],
  "history": [
    "Player 4 checked",
    "Turn dealt: 3♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 raised to 40",
    "Player 0 called 40",
    "Player 3 called 40",
    "River dealt: 6♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣",
    "Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠",
    "Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠",
    "Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded"
  ]
}
2025-10-31 19:01:54,960 - poker_game - DEBUG - Create Session: {'id': '502afba8-3386-41ed-955e-82b1b84102c0', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904914.9584122}
2025-10-31 19:01:56,503 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "Preflopでは、9と8というミドルレンジのハンドを持っています。ポットはすでに30で、コールするには10しか必要ありません。これは、フロップを見るための有利なオッズです。相手のチップスタックも考慮すると、コールしてフロップを見るのが賢明です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 94, 'promptTokenCount': 956, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 956}], 'totalTokenCount': 1050}, 'invocationId': 'e-9fd84dde-36d7-4a13-a261-2dce4253e2d1', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'aLVPyca2', 'timestamp': 1761904914.967729}]
2025-10-31 19:01:56,503 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:01:56,503 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 10,
  "reasoning": "Preflopでは、9と8というミドルレンジのハンドを持っています。ポットはすでに30で、コールするには10しか必要ありません。これは、フロップを見るための有利なオッズです。相手のチップスタックも考慮すると、コールしてフロップを見るのが賢明です。"
}
```
2025-10-31 19:01:56,504 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:01:56,504 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "Preflopでは、9と8というミドルレンジのハンドを持っています。ポットはすでに30で、コールするには10しか必要ありません。これは、フロップを見るための有利なオッズです。相手のチップスタックも考慮すると、コールしてフロップを見るのが賢明です。"\n}\n```'
2025-10-31 19:01:56,504 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:01:56,504 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "Preflopでは、9と8というミドルレンジのハンドを持っています。ポットはすでに30で、コールするには10しか必要ありません。これは、フロップを見るための有利なオッズです。相手のチップスタックも考慮すると、コールしてフロップを見るのが賢明です。"\n}'
2025-10-31 19:01:56,504 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 10,
  "reasoning": "Preflopでは、9と8というミドルレンジのハンドを持っています。ポットはすでに30で、コールするには10しか必要ありません。これは、フロップを見るための有利なオッズです。相手のチップスタックも考慮すると、コールしてフロップを見るのが賢明です。"
}
2025-10-31 19:01:56,504 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 10, 'reasoning': 'Preflopでは、9と8というミドルレンジのハンドを持っています。ポットはすでに30で、コールするには10しか必要ありません。これは、フロップを見るための有利なオッズです。相手のチップスタックも考慮すると、コールしてフロップを見るのが賢明です。'}
2025-10-31 19:01:56,505 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 10
2025-10-31 19:01:56,505 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (10)', 'raise (min 40)', 'all-in (6025)']
2025-10-31 19:01:56,505 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (10)': 10
2025-10-31 19:01:56,505 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 10}
2025-10-31 19:01:56,505 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 10, Preflopでは、9と8というミドルレンジのハンドを持っています。ポットはすでに30で、コールするには10しか必要ありません。これは、フロップを見るための有利なオッズです。相手のチップスタックも考慮すると、コールしてフロップを見るのが賢明です。
2025-10-31 19:01:56,506 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 10
2025-10-31 19:01:56,506 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:01:56,506 - poker_game - INFO - Hand #20, Phase: preflop
2025-10-31 19:01:56,506 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:01:56,506 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:01:56,507 - poker_game - INFO - Last raiser: 3
2025-10-31 19:01:56,507 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:56,507 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:01:56,507 - poker_game - INFO - Community cards: []
2025-10-31 19:01:56,507 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:01:56,508 - poker_game - INFO -   P1(Agent1): chips=6025, bet=10, status=active
2025-10-31 19:01:56,508 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:56,508 - poker_game - INFO -   P3(Agent3): chips=2051, bet=20, status=active
2025-10-31 19:01:56,508 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=folded
2025-10-31 19:01:56,509 - poker_game - INFO - ==================================================
2025-10-31 19:01:56,509 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 10
2025-10-31 19:01:56,516 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:01:56,516 - poker_game - INFO - Hand #20, Phase: preflop
2025-10-31 19:01:56,517 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:01:56,518 - poker_game - INFO - Pot: 40, Current bet: 20
2025-10-31 19:01:56,518 - poker_game - INFO - Last raiser: 3
2025-10-31 19:01:56,519 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:56,520 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:01:56,521 - poker_game - INFO - Community cards: []
2025-10-31 19:01:56,522 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:01:56,522 - poker_game - INFO -   P1(Agent1): chips=6015, bet=20, status=active
2025-10-31 19:01:56,523 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:56,523 - poker_game - INFO -   P3(Agent3): chips=2051, bet=20, status=active
2025-10-31 19:01:56,523 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=folded
2025-10-31 19:01:56,524 - poker_game - INFO - Extra: Action: Player 1 called 10
2025-10-31 19:01:56,524 - poker_game - INFO - ==================================================
2025-10-31 19:01:56,525 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:01:56,525 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:01:56,525 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:01:56,526 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:01:56,526 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:01:56,526 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:01:56,526 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:01:56,527 - poker_game - DEBUG - Player bets: [20, 20], Current bet: 20, All same: True
2025-10-31 19:01:56,527 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 19:01:56,527 - poker_game - DEBUG - Last raiser index: 3
2025-10-31 19:01:56,527 - poker_game - DEBUG - Current player index: 3
2025-10-31 19:01:56,528 - poker_game - DEBUG - Next after last raiser 3: 1
2025-10-31 19:01:56,528 - poker_game - DEBUG - Betting continues: Current player 3 != next after raiser 1
2025-10-31 19:01:56,528 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:01:56,529 - poker_game - INFO - Hand #20, Phase: preflop
2025-10-31 19:01:56,529 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:01:56,529 - poker_game - INFO - Pot: 40, Current bet: 20
2025-10-31 19:01:56,530 - poker_game - INFO - Last raiser: 3
2025-10-31 19:01:56,530 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:56,531 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:01:56,531 - poker_game - INFO - Community cards: []
2025-10-31 19:01:56,532 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:01:56,532 - poker_game - INFO -   P1(Agent1): chips=6015, bet=20, status=active
2025-10-31 19:01:56,532 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:56,533 - poker_game - INFO -   P3(Agent3): chips=2051, bet=20, status=active
2025-10-31 19:01:56,535 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=folded
2025-10-31 19:01:56,539 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:01:56,541 - poker_game - INFO - ==================================================
2025-10-31 19:01:56,645 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "10♠",
    "3♦"
  ],
  "community": [],
  "your_chips": 2051,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 40,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 6015,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 951,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 40)",
    "all-in (2051)"
  ],
  "history": [
    "Turn dealt: 3♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 raised to 40",
    "Player 0 called 40",
    "Player 3 called 40",
    "River dealt: 6♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣",
    "Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠",
    "Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠",
    "Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 10"
  ]
}
2025-10-31 19:01:56,657 - poker_game - DEBUG - Create Session: {'id': '330d2e45-0de8-4f60-88dc-ee07b8dd1e75', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904916.6545618}
2025-10-31 19:01:58,645 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで10-3オフスーツは非常に弱いハンドであり、レイズに対してフォールドするのが最善です。ポットには40しかなく、コールするには20必要ですが、このハンドで勝つ可能性は低いです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 81, 'promptTokenCount': 956, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 956}], 'totalTokenCount': 1037}, 'invocationId': 'e-36b5d752-94c6-4b8d-bbac-7b5ab7bdf4ab', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'xLHEp9F6', 'timestamp': 1761904916.673489}]
2025-10-31 19:01:58,645 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:01:58,645 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで10-3オフスーツは非常に弱いハンドであり、レイズに対してフォールドするのが最善です。ポットには40しかなく、コールするには20必要ですが、このハンドで勝つ可能性は低いです。"
}
```
2025-10-31 19:01:58,646 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:01:58,646 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで10-3オフスーツは非常に弱いハンドであり、レイズに対してフォールドするのが最善です。ポットには40しかなく、コールするには20必要ですが、このハンドで勝つ可能性は低いです。"\n}\n```'
2025-10-31 19:01:58,646 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:01:58,646 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで10-3オフスーツは非常に弱いハンドであり、レイズに対してフォールドするのが最善です。ポットには40しかなく、コールするには20必要ですが、このハンドで勝つ可能性は低いです。"\n}'
2025-10-31 19:01:58,646 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで10-3オフスーツは非常に弱いハンドであり、レイズに対してフォールドするのが最善です。ポットには40しかなく、コールするには20必要ですが、このハンドで勝つ可能性は低いです。"
}
2025-10-31 19:01:58,646 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップで10-3オフスーツは非常に弱いハンドであり、レイズに対してフォールドするのが最善です。ポットには40しかなく、コールするには20必要ですが、このハンドで勝つ可能性は低いです。'}
2025-10-31 19:01:58,646 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 19:01:58,646 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 19:01:58,646 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:01:58,647 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップで10-3オフスーツは非常に弱いハンドであり、レイズに対してフォールドするのが最善です。ポットには40しかなく、コールするには20必要ですが、このハンドで勝つ可能性は低いです。
2025-10-31 19:01:58,647 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 19:01:58,648 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:01:58,648 - poker_game - INFO - Hand #20, Phase: preflop
2025-10-31 19:01:58,648 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:01:58,648 - poker_game - INFO - Pot: 40, Current bet: 20
2025-10-31 19:01:58,649 - poker_game - INFO - Last raiser: 3
2025-10-31 19:01:58,649 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:58,649 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 2
2025-10-31 19:01:58,649 - poker_game - INFO - Community cards: []
2025-10-31 19:01:58,649 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:01:58,650 - poker_game - INFO -   P1(Agent1): chips=6015, bet=20, status=active
2025-10-31 19:01:58,650 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:58,650 - poker_game - INFO -   P3(Agent3): chips=2051, bet=20, status=active
2025-10-31 19:01:58,650 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=folded
2025-10-31 19:01:58,651 - poker_game - INFO - ==================================================
2025-10-31 19:01:58,651 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 19:01:58,663 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:01:58,663 - poker_game - INFO - Hand #20, Phase: preflop
2025-10-31 19:01:58,663 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:01:58,664 - poker_game - INFO - Pot: 40, Current bet: 20
2025-10-31 19:01:58,664 - poker_game - INFO - Last raiser: 3
2025-10-31 19:01:58,664 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:58,664 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 3
2025-10-31 19:01:58,664 - poker_game - INFO - Community cards: []
2025-10-31 19:01:58,665 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:01:58,665 - poker_game - INFO -   P1(Agent1): chips=6015, bet=20, status=active
2025-10-31 19:01:58,665 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:58,665 - poker_game - INFO -   P3(Agent3): chips=2051, bet=20, status=folded
2025-10-31 19:01:58,665 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=folded
2025-10-31 19:01:58,665 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 19:01:58,666 - poker_game - INFO - ==================================================
2025-10-31 19:01:58,666 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:01:58,666 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:01:58,666 - poker_game - DEBUG - Active players: [1]
2025-10-31 19:01:58,666 - poker_game - INFO - Advanced from player 3 to player 1 (seat order)
2025-10-31 19:01:58,666 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:01:58,667 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:01:58,667 - poker_game - DEBUG - Active: 1, All-in: 0
2025-10-31 19:01:58,667 - poker_game - INFO - Betting complete: Only 1 or fewer players remaining
2025-10-31 19:01:58,667 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:01:58,667 - poker_game - INFO - Hand #20, Phase: preflop
2025-10-31 19:01:58,667 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:01:58,668 - poker_game - INFO - Pot: 40, Current bet: 20
2025-10-31 19:01:58,668 - poker_game - INFO - Last raiser: 3
2025-10-31 19:01:58,668 - poker_game - INFO - Betting round complete: True
2025-10-31 19:01:58,668 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 3
2025-10-31 19:01:58,668 - poker_game - INFO - Community cards: []
2025-10-31 19:01:58,668 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:01:58,668 - poker_game - INFO -   P1(Agent1): chips=6015, bet=20, status=active
2025-10-31 19:01:58,669 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:58,669 - poker_game - INFO -   P3(Agent3): chips=2051, bet=20, status=folded
2025-10-31 19:01:58,669 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=folded
2025-10-31 19:01:58,669 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:01:58,670 - poker_game - INFO - ==================================================
2025-10-31 19:01:58,771 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 19:01:58,772 - poker_game - INFO - Betting round complete: True
2025-10-31 19:01:58,772 - poker_game - INFO - Remaining players: 1
2025-10-31 19:01:58,773 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:01:58,773 - poker_game - INFO - Going to SHOWDOWN - only 1 or fewer players remaining
2025-10-31 19:01:58,773 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 19:01:58,773 - poker_game - INFO - Hand #20, Phase: showdown
2025-10-31 19:01:58,774 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:01:58,774 - poker_game - INFO - Pot: 40, Current bet: 20
2025-10-31 19:01:58,774 - poker_game - INFO - Last raiser: 3
2025-10-31 19:01:58,774 - poker_game - INFO - Betting round complete: True
2025-10-31 19:01:58,775 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 3
2025-10-31 19:01:58,775 - poker_game - INFO - Community cards: []
2025-10-31 19:01:58,775 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:01:58,775 - poker_game - INFO -   P1(Agent1): chips=6015, bet=20, status=active
2025-10-31 19:01:58,776 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:58,776 - poker_game - INFO -   P3(Agent3): chips=2051, bet=20, status=folded
2025-10-31 19:01:58,776 - poker_game - INFO -   P4(Agent4): chips=951, bet=0, status=folded
2025-10-31 19:01:58,777 - poker_game - INFO - ==================================================
2025-10-31 19:01:58,777 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 19:01:58,777 - poker_game - INFO - Pot: 40, Community cards: []
2025-10-31 19:01:58,778 - poker_game - INFO -   Player 1 status=active cards=['9♦', '8♠']
2025-10-31 19:01:58,779 - poker_game - INFO - Showdown winner by default: Player 1 awarded 40
2025-10-31 19:01:58,780 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 19:01:58,780 - poker_game - INFO - === STARTING NEW HAND #21 ===
2025-10-31 19:01:58,781 - poker_game - INFO - Active players for new hand: 4
2025-10-31 19:01:58,781 - poker_game - INFO - Moving dealer button
2025-10-31 19:01:58,781 - poker_game - INFO - Posting blinds
2025-10-31 19:01:58,804 - poker_game - INFO - Dealing hole cards
2025-10-31 19:01:58,805 - poker_game - INFO - Setting first actor for preflop
2025-10-31 19:01:58,816 - poker_game - INFO - Started new hand in database: hand_id=21
2025-10-31 19:01:58,816 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 19:01:58,817 - poker_game - INFO - Hand #21, Phase: preflop
2025-10-31 19:01:58,817 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:01:58,818 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:01:58,818 - poker_game - INFO - Last raiser: 4
2025-10-31 19:01:58,819 - poker_game - INFO - Betting round complete: False
2025-10-31 19:01:58,819 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:01:58,820 - poker_game - INFO - Community cards: []
2025-10-31 19:01:58,820 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:01:58,820 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 19:01:58,821 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:01:58,821 - poker_game - INFO -   P3(Agent3): chips=2041, bet=10, status=active
2025-10-31 19:01:58,822 - poker_game - INFO -   P4(Agent4): chips=931, bet=20, status=active
2025-10-31 19:01:58,822 - poker_game - INFO - ==================================================
2025-10-31 19:01:58,823 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "5♠",
    "4♦"
  ],
  "community": [],
  "your_chips": 943,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6055,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 2041,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 931,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (943)"
  ],
  "history": [
    "Player 0 called 40",
    "Player 3 called 40",
    "River dealt: 6♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣",
    "Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠",
    "Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠",
    "Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 10",
    "Player 3 folded",
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20"
  ]
}
2025-10-31 19:01:58,837 - poker_game - DEBUG - Create Session: {'id': '51b7cba8-d48a-4a78-9cd2-50c82fd54df1', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761904918.8342073}
2025-10-31 19:02:01,142 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（Pre-flop）で、5と4という弱いハンド（手札）です。ポット（Pot: 現在までの賭け金の合計）は30ですが、コール（Call: 相手のベット額と同じ額を支払うこと）するには20必要です。さらに、他のプレイヤーがすでに20をベットしており、レイズ（Raise: ベット額をさらに引き上げること）する可能性もあります。このハンドで勝つ確率は低いため、フォールド（Fold: 参加を諦めること）が最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 150, 'promptTokenCount': 967, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 967}], 'totalTokenCount': 1117}, 'invocationId': 'e-4ff88e6f-2a67-4804-a8c1-ac075268a01d', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'SCXB5c1R', 'timestamp': 1761904918.849065}]
2025-10-31 19:02:01,142 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:02:01,143 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（Pre-flop）で、5と4という弱いハンド（手札）です。ポット（Pot: 現在までの賭け金の合計）は30ですが、コール（Call: 相手のベット額と同じ額を支払うこと）するには20必要です。さらに、他のプレイヤーがすでに20をベットしており、レイズ（Raise: ベット額をさらに引き上げること）する可能性もあります。このハンドで勝つ確率は低いため、フォールド（Fold: 参加を諦めること）が最善の選択です。"
}
```
2025-10-31 19:02:01,143 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:02:01,143 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（Pre-flop）で、5と4という弱いハンド（手札）です。ポット（Pot: 現在までの賭け金の合計）は30ですが、コール（Call: 相手のベット額と同じ額を支払うこと）するには20必要です。さらに、他のプレイヤーがすでに20をベットしており、レイズ（Raise: ベット額をさらに引き上げること）する可能性もあります。このハンドで勝つ確率は低いため、フォールド（Fold: 参加を諦めること）が最善の選択です。"\n}\n```'
2025-10-31 19:02:01,143 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:02:01,144 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（Pre-flop）で、5と4という弱いハンド（手札）です。ポット（Pot: 現在までの賭け金の合計）は30ですが、コール（Call: 相手のベット額と同じ額を支払うこと）するには20必要です。さらに、他のプレイヤーがすでに20をベットしており、レイズ（Raise: ベット額をさらに引き上げること）する可能性もあります。このハンドで勝つ確率は低いため、フォールド（Fold: 参加を諦めること）が最善の選択です。"\n}'
2025-10-31 19:02:01,144 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（Pre-flop）で、5と4という弱いハンド（手札）です。ポット（Pot: 現在までの賭け金の合計）は30ですが、コール（Call: 相手のベット額と同じ額を支払うこと）するには20必要です。さらに、他のプレイヤーがすでに20をベットしており、レイズ（Raise: ベット額をさらに引き上げること）する可能性もあります。このハンドで勝つ確率は低いため、フォールド（Fold: 参加を諦めること）が最善の選択です。"
}
2025-10-31 19:02:01,144 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（Pre-flop）で、5と4という弱いハンド（手札）です。ポット（Pot: 現在までの賭け金の合計）は30ですが、コール（Call: 相手のベット額と同じ額を支払うこと）するには20必要です。さらに、他のプレイヤーがすでに20をベットしており、レイズ（Raise: ベット額をさらに引き上げること）する可能性もあります。このハンドで勝つ確率は低いため、フォールド（Fold: 参加を諦めること）が最善の選択です。'}
2025-10-31 19:02:01,144 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 19:02:01,144 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 19:02:01,144 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:02:01,145 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップ（Pre-flop）で、5と4という弱いハンド（手札）です。ポット（Pot: 現在までの賭け金の合計）は30ですが、コール（Call: 相手のベット額と同じ額を支払うこと）するには20必要です。さらに、他のプレイヤーがすでに20をベットしており、レイズ（Raise: ベット額をさらに引き上げること）する可能性もあります。このハンドで勝つ確率は低いため、フォールド（Fold: 参加を諦めること）が最善の選択です。
2025-10-31 19:02:01,146 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 19:02:01,146 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:02:01,147 - poker_game - INFO - Hand #21, Phase: preflop
2025-10-31 19:02:01,147 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:02:01,147 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:02:01,148 - poker_game - INFO - Last raiser: 4
2025-10-31 19:02:01,148 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:01,149 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:02:01,149 - poker_game - INFO - Community cards: []
2025-10-31 19:02:01,149 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=active
2025-10-31 19:02:01,150 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 19:02:01,150 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:01,150 - poker_game - INFO -   P3(Agent3): chips=2041, bet=10, status=active
2025-10-31 19:02:01,151 - poker_game - INFO -   P4(Agent4): chips=931, bet=20, status=active
2025-10-31 19:02:01,152 - poker_game - INFO - ==================================================
2025-10-31 19:02:01,152 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 19:02:01,164 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:02:01,165 - poker_game - INFO - Hand #21, Phase: preflop
2025-10-31 19:02:01,166 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:02:01,166 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:02:01,167 - poker_game - INFO - Last raiser: 4
2025-10-31 19:02:01,167 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:01,168 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:01,168 - poker_game - INFO - Community cards: []
2025-10-31 19:02:01,168 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:01,169 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 19:02:01,169 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:01,169 - poker_game - INFO -   P3(Agent3): chips=2041, bet=10, status=active
2025-10-31 19:02:01,170 - poker_game - INFO -   P4(Agent4): chips=931, bet=20, status=active
2025-10-31 19:02:01,170 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 19:02:01,171 - poker_game - INFO - ==================================================
2025-10-31 19:02:01,171 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:02:01,171 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:02:01,172 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:02:01,172 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:02:01,172 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:02:01,173 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:02:01,173 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:02:01,173 - poker_game - DEBUG - Player bets: [0, 10, 20], Current bet: 20, All same: False
2025-10-31 19:02:01,174 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:02:01,174 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:02:01,174 - poker_game - INFO - Hand #21, Phase: preflop
2025-10-31 19:02:01,175 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:02:01,175 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:02:01,176 - poker_game - INFO - Last raiser: 4
2025-10-31 19:02:01,176 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:01,177 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:01,177 - poker_game - INFO - Community cards: []
2025-10-31 19:02:01,178 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:01,179 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 19:02:01,179 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:01,180 - poker_game - INFO -   P3(Agent3): chips=2041, bet=10, status=active
2025-10-31 19:02:01,181 - poker_game - INFO -   P4(Agent4): chips=931, bet=20, status=active
2025-10-31 19:02:01,181 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:02:01,182 - poker_game - INFO - ==================================================
2025-10-31 19:02:01,283 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "J♣",
    "K♣"
  ],
  "community": [],
  "your_chips": 6055,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 2041,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 931,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (6055)"
  ],
  "history": [
    "Player 3 called 40",
    "River dealt: 6♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣",
    "Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠",
    "Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠",
    "Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 10",
    "Player 3 folded",
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded"
  ]
}
2025-10-31 19:02:01,295 - poker_game - DEBUG - Create Session: {'id': '3d84e76a-ce31-4fd9-b5ab-47e6c0934786', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904921.2915504}
2025-10-31 19:02:03,152 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "ポットは30で、コールには20必要です。J♣K♣は非常に強いプレフロップ（フロップが開く前）の手札です。相手のプレイヤー4はすでに20をベットしており、そのチップ量は931と少ないです。相手プレイヤー3は10をベットしていましたが、フォールドする可能性が高いでしょう。J♣K♣は、相手の少ないチップ量と、それほど強くない（この時点では不明だが、過去の履歴から推測）ベット額を考慮すると、レイズしてポットを大きくする価値があります。最低でも40（コール額20＋レイズ額20）のレイズが必要なので、60にレイズして、相手にプレッシャーをかけます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 191, 'promptTokenCount': 965, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 965}], 'totalTokenCount': 1156}, 'invocationId': 'e-156aefb5-0a7a-4360-8a78-a105d592bc6a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'ljBxiJ8R', 'timestamp': 1761904921.307494}]
2025-10-31 19:02:03,153 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:02:03,153 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 60,
  "reasoning": "ポットは30で、コールには20必要です。J♣K♣は非常に強いプレフロップ（フロップが開く前）の手札です。相手のプレイヤー4はすでに20をベットしており、そのチップ量は931と少ないです。相手プレイヤー3は10をベットしていましたが、フォールドする可能性が高いでしょう。J♣K♣は、相手の少ないチップ量と、それほど強くない（この時点では不明だが、過去の履歴から推測）ベット額を考慮すると、レイズしてポットを大きくする価値があります。最低でも40（コール額20＋レイズ額20）のレイズが必要なので、60にレイズして、相手にプレッシャーをかけます。"
}
```
2025-10-31 19:02:03,154 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:02:03,154 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "ポットは30で、コールには20必要です。J♣K♣は非常に強いプレフロップ（フロップが開く前）の手札です。相手のプレイヤー4はすでに20をベットしており、そのチップ量は931と少ないです。相手プレイヤー3は10をベットしていましたが、フォールドする可能性が高いでしょう。J♣K♣は、相手の少ないチップ量と、それほど強くない（この時点では不明だが、過去の履歴から推測）ベット額を考慮すると、レイズしてポットを大きくする価値があります。最低でも40（コール額20＋レイズ額20）のレイズが必要なので、60にレイズして、相手にプレッシャーをかけます。"\n}\n```'
2025-10-31 19:02:03,154 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:02:03,154 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "ポットは30で、コールには20必要です。J♣K♣は非常に強いプレフロップ（フロップが開く前）の手札です。相手のプレイヤー4はすでに20をベットしており、そのチップ量は931と少ないです。相手プレイヤー3は10をベットしていましたが、フォールドする可能性が高いでしょう。J♣K♣は、相手の少ないチップ量と、それほど強くない（この時点では不明だが、過去の履歴から推測）ベット額を考慮すると、レイズしてポットを大きくする価値があります。最低でも40（コール額20＋レイズ額20）のレイズが必要なので、60にレイズして、相手にプレッシャーをかけます。"\n}'
2025-10-31 19:02:03,155 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "raise",
  "amount": 60,
  "reasoning": "ポットは30で、コールには20必要です。J♣K♣は非常に強いプレフロップ（フロップが開く前）の手札です。相手のプレイヤー4はすでに20をベットしており、そのチップ量は931と少ないです。相手プレイヤー3は10をベットしていましたが、フォールドする可能性が高いでしょう。J♣K♣は、相手の少ないチップ量と、それほど強くない（この時点では不明だが、過去の履歴から推測）ベット額を考慮すると、レイズしてポットを大きくする価値があります。最低でも40（コール額20＋レイズ額20）のレイズが必要なので、60にレイズして、相手にプレッシャーをかけます。"
}
2025-10-31 19:02:03,155 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'raise', 'amount': 60, 'reasoning': 'ポットは30で、コールには20必要です。J♣K♣は非常に強いプレフロップ（フロップが開く前）の手札です。相手のプレイヤー4はすでに20をベットしており、そのチップ量は931と少ないです。相手プレイヤー3は10をベットしていましたが、フォールドする可能性が高いでしょう。J♣K♣は、相手の少ないチップ量と、それほど強くない（この時点では不明だが、過去の履歴から推測）ベット額を考慮すると、レイズしてポットを大きくする価値があります。最低でも40（コール額20＋レイズ額20）のレイズが必要なので、60にレイズして、相手にプレッシャーをかけます。'}
2025-10-31 19:02:03,155 - poker_game - DEBUG - [Agent1] Extracted values - action: 'raise', amount: 60
2025-10-31 19:02:03,155 - poker_game - DEBUG - [Agent1] Processing raise action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (6055)']
2025-10-31 19:02:03,155 - poker_game - DEBUG - [Agent1] Minimum raise amount extracted from 'raise (min 40)': 40
2025-10-31 19:02:03,155 - poker_game - DEBUG - [Agent1] Raise amount 60 is valid (min: 40)
2025-10-31 19:02:03,155 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'raise', 'amount': 60}
2025-10-31 19:02:03,155 - poker_game - INFO - [Agent1] Successfully parsed decision: raise, 60, ポットは30で、コールには20必要です。J♣K♣は非常に強いプレフロップ（フロップが開く前）の手札です。相手のプレイヤー4はすでに20をベットしており、そのチップ量は931と少ないです。相手プレイヤー3は10をベットしていましたが、フォールドする可能性が高いでしょう。J♣K♣は、相手の少ないチップ量と、それほど強くない（この時点では不明だが、過去の履歴から推測）ベット額を考慮すると、レイズしてポットを大きくする価値があります。最低でも40（コール額20＋レイズ額20）のレイズが必要なので、60にレイズして、相手にプレッシャーをかけます。
2025-10-31 19:02:03,156 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'raise' with amount 60
2025-10-31 19:02:03,156 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:02:03,157 - poker_game - INFO - Hand #21, Phase: preflop
2025-10-31 19:02:03,157 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:02:03,157 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:02:03,157 - poker_game - INFO - Last raiser: 4
2025-10-31 19:02:03,157 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:03,157 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:03,158 - poker_game - INFO - Community cards: []
2025-10-31 19:02:03,158 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:03,158 - poker_game - INFO -   P1(Agent1): chips=6055, bet=0, status=active
2025-10-31 19:02:03,159 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:03,159 - poker_game - INFO -   P3(Agent3): chips=2041, bet=10, status=active
2025-10-31 19:02:03,159 - poker_game - INFO -   P4(Agent4): chips=931, bet=20, status=active
2025-10-31 19:02:03,160 - poker_game - INFO - ==================================================
2025-10-31 19:02:03,160 - poker_game - INFO - ACTION_EXECUTED: Player 1 raised to 80
2025-10-31 19:02:03,168 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:02:03,168 - poker_game - INFO - Hand #21, Phase: preflop
2025-10-31 19:02:03,168 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:02:03,168 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 19:02:03,169 - poker_game - INFO - Last raiser: 1
2025-10-31 19:02:03,169 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:03,169 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:03,169 - poker_game - INFO - Community cards: []
2025-10-31 19:02:03,170 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:03,170 - poker_game - INFO -   P1(Agent1): chips=5975, bet=80, status=active
2025-10-31 19:02:03,170 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:03,170 - poker_game - INFO -   P3(Agent3): chips=2041, bet=10, status=active
2025-10-31 19:02:03,170 - poker_game - INFO -   P4(Agent4): chips=931, bet=20, status=active
2025-10-31 19:02:03,170 - poker_game - INFO - Extra: Action: Player 1 raised to 80
2025-10-31 19:02:03,171 - poker_game - INFO - ==================================================
2025-10-31 19:02:03,171 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:02:03,171 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:02:03,171 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:02:03,172 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:02:03,172 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:02:03,172 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:02:03,173 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:02:03,173 - poker_game - DEBUG - Player bets: [80, 10, 20], Current bet: 80, All same: False
2025-10-31 19:02:03,174 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:02:03,174 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:02:03,174 - poker_game - INFO - Hand #21, Phase: preflop
2025-10-31 19:02:03,175 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:02:03,176 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 19:02:03,176 - poker_game - INFO - Last raiser: 1
2025-10-31 19:02:03,176 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:03,176 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:03,176 - poker_game - INFO - Community cards: []
2025-10-31 19:02:03,177 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:03,177 - poker_game - INFO -   P1(Agent1): chips=5975, bet=80, status=active
2025-10-31 19:02:03,177 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:03,177 - poker_game - INFO -   P3(Agent3): chips=2041, bet=10, status=active
2025-10-31 19:02:03,177 - poker_game - INFO -   P4(Agent4): chips=931, bet=20, status=active
2025-10-31 19:02:03,177 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:02:03,178 - poker_game - INFO - ==================================================
2025-10-31 19:02:03,279 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "10♠",
    "Q♣"
  ],
  "community": [],
  "your_chips": 2041,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 110,
  "to_call": 70,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5975,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 931,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (70)",
    "raise (min 100)",
    "all-in (2041)"
  ],
  "history": [
    "River dealt: 6♠",
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣",
    "Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠",
    "Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠",
    "Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 10",
    "Player 3 folded",
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 raised to 80"
  ]
}
2025-10-31 19:02:03,289 - poker_game - DEBUG - Create Session: {'id': '44a535a4-ffe4-4d77-b948-90151189b7dd', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904923.2876663}
2025-10-31 19:02:05,976 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 70,\n  "reasoning": "プリフロップ（フロップが開く前の段階）で、手札は10とQです。これは「オフスート」（スートが異なる）であり、コネクター（連続した数字）でもないため、それほど強いハンドではありません。しかし、ポットは110で、コールに必要なのは70です。これは、ポットオッズ（ポットのサイズに対して、コールに必要な金額の比率）が favourable（有利）であり、それほど大きなリスクなしにフロップを見ることができるからです。プレイヤー1がレイズ（ベット額を上げる）し、プレイヤー4がコール（ベット額を合わせる）した後の状況です。プレイヤー4はすでに20をベットしており、プレイヤー1は80をベットしています。自分のコール額は10（ビッグブラインド）で、追加で70を支払う必要があります。プレイヤー4のチップが少なく、オールインのリスクもあるため、コールしてフロップを確認するのが合理的です。rais（ベット額を上げる）は、このハンドの強さではリスクが高すぎます。fold（降りる）は、ポットオッズが良いのでもったいないです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 267, 'promptTokenCount': 971, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 971}], 'totalTokenCount': 1238}, 'invocationId': 'e-345395b3-0c83-4d57-a133-e30e168a6830', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'mqK8wWZX', 'timestamp': 1761904923.299338}]
2025-10-31 19:02:05,977 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:02:05,977 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 70,
  "reasoning": "プリフロップ（フロップが開く前の段階）で、手札は10とQです。これは「オフスート」（スートが異なる）であり、コネクター（連続した数字）でもないため、それほど強いハンドではありません。しかし、ポットは110で、コールに必要なのは70です。これは、ポットオッズ（ポットのサイズに対して、コールに必要な金額の比率）が favourable（有利）であり、それほど大きなリスクなしにフロップを見ることができるからです。プレイヤー1がレイズ（ベット額を上げる）し、プレイヤー4がコール（ベット額を合わせる）した後の状況です。プレイヤー4はすでに20をベットしており、プレイヤー1は80をベットしています。自分のコール額は10（ビッグブラインド）で、追加で70を支払う必要があります。プレイヤー4のチップが少なく、オールインのリスクもあるため、コールしてフロップを確認するのが合理的です。rais（ベット額を上げる）は、このハンドの強さではリスクが高すぎます。fold（降りる）は、ポットオッズが良いのでもったいないです。"
}
```
2025-10-31 19:02:05,977 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:02:05,977 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 70,\n  "reasoning": "プリフロップ（フロップが開く前の段階）で、手札は10とQです。これは「オフスート」（スートが異なる）であり、コネクター（連続した数字）でもないため、それほど強いハンドではありません。しかし、ポットは110で、コールに必要なのは70です。これは、ポットオッズ（ポットのサイズに対して、コールに必要な金額の比率）が favourable（有利）であり、それほど大きなリスクなしにフロップを見ることができるからです。プレイヤー1がレイズ（ベット額を上げる）し、プレイヤー4がコール（ベット額を合わせる）した後の状況です。プレイヤー4はすでに20をベットしており、プレイヤー1は80をベットしています。自分のコール額は10（ビッグブラインド）で、追加で70を支払う必要があります。プレイヤー4のチップが少なく、オールインのリスクもあるため、コールしてフロップを確認するのが合理的です。rais（ベット額を上げる）は、このハンドの強さではリスクが高すぎます。fold（降りる）は、ポットオッズが良いのでもったいないです。"\n}\n```'
2025-10-31 19:02:05,977 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:02:05,978 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 70,\n  "reasoning": "プリフロップ（フロップが開く前の段階）で、手札は10とQです。これは「オフスート」（スートが異なる）であり、コネクター（連続した数字）でもないため、それほど強いハンドではありません。しかし、ポットは110で、コールに必要なのは70です。これは、ポットオッズ（ポットのサイズに対して、コールに必要な金額の比率）が favourable（有利）であり、それほど大きなリスクなしにフロップを見ることができるからです。プレイヤー1がレイズ（ベット額を上げる）し、プレイヤー4がコール（ベット額を合わせる）した後の状況です。プレイヤー4はすでに20をベットしており、プレイヤー1は80をベットしています。自分のコール額は10（ビッグブラインド）で、追加で70を支払う必要があります。プレイヤー4のチップが少なく、オールインのリスクもあるため、コールしてフロップを確認するのが合理的です。rais（ベット額を上げる）は、このハンドの強さではリスクが高すぎます。fold（降りる）は、ポットオッズが良いのでもったいないです。"\n}'
2025-10-31 19:02:05,978 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 70,
  "reasoning": "プリフロップ（フロップが開く前の段階）で、手札は10とQです。これは「オフスート」（スートが異なる）であり、コネクター（連続した数字）でもないため、それほど強いハンドではありません。しかし、ポットは110で、コールに必要なのは70です。これは、ポットオッズ（ポットのサイズに対して、コールに必要な金額の比率）が favourable（有利）であり、それほど大きなリスクなしにフロップを見ることができるからです。プレイヤー1がレイズ（ベット額を上げる）し、プレイヤー4がコール（ベット額を合わせる）した後の状況です。プレイヤー4はすでに20をベットしており、プレイヤー1は80をベットしています。自分のコール額は10（ビッグブラインド）で、追加で70を支払う必要があります。プレイヤー4のチップが少なく、オールインのリスクもあるため、コールしてフロップを確認するのが合理的です。rais（ベット額を上げる）は、このハンドの強さではリスクが高すぎます。fold（降りる）は、ポットオッズが良いのでもったいないです。"
}
2025-10-31 19:02:05,978 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 70, 'reasoning': 'プリフロップ（フロップが開く前の段階）で、手札は10とQです。これは「オフスート」（スートが異なる）であり、コネクター（連続した数字）でもないため、それほど強いハンドではありません。しかし、ポットは110で、コールに必要なのは70です。これは、ポットオッズ（ポットのサイズに対して、コールに必要な金額の比率）が favourable（有利）であり、それほど大きなリスクなしにフロップを見ることができるからです。プレイヤー1がレイズ（ベット額を上げる）し、プレイヤー4がコール（ベット額を合わせる）した後の状況です。プレイヤー4はすでに20をベットしており、プレイヤー1は80をベットしています。自分のコール額は10（ビッグブラインド）で、追加で70を支払う必要があります。プレイヤー4のチップが少なく、オールインのリスクもあるため、コールしてフロップを確認するのが合理的です。rais（ベット額を上げる）は、このハンドの強さではリスクが高すぎます。fold（降りる）は、ポットオッズが良いのでもったいないです。'}
2025-10-31 19:02:05,978 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 70
2025-10-31 19:02:05,978 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'call (70)', 'raise (min 100)', 'all-in (2041)']
2025-10-31 19:02:05,978 - poker_game - DEBUG - [Agent3] Call amount extracted from 'call (70)': 70
2025-10-31 19:02:05,978 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 70}
2025-10-31 19:02:05,979 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 70, プリフロップ（フロップが開く前の段階）で、手札は10とQです。これは「オフスート」（スートが異なる）であり、コネクター（連続した数字）でもないため、それほど強いハンドではありません。しかし、ポットは110で、コールに必要なのは70です。これは、ポットオッズ（ポットのサイズに対して、コールに必要な金額の比率）が favourable（有利）であり、それほど大きなリスクなしにフロップを見ることができるからです。プレイヤー1がレイズ（ベット額を上げる）し、プレイヤー4がコール（ベット額を合わせる）した後の状況です。プレイヤー4はすでに20をベットしており、プレイヤー1は80をベットしています。自分のコール額は10（ビッグブラインド）で、追加で70を支払う必要があります。プレイヤー4のチップが少なく、オールインのリスクもあるため、コールしてフロップを確認するのが合理的です。rais（ベット額を上げる）は、このハンドの強さではリスクが高すぎます。fold（降りる）は、ポットオッズが良いのでもったいないです。
2025-10-31 19:02:05,979 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 70
2025-10-31 19:02:05,979 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:02:05,980 - poker_game - INFO - Hand #21, Phase: preflop
2025-10-31 19:02:05,980 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:02:05,980 - poker_game - INFO - Pot: 110, Current bet: 80
2025-10-31 19:02:05,980 - poker_game - INFO - Last raiser: 1
2025-10-31 19:02:05,980 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:05,981 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:05,981 - poker_game - INFO - Community cards: []
2025-10-31 19:02:05,981 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:05,981 - poker_game - INFO -   P1(Agent1): chips=5975, bet=80, status=active
2025-10-31 19:02:05,981 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:05,982 - poker_game - INFO -   P3(Agent3): chips=2041, bet=10, status=active
2025-10-31 19:02:05,982 - poker_game - INFO -   P4(Agent4): chips=931, bet=20, status=active
2025-10-31 19:02:05,982 - poker_game - INFO - ==================================================
2025-10-31 19:02:05,982 - poker_game - INFO - ACTION_EXECUTED: Player 3 called 70
2025-10-31 19:02:05,991 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:02:05,992 - poker_game - INFO - Hand #21, Phase: preflop
2025-10-31 19:02:05,992 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:02:05,992 - poker_game - INFO - Pot: 180, Current bet: 80
2025-10-31 19:02:05,993 - poker_game - INFO - Last raiser: 1
2025-10-31 19:02:05,993 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:05,993 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:05,993 - poker_game - INFO - Community cards: []
2025-10-31 19:02:05,993 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:05,993 - poker_game - INFO -   P1(Agent1): chips=5975, bet=80, status=active
2025-10-31 19:02:05,994 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:05,994 - poker_game - INFO -   P3(Agent3): chips=1971, bet=80, status=active
2025-10-31 19:02:05,994 - poker_game - INFO -   P4(Agent4): chips=931, bet=20, status=active
2025-10-31 19:02:05,994 - poker_game - INFO - Extra: Action: Player 3 called 70
2025-10-31 19:02:05,994 - poker_game - INFO - ==================================================
2025-10-31 19:02:05,995 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:02:05,995 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:02:05,995 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:02:05,995 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 19:02:05,995 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:02:05,996 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:02:05,996 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:02:05,996 - poker_game - DEBUG - Player bets: [80, 80, 20], Current bet: 80, All same: False
2025-10-31 19:02:05,996 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:02:05,996 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:02:05,997 - poker_game - INFO - Hand #21, Phase: preflop
2025-10-31 19:02:05,997 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:02:05,997 - poker_game - INFO - Pot: 180, Current bet: 80
2025-10-31 19:02:05,997 - poker_game - INFO - Last raiser: 1
2025-10-31 19:02:05,997 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:05,998 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:05,998 - poker_game - INFO - Community cards: []
2025-10-31 19:02:05,998 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:05,999 - poker_game - INFO -   P1(Agent1): chips=5975, bet=80, status=active
2025-10-31 19:02:05,999 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:06,000 - poker_game - INFO -   P3(Agent3): chips=1971, bet=80, status=active
2025-10-31 19:02:06,002 - poker_game - INFO -   P4(Agent4): chips=931, bet=20, status=active
2025-10-31 19:02:06,003 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:02:06,003 - poker_game - INFO - ==================================================
2025-10-31 19:02:06,107 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "Q♥",
    "9♥"
  ],
  "community": [],
  "your_chips": 931,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 180,
  "to_call": 60,
  "dealer_button": 1,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5975,
      "bet": 80,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1971,
      "bet": 80,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (60)",
    "raise (min 100)",
    "all-in (931)"
  ],
  "history": [
    "Player 0 checked",
    "Player 3 checked",
    "Player 4 checked",
    "Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣",
    "Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠",
    "Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠",
    "Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 10",
    "Player 3 folded",
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 raised to 80",
    "Player 3 called 70"
  ]
}
2025-10-31 19:02:06,124 - poker_game - DEBUG - Create Session: {'id': 'aeb8ff76-4bd5-491b-8057-c3fb60315b80', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904926.1212208}
2025-10-31 19:02:16,297 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 19:02:26,159 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 19:02:37,953 - poker_game - INFO - Waiting for LLM API response for Agent4... 30 seconds elapsed
2025-10-31 19:02:34,760 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_dDAD2XeFwFDILeixGoo6X7Yp', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1297, 'totalTokenCount': 1314}, 'invocationId': 'e-d79b2173-4f22-4796-a8c2-045a86b292d8', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'BKQbwQAD', 'timestamp': 1761904926.137862}, {'content': {'parts': [{'functionResponse': {'id': 'call_dDAD2XeFwFDILeixGoo6X7Yp', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-d79b2173-4f22-4796-a8c2-045a86b292d8', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'qhnbcVh4', 'timestamp': 1761904927.09033}, {'content': {'parts': [{'functionCall': {'id': 'call_UHrqBWEFQfRZNZkGmLXHjZLf', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['Q♥', '9♥'], 'community': [], 'your_chips': 931, 'your_bet_this_round': 20, 'your_total_bet_this_hand': 20, 'pot': 180, 'to_call': 60, 'dealer_button': 1, 'current_turn': 4, 'players': [{'id': 0, 'chips': 943, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 5975, 'bet': 80, 'status': 'active'}, {'id': 3, 'chips': 1971, 'bet': 80, 'status': 'active'}], 'actions': ['fold', 'call (60)', 'raise (min 100)', 'all-in (931)'], 'history': ['Player 0 checked', 'Player 3 checked', 'Player 4 checked', 'Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣', 'Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠', 'Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠', 'Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠', 'Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠', 'Player 1 posted small blind 10', 'Player 3 posted big blind 20', 'Player 0 folded', 'Player 1 called 10', 'Player 3 folded', 'Showdown: Player 1 won 40', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 folded', 'Player 1 raised to 80', 'Player 3 called 70']}, 'call_amount': 60, 'pot_after_call': 240, 'equity': 0.4}, 'name': 'action_decision'}}, {'functionCall': {'id': 'call_ZkYXqc7tYSS8wsG5WW8mwyFw', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['Q♥', '9♥'], 'community': [], 'your_chips': 931, 'your_bet_this_round': 20, 'your_total_bet_this_hand': 20, 'pot': 180, 'to_call': 60, 'dealer_button': 1, 'current_turn': 4, 'players': [{'id': 0, 'chips': 943, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 5975, 'bet': 80, 'status': 'active'}, {'id': 3, 'chips': 1971, 'bet': 80, 'status': 'active'}], 'actions': ['fold', 'call (60)', 'raise (min 100)', 'all-in (931)'], 'history': ['Player 0 checked', 'Player 3 checked', 'Player 4 checked', 'Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣', 'Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠', 'Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠', 'Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠', 'Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠', 'Player 1 posted small blind 10', 'Player 3 posted big blind 20', 'Player 0 folded', 'Player 1 called 10', 'Player 3 folded', 'Showdown: Player 1 won 40', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 folded', 'Player 1 raised to 80', 'Player 3 called 70']}, 'call_amount': 60, 'pot_after_call': 240, 'equity': 0.4}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 1032, 'promptTokenCount': 1821, 'totalTokenCount': 2853}, 'invocationId': 'e-d79b2173-4f22-4796-a8c2-045a86b292d8', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'KXLRizv2', 'timestamp': 1761904927.092034}, {'content': {'parts': [{'functionResponse': {'id': 'call_UHrqBWEFQfRZNZkGmLXHjZLf', 'name': 'action_decision', 'response': {'action': 'call', 'amount': 60, 'reasoning': 'ポットオッズを満たしており（60.00(ポットに対して33.33%）、コールが妥当と判断。コール額: 60'}}}, {'functionResponse': {'id': 'call_ZkYXqc7tYSS8wsG5WW8mwyFw', 'name': 'action_decision', 'response': {'action': 'call', 'amount': 60, 'reasoning': 'ポットオッズを満たしており（60.00(ポットに対して33.33%）、コールが妥当と判断。コール額: 60'}}}], 'role': 'user'}, 'invocationId': 'ufik7Ywv', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'EJ1595P7', 'timestamp': 1761904954.954322}, {'content': {'parts': [{'text': '{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "ポットを満たしおり（60.00（ポットに対して33.33%））、コールが妥当と判断。コール額: 60"\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 63, 'promptTokenCount': 3161, 'totalTokenCount': 3224}, 'invocationId': 'e-d79b2173-4f22-4796-a8c2-045a86b292d8', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'ncMFnvBi', 'timestamp': 1761904954.957126}]
2025-10-31 19:02:34,760 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:02:34,760 - poker_game - DEBUG - {
  "action": "call",
  "amount": 60,
  "reasoning": "ポットを満たしおり（60.00（ポットに対して33.33%））、コールが妥当と判断。コール額: 60"
}
2025-10-31 19:02:34,761 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:02:34,761 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "ポットを満たしおり（60.00（ポットに対して33.33%））、コールが妥当と判断。コール額: 60"\n}'
2025-10-31 19:02:34,761 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:02:34,761 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "call",
  "amount": 60,
  "reasoning": "ポットを満たしおり（60.00（ポットに対して33.33%））、コールが妥当と判断。コール額: 60"
}
2025-10-31 19:02:34,761 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'call', 'amount': 60, 'reasoning': 'ポットを満たしおり（60.00（ポットに対して33.33%））、コールが妥当と判断。コール額: 60'}
2025-10-31 19:02:34,761 - poker_game - DEBUG - [Agent4] Extracted values - action: 'call', amount: 60
2025-10-31 19:02:34,761 - poker_game - DEBUG - [Agent4] Processing call action - available actions: ['fold', 'call (60)', 'raise (min 100)', 'all-in (931)']
2025-10-31 19:02:34,762 - poker_game - DEBUG - [Agent4] Call amount extracted from 'call (60)': 60
2025-10-31 19:02:34,762 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'call', 'amount': 60}
2025-10-31 19:02:34,762 - poker_game - INFO - [Agent4] Successfully parsed decision: call, 60, ポットを満たしおり（60.00（ポットに対して33.33%））、コールが妥当と判断。コール額: 60
2025-10-31 19:02:34,762 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'call' with amount 60
2025-10-31 19:02:34,763 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:02:34,763 - poker_game - INFO - Hand #21, Phase: preflop
2025-10-31 19:02:34,763 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:02:34,763 - poker_game - INFO - Pot: 180, Current bet: 80
2025-10-31 19:02:34,764 - poker_game - INFO - Last raiser: 1
2025-10-31 19:02:34,764 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:34,764 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:34,764 - poker_game - INFO - Community cards: []
2025-10-31 19:02:34,764 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:34,765 - poker_game - INFO -   P1(Agent1): chips=5975, bet=80, status=active
2025-10-31 19:02:34,765 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:34,765 - poker_game - INFO -   P3(Agent3): chips=1971, bet=80, status=active
2025-10-31 19:02:34,765 - poker_game - INFO -   P4(Agent4): chips=931, bet=20, status=active
2025-10-31 19:02:34,765 - poker_game - INFO - ==================================================
2025-10-31 19:02:34,765 - poker_game - INFO - ACTION_EXECUTED: Player 4 called 60
2025-10-31 19:02:34,777 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:02:34,778 - poker_game - INFO - Hand #21, Phase: preflop
2025-10-31 19:02:34,778 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:02:34,778 - poker_game - INFO - Pot: 240, Current bet: 80
2025-10-31 19:02:34,779 - poker_game - INFO - Last raiser: 1
2025-10-31 19:02:34,779 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:34,779 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:34,779 - poker_game - INFO - Community cards: []
2025-10-31 19:02:34,779 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:34,780 - poker_game - INFO -   P1(Agent1): chips=5975, bet=80, status=active
2025-10-31 19:02:34,780 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:34,780 - poker_game - INFO -   P3(Agent3): chips=1971, bet=80, status=active
2025-10-31 19:02:34,780 - poker_game - INFO -   P4(Agent4): chips=871, bet=80, status=active
2025-10-31 19:02:34,781 - poker_game - INFO - Extra: Action: Player 4 called 60
2025-10-31 19:02:34,781 - poker_game - INFO - ==================================================
2025-10-31 19:02:34,781 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:02:34,781 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:02:34,782 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:02:34,782 - poker_game - INFO - Advanced from player 4 to player 1 (seat order)
2025-10-31 19:02:34,782 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:02:34,782 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:02:34,782 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:02:34,782 - poker_game - DEBUG - Player bets: [80, 80, 80], Current bet: 80, All same: True
2025-10-31 19:02:34,783 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 19:02:34,783 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:02:34,783 - poker_game - INFO - Hand #21, Phase: preflop
2025-10-31 19:02:34,783 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:02:34,783 - poker_game - INFO - Pot: 240, Current bet: 80
2025-10-31 19:02:34,784 - poker_game - INFO - Last raiser: 1
2025-10-31 19:02:34,784 - poker_game - INFO - Betting round complete: True
2025-10-31 19:02:34,784 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:34,784 - poker_game - INFO - Community cards: []
2025-10-31 19:02:34,785 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:34,786 - poker_game - INFO -   P1(Agent1): chips=5975, bet=80, status=active
2025-10-31 19:02:34,787 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:34,788 - poker_game - INFO -   P3(Agent3): chips=1971, bet=80, status=active
2025-10-31 19:02:34,789 - poker_game - INFO -   P4(Agent4): chips=871, bet=80, status=active
2025-10-31 19:02:34,789 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:02:34,789 - poker_game - INFO - ==================================================
2025-10-31 19:02:34,890 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 19:02:34,891 - poker_game - INFO - Betting round complete: True
2025-10-31 19:02:34,891 - poker_game - INFO - Remaining players: 3
2025-10-31 19:02:34,891 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:02:34,892 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:02:34,892 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 19:02:34,892 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 19:02:34,906 - poker_game - INFO - Starting new betting round
2025-10-31 19:02:34,907 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:02:34,907 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:02:34,907 - poker_game - DEBUG - Active players for new betting round: [1, 3, 4]
2025-10-31 19:02:34,908 - poker_game - DEBUG - Dealer button: 1
2025-10-31 19:02:34,908 - poker_game - INFO - First actor: Player 3 (by phase rule), was 1
2025-10-31 19:02:34,908 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:02:34,909 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:02:34,909 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:02:34,909 - poker_game - INFO - Pot: 240, Current bet: 0
2025-10-31 19:02:34,910 - poker_game - INFO - Last raiser: None
2025-10-31 19:02:34,910 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:34,910 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:34,911 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:02:34,911 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:34,912 - poker_game - INFO -   P1(Agent1): chips=5975, bet=0, status=active
2025-10-31 19:02:34,912 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:34,912 - poker_game - INFO -   P3(Agent3): chips=1971, bet=0, status=active
2025-10-31 19:02:34,913 - poker_game - INFO -   P4(Agent4): chips=871, bet=0, status=active
2025-10-31 19:02:34,915 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 19:02:34,915 - poker_game - INFO - ==================================================
2025-10-31 19:02:34,919 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "flop",
  "your_cards": [
    "10♠",
    "Q♣"
  ],
  "community": [
    "6♣",
    "A♦",
    "3♠"
  ],
  "your_chips": 1971,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 240,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5975,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 871,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1971)"
  ],
  "history": [
    "Player 4 checked",
    "Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣",
    "Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠",
    "Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠",
    "Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 10",
    "Player 3 folded",
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 raised to 80",
    "Player 3 called 70",
    "Player 4 called 60",
    "Flop dealt: 6♣, A♦, 3♠"
  ]
}
2025-10-31 19:02:34,944 - poker_game - DEBUG - Create Session: {'id': '9b74f2f0-a0bc-48d8-b4d4-4f8644c68a95', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904954.9408083}
2025-10-31 19:02:37,097 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）が配られた段階で、あなたの手札は「10♠」「Q♣」、コミュニティカードは「6♣」「A♦」「3♠」です。あなたの手札は、コミュニティカードと組み合わせて強い役を作ることはできません。現在、あなたのアクションはチェック（ベットせずに次のプレイヤーにアクションを譲ること）が可能です。ポットは240で、コールする額は0なので、リスクを冒さずに次のカード（ターン）を見るのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 144, 'promptTokenCount': 997, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 997}], 'totalTokenCount': 1141}, 'invocationId': 'e-35d54aa7-b4b0-42dd-9b76-000a19605e91', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'cnNlGSLW', 'timestamp': 1761904954.962027}]
2025-10-31 19:02:37,097 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:02:37,098 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）が配られた段階で、あなたの手札は「10♠」「Q♣」、コミュニティカードは「6♣」「A♦」「3♠」です。あなたの手札は、コミュニティカードと組み合わせて強い役を作ることはできません。現在、あなたのアクションはチェック（ベットせずに次のプレイヤーにアクションを譲ること）が可能です。ポットは240で、コールする額は0なので、リスクを冒さずに次のカード（ターン）を見るのが最善です。"
}
```
2025-10-31 19:02:37,098 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:02:37,098 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）が配られた段階で、あなたの手札は「10♠」「Q♣」、コミュニティカードは「6♣」「A♦」「3♠」です。あなたの手札は、コミュニティカードと組み合わせて強い役を作ることはできません。現在、あなたのアクションはチェック（ベットせずに次のプレイヤーにアクションを譲ること）が可能です。ポットは240で、コールする額は0なので、リスクを冒さずに次のカード（ターン）を見るのが最善です。"\n}\n```'
2025-10-31 19:02:37,098 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:02:37,098 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）が配られた段階で、あなたの手札は「10♠」「Q♣」、コミュニティカードは「6♣」「A♦」「3♠」です。あなたの手札は、コミュニティカードと組み合わせて強い役を作ることはできません。現在、あなたのアクションはチェック（ベットせずに次のプレイヤーにアクションを譲ること）が可能です。ポットは240で、コールする額は0なので、リスクを冒さずに次のカード（ターン）を見るのが最善です。"\n}'
2025-10-31 19:02:37,098 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）が配られた段階で、あなたの手札は「10♠」「Q♣」、コミュニティカードは「6♣」「A♦」「3♠」です。あなたの手札は、コミュニティカードと組み合わせて強い役を作ることはできません。現在、あなたのアクションはチェック（ベットせずに次のプレイヤーにアクションを譲ること）が可能です。ポットは240で、コールする額は0なので、リスクを冒さずに次のカード（ターン）を見るのが最善です。"
}
2025-10-31 19:02:37,098 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）が配られた段階で、あなたの手札は「10♠」「Q♣」、コミュニティカードは「6♣」「A♦」「3♠」です。あなたの手札は、コミュニティカードと組み合わせて強い役を作ることはできません。現在、あなたのアクションはチェック（ベットせずに次のプレイヤーにアクションを譲ること）が可能です。ポットは240で、コールする額は0なので、リスクを冒さずに次のカード（ターン）を見るのが最善です。'}
2025-10-31 19:02:37,099 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 19:02:37,099 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 19:02:37,099 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:02:37,099 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, フロップ（最初の3枚のコミュニティカード）が配られた段階で、あなたの手札は「10♠」「Q♣」、コミュニティカードは「6♣」「A♦」「3♠」です。あなたの手札は、コミュニティカードと組み合わせて強い役を作ることはできません。現在、あなたのアクションはチェック（ベットせずに次のプレイヤーにアクションを譲ること）が可能です。ポットは240で、コールする額は0なので、リスクを冒さずに次のカード（ターン）を見るのが最善です。
2025-10-31 19:02:37,099 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 19:02:37,100 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:02:37,100 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:02:37,100 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:02:37,100 - poker_game - INFO - Pot: 240, Current bet: 0
2025-10-31 19:02:37,100 - poker_game - INFO - Last raiser: None
2025-10-31 19:02:37,101 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:37,101 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:37,101 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:02:37,101 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:37,102 - poker_game - INFO -   P1(Agent1): chips=5975, bet=0, status=active
2025-10-31 19:02:37,102 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:37,102 - poker_game - INFO -   P3(Agent3): chips=1971, bet=0, status=active
2025-10-31 19:02:37,102 - poker_game - INFO -   P4(Agent4): chips=871, bet=0, status=active
2025-10-31 19:02:37,102 - poker_game - INFO - ==================================================
2025-10-31 19:02:37,103 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 19:02:37,124 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:02:37,124 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:02:37,125 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:02:37,125 - poker_game - INFO - Pot: 240, Current bet: 0
2025-10-31 19:02:37,125 - poker_game - INFO - Last raiser: None
2025-10-31 19:02:37,125 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:37,126 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:37,126 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:02:37,126 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:37,127 - poker_game - INFO -   P1(Agent1): chips=5975, bet=0, status=active
2025-10-31 19:02:37,128 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:37,128 - poker_game - INFO -   P3(Agent3): chips=1971, bet=0, status=active
2025-10-31 19:02:37,128 - poker_game - INFO -   P4(Agent4): chips=871, bet=0, status=active
2025-10-31 19:02:37,128 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 19:02:37,129 - poker_game - INFO - ==================================================
2025-10-31 19:02:37,131 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:02:37,131 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:02:37,132 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:02:37,132 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 19:02:37,132 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:02:37,132 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:02:37,132 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:02:37,132 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:02:37,132 - poker_game - DEBUG - Active player indices: [1, 3, 4]
2025-10-31 19:02:37,132 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:02:37,132 - poker_game - DEBUG - Current player index: 4
2025-10-31 19:02:37,133 - poker_game - DEBUG - First actor index: 3
2025-10-31 19:02:37,133 - poker_game - DEBUG - Betting continues: Current player 4 != first actor 3
2025-10-31 19:02:37,133 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:02:37,133 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:02:37,133 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:02:37,133 - poker_game - INFO - Pot: 240, Current bet: 0
2025-10-31 19:02:37,133 - poker_game - INFO - Last raiser: None
2025-10-31 19:02:37,134 - poker_game - INFO - Betting round complete: False
2025-10-31 19:02:37,134 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:02:37,134 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:02:37,134 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:02:37,134 - poker_game - INFO -   P1(Agent1): chips=5975, bet=0, status=active
2025-10-31 19:02:37,134 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:02:37,135 - poker_game - INFO -   P3(Agent3): chips=1971, bet=0, status=active
2025-10-31 19:02:37,136 - poker_game - INFO -   P4(Agent4): chips=871, bet=0, status=active
2025-10-31 19:02:37,136 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:02:37,136 - poker_game - INFO - ==================================================
2025-10-31 19:02:37,238 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "flop",
  "your_cards": [
    "Q♥",
    "9♥"
  ],
  "community": [
    "6♣",
    "A♦",
    "3♠"
  ],
  "your_chips": 871,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 240,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5975,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1971,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (871)"
  ],
  "history": [
    "Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣",
    "Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠",
    "Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠",
    "Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 10",
    "Player 3 folded",
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 raised to 80",
    "Player 3 called 70",
    "Player 4 called 60",
    "Flop dealt: 6♣, A♦, 3♠",
    "Player 3 checked"
  ]
}
2025-10-31 19:02:37,249 - poker_game - DEBUG - Create Session: {'id': '59ec2d82-252e-4550-82f8-5075e5c3ab19', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904957.2467864}
2025-10-31 19:02:47,455 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 19:02:57,417 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 19:03:07,394 - poker_game - INFO - Waiting for LLM API response for Agent4... 30 seconds elapsed
2025-10-31 19:03:09,568 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_x2Sy1wovz4IBjqRftiTR4G2f', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1327, 'totalTokenCount': 1344}, 'invocationId': 'e-0d278ebc-984d-4457-8f9d-2deb7835d335', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'shtsjmTO', 'timestamp': 1761904957.261768}, {'content': {'parts': [{'functionResponse': {'id': 'call_x2Sy1wovz4IBjqRftiTR4G2f', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-0d278ebc-984d-4457-8f9d-2deb7835d335', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'KFCKZsuR', 'timestamp': 1761904959.22448}, {'content': {'parts': [{'functionCall': {'id': 'call_6mMhGWaHCGO9fchrC7qavw5e', 'args': {'game_state': {'your_id': 4, 'phase': 'flop', 'your_cards': ['Q♥', '9♥'], 'community': ['6♣', 'A♦', '3♠'], 'your_chips': 871, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 80, 'pot': 240, 'to_call': 0, 'dealer_button': 1, 'current_turn': 4, 'players': [{'id': 0, 'chips': 943, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 5975, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1971, 'bet': 0, 'status': 'active'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (871)'], 'history': ['Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣', 'Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠', 'Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠', 'Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠', 'Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠', 'Player 1 posted small blind 10', 'Player 3 posted big blind 20', 'Player 4 folded', 'Player 0 folded', 'Player 1 called 10', 'Player 3 folded', 'Showdown: Player 1 won 40', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 folded', 'Player 1 raised to 80', 'Player 3 called 70', 'Player 4 called 60', 'Flop dealt: 6♣, A♦, 3♠', 'Player 3 checked']}}, 'name': 'action_decision'}}, {'functionCall': {'id': 'call_rwC3K9x9yUOv87gbqGuMz3Yz', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 552, 'promptTokenCount': 1851, 'totalTokenCount': 2403}, 'invocationId': 'e-0d278ebc-984d-4457-8f9d-2deb7835d335', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'QmV8JHfx', 'timestamp': 1761904959.228194}, {'content': {'parts': [{'functionResponse': {'id': 'call_6mMhGWaHCGO9fchrC7qavw5e', 'name': 'action_decision', 'response': {'error': 'Invoking `action_decision()` failed as the following mandatory input parameters are not present:\ncall_amount\npot_after_call\nequity\nYou could retry calling this tool, but it is IMPORTANT for you to provide all the mandatory parameters.'}}}, {'functionResponse': {'id': 'call_rwC3K9x9yUOv87gbqGuMz3Yz', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'Wo1WAVyR', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'ti9suM1S', 'timestamp': 1761904973.864015}, {'content': {'parts': [{'functionCall': {'id': 'call_GN42d7HXZzxFsVi8dVBUvTan', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 2071, 'totalTokenCount': 2088}, 'invocationId': 'e-0d278ebc-984d-4457-8f9d-2deb7835d335', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'NdNZch9A', 'timestamp': 1761904973.868145}, {'content': {'parts': [{'functionResponse': {'id': 'call_GN42d7HXZzxFsVi8dVBUvTan', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-0d278ebc-984d-4457-8f9d-2deb7835d335', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'A1SWXehs', 'timestamp': 1761904975.091473}, {'content': {'parts': [{'functionCall': {'id': 'call_3VtSU9bN0vp6GeQzXr16Ojyp', 'args': {'call_amount': 0, 'pot_after_call': 240, 'equity': 0.3}, 'name': 'action_decision'}}, {'functionCall': {'id': 'call_toWZjwstDbYgWyzs3W37NGtf', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 65, 'promptTokenCount': 2532, 'totalTokenCount': 2597}, 'invocationId': 'e-0d278ebc-984d-4457-8f9d-2deb7835d335', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'IIs6irJO', 'timestamp': 1761904975.093686}, {'content': {'parts': [{'functionResponse': {'id': 'call_3VtSU9bN0vp6GeQzXr16Ojyp', 'name': 'action_decision', 'response': {'error': 'Invoking `action_decision()` failed as the following mandatory input parameters are not present:\ngame_state\nYou could retry calling this tool, but it is IMPORTANT for you to provide all the mandatory parameters.'}}}, {'functionResponse': {'id': 'call_toWZjwstDbYgWyzs3W37NGtf', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': '5aw50Jke', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'BSHwISRj', 'timestamp': 1761904977.208155}, {'content': {'parts': [{'functionCall': {'id': 'call_ApbZcFqNFUkeBTQiIMR9y07D', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 2253, 'totalTokenCount': 2270}, 'invocationId': 'e-0d278ebc-984d-4457-8f9d-2deb7835d335', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'FURTwan6', 'timestamp': 1761904977.21078}, {'content': {'parts': [{'functionResponse': {'id': 'call_ApbZcFqNFUkeBTQiIMR9y07D', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-0d278ebc-984d-4457-8f9d-2deb7835d335', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'pLJl9iXa', 'timestamp': 1761904978.484999}, {'content': {'parts': [{'functionCall': {'id': 'call_DCMZI9fe3T8W1K2OCaPKqMTF', 'args': {'game_state': {'your_id': 4, 'phase': 'flop', 'your_cards': ['Q♥', '9♥'], 'community': ['6♣', 'A♦', '3♠'], 'your_chips': 871, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 80, 'pot': 240, 'to_call': 0, 'dealer_button': 1, 'current_turn': 4, 'players': [{'id': 0, 'chips': 943, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 5975, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1971, 'bet': 0, 'status': 'active'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (871)'], 'history': ['Showdown: Player 0 hand=High Card: Q♦ - Q♦, 10♣, 9♠, 6♠, 4♠ cards=4♠, 10♣', 'Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠', 'Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠', 'Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠', 'Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠', 'Player 1 posted small blind 10', 'Player 3 posted big blind 20', 'Player 4 folded', 'Player 0 folded', 'Player 1 called 10', 'Player 3 folded', 'Showdown: Player 1 won 40', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 folded', 'Player 1 raised to 80', 'Player 3 called 70', 'Player 4 called 60', 'Flop dealt: 6♣, A♦, 3♠', 'Player 3 checked']}, 'call_amount': 0, 'pot_after_call': 240, 'equity': 0.3}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 534, 'promptTokenCount': 2718, 'totalTokenCount': 3252}, 'invocationId': 'e-0d278ebc-984d-4457-8f9d-2deb7835d335', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'JSOs1ELZ', 'timestamp': 1761904978.487861}, {'content': {'parts': [{'functionResponse': {'id': 'call_DCMZI9fe3T8W1K2OCaPKqMTF', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（72.00(ポットに対して30.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'e-0d278ebc-984d-4457-8f9d-2deb7835d335', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '8QBp9IWl', 'timestamp': 1761904987.690745}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い（72.00(ポットに対して30.00%）ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 38, 'promptTokenCount': 3303, 'totalTokenCount': 3341}, 'invocationId': 'e-0d278ebc-984d-4457-8f9d-2deb7835d335', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'QhZCfg5U', 'timestamp': 1761904987.70111}]
2025-10-31 19:03:09,568 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:03:09,569 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い（72.00(ポットに対して30.00%）ため、チェックします"}
2025-10-31 19:03:09,569 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:03:09,569 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い（72.00(ポットに対して30.00%）ため、チェックします"}'
2025-10-31 19:03:09,570 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:03:09,570 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い（72.00(ポットに対して30.00%）ため、チェックします"}
2025-10-31 19:03:09,570 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（72.00(ポットに対して30.00%）ため、チェックします'}
2025-10-31 19:03:09,570 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 19:03:09,570 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 19:03:09,570 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:03:09,570 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い（72.00(ポットに対して30.00%）ため、チェックします
2025-10-31 19:03:09,571 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 19:03:09,571 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:03:09,572 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:03:09,572 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:03:09,572 - poker_game - INFO - Pot: 240, Current bet: 0
2025-10-31 19:03:09,572 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:09,573 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:09,573 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:09,573 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:03:09,574 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:09,574 - poker_game - INFO -   P1(Agent1): chips=5975, bet=0, status=active
2025-10-31 19:03:09,574 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:09,574 - poker_game - INFO -   P3(Agent3): chips=1971, bet=0, status=active
2025-10-31 19:03:09,574 - poker_game - INFO -   P4(Agent4): chips=871, bet=0, status=active
2025-10-31 19:03:09,575 - poker_game - INFO - ==================================================
2025-10-31 19:03:09,575 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 19:03:09,596 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:03:09,597 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:03:09,597 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:03:09,597 - poker_game - INFO - Pot: 240, Current bet: 0
2025-10-31 19:03:09,597 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:09,597 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:09,598 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:09,598 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:03:09,598 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:09,598 - poker_game - INFO -   P1(Agent1): chips=5975, bet=0, status=active
2025-10-31 19:03:09,598 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:09,599 - poker_game - INFO -   P3(Agent3): chips=1971, bet=0, status=active
2025-10-31 19:03:09,599 - poker_game - INFO -   P4(Agent4): chips=871, bet=0, status=active
2025-10-31 19:03:09,599 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 19:03:09,599 - poker_game - INFO - ==================================================
2025-10-31 19:03:09,599 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:03:09,600 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:03:09,600 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:03:09,600 - poker_game - INFO - Advanced from player 4 to player 1 (seat order)
2025-10-31 19:03:09,600 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:03:09,600 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:03:09,600 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:03:09,600 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:03:09,600 - poker_game - DEBUG - Active player indices: [1, 3, 4]
2025-10-31 19:03:09,600 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:03:09,600 - poker_game - DEBUG - Current player index: 1
2025-10-31 19:03:09,601 - poker_game - DEBUG - First actor index: 3
2025-10-31 19:03:09,601 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 3
2025-10-31 19:03:09,601 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:03:09,601 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:03:09,601 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:03:09,602 - poker_game - INFO - Pot: 240, Current bet: 0
2025-10-31 19:03:09,602 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:09,602 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:09,608 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:09,609 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:03:09,609 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:09,609 - poker_game - INFO -   P1(Agent1): chips=5975, bet=0, status=active
2025-10-31 19:03:09,609 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:09,610 - poker_game - INFO -   P3(Agent3): chips=1971, bet=0, status=active
2025-10-31 19:03:09,610 - poker_game - INFO -   P4(Agent4): chips=871, bet=0, status=active
2025-10-31 19:03:09,610 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:03:09,610 - poker_game - INFO - ==================================================
2025-10-31 19:03:09,711 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "flop",
  "your_cards": [
    "J♣",
    "K♣"
  ],
  "community": [
    "6♣",
    "A♦",
    "3♠"
  ],
  "your_chips": 5975,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 240,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1971,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 871,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (5975)"
  ],
  "history": [
    "Showdown: Player 3 hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠ cards=9♣, 7♠",
    "Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠",
    "Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 10",
    "Player 3 folded",
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 raised to 80",
    "Player 3 called 70",
    "Player 4 called 60",
    "Flop dealt: 6♣, A♦, 3♠",
    "Player 3 checked",
    "Player 4 checked"
  ]
}
2025-10-31 19:03:09,726 - poker_game - DEBUG - Create Session: {'id': 'ee2ab57a-17e0-423d-8854-2dba2dc8b0fb', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761904989.7226012}
2025-10-31 19:03:12,267 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 200,\n  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、J♣ K♣ のハンドは、フロップの 6♣ と合わせてフラッシュ（同じスートのカードが5枚揃うこと）のドロー（完成すれば強い役になる可能性）があります。A♦ が開かれているため、トップペア（場にある一番高いカードと同じランクのカードをペアにすること）の可能性もわずかにあります。ポットサイズ（現在場にあるチップの総額）は240で、コール額は0です。相手のプレイヤー（Player 3とPlayer 4）はどちらもチェック（ベットせずに次のアクションに移ること）しているので、それほど強いハンドを持っていない可能性が高いです。ここで少しレイズ（ベット額を上げる行為）をして、相手にプレッシャーをかけ、ドローを完成させるための情報を得たいと思います。レイズ額は、相手のチップ量（Player 3: 1971, Player 4: 871）を考慮して、200に設定します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 251, 'promptTokenCount': 958, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 958}], 'totalTokenCount': 1209}, 'invocationId': 'e-88b83b34-5617-4383-8075-c0ea371f18cb', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'LctKep3a', 'timestamp': 1761904989.736004}]
2025-10-31 19:03:12,267 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:03:12,267 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 200,
  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、J♣ K♣ のハンドは、フロップの 6♣ と合わせてフラッシュ（同じスートのカードが5枚揃うこと）のドロー（完成すれば強い役になる可能性）があります。A♦ が開かれているため、トップペア（場にある一番高いカードと同じランクのカードをペアにすること）の可能性もわずかにあります。ポットサイズ（現在場にあるチップの総額）は240で、コール額は0です。相手のプレイヤー（Player 3とPlayer 4）はどちらもチェック（ベットせずに次のアクションに移ること）しているので、それほど強いハンドを持っていない可能性が高いです。ここで少しレイズ（ベット額を上げる行為）をして、相手にプレッシャーをかけ、ドローを完成させるための情報を得たいと思います。レイズ額は、相手のチップ量（Player 3: 1971, Player 4: 871）を考慮して、200に設定します。"
}
```
2025-10-31 19:03:12,268 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:03:12,268 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 200,\n  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、J♣ K♣ のハンドは、フロップの 6♣ と合わせてフラッシュ（同じスートのカードが5枚揃うこと）のドロー（完成すれば強い役になる可能性）があります。A♦ が開かれているため、トップペア（場にある一番高いカードと同じランクのカードをペアにすること）の可能性もわずかにあります。ポットサイズ（現在場にあるチップの総額）は240で、コール額は0です。相手のプレイヤー（Player 3とPlayer 4）はどちらもチェック（ベットせずに次のアクションに移ること）しているので、それほど強いハンドを持っていない可能性が高いです。ここで少しレイズ（ベット額を上げる行為）をして、相手にプレッシャーをかけ、ドローを完成させるための情報を得たいと思います。レイズ額は、相手のチップ量（Player 3: 1971, Player 4: 871）を考慮して、200に設定します。"\n}\n```'
2025-10-31 19:03:12,268 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:03:12,268 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 200,\n  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、J♣ K♣ のハンドは、フロップの 6♣ と合わせてフラッシュ（同じスートのカードが5枚揃うこと）のドロー（完成すれば強い役になる可能性）があります。A♦ が開かれているため、トップペア（場にある一番高いカードと同じランクのカードをペアにすること）の可能性もわずかにあります。ポットサイズ（現在場にあるチップの総額）は240で、コール額は0です。相手のプレイヤー（Player 3とPlayer 4）はどちらもチェック（ベットせずに次のアクションに移ること）しているので、それほど強いハンドを持っていない可能性が高いです。ここで少しレイズ（ベット額を上げる行為）をして、相手にプレッシャーをかけ、ドローを完成させるための情報を得たいと思います。レイズ額は、相手のチップ量（Player 3: 1971, Player 4: 871）を考慮して、200に設定します。"\n}'
2025-10-31 19:03:12,268 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "raise",
  "amount": 200,
  "reasoning": "フロップ（コミュニティカードが開かれた段階）で、J♣ K♣ のハンドは、フロップの 6♣ と合わせてフラッシュ（同じスートのカードが5枚揃うこと）のドロー（完成すれば強い役になる可能性）があります。A♦ が開かれているため、トップペア（場にある一番高いカードと同じランクのカードをペアにすること）の可能性もわずかにあります。ポットサイズ（現在場にあるチップの総額）は240で、コール額は0です。相手のプレイヤー（Player 3とPlayer 4）はどちらもチェック（ベットせずに次のアクションに移ること）しているので、それほど強いハンドを持っていない可能性が高いです。ここで少しレイズ（ベット額を上げる行為）をして、相手にプレッシャーをかけ、ドローを完成させるための情報を得たいと思います。レイズ額は、相手のチップ量（Player 3: 1971, Player 4: 871）を考慮して、200に設定します。"
}
2025-10-31 19:03:12,268 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'raise', 'amount': 200, 'reasoning': 'フロップ（コミュニティカードが開かれた段階）で、J♣ K♣ のハンドは、フロップの 6♣ と合わせてフラッシュ（同じスートのカードが5枚揃うこと）のドロー（完成すれば強い役になる可能性）があります。A♦ が開かれているため、トップペア（場にある一番高いカードと同じランクのカードをペアにすること）の可能性もわずかにあります。ポットサイズ（現在場にあるチップの総額）は240で、コール額は0です。相手のプレイヤー（Player 3とPlayer 4）はどちらもチェック（ベットせずに次のアクションに移ること）しているので、それほど強いハンドを持っていない可能性が高いです。ここで少しレイズ（ベット額を上げる行為）をして、相手にプレッシャーをかけ、ドローを完成させるための情報を得たいと思います。レイズ額は、相手のチップ量（Player 3: 1971, Player 4: 871）を考慮して、200に設定します。'}
2025-10-31 19:03:12,268 - poker_game - DEBUG - [Agent1] Extracted values - action: 'raise', amount: 200
2025-10-31 19:03:12,269 - poker_game - DEBUG - [Agent1] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (5975)']
2025-10-31 19:03:12,269 - poker_game - DEBUG - [Agent1] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 19:03:12,269 - poker_game - DEBUG - [Agent1] Raise amount 200 is valid (min: 20)
2025-10-31 19:03:12,269 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'raise', 'amount': 200}
2025-10-31 19:03:12,269 - poker_game - INFO - [Agent1] Successfully parsed decision: raise, 200, フロップ（コミュニティカードが開かれた段階）で、J♣ K♣ のハンドは、フロップの 6♣ と合わせてフラッシュ（同じスートのカードが5枚揃うこと）のドロー（完成すれば強い役になる可能性）があります。A♦ が開かれているため、トップペア（場にある一番高いカードと同じランクのカードをペアにすること）の可能性もわずかにあります。ポットサイズ（現在場にあるチップの総額）は240で、コール額は0です。相手のプレイヤー（Player 3とPlayer 4）はどちらもチェック（ベットせずに次のアクションに移ること）しているので、それほど強いハンドを持っていない可能性が高いです。ここで少しレイズ（ベット額を上げる行為）をして、相手にプレッシャーをかけ、ドローを完成させるための情報を得たいと思います。レイズ額は、相手のチップ量（Player 3: 1971, Player 4: 871）を考慮して、200に設定します。
2025-10-31 19:03:12,270 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'raise' with amount 200
2025-10-31 19:03:12,270 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:03:12,270 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:03:12,270 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:03:12,271 - poker_game - INFO - Pot: 240, Current bet: 0
2025-10-31 19:03:12,271 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:12,271 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:12,271 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:12,272 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:03:12,272 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:12,272 - poker_game - INFO -   P1(Agent1): chips=5975, bet=0, status=active
2025-10-31 19:03:12,272 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:12,272 - poker_game - INFO -   P3(Agent3): chips=1971, bet=0, status=active
2025-10-31 19:03:12,272 - poker_game - INFO -   P4(Agent4): chips=871, bet=0, status=active
2025-10-31 19:03:12,272 - poker_game - INFO - ==================================================
2025-10-31 19:03:12,273 - poker_game - INFO - ACTION_EXECUTED: Player 1 raised to 200
2025-10-31 19:03:12,287 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:03:12,287 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:03:12,287 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:03:12,287 - poker_game - INFO - Pot: 440, Current bet: 200
2025-10-31 19:03:12,287 - poker_game - INFO - Last raiser: 1
2025-10-31 19:03:12,287 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:12,288 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:12,288 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:03:12,288 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:12,288 - poker_game - INFO -   P1(Agent1): chips=5775, bet=200, status=active
2025-10-31 19:03:12,288 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:12,288 - poker_game - INFO -   P3(Agent3): chips=1971, bet=0, status=active
2025-10-31 19:03:12,288 - poker_game - INFO -   P4(Agent4): chips=871, bet=0, status=active
2025-10-31 19:03:12,288 - poker_game - INFO - Extra: Action: Player 1 raised to 200
2025-10-31 19:03:12,288 - poker_game - INFO - ==================================================
2025-10-31 19:03:12,288 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:03:12,289 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:03:12,289 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:03:12,289 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:03:12,289 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:03:12,289 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:03:12,289 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:03:12,289 - poker_game - DEBUG - Player bets: [200, 0, 0], Current bet: 200, All same: False
2025-10-31 19:03:12,289 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:03:12,289 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:03:12,289 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:03:12,289 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:03:12,289 - poker_game - INFO - Pot: 440, Current bet: 200
2025-10-31 19:03:12,290 - poker_game - INFO - Last raiser: 1
2025-10-31 19:03:12,290 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:12,290 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:12,290 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:03:12,290 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:12,291 - poker_game - INFO -   P1(Agent1): chips=5775, bet=200, status=active
2025-10-31 19:03:12,291 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:12,291 - poker_game - INFO -   P3(Agent3): chips=1971, bet=0, status=active
2025-10-31 19:03:12,291 - poker_game - INFO -   P4(Agent4): chips=871, bet=0, status=active
2025-10-31 19:03:12,291 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:03:12,291 - poker_game - INFO - ==================================================
2025-10-31 19:03:12,392 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "flop",
  "your_cards": [
    "10♠",
    "Q♣"
  ],
  "community": [
    "6♣",
    "A♦",
    "3♠"
  ],
  "your_chips": 1971,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 440,
  "to_call": 200,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5775,
      "bet": 200,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 871,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (200)",
    "raise (min 220)",
    "all-in (1971)"
  ],
  "history": [
    "Showdown: Player 4 hand=High Card: A♠ - A♠, Q♦, 9♠, 6♠, 4♥ cards=4♥, A♠",
    "Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 10",
    "Player 3 folded",
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 raised to 80",
    "Player 3 called 70",
    "Player 4 called 60",
    "Flop dealt: 6♣, A♦, 3♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 raised to 200"
  ]
}
2025-10-31 19:03:12,406 - poker_game - DEBUG - Create Session: {'id': 'b985143b-f9d9-4bf4-ad98-bf419154cb0d', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761904992.4030876}
2025-10-31 19:03:15,112 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 200,\n  "reasoning": "フロップ（コミュニティカードが開かれた後の最初のベッティングラウンド）で、あなたの手札は「10♠ Q♣」、コミュニティカードは「6♣ A♦ 3♠」です。これは「エイス・ハイ」（Aを引いているが、ペアもストレートもフラッシュもできていない状態）であり、あなたの手札とは何もペアになっていません。ポットは440で、コールするには200必要です。プレイヤー1が200をベットし、プレイヤー4はすでにフォールドしています。あなたの手札は現状では弱いですが、コールするにはポットオッズ（ポットのサイズに対してコールに必要な金額の比率）が有利です。また、将来のカード（ターンやリバー）でペアができたり、ストレートやフラッシュの可能性も残っています。したがって、コールして様子を見るのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 212, 'promptTokenCount': 936, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 936}], 'totalTokenCount': 1148}, 'invocationId': 'e-e2a2be23-6d65-49ff-bfa6-d5b69a2b14cb', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'EgUNIMd0', 'timestamp': 1761904992.416687}]
2025-10-31 19:03:15,113 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:03:15,113 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 200,
  "reasoning": "フロップ（コミュニティカードが開かれた後の最初のベッティングラウンド）で、あなたの手札は「10♠ Q♣」、コミュニティカードは「6♣ A♦ 3♠」です。これは「エイス・ハイ」（Aを引いているが、ペアもストレートもフラッシュもできていない状態）であり、あなたの手札とは何もペアになっていません。ポットは440で、コールするには200必要です。プレイヤー1が200をベットし、プレイヤー4はすでにフォールドしています。あなたの手札は現状では弱いですが、コールするにはポットオッズ（ポットのサイズに対してコールに必要な金額の比率）が有利です。また、将来のカード（ターンやリバー）でペアができたり、ストレートやフラッシュの可能性も残っています。したがって、コールして様子を見るのが最善です。"
}
```
2025-10-31 19:03:15,113 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:03:15,113 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 200,\n  "reasoning": "フロップ（コミュニティカードが開かれた後の最初のベッティングラウンド）で、あなたの手札は「10♠ Q♣」、コミュニティカードは「6♣ A♦ 3♠」です。これは「エイス・ハイ」（Aを引いているが、ペアもストレートもフラッシュもできていない状態）であり、あなたの手札とは何もペアになっていません。ポットは440で、コールするには200必要です。プレイヤー1が200をベットし、プレイヤー4はすでにフォールドしています。あなたの手札は現状では弱いですが、コールするにはポットオッズ（ポットのサイズに対してコールに必要な金額の比率）が有利です。また、将来のカード（ターンやリバー）でペアができたり、ストレートやフラッシュの可能性も残っています。したがって、コールして様子を見るのが最善です。"\n}\n```'
2025-10-31 19:03:15,114 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:03:15,114 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 200,\n  "reasoning": "フロップ（コミュニティカードが開かれた後の最初のベッティングラウンド）で、あなたの手札は「10♠ Q♣」、コミュニティカードは「6♣ A♦ 3♠」です。これは「エイス・ハイ」（Aを引いているが、ペアもストレートもフラッシュもできていない状態）であり、あなたの手札とは何もペアになっていません。ポットは440で、コールするには200必要です。プレイヤー1が200をベットし、プレイヤー4はすでにフォールドしています。あなたの手札は現状では弱いですが、コールするにはポットオッズ（ポットのサイズに対してコールに必要な金額の比率）が有利です。また、将来のカード（ターンやリバー）でペアができたり、ストレートやフラッシュの可能性も残っています。したがって、コールして様子を見るのが最善です。"\n}'
2025-10-31 19:03:15,114 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 200,
  "reasoning": "フロップ（コミュニティカードが開かれた後の最初のベッティングラウンド）で、あなたの手札は「10♠ Q♣」、コミュニティカードは「6♣ A♦ 3♠」です。これは「エイス・ハイ」（Aを引いているが、ペアもストレートもフラッシュもできていない状態）であり、あなたの手札とは何もペアになっていません。ポットは440で、コールするには200必要です。プレイヤー1が200をベットし、プレイヤー4はすでにフォールドしています。あなたの手札は現状では弱いですが、コールするにはポットオッズ（ポットのサイズに対してコールに必要な金額の比率）が有利です。また、将来のカード（ターンやリバー）でペアができたり、ストレートやフラッシュの可能性も残っています。したがって、コールして様子を見るのが最善です。"
}
2025-10-31 19:03:15,114 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 200, 'reasoning': 'フロップ（コミュニティカードが開かれた後の最初のベッティングラウンド）で、あなたの手札は「10♠ Q♣」、コミュニティカードは「6♣ A♦ 3♠」です。これは「エイス・ハイ」（Aを引いているが、ペアもストレートもフラッシュもできていない状態）であり、あなたの手札とは何もペアになっていません。ポットは440で、コールするには200必要です。プレイヤー1が200をベットし、プレイヤー4はすでにフォールドしています。あなたの手札は現状では弱いですが、コールするにはポットオッズ（ポットのサイズに対してコールに必要な金額の比率）が有利です。また、将来のカード（ターンやリバー）でペアができたり、ストレートやフラッシュの可能性も残っています。したがって、コールして様子を見るのが最善です。'}
2025-10-31 19:03:15,114 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 200
2025-10-31 19:03:15,114 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'call (200)', 'raise (min 220)', 'all-in (1971)']
2025-10-31 19:03:15,114 - poker_game - DEBUG - [Agent3] Call amount extracted from 'call (200)': 200
2025-10-31 19:03:15,114 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 200}
2025-10-31 19:03:15,115 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 200, フロップ（コミュニティカードが開かれた後の最初のベッティングラウンド）で、あなたの手札は「10♠ Q♣」、コミュニティカードは「6♣ A♦ 3♠」です。これは「エイス・ハイ」（Aを引いているが、ペアもストレートもフラッシュもできていない状態）であり、あなたの手札とは何もペアになっていません。ポットは440で、コールするには200必要です。プレイヤー1が200をベットし、プレイヤー4はすでにフォールドしています。あなたの手札は現状では弱いですが、コールするにはポットオッズ（ポットのサイズに対してコールに必要な金額の比率）が有利です。また、将来のカード（ターンやリバー）でペアができたり、ストレートやフラッシュの可能性も残っています。したがって、コールして様子を見るのが最善です。
2025-10-31 19:03:15,115 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 200
2025-10-31 19:03:15,116 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:03:15,116 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:03:15,116 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:03:15,116 - poker_game - INFO - Pot: 440, Current bet: 200
2025-10-31 19:03:15,116 - poker_game - INFO - Last raiser: 1
2025-10-31 19:03:15,116 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:15,116 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:15,116 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:03:15,116 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:15,117 - poker_game - INFO -   P1(Agent1): chips=5775, bet=200, status=active
2025-10-31 19:03:15,117 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:15,117 - poker_game - INFO -   P3(Agent3): chips=1971, bet=0, status=active
2025-10-31 19:03:15,117 - poker_game - INFO -   P4(Agent4): chips=871, bet=0, status=active
2025-10-31 19:03:15,117 - poker_game - INFO - ==================================================
2025-10-31 19:03:15,117 - poker_game - INFO - ACTION_EXECUTED: Player 3 called 200
2025-10-31 19:03:15,128 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:03:15,128 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:03:15,128 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:03:15,129 - poker_game - INFO - Pot: 640, Current bet: 200
2025-10-31 19:03:15,129 - poker_game - INFO - Last raiser: 1
2025-10-31 19:03:15,129 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:15,129 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:15,129 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:03:15,129 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:15,130 - poker_game - INFO -   P1(Agent1): chips=5775, bet=200, status=active
2025-10-31 19:03:15,130 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:15,130 - poker_game - INFO -   P3(Agent3): chips=1771, bet=200, status=active
2025-10-31 19:03:15,131 - poker_game - INFO -   P4(Agent4): chips=871, bet=0, status=active
2025-10-31 19:03:15,131 - poker_game - INFO - Extra: Action: Player 3 called 200
2025-10-31 19:03:15,131 - poker_game - INFO - ==================================================
2025-10-31 19:03:15,131 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:03:15,131 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:03:15,131 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:03:15,131 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 19:03:15,132 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:03:15,132 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:03:15,132 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:03:15,132 - poker_game - DEBUG - Player bets: [200, 200, 0], Current bet: 200, All same: False
2025-10-31 19:03:15,132 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:03:15,133 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:03:15,133 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:03:15,133 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:03:15,133 - poker_game - INFO - Pot: 640, Current bet: 200
2025-10-31 19:03:15,133 - poker_game - INFO - Last raiser: 1
2025-10-31 19:03:15,133 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:15,133 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:15,134 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:03:15,134 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:15,134 - poker_game - INFO -   P1(Agent1): chips=5775, bet=200, status=active
2025-10-31 19:03:15,134 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:15,134 - poker_game - INFO -   P3(Agent3): chips=1771, bet=200, status=active
2025-10-31 19:03:15,134 - poker_game - INFO -   P4(Agent4): chips=871, bet=0, status=active
2025-10-31 19:03:15,134 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:03:15,134 - poker_game - INFO - ==================================================
2025-10-31 19:03:15,236 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "flop",
  "your_cards": [
    "Q♥",
    "9♥"
  ],
  "community": [
    "6♣",
    "A♦",
    "3♠"
  ],
  "your_chips": 871,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 640,
  "to_call": 200,
  "dealer_button": 1,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5775,
      "bet": 200,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 200,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (200)",
    "raise (min 220)",
    "all-in (871)"
  ],
  "history": [
    "Side pot layer 0: amount=80, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Side pot layer 1: amount=120, winners=3 best_hand=One Pair: 9s - Q♦, 9♣, 9♠, 7♠, 6♠",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 10",
    "Player 3 folded",
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 raised to 80",
    "Player 3 called 70",
    "Player 4 called 60",
    "Flop dealt: 6♣, A♦, 3♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 raised to 200",
    "Player 3 called 200"
  ]
}
2025-10-31 19:03:15,354 - poker_game - DEBUG - Create Session: {'id': 'ba6e9448-cc45-4f6c-9c40-d92e2bde700a', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761904995.3506742}
2025-10-31 19:03:23,828 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_QKNKhJgkm4A06fwBO1C8U2Ru', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1210, 'totalTokenCount': 1227}, 'invocationId': 'e-64e5a3af-5ff0-434a-b634-99af45404945', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'JaQqb4kc', 'timestamp': 1761904995.370472}, {'content': {'parts': [{'functionResponse': {'id': 'call_QKNKhJgkm4A06fwBO1C8U2Ru', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64e5a3af-5ff0-434a-b634-99af45404945', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'Ke2TxRSt', 'timestamp': 1761904998.445361}, {'content': {'parts': [{'functionCall': {'id': 'call_2GV97jJHEznkDAHtmsHKaMtm', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1734, 'totalTokenCount': 1754}, 'invocationId': 'e-64e5a3af-5ff0-434a-b634-99af45404945', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'S14B5auj', 'timestamp': 1761904998.446957}, {'content': {'parts': [{'functionResponse': {'id': 'call_2GV97jJHEznkDAHtmsHKaMtm', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64e5a3af-5ff0-434a-b634-99af45404945', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'fIrL8UwV', 'timestamp': 1761905000.023857}, {'content': {'parts': [{'text': '{\n  "action": "call",\n  "amount": 200,\n  "reasoning": "私はクイーン-ナインのスートで、フロップのコミュニティボードが6♣, A♦, 3♠であり、エースが出ていることから、相手の可能性のある強いハンドに対抗するには、コールしてポットに参加するのが有利だと考えました。"\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 105, 'promptTokenCount': 1296, 'totalTokenCount': 1401}, 'invocationId': 'e-64e5a3af-5ff0-434a-b634-99af45404945', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'dM6gdC9k', 'timestamp': 1761905000.025281}]
2025-10-31 19:03:23,828 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:03:23,828 - poker_game - DEBUG - {
  "action": "call",
  "amount": 200,
  "reasoning": "私はクイーン-ナインのスートで、フロップのコミュニティボードが6♣, A♦, 3♠であり、エースが出ていることから、相手の可能性のある強いハンドに対抗するには、コールしてポットに参加するのが有利だと考えました。"
}
2025-10-31 19:03:23,829 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:03:23,829 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "call",\n  "amount": 200,\n  "reasoning": "私はクイーン-ナインのスートで、フロップのコミュニティボードが6♣, A♦, 3♠であり、エースが出ていることから、相手の可能性のある強いハンドに対抗するには、コールしてポットに参加するのが有利だと考えました。"\n}'
2025-10-31 19:03:23,829 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:03:23,829 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "call",
  "amount": 200,
  "reasoning": "私はクイーン-ナインのスートで、フロップのコミュニティボードが6♣, A♦, 3♠であり、エースが出ていることから、相手の可能性のある強いハンドに対抗するには、コールしてポットに参加するのが有利だと考えました。"
}
2025-10-31 19:03:23,829 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'call', 'amount': 200, 'reasoning': '私はクイーン-ナインのスートで、フロップのコミュニティボードが6♣, A♦, 3♠であり、エースが出ていることから、相手の可能性のある強いハンドに対抗するには、コールしてポットに参加するのが有利だと考えました。'}
2025-10-31 19:03:23,829 - poker_game - DEBUG - [Agent4] Extracted values - action: 'call', amount: 200
2025-10-31 19:03:23,829 - poker_game - DEBUG - [Agent4] Processing call action - available actions: ['fold', 'call (200)', 'raise (min 220)', 'all-in (871)']
2025-10-31 19:03:23,829 - poker_game - DEBUG - [Agent4] Call amount extracted from 'call (200)': 200
2025-10-31 19:03:23,830 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'call', 'amount': 200}
2025-10-31 19:03:23,830 - poker_game - INFO - [Agent4] Successfully parsed decision: call, 200, 私はクイーン-ナインのスートで、フロップのコミュニティボードが6♣, A♦, 3♠であり、エースが出ていることから、相手の可能性のある強いハンドに対抗するには、コールしてポットに参加するのが有利だと考えました。
2025-10-31 19:03:23,830 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'call' with amount 200
2025-10-31 19:03:23,831 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:03:23,831 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:03:23,831 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:03:23,831 - poker_game - INFO - Pot: 640, Current bet: 200
2025-10-31 19:03:23,831 - poker_game - INFO - Last raiser: 1
2025-10-31 19:03:23,831 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:23,832 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:23,832 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:03:23,832 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:23,832 - poker_game - INFO -   P1(Agent1): chips=5775, bet=200, status=active
2025-10-31 19:03:23,833 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:23,834 - poker_game - INFO -   P3(Agent3): chips=1771, bet=200, status=active
2025-10-31 19:03:23,834 - poker_game - INFO -   P4(Agent4): chips=871, bet=0, status=active
2025-10-31 19:03:23,834 - poker_game - INFO - ==================================================
2025-10-31 19:03:23,834 - poker_game - INFO - ACTION_EXECUTED: Player 4 called 200
2025-10-31 19:03:23,848 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:03:23,848 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:03:23,848 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:03:23,848 - poker_game - INFO - Pot: 840, Current bet: 200
2025-10-31 19:03:23,849 - poker_game - INFO - Last raiser: 1
2025-10-31 19:03:23,849 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:23,849 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:23,849 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:03:23,849 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:23,849 - poker_game - INFO -   P1(Agent1): chips=5775, bet=200, status=active
2025-10-31 19:03:23,849 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:23,849 - poker_game - INFO -   P3(Agent3): chips=1771, bet=200, status=active
2025-10-31 19:03:23,850 - poker_game - INFO -   P4(Agent4): chips=671, bet=200, status=active
2025-10-31 19:03:23,850 - poker_game - INFO - Extra: Action: Player 4 called 200
2025-10-31 19:03:23,850 - poker_game - INFO - ==================================================
2025-10-31 19:03:23,850 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:03:23,850 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:03:23,850 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:03:23,850 - poker_game - INFO - Advanced from player 4 to player 1 (seat order)
2025-10-31 19:03:23,850 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:03:23,850 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:03:23,850 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:03:23,850 - poker_game - DEBUG - Player bets: [200, 200, 200], Current bet: 200, All same: True
2025-10-31 19:03:23,850 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 19:03:23,851 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:03:23,851 - poker_game - INFO - Hand #21, Phase: flop
2025-10-31 19:03:23,851 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:03:23,851 - poker_game - INFO - Pot: 840, Current bet: 200
2025-10-31 19:03:23,851 - poker_game - INFO - Last raiser: 1
2025-10-31 19:03:23,851 - poker_game - INFO - Betting round complete: True
2025-10-31 19:03:23,851 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:23,851 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠']
2025-10-31 19:03:23,851 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:23,852 - poker_game - INFO -   P1(Agent1): chips=5775, bet=200, status=active
2025-10-31 19:03:23,852 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:23,852 - poker_game - INFO -   P3(Agent3): chips=1771, bet=200, status=active
2025-10-31 19:03:23,852 - poker_game - INFO -   P4(Agent4): chips=671, bet=200, status=active
2025-10-31 19:03:23,852 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:03:23,852 - poker_game - INFO - ==================================================
2025-10-31 19:03:23,957 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 19:03:23,957 - poker_game - INFO - Betting round complete: True
2025-10-31 19:03:23,958 - poker_game - INFO - Remaining players: 3
2025-10-31 19:03:23,958 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:03:23,958 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:03:23,959 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 19:03:23,959 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 19:03:23,968 - poker_game - INFO - Starting new betting round
2025-10-31 19:03:23,968 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:03:23,969 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:03:23,969 - poker_game - DEBUG - Active players for new betting round: [1, 3, 4]
2025-10-31 19:03:23,969 - poker_game - DEBUG - Dealer button: 1
2025-10-31 19:03:23,969 - poker_game - INFO - First actor: Player 3 (by phase rule), was 1
2025-10-31 19:03:23,970 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:03:23,970 - poker_game - INFO - Hand #21, Phase: turn
2025-10-31 19:03:23,970 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:03:23,970 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:23,971 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:23,971 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:23,972 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:23,972 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠']
2025-10-31 19:03:23,973 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:23,973 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:23,974 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:23,975 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:23,976 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:23,977 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 19:03:23,977 - poker_game - INFO - ==================================================
2025-10-31 19:03:23,978 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "turn",
  "your_cards": [
    "10♠",
    "Q♣"
  ],
  "community": [
    "6♣",
    "A♦",
    "3♠",
    "4♠"
  ],
  "your_chips": 1771,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 280,
  "pot": 840,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5775,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 671,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1771)"
  ],
  "history": [
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 10",
    "Player 3 folded",
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 raised to 80",
    "Player 3 called 70",
    "Player 4 called 60",
    "Flop dealt: 6♣, A♦, 3♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "Player 4 called 200",
    "Turn dealt: 4♠"
  ]
}
2025-10-31 19:03:23,990 - poker_game - DEBUG - Create Session: {'id': '1058cce1-b33d-4297-9f60-d8290e490f02', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905003.9876213}
2025-10-31 19:03:26,581 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "手札は10♠ Q♣で、コミュニティカードは6♣ A♦ 3♠ 4♠です。現在のボード（コミュニティカードの組み合わせ）では、ストレート（A-2-3-4-5）やフラッシュ（♠が3枚）の可能性が考えられますが、私の手札にはこれらの役を作るためのカードがありません。A（エース）はボードにありますが、私の手札にはAがなく、ペアもできていません。ボードの♠が3枚ですが、私の手札に♠がないためフラッシュは作れません。現状、役はできていない（ハイカードのA）ですが、ポットのサイズ（840）と、相手（Player 1 と Player 4）がベットしてきた額（Player 1 は 200、Player 4 も 200）を考慮すると、まだ相手が強い役を持っているかどうかわかりません。私自身もベット額を抑えたい状況なので、チェックをして相手の次のアクションを見ます。もし相手がベットしてきたら、その額を見てコールするかフォールドするかを判断します。相手のチップ量も考慮すると、Player 1 はチップが多く、Player 4 は少ないため、Player 4 の方がブラフの可能性もあるかもしれません。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 298, 'promptTokenCount': 831, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 831}], 'totalTokenCount': 1129}, 'invocationId': 'e-4d51a0a7-b53c-4e19-9fa4-9c185735e0d0', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'jHiL66ex', 'timestamp': 1761905003.999495}]
2025-10-31 19:03:26,582 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:03:26,582 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "手札は10♠ Q♣で、コミュニティカードは6♣ A♦ 3♠ 4♠です。現在のボード（コミュニティカードの組み合わせ）では、ストレート（A-2-3-4-5）やフラッシュ（♠が3枚）の可能性が考えられますが、私の手札にはこれらの役を作るためのカードがありません。A（エース）はボードにありますが、私の手札にはAがなく、ペアもできていません。ボードの♠が3枚ですが、私の手札に♠がないためフラッシュは作れません。現状、役はできていない（ハイカードのA）ですが、ポットのサイズ（840）と、相手（Player 1 と Player 4）がベットしてきた額（Player 1 は 200、Player 4 も 200）を考慮すると、まだ相手が強い役を持っているかどうかわかりません。私自身もベット額を抑えたい状況なので、チェックをして相手の次のアクションを見ます。もし相手がベットしてきたら、その額を見てコールするかフォールドするかを判断します。相手のチップ量も考慮すると、Player 1 はチップが多く、Player 4 は少ないため、Player 4 の方がブラフの可能性もあるかもしれません。"
}
```
2025-10-31 19:03:26,583 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:03:26,583 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "手札は10♠ Q♣で、コミュニティカードは6♣ A♦ 3♠ 4♠です。現在のボード（コミュニティカードの組み合わせ）では、ストレート（A-2-3-4-5）やフラッシュ（♠が3枚）の可能性が考えられますが、私の手札にはこれらの役を作るためのカードがありません。A（エース）はボードにありますが、私の手札にはAがなく、ペアもできていません。ボードの♠が3枚ですが、私の手札に♠がないためフラッシュは作れません。現状、役はできていない（ハイカードのA）ですが、ポットのサイズ（840）と、相手（Player 1 と Player 4）がベットしてきた額（Player 1 は 200、Player 4 も 200）を考慮すると、まだ相手が強い役を持っているかどうかわかりません。私自身もベット額を抑えたい状況なので、チェックをして相手の次のアクションを見ます。もし相手がベットしてきたら、その額を見てコールするかフォールドするかを判断します。相手のチップ量も考慮すると、Player 1 はチップが多く、Player 4 は少ないため、Player 4 の方がブラフの可能性もあるかもしれません。"\n}\n```'
2025-10-31 19:03:26,583 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:03:26,584 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "手札は10♠ Q♣で、コミュニティカードは6♣ A♦ 3♠ 4♠です。現在のボード（コミュニティカードの組み合わせ）では、ストレート（A-2-3-4-5）やフラッシュ（♠が3枚）の可能性が考えられますが、私の手札にはこれらの役を作るためのカードがありません。A（エース）はボードにありますが、私の手札にはAがなく、ペアもできていません。ボードの♠が3枚ですが、私の手札に♠がないためフラッシュは作れません。現状、役はできていない（ハイカードのA）ですが、ポットのサイズ（840）と、相手（Player 1 と Player 4）がベットしてきた額（Player 1 は 200、Player 4 も 200）を考慮すると、まだ相手が強い役を持っているかどうかわかりません。私自身もベット額を抑えたい状況なので、チェックをして相手の次のアクションを見ます。もし相手がベットしてきたら、その額を見てコールするかフォールドするかを判断します。相手のチップ量も考慮すると、Player 1 はチップが多く、Player 4 は少ないため、Player 4 の方がブラフの可能性もあるかもしれません。"\n}'
2025-10-31 19:03:26,584 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "手札は10♠ Q♣で、コミュニティカードは6♣ A♦ 3♠ 4♠です。現在のボード（コミュニティカードの組み合わせ）では、ストレート（A-2-3-4-5）やフラッシュ（♠が3枚）の可能性が考えられますが、私の手札にはこれらの役を作るためのカードがありません。A（エース）はボードにありますが、私の手札にはAがなく、ペアもできていません。ボードの♠が3枚ですが、私の手札に♠がないためフラッシュは作れません。現状、役はできていない（ハイカードのA）ですが、ポットのサイズ（840）と、相手（Player 1 と Player 4）がベットしてきた額（Player 1 は 200、Player 4 も 200）を考慮すると、まだ相手が強い役を持っているかどうかわかりません。私自身もベット額を抑えたい状況なので、チェックをして相手の次のアクションを見ます。もし相手がベットしてきたら、その額を見てコールするかフォールドするかを判断します。相手のチップ量も考慮すると、Player 1 はチップが多く、Player 4 は少ないため、Player 4 の方がブラフの可能性もあるかもしれません。"
}
2025-10-31 19:03:26,584 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '手札は10♠ Q♣で、コミュニティカードは6♣ A♦ 3♠ 4♠です。現在のボード（コミュニティカードの組み合わせ）では、ストレート（A-2-3-4-5）やフラッシュ（♠が3枚）の可能性が考えられますが、私の手札にはこれらの役を作るためのカードがありません。A（エース）はボードにありますが、私の手札にはAがなく、ペアもできていません。ボードの♠が3枚ですが、私の手札に♠がないためフラッシュは作れません。現状、役はできていない（ハイカードのA）ですが、ポットのサイズ（840）と、相手（Player 1 と Player 4）がベットしてきた額（Player 1 は 200、Player 4 も 200）を考慮すると、まだ相手が強い役を持っているかどうかわかりません。私自身もベット額を抑えたい状況なので、チェックをして相手の次のアクションを見ます。もし相手がベットしてきたら、その額を見てコールするかフォールドするかを判断します。相手のチップ量も考慮すると、Player 1 はチップが多く、Player 4 は少ないため、Player 4 の方がブラフの可能性もあるかもしれません。'}
2025-10-31 19:03:26,584 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 19:03:26,584 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 19:03:26,584 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:03:26,584 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, 手札は10♠ Q♣で、コミュニティカードは6♣ A♦ 3♠ 4♠です。現在のボード（コミュニティカードの組み合わせ）では、ストレート（A-2-3-4-5）やフラッシュ（♠が3枚）の可能性が考えられますが、私の手札にはこれらの役を作るためのカードがありません。A（エース）はボードにありますが、私の手札にはAがなく、ペアもできていません。ボードの♠が3枚ですが、私の手札に♠がないためフラッシュは作れません。現状、役はできていない（ハイカードのA）ですが、ポットのサイズ（840）と、相手（Player 1 と Player 4）がベットしてきた額（Player 1 は 200、Player 4 も 200）を考慮すると、まだ相手が強い役を持っているかどうかわかりません。私自身もベット額を抑えたい状況なので、チェックをして相手の次のアクションを見ます。もし相手がベットしてきたら、その額を見てコールするかフォールドするかを判断します。相手のチップ量も考慮すると、Player 1 はチップが多く、Player 4 は少ないため、Player 4 の方がブラフの可能性もあるかもしれません。
2025-10-31 19:03:26,585 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 19:03:26,585 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:03:26,586 - poker_game - INFO - Hand #21, Phase: turn
2025-10-31 19:03:26,587 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:03:26,587 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:26,588 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:26,589 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:26,589 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:26,589 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠']
2025-10-31 19:03:26,590 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:26,590 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:26,590 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:26,590 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:26,591 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:26,591 - poker_game - INFO - ==================================================
2025-10-31 19:03:26,592 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 19:03:26,608 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:03:26,608 - poker_game - INFO - Hand #21, Phase: turn
2025-10-31 19:03:26,608 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:03:26,608 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:26,609 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:26,609 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:26,609 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:26,609 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠']
2025-10-31 19:03:26,609 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:26,609 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:26,609 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:26,609 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:26,609 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:26,609 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 19:03:26,609 - poker_game - INFO - ==================================================
2025-10-31 19:03:26,610 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:03:26,610 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:03:26,610 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:03:26,610 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 19:03:26,610 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:03:26,610 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:03:26,610 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:03:26,610 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:03:26,610 - poker_game - DEBUG - Active player indices: [1, 3, 4]
2025-10-31 19:03:26,610 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:03:26,610 - poker_game - DEBUG - Current player index: 4
2025-10-31 19:03:26,610 - poker_game - DEBUG - First actor index: 3
2025-10-31 19:03:26,610 - poker_game - DEBUG - Betting continues: Current player 4 != first actor 3
2025-10-31 19:03:26,611 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:03:26,611 - poker_game - INFO - Hand #21, Phase: turn
2025-10-31 19:03:26,611 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:03:26,611 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:26,611 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:26,611 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:26,611 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:26,611 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠']
2025-10-31 19:03:26,611 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:26,611 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:26,611 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:26,612 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:26,612 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:26,612 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:03:26,612 - poker_game - INFO - ==================================================
2025-10-31 19:03:26,716 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "turn",
  "your_cards": [
    "Q♥",
    "9♥"
  ],
  "community": [
    "6♣",
    "A♦",
    "3♠",
    "4♠"
  ],
  "your_chips": 671,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 280,
  "pot": 840,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5775,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (671)"
  ],
  "history": [
    "Player 3 posted big blind 20",
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 10",
    "Player 3 folded",
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 raised to 80",
    "Player 3 called 70",
    "Player 4 called 60",
    "Flop dealt: 6♣, A♦, 3♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "Player 4 called 200",
    "Turn dealt: 4♠",
    "Player 3 checked"
  ]
}
2025-10-31 19:03:26,726 - poker_game - DEBUG - Create Session: {'id': 'aab2380c-feb6-48db-b4a2-1d161e1e0b55', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761905006.723926}
2025-10-31 19:03:36,929 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 19:03:39,254 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_viVEUCoInjXH98jC7N6Fy1nZ', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1132, 'totalTokenCount': 1149}, 'invocationId': 'e-488d00f5-8438-47ec-89e9-6babb04d7837', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'nHhFZEPV', 'timestamp': 1761905006.737296}, {'content': {'parts': [{'functionResponse': {'id': 'call_viVEUCoInjXH98jC7N6Fy1nZ', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-488d00f5-8438-47ec-89e9-6babb04d7837', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '6xORFO4K', 'timestamp': 1761905007.848386}, {'content': {'parts': [{'functionCall': {'id': 'call_NGHdTmj8BXmIoHNrlS9R0uBL', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1656, 'totalTokenCount': 1676}, 'invocationId': 'e-488d00f5-8438-47ec-89e9-6babb04d7837', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'mwdJFxIY', 'timestamp': 1761905007.849899}, {'content': {'parts': [{'functionResponse': {'id': 'call_NGHdTmj8BXmIoHNrlS9R0uBL', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-488d00f5-8438-47ec-89e9-6babb04d7837', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'HykgK0Jv', 'timestamp': 1761905008.947768}, {'content': {'parts': [{'functionCall': {'id': 'call_wNHFJ4z9sNLXmfXL2UQgGf4v', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1218, 'totalTokenCount': 1235}, 'invocationId': 'e-488d00f5-8438-47ec-89e9-6babb04d7837', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'tswBM4Um', 'timestamp': 1761905008.949089}, {'content': {'parts': [{'functionResponse': {'id': 'call_wNHFJ4z9sNLXmfXL2UQgGf4v', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-488d00f5-8438-47ec-89e9-6babb04d7837', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'E7cFsJYa', 'timestamp': 1761905007.964796}, {'content': {'parts': [{'functionCall': {'id': 'call_Y5UEsoIylb4OQloxnWByh6Y0', 'args': {'game_state': {'your_id': 4, 'phase': 'turn', 'your_cards': ['Q♥', '9♥'], 'community': ['6♣', 'A♦', '3♠', '4♠'], 'your_chips': 671, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 280, 'pot': 840, 'to_call': 0, 'dealer_button': 1, 'current_turn': 4, 'players': [{'id': 0, 'chips': 943, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 5775, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1771, 'bet': 0, 'status': 'active'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (671)'], 'history': ['Player 3 posted big blind 20', 'Player 4 folded', 'Player 0 folded', 'Player 1 called 10', 'Player 3 folded', 'Showdown: Player 1 won 40', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 folded', 'Player 1 raised to 80', 'Player 3 called 70', 'Player 4 called 60', 'Flop dealt: 6♣, A♦, 3♠', 'Player 3 checked', 'Player 4 checked', 'Player 1 raised to 200', 'Player 3 called 200', 'Player 4 called 200', 'Turn dealt: 4♠', 'Player 3 checked']}, 'call_amount': 0, 'pot_after_call': 840, 'equity': 0.3}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 353, 'promptTokenCount': 1748, 'totalTokenCount': 2101}, 'invocationId': 'e-488d00f5-8438-47ec-89e9-6babb04d7837', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 's4Ft4l1Y', 'timestamp': 1761905007.96653}, {'content': {'parts': [{'functionResponse': {'id': 'call_Y5UEsoIylb4OQloxnWByh6Y0', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（252.00(ポットに対して30.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'e-488d00f5-8438-47ec-89e9-6babb04d7837', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '7hTH1EsO', 'timestamp': 1761905017.661493}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い（252.00(ポットに対して30.00%）ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 38, 'promptTokenCount': 2136, 'totalTokenCount': 2174}, 'invocationId': 'e-488d00f5-8438-47ec-89e9-6babb04d7837', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'YvHzai1K', 'timestamp': 1761905017.664386}]
2025-10-31 19:03:39,254 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:03:39,254 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い（252.00(ポットに対して30.00%）ため、チェックします"}
2025-10-31 19:03:39,255 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:03:39,255 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い（252.00(ポットに対して30.00%）ため、チェックします"}'
2025-10-31 19:03:39,255 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:03:39,255 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い（252.00(ポットに対して30.00%）ため、チェックします"}
2025-10-31 19:03:39,255 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（252.00(ポットに対して30.00%）ため、チェックします'}
2025-10-31 19:03:39,255 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 19:03:39,255 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 19:03:39,256 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:03:39,256 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い（252.00(ポットに対して30.00%）ため、チェックします
2025-10-31 19:03:39,257 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 19:03:39,257 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:03:39,257 - poker_game - INFO - Hand #21, Phase: turn
2025-10-31 19:03:39,257 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:03:39,258 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:39,258 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:39,258 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:39,258 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:39,258 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠']
2025-10-31 19:03:39,259 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:39,259 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:39,259 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:39,259 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:39,259 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:39,260 - poker_game - INFO - ==================================================
2025-10-31 19:03:39,260 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 19:03:39,273 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:03:39,274 - poker_game - INFO - Hand #21, Phase: turn
2025-10-31 19:03:39,274 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:03:39,274 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:39,274 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:39,274 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:39,275 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:39,275 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠']
2025-10-31 19:03:39,275 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:39,275 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:39,276 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:39,276 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:39,276 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:39,276 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 19:03:39,277 - poker_game - INFO - ==================================================
2025-10-31 19:03:39,277 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:03:39,277 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:03:39,277 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:03:39,277 - poker_game - INFO - Advanced from player 4 to player 1 (seat order)
2025-10-31 19:03:39,277 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:03:39,277 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:03:39,278 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:03:39,278 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:03:39,278 - poker_game - DEBUG - Active player indices: [1, 3, 4]
2025-10-31 19:03:39,278 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:03:39,278 - poker_game - DEBUG - Current player index: 1
2025-10-31 19:03:39,278 - poker_game - DEBUG - First actor index: 3
2025-10-31 19:03:39,278 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 3
2025-10-31 19:03:39,278 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:03:39,279 - poker_game - INFO - Hand #21, Phase: turn
2025-10-31 19:03:39,279 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:03:39,279 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:39,279 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:39,279 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:39,280 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:39,280 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠']
2025-10-31 19:03:39,280 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:39,280 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:39,281 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:39,281 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:39,281 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:39,281 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:03:39,281 - poker_game - INFO - ==================================================
2025-10-31 19:03:39,382 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "turn",
  "your_cards": [
    "J♣",
    "K♣"
  ],
  "community": [
    "6♣",
    "A♦",
    "3♠",
    "4♠"
  ],
  "your_chips": 5775,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 280,
  "pot": 840,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 671,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (5775)"
  ],
  "history": [
    "Player 4 folded",
    "Player 0 folded",
    "Player 1 called 10",
    "Player 3 folded",
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 raised to 80",
    "Player 3 called 70",
    "Player 4 called 60",
    "Flop dealt: 6♣, A♦, 3♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "Player 4 called 200",
    "Turn dealt: 4♠",
    "Player 3 checked",
    "Player 4 checked"
  ]
}
2025-10-31 19:03:39,392 - poker_game - DEBUG - Create Session: {'id': '744c49f0-cfa5-49aa-9e52-8139007fc9a1', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905019.390692}
2025-10-31 19:03:41,584 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "ターン（Turn）の段階で、コミュニティカード（場に開かれたカード）は6♣, A♦, 3♠, 4♠です。私の手札はJ♣, K♣です。これらを合わせても、まだ強い役はできていません（ペアもフラッシュの可能性も低い）。ポット（Pot、賭け金の総額）は840で、コール（Call、相手のベット額と同じ額を支払うこと）の必要はありません（to_callが0）。対戦相手（Player 3とPlayer 4）もチェック（Check、ベットせずに自分の番をパスすること）しているので、こちらもリスクを冒さずに次のカード（リバー）を見るためにチェックを選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 183, 'promptTokenCount': 820, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 820}], 'totalTokenCount': 1003}, 'invocationId': 'e-3fd215be-c2dd-4b9a-b47d-8a050272922a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'l9mGbwff', 'timestamp': 1761905019.402397}]
2025-10-31 19:03:41,585 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:03:41,585 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "ターン（Turn）の段階で、コミュニティカード（場に開かれたカード）は6♣, A♦, 3♠, 4♠です。私の手札はJ♣, K♣です。これらを合わせても、まだ強い役はできていません（ペアもフラッシュの可能性も低い）。ポット（Pot、賭け金の総額）は840で、コール（Call、相手のベット額と同じ額を支払うこと）の必要はありません（to_callが0）。対戦相手（Player 3とPlayer 4）もチェック（Check、ベットせずに自分の番をパスすること）しているので、こちらもリスクを冒さずに次のカード（リバー）を見るためにチェックを選択します。"
}
```
2025-10-31 19:03:41,585 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:03:41,585 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "ターン（Turn）の段階で、コミュニティカード（場に開かれたカード）は6♣, A♦, 3♠, 4♠です。私の手札はJ♣, K♣です。これらを合わせても、まだ強い役はできていません（ペアもフラッシュの可能性も低い）。ポット（Pot、賭け金の総額）は840で、コール（Call、相手のベット額と同じ額を支払うこと）の必要はありません（to_callが0）。対戦相手（Player 3とPlayer 4）もチェック（Check、ベットせずに自分の番をパスすること）しているので、こちらもリスクを冒さずに次のカード（リバー）を見るためにチェックを選択します。"\n}\n```'
2025-10-31 19:03:41,585 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:03:41,585 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "ターン（Turn）の段階で、コミュニティカード（場に開かれたカード）は6♣, A♦, 3♠, 4♠です。私の手札はJ♣, K♣です。これらを合わせても、まだ強い役はできていません（ペアもフラッシュの可能性も低い）。ポット（Pot、賭け金の総額）は840で、コール（Call、相手のベット額と同じ額を支払うこと）の必要はありません（to_callが0）。対戦相手（Player 3とPlayer 4）もチェック（Check、ベットせずに自分の番をパスすること）しているので、こちらもリスクを冒さずに次のカード（リバー）を見るためにチェックを選択します。"\n}'
2025-10-31 19:03:41,586 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "ターン（Turn）の段階で、コミュニティカード（場に開かれたカード）は6♣, A♦, 3♠, 4♠です。私の手札はJ♣, K♣です。これらを合わせても、まだ強い役はできていません（ペアもフラッシュの可能性も低い）。ポット（Pot、賭け金の総額）は840で、コール（Call、相手のベット額と同じ額を支払うこと）の必要はありません（to_callが0）。対戦相手（Player 3とPlayer 4）もチェック（Check、ベットせずに自分の番をパスすること）しているので、こちらもリスクを冒さずに次のカード（リバー）を見るためにチェックを選択します。"
}
2025-10-31 19:03:41,586 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'ターン（Turn）の段階で、コミュニティカード（場に開かれたカード）は6♣, A♦, 3♠, 4♠です。私の手札はJ♣, K♣です。これらを合わせても、まだ強い役はできていません（ペアもフラッシュの可能性も低い）。ポット（Pot、賭け金の総額）は840で、コール（Call、相手のベット額と同じ額を支払うこと）の必要はありません（to_callが0）。対戦相手（Player 3とPlayer 4）もチェック（Check、ベットせずに自分の番をパスすること）しているので、こちらもリスクを冒さずに次のカード（リバー）を見るためにチェックを選択します。'}
2025-10-31 19:03:41,586 - poker_game - DEBUG - [Agent1] Extracted values - action: 'check', amount: 0
2025-10-31 19:03:41,586 - poker_game - DEBUG - [Agent1] Action 'check' normalized - amount set to 0
2025-10-31 19:03:41,586 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:03:41,586 - poker_game - INFO - [Agent1] Successfully parsed decision: check, 0, ターン（Turn）の段階で、コミュニティカード（場に開かれたカード）は6♣, A♦, 3♠, 4♠です。私の手札はJ♣, K♣です。これらを合わせても、まだ強い役はできていません（ペアもフラッシュの可能性も低い）。ポット（Pot、賭け金の総額）は840で、コール（Call、相手のベット額と同じ額を支払うこと）の必要はありません（to_callが0）。対戦相手（Player 3とPlayer 4）もチェック（Check、ベットせずに自分の番をパスすること）しているので、こちらもリスクを冒さずに次のカード（リバー）を見るためにチェックを選択します。
2025-10-31 19:03:41,587 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'check' with amount 0
2025-10-31 19:03:41,587 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:03:41,587 - poker_game - INFO - Hand #21, Phase: turn
2025-10-31 19:03:41,588 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:03:41,588 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:41,588 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:41,588 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:41,588 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:41,589 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠']
2025-10-31 19:03:41,589 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:41,589 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:41,589 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:41,590 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:41,590 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:41,590 - poker_game - INFO - ==================================================
2025-10-31 19:03:41,590 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 19:03:41,601 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:03:41,601 - poker_game - INFO - Hand #21, Phase: turn
2025-10-31 19:03:41,601 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:03:41,602 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:41,602 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:41,602 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:41,602 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:41,602 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠']
2025-10-31 19:03:41,603 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:41,603 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:41,603 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:41,603 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:41,603 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:41,604 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 19:03:41,604 - poker_game - INFO - ==================================================
2025-10-31 19:03:41,604 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:03:41,604 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:03:41,604 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:03:41,605 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:03:41,605 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:03:41,605 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:03:41,605 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:03:41,605 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:03:41,605 - poker_game - DEBUG - Active player indices: [1, 3, 4]
2025-10-31 19:03:41,605 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:03:41,605 - poker_game - DEBUG - Current player index: 3
2025-10-31 19:03:41,605 - poker_game - DEBUG - First actor index: 3
2025-10-31 19:03:41,606 - poker_game - INFO - Betting complete: Back to first actor 3 (all players have acted)
2025-10-31 19:03:41,606 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:03:41,606 - poker_game - INFO - Hand #21, Phase: turn
2025-10-31 19:03:41,606 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:03:41,606 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:41,606 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:41,607 - poker_game - INFO - Betting round complete: True
2025-10-31 19:03:41,607 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:41,607 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠']
2025-10-31 19:03:41,607 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:41,607 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:41,607 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:41,608 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:41,608 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:41,608 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:03:41,608 - poker_game - INFO - ==================================================
2025-10-31 19:03:41,709 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 19:03:41,709 - poker_game - INFO - Betting round complete: True
2025-10-31 19:03:41,710 - poker_game - INFO - Remaining players: 3
2025-10-31 19:03:41,710 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:03:41,710 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:03:41,710 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 19:03:41,711 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 19:03:41,721 - poker_game - INFO - Starting new betting round
2025-10-31 19:03:41,722 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:03:41,722 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:03:41,722 - poker_game - DEBUG - Active players for new betting round: [1, 3, 4]
2025-10-31 19:03:41,723 - poker_game - DEBUG - Dealer button: 1
2025-10-31 19:03:41,723 - poker_game - INFO - First actor: Player 3 (by phase rule), was 3
2025-10-31 19:03:41,723 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:03:41,724 - poker_game - INFO - Hand #21, Phase: river
2025-10-31 19:03:41,724 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:03:41,725 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:41,725 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:41,725 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:41,726 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:41,726 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠', '4♣']
2025-10-31 19:03:41,727 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:41,727 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:41,727 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:41,728 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:41,729 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:41,729 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 19:03:41,729 - poker_game - INFO - ==================================================
2025-10-31 19:03:41,731 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "river",
  "your_cards": [
    "10♠",
    "Q♣"
  ],
  "community": [
    "6♣",
    "A♦",
    "3♠",
    "4♠",
    "4♣"
  ],
  "your_chips": 1771,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 280,
  "pot": 840,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5775,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 671,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1771)"
  ],
  "history": [
    "Player 1 called 10",
    "Player 3 folded",
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 raised to 80",
    "Player 3 called 70",
    "Player 4 called 60",
    "Flop dealt: 6♣, A♦, 3♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "Player 4 called 200",
    "Turn dealt: 4♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: 4♣"
  ]
}
2025-10-31 19:03:41,746 - poker_game - DEBUG - Create Session: {'id': '695193d8-b87f-4884-b057-3a2744179521', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905021.743319}
2025-10-31 19:03:44,206 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況で、あなたの手札（10♠, Q♣）とコミュニティカード（6♣, A♦, 3♠, 4♠, 4♣）を組み合わせると、ツーペア（4のペアとAのキッカー）ができます。しかし、相手のプレイヤー1がポットを大きくベットしている可能性があり、手札が強いかどうかわかりません。相手がベットしてこなければ、チェック（ベットなしで次のプレイヤーにターンを回すこと）で様子を見るのが最善です。もし相手がベットしてきたら、あなたのハンドは勝てる可能性もありますが、確信が持てないため、コール（相手のベット額と同じ額を支払うこと）するかフォールド（ゲームから降りること）を検討します。今回は相手がチェックしているので、こちらもチェックで様子を見ます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 217, 'promptTokenCount': 829, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 829}], 'totalTokenCount': 1046}, 'invocationId': 'e-e3675e31-4f68-4923-b650-8b9d4f53e8a4', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'CcPOlxUJ', 'timestamp': 1761905021.758099}]
2025-10-31 19:03:44,206 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:03:44,207 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況で、あなたの手札（10♠, Q♣）とコミュニティカード（6♣, A♦, 3♠, 4♠, 4♣）を組み合わせると、ツーペア（4のペアとAのキッカー）ができます。しかし、相手のプレイヤー1がポットを大きくベットしている可能性があり、手札が強いかどうかわかりません。相手がベットしてこなければ、チェック（ベットなしで次のプレイヤーにターンを回すこと）で様子を見るのが最善です。もし相手がベットしてきたら、あなたのハンドは勝てる可能性もありますが、確信が持てないため、コール（相手のベット額と同じ額を支払うこと）するかフォールド（ゲームから降りること）を検討します。今回は相手がチェックしているので、こちらもチェックで様子を見ます。"
}
```
2025-10-31 19:03:44,207 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:03:44,207 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況で、あなたの手札（10♠, Q♣）とコミュニティカード（6♣, A♦, 3♠, 4♠, 4♣）を組み合わせると、ツーペア（4のペアとAのキッカー）ができます。しかし、相手のプレイヤー1がポットを大きくベットしている可能性があり、手札が強いかどうかわかりません。相手がベットしてこなければ、チェック（ベットなしで次のプレイヤーにターンを回すこと）で様子を見るのが最善です。もし相手がベットしてきたら、あなたのハンドは勝てる可能性もありますが、確信が持てないため、コール（相手のベット額と同じ額を支払うこと）するかフォールド（ゲームから降りること）を検討します。今回は相手がチェックしているので、こちらもチェックで様子を見ます。"\n}\n```'
2025-10-31 19:03:44,207 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:03:44,208 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況で、あなたの手札（10♠, Q♣）とコミュニティカード（6♣, A♦, 3♠, 4♠, 4♣）を組み合わせると、ツーペア（4のペアとAのキッカー）ができます。しかし、相手のプレイヤー1がポットを大きくベットしている可能性があり、手札が強いかどうかわかりません。相手がベットしてこなければ、チェック（ベットなしで次のプレイヤーにターンを回すこと）で様子を見るのが最善です。もし相手がベットしてきたら、あなたのハンドは勝てる可能性もありますが、確信が持てないため、コール（相手のベット額と同じ額を支払うこと）するかフォールド（ゲームから降りること）を検討します。今回は相手がチェックしているので、こちらもチェックで様子を見ます。"\n}'
2025-10-31 19:03:44,208 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況で、あなたの手札（10♠, Q♣）とコミュニティカード（6♣, A♦, 3♠, 4♠, 4♣）を組み合わせると、ツーペア（4のペアとAのキッカー）ができます。しかし、相手のプレイヤー1がポットを大きくベットしている可能性があり、手札が強いかどうかわかりません。相手がベットしてこなければ、チェック（ベットなしで次のプレイヤーにターンを回すこと）で様子を見るのが最善です。もし相手がベットしてきたら、あなたのハンドは勝てる可能性もありますが、確信が持てないため、コール（相手のベット額と同じ額を支払うこと）するかフォールド（ゲームから降りること）を検討します。今回は相手がチェックしているので、こちらもチェックで様子を見ます。"
}
2025-10-31 19:03:44,208 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最後のコミュニティカードが配られた後）の状況で、あなたの手札（10♠, Q♣）とコミュニティカード（6♣, A♦, 3♠, 4♠, 4♣）を組み合わせると、ツーペア（4のペアとAのキッカー）ができます。しかし、相手のプレイヤー1がポットを大きくベットしている可能性があり、手札が強いかどうかわかりません。相手がベットしてこなければ、チェック（ベットなしで次のプレイヤーにターンを回すこと）で様子を見るのが最善です。もし相手がベットしてきたら、あなたのハンドは勝てる可能性もありますが、確信が持てないため、コール（相手のベット額と同じ額を支払うこと）するかフォールド（ゲームから降りること）を検討します。今回は相手がチェックしているので、こちらもチェックで様子を見ます。'}
2025-10-31 19:03:44,208 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 19:03:44,208 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 19:03:44,208 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:03:44,209 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, リバー（最後のコミュニティカードが配られた後）の状況で、あなたの手札（10♠, Q♣）とコミュニティカード（6♣, A♦, 3♠, 4♠, 4♣）を組み合わせると、ツーペア（4のペアとAのキッカー）ができます。しかし、相手のプレイヤー1がポットを大きくベットしている可能性があり、手札が強いかどうかわかりません。相手がベットしてこなければ、チェック（ベットなしで次のプレイヤーにターンを回すこと）で様子を見るのが最善です。もし相手がベットしてきたら、あなたのハンドは勝てる可能性もありますが、確信が持てないため、コール（相手のベット額と同じ額を支払うこと）するかフォールド（ゲームから降りること）を検討します。今回は相手がチェックしているので、こちらもチェックで様子を見ます。
2025-10-31 19:03:44,210 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 19:03:44,210 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:03:44,210 - poker_game - INFO - Hand #21, Phase: river
2025-10-31 19:03:44,211 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:03:44,211 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:44,211 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:44,212 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:44,212 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:44,212 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠', '4♣']
2025-10-31 19:03:44,213 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:44,213 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:44,213 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:44,214 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:44,215 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:44,216 - poker_game - INFO - ==================================================
2025-10-31 19:03:44,216 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 19:03:44,229 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:03:44,229 - poker_game - INFO - Hand #21, Phase: river
2025-10-31 19:03:44,230 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:03:44,230 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:44,231 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:44,231 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:44,232 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:44,232 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠', '4♣']
2025-10-31 19:03:44,232 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:44,233 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:44,233 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:44,234 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:44,234 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:44,234 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 19:03:44,235 - poker_game - INFO - ==================================================
2025-10-31 19:03:44,235 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:03:44,236 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:03:44,236 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:03:44,236 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 19:03:44,236 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:03:44,237 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:03:44,237 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:03:44,237 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:03:44,238 - poker_game - DEBUG - Active player indices: [1, 3, 4]
2025-10-31 19:03:44,238 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:03:44,238 - poker_game - DEBUG - Current player index: 4
2025-10-31 19:03:44,238 - poker_game - DEBUG - First actor index: 3
2025-10-31 19:03:44,238 - poker_game - DEBUG - Betting continues: Current player 4 != first actor 3
2025-10-31 19:03:44,239 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:03:44,239 - poker_game - INFO - Hand #21, Phase: river
2025-10-31 19:03:44,239 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:03:44,240 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:44,240 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:44,241 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:44,241 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:44,242 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠', '4♣']
2025-10-31 19:03:44,242 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:44,243 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:44,243 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:44,243 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:44,243 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:44,244 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:03:44,244 - poker_game - INFO - ==================================================
2025-10-31 19:03:44,346 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "river",
  "your_cards": [
    "Q♥",
    "9♥"
  ],
  "community": [
    "6♣",
    "A♦",
    "3♠",
    "4♠",
    "4♣"
  ],
  "your_chips": 671,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 280,
  "pot": 840,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 5775,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (671)"
  ],
  "history": [
    "Player 3 folded",
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 raised to 80",
    "Player 3 called 70",
    "Player 4 called 60",
    "Flop dealt: 6♣, A♦, 3♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "Player 4 called 200",
    "Turn dealt: 4♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: 4♣",
    "Player 3 checked"
  ]
}
2025-10-31 19:03:44,355 - poker_game - DEBUG - Create Session: {'id': 'dd9bb45c-4bae-41ec-8944-7c40f2e8cd47', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761905024.3534405}
2025-10-31 19:03:54,359 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 19:03:54,787 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_mywHK67EJ3A775pbkTSaBP6W', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1135, 'totalTokenCount': 1152}, 'invocationId': 'e-648458dd-d564-4ffb-8875-241fde5e8061', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '2sJTREfv', 'timestamp': 1761905024.3678}, {'content': {'parts': [{'functionResponse': {'id': 'call_mywHK67EJ3A775pbkTSaBP6W', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-648458dd-d564-4ffb-8875-241fde5e8061', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'OF7fJHEw', 'timestamp': 1761905025.385547}, {'content': {'parts': [{'functionCall': {'id': 'call_MyVDJqlEhiJ6K3vEjoujvX0U', 'args': {'game_state': {'your_id': 4, 'phase': 'river', 'your_cards': ['Q♥', '9♥'], 'community': ['6♣', 'A♦', '3♠', '4♠', '4♣'], 'your_chips': 671, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 280, 'pot': 840, 'to_call': 0, 'dealer_button': 1, 'current_turn': 4, 'players': [{'id': 0, 'chips': 943, 'bet': 0, 'status': 'folded'}, {'id': 1, 'chips': 5775, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1771, 'bet': 0, 'status': 'active'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (671)'], 'history': ['Player 3 folded', 'Showdown: Player 1 won 40', 'Player 3 posted small blind 10', 'Player 4 posted big blind 20', 'Player 0 folded', 'Player 1 raised to 80', 'Player 3 called 70', 'Player 4 called 60', 'Flop dealt: 6♣, A♦, 3♠', 'Player 3 checked', 'Player 4 checked', 'Player 1 raised to 200', 'Player 3 called 200', 'Player 4 called 200', 'Turn dealt: 4♠', 'Player 3 checked', 'Player 4 checked', 'Player 1 checked', 'River dealt: 4♣', 'Player 3 checked']}, 'call_amount': 0, 'pot_after_call': 840, 'equity': 0.3}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 338, 'promptTokenCount': 1659, 'totalTokenCount': 1997}, 'invocationId': 'e-648458dd-d564-4ffb-8875-241fde5e8061', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'fuaYMIkw', 'timestamp': 1761905025.390408}, {'content': {'parts': [{'functionResponse': {'id': 'call_MyVDJqlEhiJ6K3vEjoujvX0U', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（252.00(ポットに対して30.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'e-648458dd-d564-4ffb-8875-241fde5e8061', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'v2kP7Si9', 'timestamp': 1761905033.096575}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い（252.00(ポットに対して30.00%）ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 38, 'promptTokenCount': 2048, 'totalTokenCount': 2086}, 'invocationId': 'e-648458dd-d564-4ffb-8875-241fde5e8061', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '1YEpKQhZ', 'timestamp': 1761905033.098725}]
2025-10-31 19:03:54,788 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:03:54,789 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い（252.00(ポットに対して30.00%）ため、チェックします"}
2025-10-31 19:03:54,789 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:03:54,790 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い（252.00(ポットに対して30.00%）ため、チェックします"}'
2025-10-31 19:03:54,790 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:03:54,790 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い（252.00(ポットに対して30.00%）ため、チェックします"}
2025-10-31 19:03:54,790 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（252.00(ポットに対して30.00%）ため、チェックします'}
2025-10-31 19:03:54,791 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 19:03:54,791 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 19:03:54,791 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:03:54,791 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い（252.00(ポットに対して30.00%）ため、チェックします
2025-10-31 19:03:54,793 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 19:03:54,794 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:03:54,795 - poker_game - INFO - Hand #21, Phase: river
2025-10-31 19:03:54,795 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:03:54,796 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:54,796 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:54,796 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:54,796 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:54,797 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠', '4♣']
2025-10-31 19:03:54,797 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:54,798 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:54,798 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:54,799 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:54,800 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:54,801 - poker_game - INFO - ==================================================
2025-10-31 19:03:54,802 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 19:03:54,814 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:03:54,815 - poker_game - INFO - Hand #21, Phase: river
2025-10-31 19:03:54,816 - poker_game - INFO - Current player: 4, Dealer: 1
2025-10-31 19:03:54,816 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:54,817 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:54,817 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:54,817 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:54,818 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠', '4♣']
2025-10-31 19:03:54,818 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:54,819 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:54,819 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:54,819 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:54,820 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:54,820 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 19:03:54,820 - poker_game - INFO - ==================================================
2025-10-31 19:03:54,821 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:03:54,821 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:03:54,822 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:03:54,823 - poker_game - INFO - Advanced from player 4 to player 1 (seat order)
2025-10-31 19:03:54,824 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:03:54,825 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:03:54,825 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:03:54,825 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:03:54,827 - poker_game - DEBUG - Active player indices: [1, 3, 4]
2025-10-31 19:03:54,827 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:03:54,827 - poker_game - DEBUG - Current player index: 1
2025-10-31 19:03:54,828 - poker_game - DEBUG - First actor index: 3
2025-10-31 19:03:54,828 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 3
2025-10-31 19:03:54,828 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:03:54,829 - poker_game - INFO - Hand #21, Phase: river
2025-10-31 19:03:54,829 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:03:54,830 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:54,831 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:54,832 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:54,832 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:54,832 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠', '4♣']
2025-10-31 19:03:54,833 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:54,833 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:54,834 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:54,834 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:54,835 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:54,835 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:03:54,835 - poker_game - INFO - ==================================================
2025-10-31 19:03:54,937 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "river",
  "your_cards": [
    "J♣",
    "K♣"
  ],
  "community": [
    "6♣",
    "A♦",
    "3♠",
    "4♠",
    "4♣"
  ],
  "your_chips": 5775,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 280,
  "pot": 840,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 943,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 671,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (5775)"
  ],
  "history": [
    "Showdown: Player 1 won 40",
    "Player 3 posted small blind 10",
    "Player 4 posted big blind 20",
    "Player 0 folded",
    "Player 1 raised to 80",
    "Player 3 called 70",
    "Player 4 called 60",
    "Flop dealt: 6♣, A♦, 3♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "Player 4 called 200",
    "Turn dealt: 4♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: 4♣",
    "Player 3 checked",
    "Player 4 checked"
  ]
}
2025-10-31 19:03:54,949 - poker_game - DEBUG - Create Session: {'id': 'accec025-dcb3-4911-a73f-0877963aaa27', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905034.9463415}
2025-10-31 19:03:59,865 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、コミュニティカードにペア（4♠と4♣）があり、あなたの手札（J♣, K♣）と合わせてフラッシュ（同じマークのカードが5枚揃うこと）の可能性も、ストレート（数字が連続すること）の可能性もありません。あなたのハンドは、Aハイ（Aが一番強いカード）にしかならず、それは非常に弱いハンドです。相手のハンドも不明ですが、これまでの流れ（チェックが続いている）と、相手のチップ量（プレイヤー3は1771、プレイヤー4は671）を考慮すると、これ以上ベットしてポットを大きくするリスクは取れません。チェックして、相手のハンドを見て、ショーダウン（ハンドを公開して勝者を決めること）に進むのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 203, 'promptTokenCount': 825, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 825}], 'totalTokenCount': 1028}, 'invocationId': 'e-caf2b802-3616-43a4-a59e-ac24e7262230', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'oW96jkxp', 'timestamp': 1761905034.961615}]
2025-10-31 19:03:59,866 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:03:59,866 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ストリート）で、コミュニティカードにペア（4♠と4♣）があり、あなたの手札（J♣, K♣）と合わせてフラッシュ（同じマークのカードが5枚揃うこと）の可能性も、ストレート（数字が連続すること）の可能性もありません。あなたのハンドは、Aハイ（Aが一番強いカード）にしかならず、それは非常に弱いハンドです。相手のハンドも不明ですが、これまでの流れ（チェックが続いている）と、相手のチップ量（プレイヤー3は1771、プレイヤー4は671）を考慮すると、これ以上ベットしてポットを大きくするリスクは取れません。チェックして、相手のハンドを見て、ショーダウン（ハンドを公開して勝者を決めること）に進むのが最善です。"
}
```
2025-10-31 19:03:59,866 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:03:59,867 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、コミュニティカードにペア（4♠と4♣）があり、あなたの手札（J♣, K♣）と合わせてフラッシュ（同じマークのカードが5枚揃うこと）の可能性も、ストレート（数字が連続すること）の可能性もありません。あなたのハンドは、Aハイ（Aが一番強いカード）にしかならず、それは非常に弱いハンドです。相手のハンドも不明ですが、これまでの流れ（チェックが続いている）と、相手のチップ量（プレイヤー3は1771、プレイヤー4は671）を考慮すると、これ以上ベットしてポットを大きくするリスクは取れません。チェックして、相手のハンドを見て、ショーダウン（ハンドを公開して勝者を決めること）に進むのが最善です。"\n}\n```'
2025-10-31 19:03:59,867 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:03:59,867 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ストリート）で、コミュニティカードにペア（4♠と4♣）があり、あなたの手札（J♣, K♣）と合わせてフラッシュ（同じマークのカードが5枚揃うこと）の可能性も、ストレート（数字が連続すること）の可能性もありません。あなたのハンドは、Aハイ（Aが一番強いカード）にしかならず、それは非常に弱いハンドです。相手のハンドも不明ですが、これまでの流れ（チェックが続いている）と、相手のチップ量（プレイヤー3は1771、プレイヤー4は671）を考慮すると、これ以上ベットしてポットを大きくするリスクは取れません。チェックして、相手のハンドを見て、ショーダウン（ハンドを公開して勝者を決めること）に進むのが最善です。"\n}'
2025-10-31 19:03:59,868 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ストリート）で、コミュニティカードにペア（4♠と4♣）があり、あなたの手札（J♣, K♣）と合わせてフラッシュ（同じマークのカードが5枚揃うこと）の可能性も、ストレート（数字が連続すること）の可能性もありません。あなたのハンドは、Aハイ（Aが一番強いカード）にしかならず、それは非常に弱いハンドです。相手のハンドも不明ですが、これまでの流れ（チェックが続いている）と、相手のチップ量（プレイヤー3は1771、プレイヤー4は671）を考慮すると、これ以上ベットしてポットを大きくするリスクは取れません。チェックして、相手のハンドを見て、ショーダウン（ハンドを公開して勝者を決めること）に進むのが最善です。"
}
2025-10-31 19:03:59,868 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最終ストリート）で、コミュニティカードにペア（4♠と4♣）があり、あなたの手札（J♣, K♣）と合わせてフラッシュ（同じマークのカードが5枚揃うこと）の可能性も、ストレート（数字が連続すること）の可能性もありません。あなたのハンドは、Aハイ（Aが一番強いカード）にしかならず、それは非常に弱いハンドです。相手のハンドも不明ですが、これまでの流れ（チェックが続いている）と、相手のチップ量（プレイヤー3は1771、プレイヤー4は671）を考慮すると、これ以上ベットしてポットを大きくするリスクは取れません。チェックして、相手のハンドを見て、ショーダウン（ハンドを公開して勝者を決めること）に進むのが最善です。'}
2025-10-31 19:03:59,868 - poker_game - DEBUG - [Agent1] Extracted values - action: 'check', amount: 0
2025-10-31 19:03:59,868 - poker_game - DEBUG - [Agent1] Action 'check' normalized - amount set to 0
2025-10-31 19:03:59,868 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:03:59,869 - poker_game - INFO - [Agent1] Successfully parsed decision: check, 0, リバー（最終ストリート）で、コミュニティカードにペア（4♠と4♣）があり、あなたの手札（J♣, K♣）と合わせてフラッシュ（同じマークのカードが5枚揃うこと）の可能性も、ストレート（数字が連続すること）の可能性もありません。あなたのハンドは、Aハイ（Aが一番強いカード）にしかならず、それは非常に弱いハンドです。相手のハンドも不明ですが、これまでの流れ（チェックが続いている）と、相手のチップ量（プレイヤー3は1771、プレイヤー4は671）を考慮すると、これ以上ベットしてポットを大きくするリスクは取れません。チェックして、相手のハンドを見て、ショーダウン（ハンドを公開して勝者を決めること）に進むのが最善です。
2025-10-31 19:03:59,870 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'check' with amount 0
2025-10-31 19:03:59,871 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:03:59,871 - poker_game - INFO - Hand #21, Phase: river
2025-10-31 19:03:59,872 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:03:59,872 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:59,872 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:59,873 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:59,874 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:59,875 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠', '4♣']
2025-10-31 19:03:59,875 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:59,877 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:59,878 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:59,878 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:59,880 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:59,880 - poker_game - INFO - ==================================================
2025-10-31 19:03:59,881 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 19:03:59,895 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:03:59,896 - poker_game - INFO - Hand #21, Phase: river
2025-10-31 19:03:59,897 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:03:59,897 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:59,898 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:59,898 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:59,899 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:59,899 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠', '4♣']
2025-10-31 19:03:59,900 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:59,900 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:59,900 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:59,901 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:59,901 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:59,901 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 19:03:59,902 - poker_game - INFO - ==================================================
2025-10-31 19:03:59,902 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:03:59,903 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:03:59,903 - poker_game - DEBUG - Active players: [1, 3, 4]
2025-10-31 19:03:59,903 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:03:59,905 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:03:59,907 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:03:59,908 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:03:59,908 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:03:59,908 - poker_game - DEBUG - Active player indices: [1, 3, 4]
2025-10-31 19:03:59,908 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:03:59,909 - poker_game - DEBUG - Current player index: 3
2025-10-31 19:03:59,909 - poker_game - DEBUG - First actor index: 3
2025-10-31 19:03:59,909 - poker_game - INFO - Betting complete: Back to first actor 3 (all players have acted)
2025-10-31 19:03:59,910 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:03:59,910 - poker_game - INFO - Hand #21, Phase: river
2025-10-31 19:03:59,911 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:03:59,912 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:59,913 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:59,913 - poker_game - INFO - Betting round complete: True
2025-10-31 19:03:59,914 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:59,914 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠', '4♣']
2025-10-31 19:03:59,915 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:59,915 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:59,916 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:59,916 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:59,916 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:59,917 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:03:59,917 - poker_game - INFO - ==================================================
2025-10-31 19:03:54,850 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 19:03:54,851 - poker_game - INFO - Betting round complete: True
2025-10-31 19:03:54,851 - poker_game - INFO - Remaining players: 3
2025-10-31 19:03:54,851 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:03:54,852 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:03:54,852 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 19:03:54,852 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 19:03:54,853 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 19:03:54,853 - poker_game - INFO - Hand #21, Phase: showdown
2025-10-31 19:03:54,854 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:03:54,854 - poker_game - INFO - Pot: 840, Current bet: 0
2025-10-31 19:03:54,856 - poker_game - INFO - Last raiser: None
2025-10-31 19:03:54,856 - poker_game - INFO - Betting round complete: True
2025-10-31 19:03:54,857 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:54,858 - poker_game - INFO - Community cards: ['6♣', 'A♦', '3♠', '4♠', '4♣']
2025-10-31 19:03:54,859 - poker_game - INFO -   P0(Agent0): chips=943, bet=0, status=folded
2025-10-31 19:03:54,860 - poker_game - INFO -   P1(Agent1): chips=5775, bet=0, status=active
2025-10-31 19:03:54,861 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:54,862 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:54,864 - poker_game - INFO -   P4(Agent4): chips=671, bet=0, status=active
2025-10-31 19:03:54,864 - poker_game - INFO - ==================================================
2025-10-31 19:03:54,865 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 19:03:54,865 - poker_game - INFO - Pot: 840, Community cards: ['6♣', 'A♦', '3♠', '4♠', '4♣']
2025-10-31 19:03:54,866 - poker_game - INFO -   Player 1 status=active cards=['J♣', 'K♣']
2025-10-31 19:03:54,867 - poker_game - INFO -   Player 3 status=active cards=['10♠', 'Q♣']
2025-10-31 19:03:54,867 - poker_game - INFO -   Player 4 status=active cards=['Q♥', '9♥']
2025-10-31 19:03:54,872 - poker_game - INFO -   Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=['J♣', 'K♣']
2025-10-31 19:03:54,873 - poker_game - INFO -   Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=['10♠', 'Q♣']
2025-10-31 19:03:54,873 - poker_game - INFO -   Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=['Q♥', '9♥']
2025-10-31 19:03:54,874 - poker_game - INFO - Pot layer 0: amount=840, contributors=[1, 3, 4]
2025-10-31 19:03:54,875 - poker_game - INFO - Showdown total awarded: 840 (game.pot=840)
2025-10-31 19:03:54,875 - poker_game - INFO - Showdown winners (aggregated): [1]
2025-10-31 19:03:54,876 - poker_game - INFO -   Awarded 840 to Player 1 (hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣)
2025-10-31 19:03:54,876 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 19:03:54,970 - poker_game - INFO - === STARTING NEW HAND #22 ===
2025-10-31 19:03:54,971 - poker_game - INFO - Active players for new hand: 4
2025-10-31 19:03:54,972 - poker_game - INFO - Moving dealer button
2025-10-31 19:03:54,972 - poker_game - INFO - Posting blinds
2025-10-31 19:03:55,009 - poker_game - INFO - Dealing hole cards
2025-10-31 19:03:55,010 - poker_game - INFO - Setting first actor for preflop
2025-10-31 19:03:55,022 - poker_game - INFO - Started new hand in database: hand_id=22
2025-10-31 19:03:55,023 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 19:03:55,023 - poker_game - INFO - Hand #22, Phase: preflop
2025-10-31 19:03:55,024 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:03:55,024 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:03:55,025 - poker_game - INFO - Last raiser: 0
2025-10-31 19:03:55,025 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:55,026 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:03:55,028 - poker_game - INFO - Community cards: []
2025-10-31 19:03:55,032 - poker_game - INFO -   P0(Agent0): chips=923, bet=20, status=active
2025-10-31 19:03:55,033 - poker_game - INFO -   P1(Agent1): chips=6615, bet=0, status=active
2025-10-31 19:03:55,034 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:55,035 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:55,036 - poker_game - INFO -   P4(Agent4): chips=661, bet=10, status=active
2025-10-31 19:03:55,036 - poker_game - INFO - ==================================================
2025-10-31 19:03:55,037 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "K♣",
    "10♥"
  ],
  "community": [],
  "your_chips": 6615,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 923,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 661,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (6615)"
  ],
  "history": [
    "Flop dealt: 6♣, A♦, 3♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "Player 4 called 200",
    "Turn dealt: 4♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: 4♣",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣",
    "Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣",
    "Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥",
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20"
  ]
}
2025-10-31 19:03:55,052 - poker_game - DEBUG - Create Session: {'id': '12cb9aa8-3e4a-4f9f-926f-b7a608ad8b14', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905035.0482738}
2025-10-31 19:04:01,475 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "Pre-flopでは、K10は強力なハンドであり、ポットにコールするには十分な価値があります。対戦相手がすでにベットしているため、フォールドするのは早すぎます。レイズするには、相手のハンドについてもっと情報が必要です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 83, 'promptTokenCount': 926, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 926}], 'totalTokenCount': 1009}, 'invocationId': 'e-e9f2a1c1-cef0-40f3-8753-a1ab553d581e', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'X4McCxFK', 'timestamp': 1761905035.066409}]
2025-10-31 19:04:01,475 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:03:56,314 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "Pre-flopでは、K10は強力なハンドであり、ポットにコールするには十分な価値があります。対戦相手がすでにベットしているため、フォールドするのは早すぎます。レイズするには、相手のハンドについてもっと情報が必要です。"
}
```
2025-10-31 19:03:56,314 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:03:56,315 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "Pre-flopでは、K10は強力なハンドであり、ポットにコールするには十分な価値があります。対戦相手がすでにベットしているため、フォールドするのは早すぎます。レイズするには、相手のハンドについてもっと情報が必要です。"\n}\n```'
2025-10-31 19:03:56,315 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:03:56,315 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "Pre-flopでは、K10は強力なハンドであり、ポットにコールするには十分な価値があります。対戦相手がすでにベットしているため、フォールドするのは早すぎます。レイズするには、相手のハンドについてもっと情報が必要です。"\n}'
2025-10-31 19:03:56,317 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "Pre-flopでは、K10は強力なハンドであり、ポットにコールするには十分な価値があります。対戦相手がすでにベットしているため、フォールドするのは早すぎます。レイズするには、相手のハンドについてもっと情報が必要です。"
}
2025-10-31 19:03:56,317 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'Pre-flopでは、K10は強力なハンドであり、ポットにコールするには十分な価値があります。対戦相手がすでにベットしているため、フォールドするのは早すぎます。レイズするには、相手のハンドについてもっと情報が必要です。'}
2025-10-31 19:03:56,317 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 20
2025-10-31 19:03:56,317 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (6615)']
2025-10-31 19:03:56,318 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (20)': 20
2025-10-31 19:03:56,318 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 19:03:56,318 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 20, Pre-flopでは、K10は強力なハンドであり、ポットにコールするには十分な価値があります。対戦相手がすでにベットしているため、フォールドするのは早すぎます。レイズするには、相手のハンドについてもっと情報が必要です。
2025-10-31 19:03:56,319 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 20
2025-10-31 19:03:56,320 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:03:56,320 - poker_game - INFO - Hand #22, Phase: preflop
2025-10-31 19:03:56,322 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:03:56,323 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:03:56,324 - poker_game - INFO - Last raiser: 0
2025-10-31 19:03:56,324 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:56,324 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:03:56,325 - poker_game - INFO - Community cards: []
2025-10-31 19:03:56,326 - poker_game - INFO -   P0(Agent0): chips=923, bet=20, status=active
2025-10-31 19:03:56,326 - poker_game - INFO -   P1(Agent1): chips=6615, bet=0, status=active
2025-10-31 19:03:56,326 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:56,327 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:56,327 - poker_game - INFO -   P4(Agent4): chips=661, bet=10, status=active
2025-10-31 19:03:56,328 - poker_game - INFO - ==================================================
2025-10-31 19:03:56,328 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 20
2025-10-31 19:03:56,347 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:03:56,347 - poker_game - INFO - Hand #22, Phase: preflop
2025-10-31 19:03:56,348 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:03:56,348 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:03:56,349 - poker_game - INFO - Last raiser: 0
2025-10-31 19:03:56,349 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:56,350 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:03:56,350 - poker_game - INFO - Community cards: []
2025-10-31 19:03:56,350 - poker_game - INFO -   P0(Agent0): chips=923, bet=20, status=active
2025-10-31 19:03:56,351 - poker_game - INFO -   P1(Agent1): chips=6595, bet=20, status=active
2025-10-31 19:03:56,351 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:56,351 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:56,351 - poker_game - INFO -   P4(Agent4): chips=661, bet=10, status=active
2025-10-31 19:03:56,352 - poker_game - INFO - Extra: Action: Player 1 called 20
2025-10-31 19:03:56,352 - poker_game - INFO - ==================================================
2025-10-31 19:03:56,352 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:03:56,353 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:03:56,353 - poker_game - DEBUG - Active players: [0, 1, 3, 4]
2025-10-31 19:03:56,353 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:03:56,354 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:03:56,354 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:03:56,354 - poker_game - DEBUG - Active: 4, All-in: 0
2025-10-31 19:03:56,354 - poker_game - DEBUG - Player bets: [20, 20, 0, 10], Current bet: 20, All same: False
2025-10-31 19:03:56,355 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:03:56,355 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:03:56,355 - poker_game - INFO - Hand #22, Phase: preflop
2025-10-31 19:03:56,356 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 19:03:56,356 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:03:56,356 - poker_game - INFO - Last raiser: 0
2025-10-31 19:03:56,357 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:56,357 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:03:56,358 - poker_game - INFO - Community cards: []
2025-10-31 19:03:56,358 - poker_game - INFO -   P0(Agent0): chips=923, bet=20, status=active
2025-10-31 19:03:56,358 - poker_game - INFO -   P1(Agent1): chips=6595, bet=20, status=active
2025-10-31 19:03:56,359 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:56,359 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:56,359 - poker_game - INFO -   P4(Agent4): chips=661, bet=10, status=active
2025-10-31 19:03:56,360 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:03:56,360 - poker_game - INFO - ==================================================
2025-10-31 19:03:56,461 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "9♠",
    "4♠"
  ],
  "community": [],
  "your_chips": 1771,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 50,
  "to_call": 20,
  "dealer_button": 3,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 923,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6595,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 4,
      "chips": 661,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1771)"
  ],
  "history": [
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "Player 4 called 200",
    "Turn dealt: 4♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: 4♣",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣",
    "Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣",
    "Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥",
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20"
  ]
}
2025-10-31 19:03:56,472 - poker_game - DEBUG - Create Session: {'id': 'e3b54197-aaae-461d-8f84-bf8d23c97654', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905036.4691455}
2025-10-31 19:03:58,564 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、私の手札は9♠4♠と弱いです。ポットへのコール額は20ですが、他のプレイヤーがすでに200をベットしている履歴があり、この状況では勝つ可能性が低いと判断しました。さらに、私のチップスタックは他のプレイヤーと比較して中程度であり、リスクを避けるためにフォールドを選択します。プリフロップでの弱いハンドでのコールは、後続のラウンドで不利になる可能性が高いです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 128, 'promptTokenCount': 919, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 919}], 'totalTokenCount': 1047}, 'invocationId': 'e-6e8ae577-059c-42ac-8eb2-fb53ea16effb', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'EcN8h3qA', 'timestamp': 1761905036.482846}]
2025-10-31 19:03:58,564 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:03:58,564 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで、私の手札は9♠4♠と弱いです。ポットへのコール額は20ですが、他のプレイヤーがすでに200をベットしている履歴があり、この状況では勝つ可能性が低いと判断しました。さらに、私のチップスタックは他のプレイヤーと比較して中程度であり、リスクを避けるためにフォールドを選択します。プリフロップでの弱いハンドでのコールは、後続のラウンドで不利になる可能性が高いです。"
}
```
2025-10-31 19:03:58,565 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:03:58,565 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、私の手札は9♠4♠と弱いです。ポットへのコール額は20ですが、他のプレイヤーがすでに200をベットしている履歴があり、この状況では勝つ可能性が低いと判断しました。さらに、私のチップスタックは他のプレイヤーと比較して中程度であり、リスクを避けるためにフォールドを選択します。プリフロップでの弱いハンドでのコールは、後続のラウンドで不利になる可能性が高いです。"\n}\n```'
2025-10-31 19:03:58,566 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:03:58,566 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで、私の手札は9♠4♠と弱いです。ポットへのコール額は20ですが、他のプレイヤーがすでに200をベットしている履歴があり、この状況では勝つ可能性が低いと判断しました。さらに、私のチップスタックは他のプレイヤーと比較して中程度であり、リスクを避けるためにフォールドを選択します。プリフロップでの弱いハンドでのコールは、後続のラウンドで不利になる可能性が高いです。"\n}'
2025-10-31 19:03:58,567 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで、私の手札は9♠4♠と弱いです。ポットへのコール額は20ですが、他のプレイヤーがすでに200をベットしている履歴があり、この状況では勝つ可能性が低いと判断しました。さらに、私のチップスタックは他のプレイヤーと比較して中程度であり、リスクを避けるためにフォールドを選択します。プリフロップでの弱いハンドでのコールは、後続のラウンドで不利になる可能性が高いです。"
}
2025-10-31 19:03:58,567 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップで、私の手札は9♠4♠と弱いです。ポットへのコール額は20ですが、他のプレイヤーがすでに200をベットしている履歴があり、この状況では勝つ可能性が低いと判断しました。さらに、私のチップスタックは他のプレイヤーと比較して中程度であり、リスクを避けるためにフォールドを選択します。プリフロップでの弱いハンドでのコールは、後続のラウンドで不利になる可能性が高いです。'}
2025-10-31 19:03:58,567 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 19:03:58,567 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 19:03:58,568 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:03:58,568 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップで、私の手札は9♠4♠と弱いです。ポットへのコール額は20ですが、他のプレイヤーがすでに200をベットしている履歴があり、この状況では勝つ可能性が低いと判断しました。さらに、私のチップスタックは他のプレイヤーと比較して中程度であり、リスクを避けるためにフォールドを選択します。プリフロップでの弱いハンドでのコールは、後続のラウンドで不利になる可能性が高いです。
2025-10-31 19:03:58,570 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 19:03:58,570 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:03:58,571 - poker_game - INFO - Hand #22, Phase: preflop
2025-10-31 19:03:58,571 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 19:03:58,572 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:03:58,572 - poker_game - INFO - Last raiser: 0
2025-10-31 19:03:58,572 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:58,573 - poker_game - INFO - Active players: 4, All-in: 0, Folded: 0
2025-10-31 19:03:58,573 - poker_game - INFO - Community cards: []
2025-10-31 19:03:58,574 - poker_game - INFO -   P0(Agent0): chips=923, bet=20, status=active
2025-10-31 19:03:58,574 - poker_game - INFO -   P1(Agent1): chips=6595, bet=20, status=active
2025-10-31 19:03:58,575 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:58,575 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:03:58,575 - poker_game - INFO -   P4(Agent4): chips=661, bet=10, status=active
2025-10-31 19:03:58,576 - poker_game - INFO - ==================================================
2025-10-31 19:03:58,576 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 19:03:58,593 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:03:58,594 - poker_game - INFO - Hand #22, Phase: preflop
2025-10-31 19:03:58,594 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 19:03:58,594 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:03:58,595 - poker_game - INFO - Last raiser: 0
2025-10-31 19:03:58,595 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:58,596 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:58,596 - poker_game - INFO - Community cards: []
2025-10-31 19:03:58,597 - poker_game - INFO -   P0(Agent0): chips=923, bet=20, status=active
2025-10-31 19:03:58,597 - poker_game - INFO -   P1(Agent1): chips=6595, bet=20, status=active
2025-10-31 19:03:58,597 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:58,598 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:03:58,598 - poker_game - INFO -   P4(Agent4): chips=661, bet=10, status=active
2025-10-31 19:03:58,598 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 19:03:58,598 - poker_game - INFO - ==================================================
2025-10-31 19:03:58,599 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:03:58,599 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:03:58,599 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 19:03:58,599 - poker_game - INFO - Advanced from player 3 to player 4 (seat order)
2025-10-31 19:03:58,600 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:03:58,600 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:03:58,600 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:03:58,600 - poker_game - DEBUG - Player bets: [20, 20, 10], Current bet: 20, All same: False
2025-10-31 19:03:58,600 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:03:58,600 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:03:58,601 - poker_game - INFO - Hand #22, Phase: preflop
2025-10-31 19:03:58,601 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:03:58,603 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:03:58,604 - poker_game - INFO - Last raiser: 0
2025-10-31 19:03:58,605 - poker_game - INFO - Betting round complete: False
2025-10-31 19:03:58,605 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:03:58,606 - poker_game - INFO - Community cards: []
2025-10-31 19:03:58,606 - poker_game - INFO -   P0(Agent0): chips=923, bet=20, status=active
2025-10-31 19:03:58,606 - poker_game - INFO -   P1(Agent1): chips=6595, bet=20, status=active
2025-10-31 19:03:58,606 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:03:58,607 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:03:58,607 - poker_game - INFO -   P4(Agent4): chips=661, bet=10, status=active
2025-10-31 19:03:58,607 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:03:58,608 - poker_game - INFO - ==================================================
2025-10-31 19:03:58,709 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "preflop",
  "your_cards": [
    "6♣",
    "5♣"
  ],
  "community": [],
  "your_chips": 661,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 50,
  "to_call": 10,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 923,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6595,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (661)"
  ],
  "history": [
    "Player 4 checked",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "Player 4 called 200",
    "Turn dealt: 4♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: 4♣",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣",
    "Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣",
    "Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥",
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded"
  ]
}
2025-10-31 19:03:58,725 - poker_game - DEBUG - Create Session: {'id': 'f56eb2ed-583c-4b37-85b6-9b4ba7008108', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761905038.7226343}
2025-10-31 19:04:08,892 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 19:04:16,812 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_ACOxzyTs1Zt3NUKfft9t0yCL', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1246, 'totalTokenCount': 1263}, 'invocationId': 'e-b6b2851b-4aaf-42c6-b2f4-a634a625608b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'Wo6SqTQh', 'timestamp': 1761905038.736831}, {'content': {'parts': [{'functionResponse': {'id': 'call_ACOxzyTs1Zt3NUKfft9t0yCL', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-b6b2851b-4aaf-42c6-b2f4-a634a625608b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'FsfMR8nu', 'timestamp': 1761905040.158135}, {'content': {'parts': [{'functionCall': {'id': 'call_mEWRKl1RNDJzLn0WljhAtVV5', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1770, 'totalTokenCount': 1790}, 'invocationId': 'e-b6b2851b-4aaf-42c6-b2f4-a634a625608b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'SVc2NCfU', 'timestamp': 1761905040.161167}, {'content': {'parts': [{'functionResponse': {'id': 'call_mEWRKl1RNDJzLn0WljhAtVV5', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-b6b2851b-4aaf-42c6-b2f4-a634a625608b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'rQM88nf5', 'timestamp': 1761905041.590866}, {'content': {'parts': [{'functionCall': {'id': 'call_grMpuJcBYWe2FDkAort0qtMA', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1332, 'totalTokenCount': 1349}, 'invocationId': 'e-b6b2851b-4aaf-42c6-b2f4-a634a625608b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '4o0Rd6N1', 'timestamp': 1761905041.592743}, {'content': {'parts': [{'functionResponse': {'id': 'call_grMpuJcBYWe2FDkAort0qtMA', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-b6b2851b-4aaf-42c6-b2f4-a634a625608b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '2p5wL9ub', 'timestamp': 1761905042.690078}, {'content': {'parts': [{'functionCall': {'id': 'call_qxJRkh3G53x9WR59WCIXjrTq', 'args': {'game_state': {'your_id': 4, 'phase': 'preflop', 'your_cards': ['6♣', '5♣'], 'community': [], 'your_chips': 661, 'your_bet_this_round': 10, 'your_total_bet_this_hand': 10, 'pot': 50, 'to_call': 10, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 923, 'bet': 20, 'status': 'active'}, {'id': 1, 'chips': 6595, 'bet': 20, 'status': 'active'}, {'id': 3, 'chips': 1771, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'call (10)', 'raise (min 40)', 'all-in (661)'], 'history': ['Player 4 checked', 'Player 1 raised to 200', 'Player 3 called 200', 'Player 4 called 200', 'Turn dealt: 4♠', 'Player 3 checked', 'Player 4 checked', 'Player 1 checked', 'River dealt: 4♣', 'Player 3 checked', 'Player 4 checked', 'Player 1 checked', 'Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣', 'Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣', 'Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥', 'Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 called 20', 'Player 3 folded']}, 'call_amount': 10, 'pot_after_call': 60, 'equity': 0.3}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 462, 'promptTokenCount': 1862, 'totalTokenCount': 2324}, 'invocationId': 'e-b6b2851b-4aaf-42c6-b2f4-a634a625608b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'qVnkraOu', 'timestamp': 1761905042.693795}, {'content': {'parts': [{'functionResponse': {'id': 'call_qxJRkh3G53x9WR59WCIXjrTq', 'name': 'action_decision', 'response': {'action': 'call', 'amount': 10, 'reasoning': 'ポットオッズを満たしており（11.00(ポットに対して22.00%）、コールが妥当と判断。コール額: 10'}}}], 'role': 'user'}, 'invocationId': 'e-b6b2851b-4aaf-42c6-b2f4-a634a625608b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'ZDxeFyyr', 'timestamp': 1761905054.351127}, {'content': {'parts': [{'text': '{"action":"call","amount":10,"reasoning":"ポットオッズを満たしており（11.00(ポットに対して22.00%）、コールが妥当と判断。コール額: 10"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 54, 'promptTokenCount': 2391, 'totalTokenCount': 2445}, 'invocationId': 'e-b6b2851b-4aaf-42c6-b2f4-a634a625608b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'KbZgD3m0', 'timestamp': 1761905054.353653}]
2025-10-31 19:04:16,812 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:04:16,812 - poker_game - DEBUG - {"action":"call","amount":10,"reasoning":"ポットオッズを満たしており（11.00(ポットに対して22.00%）、コールが妥当と判断。コール額: 10"}
2025-10-31 19:04:16,813 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:04:16,813 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"call","amount":10,"reasoning":"ポットオッズを満たしており（11.00(ポットに対して22.00%）、コールが妥当と判断。コール額: 10"}'
2025-10-31 19:04:16,813 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:04:16,813 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"call","amount":10,"reasoning":"ポットオッズを満たしており（11.00(ポットに対して22.00%）、コールが妥当と判断。コール額: 10"}
2025-10-31 19:04:16,813 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'call', 'amount': 10, 'reasoning': 'ポットオッズを満たしており（11.00(ポットに対して22.00%）、コールが妥当と判断。コール額: 10'}
2025-10-31 19:04:16,813 - poker_game - DEBUG - [Agent4] Extracted values - action: 'call', amount: 10
2025-10-31 19:04:16,814 - poker_game - DEBUG - [Agent4] Processing call action - available actions: ['fold', 'call (10)', 'raise (min 40)', 'all-in (661)']
2025-10-31 19:04:16,814 - poker_game - DEBUG - [Agent4] Call amount extracted from 'call (10)': 10
2025-10-31 19:04:16,814 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'call', 'amount': 10}
2025-10-31 19:04:16,814 - poker_game - INFO - [Agent4] Successfully parsed decision: call, 10, ポットオッズを満たしており（11.00(ポットに対して22.00%）、コールが妥当と判断。コール額: 10
2025-10-31 19:04:16,815 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'call' with amount 10
2025-10-31 19:04:16,815 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:04:16,815 - poker_game - INFO - Hand #22, Phase: preflop
2025-10-31 19:04:16,815 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:04:16,816 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:04:16,816 - poker_game - INFO - Last raiser: 0
2025-10-31 19:04:16,816 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:16,816 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:16,816 - poker_game - INFO - Community cards: []
2025-10-31 19:04:16,817 - poker_game - INFO -   P0(Agent0): chips=923, bet=20, status=active
2025-10-31 19:04:16,817 - poker_game - INFO -   P1(Agent1): chips=6595, bet=20, status=active
2025-10-31 19:04:16,817 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:16,817 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:16,818 - poker_game - INFO -   P4(Agent4): chips=661, bet=10, status=active
2025-10-31 19:04:16,818 - poker_game - INFO - ==================================================
2025-10-31 19:04:16,818 - poker_game - INFO - ACTION_EXECUTED: Player 4 called 10
2025-10-31 19:04:16,824 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:04:16,825 - poker_game - INFO - Hand #22, Phase: preflop
2025-10-31 19:04:16,825 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:04:16,825 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 19:04:16,825 - poker_game - INFO - Last raiser: 0
2025-10-31 19:04:16,825 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:16,826 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:16,826 - poker_game - INFO - Community cards: []
2025-10-31 19:04:16,826 - poker_game - INFO -   P0(Agent0): chips=923, bet=20, status=active
2025-10-31 19:04:16,827 - poker_game - INFO -   P1(Agent1): chips=6595, bet=20, status=active
2025-10-31 19:04:16,827 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:16,827 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:16,828 - poker_game - INFO -   P4(Agent4): chips=651, bet=20, status=active
2025-10-31 19:04:16,828 - poker_game - INFO - Extra: Action: Player 4 called 10
2025-10-31 19:04:16,829 - poker_game - INFO - ==================================================
2025-10-31 19:04:16,829 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:04:16,829 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:04:16,830 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 19:04:16,830 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 19:04:16,830 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:04:16,830 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:04:16,831 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:04:16,831 - poker_game - DEBUG - Player bets: [20, 20, 20], Current bet: 20, All same: True
2025-10-31 19:04:16,831 - poker_game - DEBUG - Active player indices: [0, 1, 4]
2025-10-31 19:04:16,832 - poker_game - DEBUG - Last raiser index: 0
2025-10-31 19:04:16,832 - poker_game - DEBUG - Current player index: 0
2025-10-31 19:04:16,832 - poker_game - DEBUG - Next after last raiser 0: 1
2025-10-31 19:04:16,832 - poker_game - DEBUG - Betting continues: Current player 0 != next after raiser 1
2025-10-31 19:04:16,832 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:04:16,832 - poker_game - INFO - Hand #22, Phase: preflop
2025-10-31 19:04:16,833 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:04:16,833 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 19:04:16,833 - poker_game - INFO - Last raiser: 0
2025-10-31 19:04:16,834 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:16,834 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:16,834 - poker_game - INFO - Community cards: []
2025-10-31 19:04:16,835 - poker_game - INFO -   P0(Agent0): chips=923, bet=20, status=active
2025-10-31 19:04:16,835 - poker_game - INFO -   P1(Agent1): chips=6595, bet=20, status=active
2025-10-31 19:04:16,835 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:16,836 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:16,836 - poker_game - INFO -   P4(Agent4): chips=651, bet=20, status=active
2025-10-31 19:04:16,836 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:04:16,837 - poker_game - INFO - ==================================================
2025-10-31 19:04:16,938 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "3♣",
    "J♠"
  ],
  "community": [],
  "your_chips": 923,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6595,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 651,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 40)",
    "all-in (923)"
  ],
  "history": [
    "Player 1 raised to 200",
    "Player 3 called 200",
    "Player 4 called 200",
    "Turn dealt: 4♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: 4♣",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣",
    "Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣",
    "Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥",
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 called 10"
  ]
}
2025-10-31 19:04:16,946 - poker_game - DEBUG - Create Session: {'id': '8c06d789-0d92-4ce1-aef0-5878884c8b76', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905056.9437003}
2025-10-31 19:04:18,957 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "プリフロップで、あなたの手札はJと3で、これはそこまで強くありません。しかし、ポットにはすでに60（あなたのビッグブラインド20、プレイヤー1のコール20、プレイヤー4のコール20）が入っており、コールに必要な金額は0です（すでにビッグブラインドとして20をベットしているため）。他のプレイヤーのアクションを見る限り、彼らも強い手を持っていない可能性が高いです。したがって、追加のベットなしでフロップに進むのが合理的です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 135, 'promptTokenCount': 918, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 918}], 'totalTokenCount': 1053}, 'invocationId': 'e-d3665edc-6645-4bb4-99d4-e73cd4cdbb1f', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'SU6BZPUs', 'timestamp': 1761905056.956351}]
2025-10-31 19:04:18,958 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:04:18,958 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "プリフロップで、あなたの手札はJと3で、これはそこまで強くありません。しかし、ポットにはすでに60（あなたのビッグブラインド20、プレイヤー1のコール20、プレイヤー4のコール20）が入っており、コールに必要な金額は0です（すでにビッグブラインドとして20をベットしているため）。他のプレイヤーのアクションを見る限り、彼らも強い手を持っていない可能性が高いです。したがって、追加のベットなしでフロップに進むのが合理的です。"
}
```
2025-10-31 19:04:18,958 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:04:18,958 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "プリフロップで、あなたの手札はJと3で、これはそこまで強くありません。しかし、ポットにはすでに60（あなたのビッグブラインド20、プレイヤー1のコール20、プレイヤー4のコール20）が入っており、コールに必要な金額は0です（すでにビッグブラインドとして20をベットしているため）。他のプレイヤーのアクションを見る限り、彼らも強い手を持っていない可能性が高いです。したがって、追加のベットなしでフロップに進むのが合理的です。"\n}\n```'
2025-10-31 19:04:18,958 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:04:18,959 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "プリフロップで、あなたの手札はJと3で、これはそこまで強くありません。しかし、ポットにはすでに60（あなたのビッグブラインド20、プレイヤー1のコール20、プレイヤー4のコール20）が入っており、コールに必要な金額は0です（すでにビッグブラインドとして20をベットしているため）。他のプレイヤーのアクションを見る限り、彼らも強い手を持っていない可能性が高いです。したがって、追加のベットなしでフロップに進むのが合理的です。"\n}'
2025-10-31 19:04:18,959 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "プリフロップで、あなたの手札はJと3で、これはそこまで強くありません。しかし、ポットにはすでに60（あなたのビッグブラインド20、プレイヤー1のコール20、プレイヤー4のコール20）が入っており、コールに必要な金額は0です（すでにビッグブラインドとして20をベットしているため）。他のプレイヤーのアクションを見る限り、彼らも強い手を持っていない可能性が高いです。したがって、追加のベットなしでフロップに進むのが合理的です。"
}
2025-10-31 19:04:18,959 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'プリフロップで、あなたの手札はJと3で、これはそこまで強くありません。しかし、ポットにはすでに60（あなたのビッグブラインド20、プレイヤー1のコール20、プレイヤー4のコール20）が入っており、コールに必要な金額は0です（すでにビッグブラインドとして20をベットしているため）。他のプレイヤーのアクションを見る限り、彼らも強い手を持っていない可能性が高いです。したがって、追加のベットなしでフロップに進むのが合理的です。'}
2025-10-31 19:04:18,959 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 0
2025-10-31 19:04:18,959 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'check', 'raise (min 40)', 'all-in (923)']
2025-10-31 19:04:18,959 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 19:04:18,959 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 0, プリフロップで、あなたの手札はJと3で、これはそこまで強くありません。しかし、ポットにはすでに60（あなたのビッグブラインド20、プレイヤー1のコール20、プレイヤー4のコール20）が入っており、コールに必要な金額は0です（すでにビッグブラインドとして20をベットしているため）。他のプレイヤーのアクションを見る限り、彼らも強い手を持っていない可能性が高いです。したがって、追加のベットなしでフロップに進むのが合理的です。
2025-10-31 19:04:18,960 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 0
2025-10-31 19:04:18,960 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:04:18,961 - poker_game - INFO - Hand #22, Phase: preflop
2025-10-31 19:04:18,961 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:04:18,961 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 19:04:18,962 - poker_game - INFO - Last raiser: 0
2025-10-31 19:04:18,962 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:18,963 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:18,963 - poker_game - INFO - Community cards: []
2025-10-31 19:04:18,963 - poker_game - INFO -   P0(Agent0): chips=923, bet=20, status=active
2025-10-31 19:04:18,964 - poker_game - INFO -   P1(Agent1): chips=6595, bet=20, status=active
2025-10-31 19:04:18,964 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:18,964 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:18,964 - poker_game - INFO -   P4(Agent4): chips=651, bet=20, status=active
2025-10-31 19:04:18,964 - poker_game - INFO - ==================================================
2025-10-31 19:04:18,965 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 19:04:18,973 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:04:18,974 - poker_game - INFO - Hand #22, Phase: preflop
2025-10-31 19:04:18,974 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:04:18,974 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 19:04:18,974 - poker_game - INFO - Last raiser: 0
2025-10-31 19:04:18,975 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:18,975 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:18,975 - poker_game - INFO - Community cards: []
2025-10-31 19:04:18,975 - poker_game - INFO -   P0(Agent0): chips=923, bet=20, status=active
2025-10-31 19:04:18,976 - poker_game - INFO -   P1(Agent1): chips=6595, bet=20, status=active
2025-10-31 19:04:18,976 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:18,976 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:18,976 - poker_game - INFO -   P4(Agent4): chips=651, bet=20, status=active
2025-10-31 19:04:18,976 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 19:04:18,977 - poker_game - INFO - ==================================================
2025-10-31 19:04:18,977 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:04:18,977 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:04:18,977 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 19:04:18,977 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:04:18,978 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:04:18,978 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:04:18,978 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:04:18,978 - poker_game - DEBUG - Player bets: [20, 20, 20], Current bet: 20, All same: True
2025-10-31 19:04:18,978 - poker_game - DEBUG - Active player indices: [0, 1, 4]
2025-10-31 19:04:18,979 - poker_game - DEBUG - Last raiser index: 0
2025-10-31 19:04:18,979 - poker_game - DEBUG - Current player index: 1
2025-10-31 19:04:18,979 - poker_game - DEBUG - Next after last raiser 0: 1
2025-10-31 19:04:18,979 - poker_game - INFO - Betting complete: Back to player 1 after last raiser 0
2025-10-31 19:04:18,979 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:04:18,979 - poker_game - INFO - Hand #22, Phase: preflop
2025-10-31 19:04:18,980 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:04:18,980 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 19:04:18,980 - poker_game - INFO - Last raiser: 0
2025-10-31 19:04:18,981 - poker_game - INFO - Betting round complete: True
2025-10-31 19:04:18,981 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:18,981 - poker_game - INFO - Community cards: []
2025-10-31 19:04:18,982 - poker_game - INFO -   P0(Agent0): chips=923, bet=20, status=active
2025-10-31 19:04:18,982 - poker_game - INFO -   P1(Agent1): chips=6595, bet=20, status=active
2025-10-31 19:04:18,984 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:18,986 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:18,986 - poker_game - INFO -   P4(Agent4): chips=651, bet=20, status=active
2025-10-31 19:04:18,987 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:04:18,988 - poker_game - INFO - ==================================================
2025-10-31 19:04:19,090 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 19:04:19,091 - poker_game - INFO - Betting round complete: True
2025-10-31 19:04:19,091 - poker_game - INFO - Remaining players: 3
2025-10-31 19:04:19,092 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 19:04:19,092 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:04:19,092 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 19:04:19,093 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 19:04:19,106 - poker_game - INFO - Starting new betting round
2025-10-31 19:04:19,107 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:04:19,107 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:04:19,107 - poker_game - DEBUG - Active players for new betting round: [0, 1, 4]
2025-10-31 19:04:19,108 - poker_game - DEBUG - Dealer button: 3
2025-10-31 19:04:19,108 - poker_game - INFO - First actor: Player 4 (by phase rule), was 1
2025-10-31 19:04:19,108 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:04:19,108 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:04:19,108 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:04:19,109 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 19:04:19,110 - poker_game - INFO - Last raiser: None
2025-10-31 19:04:19,110 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:19,112 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:19,114 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:04:19,116 - poker_game - INFO -   P0(Agent0): chips=923, bet=0, status=active
2025-10-31 19:04:19,117 - poker_game - INFO -   P1(Agent1): chips=6595, bet=0, status=active
2025-10-31 19:04:19,118 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:19,118 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:19,118 - poker_game - INFO -   P4(Agent4): chips=651, bet=0, status=active
2025-10-31 19:04:19,119 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 19:04:19,119 - poker_game - INFO - ==================================================
2025-10-31 19:04:19,120 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "flop",
  "your_cards": [
    "6♣",
    "5♣"
  ],
  "community": [
    "9♥",
    "Q♠",
    "Q♥"
  ],
  "your_chips": 651,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 923,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6595,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (651)"
  ],
  "history": [
    "Player 4 called 200",
    "Turn dealt: 4♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: 4♣",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣",
    "Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣",
    "Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥",
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 9♥, Q♠, Q♥"
  ]
}
2025-10-31 19:04:19,134 - poker_game - DEBUG - Create Session: {'id': '50c572dd-50e6-418b-bf4d-28d1e41e4d9d', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761905059.1316018}
2025-10-31 19:04:29,281 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 19:04:39,313 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 19:04:44,801 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_r0CzlMGLif5Qref6QNgDbDUC', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1268, 'totalTokenCount': 1285}, 'invocationId': 'e-6137b55f-ca42-41f8-8ccf-8f3e27565a2b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'do0sFq7Q', 'timestamp': 1761905059.148378}, {'content': {'parts': [{'functionResponse': {'id': 'call_r0CzlMGLif5Qref6QNgDbDUC', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-6137b55f-ca42-41f8-8ccf-8f3e27565a2b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'QOFY3sfb', 'timestamp': 1761905060.186922}, {'content': {'parts': [{'functionCall': {'id': 'call_TMtVJaUwYEA5GTPnw4VqsiOJ', 'args': {'game_state': {'your_id': 4, 'phase': 'flop', 'your_cards': ['6♣', '5♣'], 'community': ['9♥', 'Q♠', 'Q♥'], 'your_chips': 651, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 20, 'pot': 60, 'to_call': 0, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 923, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 6595, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1771, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (651)'], 'history': ['Player 4 called 200', 'Turn dealt: 4♠', 'Player 3 checked', 'Player 4 checked', 'Player 1 checked', 'River dealt: 4♣', 'Player 3 checked', 'Player 4 checked', 'Player 1 checked', 'Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣', 'Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣', 'Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥', 'Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 called 20', 'Player 3 folded', 'Player 4 called 10', 'Player 0 checked', 'Flop dealt: 9♥, Q♠, Q♥']}, 'call_amount': 0, 'pot_after_call': 60, 'equity': 0.25}, 'name': 'action_decision'}}, {'functionCall': {'id': 'call_pG4odSQeXbGtTLQsLMAgIzX0', 'args': {'game_state': {'your_id': 4, 'phase': 'flop', 'your_cards': ['6♣', '5♣'], 'community': ['9♥', 'Q♠', 'Q♥'], 'your_chips': 651, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 20, 'pot': 60, 'to_call': 0, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 923, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 6595, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1771, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (651)'], 'history': ['Player 4 called 200', 'Turn dealt: 4♠', 'Player 3 checked', 'Player 4 checked', 'Player 1 checked', 'River dealt: 4♣', 'Player 3 checked', 'Player 4 checked', 'Player 1 checked', 'Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣', 'Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣', 'Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥', 'Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 called 20', 'Player 3 folded', 'Player 4 called 10', 'Player 0 checked', 'Flop dealt: 9♥, Q♠, Q♥']}, 'call_amount': 0, 'pot_after_call': 60, 'equity': 0.25}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 966, 'promptTokenCount': 1792, 'totalTokenCount': 2758}, 'invocationId': 'e-6137b55f-ca42-41f8-8ccf-8f3e27565a2b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '0sq5zGpl', 'timestamp': 1761905060.188435}, {'content': {'parts': [{'functionResponse': {'id': 'call_TMtVJaUwYEA5GTPnw4VqsiOJ', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（15.00(ポットに対して25.00%）ため、チェックします'}}}, {'functionResponse': {'id': 'call_pG4odSQeXbGtTLQsLMAgIzX0', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（15.00(ポットに対して25.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'jCNNlcla', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'YKJYZmjH', 'timestamp': 1761905082.945031}, {'content': {'parts': [{'text': '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "期待値が低い(15.00(ポットに対し25.00%)ため、チェックします"\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 47, 'promptTokenCount': 2984, 'totalTokenCount': 3031}, 'invocationId': 'e-6137b55f-ca42-41f8-8ccf-8f3e27565a2b', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Uhdu94UY', 'timestamp': 1761905082.947902}]
2025-10-31 19:04:44,802 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:04:44,802 - poker_game - DEBUG - {
  "action": "check",
  "amount": 0,
  "reasoning": "期待値が低い(15.00(ポットに対し25.00%)ため、チェックします"
}
2025-10-31 19:04:44,802 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:04:44,802 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "期待値が低い(15.00(ポットに対し25.00%)ため、チェックします"\n}'
2025-10-31 19:04:44,803 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:04:44,803 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "期待値が低い(15.00(ポットに対し25.00%)ため、チェックします"
}
2025-10-31 19:04:44,803 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い(15.00(ポットに対し25.00%)ため、チェックします'}
2025-10-31 19:04:44,803 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 19:04:44,803 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 19:04:44,803 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:04:44,803 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い(15.00(ポットに対し25.00%)ため、チェックします
2025-10-31 19:04:44,804 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 19:04:44,804 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:04:44,804 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:04:44,804 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:04:44,804 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 19:04:44,804 - poker_game - INFO - Last raiser: None
2025-10-31 19:04:44,804 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:44,804 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:44,805 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:04:44,805 - poker_game - INFO -   P0(Agent0): chips=923, bet=0, status=active
2025-10-31 19:04:44,805 - poker_game - INFO -   P1(Agent1): chips=6595, bet=0, status=active
2025-10-31 19:04:44,805 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:44,805 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:44,805 - poker_game - INFO -   P4(Agent4): chips=651, bet=0, status=active
2025-10-31 19:04:44,805 - poker_game - INFO - ==================================================
2025-10-31 19:04:44,805 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 19:04:44,826 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:04:44,826 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:04:44,826 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:04:44,827 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 19:04:44,827 - poker_game - INFO - Last raiser: None
2025-10-31 19:04:44,827 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:44,827 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:44,827 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:04:44,828 - poker_game - INFO -   P0(Agent0): chips=923, bet=0, status=active
2025-10-31 19:04:44,828 - poker_game - INFO -   P1(Agent1): chips=6595, bet=0, status=active
2025-10-31 19:04:44,828 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:44,828 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:44,829 - poker_game - INFO -   P4(Agent4): chips=651, bet=0, status=active
2025-10-31 19:04:44,829 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 19:04:44,829 - poker_game - INFO - ==================================================
2025-10-31 19:04:44,829 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:04:44,830 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:04:44,830 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 19:04:44,830 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 19:04:44,830 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:04:44,830 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:04:44,830 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:04:44,830 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:04:44,830 - poker_game - DEBUG - Active player indices: [0, 1, 4]
2025-10-31 19:04:44,830 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:04:44,831 - poker_game - DEBUG - Current player index: 0
2025-10-31 19:04:44,831 - poker_game - DEBUG - First actor index: 4
2025-10-31 19:04:44,831 - poker_game - DEBUG - Betting continues: Current player 0 != first actor 4
2025-10-31 19:04:44,831 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:04:44,831 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:04:44,831 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:04:44,831 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 19:04:44,831 - poker_game - INFO - Last raiser: None
2025-10-31 19:04:44,832 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:44,832 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:44,832 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:04:44,832 - poker_game - INFO -   P0(Agent0): chips=923, bet=0, status=active
2025-10-31 19:04:44,832 - poker_game - INFO -   P1(Agent1): chips=6595, bet=0, status=active
2025-10-31 19:04:44,833 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:44,833 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:44,833 - poker_game - INFO -   P4(Agent4): chips=651, bet=0, status=active
2025-10-31 19:04:44,833 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:04:44,833 - poker_game - INFO - ==================================================
2025-10-31 19:04:44,934 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "flop",
  "your_cards": [
    "3♣",
    "J♠"
  ],
  "community": [
    "9♥",
    "Q♠",
    "Q♥"
  ],
  "your_chips": 923,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6595,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 651,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (923)"
  ],
  "history": [
    "Turn dealt: 4♠",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: 4♣",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣",
    "Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣",
    "Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥",
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 9♥, Q♠, Q♥",
    "Player 4 checked"
  ]
}
2025-10-31 19:04:44,943 - poker_game - DEBUG - Create Session: {'id': 'a92a9f12-739a-471c-9050-e05e904dd546', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905084.9404604}
2025-10-31 19:04:47,317 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（ボードに3枚のカードが開かれる段階）では、あなたはQのペア（コミュニティカードの9♥, Q♠, Q♥）により、Qのワンペアができています。これは良いハンドですが、相手がより強いペア（例：キングスのペア）を持っている可能性もあります。現在のポットサイズ（60）と、コールに必要な額（0、なぜならあなたは既にビッグブラインドで、誰もレイズしていないため）を考慮すると、リスクを取らずに次のカード（ターン）を見るのが最善です。相手のベットがないため、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 166, 'promptTokenCount': 931, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 931}], 'totalTokenCount': 1097}, 'invocationId': 'e-19e3c830-84b2-4a16-896d-b28eb226afb9', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'drHPh2yY', 'timestamp': 1761905084.956361}]
2025-10-31 19:04:47,318 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:04:47,318 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（ボードに3枚のカードが開かれる段階）では、あなたはQのペア（コミュニティカードの9♥, Q♠, Q♥）により、Qのワンペアができています。これは良いハンドですが、相手がより強いペア（例：キングスのペア）を持っている可能性もあります。現在のポットサイズ（60）と、コールに必要な額（0、なぜならあなたは既にビッグブラインドで、誰もレイズしていないため）を考慮すると、リスクを取らずに次のカード（ターン）を見るのが最善です。相手のベットがないため、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択します。"
}
```
2025-10-31 19:04:47,318 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:04:47,318 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（ボードに3枚のカードが開かれる段階）では、あなたはQのペア（コミュニティカードの9♥, Q♠, Q♥）により、Qのワンペアができています。これは良いハンドですが、相手がより強いペア（例：キングスのペア）を持っている可能性もあります。現在のポットサイズ（60）と、コールに必要な額（0、なぜならあなたは既にビッグブラインドで、誰もレイズしていないため）を考慮すると、リスクを取らずに次のカード（ターン）を見るのが最善です。相手のベットがないため、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択します。"\n}\n```'
2025-10-31 19:04:47,319 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:04:47,319 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（ボードに3枚のカードが開かれる段階）では、あなたはQのペア（コミュニティカードの9♥, Q♠, Q♥）により、Qのワンペアができています。これは良いハンドですが、相手がより強いペア（例：キングスのペア）を持っている可能性もあります。現在のポットサイズ（60）と、コールに必要な額（0、なぜならあなたは既にビッグブラインドで、誰もレイズしていないため）を考慮すると、リスクを取らずに次のカード（ターン）を見るのが最善です。相手のベットがないため、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択します。"\n}'
2025-10-31 19:04:47,319 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（ボードに3枚のカードが開かれる段階）では、あなたはQのペア（コミュニティカードの9♥, Q♠, Q♥）により、Qのワンペアができています。これは良いハンドですが、相手がより強いペア（例：キングスのペア）を持っている可能性もあります。現在のポットサイズ（60）と、コールに必要な額（0、なぜならあなたは既にビッグブラインドで、誰もレイズしていないため）を考慮すると、リスクを取らずに次のカード（ターン）を見るのが最善です。相手のベットがないため、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択します。"
}
2025-10-31 19:04:47,319 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'フロップ（ボードに3枚のカードが開かれる段階）では、あなたはQのペア（コミュニティカードの9♥, Q♠, Q♥）により、Qのワンペアができています。これは良いハンドですが、相手がより強いペア（例：キングスのペア）を持っている可能性もあります。現在のポットサイズ（60）と、コールに必要な額（0、なぜならあなたは既にビッグブラインドで、誰もレイズしていないため）を考慮すると、リスクを取らずに次のカード（ターン）を見るのが最善です。相手のベットがないため、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択します。'}
2025-10-31 19:04:47,319 - poker_game - DEBUG - [Agent0] Extracted values - action: 'check', amount: 0
2025-10-31 19:04:47,319 - poker_game - DEBUG - [Agent0] Action 'check' normalized - amount set to 0
2025-10-31 19:04:47,319 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:04:47,319 - poker_game - INFO - [Agent0] Successfully parsed decision: check, 0, フロップ（ボードに3枚のカードが開かれる段階）では、あなたはQのペア（コミュニティカードの9♥, Q♠, Q♥）により、Qのワンペアができています。これは良いハンドですが、相手がより強いペア（例：キングスのペア）を持っている可能性もあります。現在のポットサイズ（60）と、コールに必要な額（0、なぜならあなたは既にビッグブラインドで、誰もレイズしていないため）を考慮すると、リスクを取らずに次のカード（ターン）を見るのが最善です。相手のベットがないため、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択します。
2025-10-31 19:04:47,320 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'check' with amount 0
2025-10-31 19:04:47,320 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:04:47,320 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:04:47,321 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:04:47,321 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 19:04:47,321 - poker_game - INFO - Last raiser: None
2025-10-31 19:04:47,321 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:47,321 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:47,322 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:04:47,322 - poker_game - INFO -   P0(Agent0): chips=923, bet=0, status=active
2025-10-31 19:04:47,322 - poker_game - INFO -   P1(Agent1): chips=6595, bet=0, status=active
2025-10-31 19:04:47,322 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:47,322 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:47,323 - poker_game - INFO -   P4(Agent4): chips=651, bet=0, status=active
2025-10-31 19:04:47,323 - poker_game - INFO - ==================================================
2025-10-31 19:04:47,323 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 19:04:47,330 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:04:47,330 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:04:47,331 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:04:47,331 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 19:04:47,332 - poker_game - INFO - Last raiser: None
2025-10-31 19:04:47,332 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:47,333 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:47,333 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:04:47,333 - poker_game - INFO -   P0(Agent0): chips=923, bet=0, status=active
2025-10-31 19:04:47,334 - poker_game - INFO -   P1(Agent1): chips=6595, bet=0, status=active
2025-10-31 19:04:47,334 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:47,335 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:47,335 - poker_game - INFO -   P4(Agent4): chips=651, bet=0, status=active
2025-10-31 19:04:47,335 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 19:04:47,336 - poker_game - INFO - ==================================================
2025-10-31 19:04:47,336 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:04:47,337 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:04:47,337 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 19:04:47,337 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:04:47,338 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:04:47,338 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:04:47,338 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:04:47,339 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:04:47,339 - poker_game - DEBUG - Active player indices: [0, 1, 4]
2025-10-31 19:04:47,339 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:04:47,339 - poker_game - DEBUG - Current player index: 1
2025-10-31 19:04:47,339 - poker_game - DEBUG - First actor index: 4
2025-10-31 19:04:47,339 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 4
2025-10-31 19:04:47,339 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:04:47,340 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:04:47,340 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:04:47,341 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 19:04:47,341 - poker_game - INFO - Last raiser: None
2025-10-31 19:04:47,341 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:47,342 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:47,342 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:04:47,343 - poker_game - INFO -   P0(Agent0): chips=923, bet=0, status=active
2025-10-31 19:04:47,343 - poker_game - INFO -   P1(Agent1): chips=6595, bet=0, status=active
2025-10-31 19:04:47,344 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:47,344 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:47,344 - poker_game - INFO -   P4(Agent4): chips=651, bet=0, status=active
2025-10-31 19:04:47,345 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:04:47,345 - poker_game - INFO - ==================================================
2025-10-31 19:04:47,447 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "flop",
  "your_cards": [
    "K♣",
    "10♥"
  ],
  "community": [
    "9♥",
    "Q♠",
    "Q♥"
  ],
  "your_chips": 6595,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 923,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 651,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (6595)"
  ],
  "history": [
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: 4♣",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣",
    "Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣",
    "Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥",
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 9♥, Q♠, Q♥",
    "Player 4 checked",
    "Player 0 checked"
  ]
}
2025-10-31 19:04:47,457 - poker_game - DEBUG - Create Session: {'id': '7a669435-e2bc-4eab-9960-749d0e37b5f5', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905087.455147}
2025-10-31 19:04:49,409 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 40,\n  "reasoning": "フロップ（Flop）でコミュニティカード（Community Cards）にQが2枚出ているため、ツーペア（Two Pair）やスリーカード（Three of a Kind）ができている可能性があります。私の手札（Hole Cards）はKと10なので、現状ではQに勝てません。しかし、相手のチップが少なく（Player 4は651、Player 0は923）、ポットもそれほど大きくないため、様子を見るために小さくレイズ（Raise）して、相手の出方を見ることにします。これは、相手がより強い役を持っているかどうかを探るための戦略です。ここでコール（Call）をしてしまうと、相手に有利な状況を与えてしまう可能性があります。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 184, 'promptTokenCount': 931, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 931}], 'totalTokenCount': 1115}, 'invocationId': 'e-48466875-f2f1-4824-843e-87940b85ffb9', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'cl88beuE', 'timestamp': 1761905087.467085}]
2025-10-31 19:04:49,409 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:04:49,409 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 40,
  "reasoning": "フロップ（Flop）でコミュニティカード（Community Cards）にQが2枚出ているため、ツーペア（Two Pair）やスリーカード（Three of a Kind）ができている可能性があります。私の手札（Hole Cards）はKと10なので、現状ではQに勝てません。しかし、相手のチップが少なく（Player 4は651、Player 0は923）、ポットもそれほど大きくないため、様子を見るために小さくレイズ（Raise）して、相手の出方を見ることにします。これは、相手がより強い役を持っているかどうかを探るための戦略です。ここでコール（Call）をしてしまうと、相手に有利な状況を与えてしまう可能性があります。"
}
```
2025-10-31 19:04:49,410 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:04:49,410 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 40,\n  "reasoning": "フロップ（Flop）でコミュニティカード（Community Cards）にQが2枚出ているため、ツーペア（Two Pair）やスリーカード（Three of a Kind）ができている可能性があります。私の手札（Hole Cards）はKと10なので、現状ではQに勝てません。しかし、相手のチップが少なく（Player 4は651、Player 0は923）、ポットもそれほど大きくないため、様子を見るために小さくレイズ（Raise）して、相手の出方を見ることにします。これは、相手がより強い役を持っているかどうかを探るための戦略です。ここでコール（Call）をしてしまうと、相手に有利な状況を与えてしまう可能性があります。"\n}\n```'
2025-10-31 19:04:49,410 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:04:49,410 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 40,\n  "reasoning": "フロップ（Flop）でコミュニティカード（Community Cards）にQが2枚出ているため、ツーペア（Two Pair）やスリーカード（Three of a Kind）ができている可能性があります。私の手札（Hole Cards）はKと10なので、現状ではQに勝てません。しかし、相手のチップが少なく（Player 4は651、Player 0は923）、ポットもそれほど大きくないため、様子を見るために小さくレイズ（Raise）して、相手の出方を見ることにします。これは、相手がより強い役を持っているかどうかを探るための戦略です。ここでコール（Call）をしてしまうと、相手に有利な状況を与えてしまう可能性があります。"\n}'
2025-10-31 19:04:49,410 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "raise",
  "amount": 40,
  "reasoning": "フロップ（Flop）でコミュニティカード（Community Cards）にQが2枚出ているため、ツーペア（Two Pair）やスリーカード（Three of a Kind）ができている可能性があります。私の手札（Hole Cards）はKと10なので、現状ではQに勝てません。しかし、相手のチップが少なく（Player 4は651、Player 0は923）、ポットもそれほど大きくないため、様子を見るために小さくレイズ（Raise）して、相手の出方を見ることにします。これは、相手がより強い役を持っているかどうかを探るための戦略です。ここでコール（Call）をしてしまうと、相手に有利な状況を与えてしまう可能性があります。"
}
2025-10-31 19:04:49,410 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'raise', 'amount': 40, 'reasoning': 'フロップ（Flop）でコミュニティカード（Community Cards）にQが2枚出ているため、ツーペア（Two Pair）やスリーカード（Three of a Kind）ができている可能性があります。私の手札（Hole Cards）はKと10なので、現状ではQに勝てません。しかし、相手のチップが少なく（Player 4は651、Player 0は923）、ポットもそれほど大きくないため、様子を見るために小さくレイズ（Raise）して、相手の出方を見ることにします。これは、相手がより強い役を持っているかどうかを探るための戦略です。ここでコール（Call）をしてしまうと、相手に有利な状況を与えてしまう可能性があります。'}
2025-10-31 19:04:49,410 - poker_game - DEBUG - [Agent1] Extracted values - action: 'raise', amount: 40
2025-10-31 19:04:49,410 - poker_game - DEBUG - [Agent1] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (6595)']
2025-10-31 19:04:49,410 - poker_game - DEBUG - [Agent1] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 19:04:49,410 - poker_game - DEBUG - [Agent1] Raise amount 40 is valid (min: 20)
2025-10-31 19:04:49,410 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'raise', 'amount': 40}
2025-10-31 19:04:49,411 - poker_game - INFO - [Agent1] Successfully parsed decision: raise, 40, フロップ（Flop）でコミュニティカード（Community Cards）にQが2枚出ているため、ツーペア（Two Pair）やスリーカード（Three of a Kind）ができている可能性があります。私の手札（Hole Cards）はKと10なので、現状ではQに勝てません。しかし、相手のチップが少なく（Player 4は651、Player 0は923）、ポットもそれほど大きくないため、様子を見るために小さくレイズ（Raise）して、相手の出方を見ることにします。これは、相手がより強い役を持っているかどうかを探るための戦略です。ここでコール（Call）をしてしまうと、相手に有利な状況を与えてしまう可能性があります。
2025-10-31 19:04:49,411 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'raise' with amount 40
2025-10-31 19:04:49,411 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:04:49,411 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:04:49,411 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:04:49,412 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 19:04:49,412 - poker_game - INFO - Last raiser: None
2025-10-31 19:04:49,412 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:49,412 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:49,412 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:04:49,412 - poker_game - INFO -   P0(Agent0): chips=923, bet=0, status=active
2025-10-31 19:04:49,412 - poker_game - INFO -   P1(Agent1): chips=6595, bet=0, status=active
2025-10-31 19:04:49,412 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:49,412 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:49,412 - poker_game - INFO -   P4(Agent4): chips=651, bet=0, status=active
2025-10-31 19:04:49,413 - poker_game - INFO - ==================================================
2025-10-31 19:04:49,413 - poker_game - INFO - ACTION_EXECUTED: Player 1 raised to 40
2025-10-31 19:04:49,430 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:04:49,430 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:04:49,430 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:04:49,430 - poker_game - INFO - Pot: 100, Current bet: 40
2025-10-31 19:04:49,431 - poker_game - INFO - Last raiser: 1
2025-10-31 19:04:49,431 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:49,431 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:49,431 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:04:49,431 - poker_game - INFO -   P0(Agent0): chips=923, bet=0, status=active
2025-10-31 19:04:49,432 - poker_game - INFO -   P1(Agent1): chips=6555, bet=40, status=active
2025-10-31 19:04:49,432 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:49,432 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:49,432 - poker_game - INFO -   P4(Agent4): chips=651, bet=0, status=active
2025-10-31 19:04:49,432 - poker_game - INFO - Extra: Action: Player 1 raised to 40
2025-10-31 19:04:49,432 - poker_game - INFO - ==================================================
2025-10-31 19:04:49,432 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:04:49,433 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:04:49,433 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 19:04:49,433 - poker_game - INFO - Advanced from player 1 to player 4 (seat order)
2025-10-31 19:04:49,433 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:04:49,433 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:04:49,433 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:04:49,433 - poker_game - DEBUG - Player bets: [0, 40, 0], Current bet: 40, All same: False
2025-10-31 19:04:49,433 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:04:49,434 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:04:49,434 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:04:49,434 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:04:49,434 - poker_game - INFO - Pot: 100, Current bet: 40
2025-10-31 19:04:49,435 - poker_game - INFO - Last raiser: 1
2025-10-31 19:04:49,435 - poker_game - INFO - Betting round complete: False
2025-10-31 19:04:49,435 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:04:49,435 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:04:49,435 - poker_game - INFO -   P0(Agent0): chips=923, bet=0, status=active
2025-10-31 19:04:49,436 - poker_game - INFO -   P1(Agent1): chips=6555, bet=40, status=active
2025-10-31 19:04:49,436 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:04:49,436 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:04:49,436 - poker_game - INFO -   P4(Agent4): chips=651, bet=0, status=active
2025-10-31 19:04:49,436 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:04:49,437 - poker_game - INFO - ==================================================
2025-10-31 19:04:49,538 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "flop",
  "your_cards": [
    "6♣",
    "5♣"
  ],
  "community": [
    "9♥",
    "Q♠",
    "Q♥"
  ],
  "your_chips": 651,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 100,
  "to_call": 40,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 923,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6555,
      "bet": 40,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (40)",
    "raise (min 60)",
    "all-in (651)"
  ],
  "history": [
    "Player 4 checked",
    "Player 1 checked",
    "River dealt: 4♣",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣",
    "Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣",
    "Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥",
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 9♥, Q♠, Q♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 raised to 40"
  ]
}
2025-10-31 19:04:49,549 - poker_game - DEBUG - Create Session: {'id': '630cc079-7a21-4e2e-b7e5-8dfaa871b2e6', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761905089.5466669}
2025-10-31 19:04:59,725 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 19:05:06,999 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_UpRvh2V1GqUMY0PKzcOGvXig', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1268, 'totalTokenCount': 1285}, 'invocationId': 'e-ef445ce2-e60e-4904-9e74-182fc18e6fcf', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'SInMu2JH', 'timestamp': 1761905089.558154}, {'content': {'parts': [{'functionResponse': {'id': 'call_UpRvh2V1GqUMY0PKzcOGvXig', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-ef445ce2-e60e-4904-9e74-182fc18e6fcf', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'FZEiuydc', 'timestamp': 1761905090.741892}, {'content': {'parts': [{'functionCall': {'id': 'call_kcspDOslUdfLek4rXrz8ou6m', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1792, 'totalTokenCount': 1812}, 'invocationId': 'e-ef445ce2-e60e-4904-9e74-182fc18e6fcf', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'rlKOhiYd', 'timestamp': 1761905090.744322}, {'content': {'parts': [{'functionResponse': {'id': 'call_kcspDOslUdfLek4rXrz8ou6m', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-ef445ce2-e60e-4904-9e74-182fc18e6fcf', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'oNiwL7Sr', 'timestamp': 1761905094.502712}, {'content': {'parts': [{'functionCall': {'id': 'call_1yNLyY3M9gtYVutpyJn4yKWx', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1354, 'totalTokenCount': 1371}, 'invocationId': 'e-ef445ce2-e60e-4904-9e74-182fc18e6fcf', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '5nv51UvW', 'timestamp': 1761905094.505545}, {'content': {'parts': [{'functionResponse': {'id': 'call_1yNLyY3M9gtYVutpyJn4yKWx', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-ef445ce2-e60e-4904-9e74-182fc18e6fcf', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'GMTO7M3i', 'timestamp': 1761905090.556666}, {'content': {'parts': [{'functionCall': {'id': 'call_nuKgrbq5RNXMKIaUMGSKgInm', 'args': {'game_state': {'your_id': 4, 'phase': 'flop', 'your_cards': ['6♣', '5♣'], 'community': ['9♥', 'Q♠', 'Q♥'], 'your_chips': 651, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 20, 'pot': 100, 'to_call': 40, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 923, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 6555, 'bet': 40, 'status': 'active'}, {'id': 3, 'chips': 1771, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'call (40)', 'raise (min 60)', 'all-in (651)'], 'history': ['Player 4 checked', 'Player 1 checked', 'River dealt: 4♣', 'Player 3 checked', 'Player 4 checked', 'Player 1 checked', 'Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣', 'Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣', 'Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥', 'Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 called 20', 'Player 3 folded', 'Player 4 called 10', 'Player 0 checked', 'Flop dealt: 9♥, Q♠, Q♥', 'Player 4 checked', 'Player 0 checked', 'Player 1 raised to 40']}, 'call_amount': 40, 'pot_after_call': 140, 'equity': 0.3}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 476, 'promptTokenCount': 1884, 'totalTokenCount': 2360}, 'invocationId': 'e-ef445ce2-e60e-4904-9e74-182fc18e6fcf', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '5OoKIRot', 'timestamp': 1761905090.561611}, {'content': {'parts': [{'functionResponse': {'id': 'call_nuKgrbq5RNXMKIaUMGSKgInm', 'name': 'action_decision', 'response': {'action': 'call', 'amount': 40, 'reasoning': 'ポットオッズを満たしており（14.00(ポットに対して14.00%）、コールが妥当と判断。コール額: 40'}}}], 'role': 'user'}, 'invocationId': 'e-ef445ce2-e60e-4904-9e74-182fc18e6fcf', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'u47RQAmR', 'timestamp': 1761905104.485117}, {'content': {'parts': [{'text': '{"action":"call","amount":40,"reasoning":"ポットオッズを満たしており（14.00(ポットに対して14.00%）、コールが妥当と判断。コール額: 40"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 54, 'promptTokenCount': 2427, 'totalTokenCount': 2481}, 'invocationId': 'e-ef445ce2-e60e-4904-9e74-182fc18e6fcf', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'gZh6xk6Z', 'timestamp': 1761905104.487123}]
2025-10-31 19:05:07,000 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:05:07,000 - poker_game - DEBUG - {"action":"call","amount":40,"reasoning":"ポットオッズを満たしており（14.00(ポットに対して14.00%）、コールが妥当と判断。コール額: 40"}
2025-10-31 19:05:07,001 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:05:07,001 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"call","amount":40,"reasoning":"ポットオッズを満たしており（14.00(ポットに対して14.00%）、コールが妥当と判断。コール額: 40"}'
2025-10-31 19:05:07,002 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:05:07,002 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"call","amount":40,"reasoning":"ポットオッズを満たしており（14.00(ポットに対して14.00%）、コールが妥当と判断。コール額: 40"}
2025-10-31 19:05:07,003 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'call', 'amount': 40, 'reasoning': 'ポットオッズを満たしており（14.00(ポットに対して14.00%）、コールが妥当と判断。コール額: 40'}
2025-10-31 19:05:07,003 - poker_game - DEBUG - [Agent4] Extracted values - action: 'call', amount: 40
2025-10-31 19:05:07,003 - poker_game - DEBUG - [Agent4] Processing call action - available actions: ['fold', 'call (40)', 'raise (min 60)', 'all-in (651)']
2025-10-31 19:05:07,003 - poker_game - DEBUG - [Agent4] Call amount extracted from 'call (40)': 40
2025-10-31 19:05:07,004 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'call', 'amount': 40}
2025-10-31 19:05:07,004 - poker_game - INFO - [Agent4] Successfully parsed decision: call, 40, ポットオッズを満たしており（14.00(ポットに対して14.00%）、コールが妥当と判断。コール額: 40
2025-10-31 19:05:07,005 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'call' with amount 40
2025-10-31 19:05:07,005 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:05:07,006 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:05:07,006 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:05:07,006 - poker_game - INFO - Pot: 100, Current bet: 40
2025-10-31 19:05:07,006 - poker_game - INFO - Last raiser: 1
2025-10-31 19:05:07,006 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:07,007 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:07,007 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:05:07,007 - poker_game - INFO -   P0(Agent0): chips=923, bet=0, status=active
2025-10-31 19:05:07,007 - poker_game - INFO -   P1(Agent1): chips=6555, bet=40, status=active
2025-10-31 19:05:07,007 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:07,007 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:07,008 - poker_game - INFO -   P4(Agent4): chips=651, bet=0, status=active
2025-10-31 19:05:07,008 - poker_game - INFO - ==================================================
2025-10-31 19:05:07,008 - poker_game - INFO - ACTION_EXECUTED: Player 4 called 40
2025-10-31 19:05:07,023 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:05:07,023 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:05:07,024 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:05:07,024 - poker_game - INFO - Pot: 140, Current bet: 40
2025-10-31 19:05:07,024 - poker_game - INFO - Last raiser: 1
2025-10-31 19:05:07,024 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:07,024 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:07,025 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:05:07,025 - poker_game - INFO -   P0(Agent0): chips=923, bet=0, status=active
2025-10-31 19:05:07,025 - poker_game - INFO -   P1(Agent1): chips=6555, bet=40, status=active
2025-10-31 19:05:07,025 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:07,025 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:07,026 - poker_game - INFO -   P4(Agent4): chips=611, bet=40, status=active
2025-10-31 19:05:07,026 - poker_game - INFO - Extra: Action: Player 4 called 40
2025-10-31 19:05:07,026 - poker_game - INFO - ==================================================
2025-10-31 19:05:07,026 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:05:07,026 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:05:07,026 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 19:05:07,027 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 19:05:07,027 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:05:07,027 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:05:07,027 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:05:07,027 - poker_game - DEBUG - Player bets: [0, 40, 40], Current bet: 40, All same: False
2025-10-31 19:05:07,027 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:05:07,027 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:05:07,027 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:05:07,027 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:05:07,028 - poker_game - INFO - Pot: 140, Current bet: 40
2025-10-31 19:05:07,028 - poker_game - INFO - Last raiser: 1
2025-10-31 19:05:07,028 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:07,028 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:07,028 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:05:07,029 - poker_game - INFO -   P0(Agent0): chips=923, bet=0, status=active
2025-10-31 19:05:07,029 - poker_game - INFO -   P1(Agent1): chips=6555, bet=40, status=active
2025-10-31 19:05:07,029 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:07,029 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:07,030 - poker_game - INFO -   P4(Agent4): chips=611, bet=40, status=active
2025-10-31 19:05:07,030 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:05:07,030 - poker_game - INFO - ==================================================
2025-10-31 19:05:07,131 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "flop",
  "your_cards": [
    "3♣",
    "J♠"
  ],
  "community": [
    "9♥",
    "Q♠",
    "Q♥"
  ],
  "your_chips": 923,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 140,
  "to_call": 40,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6555,
      "bet": 40,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 611,
      "bet": 40,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (40)",
    "raise (min 60)",
    "all-in (923)"
  ],
  "history": [
    "Player 1 checked",
    "River dealt: 4♣",
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣",
    "Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣",
    "Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥",
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 9♥, Q♠, Q♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 raised to 40",
    "Player 4 called 40"
  ]
}
2025-10-31 19:05:07,142 - poker_game - DEBUG - Create Session: {'id': 'fc6aa70f-b65f-40b9-893a-4d64c137ca9d', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905107.139227}
2025-10-31 19:05:09,472 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 40,\n  "reasoning": "フロップ（Flop）は「9♥ Q♠ Q♥」で、コミュニティカード（場に開かれたカード）にペア（同じ数字のカードが2枚）があります。私の手札は「3♣ J♠」なので、現時点ではペアもありません。しかし、ポット（Pot）は140で、コール（Call：相手のベット額と同額を支払うこと）に必要なのは40です。相手のプレイヤー1はレイズ（Raise：ベット額を上げる行為）をしてきましたが、プレイヤー4はコールしています。私の手札は強くありませんが、ポットサイズとコール額を考慮すると、コールして次のカード（ターン）を見るのが最も合理的です。フォールド（Fold：ゲームから降りること）は、まだ勝つ可能性が残っているこの状況ではもったいないです。レイズは、私の手札が強くないため、リスクが高いと判断しました。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 224, 'promptTokenCount': 943, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 943}], 'totalTokenCount': 1167}, 'invocationId': 'e-713dcd50-4bbf-44e5-beac-92e767bec32b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'IcbNpqvH', 'timestamp': 1761905107.150454}]
2025-10-31 19:05:09,473 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:05:09,473 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 40,
  "reasoning": "フロップ（Flop）は「9♥ Q♠ Q♥」で、コミュニティカード（場に開かれたカード）にペア（同じ数字のカードが2枚）があります。私の手札は「3♣ J♠」なので、現時点ではペアもありません。しかし、ポット（Pot）は140で、コール（Call：相手のベット額と同額を支払うこと）に必要なのは40です。相手のプレイヤー1はレイズ（Raise：ベット額を上げる行為）をしてきましたが、プレイヤー4はコールしています。私の手札は強くありませんが、ポットサイズとコール額を考慮すると、コールして次のカード（ターン）を見るのが最も合理的です。フォールド（Fold：ゲームから降りること）は、まだ勝つ可能性が残っているこの状況ではもったいないです。レイズは、私の手札が強くないため、リスクが高いと判断しました。"
}
```
2025-10-31 19:05:09,474 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:05:09,474 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 40,\n  "reasoning": "フロップ（Flop）は「9♥ Q♠ Q♥」で、コミュニティカード（場に開かれたカード）にペア（同じ数字のカードが2枚）があります。私の手札は「3♣ J♠」なので、現時点ではペアもありません。しかし、ポット（Pot）は140で、コール（Call：相手のベット額と同額を支払うこと）に必要なのは40です。相手のプレイヤー1はレイズ（Raise：ベット額を上げる行為）をしてきましたが、プレイヤー4はコールしています。私の手札は強くありませんが、ポットサイズとコール額を考慮すると、コールして次のカード（ターン）を見るのが最も合理的です。フォールド（Fold：ゲームから降りること）は、まだ勝つ可能性が残っているこの状況ではもったいないです。レイズは、私の手札が強くないため、リスクが高いと判断しました。"\n}\n```'
2025-10-31 19:05:09,474 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:05:09,474 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 40,\n  "reasoning": "フロップ（Flop）は「9♥ Q♠ Q♥」で、コミュニティカード（場に開かれたカード）にペア（同じ数字のカードが2枚）があります。私の手札は「3♣ J♠」なので、現時点ではペアもありません。しかし、ポット（Pot）は140で、コール（Call：相手のベット額と同額を支払うこと）に必要なのは40です。相手のプレイヤー1はレイズ（Raise：ベット額を上げる行為）をしてきましたが、プレイヤー4はコールしています。私の手札は強くありませんが、ポットサイズとコール額を考慮すると、コールして次のカード（ターン）を見るのが最も合理的です。フォールド（Fold：ゲームから降りること）は、まだ勝つ可能性が残っているこの状況ではもったいないです。レイズは、私の手札が強くないため、リスクが高いと判断しました。"\n}'
2025-10-31 19:05:09,474 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 40,
  "reasoning": "フロップ（Flop）は「9♥ Q♠ Q♥」で、コミュニティカード（場に開かれたカード）にペア（同じ数字のカードが2枚）があります。私の手札は「3♣ J♠」なので、現時点ではペアもありません。しかし、ポット（Pot）は140で、コール（Call：相手のベット額と同額を支払うこと）に必要なのは40です。相手のプレイヤー1はレイズ（Raise：ベット額を上げる行為）をしてきましたが、プレイヤー4はコールしています。私の手札は強くありませんが、ポットサイズとコール額を考慮すると、コールして次のカード（ターン）を見るのが最も合理的です。フォールド（Fold：ゲームから降りること）は、まだ勝つ可能性が残っているこの状況ではもったいないです。レイズは、私の手札が強くないため、リスクが高いと判断しました。"
}
2025-10-31 19:05:09,474 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 40, 'reasoning': 'フロップ（Flop）は「9♥ Q♠ Q♥」で、コミュニティカード（場に開かれたカード）にペア（同じ数字のカードが2枚）があります。私の手札は「3♣ J♠」なので、現時点ではペアもありません。しかし、ポット（Pot）は140で、コール（Call：相手のベット額と同額を支払うこと）に必要なのは40です。相手のプレイヤー1はレイズ（Raise：ベット額を上げる行為）をしてきましたが、プレイヤー4はコールしています。私の手札は強くありませんが、ポットサイズとコール額を考慮すると、コールして次のカード（ターン）を見るのが最も合理的です。フォールド（Fold：ゲームから降りること）は、まだ勝つ可能性が残っているこの状況ではもったいないです。レイズは、私の手札が強くないため、リスクが高いと判断しました。'}
2025-10-31 19:05:09,474 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 40
2025-10-31 19:05:09,475 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (40)', 'raise (min 60)', 'all-in (923)']
2025-10-31 19:05:09,475 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (40)': 40
2025-10-31 19:05:09,475 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 40}
2025-10-31 19:05:09,475 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 40, フロップ（Flop）は「9♥ Q♠ Q♥」で、コミュニティカード（場に開かれたカード）にペア（同じ数字のカードが2枚）があります。私の手札は「3♣ J♠」なので、現時点ではペアもありません。しかし、ポット（Pot）は140で、コール（Call：相手のベット額と同額を支払うこと）に必要なのは40です。相手のプレイヤー1はレイズ（Raise：ベット額を上げる行為）をしてきましたが、プレイヤー4はコールしています。私の手札は強くありませんが、ポットサイズとコール額を考慮すると、コールして次のカード（ターン）を見るのが最も合理的です。フォールド（Fold：ゲームから降りること）は、まだ勝つ可能性が残っているこの状況ではもったいないです。レイズは、私の手札が強くないため、リスクが高いと判断しました。
2025-10-31 19:05:09,476 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 40
2025-10-31 19:05:09,476 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:05:09,476 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:05:09,476 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:05:09,477 - poker_game - INFO - Pot: 140, Current bet: 40
2025-10-31 19:05:09,477 - poker_game - INFO - Last raiser: 1
2025-10-31 19:05:09,477 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:09,477 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:09,477 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:05:09,477 - poker_game - INFO -   P0(Agent0): chips=923, bet=0, status=active
2025-10-31 19:05:09,477 - poker_game - INFO -   P1(Agent1): chips=6555, bet=40, status=active
2025-10-31 19:05:09,477 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:09,478 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:09,478 - poker_game - INFO -   P4(Agent4): chips=611, bet=40, status=active
2025-10-31 19:05:09,478 - poker_game - INFO - ==================================================
2025-10-31 19:05:09,478 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 40
2025-10-31 19:05:09,487 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:05:09,488 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:05:09,488 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:05:09,488 - poker_game - INFO - Pot: 180, Current bet: 40
2025-10-31 19:05:09,488 - poker_game - INFO - Last raiser: 1
2025-10-31 19:05:09,488 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:09,489 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:09,489 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:05:09,490 - poker_game - INFO -   P0(Agent0): chips=883, bet=40, status=active
2025-10-31 19:05:09,490 - poker_game - INFO -   P1(Agent1): chips=6555, bet=40, status=active
2025-10-31 19:05:09,490 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:09,490 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:09,491 - poker_game - INFO -   P4(Agent4): chips=611, bet=40, status=active
2025-10-31 19:05:09,491 - poker_game - INFO - Extra: Action: Player 0 called 40
2025-10-31 19:05:09,492 - poker_game - INFO - ==================================================
2025-10-31 19:05:09,492 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:05:09,493 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:05:09,493 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 19:05:09,493 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:05:09,494 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:05:09,494 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:05:09,494 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:05:09,494 - poker_game - DEBUG - Player bets: [40, 40, 40], Current bet: 40, All same: True
2025-10-31 19:05:09,495 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 19:05:09,495 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:05:09,495 - poker_game - INFO - Hand #22, Phase: flop
2025-10-31 19:05:09,496 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:05:09,496 - poker_game - INFO - Pot: 180, Current bet: 40
2025-10-31 19:05:09,496 - poker_game - INFO - Last raiser: 1
2025-10-31 19:05:09,497 - poker_game - INFO - Betting round complete: True
2025-10-31 19:05:09,497 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:09,498 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥']
2025-10-31 19:05:09,498 - poker_game - INFO -   P0(Agent0): chips=883, bet=40, status=active
2025-10-31 19:05:09,498 - poker_game - INFO -   P1(Agent1): chips=6555, bet=40, status=active
2025-10-31 19:05:09,498 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:09,499 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:09,499 - poker_game - INFO -   P4(Agent4): chips=611, bet=40, status=active
2025-10-31 19:05:09,499 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:05:09,500 - poker_game - INFO - ==================================================
2025-10-31 19:05:09,600 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 19:05:09,601 - poker_game - INFO - Betting round complete: True
2025-10-31 19:05:09,602 - poker_game - INFO - Remaining players: 3
2025-10-31 19:05:09,602 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 19:05:09,602 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:05:09,603 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 19:05:09,603 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 19:05:09,615 - poker_game - INFO - Starting new betting round
2025-10-31 19:05:09,615 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:05:09,616 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:05:09,616 - poker_game - DEBUG - Active players for new betting round: [0, 1, 4]
2025-10-31 19:05:09,616 - poker_game - DEBUG - Dealer button: 3
2025-10-31 19:05:09,617 - poker_game - INFO - First actor: Player 4 (by phase rule), was 1
2025-10-31 19:05:09,617 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:05:09,617 - poker_game - INFO - Hand #22, Phase: turn
2025-10-31 19:05:09,618 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:05:09,618 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:05:09,619 - poker_game - INFO - Last raiser: None
2025-10-31 19:05:09,619 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:09,620 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:09,620 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠']
2025-10-31 19:05:09,621 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:05:09,621 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:05:09,622 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:09,622 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:09,622 - poker_game - INFO -   P4(Agent4): chips=611, bet=0, status=active
2025-10-31 19:05:09,623 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 19:05:09,623 - poker_game - INFO - ==================================================
2025-10-31 19:05:09,624 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "turn",
  "your_cards": [
    "6♣",
    "5♣"
  ],
  "community": [
    "9♥",
    "Q♠",
    "Q♥",
    "A♠"
  ],
  "your_chips": 611,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 180,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 883,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6555,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (611)"
  ],
  "history": [
    "Player 3 checked",
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣",
    "Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣",
    "Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥",
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 9♥, Q♠, Q♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 raised to 40",
    "Player 4 called 40",
    "Player 0 called 40",
    "Turn dealt: A♠"
  ]
}
2025-10-31 19:05:09,634 - poker_game - DEBUG - Create Session: {'id': 'f91eebd2-3de7-4468-b7b2-76e3dd27c4b1', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761905109.63166}
2025-10-31 19:05:21,613 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 19:05:26,716 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_SpU6RUnH1lUxRoqOoxDzEH6C', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1274, 'totalTokenCount': 1291}, 'invocationId': 'e-aa519e73-3533-40ac-887d-a3b73255e048', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'eN1oiWqa', 'timestamp': 1761905109.643831}, {'content': {'parts': [{'functionResponse': {'id': 'call_SpU6RUnH1lUxRoqOoxDzEH6C', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-aa519e73-3533-40ac-887d-a3b73255e048', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'NTtucm3k', 'timestamp': 1761905111.742786}, {'content': {'parts': [{'functionCall': {'id': 'call_FH9wD1KnH7YxJoMAaHFCeYYF', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1798, 'totalTokenCount': 1818}, 'invocationId': 'e-aa519e73-3533-40ac-887d-a3b73255e048', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'kmQiMiof', 'timestamp': 1761905111.744486}, {'content': {'parts': [{'functionResponse': {'id': 'call_FH9wD1KnH7YxJoMAaHFCeYYF', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-aa519e73-3533-40ac-887d-a3b73255e048', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'sAgyAReL', 'timestamp': 1761905113.360259}, {'content': {'parts': [{'functionCall': {'id': 'call_fD0RF7hsyewiHa8Xo4ZIjcnH', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1360, 'totalTokenCount': 1377}, 'invocationId': 'e-aa519e73-3533-40ac-887d-a3b73255e048', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'pESrw2Ff', 'timestamp': 1761905113.361578}, {'content': {'parts': [{'functionResponse': {'id': 'call_fD0RF7hsyewiHa8Xo4ZIjcnH', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-aa519e73-3533-40ac-887d-a3b73255e048', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'G5doDk4z', 'timestamp': 1761905115.12677}, {'content': {'parts': [{'functionCall': {'id': 'call_9n9rX0yd4xjjHCnKHWNnMWxs', 'args': {'game_state': {'your_id': 4, 'phase': 'turn', 'your_cards': ['6♣', '5♣'], 'community': ['9♥', 'Q♠', 'Q♥', 'A♠'], 'your_chips': 611, 'your_bet_this_round': 0, 'your_total_bet_this_hand': 60, 'pot': 180, 'to_call': 0, 'dealer_button': 3, 'current_turn': 4, 'players': [{'id': 0, 'chips': 883, 'bet': 0, 'status': 'active'}, {'id': 1, 'chips': 6555, 'bet': 0, 'status': 'active'}, {'id': 3, 'chips': 1771, 'bet': 0, 'status': 'folded'}], 'actions': ['fold', 'check', 'raise (min 20)', 'all-in (611)'], 'history': ['Player 3 checked', 'Player 4 checked', 'Player 1 checked', 'Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣', 'Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣', 'Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥', 'Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣', 'Player 4 posted small blind 10', 'Player 0 posted big blind 20', 'Player 1 called 20', 'Player 3 folded', 'Player 4 called 10', 'Player 0 checked', 'Flop dealt: 9♥, Q♠, Q♥', 'Player 4 checked', 'Player 0 checked', 'Player 1 raised to 40', 'Player 4 called 40', 'Player 0 called 40', 'Turn dealt: A♠']}, 'call_amount': 0, 'pot_after_call': 180, 'equity': 0.2}, 'name': 'action_decision'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 479, 'promptTokenCount': 1890, 'totalTokenCount': 2369}, 'invocationId': 'e-aa519e73-3533-40ac-887d-a3b73255e048', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'j8eNPzUk', 'timestamp': 1761905115.132469}, {'content': {'parts': [{'functionResponse': {'id': 'call_9n9rX0yd4xjjHCnKHWNnMWxs', 'name': 'action_decision', 'response': {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（36.00(ポットに対して20.00%）ため、チェックします'}}}], 'role': 'user'}, 'invocationId': 'e-aa519e73-3533-40ac-887d-a3b73255e048', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'urc8c63X', 'timestamp': 1761905124.670862}, {'content': {'parts': [{'text': '{"action":"check","amount":0,"reasoning":"期待値が低い（36.00(ポットに対して20.00%）ため、チェックします"}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 38, 'promptTokenCount': 2420, 'totalTokenCount': 2458}, 'invocationId': 'e-aa519e73-3533-40ac-887d-a3b73255e048', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '0yTkOPCy', 'timestamp': 1761905124.673073}]
2025-10-31 19:05:26,717 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:05:26,717 - poker_game - DEBUG - {"action":"check","amount":0,"reasoning":"期待値が低い（36.00(ポットに対して20.00%）ため、チェックします"}
2025-10-31 19:05:26,717 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:05:26,717 - poker_game - DEBUG - [Agent4] Raw response content: '{"action":"check","amount":0,"reasoning":"期待値が低い（36.00(ポットに対して20.00%）ため、チェックします"}'
2025-10-31 19:05:26,718 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:05:26,718 - poker_game - DEBUG - [Agent4] JSON pattern found: {"action":"check","amount":0,"reasoning":"期待値が低い（36.00(ポットに対して20.00%）ため、チェックします"}
2025-10-31 19:05:26,718 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': '期待値が低い（36.00(ポットに対して20.00%）ため、チェックします'}
2025-10-31 19:05:26,718 - poker_game - DEBUG - [Agent4] Extracted values - action: 'check', amount: 0
2025-10-31 19:05:26,718 - poker_game - DEBUG - [Agent4] Action 'check' normalized - amount set to 0
2025-10-31 19:05:26,718 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:05:26,718 - poker_game - INFO - [Agent4] Successfully parsed decision: check, 0, 期待値が低い（36.00(ポットに対して20.00%）ため、チェックします
2025-10-31 19:05:26,719 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'check' with amount 0
2025-10-31 19:05:26,719 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:05:26,719 - poker_game - INFO - Hand #22, Phase: turn
2025-10-31 19:05:26,720 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:05:26,720 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:05:26,720 - poker_game - INFO - Last raiser: None
2025-10-31 19:05:26,720 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:26,720 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:26,721 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠']
2025-10-31 19:05:26,721 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:05:26,721 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:05:26,721 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:26,721 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:26,721 - poker_game - INFO -   P4(Agent4): chips=611, bet=0, status=active
2025-10-31 19:05:26,722 - poker_game - INFO - ==================================================
2025-10-31 19:05:26,722 - poker_game - INFO - ACTION_EXECUTED: Player 4 checked
2025-10-31 19:05:26,737 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:05:26,737 - poker_game - INFO - Hand #22, Phase: turn
2025-10-31 19:05:26,737 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:05:26,738 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:05:26,738 - poker_game - INFO - Last raiser: None
2025-10-31 19:05:26,738 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:26,738 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:26,738 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠']
2025-10-31 19:05:26,738 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:05:26,739 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:05:26,739 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:26,739 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:26,739 - poker_game - INFO -   P4(Agent4): chips=611, bet=0, status=active
2025-10-31 19:05:26,739 - poker_game - INFO - Extra: Action: Player 4 checked
2025-10-31 19:05:26,739 - poker_game - INFO - ==================================================
2025-10-31 19:05:26,740 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:05:26,740 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:05:26,740 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 19:05:26,740 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 19:05:26,740 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:05:26,740 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:05:26,741 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:05:26,741 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:05:26,741 - poker_game - DEBUG - Active player indices: [0, 1, 4]
2025-10-31 19:05:26,741 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:05:26,741 - poker_game - DEBUG - Current player index: 0
2025-10-31 19:05:26,741 - poker_game - DEBUG - First actor index: 4
2025-10-31 19:05:26,741 - poker_game - DEBUG - Betting continues: Current player 0 != first actor 4
2025-10-31 19:05:26,741 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:05:26,741 - poker_game - INFO - Hand #22, Phase: turn
2025-10-31 19:05:26,741 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:05:26,741 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:05:26,742 - poker_game - INFO - Last raiser: None
2025-10-31 19:05:26,742 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:26,742 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:26,742 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠']
2025-10-31 19:05:26,742 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:05:26,743 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:05:26,743 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:26,743 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:26,743 - poker_game - INFO -   P4(Agent4): chips=611, bet=0, status=active
2025-10-31 19:05:26,743 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:05:26,743 - poker_game - INFO - ==================================================
2025-10-31 19:05:26,845 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "turn",
  "your_cards": [
    "3♣",
    "J♠"
  ],
  "community": [
    "9♥",
    "Q♠",
    "Q♥",
    "A♠"
  ],
  "your_chips": 883,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 180,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6555,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 611,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (883)"
  ],
  "history": [
    "Player 4 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣",
    "Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣",
    "Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥",
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 9♥, Q♠, Q♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 raised to 40",
    "Player 4 called 40",
    "Player 0 called 40",
    "Turn dealt: A♠",
    "Player 4 checked"
  ]
}
2025-10-31 19:05:26,854 - poker_game - DEBUG - Create Session: {'id': '42f03360-bc43-453f-8d1d-600ef0add44a', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905126.8518045}
2025-10-31 19:05:28,605 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、コミュニティカードにペア（Q♥, Q♠）があり、私はA♠を持っているため、ツーペア（AとQ）ができています。これは強いハンドです。対戦相手のプレイヤー4はチェックしましたが、プレイヤー1がレイズした後にコールしており、チェックは慎重なプレイを示唆しています。プレイヤー1はまだアクションを起こしていないため、彼がより強いハンドを持っている可能性も考慮する必要があります。しかし、私のツーペアは非常に強力であり、ポットも大きくなっているため、コールして次のカード（リバー）を見るのが最善です。ポットオッズ（ポットの大きさに対するコールに必要な金額の比率）も有利です。to_callが0なので、チェックします。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 181, 'promptTokenCount': 945, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 945}], 'totalTokenCount': 1126}, 'invocationId': 'e-590ef519-c5c8-4b02-af88-d7b6e9b84871', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'a5T6w9kX', 'timestamp': 1761905126.865138}]
2025-10-31 19:05:28,606 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:05:28,606 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "現在の状況では、コミュニティカードにペア（Q♥, Q♠）があり、私はA♠を持っているため、ツーペア（AとQ）ができています。これは強いハンドです。対戦相手のプレイヤー4はチェックしましたが、プレイヤー1がレイズした後にコールしており、チェックは慎重なプレイを示唆しています。プレイヤー1はまだアクションを起こしていないため、彼がより強いハンドを持っている可能性も考慮する必要があります。しかし、私のツーペアは非常に強力であり、ポットも大きくなっているため、コールして次のカード（リバー）を見るのが最善です。ポットオッズ（ポットの大きさに対するコールに必要な金額の比率）も有利です。to_callが0なので、チェックします。"
}
```
2025-10-31 19:05:28,606 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:05:28,606 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、コミュニティカードにペア（Q♥, Q♠）があり、私はA♠を持っているため、ツーペア（AとQ）ができています。これは強いハンドです。対戦相手のプレイヤー4はチェックしましたが、プレイヤー1がレイズした後にコールしており、チェックは慎重なプレイを示唆しています。プレイヤー1はまだアクションを起こしていないため、彼がより強いハンドを持っている可能性も考慮する必要があります。しかし、私のツーペアは非常に強力であり、ポットも大きくなっているため、コールして次のカード（リバー）を見るのが最善です。ポットオッズ（ポットの大きさに対するコールに必要な金額の比率）も有利です。to_callが0なので、チェックします。"\n}\n```'
2025-10-31 19:05:28,606 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:05:28,607 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、コミュニティカードにペア（Q♥, Q♠）があり、私はA♠を持っているため、ツーペア（AとQ）ができています。これは強いハンドです。対戦相手のプレイヤー4はチェックしましたが、プレイヤー1がレイズした後にコールしており、チェックは慎重なプレイを示唆しています。プレイヤー1はまだアクションを起こしていないため、彼がより強いハンドを持っている可能性も考慮する必要があります。しかし、私のツーペアは非常に強力であり、ポットも大きくなっているため、コールして次のカード（リバー）を見るのが最善です。ポットオッズ（ポットの大きさに対するコールに必要な金額の比率）も有利です。to_callが0なので、チェックします。"\n}'
2025-10-31 19:05:28,607 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "現在の状況では、コミュニティカードにペア（Q♥, Q♠）があり、私はA♠を持っているため、ツーペア（AとQ）ができています。これは強いハンドです。対戦相手のプレイヤー4はチェックしましたが、プレイヤー1がレイズした後にコールしており、チェックは慎重なプレイを示唆しています。プレイヤー1はまだアクションを起こしていないため、彼がより強いハンドを持っている可能性も考慮する必要があります。しかし、私のツーペアは非常に強力であり、ポットも大きくなっているため、コールして次のカード（リバー）を見るのが最善です。ポットオッズ（ポットの大きさに対するコールに必要な金額の比率）も有利です。to_callが0なので、チェックします。"
}
2025-10-31 19:05:28,607 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': '現在の状況では、コミュニティカードにペア（Q♥, Q♠）があり、私はA♠を持っているため、ツーペア（AとQ）ができています。これは強いハンドです。対戦相手のプレイヤー4はチェックしましたが、プレイヤー1がレイズした後にコールしており、チェックは慎重なプレイを示唆しています。プレイヤー1はまだアクションを起こしていないため、彼がより強いハンドを持っている可能性も考慮する必要があります。しかし、私のツーペアは非常に強力であり、ポットも大きくなっているため、コールして次のカード（リバー）を見るのが最善です。ポットオッズ（ポットの大きさに対するコールに必要な金額の比率）も有利です。to_callが0なので、チェックします。'}
2025-10-31 19:05:28,607 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 0
2025-10-31 19:05:28,607 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (883)']
2025-10-31 19:05:28,607 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 19:05:28,607 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 0, 現在の状況では、コミュニティカードにペア（Q♥, Q♠）があり、私はA♠を持っているため、ツーペア（AとQ）ができています。これは強いハンドです。対戦相手のプレイヤー4はチェックしましたが、プレイヤー1がレイズした後にコールしており、チェックは慎重なプレイを示唆しています。プレイヤー1はまだアクションを起こしていないため、彼がより強いハンドを持っている可能性も考慮する必要があります。しかし、私のツーペアは非常に強力であり、ポットも大きくなっているため、コールして次のカード（リバー）を見るのが最善です。ポットオッズ（ポットの大きさに対するコールに必要な金額の比率）も有利です。to_callが0なので、チェックします。
2025-10-31 19:05:28,608 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 0
2025-10-31 19:05:28,608 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:05:28,608 - poker_game - INFO - Hand #22, Phase: turn
2025-10-31 19:05:28,608 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:05:28,609 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:05:28,609 - poker_game - INFO - Last raiser: None
2025-10-31 19:05:28,609 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:28,609 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:28,610 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠']
2025-10-31 19:05:28,610 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:05:28,610 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:05:28,610 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:28,611 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:28,611 - poker_game - INFO -   P4(Agent4): chips=611, bet=0, status=active
2025-10-31 19:05:28,611 - poker_game - INFO - ==================================================
2025-10-31 19:05:28,611 - poker_game - INFO - ACTION_EXECUTED: Player 0 checked
2025-10-31 19:05:28,622 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:05:28,623 - poker_game - INFO - Hand #22, Phase: turn
2025-10-31 19:05:28,623 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:05:28,624 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:05:28,624 - poker_game - INFO - Last raiser: None
2025-10-31 19:05:28,624 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:28,625 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:28,625 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠']
2025-10-31 19:05:28,626 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:05:28,626 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:05:28,626 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:28,627 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:28,627 - poker_game - INFO -   P4(Agent4): chips=611, bet=0, status=active
2025-10-31 19:05:28,627 - poker_game - INFO - Extra: Action: Player 0 checked
2025-10-31 19:05:28,628 - poker_game - INFO - ==================================================
2025-10-31 19:05:28,628 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:05:28,628 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:05:28,629 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 19:05:28,629 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:05:28,630 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:05:28,630 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:05:28,631 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:05:28,631 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:05:28,631 - poker_game - DEBUG - Active player indices: [0, 1, 4]
2025-10-31 19:05:28,631 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:05:28,631 - poker_game - DEBUG - Current player index: 1
2025-10-31 19:05:28,631 - poker_game - DEBUG - First actor index: 4
2025-10-31 19:05:28,632 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 4
2025-10-31 19:05:28,632 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:05:28,632 - poker_game - INFO - Hand #22, Phase: turn
2025-10-31 19:05:28,632 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:05:28,633 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:05:28,633 - poker_game - INFO - Last raiser: None
2025-10-31 19:05:28,634 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:28,634 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:28,635 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠']
2025-10-31 19:05:28,635 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:05:28,635 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:05:28,636 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:28,636 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:28,636 - poker_game - INFO -   P4(Agent4): chips=611, bet=0, status=active
2025-10-31 19:05:28,637 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:05:28,637 - poker_game - INFO - ==================================================
2025-10-31 19:05:28,738 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "turn",
  "your_cards": [
    "K♣",
    "10♥"
  ],
  "community": [
    "9♥",
    "Q♠",
    "Q♥",
    "A♠"
  ],
  "your_chips": 6555,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 180,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 883,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 611,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (6555)"
  ],
  "history": [
    "Player 1 checked",
    "Showdown: Player 1 hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣ cards=J♣, K♣",
    "Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣",
    "Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥",
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 9♥, Q♠, Q♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 raised to 40",
    "Player 4 called 40",
    "Player 0 called 40",
    "Turn dealt: A♠",
    "Player 4 checked",
    "Player 0 checked"
  ]
}
2025-10-31 19:05:28,752 - poker_game - DEBUG - Create Session: {'id': '1947194f-0848-498c-8fe0-393870e4cf2f', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905128.7485952}
2025-10-31 19:05:30,779 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、フロップで「Q」のペアができ、ターンで「A」が追加されたことで、ツーペア（AとQ）が完成しました。これは非常に強いハンドです。ポットは180で、コールに必要な金額は0です（相手がチェックしているため）。これは「チェック」と同じ状況なので、チェックで様子を見ます。相手の次のアクションを見て、さらに戦略を練ります。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 118, 'promptTokenCount': 947, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 947}], 'totalTokenCount': 1065}, 'invocationId': 'e-ecd5fa15-57a9-44d3-aa38-c03801959c05', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'blZmHLuF', 'timestamp': 1761905128.761781}]
2025-10-31 19:05:30,780 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:05:30,780 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "現在の状況では、フロップで「Q」のペアができ、ターンで「A」が追加されたことで、ツーペア（AとQ）が完成しました。これは非常に強いハンドです。ポットは180で、コールに必要な金額は0です（相手がチェックしているため）。これは「チェック」と同じ状況なので、チェックで様子を見ます。相手の次のアクションを見て、さらに戦略を練ります。"
}
```
2025-10-31 19:05:30,780 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:05:30,781 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、フロップで「Q」のペアができ、ターンで「A」が追加されたことで、ツーペア（AとQ）が完成しました。これは非常に強いハンドです。ポットは180で、コールに必要な金額は0です（相手がチェックしているため）。これは「チェック」と同じ状況なので、チェックで様子を見ます。相手の次のアクションを見て、さらに戦略を練ります。"\n}\n```'
2025-10-31 19:05:30,781 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:05:30,781 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況では、フロップで「Q」のペアができ、ターンで「A」が追加されたことで、ツーペア（AとQ）が完成しました。これは非常に強いハンドです。ポットは180で、コールに必要な金額は0です（相手がチェックしているため）。これは「チェック」と同じ状況なので、チェックで様子を見ます。相手の次のアクションを見て、さらに戦略を練ります。"\n}'
2025-10-31 19:05:30,782 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "現在の状況では、フロップで「Q」のペアができ、ターンで「A」が追加されたことで、ツーペア（AとQ）が完成しました。これは非常に強いハンドです。ポットは180で、コールに必要な金額は0です（相手がチェックしているため）。これは「チェック」と同じ状況なので、チェックで様子を見ます。相手の次のアクションを見て、さらに戦略を練ります。"
}
2025-10-31 19:05:30,782 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': '現在の状況では、フロップで「Q」のペアができ、ターンで「A」が追加されたことで、ツーペア（AとQ）が完成しました。これは非常に強いハンドです。ポットは180で、コールに必要な金額は0です（相手がチェックしているため）。これは「チェック」と同じ状況なので、チェックで様子を見ます。相手の次のアクションを見て、さらに戦略を練ります。'}
2025-10-31 19:05:30,782 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 0
2025-10-31 19:05:30,782 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (6555)']
2025-10-31 19:05:30,782 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 19:05:30,782 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 0, 現在の状況では、フロップで「Q」のペアができ、ターンで「A」が追加されたことで、ツーペア（AとQ）が完成しました。これは非常に強いハンドです。ポットは180で、コールに必要な金額は0です（相手がチェックしているため）。これは「チェック」と同じ状況なので、チェックで様子を見ます。相手の次のアクションを見て、さらに戦略を練ります。
2025-10-31 19:05:30,784 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 0
2025-10-31 19:05:30,784 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:05:30,785 - poker_game - INFO - Hand #22, Phase: turn
2025-10-31 19:05:30,787 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:05:30,788 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:05:30,790 - poker_game - INFO - Last raiser: None
2025-10-31 19:05:30,791 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:30,792 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:30,793 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠']
2025-10-31 19:05:30,794 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:05:30,795 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:05:30,796 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:30,796 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:30,797 - poker_game - INFO -   P4(Agent4): chips=611, bet=0, status=active
2025-10-31 19:05:30,797 - poker_game - INFO - ==================================================
2025-10-31 19:05:30,798 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 19:05:30,816 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:05:30,817 - poker_game - INFO - Hand #22, Phase: turn
2025-10-31 19:05:30,817 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:05:30,818 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:05:30,818 - poker_game - INFO - Last raiser: None
2025-10-31 19:05:30,818 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:30,819 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:30,819 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠']
2025-10-31 19:05:30,819 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:05:30,820 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:05:30,820 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:30,820 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:30,821 - poker_game - INFO -   P4(Agent4): chips=611, bet=0, status=active
2025-10-31 19:05:30,821 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 19:05:30,821 - poker_game - INFO - ==================================================
2025-10-31 19:05:30,821 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:05:30,822 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:05:30,822 - poker_game - DEBUG - Active players: [0, 1, 4]
2025-10-31 19:05:30,822 - poker_game - INFO - Advanced from player 1 to player 4 (seat order)
2025-10-31 19:05:30,823 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:05:30,824 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:05:30,824 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:05:30,825 - poker_game - DEBUG - Player bets: [0, 0, 0], Current bet: 0, All same: True
2025-10-31 19:05:30,825 - poker_game - DEBUG - Active player indices: [0, 1, 4]
2025-10-31 19:05:30,825 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:05:30,825 - poker_game - DEBUG - Current player index: 4
2025-10-31 19:05:30,826 - poker_game - DEBUG - First actor index: 4
2025-10-31 19:05:30,826 - poker_game - INFO - Betting complete: Back to first actor 4 (all players have acted)
2025-10-31 19:05:30,827 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:05:30,827 - poker_game - INFO - Hand #22, Phase: turn
2025-10-31 19:05:30,828 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:05:30,828 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:05:30,829 - poker_game - INFO - Last raiser: None
2025-10-31 19:05:30,830 - poker_game - INFO - Betting round complete: True
2025-10-31 19:05:30,831 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:30,831 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠']
2025-10-31 19:05:30,832 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:05:30,832 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:05:30,833 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:30,834 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:30,834 - poker_game - INFO -   P4(Agent4): chips=611, bet=0, status=active
2025-10-31 19:05:30,835 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:05:30,835 - poker_game - INFO - ==================================================
2025-10-31 19:05:30,936 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 19:05:30,937 - poker_game - INFO - Betting round complete: True
2025-10-31 19:05:30,938 - poker_game - INFO - Remaining players: 3
2025-10-31 19:05:30,938 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 19:05:30,939 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:05:30,939 - poker_game - DEBUG -   Remaining P4: Agent4, status: active
2025-10-31 19:05:30,939 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 19:05:30,951 - poker_game - INFO - Starting new betting round
2025-10-31 19:05:30,952 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:05:30,952 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:05:30,952 - poker_game - DEBUG - Active players for new betting round: [0, 1, 4]
2025-10-31 19:05:30,953 - poker_game - DEBUG - Dealer button: 3
2025-10-31 19:05:30,953 - poker_game - INFO - First actor: Player 4 (by phase rule), was 4
2025-10-31 19:05:30,953 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:05:30,954 - poker_game - INFO - Hand #22, Phase: river
2025-10-31 19:05:30,954 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:05:30,954 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:05:30,955 - poker_game - INFO - Last raiser: None
2025-10-31 19:05:30,955 - poker_game - INFO - Betting round complete: False
2025-10-31 19:05:30,955 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:05:30,955 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠', 'Q♣']
2025-10-31 19:05:30,956 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:05:30,956 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:05:30,956 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:05:30,957 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:05:30,957 - poker_game - INFO -   P4(Agent4): chips=611, bet=0, status=active
2025-10-31 19:05:30,957 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 19:05:30,958 - poker_game - INFO - ==================================================
2025-10-31 19:05:30,959 - poker_game - DEBUG - LLM Prompt for Agent4: {
  "your_id": 4,
  "phase": "river",
  "your_cards": [
    "6♣",
    "5♣"
  ],
  "community": [
    "9♥",
    "Q♠",
    "Q♥",
    "A♠",
    "Q♣"
  ],
  "your_chips": 611,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 180,
  "to_call": 0,
  "dealer_button": 3,
  "current_turn": 4,
  "players": [
    {
      "id": 0,
      "chips": 883,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 6555,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (611)"
  ],
  "history": [
    "Showdown: Player 3 hand=One Pair: 4s - A♦, Q♣, 10♠, 4♠, 4♣ cards=10♠, Q♣",
    "Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥",
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 9♥, Q♠, Q♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 raised to 40",
    "Player 4 called 40",
    "Player 0 called 40",
    "Turn dealt: A♠",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: Q♣"
  ]
}
2025-10-31 19:05:30,973 - poker_game - DEBUG - Create Session: {'id': 'e3767114-f97e-431b-b5b5-a7d6bba9a8cc', 'appName': 'team3_agent', 'userId': 'player_4', 'state': {}, 'events': [], 'lastUpdateTime': 1761905130.9698772}
2025-10-31 19:05:41,048 - poker_game - INFO - Waiting for LLM API response for Agent4... 10 seconds elapsed
2025-10-31 19:05:51,133 - poker_game - INFO - Waiting for LLM API response for Agent4... 20 seconds elapsed
2025-10-31 19:06:01,104 - poker_game - INFO - Waiting for LLM API response for Agent4... 30 seconds elapsed
2025-10-31 19:06:05,134 - poker_game - INFO - LLM raw Response for Agent4: [{'content': {'parts': [{'functionCall': {'id': 'call_Bymw0Bq38G10kLvcC66B3rjN', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1242, 'totalTokenCount': 1259}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'yoLfT7SV', 'timestamp': 1761905130.985921}, {'content': {'parts': [{'functionResponse': {'id': 'call_Bymw0Bq38G10kLvcC66B3rjN', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 's3tviTog', 'timestamp': 1761905132.14039}, {'content': {'parts': [{'functionCall': {'id': 'call_kaG4plDJ71JiGsrRjCxRbGq8', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1766, 'totalTokenCount': 1786}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'wbD2psXA', 'timestamp': 1761905132.141879}, {'content': {'parts': [{'functionResponse': {'id': 'call_kaG4plDJ71JiGsrRjCxRbGq8', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'eAlaxWqv', 'timestamp': 1761905133.40364}, {'content': {'parts': [{'functionCall': {'id': 'call_HBf4u3Mhw0PxCLlcOjAiu9yB', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1328, 'totalTokenCount': 1345}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'dWCpaAuv', 'timestamp': 1761905133.406189}, {'content': {'parts': [{'functionResponse': {'id': 'call_HBf4u3Mhw0PxCLlcOjAiu9yB', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'TGDaPvT1', 'timestamp': 1761905134.803589}, {'content': {'parts': [{'functionCall': {'id': 'call_P3kNrzpQiTysLS3sSTJfFXly', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1858, 'totalTokenCount': 1878}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '8fASAYnM', 'timestamp': 1761905134.805427}, {'content': {'parts': [{'functionResponse': {'id': 'call_P3kNrzpQiTysLS3sSTJfFXly', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'qTvzcfgP', 'timestamp': 1761905136.117414}, {'content': {'parts': [{'functionCall': {'id': 'call_cpdyiVh5cTArpybSXXGvknWG', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1414, 'totalTokenCount': 1431}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'DxVvyoFL', 'timestamp': 1761905136.119973}, {'content': {'parts': [{'functionResponse': {'id': 'call_cpdyiVh5cTArpybSXXGvknWG', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'XOtnuqfe', 'timestamp': 1761905137.126282}, {'content': {'parts': [{'functionCall': {'id': 'call_dqxrvaoJooM2h3plTdPwQmCY', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 1950, 'totalTokenCount': 1970}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'COd7FYAC', 'timestamp': 1761905137.128435}, {'content': {'parts': [{'functionResponse': {'id': 'call_dqxrvaoJooM2h3plTdPwQmCY', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'ZdR8Xci2', 'timestamp': 1761905138.145833}, {'content': {'parts': [{'functionCall': {'id': 'call_DjigaGnPtS960CsyvcVxSt0d', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1500, 'totalTokenCount': 1517}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '3PlsTPZf', 'timestamp': 1761905138.148444}, {'content': {'parts': [{'functionResponse': {'id': 'call_DjigaGnPtS960CsyvcVxSt0d', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'S6bBqoC2', 'timestamp': 1761905142.361566}, {'content': {'parts': [{'functionCall': {'id': 'call_CskMWHbFedanRjHG3VUFZf1s', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 2042, 'totalTokenCount': 2062}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '5z7Z6ubk', 'timestamp': 1761905142.371743}, {'content': {'parts': [{'functionResponse': {'id': 'call_CskMWHbFedanRjHG3VUFZf1s', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'XjbVnnKB', 'timestamp': 1761905143.747547}, {'content': {'parts': [{'functionCall': {'id': 'call_H7LAdN4o3tQhKY45gUEF5svG', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1586, 'totalTokenCount': 1603}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'U4NoyuQe', 'timestamp': 1761905143.752704}, {'content': {'parts': [{'functionResponse': {'id': 'call_H7LAdN4o3tQhKY45gUEF5svG', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'V8S8qeIU', 'timestamp': 1761905144.687329}, {'content': {'parts': [{'functionCall': {'id': 'call_Je4r8kI4llBK15fy7mOSiBvb', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 2134, 'totalTokenCount': 2154}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'EVvWyuUs', 'timestamp': 1761905144.690143}, {'content': {'parts': [{'functionResponse': {'id': 'call_Je4r8kI4llBK15fy7mOSiBvb', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'lNB1axBw', 'timestamp': 1761905145.779382}, {'content': {'parts': [{'functionCall': {'id': 'call_XMZYMyVbUDVvifCXZmzbqwp0', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1672, 'totalTokenCount': 1689}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'uPUkRZ7w', 'timestamp': 1761905145.782249}, {'content': {'parts': [{'functionResponse': {'id': 'call_XMZYMyVbUDVvifCXZmzbqwp0', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'SRPPCyRL', 'timestamp': 1761905144.361295}, {'content': {'parts': [{'functionCall': {'id': 'call_14a19Cc1ybMpt5Wj7Oy9RimQ', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 2226, 'totalTokenCount': 2246}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '5Nc4UXSl', 'timestamp': 1761905144.364731}, {'content': {'parts': [{'functionResponse': {'id': 'call_14a19Cc1ybMpt5Wj7Oy9RimQ', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'iD2xoWgS', 'timestamp': 1761905145.98388}, {'content': {'parts': [{'functionCall': {'id': 'call_qeQJgOXeEg5NtKOPxAqzLTp9', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1758, 'totalTokenCount': 1775}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'Uy1y4si2', 'timestamp': 1761905145.98818}, {'content': {'parts': [{'functionResponse': {'id': 'call_qeQJgOXeEg5NtKOPxAqzLTp9', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': '8hSlqUro', 'timestamp': 1761905147.336178}, {'content': {'parts': [{'functionCall': {'id': 'call_DYDPNewPnImsg0orJ5rgRk5U', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 2318, 'totalTokenCount': 2338}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': '5PiglmUH', 'timestamp': 1761905147.340308}, {'content': {'parts': [{'functionResponse': {'id': 'call_DYDPNewPnImsg0orJ5rgRk5U', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'uiRE3ACE', 'timestamp': 1761905148.340589}, {'content': {'parts': [{'functionCall': {'id': 'call_n24LjNjEghniEM8lVdqL5YZH', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1844, 'totalTokenCount': 1861}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'ZI4aRM6Y', 'timestamp': 1761905148.343842}, {'content': {'parts': [{'functionResponse': {'id': 'call_n24LjNjEghniEM8lVdqL5YZH', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'RAcDtdgp', 'timestamp': 1761905149.522104}, {'content': {'parts': [{'functionCall': {'id': 'call_0snXIqWEbwOsBCsCwA3SXmQ6', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 2410, 'totalTokenCount': 2430}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'YIXmKlSM', 'timestamp': 1761905149.528691}, {'content': {'parts': [{'functionResponse': {'id': 'call_0snXIqWEbwOsBCsCwA3SXmQ6', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'WPupY9gJ', 'timestamp': 1761905150.90727}, {'content': {'parts': [{'functionCall': {'id': 'call_R6oWiy3q8EkIkuHaJTvCQd4E', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 1930, 'totalTokenCount': 1947}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'rknHMps5', 'timestamp': 1761905150.911275}, {'content': {'parts': [{'functionResponse': {'id': 'call_R6oWiy3q8EkIkuHaJTvCQd4E', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'bWlS6xsX', 'timestamp': 1761905152.26121}, {'content': {'parts': [{'functionCall': {'id': 'call_hEkRFtBAQW1HpW6diUR9nnsg', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 2502, 'totalTokenCount': 2522}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'ZYnaCv6K', 'timestamp': 1761905152.266879}, {'content': {'parts': [{'functionResponse': {'id': 'call_hEkRFtBAQW1HpW6diUR9nnsg', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'lEuhFnMa', 'timestamp': 1761905153.955246}, {'content': {'parts': [{'functionCall': {'id': 'call_cJXJb16yrwhSk5LS7dqI2h7U', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 2016, 'totalTokenCount': 2033}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'bzInP9yN', 'timestamp': 1761905153.962877}, {'content': {'parts': [{'functionResponse': {'id': 'call_cJXJb16yrwhSk5LS7dqI2h7U', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'Rl30qGPh', 'timestamp': 1761905155.214631}, {'content': {'parts': [{'functionCall': {'id': 'call_ds9rHlxo5vRcfN4Zr1HOe4ZL', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 2594, 'totalTokenCount': 2614}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'p7Sg0NaG', 'timestamp': 1761905155.228148}, {'content': {'parts': [{'functionResponse': {'id': 'call_ds9rHlxo5vRcfN4Zr1HOe4ZL', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'Rod6HNpL', 'timestamp': 1761905156.68694}, {'content': {'parts': [{'functionCall': {'id': 'call_FZQHvnsE13unhXPlI8jLq7Ic', 'args': {'agent_name': 'action_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 17, 'promptTokenCount': 2102, 'totalTokenCount': 2119}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'WwWoC7Wm', 'timestamp': 1761905156.692192}, {'content': {'parts': [{'functionResponse': {'id': 'call_FZQHvnsE13unhXPlI8jLq7Ic', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'action_agent', 'requestedAuthConfigs': {}}, 'id': 'KyILFXWJ', 'timestamp': 1761905159.87681}, {'content': {'parts': [{'functionCall': {'id': 'call_vVJs4dW6gXGDFpIbnnycCwAy', 'args': {'agent_name': 'beginner_poker_agent'}, 'name': 'transfer_to_agent'}}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 20, 'promptTokenCount': 2686, 'totalTokenCount': 2706}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'longRunningToolIds': [], 'id': 'AevCXV1v', 'timestamp': 1761905159.881934}, {'content': {'parts': [{'functionResponse': {'id': 'call_vVJs4dW6gXGDFpIbnnycCwAy', 'name': 'transfer_to_agent', 'response': {'result': None}}}], 'role': 'user'}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'action_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'transferToAgent': 'beginner_poker_agent', 'requestedAuthConfigs': {}}, 'id': 'CLNnXmOk', 'timestamp': 1761905161.951187}, {'content': {'parts': [{'text': '{\n  "action": "all_in",\n  "amount": 611,\n  "reasoning": "My hand is a straight (5♣, 6♣, 7♣, 8♣, 9♣) which is a strong hand given the board. There\'s a possibility of a full house, but with my straight, I should maximize my potential to win the pot by going all-in."\n}'}], 'role': 'model'}, 'partial': False, 'usageMetadata': {'candidatesTokenCount': 90, 'promptTokenCount': 2188, 'totalTokenCount': 2278}, 'invocationId': 'e-64dc1b34-0304-4661-8dc1-ae3e89cae364', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'rXzOobGc', 'timestamp': 1761905161.957119}]
2025-10-31 19:06:05,135 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent4:
2025-10-31 19:06:05,135 - poker_game - DEBUG - {
  "action": "all_in",
  "amount": 611,
  "reasoning": "My hand is a straight (5♣, 6♣, 7♣, 8♣, 9♣) which is a strong hand given the board. There's a possibility of a full house, but with my straight, I should maximize my potential to win the pot by going all-in."
}
2025-10-31 19:06:05,136 - poker_game - DEBUG - [Agent4] Starting LLM API response parsing
2025-10-31 19:06:05,136 - poker_game - DEBUG - [Agent4] Raw response content: '{\n  "action": "all_in",\n  "amount": 611,\n  "reasoning": "My hand is a straight (5♣, 6♣, 7♣, 8♣, 9♣) which is a strong hand given the board. There\'s a possibility of a full house, but with my straight, I should maximize my potential to win the pot by going all-in."\n}'
2025-10-31 19:06:05,137 - poker_game - DEBUG - [Agent4] No markdown code block detected
2025-10-31 19:06:05,137 - poker_game - DEBUG - [Agent4] JSON pattern found: {
  "action": "all_in",
  "amount": 611,
  "reasoning": "My hand is a straight (5♣, 6♣, 7♣, 8♣, 9♣) which is a strong hand given the board. There's a possibility of a full house, but with my straight, I should maximize my potential to win the pot by going all-in."
}
2025-10-31 19:06:05,137 - poker_game - DEBUG - [Agent4] JSON parsing successful: {'action': 'all_in', 'amount': 611, 'reasoning': "My hand is a straight (5♣, 6♣, 7♣, 8♣, 9♣) which is a strong hand given the board. There's a possibility of a full house, but with my straight, I should maximize my potential to win the pot by going all-in."}
2025-10-31 19:06:05,137 - poker_game - DEBUG - [Agent4] Extracted values - action: 'all_in', amount: 611
2025-10-31 19:06:05,137 - poker_game - DEBUG - [Agent4] Action 'all_in' normalized to 'all_in' - amount set to 611
2025-10-31 19:06:05,137 - poker_game - DEBUG - [Agent4] Final parsed decision: {'action': 'all_in', 'amount': 611}
2025-10-31 19:06:05,137 - poker_game - INFO - [Agent4] Successfully parsed decision: all_in, 611, My hand is a straight (5♣, 6♣, 7♣, 8♣, 9♣) which is a strong hand given the board. There's a possibility of a full house, but with my straight, I should maximize my potential to win the pot by going all-in.
2025-10-31 19:06:05,138 - poker_game - INFO - >>> PROCESS_ACTION: Player 4 attempts 'all_in' with amount 611
2025-10-31 19:06:05,139 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:05,139 - poker_game - INFO - Hand #22, Phase: river
2025-10-31 19:06:05,139 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:06:05,139 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:05,139 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:05,140 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:05,140 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 1
2025-10-31 19:06:05,140 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠', 'Q♣']
2025-10-31 19:06:05,140 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:06:05,140 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:06:05,141 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:05,141 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:05,141 - poker_game - INFO -   P4(Agent4): chips=611, bet=0, status=active
2025-10-31 19:06:05,141 - poker_game - INFO - ==================================================
2025-10-31 19:06:05,141 - poker_game - INFO - ACTION_EXECUTED: Player 4 went all-in with 611
2025-10-31 19:06:05,159 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:05,160 - poker_game - INFO - Hand #22, Phase: river
2025-10-31 19:06:05,161 - poker_game - INFO - Current player: 4, Dealer: 3
2025-10-31 19:06:05,162 - poker_game - INFO - Pot: 791, Current bet: 611
2025-10-31 19:06:05,162 - poker_game - INFO - Last raiser: 4
2025-10-31 19:06:05,163 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:05,164 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 1
2025-10-31 19:06:05,164 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠', 'Q♣']
2025-10-31 19:06:05,164 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:06:05,164 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:06:05,166 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:05,166 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:05,166 - poker_game - INFO -   P4(Agent4): chips=0, bet=611, status=all_in
2025-10-31 19:06:05,167 - poker_game - INFO - Extra: Action: Player 4 went all-in with 611
2025-10-31 19:06:05,167 - poker_game - INFO - ==================================================
2025-10-31 19:06:05,168 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:05,168 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:05,168 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 19:06:05,168 - poker_game - INFO - Advanced from player 4 to player 0 (seat order)
2025-10-31 19:06:05,168 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:05,168 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:05,168 - poker_game - DEBUG - Active: 2, All-in: 1
2025-10-31 19:06:05,170 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 611, All same: False
2025-10-31 19:06:05,170 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:06:05,171 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:05,171 - poker_game - INFO - Hand #22, Phase: river
2025-10-31 19:06:05,171 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:06:05,171 - poker_game - INFO - Pot: 791, Current bet: 611
2025-10-31 19:06:05,172 - poker_game - INFO - Last raiser: 4
2025-10-31 19:06:05,175 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:05,175 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 1
2025-10-31 19:06:05,175 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠', 'Q♣']
2025-10-31 19:06:05,175 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:06:05,176 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:06:05,176 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:05,176 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:05,176 - poker_game - INFO -   P4(Agent4): chips=0, bet=611, status=all_in
2025-10-31 19:06:05,176 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:05,176 - poker_game - INFO - ==================================================
2025-10-31 19:06:05,278 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "river",
  "your_cards": [
    "3♣",
    "J♠"
  ],
  "community": [
    "9♥",
    "Q♠",
    "Q♥",
    "A♠",
    "Q♣"
  ],
  "your_chips": 883,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 791,
  "to_call": 611,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 6555,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 0,
      "bet": 611,
      "status": "all_in"
    }
  ],
  "actions": [
    "fold",
    "call (611)",
    "raise (min 631)",
    "all-in (883)"
  ],
  "history": [
    "Showdown: Player 4 hand=One Pair: 4s - A♦, Q♥, 9♥, 4♠, 4♣ cards=Q♥, 9♥",
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 9♥, Q♠, Q♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 raised to 40",
    "Player 4 called 40",
    "Player 0 called 40",
    "Turn dealt: A♠",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: Q♣",
    "Player 4 went all-in with 611"
  ]
}
2025-10-31 19:06:05,288 - poker_game - DEBUG - Create Session: {'id': '96acdb05-38ab-4a9b-86ca-760d2ba183f5', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905165.2857678}
2025-10-31 19:06:07,377 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 611,\n  "reasoning": "リバー（最終ストリート）で、コミュニティカードには \\"Q♥\\", \\"Q♠\\", \\"Q♣\\" があり、あなたの手札 \\"J♠\\" と合わせてスリーカード（同じ数字が3枚）の \\"Q\\" を作ることができます。これは非常に強いハンドです。プレイヤー4はすでにオールインしており、プレイヤー1のベット額（to_call）は611です。ポットサイズ（791）とあなたのチップ（883）を考慮すると、コールしてプレイヤー4のハンド（ツーペアの \\"4\\"）に勝つことが最善の戦略です。プレイヤー1のハンドは不明ですが、あなたのスリーカードは少なくともプレイヤー4には勝っています。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 181, 'promptTokenCount': 898, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 898}], 'totalTokenCount': 1079}, 'invocationId': 'e-11945cfd-9b90-449f-80b5-b2a01b540b54', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'j51bsggp', 'timestamp': 1761905165.298622}]
2025-10-31 19:06:07,378 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:06:07,378 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 611,
  "reasoning": "リバー（最終ストリート）で、コミュニティカードには \"Q♥\", \"Q♠\", \"Q♣\" があり、あなたの手札 \"J♠\" と合わせてスリーカード（同じ数字が3枚）の \"Q\" を作ることができます。これは非常に強いハンドです。プレイヤー4はすでにオールインしており、プレイヤー1のベット額（to_call）は611です。ポットサイズ（791）とあなたのチップ（883）を考慮すると、コールしてプレイヤー4のハンド（ツーペアの \"4\"）に勝つことが最善の戦略です。プレイヤー1のハンドは不明ですが、あなたのスリーカードは少なくともプレイヤー4には勝っています。"
}
```
2025-10-31 19:06:07,379 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:06:07,379 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 611,\n  "reasoning": "リバー（最終ストリート）で、コミュニティカードには \\"Q♥\\", \\"Q♠\\", \\"Q♣\\" があり、あなたの手札 \\"J♠\\" と合わせてスリーカード（同じ数字が3枚）の \\"Q\\" を作ることができます。これは非常に強いハンドです。プレイヤー4はすでにオールインしており、プレイヤー1のベット額（to_call）は611です。ポットサイズ（791）とあなたのチップ（883）を考慮すると、コールしてプレイヤー4のハンド（ツーペアの \\"4\\"）に勝つことが最善の戦略です。プレイヤー1のハンドは不明ですが、あなたのスリーカードは少なくともプレイヤー4には勝っています。"\n}\n```'
2025-10-31 19:06:07,379 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:06:07,380 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 611,\n  "reasoning": "リバー（最終ストリート）で、コミュニティカードには \\"Q♥\\", \\"Q♠\\", \\"Q♣\\" があり、あなたの手札 \\"J♠\\" と合わせてスリーカード（同じ数字が3枚）の \\"Q\\" を作ることができます。これは非常に強いハンドです。プレイヤー4はすでにオールインしており、プレイヤー1のベット額（to_call）は611です。ポットサイズ（791）とあなたのチップ（883）を考慮すると、コールしてプレイヤー4のハンド（ツーペアの \\"4\\"）に勝つことが最善の戦略です。プレイヤー1のハンドは不明ですが、あなたのスリーカードは少なくともプレイヤー4には勝っています。"\n}'
2025-10-31 19:06:07,380 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 611,
  "reasoning": "リバー（最終ストリート）で、コミュニティカードには \"Q♥\", \"Q♠\", \"Q♣\" があり、あなたの手札 \"J♠\" と合わせてスリーカード（同じ数字が3枚）の \"Q\" を作ることができます。これは非常に強いハンドです。プレイヤー4はすでにオールインしており、プレイヤー1のベット額（to_call）は611です。ポットサイズ（791）とあなたのチップ（883）を考慮すると、コールしてプレイヤー4のハンド（ツーペアの \"4\"）に勝つことが最善の戦略です。プレイヤー1のハンドは不明ですが、あなたのスリーカードは少なくともプレイヤー4には勝っています。"
}
2025-10-31 19:06:07,380 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 611, 'reasoning': 'リバー（最終ストリート）で、コミュニティカードには "Q♥", "Q♠", "Q♣" があり、あなたの手札 "J♠" と合わせてスリーカード（同じ数字が3枚）の "Q" を作ることができます。これは非常に強いハンドです。プレイヤー4はすでにオールインしており、プレイヤー1のベット額（to_call）は611です。ポットサイズ（791）とあなたのチップ（883）を考慮すると、コールしてプレイヤー4のハンド（ツーペアの "4"）に勝つことが最善の戦略です。プレイヤー1のハンドは不明ですが、あなたのスリーカードは少なくともプレイヤー4には勝っています。'}
2025-10-31 19:06:07,380 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 611
2025-10-31 19:06:07,380 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (611)', 'raise (min 631)', 'all-in (883)']
2025-10-31 19:06:07,381 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (611)': 611
2025-10-31 19:06:07,381 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 611}
2025-10-31 19:06:07,381 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 611, リバー（最終ストリート）で、コミュニティカードには "Q♥", "Q♠", "Q♣" があり、あなたの手札 "J♠" と合わせてスリーカード（同じ数字が3枚）の "Q" を作ることができます。これは非常に強いハンドです。プレイヤー4はすでにオールインしており、プレイヤー1のベット額（to_call）は611です。ポットサイズ（791）とあなたのチップ（883）を考慮すると、コールしてプレイヤー4のハンド（ツーペアの "4"）に勝つことが最善の戦略です。プレイヤー1のハンドは不明ですが、あなたのスリーカードは少なくともプレイヤー4には勝っています。
2025-10-31 19:06:07,382 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 611
2025-10-31 19:06:07,382 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:07,383 - poker_game - INFO - Hand #22, Phase: river
2025-10-31 19:06:07,383 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:06:07,384 - poker_game - INFO - Pot: 791, Current bet: 611
2025-10-31 19:06:07,384 - poker_game - INFO - Last raiser: 4
2025-10-31 19:06:07,384 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:07,385 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 1
2025-10-31 19:06:07,385 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠', 'Q♣']
2025-10-31 19:06:07,385 - poker_game - INFO -   P0(Agent0): chips=883, bet=0, status=active
2025-10-31 19:06:07,386 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:06:07,386 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:07,387 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:07,387 - poker_game - INFO -   P4(Agent4): chips=0, bet=611, status=all_in
2025-10-31 19:06:07,387 - poker_game - INFO - ==================================================
2025-10-31 19:06:07,388 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 611
2025-10-31 19:06:07,396 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:07,397 - poker_game - INFO - Hand #22, Phase: river
2025-10-31 19:06:07,398 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:06:07,398 - poker_game - INFO - Pot: 1402, Current bet: 611
2025-10-31 19:06:07,399 - poker_game - INFO - Last raiser: 4
2025-10-31 19:06:07,399 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:07,400 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 1
2025-10-31 19:06:07,400 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠', 'Q♣']
2025-10-31 19:06:07,400 - poker_game - INFO -   P0(Agent0): chips=272, bet=611, status=active
2025-10-31 19:06:07,401 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:06:07,401 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:07,402 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:07,402 - poker_game - INFO -   P4(Agent4): chips=0, bet=611, status=all_in
2025-10-31 19:06:07,403 - poker_game - INFO - Extra: Action: Player 0 called 611
2025-10-31 19:06:07,403 - poker_game - INFO - ==================================================
2025-10-31 19:06:07,404 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:07,404 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:07,404 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 19:06:07,405 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:06:07,405 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:07,405 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:07,405 - poker_game - DEBUG - Active: 2, All-in: 1
2025-10-31 19:06:07,406 - poker_game - DEBUG - Player bets: [611, 0], Current bet: 611, All same: False
2025-10-31 19:06:07,406 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:06:07,406 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:07,406 - poker_game - INFO - Hand #22, Phase: river
2025-10-31 19:06:07,406 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:06:07,407 - poker_game - INFO - Pot: 1402, Current bet: 611
2025-10-31 19:06:07,407 - poker_game - INFO - Last raiser: 4
2025-10-31 19:06:07,407 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:07,408 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 1
2025-10-31 19:06:07,408 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠', 'Q♣']
2025-10-31 19:06:07,409 - poker_game - INFO -   P0(Agent0): chips=272, bet=611, status=active
2025-10-31 19:06:07,409 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:06:07,409 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:07,410 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:07,410 - poker_game - INFO -   P4(Agent4): chips=0, bet=611, status=all_in
2025-10-31 19:06:07,410 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:07,411 - poker_game - INFO - ==================================================
2025-10-31 19:06:07,512 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "river",
  "your_cards": [
    "K♣",
    "10♥"
  ],
  "community": [
    "9♥",
    "Q♠",
    "Q♥",
    "A♠",
    "Q♣"
  ],
  "your_chips": 6555,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 60,
  "pot": 1402,
  "to_call": 611,
  "dealer_button": 3,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 272,
      "bet": 611,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 4,
      "chips": 0,
      "bet": 611,
      "status": "all_in"
    }
  ],
  "actions": [
    "fold",
    "call (611)",
    "raise (min 631)",
    "all-in (6555)"
  ],
  "history": [
    "Side pot layer 0: amount=840, winners=1 best_hand=One Pair: 4s - A♦, K♣, J♣, 4♠, 4♣",
    "Player 4 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 4 called 10",
    "Player 0 checked",
    "Flop dealt: 9♥, Q♠, Q♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 raised to 40",
    "Player 4 called 40",
    "Player 0 called 40",
    "Turn dealt: A♠",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: Q♣",
    "Player 4 went all-in with 611",
    "Player 0 called 611"
  ]
}
2025-10-31 19:06:07,522 - poker_game - DEBUG - Create Session: {'id': 'a84207ae-ff07-47bf-8b18-719fba2c0cc7', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905167.5205302}
2025-10-31 19:06:09,663 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 611,\n  "reasoning": "コミュニティカードにQが3枚（スリーカード）あり、あなたの手札のKと10は役を作りません。しかし、相手（Player 4）がオールインしており、コールに必要な金額（611）はあなたのチップ（6555）に対してそれほど大きくありません。ポットサイズ（1402）を考慮すると、コールして相手の手札を見てみる価値はあります。相手がスリーカードやフルハウス（Qと他のペア）を持っている可能性もありますが、あなたが勝つ可能性もゼロではありません。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 147, 'promptTokenCount': 871, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 871}], 'totalTokenCount': 1018}, 'invocationId': 'e-c2367781-9804-497d-ae6d-c901a5a023a2', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'ifJZGsv3', 'timestamp': 1761905167.529053}]
2025-10-31 19:06:09,663 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:06:09,664 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 611,
  "reasoning": "コミュニティカードにQが3枚（スリーカード）あり、あなたの手札のKと10は役を作りません。しかし、相手（Player 4）がオールインしており、コールに必要な金額（611）はあなたのチップ（6555）に対してそれほど大きくありません。ポットサイズ（1402）を考慮すると、コールして相手の手札を見てみる価値はあります。相手がスリーカードやフルハウス（Qと他のペア）を持っている可能性もありますが、あなたが勝つ可能性もゼロではありません。"
}
```
2025-10-31 19:06:09,664 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:06:09,664 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 611,\n  "reasoning": "コミュニティカードにQが3枚（スリーカード）あり、あなたの手札のKと10は役を作りません。しかし、相手（Player 4）がオールインしており、コールに必要な金額（611）はあなたのチップ（6555）に対してそれほど大きくありません。ポットサイズ（1402）を考慮すると、コールして相手の手札を見てみる価値はあります。相手がスリーカードやフルハウス（Qと他のペア）を持っている可能性もありますが、あなたが勝つ可能性もゼロではありません。"\n}\n```'
2025-10-31 19:06:09,664 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:06:09,665 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 611,\n  "reasoning": "コミュニティカードにQが3枚（スリーカード）あり、あなたの手札のKと10は役を作りません。しかし、相手（Player 4）がオールインしており、コールに必要な金額（611）はあなたのチップ（6555）に対してそれほど大きくありません。ポットサイズ（1402）を考慮すると、コールして相手の手札を見てみる価値はあります。相手がスリーカードやフルハウス（Qと他のペア）を持っている可能性もありますが、あなたが勝つ可能性もゼロではありません。"\n}'
2025-10-31 19:06:09,665 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 611,
  "reasoning": "コミュニティカードにQが3枚（スリーカード）あり、あなたの手札のKと10は役を作りません。しかし、相手（Player 4）がオールインしており、コールに必要な金額（611）はあなたのチップ（6555）に対してそれほど大きくありません。ポットサイズ（1402）を考慮すると、コールして相手の手札を見てみる価値はあります。相手がスリーカードやフルハウス（Qと他のペア）を持っている可能性もありますが、あなたが勝つ可能性もゼロではありません。"
}
2025-10-31 19:06:09,665 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 611, 'reasoning': 'コミュニティカードにQが3枚（スリーカード）あり、あなたの手札のKと10は役を作りません。しかし、相手（Player 4）がオールインしており、コールに必要な金額（611）はあなたのチップ（6555）に対してそれほど大きくありません。ポットサイズ（1402）を考慮すると、コールして相手の手札を見てみる価値はあります。相手がスリーカードやフルハウス（Qと他のペア）を持っている可能性もありますが、あなたが勝つ可能性もゼロではありません。'}
2025-10-31 19:06:09,666 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 611
2025-10-31 19:06:09,666 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (611)', 'raise (min 631)', 'all-in (6555)']
2025-10-31 19:06:09,666 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (611)': 611
2025-10-31 19:06:09,666 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 611}
2025-10-31 19:06:09,666 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 611, コミュニティカードにQが3枚（スリーカード）あり、あなたの手札のKと10は役を作りません。しかし、相手（Player 4）がオールインしており、コールに必要な金額（611）はあなたのチップ（6555）に対してそれほど大きくありません。ポットサイズ（1402）を考慮すると、コールして相手の手札を見てみる価値はあります。相手がスリーカードやフルハウス（Qと他のペア）を持っている可能性もありますが、あなたが勝つ可能性もゼロではありません。
2025-10-31 19:06:09,667 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 611
2025-10-31 19:06:09,668 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:09,668 - poker_game - INFO - Hand #22, Phase: river
2025-10-31 19:06:09,669 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:06:09,669 - poker_game - INFO - Pot: 1402, Current bet: 611
2025-10-31 19:06:09,669 - poker_game - INFO - Last raiser: 4
2025-10-31 19:06:09,670 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:09,670 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 1
2025-10-31 19:06:09,670 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠', 'Q♣']
2025-10-31 19:06:09,671 - poker_game - INFO -   P0(Agent0): chips=272, bet=611, status=active
2025-10-31 19:06:09,671 - poker_game - INFO -   P1(Agent1): chips=6555, bet=0, status=active
2025-10-31 19:06:09,672 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:09,673 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:09,673 - poker_game - INFO -   P4(Agent4): chips=0, bet=611, status=all_in
2025-10-31 19:06:09,674 - poker_game - INFO - ==================================================
2025-10-31 19:06:09,674 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 611
2025-10-31 19:06:09,686 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:09,686 - poker_game - INFO - Hand #22, Phase: river
2025-10-31 19:06:09,686 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:06:09,688 - poker_game - INFO - Pot: 2013, Current bet: 611
2025-10-31 19:06:09,688 - poker_game - INFO - Last raiser: 4
2025-10-31 19:06:09,688 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:09,689 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 1
2025-10-31 19:06:09,689 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠', 'Q♣']
2025-10-31 19:06:09,689 - poker_game - INFO -   P0(Agent0): chips=272, bet=611, status=active
2025-10-31 19:06:09,690 - poker_game - INFO -   P1(Agent1): chips=5944, bet=611, status=active
2025-10-31 19:06:09,690 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:09,691 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:09,691 - poker_game - INFO -   P4(Agent4): chips=0, bet=611, status=all_in
2025-10-31 19:06:09,691 - poker_game - INFO - Extra: Action: Player 1 called 611
2025-10-31 19:06:09,692 - poker_game - INFO - ==================================================
2025-10-31 19:06:09,692 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:09,692 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:09,693 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 19:06:09,693 - poker_game - INFO - Advanced from player 1 to player 0 (seat order)
2025-10-31 19:06:09,693 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:09,693 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:09,693 - poker_game - DEBUG - Active: 2, All-in: 1
2025-10-31 19:06:09,694 - poker_game - DEBUG - Player bets: [611, 611], Current bet: 611, All same: True
2025-10-31 19:06:09,694 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 19:06:09,694 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:09,695 - poker_game - INFO - Hand #22, Phase: river
2025-10-31 19:06:09,695 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:06:09,696 - poker_game - INFO - Pot: 2013, Current bet: 611
2025-10-31 19:06:09,696 - poker_game - INFO - Last raiser: 4
2025-10-31 19:06:09,697 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:09,697 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 1
2025-10-31 19:06:09,698 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠', 'Q♣']
2025-10-31 19:06:09,698 - poker_game - INFO -   P0(Agent0): chips=272, bet=611, status=active
2025-10-31 19:06:09,699 - poker_game - INFO -   P1(Agent1): chips=5944, bet=611, status=active
2025-10-31 19:06:09,699 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:09,699 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:09,700 - poker_game - INFO -   P4(Agent4): chips=0, bet=611, status=all_in
2025-10-31 19:06:09,700 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:06:09,700 - poker_game - INFO - ==================================================
2025-10-31 19:06:09,803 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 19:06:09,804 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:09,804 - poker_game - INFO - Remaining players: 3
2025-10-31 19:06:09,804 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 19:06:09,805 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:06:09,805 - poker_game - DEBUG -   Remaining P4: Agent4, status: all_in
2025-10-31 19:06:09,805 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 19:06:09,805 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 19:06:09,806 - poker_game - INFO - Hand #22, Phase: showdown
2025-10-31 19:06:09,806 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:06:09,807 - poker_game - INFO - Pot: 2013, Current bet: 611
2025-10-31 19:06:09,807 - poker_game - INFO - Last raiser: 4
2025-10-31 19:06:09,807 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:09,808 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 1
2025-10-31 19:06:09,808 - poker_game - INFO - Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠', 'Q♣']
2025-10-31 19:06:09,809 - poker_game - INFO -   P0(Agent0): chips=272, bet=611, status=active
2025-10-31 19:06:09,809 - poker_game - INFO -   P1(Agent1): chips=5944, bet=611, status=active
2025-10-31 19:06:09,810 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:09,810 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:09,811 - poker_game - INFO -   P4(Agent4): chips=0, bet=611, status=all_in
2025-10-31 19:06:09,811 - poker_game - INFO - ==================================================
2025-10-31 19:06:09,811 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 19:06:09,812 - poker_game - INFO - Pot: 2013, Community cards: ['9♥', 'Q♠', 'Q♥', 'A♠', 'Q♣']
2025-10-31 19:06:09,813 - poker_game - INFO -   Player 0 status=active cards=['3♣', 'J♠']
2025-10-31 19:06:09,814 - poker_game - INFO -   Player 1 status=active cards=['K♣', '10♥']
2025-10-31 19:06:09,814 - poker_game - INFO -   Player 4 status=all_in cards=['6♣', '5♣']
2025-10-31 19:06:09,818 - poker_game - INFO -   Player 0 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, J♠ cards=['3♣', 'J♠']
2025-10-31 19:06:09,819 - poker_game - INFO -   Player 1 hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣ cards=['K♣', '10♥']
2025-10-31 19:06:09,819 - poker_game - INFO -   Player 4 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, 9♥ cards=['6♣', '5♣']
2025-10-31 19:06:09,820 - poker_game - INFO - Pot layer 0: amount=2013, contributors=[0, 1, 4]
2025-10-31 19:06:09,820 - poker_game - INFO - Showdown total awarded: 2013 (game.pot=2013)
2025-10-31 19:06:09,821 - poker_game - INFO - Showdown winners (aggregated): [1]
2025-10-31 19:06:09,821 - poker_game - INFO -   Awarded 2013 to Player 1 (hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣)
2025-10-31 19:06:09,822 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 19:06:09,861 - poker_game - INFO - === STARTING NEW HAND #23 ===
2025-10-31 19:06:09,862 - poker_game - INFO - Active players for new hand: 3
2025-10-31 19:06:09,863 - poker_game - INFO - Moving dealer button
2025-10-31 19:06:09,863 - poker_game - INFO - Posting blinds
2025-10-31 19:06:09,888 - poker_game - INFO - Dealing hole cards
2025-10-31 19:06:09,888 - poker_game - INFO - Setting first actor for preflop
2025-10-31 19:06:09,902 - poker_game - INFO - Started new hand in database: hand_id=23
2025-10-31 19:06:09,903 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 19:06:09,903 - poker_game - INFO - Hand #23, Phase: preflop
2025-10-31 19:06:09,904 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:06:09,905 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:09,905 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:09,906 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:09,906 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:09,907 - poker_game - INFO - Community cards: []
2025-10-31 19:06:09,907 - poker_game - INFO -   P0(Agent0): chips=272, bet=0, status=active
2025-10-31 19:06:09,908 - poker_game - INFO -   P1(Agent1): chips=7947, bet=10, status=active
2025-10-31 19:06:09,908 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:09,909 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:09,910 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:09,910 - poker_game - INFO - ==================================================
2025-10-31 19:06:09,911 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "J♣",
    "5♠"
  ],
  "community": [],
  "your_chips": 272,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 7947,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1751,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (272)"
  ],
  "history": [
    "Flop dealt: 9♥, Q♠, Q♥",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 raised to 40",
    "Player 4 called 40",
    "Player 0 called 40",
    "Turn dealt: A♠",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: Q♣",
    "Player 4 went all-in with 611",
    "Player 0 called 611",
    "Player 1 called 611",
    "Showdown: Player 0 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, J♠ cards=3♣, J♠",
    "Showdown: Player 1 hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣ cards=K♣, 10♥",
    "Showdown: Player 4 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, 9♥ cards=6♣, 5♣",
    "Side pot layer 0: amount=2013, winners=1 best_hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20"
  ]
}
2025-10-31 19:06:09,935 - poker_game - DEBUG - Create Session: {'id': '3051f3a2-c2ec-41db-8f0e-d501261fd697', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905169.9320107}
2025-10-31 19:06:11,769 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでJと5という弱いハンドを持っているため、フォールドが最善です。ポットにはすでにチップがあり、コールするには20ベットが必要ですが、このハンドで勝つ可能性は低いです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 75, 'promptTokenCount': 890, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 890}], 'totalTokenCount': 965}, 'invocationId': 'e-2915079a-1f50-4450-8105-a8de2a4c1eea', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'd9aFKTXO', 'timestamp': 1761905169.947458}]
2025-10-31 19:06:11,770 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:06:11,770 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップでJと5という弱いハンドを持っているため、フォールドが最善です。ポットにはすでにチップがあり、コールするには20ベットが必要ですが、このハンドで勝つ可能性は低いです。"
}
```
2025-10-31 19:06:11,770 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:06:11,771 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでJと5という弱いハンドを持っているため、フォールドが最善です。ポットにはすでにチップがあり、コールするには20ベットが必要ですが、このハンドで勝つ可能性は低いです。"\n}\n```'
2025-10-31 19:06:11,771 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:06:11,771 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでJと5という弱いハンドを持っているため、フォールドが最善です。ポットにはすでにチップがあり、コールするには20ベットが必要ですが、このハンドで勝つ可能性は低いです。"\n}'
2025-10-31 19:06:11,771 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップでJと5という弱いハンドを持っているため、フォールドが最善です。ポットにはすでにチップがあり、コールするには20ベットが必要ですが、このハンドで勝つ可能性は低いです。"
}
2025-10-31 19:06:11,771 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップでJと5という弱いハンドを持っているため、フォールドが最善です。ポットにはすでにチップがあり、コールするには20ベットが必要ですが、このハンドで勝つ可能性は低いです。'}
2025-10-31 19:06:11,772 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 19:06:11,772 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 19:06:11,772 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:06:11,772 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップでJと5という弱いハンドを持っているため、フォールドが最善です。ポットにはすでにチップがあり、コールするには20ベットが必要ですが、このハンドで勝つ可能性は低いです。
2025-10-31 19:06:11,773 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 19:06:11,774 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:11,774 - poker_game - INFO - Hand #23, Phase: preflop
2025-10-31 19:06:11,775 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:06:11,775 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:11,775 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:11,775 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:11,776 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:11,776 - poker_game - INFO - Community cards: []
2025-10-31 19:06:11,776 - poker_game - INFO -   P0(Agent0): chips=272, bet=0, status=active
2025-10-31 19:06:11,776 - poker_game - INFO -   P1(Agent1): chips=7947, bet=10, status=active
2025-10-31 19:06:11,777 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:11,777 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:11,779 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:11,779 - poker_game - INFO - ==================================================
2025-10-31 19:06:11,780 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 19:06:11,793 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:11,793 - poker_game - INFO - Hand #23, Phase: preflop
2025-10-31 19:06:11,794 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:06:11,794 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:11,795 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:11,795 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:11,795 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:11,796 - poker_game - INFO - Community cards: []
2025-10-31 19:06:11,796 - poker_game - INFO -   P0(Agent0): chips=272, bet=0, status=folded
2025-10-31 19:06:11,797 - poker_game - INFO -   P1(Agent1): chips=7947, bet=10, status=active
2025-10-31 19:06:11,797 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:11,798 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:11,798 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:11,798 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 19:06:11,800 - poker_game - INFO - ==================================================
2025-10-31 19:06:11,801 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:11,801 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:11,802 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:06:11,802 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:06:11,803 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:11,804 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:11,805 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:11,805 - poker_game - DEBUG - Player bets: [10, 20], Current bet: 20, All same: False
2025-10-31 19:06:11,806 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:06:11,807 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:11,807 - poker_game - INFO - Hand #23, Phase: preflop
2025-10-31 19:06:11,808 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:06:11,809 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:11,809 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:11,810 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:11,810 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:11,810 - poker_game - INFO - Community cards: []
2025-10-31 19:06:11,811 - poker_game - INFO -   P0(Agent0): chips=272, bet=0, status=folded
2025-10-31 19:06:11,811 - poker_game - INFO -   P1(Agent1): chips=7947, bet=10, status=active
2025-10-31 19:06:11,813 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:11,814 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:11,814 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:11,814 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:11,815 - poker_game - INFO - ==================================================
2025-10-31 19:06:11,917 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "3♣",
    "7♥"
  ],
  "community": [],
  "your_chips": 7947,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 30,
  "to_call": 10,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 272,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1751,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (7947)"
  ],
  "history": [
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 raised to 40",
    "Player 4 called 40",
    "Player 0 called 40",
    "Turn dealt: A♠",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: Q♣",
    "Player 4 went all-in with 611",
    "Player 0 called 611",
    "Player 1 called 611",
    "Showdown: Player 0 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, J♠ cards=3♣, J♠",
    "Showdown: Player 1 hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣ cards=K♣, 10♥",
    "Showdown: Player 4 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, 9♥ cards=6♣, 5♣",
    "Side pot layer 0: amount=2013, winners=1 best_hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 folded"
  ]
}
2025-10-31 19:06:12,000 - poker_game - DEBUG - Create Session: {'id': '3def016a-b4b9-443f-9aa5-ceddf73deaf2', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905171.9965463}
2025-10-31 19:06:16,467 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フラップが開く前）で、私の手札は3と7で、これは非常に弱いハンドです。ポットのサイズは30ですが、コールするには10必要です。しかし、他のプレイヤーがすでにポットに大きなベットをしている可能性があり、さらに、過去の履歴を見ると、プレイヤー3は積極的にベットする傾向があるようです。この弱いハンドでコールまたはレイズするのは、長期的に見て損失が大きくなる可能性が高いと判断しました。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 127, 'promptTokenCount': 883, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 883}], 'totalTokenCount': 1010}, 'invocationId': 'e-a84b7735-6c1d-4e91-8753-337431fcec56', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'CcFbIGql', 'timestamp': 1761905172.012246}]
2025-10-31 19:06:16,467 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:06:16,467 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（フラップが開く前）で、私の手札は3と7で、これは非常に弱いハンドです。ポットのサイズは30ですが、コールするには10必要です。しかし、他のプレイヤーがすでにポットに大きなベットをしている可能性があり、さらに、過去の履歴を見ると、プレイヤー3は積極的にベットする傾向があるようです。この弱いハンドでコールまたはレイズするのは、長期的に見て損失が大きくなる可能性が高いと判断しました。"
}
```
2025-10-31 19:06:16,468 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:06:16,468 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フラップが開く前）で、私の手札は3と7で、これは非常に弱いハンドです。ポットのサイズは30ですが、コールするには10必要です。しかし、他のプレイヤーがすでにポットに大きなベットをしている可能性があり、さらに、過去の履歴を見ると、プレイヤー3は積極的にベットする傾向があるようです。この弱いハンドでコールまたはレイズするのは、長期的に見て損失が大きくなる可能性が高いと判断しました。"\n}\n```'
2025-10-31 19:06:16,468 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:06:16,468 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フラップが開く前）で、私の手札は3と7で、これは非常に弱いハンドです。ポットのサイズは30ですが、コールするには10必要です。しかし、他のプレイヤーがすでにポットに大きなベットをしている可能性があり、さらに、過去の履歴を見ると、プレイヤー3は積極的にベットする傾向があるようです。この弱いハンドでコールまたはレイズするのは、長期的に見て損失が大きくなる可能性が高いと判断しました。"\n}'
2025-10-31 19:06:16,468 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（フラップが開く前）で、私の手札は3と7で、これは非常に弱いハンドです。ポットのサイズは30ですが、コールするには10必要です。しかし、他のプレイヤーがすでにポットに大きなベットをしている可能性があり、さらに、過去の履歴を見ると、プレイヤー3は積極的にベットする傾向があるようです。この弱いハンドでコールまたはレイズするのは、長期的に見て損失が大きくなる可能性が高いと判断しました。"
}
2025-10-31 19:06:16,468 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（フラップが開く前）で、私の手札は3と7で、これは非常に弱いハンドです。ポットのサイズは30ですが、コールするには10必要です。しかし、他のプレイヤーがすでにポットに大きなベットをしている可能性があり、さらに、過去の履歴を見ると、プレイヤー3は積極的にベットする傾向があるようです。この弱いハンドでコールまたはレイズするのは、長期的に見て損失が大きくなる可能性が高いと判断しました。'}
2025-10-31 19:06:16,468 - poker_game - DEBUG - [Agent1] Extracted values - action: 'fold', amount: 0
2025-10-31 19:06:16,469 - poker_game - DEBUG - [Agent1] Action 'fold' normalized - amount set to 0
2025-10-31 19:06:16,469 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:06:16,469 - poker_game - INFO - [Agent1] Successfully parsed decision: fold, 0, プリフロップ（フラップが開く前）で、私の手札は3と7で、これは非常に弱いハンドです。ポットのサイズは30ですが、コールするには10必要です。しかし、他のプレイヤーがすでにポットに大きなベットをしている可能性があり、さらに、過去の履歴を見ると、プレイヤー3は積極的にベットする傾向があるようです。この弱いハンドでコールまたはレイズするのは、長期的に見て損失が大きくなる可能性が高いと判断しました。
2025-10-31 19:06:16,470 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'fold' with amount 0
2025-10-31 19:06:16,470 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:16,470 - poker_game - INFO - Hand #23, Phase: preflop
2025-10-31 19:06:16,470 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:06:16,471 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:16,471 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:16,471 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:16,471 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:16,471 - poker_game - INFO - Community cards: []
2025-10-31 19:06:16,471 - poker_game - INFO -   P0(Agent0): chips=272, bet=0, status=folded
2025-10-31 19:06:16,472 - poker_game - INFO -   P1(Agent1): chips=7947, bet=10, status=active
2025-10-31 19:06:16,472 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:16,472 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:16,472 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:16,472 - poker_game - INFO - ==================================================
2025-10-31 19:06:16,473 - poker_game - INFO - ACTION_EXECUTED: Player 1 folded
2025-10-31 19:06:16,484 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:16,484 - poker_game - INFO - Hand #23, Phase: preflop
2025-10-31 19:06:16,484 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:06:16,485 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:16,485 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:16,485 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:16,485 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:06:16,486 - poker_game - INFO - Community cards: []
2025-10-31 19:06:16,486 - poker_game - INFO -   P0(Agent0): chips=272, bet=0, status=folded
2025-10-31 19:06:16,486 - poker_game - INFO -   P1(Agent1): chips=7947, bet=10, status=folded
2025-10-31 19:06:16,486 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:16,486 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:16,486 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:16,487 - poker_game - INFO - Extra: Action: Player 1 folded
2025-10-31 19:06:16,487 - poker_game - INFO - ==================================================
2025-10-31 19:06:16,487 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:16,487 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:16,487 - poker_game - DEBUG - Active players: [3]
2025-10-31 19:06:16,488 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:06:16,488 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:16,488 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:16,488 - poker_game - DEBUG - Active: 1, All-in: 0
2025-10-31 19:06:16,488 - poker_game - INFO - Betting complete: Only 1 or fewer players remaining
2025-10-31 19:06:16,489 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:16,489 - poker_game - INFO - Hand #23, Phase: preflop
2025-10-31 19:06:16,489 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:06:16,489 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:16,489 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:16,490 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:16,490 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:06:16,490 - poker_game - INFO - Community cards: []
2025-10-31 19:06:16,490 - poker_game - INFO -   P0(Agent0): chips=272, bet=0, status=folded
2025-10-31 19:06:16,491 - poker_game - INFO -   P1(Agent1): chips=7947, bet=10, status=folded
2025-10-31 19:06:16,491 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:16,491 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:16,491 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:16,491 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:06:16,491 - poker_game - INFO - ==================================================
2025-10-31 19:06:16,592 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 19:06:16,593 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:16,593 - poker_game - INFO - Remaining players: 1
2025-10-31 19:06:16,594 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:06:16,594 - poker_game - INFO - Going to SHOWDOWN - only 1 or fewer players remaining
2025-10-31 19:06:16,594 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 19:06:16,594 - poker_game - INFO - Hand #23, Phase: showdown
2025-10-31 19:06:16,595 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:06:16,595 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:16,595 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:16,596 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:16,596 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:06:16,596 - poker_game - INFO - Community cards: []
2025-10-31 19:06:16,596 - poker_game - INFO -   P0(Agent0): chips=272, bet=0, status=folded
2025-10-31 19:06:16,597 - poker_game - INFO -   P1(Agent1): chips=7947, bet=10, status=folded
2025-10-31 19:06:16,597 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:16,597 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:16,598 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:16,598 - poker_game - INFO - ==================================================
2025-10-31 19:06:16,598 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 19:06:16,599 - poker_game - INFO - Pot: 30, Community cards: []
2025-10-31 19:06:16,599 - poker_game - INFO -   Player 3 status=active cards=['9♠', '8♣']
2025-10-31 19:06:16,599 - poker_game - INFO - Showdown winner by default: Player 3 awarded 30
2025-10-31 19:06:16,600 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 19:06:16,600 - poker_game - INFO - === STARTING NEW HAND #24 ===
2025-10-31 19:06:16,600 - poker_game - INFO - Active players for new hand: 3
2025-10-31 19:06:16,601 - poker_game - INFO - Moving dealer button
2025-10-31 19:06:16,602 - poker_game - INFO - Posting blinds
2025-10-31 19:06:16,628 - poker_game - INFO - Dealing hole cards
2025-10-31 19:06:16,629 - poker_game - INFO - Setting first actor for preflop
2025-10-31 19:06:16,645 - poker_game - INFO - Started new hand in database: hand_id=24
2025-10-31 19:06:16,645 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 19:06:16,646 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:16,646 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:16,646 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:16,647 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:16,647 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:16,647 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:16,648 - poker_game - INFO - Community cards: []
2025-10-31 19:06:16,648 - poker_game - INFO -   P0(Agent0): chips=252, bet=20, status=active
2025-10-31 19:06:16,648 - poker_game - INFO -   P1(Agent1): chips=7947, bet=0, status=active
2025-10-31 19:06:16,649 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:16,649 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=active
2025-10-31 19:06:16,650 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:16,650 - poker_game - INFO - ==================================================
2025-10-31 19:06:16,651 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "2♠",
    "Q♣"
  ],
  "community": [],
  "your_chips": 7947,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 252,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (7947)"
  ],
  "history": [
    "Player 0 called 40",
    "Turn dealt: A♠",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: Q♣",
    "Player 4 went all-in with 611",
    "Player 0 called 611",
    "Player 1 called 611",
    "Showdown: Player 0 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, J♠ cards=3♣, J♠",
    "Showdown: Player 1 hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣ cards=K♣, 10♥",
    "Showdown: Player 4 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, 9♥ cards=6♣, 5♣",
    "Side pot layer 0: amount=2013, winners=1 best_hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 3 won 30",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20"
  ]
}
2025-10-31 19:06:16,670 - poker_game - DEBUG - Create Session: {'id': 'e866ded6-3595-47ab-af83-8f98aee5aff9', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905176.6667845}
2025-10-31 19:06:13,734 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップでは、Q2オフスートは弱いハンドです。しかし、ポットは30で、コールに必要なのは20だけです。これは、ポットオッズ（ポットサイズに対するコール額の比率）が良好であることを意味します。つまり、このコールによって勝った場合に、支払った金額以上のリターンが期待できる可能性が高いということです。相手のプレイヤーが少ないことと、ポットオッズを考慮して、コールを選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 125, 'promptTokenCount': 891, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 891}], 'totalTokenCount': 1016}, 'invocationId': 'e-f7077165-92fd-4866-9404-f13fece39d21', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '587TN1zg', 'timestamp': 1761905176.684566}]
2025-10-31 19:06:13,735 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:06:13,735 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップでは、Q2オフスートは弱いハンドです。しかし、ポットは30で、コールに必要なのは20だけです。これは、ポットオッズ（ポットサイズに対するコール額の比率）が良好であることを意味します。つまり、このコールによって勝った場合に、支払った金額以上のリターンが期待できる可能性が高いということです。相手のプレイヤーが少ないことと、ポットオッズを考慮して、コールを選択します。"
}
```
2025-10-31 19:06:13,735 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:06:13,735 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップでは、Q2オフスートは弱いハンドです。しかし、ポットは30で、コールに必要なのは20だけです。これは、ポットオッズ（ポットサイズに対するコール額の比率）が良好であることを意味します。つまり、このコールによって勝った場合に、支払った金額以上のリターンが期待できる可能性が高いということです。相手のプレイヤーが少ないことと、ポットオッズを考慮して、コールを選択します。"\n}\n```'
2025-10-31 19:06:13,735 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:06:13,735 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップでは、Q2オフスートは弱いハンドです。しかし、ポットは30で、コールに必要なのは20だけです。これは、ポットオッズ（ポットサイズに対するコール額の比率）が良好であることを意味します。つまり、このコールによって勝った場合に、支払った金額以上のリターンが期待できる可能性が高いということです。相手のプレイヤーが少ないことと、ポットオッズを考慮して、コールを選択します。"\n}'
2025-10-31 19:06:13,736 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップでは、Q2オフスートは弱いハンドです。しかし、ポットは30で、コールに必要なのは20だけです。これは、ポットオッズ（ポットサイズに対するコール額の比率）が良好であることを意味します。つまり、このコールによって勝った場合に、支払った金額以上のリターンが期待できる可能性が高いということです。相手のプレイヤーが少ないことと、ポットオッズを考慮して、コールを選択します。"
}
2025-10-31 19:06:13,736 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'プリフロップでは、Q2オフスートは弱いハンドです。しかし、ポットは30で、コールに必要なのは20だけです。これは、ポットオッズ（ポットサイズに対するコール額の比率）が良好であることを意味します。つまり、このコールによって勝った場合に、支払った金額以上のリターンが期待できる可能性が高いということです。相手のプレイヤーが少ないことと、ポットオッズを考慮して、コールを選択します。'}
2025-10-31 19:06:13,737 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 20
2025-10-31 19:06:13,737 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (7947)']
2025-10-31 19:06:13,737 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (20)': 20
2025-10-31 19:06:13,737 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 19:06:13,737 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 20, プリフロップでは、Q2オフスートは弱いハンドです。しかし、ポットは30で、コールに必要なのは20だけです。これは、ポットオッズ（ポットサイズに対するコール額の比率）が良好であることを意味します。つまり、このコールによって勝った場合に、支払った金額以上のリターンが期待できる可能性が高いということです。相手のプレイヤーが少ないことと、ポットオッズを考慮して、コールを選択します。
2025-10-31 19:06:13,738 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 20
2025-10-31 19:06:13,738 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:13,738 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:13,739 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:13,739 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:13,739 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:13,739 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:13,739 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:13,739 - poker_game - INFO - Community cards: []
2025-10-31 19:06:13,739 - poker_game - INFO -   P0(Agent0): chips=252, bet=20, status=active
2025-10-31 19:06:13,740 - poker_game - INFO -   P1(Agent1): chips=7947, bet=0, status=active
2025-10-31 19:06:13,740 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:13,740 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=active
2025-10-31 19:06:13,740 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:13,740 - poker_game - INFO - ==================================================
2025-10-31 19:06:13,741 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 20
2025-10-31 19:06:13,752 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:13,752 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:13,752 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:13,753 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:06:13,753 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:13,753 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:13,753 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:13,753 - poker_game - INFO - Community cards: []
2025-10-31 19:06:13,754 - poker_game - INFO -   P0(Agent0): chips=252, bet=20, status=active
2025-10-31 19:06:13,754 - poker_game - INFO -   P1(Agent1): chips=7927, bet=20, status=active
2025-10-31 19:06:13,754 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:13,754 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=active
2025-10-31 19:06:13,754 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:13,755 - poker_game - INFO - Extra: Action: Player 1 called 20
2025-10-31 19:06:13,756 - poker_game - INFO - ==================================================
2025-10-31 19:06:13,756 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:13,756 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:13,756 - poker_game - DEBUG - Active players: [0, 1, 3]
2025-10-31 19:06:13,756 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:06:13,756 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:13,756 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:13,756 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:06:13,757 - poker_game - DEBUG - Player bets: [20, 20, 10], Current bet: 20, All same: False
2025-10-31 19:06:13,757 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:06:13,757 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:13,757 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:13,757 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:13,757 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:06:13,757 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:13,757 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:13,757 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:13,757 - poker_game - INFO - Community cards: []
2025-10-31 19:06:13,757 - poker_game - INFO -   P0(Agent0): chips=252, bet=20, status=active
2025-10-31 19:06:13,758 - poker_game - INFO -   P1(Agent1): chips=7927, bet=20, status=active
2025-10-31 19:06:13,758 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:13,758 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=active
2025-10-31 19:06:13,758 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:13,758 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:13,758 - poker_game - INFO - ==================================================
2025-10-31 19:06:13,860 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "7♠",
    "2♥"
  ],
  "community": [],
  "your_chips": 1771,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 50,
  "to_call": 10,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 252,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 7927,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (1771)"
  ],
  "history": [
    "Turn dealt: A♠",
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: Q♣",
    "Player 4 went all-in with 611",
    "Player 0 called 611",
    "Player 1 called 611",
    "Showdown: Player 0 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, J♠ cards=3♣, J♠",
    "Showdown: Player 1 hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣ cards=K♣, 10♥",
    "Showdown: Player 4 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, 9♥ cards=6♣, 5♣",
    "Side pot layer 0: amount=2013, winners=1 best_hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 3 won 30",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20"
  ]
}
2025-10-31 19:06:13,872 - poker_game - DEBUG - Create Session: {'id': '43498c6c-0002-43ed-8e0e-7f72c6e1fac9', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905173.8707936}
2025-10-31 19:06:15,972 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで7-2オフスーツ（異なるスートの7と2）は非常に弱いハンドです。ポットのサイズと、すでにベットされている金額を考慮しても、このハンドでプレイを続けるのは不利だと判断しました。アクションの選択肢にはコール（10）とレイズ（最小40）がありますが、私のハンドの強さではどちらも推奨されません。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 112, 'promptTokenCount': 893, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 893}], 'totalTokenCount': 1005}, 'invocationId': 'e-e43c8b96-448d-4514-9776-afdfcf2eb29c', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'wlhggKmK', 'timestamp': 1761905173.882493}]
2025-10-31 19:06:15,972 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:06:15,972 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで7-2オフスーツ（異なるスートの7と2）は非常に弱いハンドです。ポットのサイズと、すでにベットされている金額を考慮しても、このハンドでプレイを続けるのは不利だと判断しました。アクションの選択肢にはコール（10）とレイズ（最小40）がありますが、私のハンドの強さではどちらも推奨されません。"
}
```
2025-10-31 19:06:15,972 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:06:15,972 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで7-2オフスーツ（異なるスートの7と2）は非常に弱いハンドです。ポットのサイズと、すでにベットされている金額を考慮しても、このハンドでプレイを続けるのは不利だと判断しました。アクションの選択肢にはコール（10）とレイズ（最小40）がありますが、私のハンドの強さではどちらも推奨されません。"\n}\n```'
2025-10-31 19:06:15,973 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:06:15,973 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで7-2オフスーツ（異なるスートの7と2）は非常に弱いハンドです。ポットのサイズと、すでにベットされている金額を考慮しても、このハンドでプレイを続けるのは不利だと判断しました。アクションの選択肢にはコール（10）とレイズ（最小40）がありますが、私のハンドの強さではどちらも推奨されません。"\n}'
2025-10-31 19:06:15,973 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで7-2オフスーツ（異なるスートの7と2）は非常に弱いハンドです。ポットのサイズと、すでにベットされている金額を考慮しても、このハンドでプレイを続けるのは不利だと判断しました。アクションの選択肢にはコール（10）とレイズ（最小40）がありますが、私のハンドの強さではどちらも推奨されません。"
}
2025-10-31 19:06:15,973 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップで7-2オフスーツ（異なるスートの7と2）は非常に弱いハンドです。ポットのサイズと、すでにベットされている金額を考慮しても、このハンドでプレイを続けるのは不利だと判断しました。アクションの選択肢にはコール（10）とレイズ（最小40）がありますが、私のハンドの強さではどちらも推奨されません。'}
2025-10-31 19:06:15,973 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 19:06:15,973 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 19:06:15,973 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:06:15,974 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップで7-2オフスーツ（異なるスートの7と2）は非常に弱いハンドです。ポットのサイズと、すでにベットされている金額を考慮しても、このハンドでプレイを続けるのは不利だと判断しました。アクションの選択肢にはコール（10）とレイズ（最小40）がありますが、私のハンドの強さではどちらも推奨されません。
2025-10-31 19:06:15,974 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 19:06:15,974 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:15,975 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:15,975 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:15,975 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:06:15,975 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:15,976 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:15,976 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:15,976 - poker_game - INFO - Community cards: []
2025-10-31 19:06:15,976 - poker_game - INFO -   P0(Agent0): chips=252, bet=20, status=active
2025-10-31 19:06:15,976 - poker_game - INFO -   P1(Agent1): chips=7927, bet=20, status=active
2025-10-31 19:06:15,976 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:15,977 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=active
2025-10-31 19:06:15,977 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:15,977 - poker_game - INFO - ==================================================
2025-10-31 19:06:15,977 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 19:06:15,985 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:15,985 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:15,985 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:15,986 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:06:15,986 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:15,986 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:15,986 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:15,987 - poker_game - INFO - Community cards: []
2025-10-31 19:06:15,987 - poker_game - INFO -   P0(Agent0): chips=252, bet=20, status=active
2025-10-31 19:06:15,987 - poker_game - INFO -   P1(Agent1): chips=7927, bet=20, status=active
2025-10-31 19:06:15,988 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:15,993 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=folded
2025-10-31 19:06:15,993 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:15,994 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 19:06:15,994 - poker_game - INFO - ==================================================
2025-10-31 19:06:15,994 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:15,994 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:15,994 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 19:06:15,994 - poker_game - INFO - Advanced from player 3 to player 0 (seat order)
2025-10-31 19:06:15,995 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:15,995 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:15,995 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:15,995 - poker_game - DEBUG - Player bets: [20, 20], Current bet: 20, All same: True
2025-10-31 19:06:15,995 - poker_game - DEBUG - Active player indices: [0, 1]
2025-10-31 19:06:15,995 - poker_game - DEBUG - Last raiser index: 0
2025-10-31 19:06:15,995 - poker_game - DEBUG - Current player index: 0
2025-10-31 19:06:15,995 - poker_game - DEBUG - Next after last raiser 0: 1
2025-10-31 19:06:15,996 - poker_game - DEBUG - Betting continues: Current player 0 != next after raiser 1
2025-10-31 19:06:15,996 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:15,996 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:15,996 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:06:15,996 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:06:15,997 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:15,997 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:15,997 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:15,997 - poker_game - INFO - Community cards: []
2025-10-31 19:06:15,997 - poker_game - INFO -   P0(Agent0): chips=252, bet=20, status=active
2025-10-31 19:06:15,998 - poker_game - INFO -   P1(Agent1): chips=7927, bet=20, status=active
2025-10-31 19:06:15,998 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:15,998 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=folded
2025-10-31 19:06:15,998 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:15,998 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:15,999 - poker_game - INFO - ==================================================
2025-10-31 19:06:16,100 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "K♠",
    "9♦"
  ],
  "community": [],
  "your_chips": 252,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 50,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 7927,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 10,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 40)",
    "all-in (252)"
  ],
  "history": [
    "Player 4 checked",
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: Q♣",
    "Player 4 went all-in with 611",
    "Player 0 called 611",
    "Player 1 called 611",
    "Showdown: Player 0 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, J♠ cards=3♣, J♠",
    "Showdown: Player 1 hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣ cards=K♣, 10♥",
    "Showdown: Player 4 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, 9♥ cards=6♣, 5♣",
    "Side pot layer 0: amount=2013, winners=1 best_hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 3 won 30",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded"
  ]
}
2025-10-31 19:06:16,111 - poker_game - DEBUG - Create Session: {'id': '468f96b4-7b42-4647-bf8d-1550263c0537', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905176.1088095}
2025-10-31 19:06:19,020 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 40,\n  "reasoning": "プリフロップ（Preflop）で、あなたはK♠9♦というハンドを持っています。これは、エース（A）やキング（K）のような強いカードと、それほど強くないカードの組み合わせです。現在のポットは50で、あなたのベットは20です。コール（Call）するには0を支払う必要があり、これはあなたがすでにベットした金額と同額か、あるいは相手のベット額より低いことを意味します。この状況では、相手プレイヤー（Player 1）が7927チップを持っており、まだアクションを起こしていない（current_turn: 0で、あなたのIDが0、Dealer Buttonが1なので、あなたが最初にアクションを起こす番です）ことを考慮すると、少し攻撃的にプレイする価値があります。K9s（キングとナインのスーテッド、つまり同じマーク）は、フロップ（Flop - 最初の3枚のコミュニティカード）で良いハンドになる可能性を秘めています。レイズ（Raise）することで、相手をプレッシャーにかけ、ポットを大きくし、あるいは相手にフォールド（Fold - 降りる）させることを狙います。ミニマムレイズは40なので、それに基づいてアクションを決定しました。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 284, 'promptTokenCount': 887, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 887}], 'totalTokenCount': 1171}, 'invocationId': 'e-af0e1c1a-6d6f-4142-a119-e799f65eb856', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '2gSHsfzX', 'timestamp': 1761905176.119346}]
2025-10-31 19:06:19,020 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:06:19,020 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 40,
  "reasoning": "プリフロップ（Preflop）で、あなたはK♠9♦というハンドを持っています。これは、エース（A）やキング（K）のような強いカードと、それほど強くないカードの組み合わせです。現在のポットは50で、あなたのベットは20です。コール（Call）するには0を支払う必要があり、これはあなたがすでにベットした金額と同額か、あるいは相手のベット額より低いことを意味します。この状況では、相手プレイヤー（Player 1）が7927チップを持っており、まだアクションを起こしていない（current_turn: 0で、あなたのIDが0、Dealer Buttonが1なので、あなたが最初にアクションを起こす番です）ことを考慮すると、少し攻撃的にプレイする価値があります。K9s（キングとナインのスーテッド、つまり同じマーク）は、フロップ（Flop - 最初の3枚のコミュニティカード）で良いハンドになる可能性を秘めています。レイズ（Raise）することで、相手をプレッシャーにかけ、ポットを大きくし、あるいは相手にフォールド（Fold - 降りる）させることを狙います。ミニマムレイズは40なので、それに基づいてアクションを決定しました。"
}
```
2025-10-31 19:06:19,021 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:06:19,021 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 40,\n  "reasoning": "プリフロップ（Preflop）で、あなたはK♠9♦というハンドを持っています。これは、エース（A）やキング（K）のような強いカードと、それほど強くないカードの組み合わせです。現在のポットは50で、あなたのベットは20です。コール（Call）するには0を支払う必要があり、これはあなたがすでにベットした金額と同額か、あるいは相手のベット額より低いことを意味します。この状況では、相手プレイヤー（Player 1）が7927チップを持っており、まだアクションを起こしていない（current_turn: 0で、あなたのIDが0、Dealer Buttonが1なので、あなたが最初にアクションを起こす番です）ことを考慮すると、少し攻撃的にプレイする価値があります。K9s（キングとナインのスーテッド、つまり同じマーク）は、フロップ（Flop - 最初の3枚のコミュニティカード）で良いハンドになる可能性を秘めています。レイズ（Raise）することで、相手をプレッシャーにかけ、ポットを大きくし、あるいは相手にフォールド（Fold - 降りる）させることを狙います。ミニマムレイズは40なので、それに基づいてアクションを決定しました。"\n}\n```'
2025-10-31 19:06:19,021 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:06:19,021 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 40,\n  "reasoning": "プリフロップ（Preflop）で、あなたはK♠9♦というハンドを持っています。これは、エース（A）やキング（K）のような強いカードと、それほど強くないカードの組み合わせです。現在のポットは50で、あなたのベットは20です。コール（Call）するには0を支払う必要があり、これはあなたがすでにベットした金額と同額か、あるいは相手のベット額より低いことを意味します。この状況では、相手プレイヤー（Player 1）が7927チップを持っており、まだアクションを起こしていない（current_turn: 0で、あなたのIDが0、Dealer Buttonが1なので、あなたが最初にアクションを起こす番です）ことを考慮すると、少し攻撃的にプレイする価値があります。K9s（キングとナインのスーテッド、つまり同じマーク）は、フロップ（Flop - 最初の3枚のコミュニティカード）で良いハンドになる可能性を秘めています。レイズ（Raise）することで、相手をプレッシャーにかけ、ポットを大きくし、あるいは相手にフォールド（Fold - 降りる）させることを狙います。ミニマムレイズは40なので、それに基づいてアクションを決定しました。"\n}'
2025-10-31 19:06:19,021 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "raise",
  "amount": 40,
  "reasoning": "プリフロップ（Preflop）で、あなたはK♠9♦というハンドを持っています。これは、エース（A）やキング（K）のような強いカードと、それほど強くないカードの組み合わせです。現在のポットは50で、あなたのベットは20です。コール（Call）するには0を支払う必要があり、これはあなたがすでにベットした金額と同額か、あるいは相手のベット額より低いことを意味します。この状況では、相手プレイヤー（Player 1）が7927チップを持っており、まだアクションを起こしていない（current_turn: 0で、あなたのIDが0、Dealer Buttonが1なので、あなたが最初にアクションを起こす番です）ことを考慮すると、少し攻撃的にプレイする価値があります。K9s（キングとナインのスーテッド、つまり同じマーク）は、フロップ（Flop - 最初の3枚のコミュニティカード）で良いハンドになる可能性を秘めています。レイズ（Raise）することで、相手をプレッシャーにかけ、ポットを大きくし、あるいは相手にフォールド（Fold - 降りる）させることを狙います。ミニマムレイズは40なので、それに基づいてアクションを決定しました。"
}
2025-10-31 19:06:19,022 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'raise', 'amount': 40, 'reasoning': 'プリフロップ（Preflop）で、あなたはK♠9♦というハンドを持っています。これは、エース（A）やキング（K）のような強いカードと、それほど強くないカードの組み合わせです。現在のポットは50で、あなたのベットは20です。コール（Call）するには0を支払う必要があり、これはあなたがすでにベットした金額と同額か、あるいは相手のベット額より低いことを意味します。この状況では、相手プレイヤー（Player 1）が7927チップを持っており、まだアクションを起こしていない（current_turn: 0で、あなたのIDが0、Dealer Buttonが1なので、あなたが最初にアクションを起こす番です）ことを考慮すると、少し攻撃的にプレイする価値があります。K9s（キングとナインのスーテッド、つまり同じマーク）は、フロップ（Flop - 最初の3枚のコミュニティカード）で良いハンドになる可能性を秘めています。レイズ（Raise）することで、相手をプレッシャーにかけ、ポットを大きくし、あるいは相手にフォールド（Fold - 降りる）させることを狙います。ミニマムレイズは40なので、それに基づいてアクションを決定しました。'}
2025-10-31 19:06:19,022 - poker_game - DEBUG - [Agent0] Extracted values - action: 'raise', amount: 40
2025-10-31 19:06:19,022 - poker_game - DEBUG - [Agent0] Processing raise action - available actions: ['fold', 'check', 'raise (min 40)', 'all-in (252)']
2025-10-31 19:06:19,022 - poker_game - DEBUG - [Agent0] Minimum raise amount extracted from 'raise (min 40)': 40
2025-10-31 19:06:19,022 - poker_game - DEBUG - [Agent0] Raise amount 40 is valid (min: 40)
2025-10-31 19:06:19,022 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'raise', 'amount': 40}
2025-10-31 19:06:19,022 - poker_game - INFO - [Agent0] Successfully parsed decision: raise, 40, プリフロップ（Preflop）で、あなたはK♠9♦というハンドを持っています。これは、エース（A）やキング（K）のような強いカードと、それほど強くないカードの組み合わせです。現在のポットは50で、あなたのベットは20です。コール（Call）するには0を支払う必要があり、これはあなたがすでにベットした金額と同額か、あるいは相手のベット額より低いことを意味します。この状況では、相手プレイヤー（Player 1）が7927チップを持っており、まだアクションを起こしていない（current_turn: 0で、あなたのIDが0、Dealer Buttonが1なので、あなたが最初にアクションを起こす番です）ことを考慮すると、少し攻撃的にプレイする価値があります。K9s（キングとナインのスーテッド、つまり同じマーク）は、フロップ（Flop - 最初の3枚のコミュニティカード）で良いハンドになる可能性を秘めています。レイズ（Raise）することで、相手をプレッシャーにかけ、ポットを大きくし、あるいは相手にフォールド（Fold - 降りる）させることを狙います。ミニマムレイズは40なので、それに基づいてアクションを決定しました。
2025-10-31 19:06:19,023 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'raise' with amount 40
2025-10-31 19:06:19,023 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:19,023 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:19,024 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:06:19,024 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:06:19,024 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:19,024 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:19,024 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:19,024 - poker_game - INFO - Community cards: []
2025-10-31 19:06:19,025 - poker_game - INFO -   P0(Agent0): chips=252, bet=20, status=active
2025-10-31 19:06:19,025 - poker_game - INFO -   P1(Agent1): chips=7927, bet=20, status=active
2025-10-31 19:06:19,025 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:19,025 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=folded
2025-10-31 19:06:19,025 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:19,025 - poker_game - INFO - ==================================================
2025-10-31 19:06:19,026 - poker_game - INFO - ACTION_EXECUTED: Player 0 raised to 60
2025-10-31 19:06:19,034 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:19,034 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:19,034 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:06:19,035 - poker_game - INFO - Pot: 90, Current bet: 60
2025-10-31 19:06:19,035 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:19,035 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:19,035 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:19,035 - poker_game - INFO - Community cards: []
2025-10-31 19:06:19,035 - poker_game - INFO -   P0(Agent0): chips=212, bet=60, status=active
2025-10-31 19:06:19,036 - poker_game - INFO -   P1(Agent1): chips=7927, bet=20, status=active
2025-10-31 19:06:19,036 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:19,037 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=folded
2025-10-31 19:06:19,038 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:19,039 - poker_game - INFO - Extra: Action: Player 0 raised to 60
2025-10-31 19:06:19,039 - poker_game - INFO - ==================================================
2025-10-31 19:06:19,039 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:19,039 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:19,039 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 19:06:19,040 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:06:19,040 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:19,040 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:19,040 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:19,040 - poker_game - DEBUG - Player bets: [60, 20], Current bet: 60, All same: False
2025-10-31 19:06:19,040 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:06:19,040 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:19,040 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:19,041 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:19,041 - poker_game - INFO - Pot: 90, Current bet: 60
2025-10-31 19:06:19,041 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:19,041 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:19,041 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:19,041 - poker_game - INFO - Community cards: []
2025-10-31 19:06:19,041 - poker_game - INFO -   P0(Agent0): chips=212, bet=60, status=active
2025-10-31 19:06:19,042 - poker_game - INFO -   P1(Agent1): chips=7927, bet=20, status=active
2025-10-31 19:06:19,042 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:19,042 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=folded
2025-10-31 19:06:19,042 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:19,042 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:19,043 - poker_game - INFO - ==================================================
2025-10-31 19:06:19,144 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "2♠",
    "Q♣"
  ],
  "community": [],
  "your_chips": 7927,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 90,
  "to_call": 40,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 212,
      "bet": 60,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 10,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (40)",
    "raise (min 80)",
    "all-in (7927)"
  ],
  "history": [
    "Player 0 checked",
    "Player 1 checked",
    "River dealt: Q♣",
    "Player 4 went all-in with 611",
    "Player 0 called 611",
    "Player 1 called 611",
    "Showdown: Player 0 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, J♠ cards=3♣, J♠",
    "Showdown: Player 1 hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣ cards=K♣, 10♥",
    "Showdown: Player 4 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, 9♥ cards=6♣, 5♣",
    "Side pot layer 0: amount=2013, winners=1 best_hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 3 won 30",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 0 raised to 60"
  ]
}
2025-10-31 19:06:19,155 - poker_game - DEBUG - Create Session: {'id': 'd337be55-f9a9-446c-8ca8-e5668ab73eab', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905179.1533651}
2025-10-31 19:06:21,833 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 150,\n  "reasoning": "プリフロップでQ2オフスーツは弱いハンドです。しかし、ポットが大きく、相手のベットもそれほど大きくないため、様子を見る（チェック）か、コールするのが一般的です。しかし、過去の履歴を見ると、相手（Player 0）は積極的にプレイする傾向があり、ブラフも仕掛ける可能性があります。ここでは、相手のベット額（60）の2.5倍程度にレイズすることで、相手にプレッシャーをかけ、より強いハンドを持っていることを示唆します。もし相手がコールしてきた場合でも、フロップ以降の展開で勝負できる可能性を残します。レイズ額は、相手のベット額60に対して、最低80まで上げる必要があるため、それより少し高めの150に設定しました。これは、相手にポットオッズ（ポットの大きさに対するベット額の比率）を悪くさせ、コールしにくくするためです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 224, 'promptTokenCount': 896, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 896}], 'totalTokenCount': 1120}, 'invocationId': 'e-1d981cac-cd1e-426e-9334-96fef6455ecb', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'f2yMWytm', 'timestamp': 1761905179.16565}]
2025-10-31 19:06:21,833 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:06:21,833 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 150,
  "reasoning": "プリフロップでQ2オフスーツは弱いハンドです。しかし、ポットが大きく、相手のベットもそれほど大きくないため、様子を見る（チェック）か、コールするのが一般的です。しかし、過去の履歴を見ると、相手（Player 0）は積極的にプレイする傾向があり、ブラフも仕掛ける可能性があります。ここでは、相手のベット額（60）の2.5倍程度にレイズすることで、相手にプレッシャーをかけ、より強いハンドを持っていることを示唆します。もし相手がコールしてきた場合でも、フロップ以降の展開で勝負できる可能性を残します。レイズ額は、相手のベット額60に対して、最低80まで上げる必要があるため、それより少し高めの150に設定しました。これは、相手にポットオッズ（ポットの大きさに対するベット額の比率）を悪くさせ、コールしにくくするためです。"
}
```
2025-10-31 19:06:21,833 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:06:21,833 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 150,\n  "reasoning": "プリフロップでQ2オフスーツは弱いハンドです。しかし、ポットが大きく、相手のベットもそれほど大きくないため、様子を見る（チェック）か、コールするのが一般的です。しかし、過去の履歴を見ると、相手（Player 0）は積極的にプレイする傾向があり、ブラフも仕掛ける可能性があります。ここでは、相手のベット額（60）の2.5倍程度にレイズすることで、相手にプレッシャーをかけ、より強いハンドを持っていることを示唆します。もし相手がコールしてきた場合でも、フロップ以降の展開で勝負できる可能性を残します。レイズ額は、相手のベット額60に対して、最低80まで上げる必要があるため、それより少し高めの150に設定しました。これは、相手にポットオッズ（ポットの大きさに対するベット額の比率）を悪くさせ、コールしにくくするためです。"\n}\n```'
2025-10-31 19:06:21,833 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:06:21,833 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 150,\n  "reasoning": "プリフロップでQ2オフスーツは弱いハンドです。しかし、ポットが大きく、相手のベットもそれほど大きくないため、様子を見る（チェック）か、コールするのが一般的です。しかし、過去の履歴を見ると、相手（Player 0）は積極的にプレイする傾向があり、ブラフも仕掛ける可能性があります。ここでは、相手のベット額（60）の2.5倍程度にレイズすることで、相手にプレッシャーをかけ、より強いハンドを持っていることを示唆します。もし相手がコールしてきた場合でも、フロップ以降の展開で勝負できる可能性を残します。レイズ額は、相手のベット額60に対して、最低80まで上げる必要があるため、それより少し高めの150に設定しました。これは、相手にポットオッズ（ポットの大きさに対するベット額の比率）を悪くさせ、コールしにくくするためです。"\n}'
2025-10-31 19:06:21,834 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "raise",
  "amount": 150,
  "reasoning": "プリフロップでQ2オフスーツは弱いハンドです。しかし、ポットが大きく、相手のベットもそれほど大きくないため、様子を見る（チェック）か、コールするのが一般的です。しかし、過去の履歴を見ると、相手（Player 0）は積極的にプレイする傾向があり、ブラフも仕掛ける可能性があります。ここでは、相手のベット額（60）の2.5倍程度にレイズすることで、相手にプレッシャーをかけ、より強いハンドを持っていることを示唆します。もし相手がコールしてきた場合でも、フロップ以降の展開で勝負できる可能性を残します。レイズ額は、相手のベット額60に対して、最低80まで上げる必要があるため、それより少し高めの150に設定しました。これは、相手にポットオッズ（ポットの大きさに対するベット額の比率）を悪くさせ、コールしにくくするためです。"
}
2025-10-31 19:06:21,834 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'raise', 'amount': 150, 'reasoning': 'プリフロップでQ2オフスーツは弱いハンドです。しかし、ポットが大きく、相手のベットもそれほど大きくないため、様子を見る（チェック）か、コールするのが一般的です。しかし、過去の履歴を見ると、相手（Player 0）は積極的にプレイする傾向があり、ブラフも仕掛ける可能性があります。ここでは、相手のベット額（60）の2.5倍程度にレイズすることで、相手にプレッシャーをかけ、より強いハンドを持っていることを示唆します。もし相手がコールしてきた場合でも、フロップ以降の展開で勝負できる可能性を残します。レイズ額は、相手のベット額60に対して、最低80まで上げる必要があるため、それより少し高めの150に設定しました。これは、相手にポットオッズ（ポットの大きさに対するベット額の比率）を悪くさせ、コールしにくくするためです。'}
2025-10-31 19:06:21,834 - poker_game - DEBUG - [Agent1] Extracted values - action: 'raise', amount: 150
2025-10-31 19:06:21,834 - poker_game - DEBUG - [Agent1] Processing raise action - available actions: ['fold', 'call (40)', 'raise (min 80)', 'all-in (7927)']
2025-10-31 19:06:21,834 - poker_game - DEBUG - [Agent1] Minimum raise amount extracted from 'raise (min 80)': 80
2025-10-31 19:06:21,834 - poker_game - DEBUG - [Agent1] Raise amount 150 is valid (min: 80)
2025-10-31 19:06:21,834 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'raise', 'amount': 150}
2025-10-31 19:06:21,834 - poker_game - INFO - [Agent1] Successfully parsed decision: raise, 150, プリフロップでQ2オフスーツは弱いハンドです。しかし、ポットが大きく、相手のベットもそれほど大きくないため、様子を見る（チェック）か、コールするのが一般的です。しかし、過去の履歴を見ると、相手（Player 0）は積極的にプレイする傾向があり、ブラフも仕掛ける可能性があります。ここでは、相手のベット額（60）の2.5倍程度にレイズすることで、相手にプレッシャーをかけ、より強いハンドを持っていることを示唆します。もし相手がコールしてきた場合でも、フロップ以降の展開で勝負できる可能性を残します。レイズ額は、相手のベット額60に対して、最低80まで上げる必要があるため、それより少し高めの150に設定しました。これは、相手にポットオッズ（ポットの大きさに対するベット額の比率）を悪くさせ、コールしにくくするためです。
2025-10-31 19:06:21,835 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'raise' with amount 150
2025-10-31 19:06:21,835 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:21,835 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:21,836 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:21,836 - poker_game - INFO - Pot: 90, Current bet: 60
2025-10-31 19:06:21,836 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:21,836 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:21,836 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:21,836 - poker_game - INFO - Community cards: []
2025-10-31 19:06:21,837 - poker_game - INFO -   P0(Agent0): chips=212, bet=60, status=active
2025-10-31 19:06:21,837 - poker_game - INFO -   P1(Agent1): chips=7927, bet=20, status=active
2025-10-31 19:06:21,837 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:21,837 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=folded
2025-10-31 19:06:21,837 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:21,837 - poker_game - INFO - ==================================================
2025-10-31 19:06:21,838 - poker_game - INFO - ACTION_EXECUTED: Player 1 raised to 210
2025-10-31 19:06:21,857 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:21,857 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:21,858 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:21,858 - poker_game - INFO - Pot: 280, Current bet: 210
2025-10-31 19:06:21,858 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:21,858 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:21,858 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:21,858 - poker_game - INFO - Community cards: []
2025-10-31 19:06:21,858 - poker_game - INFO -   P0(Agent0): chips=212, bet=60, status=active
2025-10-31 19:06:21,858 - poker_game - INFO -   P1(Agent1): chips=7737, bet=210, status=active
2025-10-31 19:06:21,858 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:21,859 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=folded
2025-10-31 19:06:21,859 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:21,859 - poker_game - INFO - Extra: Action: Player 1 raised to 210
2025-10-31 19:06:21,859 - poker_game - INFO - ==================================================
2025-10-31 19:06:21,859 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:21,859 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:21,859 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 19:06:21,860 - poker_game - INFO - Advanced from player 1 to player 0 (seat order)
2025-10-31 19:06:21,860 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:21,860 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:21,860 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:21,860 - poker_game - DEBUG - Player bets: [60, 210], Current bet: 210, All same: False
2025-10-31 19:06:21,860 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:06:21,860 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:21,860 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:21,860 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:06:21,861 - poker_game - INFO - Pot: 280, Current bet: 210
2025-10-31 19:06:21,861 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:21,861 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:21,861 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:21,861 - poker_game - INFO - Community cards: []
2025-10-31 19:06:21,861 - poker_game - INFO -   P0(Agent0): chips=212, bet=60, status=active
2025-10-31 19:06:21,861 - poker_game - INFO -   P1(Agent1): chips=7737, bet=210, status=active
2025-10-31 19:06:21,861 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:21,862 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=folded
2025-10-31 19:06:21,862 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:21,862 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:21,862 - poker_game - INFO - ==================================================
2025-10-31 19:06:21,964 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "K♠",
    "9♦"
  ],
  "community": [],
  "your_chips": 212,
  "your_bet_this_round": 60,
  "your_total_bet_this_hand": 60,
  "pot": 280,
  "to_call": 150,
  "dealer_button": 1,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 7737,
      "bet": 210,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 10,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (150)",
    "all-in (212)"
  ],
  "history": [
    "Player 1 checked",
    "River dealt: Q♣",
    "Player 4 went all-in with 611",
    "Player 0 called 611",
    "Player 1 called 611",
    "Showdown: Player 0 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, J♠ cards=3♣, J♠",
    "Showdown: Player 1 hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣ cards=K♣, 10♥",
    "Showdown: Player 4 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, 9♥ cards=6♣, 5♣",
    "Side pot layer 0: amount=2013, winners=1 best_hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 3 won 30",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 0 raised to 60",
    "Player 1 raised to 210"
  ]
}
2025-10-31 19:06:21,975 - poker_game - DEBUG - Create Session: {'id': 'aae92c8a-d7fe-44b2-b7bb-77e04ab940d4', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905181.9737608}
2025-10-31 19:06:24,118 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 150,\n  "reasoning": "プリフロップでK9オフスート（K♠9♦）は、インプルーブメントの可能性を秘めたミドルレンジのハンドです。現在のベット額（150）は、ポットサイズ（280）に対してコールが比較的有利であり、相手のレイズ額（210）もそこまで大きくないため、フロップを見て戦う価値があると判断しました。相手が1人だけアクティブで、過去の履歴からアグレッシブなプレイヤーではない（チェックやフォールドが多い）ことも考慮しました。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 150, 'promptTokenCount': 894, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 894}], 'totalTokenCount': 1044}, 'invocationId': 'e-bf33f9aa-92dc-46c9-a1fe-05e7de9982d8', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'OO7hbDDh', 'timestamp': 1761905181.984386}]
2025-10-31 19:06:24,119 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:06:24,119 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 150,
  "reasoning": "プリフロップでK9オフスート（K♠9♦）は、インプルーブメントの可能性を秘めたミドルレンジのハンドです。現在のベット額（150）は、ポットサイズ（280）に対してコールが比較的有利であり、相手のレイズ額（210）もそこまで大きくないため、フロップを見て戦う価値があると判断しました。相手が1人だけアクティブで、過去の履歴からアグレッシブなプレイヤーではない（チェックやフォールドが多い）ことも考慮しました。"
}
```
2025-10-31 19:06:24,119 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:06:24,119 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 150,\n  "reasoning": "プリフロップでK9オフスート（K♠9♦）は、インプルーブメントの可能性を秘めたミドルレンジのハンドです。現在のベット額（150）は、ポットサイズ（280）に対してコールが比較的有利であり、相手のレイズ額（210）もそこまで大きくないため、フロップを見て戦う価値があると判断しました。相手が1人だけアクティブで、過去の履歴からアグレッシブなプレイヤーではない（チェックやフォールドが多い）ことも考慮しました。"\n}\n```'
2025-10-31 19:06:24,119 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:06:24,120 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 150,\n  "reasoning": "プリフロップでK9オフスート（K♠9♦）は、インプルーブメントの可能性を秘めたミドルレンジのハンドです。現在のベット額（150）は、ポットサイズ（280）に対してコールが比較的有利であり、相手のレイズ額（210）もそこまで大きくないため、フロップを見て戦う価値があると判断しました。相手が1人だけアクティブで、過去の履歴からアグレッシブなプレイヤーではない（チェックやフォールドが多い）ことも考慮しました。"\n}'
2025-10-31 19:06:24,120 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 150,
  "reasoning": "プリフロップでK9オフスート（K♠9♦）は、インプルーブメントの可能性を秘めたミドルレンジのハンドです。現在のベット額（150）は、ポットサイズ（280）に対してコールが比較的有利であり、相手のレイズ額（210）もそこまで大きくないため、フロップを見て戦う価値があると判断しました。相手が1人だけアクティブで、過去の履歴からアグレッシブなプレイヤーではない（チェックやフォールドが多い）ことも考慮しました。"
}
2025-10-31 19:06:24,120 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 150, 'reasoning': 'プリフロップでK9オフスート（K♠9♦）は、インプルーブメントの可能性を秘めたミドルレンジのハンドです。現在のベット額（150）は、ポットサイズ（280）に対してコールが比較的有利であり、相手のレイズ額（210）もそこまで大きくないため、フロップを見て戦う価値があると判断しました。相手が1人だけアクティブで、過去の履歴からアグレッシブなプレイヤーではない（チェックやフォールドが多い）ことも考慮しました。'}
2025-10-31 19:06:24,120 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 150
2025-10-31 19:06:24,120 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (150)', 'all-in (212)']
2025-10-31 19:06:24,120 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (150)': 150
2025-10-31 19:06:24,120 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 150}
2025-10-31 19:06:24,120 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 150, プリフロップでK9オフスート（K♠9♦）は、インプルーブメントの可能性を秘めたミドルレンジのハンドです。現在のベット額（150）は、ポットサイズ（280）に対してコールが比較的有利であり、相手のレイズ額（210）もそこまで大きくないため、フロップを見て戦う価値があると判断しました。相手が1人だけアクティブで、過去の履歴からアグレッシブなプレイヤーではない（チェックやフォールドが多い）ことも考慮しました。
2025-10-31 19:06:24,121 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 150
2025-10-31 19:06:24,122 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:24,122 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:24,122 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:06:24,122 - poker_game - INFO - Pot: 280, Current bet: 210
2025-10-31 19:06:24,122 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:24,122 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:24,122 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:24,122 - poker_game - INFO - Community cards: []
2025-10-31 19:06:24,122 - poker_game - INFO -   P0(Agent0): chips=212, bet=60, status=active
2025-10-31 19:06:24,123 - poker_game - INFO -   P1(Agent1): chips=7737, bet=210, status=active
2025-10-31 19:06:24,123 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:24,123 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=folded
2025-10-31 19:06:24,123 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:24,123 - poker_game - INFO - ==================================================
2025-10-31 19:06:24,123 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 150
2025-10-31 19:06:24,134 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:24,134 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:24,135 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:06:24,135 - poker_game - INFO - Pot: 430, Current bet: 210
2025-10-31 19:06:24,135 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:24,135 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:24,135 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:24,136 - poker_game - INFO - Community cards: []
2025-10-31 19:06:24,136 - poker_game - INFO -   P0(Agent0): chips=62, bet=210, status=active
2025-10-31 19:06:24,136 - poker_game - INFO -   P1(Agent1): chips=7737, bet=210, status=active
2025-10-31 19:06:24,136 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:24,136 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=folded
2025-10-31 19:06:24,136 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:24,137 - poker_game - INFO - Extra: Action: Player 0 called 150
2025-10-31 19:06:24,137 - poker_game - INFO - ==================================================
2025-10-31 19:06:24,137 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:24,137 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:24,137 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 19:06:24,137 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:06:24,138 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:24,138 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:24,138 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:24,138 - poker_game - DEBUG - Player bets: [210, 210], Current bet: 210, All same: True
2025-10-31 19:06:24,138 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 19:06:24,138 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:24,139 - poker_game - INFO - Hand #24, Phase: preflop
2025-10-31 19:06:24,139 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:24,141 - poker_game - INFO - Pot: 430, Current bet: 210
2025-10-31 19:06:24,141 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:24,141 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:24,141 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:24,142 - poker_game - INFO - Community cards: []
2025-10-31 19:06:24,142 - poker_game - INFO -   P0(Agent0): chips=62, bet=210, status=active
2025-10-31 19:06:24,143 - poker_game - INFO -   P1(Agent1): chips=7737, bet=210, status=active
2025-10-31 19:06:24,145 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:24,146 - poker_game - INFO -   P3(Agent3): chips=1771, bet=10, status=folded
2025-10-31 19:06:24,146 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:24,146 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:06:24,146 - poker_game - INFO - ==================================================
2025-10-31 19:06:24,247 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 19:06:24,247 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:24,248 - poker_game - INFO - Remaining players: 2
2025-10-31 19:06:24,248 - poker_game - DEBUG -   Remaining P0: Agent0, status: active
2025-10-31 19:06:24,248 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:06:24,248 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 19:06:24,256 - poker_game - INFO - Starting new betting round
2025-10-31 19:06:24,257 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:06:24,257 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:06:24,257 - poker_game - DEBUG - Active players for new betting round: [0, 1]
2025-10-31 19:06:24,258 - poker_game - DEBUG - Dealer button: 1
2025-10-31 19:06:24,258 - poker_game - INFO - First actor: Player 0 (by phase rule), was 1
2025-10-31 19:06:24,258 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:06:24,258 - poker_game - INFO - Hand #24, Phase: flop
2025-10-31 19:06:24,259 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:06:24,259 - poker_game - INFO - Pot: 430, Current bet: 0
2025-10-31 19:06:24,259 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:24,260 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:24,260 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:24,261 - poker_game - INFO - Community cards: ['10♠', '9♠', '7♣']
2025-10-31 19:06:24,262 - poker_game - INFO -   P0(Agent0): chips=62, bet=0, status=active
2025-10-31 19:06:24,262 - poker_game - INFO -   P1(Agent1): chips=7737, bet=0, status=active
2025-10-31 19:06:24,262 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:24,263 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:24,263 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:24,264 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 19:06:24,265 - poker_game - INFO - ==================================================
2025-10-31 19:06:24,267 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "flop",
  "your_cards": [
    "K♠",
    "9♦"
  ],
  "community": [
    "10♠",
    "9♠",
    "7♣"
  ],
  "your_chips": 62,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 210,
  "pot": 430,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 7737,
      "bet": 0,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (62)"
  ],
  "history": [
    "Player 4 went all-in with 611",
    "Player 0 called 611",
    "Player 1 called 611",
    "Showdown: Player 0 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, J♠ cards=3♣, J♠",
    "Showdown: Player 1 hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣ cards=K♣, 10♥",
    "Showdown: Player 4 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, 9♥ cards=6♣, 5♣",
    "Side pot layer 0: amount=2013, winners=1 best_hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 3 won 30",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 0 raised to 60",
    "Player 1 raised to 210",
    "Player 0 called 150",
    "Flop dealt: 10♠, 9♠, 7♣"
  ]
}
2025-10-31 19:06:24,278 - poker_game - DEBUG - Create Session: {'id': '39fe8e9b-a538-4f12-b32a-0715c2a1f14d', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905184.2762067}
2025-10-31 19:06:25,897 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 210,\n  "reasoning": "フロップでツーペア（Kと9）が完成しました。これは強いハンドなので、レイズしてポットを大きくし、相手にプレッシャーをかけます。相手のスタックも十分にあるため、オールインするほどの強さはないと判断しました。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 89, 'promptTokenCount': 929, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 929}], 'totalTokenCount': 1018}, 'invocationId': 'e-13db23c0-c4aa-4b71-9bba-edeade7a4998', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'cf9JwcMI', 'timestamp': 1761905184.288511}]
2025-10-31 19:06:25,897 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:06:25,897 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 210,
  "reasoning": "フロップでツーペア（Kと9）が完成しました。これは強いハンドなので、レイズしてポットを大きくし、相手にプレッシャーをかけます。相手のスタックも十分にあるため、オールインするほどの強さはないと判断しました。"
}
```
2025-10-31 19:06:25,897 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:06:25,897 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 210,\n  "reasoning": "フロップでツーペア（Kと9）が完成しました。これは強いハンドなので、レイズしてポットを大きくし、相手にプレッシャーをかけます。相手のスタックも十分にあるため、オールインするほどの強さはないと判断しました。"\n}\n```'
2025-10-31 19:06:25,898 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:06:25,898 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 210,\n  "reasoning": "フロップでツーペア（Kと9）が完成しました。これは強いハンドなので、レイズしてポットを大きくし、相手にプレッシャーをかけます。相手のスタックも十分にあるため、オールインするほどの強さはないと判断しました。"\n}'
2025-10-31 19:06:25,898 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "raise",
  "amount": 210,
  "reasoning": "フロップでツーペア（Kと9）が完成しました。これは強いハンドなので、レイズしてポットを大きくし、相手にプレッシャーをかけます。相手のスタックも十分にあるため、オールインするほどの強さはないと判断しました。"
}
2025-10-31 19:06:25,898 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'raise', 'amount': 210, 'reasoning': 'フロップでツーペア（Kと9）が完成しました。これは強いハンドなので、レイズしてポットを大きくし、相手にプレッシャーをかけます。相手のスタックも十分にあるため、オールインするほどの強さはないと判断しました。'}
2025-10-31 19:06:25,898 - poker_game - DEBUG - [Agent0] Extracted values - action: 'raise', amount: 210
2025-10-31 19:06:25,898 - poker_game - DEBUG - [Agent0] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (62)']
2025-10-31 19:06:25,898 - poker_game - DEBUG - [Agent0] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 19:06:25,898 - poker_game - DEBUG - [Agent0] Raise amount 210 is valid (min: 20)
2025-10-31 19:06:25,898 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'raise', 'amount': 210}
2025-10-31 19:06:25,899 - poker_game - INFO - [Agent0] Successfully parsed decision: raise, 210, フロップでツーペア（Kと9）が完成しました。これは強いハンドなので、レイズしてポットを大きくし、相手にプレッシャーをかけます。相手のスタックも十分にあるため、オールインするほどの強さはないと判断しました。
2025-10-31 19:06:25,899 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'raise' with amount 210
2025-10-31 19:06:25,899 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:25,900 - poker_game - INFO - Hand #24, Phase: flop
2025-10-31 19:06:25,900 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:06:25,900 - poker_game - INFO - Pot: 430, Current bet: 0
2025-10-31 19:06:25,900 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:25,900 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:25,900 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:25,901 - poker_game - INFO - Community cards: ['10♠', '9♠', '7♣']
2025-10-31 19:06:25,901 - poker_game - INFO -   P0(Agent0): chips=62, bet=0, status=active
2025-10-31 19:06:25,901 - poker_game - INFO -   P1(Agent1): chips=7737, bet=0, status=active
2025-10-31 19:06:25,901 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:25,901 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:25,902 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:25,902 - poker_game - INFO - ==================================================
2025-10-31 19:06:25,902 - poker_game - WARNING - Player 0 cannot raise - needs 210, has 62
2025-10-31 19:06:25,902 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 19:06:25,903 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:25,903 - poker_game - INFO - Hand #24, Phase: flop
2025-10-31 19:06:25,903 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:06:25,903 - poker_game - INFO - Pot: 430, Current bet: 0
2025-10-31 19:06:25,903 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:25,903 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:25,904 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:25,904 - poker_game - INFO - Community cards: ['10♠', '9♠', '7♣']
2025-10-31 19:06:25,904 - poker_game - INFO -   P0(Agent0): chips=62, bet=0, status=active
2025-10-31 19:06:25,904 - poker_game - INFO -   P1(Agent1): chips=7737, bet=0, status=active
2025-10-31 19:06:25,904 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:25,905 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:25,905 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:25,905 - poker_game - INFO - ==================================================
2025-10-31 19:06:25,905 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 19:06:25,930 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:25,930 - poker_game - INFO - Hand #24, Phase: flop
2025-10-31 19:06:25,931 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:06:25,931 - poker_game - INFO - Pot: 430, Current bet: 0
2025-10-31 19:06:25,931 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:25,931 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:25,931 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:06:25,932 - poker_game - INFO - Community cards: ['10♠', '9♠', '7♣']
2025-10-31 19:06:25,932 - poker_game - INFO -   P0(Agent0): chips=62, bet=0, status=folded
2025-10-31 19:06:25,932 - poker_game - INFO -   P1(Agent1): chips=7737, bet=0, status=active
2025-10-31 19:06:25,932 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:25,932 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:25,932 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:25,933 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 19:06:25,933 - poker_game - INFO - ==================================================
2025-10-31 19:06:25,933 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:25,933 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:25,933 - poker_game - DEBUG - Active players: [1]
2025-10-31 19:06:25,933 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:06:25,933 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:25,934 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:25,934 - poker_game - DEBUG - Active: 1, All-in: 0
2025-10-31 19:06:25,934 - poker_game - INFO - Betting complete: Only 1 or fewer players remaining
2025-10-31 19:06:25,934 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:25,934 - poker_game - INFO - Hand #24, Phase: flop
2025-10-31 19:06:25,934 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:25,935 - poker_game - INFO - Pot: 430, Current bet: 0
2025-10-31 19:06:25,935 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:25,935 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:25,935 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:06:25,935 - poker_game - INFO - Community cards: ['10♠', '9♠', '7♣']
2025-10-31 19:06:25,936 - poker_game - INFO -   P0(Agent0): chips=62, bet=0, status=folded
2025-10-31 19:06:25,936 - poker_game - INFO -   P1(Agent1): chips=7737, bet=0, status=active
2025-10-31 19:06:25,936 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:25,936 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:25,936 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:25,937 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:06:25,937 - poker_game - INFO - ==================================================
2025-10-31 19:06:26,038 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 19:06:26,039 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:26,039 - poker_game - INFO - Remaining players: 1
2025-10-31 19:06:26,039 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:06:26,040 - poker_game - INFO - Going to SHOWDOWN - only 1 or fewer players remaining
2025-10-31 19:06:26,040 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 19:06:26,040 - poker_game - INFO - Hand #24, Phase: showdown
2025-10-31 19:06:26,040 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:26,040 - poker_game - INFO - Pot: 430, Current bet: 0
2025-10-31 19:06:26,041 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:26,041 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:26,041 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:06:26,042 - poker_game - INFO - Community cards: ['10♠', '9♠', '7♣']
2025-10-31 19:06:26,042 - poker_game - INFO -   P0(Agent0): chips=62, bet=0, status=folded
2025-10-31 19:06:26,042 - poker_game - INFO -   P1(Agent1): chips=7737, bet=0, status=active
2025-10-31 19:06:26,043 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:26,043 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:26,043 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:26,043 - poker_game - INFO - ==================================================
2025-10-31 19:06:26,044 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 19:06:26,044 - poker_game - INFO - Pot: 430, Community cards: ['10♠', '9♠', '7♣']
2025-10-31 19:06:26,044 - poker_game - INFO -   Player 1 status=active cards=['2♠', 'Q♣']
2025-10-31 19:06:26,045 - poker_game - INFO - Showdown winner by default: Player 1 awarded 430
2025-10-31 19:06:26,045 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 19:06:26,046 - poker_game - INFO - === STARTING NEW HAND #25 ===
2025-10-31 19:06:26,046 - poker_game - INFO - Active players for new hand: 3
2025-10-31 19:06:26,046 - poker_game - INFO - Moving dealer button
2025-10-31 19:06:26,047 - poker_game - INFO - Posting blinds
2025-10-31 19:06:26,078 - poker_game - INFO - Dealing hole cards
2025-10-31 19:06:26,079 - poker_game - INFO - Setting first actor for preflop
2025-10-31 19:06:26,097 - poker_game - INFO - Started new hand in database: hand_id=25
2025-10-31 19:06:26,098 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 19:06:26,098 - poker_game - INFO - Hand #25, Phase: preflop
2025-10-31 19:06:26,099 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 19:06:26,099 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:26,100 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:26,100 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:26,101 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:26,101 - poker_game - INFO - Community cards: []
2025-10-31 19:06:26,101 - poker_game - INFO -   P0(Agent0): chips=52, bet=10, status=active
2025-10-31 19:06:26,102 - poker_game - INFO -   P1(Agent1): chips=8147, bet=20, status=active
2025-10-31 19:06:26,107 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:26,109 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:06:26,109 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:26,110 - poker_game - INFO - ==================================================
2025-10-31 19:06:26,111 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "2♦",
    "3♥"
  ],
  "community": [],
  "your_chips": 1771,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 3,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 52,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 8147,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1771)"
  ],
  "history": [
    "Showdown: Player 1 hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣ cards=K♣, 10♥",
    "Showdown: Player 4 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, 9♥ cards=6♣, 5♣",
    "Side pot layer 0: amount=2013, winners=1 best_hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 3 won 30",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 0 raised to 60",
    "Player 1 raised to 210",
    "Player 0 called 150",
    "Flop dealt: 10♠, 9♠, 7♣",
    "Player 0 folded",
    "Showdown: Player 1 won 430",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20"
  ]
}
2025-10-31 19:06:26,129 - poker_game - DEBUG - Create Session: {'id': '2acccd92-1fb1-412d-bbb5-bfd8a041327d', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905186.1242626}
2025-10-31 19:06:27,750 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで2♦3♥という非常に弱いハンドを持っているため、フォールドが最善の選択です。ポットにはまだあまりチップが入っておらず、コールするには相手のベット額が大きすぎます。このハンドで勝つ可能性は非常に低いです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 86, 'promptTokenCount': 881, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 881}], 'totalTokenCount': 967}, 'invocationId': 'e-3f362c01-c372-4fe8-a5c2-0e147c3ee38f', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'MWIbYnYu', 'timestamp': 1761905186.141387}]
2025-10-31 19:06:27,751 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:06:27,751 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで2♦3♥という非常に弱いハンドを持っているため、フォールドが最善の選択です。ポットにはまだあまりチップが入っておらず、コールするには相手のベット額が大きすぎます。このハンドで勝つ可能性は非常に低いです。"
}
```
2025-10-31 19:06:27,751 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:06:27,752 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで2♦3♥という非常に弱いハンドを持っているため、フォールドが最善の選択です。ポットにはまだあまりチップが入っておらず、コールするには相手のベット額が大きすぎます。このハンドで勝つ可能性は非常に低いです。"\n}\n```'
2025-10-31 19:06:27,752 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:06:27,752 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップで2♦3♥という非常に弱いハンドを持っているため、フォールドが最善の選択です。ポットにはまだあまりチップが入っておらず、コールするには相手のベット額が大きすぎます。このハンドで勝つ可能性は非常に低いです。"\n}'
2025-10-31 19:06:27,753 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップで2♦3♥という非常に弱いハンドを持っているため、フォールドが最善の選択です。ポットにはまだあまりチップが入っておらず、コールするには相手のベット額が大きすぎます。このハンドで勝つ可能性は非常に低いです。"
}
2025-10-31 19:06:27,753 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップで2♦3♥という非常に弱いハンドを持っているため、フォールドが最善の選択です。ポットにはまだあまりチップが入っておらず、コールするには相手のベット額が大きすぎます。このハンドで勝つ可能性は非常に低いです。'}
2025-10-31 19:06:27,754 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 19:06:27,754 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 19:06:27,754 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:06:27,754 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップで2♦3♥という非常に弱いハンドを持っているため、フォールドが最善の選択です。ポットにはまだあまりチップが入っておらず、コールするには相手のベット額が大きすぎます。このハンドで勝つ可能性は非常に低いです。
2025-10-31 19:06:27,755 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 19:06:27,756 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:27,756 - poker_game - INFO - Hand #25, Phase: preflop
2025-10-31 19:06:27,756 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 19:06:27,758 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:27,758 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:27,758 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:27,759 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:27,759 - poker_game - INFO - Community cards: []
2025-10-31 19:06:27,759 - poker_game - INFO -   P0(Agent0): chips=52, bet=10, status=active
2025-10-31 19:06:27,759 - poker_game - INFO -   P1(Agent1): chips=8147, bet=20, status=active
2025-10-31 19:06:27,760 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:27,760 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=active
2025-10-31 19:06:27,760 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:27,761 - poker_game - INFO - ==================================================
2025-10-31 19:06:27,761 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 19:06:27,775 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:27,775 - poker_game - INFO - Hand #25, Phase: preflop
2025-10-31 19:06:27,776 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 19:06:27,776 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:27,777 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:27,777 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:27,778 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:27,778 - poker_game - INFO - Community cards: []
2025-10-31 19:06:27,778 - poker_game - INFO -   P0(Agent0): chips=52, bet=10, status=active
2025-10-31 19:06:27,779 - poker_game - INFO -   P1(Agent1): chips=8147, bet=20, status=active
2025-10-31 19:06:27,779 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:27,780 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:27,780 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:27,781 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 19:06:27,782 - poker_game - INFO - ==================================================
2025-10-31 19:06:27,782 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:27,782 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:27,782 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 19:06:27,783 - poker_game - INFO - Advanced from player 3 to player 0 (seat order)
2025-10-31 19:06:27,783 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:27,783 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:27,783 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:27,784 - poker_game - DEBUG - Player bets: [10, 20], Current bet: 20, All same: False
2025-10-31 19:06:27,784 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:06:27,784 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:27,784 - poker_game - INFO - Hand #25, Phase: preflop
2025-10-31 19:06:27,784 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:06:27,785 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:27,785 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:27,786 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:27,786 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:27,786 - poker_game - INFO - Community cards: []
2025-10-31 19:06:27,787 - poker_game - INFO -   P0(Agent0): chips=52, bet=10, status=active
2025-10-31 19:06:27,787 - poker_game - INFO -   P1(Agent1): chips=8147, bet=20, status=active
2025-10-31 19:06:27,787 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:27,787 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:27,788 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:27,788 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:27,788 - poker_game - INFO - ==================================================
2025-10-31 19:06:27,897 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "2♣",
    "8♣"
  ],
  "community": [],
  "your_chips": 52,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 30,
  "to_call": 10,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 8147,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1771,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (52)"
  ],
  "history": [
    "Showdown: Player 4 hand=Three of a Kind: Qs - A♠, Q♠, Q♥, Q♣, 9♥ cards=6♣, 5♣",
    "Side pot layer 0: amount=2013, winners=1 best_hand=Three of a Kind: Qs - A♠, K♣, Q♠, Q♥, Q♣",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 3 won 30",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 0 raised to 60",
    "Player 1 raised to 210",
    "Player 0 called 150",
    "Flop dealt: 10♠, 9♠, 7♣",
    "Player 0 folded",
    "Showdown: Player 1 won 430",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded"
  ]
}
2025-10-31 19:06:27,952 - poker_game - DEBUG - Create Session: {'id': 'c5d5c1e3-9aae-4c65-8154-52cb10ff0ca8', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905187.9489744}
2025-10-31 19:06:29,405 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フロップが開く前）で、2♣8♣という弱いハンドを持っています。ポットには30ありますが、コールするには10必要です。このハンドで勝つ確率は低く、レイズするほどの強さもありません。したがって、フォールド（降りる）が最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 100, 'promptTokenCount': 845, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 845}], 'totalTokenCount': 945}, 'invocationId': 'e-83226596-03ec-434f-be50-eca232bb8f1b', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'BkbNenS6', 'timestamp': 1761905187.962839}]
2025-10-31 19:06:29,405 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:06:29,405 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（フロップが開く前）で、2♣8♣という弱いハンドを持っています。ポットには30ありますが、コールするには10必要です。このハンドで勝つ確率は低く、レイズするほどの強さもありません。したがって、フォールド（降りる）が最善の選択です。"
}
```
2025-10-31 19:06:29,406 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:06:29,406 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フロップが開く前）で、2♣8♣という弱いハンドを持っています。ポットには30ありますが、コールするには10必要です。このハンドで勝つ確率は低く、レイズするほどの強さもありません。したがって、フォールド（降りる）が最善の選択です。"\n}\n```'
2025-10-31 19:06:29,406 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:06:29,406 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フロップが開く前）で、2♣8♣という弱いハンドを持っています。ポットには30ありますが、コールするには10必要です。このハンドで勝つ確率は低く、レイズするほどの強さもありません。したがって、フォールド（降りる）が最善の選択です。"\n}'
2025-10-31 19:06:29,406 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（フロップが開く前）で、2♣8♣という弱いハンドを持っています。ポットには30ありますが、コールするには10必要です。このハンドで勝つ確率は低く、レイズするほどの強さもありません。したがって、フォールド（降りる）が最善の選択です。"
}
2025-10-31 19:06:29,406 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（フロップが開く前）で、2♣8♣という弱いハンドを持っています。ポットには30ありますが、コールするには10必要です。このハンドで勝つ確率は低く、レイズするほどの強さもありません。したがって、フォールド（降りる）が最善の選択です。'}
2025-10-31 19:06:29,406 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 19:06:29,406 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 19:06:29,407 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:06:29,407 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップ（フロップが開く前）で、2♣8♣という弱いハンドを持っています。ポットには30ありますが、コールするには10必要です。このハンドで勝つ確率は低く、レイズするほどの強さもありません。したがって、フォールド（降りる）が最善の選択です。
2025-10-31 19:06:29,407 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 19:06:29,408 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:29,408 - poker_game - INFO - Hand #25, Phase: preflop
2025-10-31 19:06:29,408 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:06:29,409 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:29,409 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:29,409 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:29,409 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:29,409 - poker_game - INFO - Community cards: []
2025-10-31 19:06:29,410 - poker_game - INFO -   P0(Agent0): chips=52, bet=10, status=active
2025-10-31 19:06:29,410 - poker_game - INFO -   P1(Agent1): chips=8147, bet=20, status=active
2025-10-31 19:06:29,410 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:29,410 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:29,411 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:29,411 - poker_game - INFO - ==================================================
2025-10-31 19:06:29,411 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 19:06:29,418 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:29,418 - poker_game - INFO - Hand #25, Phase: preflop
2025-10-31 19:06:29,418 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:06:29,419 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:29,419 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:29,419 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:29,420 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:06:29,420 - poker_game - INFO - Community cards: []
2025-10-31 19:06:29,420 - poker_game - INFO -   P0(Agent0): chips=52, bet=10, status=folded
2025-10-31 19:06:29,420 - poker_game - INFO -   P1(Agent1): chips=8147, bet=20, status=active
2025-10-31 19:06:29,421 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:29,421 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:29,421 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:29,422 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 19:06:29,422 - poker_game - INFO - ==================================================
2025-10-31 19:06:29,422 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:29,422 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:29,423 - poker_game - DEBUG - Active players: [1]
2025-10-31 19:06:29,423 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:06:29,423 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:29,423 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:29,424 - poker_game - DEBUG - Active: 1, All-in: 0
2025-10-31 19:06:29,424 - poker_game - INFO - Betting complete: Only 1 or fewer players remaining
2025-10-31 19:06:29,424 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:29,425 - poker_game - INFO - Hand #25, Phase: preflop
2025-10-31 19:06:29,426 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:06:29,426 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:29,427 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:29,428 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:29,429 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:06:29,429 - poker_game - INFO - Community cards: []
2025-10-31 19:06:29,430 - poker_game - INFO -   P0(Agent0): chips=52, bet=10, status=folded
2025-10-31 19:06:29,431 - poker_game - INFO -   P1(Agent1): chips=8147, bet=20, status=active
2025-10-31 19:06:29,431 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:29,432 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:29,432 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:29,433 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:06:29,433 - poker_game - INFO - ==================================================
2025-10-31 19:06:29,535 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 19:06:29,536 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:29,536 - poker_game - INFO - Remaining players: 1
2025-10-31 19:06:29,536 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:06:29,536 - poker_game - INFO - Going to SHOWDOWN - only 1 or fewer players remaining
2025-10-31 19:06:29,537 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 19:06:29,537 - poker_game - INFO - Hand #25, Phase: showdown
2025-10-31 19:06:29,537 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:06:29,538 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:29,538 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:29,538 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:29,539 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:06:29,539 - poker_game - INFO - Community cards: []
2025-10-31 19:06:29,540 - poker_game - INFO -   P0(Agent0): chips=52, bet=10, status=folded
2025-10-31 19:06:29,540 - poker_game - INFO -   P1(Agent1): chips=8147, bet=20, status=active
2025-10-31 19:06:29,540 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:29,541 - poker_game - INFO -   P3(Agent3): chips=1771, bet=0, status=folded
2025-10-31 19:06:29,541 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:29,542 - poker_game - INFO - ==================================================
2025-10-31 19:06:29,542 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 19:06:29,543 - poker_game - INFO - Pot: 30, Community cards: []
2025-10-31 19:06:29,543 - poker_game - INFO -   Player 1 status=active cards=['5♦', '3♠']
2025-10-31 19:06:29,544 - poker_game - INFO - Showdown winner by default: Player 1 awarded 30
2025-10-31 19:06:29,544 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 19:06:29,545 - poker_game - INFO - === STARTING NEW HAND #26 ===
2025-10-31 19:06:29,545 - poker_game - INFO - Active players for new hand: 3
2025-10-31 19:06:29,546 - poker_game - INFO - Moving dealer button
2025-10-31 19:06:29,546 - poker_game - INFO - Posting blinds
2025-10-31 19:06:29,567 - poker_game - INFO - Dealing hole cards
2025-10-31 19:06:29,567 - poker_game - INFO - Setting first actor for preflop
2025-10-31 19:06:29,577 - poker_game - INFO - Started new hand in database: hand_id=26
2025-10-31 19:06:29,578 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 19:06:29,578 - poker_game - INFO - Hand #26, Phase: preflop
2025-10-31 19:06:29,579 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:06:29,579 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:29,579 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:29,580 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:29,580 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:29,581 - poker_game - INFO - Community cards: []
2025-10-31 19:06:29,581 - poker_game - INFO -   P0(Agent0): chips=52, bet=0, status=active
2025-10-31 19:06:29,581 - poker_game - INFO -   P1(Agent1): chips=8167, bet=10, status=active
2025-10-31 19:06:29,582 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:29,582 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:29,582 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:29,583 - poker_game - INFO - ==================================================
2025-10-31 19:06:29,584 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "10♥",
    "J♥"
  ],
  "community": [],
  "your_chips": 52,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 8167,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1751,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (52)"
  ],
  "history": [
    "Player 0 folded",
    "Player 1 folded",
    "Showdown: Player 3 won 30",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 0 raised to 60",
    "Player 1 raised to 210",
    "Player 0 called 150",
    "Flop dealt: 10♠, 9♠, 7♣",
    "Player 0 folded",
    "Showdown: Player 1 won 430",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20"
  ]
}
2025-10-31 19:06:29,596 - poker_game - DEBUG - Create Session: {'id': '91a2254d-3aeb-4539-84ed-b8e4ac93f142', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905189.5940905}
2025-10-31 19:06:32,312 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "Preflopの状況で、あなたの手札はJ♥ 10♥です。これはコネクター（隣り合ったランク）で、フラッシュ（同じスート）の可能性もあります。現在のポットは30で、コールするには20必要です。相手（Player 3）が20ベットしており、あなたのコールはポットを50にします。この手札は十分プレイする価値があると判断し、コールを選択します。Playuer 1はすでにポットに参加していないので、Player 3との直接対決になります。Player 3のチップ量（1751）とあなたのチップ量（52）を比較すると、あなたのチップはかなり少ないです。しかし、この手札はフロップ以降に強い役を作る可能性を秘めているため、コールしてフロップを見るのが合理的です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 202, 'promptTokenCount': 778, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 778}], 'totalTokenCount': 980}, 'invocationId': 'e-a4ee6f4a-e853-4abb-8ee5-3cdaee646595', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'gV5Ao4Pq', 'timestamp': 1761905189.60639}]
2025-10-31 19:06:32,313 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:06:32,313 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "Preflopの状況で、あなたの手札はJ♥ 10♥です。これはコネクター（隣り合ったランク）で、フラッシュ（同じスート）の可能性もあります。現在のポットは30で、コールするには20必要です。相手（Player 3）が20ベットしており、あなたのコールはポットを50にします。この手札は十分プレイする価値があると判断し、コールを選択します。Playuer 1はすでにポットに参加していないので、Player 3との直接対決になります。Player 3のチップ量（1751）とあなたのチップ量（52）を比較すると、あなたのチップはかなり少ないです。しかし、この手札はフロップ以降に強い役を作る可能性を秘めているため、コールしてフロップを見るのが合理的です。"
}
```
2025-10-31 19:06:32,313 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:06:32,314 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "Preflopの状況で、あなたの手札はJ♥ 10♥です。これはコネクター（隣り合ったランク）で、フラッシュ（同じスート）の可能性もあります。現在のポットは30で、コールするには20必要です。相手（Player 3）が20ベットしており、あなたのコールはポットを50にします。この手札は十分プレイする価値があると判断し、コールを選択します。Playuer 1はすでにポットに参加していないので、Player 3との直接対決になります。Player 3のチップ量（1751）とあなたのチップ量（52）を比較すると、あなたのチップはかなり少ないです。しかし、この手札はフロップ以降に強い役を作る可能性を秘めているため、コールしてフロップを見るのが合理的です。"\n}\n```'
2025-10-31 19:06:32,314 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:06:32,314 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "Preflopの状況で、あなたの手札はJ♥ 10♥です。これはコネクター（隣り合ったランク）で、フラッシュ（同じスート）の可能性もあります。現在のポットは30で、コールするには20必要です。相手（Player 3）が20ベットしており、あなたのコールはポットを50にします。この手札は十分プレイする価値があると判断し、コールを選択します。Playuer 1はすでにポットに参加していないので、Player 3との直接対決になります。Player 3のチップ量（1751）とあなたのチップ量（52）を比較すると、あなたのチップはかなり少ないです。しかし、この手札はフロップ以降に強い役を作る可能性を秘めているため、コールしてフロップを見るのが合理的です。"\n}'
2025-10-31 19:06:32,315 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "Preflopの状況で、あなたの手札はJ♥ 10♥です。これはコネクター（隣り合ったランク）で、フラッシュ（同じスート）の可能性もあります。現在のポットは30で、コールするには20必要です。相手（Player 3）が20ベットしており、あなたのコールはポットを50にします。この手札は十分プレイする価値があると判断し、コールを選択します。Playuer 1はすでにポットに参加していないので、Player 3との直接対決になります。Player 3のチップ量（1751）とあなたのチップ量（52）を比較すると、あなたのチップはかなり少ないです。しかし、この手札はフロップ以降に強い役を作る可能性を秘めているため、コールしてフロップを見るのが合理的です。"
}
2025-10-31 19:06:32,315 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'Preflopの状況で、あなたの手札はJ♥ 10♥です。これはコネクター（隣り合ったランク）で、フラッシュ（同じスート）の可能性もあります。現在のポットは30で、コールするには20必要です。相手（Player 3）が20ベットしており、あなたのコールはポットを50にします。この手札は十分プレイする価値があると判断し、コールを選択します。Playuer 1はすでにポットに参加していないので、Player 3との直接対決になります。Player 3のチップ量（1751）とあなたのチップ量（52）を比較すると、あなたのチップはかなり少ないです。しかし、この手札はフロップ以降に強い役を作る可能性を秘めているため、コールしてフロップを見るのが合理的です。'}
2025-10-31 19:06:32,315 - poker_game - DEBUG - [Agent0] Extracted values - action: 'call', amount: 20
2025-10-31 19:06:32,315 - poker_game - DEBUG - [Agent0] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (52)']
2025-10-31 19:06:32,315 - poker_game - DEBUG - [Agent0] Call amount extracted from 'call (20)': 20
2025-10-31 19:06:32,315 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 19:06:32,316 - poker_game - INFO - [Agent0] Successfully parsed decision: call, 20, Preflopの状況で、あなたの手札はJ♥ 10♥です。これはコネクター（隣り合ったランク）で、フラッシュ（同じスート）の可能性もあります。現在のポットは30で、コールするには20必要です。相手（Player 3）が20ベットしており、あなたのコールはポットを50にします。この手札は十分プレイする価値があると判断し、コールを選択します。Playuer 1はすでにポットに参加していないので、Player 3との直接対決になります。Player 3のチップ量（1751）とあなたのチップ量（52）を比較すると、あなたのチップはかなり少ないです。しかし、この手札はフロップ以降に強い役を作る可能性を秘めているため、コールしてフロップを見るのが合理的です。
2025-10-31 19:06:32,317 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'call' with amount 20
2025-10-31 19:06:32,317 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:32,318 - poker_game - INFO - Hand #26, Phase: preflop
2025-10-31 19:06:32,319 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:06:32,319 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:32,320 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:32,320 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:32,321 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:32,321 - poker_game - INFO - Community cards: []
2025-10-31 19:06:32,321 - poker_game - INFO -   P0(Agent0): chips=52, bet=0, status=active
2025-10-31 19:06:32,322 - poker_game - INFO -   P1(Agent1): chips=8167, bet=10, status=active
2025-10-31 19:06:32,323 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:32,323 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:32,323 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:32,323 - poker_game - INFO - ==================================================
2025-10-31 19:06:32,324 - poker_game - INFO - ACTION_EXECUTED: Player 0 called 20
2025-10-31 19:06:32,335 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:32,336 - poker_game - INFO - Hand #26, Phase: preflop
2025-10-31 19:06:32,336 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:06:32,336 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:06:32,336 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:32,336 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:32,337 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:32,337 - poker_game - INFO - Community cards: []
2025-10-31 19:06:32,337 - poker_game - INFO -   P0(Agent0): chips=32, bet=20, status=active
2025-10-31 19:06:32,337 - poker_game - INFO -   P1(Agent1): chips=8167, bet=10, status=active
2025-10-31 19:06:32,338 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:32,338 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:32,338 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:32,338 - poker_game - INFO - Extra: Action: Player 0 called 20
2025-10-31 19:06:32,338 - poker_game - INFO - ==================================================
2025-10-31 19:06:32,339 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:32,339 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:32,339 - poker_game - DEBUG - Active players: [0, 1, 3]
2025-10-31 19:06:32,339 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:06:32,339 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:32,339 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:32,339 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:06:32,340 - poker_game - DEBUG - Player bets: [20, 10, 20], Current bet: 20, All same: False
2025-10-31 19:06:32,340 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:06:32,340 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:32,340 - poker_game - INFO - Hand #26, Phase: preflop
2025-10-31 19:06:32,340 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:06:32,340 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:06:32,340 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:32,340 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:32,341 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:32,341 - poker_game - INFO - Community cards: []
2025-10-31 19:06:32,341 - poker_game - INFO -   P0(Agent0): chips=32, bet=20, status=active
2025-10-31 19:06:32,341 - poker_game - INFO -   P1(Agent1): chips=8167, bet=10, status=active
2025-10-31 19:06:32,341 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:32,341 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:32,342 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:32,342 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:32,342 - poker_game - INFO - ==================================================
2025-10-31 19:06:32,444 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "A♦",
    "A♣"
  ],
  "community": [],
  "your_chips": 8167,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 50,
  "to_call": 10,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 32,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1751,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (8167)"
  ],
  "history": [
    "Player 1 folded",
    "Showdown: Player 3 won 30",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 0 raised to 60",
    "Player 1 raised to 210",
    "Player 0 called 150",
    "Flop dealt: 10♠, 9♠, 7♣",
    "Player 0 folded",
    "Showdown: Player 1 won 430",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 called 20"
  ]
}
2025-10-31 19:06:32,456 - poker_game - DEBUG - Create Session: {'id': '7f7ee5c0-1ca3-45fe-b4c0-3d29041b4ab3', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905192.4524362}
2025-10-31 19:06:34,092 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 100,\n  "reasoning": "ペアのエース（ポケットエース）は、テキサスホールデムで最も強いハンドなので、レイズしてポットを大きくします。相手がコールするかどうかで、相手のハンドの強さを推測できます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 80, 'promptTokenCount': 784, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 784}], 'totalTokenCount': 864}, 'invocationId': 'e-b59cee96-fe3a-4010-bbe0-32aa0ea48313', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'J4ZfLWFJ', 'timestamp': 1761905192.466881}]
2025-10-31 19:06:34,093 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:06:34,093 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 100,
  "reasoning": "ペアのエース（ポケットエース）は、テキサスホールデムで最も強いハンドなので、レイズしてポットを大きくします。相手がコールするかどうかで、相手のハンドの強さを推測できます。"
}
```
2025-10-31 19:06:34,094 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:06:34,094 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 100,\n  "reasoning": "ペアのエース（ポケットエース）は、テキサスホールデムで最も強いハンドなので、レイズしてポットを大きくします。相手がコールするかどうかで、相手のハンドの強さを推測できます。"\n}\n```'
2025-10-31 19:06:34,094 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:06:34,094 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 100,\n  "reasoning": "ペアのエース（ポケットエース）は、テキサスホールデムで最も強いハンドなので、レイズしてポットを大きくします。相手がコールするかどうかで、相手のハンドの強さを推測できます。"\n}'
2025-10-31 19:06:34,094 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "raise",
  "amount": 100,
  "reasoning": "ペアのエース（ポケットエース）は、テキサスホールデムで最も強いハンドなので、レイズしてポットを大きくします。相手がコールするかどうかで、相手のハンドの強さを推測できます。"
}
2025-10-31 19:06:34,095 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'raise', 'amount': 100, 'reasoning': 'ペアのエース（ポケットエース）は、テキサスホールデムで最も強いハンドなので、レイズしてポットを大きくします。相手がコールするかどうかで、相手のハンドの強さを推測できます。'}
2025-10-31 19:06:34,095 - poker_game - DEBUG - [Agent1] Extracted values - action: 'raise', amount: 100
2025-10-31 19:06:34,095 - poker_game - DEBUG - [Agent1] Processing raise action - available actions: ['fold', 'call (10)', 'raise (min 40)', 'all-in (8167)']
2025-10-31 19:06:34,095 - poker_game - DEBUG - [Agent1] Minimum raise amount extracted from 'raise (min 40)': 40
2025-10-31 19:06:34,095 - poker_game - DEBUG - [Agent1] Raise amount 100 is valid (min: 40)
2025-10-31 19:06:34,095 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'raise', 'amount': 100}
2025-10-31 19:06:34,095 - poker_game - INFO - [Agent1] Successfully parsed decision: raise, 100, ペアのエース（ポケットエース）は、テキサスホールデムで最も強いハンドなので、レイズしてポットを大きくします。相手がコールするかどうかで、相手のハンドの強さを推測できます。
2025-10-31 19:06:34,096 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'raise' with amount 100
2025-10-31 19:06:34,097 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:34,097 - poker_game - INFO - Hand #26, Phase: preflop
2025-10-31 19:06:34,097 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:06:34,097 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:06:34,098 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:34,098 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:34,099 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:34,099 - poker_game - INFO - Community cards: []
2025-10-31 19:06:34,099 - poker_game - INFO -   P0(Agent0): chips=32, bet=20, status=active
2025-10-31 19:06:34,100 - poker_game - INFO -   P1(Agent1): chips=8167, bet=10, status=active
2025-10-31 19:06:34,100 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:34,101 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:34,101 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:34,102 - poker_game - INFO - ==================================================
2025-10-31 19:06:34,102 - poker_game - INFO - ACTION_EXECUTED: Player 1 raised to 120
2025-10-31 19:06:34,113 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:34,113 - poker_game - INFO - Hand #26, Phase: preflop
2025-10-31 19:06:34,113 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:06:34,113 - poker_game - INFO - Pot: 160, Current bet: 120
2025-10-31 19:06:34,114 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:34,114 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:34,114 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:34,114 - poker_game - INFO - Community cards: []
2025-10-31 19:06:34,114 - poker_game - INFO -   P0(Agent0): chips=32, bet=20, status=active
2025-10-31 19:06:34,115 - poker_game - INFO -   P1(Agent1): chips=8057, bet=120, status=active
2025-10-31 19:06:34,115 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:34,115 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:34,115 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:34,115 - poker_game - INFO - Extra: Action: Player 1 raised to 120
2025-10-31 19:06:34,116 - poker_game - INFO - ==================================================
2025-10-31 19:06:34,116 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:34,116 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:34,116 - poker_game - DEBUG - Active players: [0, 1, 3]
2025-10-31 19:06:34,116 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:06:34,116 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:34,117 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:34,117 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:06:34,117 - poker_game - DEBUG - Player bets: [20, 120, 20], Current bet: 120, All same: False
2025-10-31 19:06:34,117 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:06:34,117 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:34,117 - poker_game - INFO - Hand #26, Phase: preflop
2025-10-31 19:06:34,118 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:06:34,118 - poker_game - INFO - Pot: 160, Current bet: 120
2025-10-31 19:06:34,118 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:34,118 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:34,118 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:34,119 - poker_game - INFO - Community cards: []
2025-10-31 19:06:34,119 - poker_game - INFO -   P0(Agent0): chips=32, bet=20, status=active
2025-10-31 19:06:34,119 - poker_game - INFO -   P1(Agent1): chips=8057, bet=120, status=active
2025-10-31 19:06:34,119 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:34,120 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:34,120 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:34,120 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:34,120 - poker_game - INFO - ==================================================
2025-10-31 19:06:34,221 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "6♦",
    "5♥"
  ],
  "community": [],
  "your_chips": 1751,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 160,
  "to_call": 100,
  "dealer_button": 0,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 32,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 8057,
      "bet": 120,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (100)",
    "raise (min 140)",
    "all-in (1751)"
  ],
  "history": [
    "Showdown: Player 3 won 30",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 0 raised to 60",
    "Player 1 raised to 210",
    "Player 0 called 150",
    "Flop dealt: 10♠, 9♠, 7♣",
    "Player 0 folded",
    "Showdown: Player 1 won 430",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 called 20",
    "Player 1 raised to 120"
  ]
}
2025-10-31 19:06:34,231 - poker_game - DEBUG - Create Session: {'id': 'f1e711d3-da8c-4c33-8d3d-affcb41c995f', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905194.2292364}
2025-10-31 19:06:36,188 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、あなたの手札は6♦5♥です。これは「スーテッドコネクター」（同じスートで連続した数字）ですが、数字が低いため、強い役を作る可能性は低いです。現在のベット額（to_call: 100）は、あなたのポットに対する比率（pot: 160）と比較して大きく、さらにポットはすでに160もあり、対戦相手（Player 1）は120ベットしています。この状況でコールするには100必要ですが、あなたの手札の強さを考えると、この投資はリスクに見合いません。したがって、フォールド（降りる）のが最善の選択です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 185, 'promptTokenCount': 794, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 794}], 'totalTokenCount': 979}, 'invocationId': 'e-652c9b38-6c11-4c3b-8312-8553c9852f2f', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'QVsIJbo2', 'timestamp': 1761905194.240851}]
2025-10-31 19:06:36,188 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:06:36,188 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、あなたの手札は6♦5♥です。これは「スーテッドコネクター」（同じスートで連続した数字）ですが、数字が低いため、強い役を作る可能性は低いです。現在のベット額（to_call: 100）は、あなたのポットに対する比率（pot: 160）と比較して大きく、さらにポットはすでに160もあり、対戦相手（Player 1）は120ベットしています。この状況でコールするには100必要ですが、あなたの手札の強さを考えると、この投資はリスクに見合いません。したがって、フォールド（降りる）のが最善の選択です。"
}
```
2025-10-31 19:06:36,189 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:06:36,189 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、あなたの手札は6♦5♥です。これは「スーテッドコネクター」（同じスートで連続した数字）ですが、数字が低いため、強い役を作る可能性は低いです。現在のベット額（to_call: 100）は、あなたのポットに対する比率（pot: 160）と比較して大きく、さらにポットはすでに160もあり、対戦相手（Player 1）は120ベットしています。この状況でコールするには100必要ですが、あなたの手札の強さを考えると、この投資はリスクに見合いません。したがって、フォールド（降りる）のが最善の選択です。"\n}\n```'
2025-10-31 19:06:36,189 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:06:36,189 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、あなたの手札は6♦5♥です。これは「スーテッドコネクター」（同じスートで連続した数字）ですが、数字が低いため、強い役を作る可能性は低いです。現在のベット額（to_call: 100）は、あなたのポットに対する比率（pot: 160）と比較して大きく、さらにポットはすでに160もあり、対戦相手（Player 1）は120ベットしています。この状況でコールするには100必要ですが、あなたの手札の強さを考えると、この投資はリスクに見合いません。したがって、フォールド（降りる）のが最善の選択です。"\n}'
2025-10-31 19:06:36,189 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、あなたの手札は6♦5♥です。これは「スーテッドコネクター」（同じスートで連続した数字）ですが、数字が低いため、強い役を作る可能性は低いです。現在のベット額（to_call: 100）は、あなたのポットに対する比率（pot: 160）と比較して大きく、さらにポットはすでに160もあり、対戦相手（Player 1）は120ベットしています。この状況でコールするには100必要ですが、あなたの手札の強さを考えると、この投資はリスクに見合いません。したがって、フォールド（降りる）のが最善の選択です。"
}
2025-10-31 19:06:36,189 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、あなたの手札は6♦5♥です。これは「スーテッドコネクター」（同じスートで連続した数字）ですが、数字が低いため、強い役を作る可能性は低いです。現在のベット額（to_call: 100）は、あなたのポットに対する比率（pot: 160）と比較して大きく、さらにポットはすでに160もあり、対戦相手（Player 1）は120ベットしています。この状況でコールするには100必要ですが、あなたの手札の強さを考えると、この投資はリスクに見合いません。したがって、フォールド（降りる）のが最善の選択です。'}
2025-10-31 19:06:36,190 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 19:06:36,190 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 19:06:36,190 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:06:36,190 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, プリフロップ（最初のカードが配られた後の最初のベットラウンド）で、あなたの手札は6♦5♥です。これは「スーテッドコネクター」（同じスートで連続した数字）ですが、数字が低いため、強い役を作る可能性は低いです。現在のベット額（to_call: 100）は、あなたのポットに対する比率（pot: 160）と比較して大きく、さらにポットはすでに160もあり、対戦相手（Player 1）は120ベットしています。この状況でコールするには100必要ですが、あなたの手札の強さを考えると、この投資はリスクに見合いません。したがって、フォールド（降りる）のが最善の選択です。
2025-10-31 19:06:36,190 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 19:06:36,191 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:36,191 - poker_game - INFO - Hand #26, Phase: preflop
2025-10-31 19:06:36,191 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:06:36,191 - poker_game - INFO - Pot: 160, Current bet: 120
2025-10-31 19:06:36,192 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:36,192 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:36,192 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:36,192 - poker_game - INFO - Community cards: []
2025-10-31 19:06:36,193 - poker_game - INFO -   P0(Agent0): chips=32, bet=20, status=active
2025-10-31 19:06:36,193 - poker_game - INFO -   P1(Agent1): chips=8057, bet=120, status=active
2025-10-31 19:06:36,193 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:36,194 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=active
2025-10-31 19:06:36,194 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:36,194 - poker_game - INFO - ==================================================
2025-10-31 19:06:36,194 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 19:06:36,206 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:36,206 - poker_game - INFO - Hand #26, Phase: preflop
2025-10-31 19:06:36,207 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:06:36,207 - poker_game - INFO - Pot: 160, Current bet: 120
2025-10-31 19:06:36,208 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:36,208 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:36,209 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:36,209 - poker_game - INFO - Community cards: []
2025-10-31 19:06:36,210 - poker_game - INFO -   P0(Agent0): chips=32, bet=20, status=active
2025-10-31 19:06:36,210 - poker_game - INFO -   P1(Agent1): chips=8057, bet=120, status=active
2025-10-31 19:06:36,211 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:36,211 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=folded
2025-10-31 19:06:36,212 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:36,212 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 19:06:36,213 - poker_game - INFO - ==================================================
2025-10-31 19:06:36,213 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:36,213 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:36,214 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 19:06:36,214 - poker_game - INFO - Advanced from player 3 to player 0 (seat order)
2025-10-31 19:06:36,214 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:36,215 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:36,215 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:36,215 - poker_game - DEBUG - Player bets: [20, 120], Current bet: 120, All same: False
2025-10-31 19:06:36,215 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:06:36,216 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:36,216 - poker_game - INFO - Hand #26, Phase: preflop
2025-10-31 19:06:36,217 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:06:36,217 - poker_game - INFO - Pot: 160, Current bet: 120
2025-10-31 19:06:36,217 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:36,218 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:36,218 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:36,218 - poker_game - INFO - Community cards: []
2025-10-31 19:06:36,219 - poker_game - INFO -   P0(Agent0): chips=32, bet=20, status=active
2025-10-31 19:06:36,219 - poker_game - INFO -   P1(Agent1): chips=8057, bet=120, status=active
2025-10-31 19:06:36,219 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:36,220 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=folded
2025-10-31 19:06:36,220 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:36,220 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:36,221 - poker_game - INFO - ==================================================
2025-10-31 19:06:36,322 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "10♥",
    "J♥"
  ],
  "community": [],
  "your_chips": 32,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 160,
  "to_call": 100,
  "dealer_button": 0,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 8057,
      "bet": 120,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1751,
      "bet": 20,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "all-in (32)"
  ],
  "history": [
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 folded",
    "Player 0 raised to 60",
    "Player 1 raised to 210",
    "Player 0 called 150",
    "Flop dealt: 10♠, 9♠, 7♣",
    "Player 0 folded",
    "Showdown: Player 1 won 430",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 called 20",
    "Player 1 raised to 120",
    "Player 3 folded"
  ]
}
2025-10-31 19:06:36,337 - poker_game - DEBUG - Create Session: {'id': '388c78ed-c007-4c75-b69f-f0bad2a29209', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905196.3344984}
2025-10-31 19:06:38,299 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（カードが配られた直後の段階）で、ポットに160、コールに100必要です。手札はJ♥10♥で、フラッシュ（同じマークのカードが5枚揃うこと）のドロー（揃いそうであること）の可能性がありますが、まだ完成していません。相手のベット額が大きく、コールするにはチップが足りません（32チップしかない）。したがって、フォールド（降りる）のが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 134, 'promptTokenCount': 767, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 767}], 'totalTokenCount': 901}, 'invocationId': 'e-c9cbf566-8433-4da3-9fe5-1dfc73615982', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'GfYfzv8v', 'timestamp': 1761905196.349392}]
2025-10-31 19:06:38,300 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:06:38,300 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（カードが配られた直後の段階）で、ポットに160、コールに100必要です。手札はJ♥10♥で、フラッシュ（同じマークのカードが5枚揃うこと）のドロー（揃いそうであること）の可能性がありますが、まだ完成していません。相手のベット額が大きく、コールするにはチップが足りません（32チップしかない）。したがって、フォールド（降りる）のが最善です。"
}
```
2025-10-31 19:06:38,301 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:06:38,301 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（カードが配られた直後の段階）で、ポットに160、コールに100必要です。手札はJ♥10♥で、フラッシュ（同じマークのカードが5枚揃うこと）のドロー（揃いそうであること）の可能性がありますが、まだ完成していません。相手のベット額が大きく、コールするにはチップが足りません（32チップしかない）。したがって、フォールド（降りる）のが最善です。"\n}\n```'
2025-10-31 19:06:38,301 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:06:38,302 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（カードが配られた直後の段階）で、ポットに160、コールに100必要です。手札はJ♥10♥で、フラッシュ（同じマークのカードが5枚揃うこと）のドロー（揃いそうであること）の可能性がありますが、まだ完成していません。相手のベット額が大きく、コールするにはチップが足りません（32チップしかない）。したがって、フォールド（降りる）のが最善です。"\n}'
2025-10-31 19:06:38,302 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（カードが配られた直後の段階）で、ポットに160、コールに100必要です。手札はJ♥10♥で、フラッシュ（同じマークのカードが5枚揃うこと）のドロー（揃いそうであること）の可能性がありますが、まだ完成していません。相手のベット額が大きく、コールするにはチップが足りません（32チップしかない）。したがって、フォールド（降りる）のが最善です。"
}
2025-10-31 19:06:38,302 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（カードが配られた直後の段階）で、ポットに160、コールに100必要です。手札はJ♥10♥で、フラッシュ（同じマークのカードが5枚揃うこと）のドロー（揃いそうであること）の可能性がありますが、まだ完成していません。相手のベット額が大きく、コールするにはチップが足りません（32チップしかない）。したがって、フォールド（降りる）のが最善です。'}
2025-10-31 19:06:38,302 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 19:06:38,302 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 19:06:38,303 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:06:38,303 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップ（カードが配られた直後の段階）で、ポットに160、コールに100必要です。手札はJ♥10♥で、フラッシュ（同じマークのカードが5枚揃うこと）のドロー（揃いそうであること）の可能性がありますが、まだ完成していません。相手のベット額が大きく、コールするにはチップが足りません（32チップしかない）。したがって、フォールド（降りる）のが最善です。
2025-10-31 19:06:38,304 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 19:06:38,304 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:38,305 - poker_game - INFO - Hand #26, Phase: preflop
2025-10-31 19:06:38,305 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:06:38,306 - poker_game - INFO - Pot: 160, Current bet: 120
2025-10-31 19:06:38,306 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:38,306 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:38,306 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:38,306 - poker_game - INFO - Community cards: []
2025-10-31 19:06:38,306 - poker_game - INFO -   P0(Agent0): chips=32, bet=20, status=active
2025-10-31 19:06:38,308 - poker_game - INFO -   P1(Agent1): chips=8057, bet=120, status=active
2025-10-31 19:06:38,309 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:38,310 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=folded
2025-10-31 19:06:38,310 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:38,311 - poker_game - INFO - ==================================================
2025-10-31 19:06:38,311 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 19:06:38,331 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:38,332 - poker_game - INFO - Hand #26, Phase: preflop
2025-10-31 19:06:38,332 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:06:38,333 - poker_game - INFO - Pot: 160, Current bet: 120
2025-10-31 19:06:38,333 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:38,334 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:38,334 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:06:38,334 - poker_game - INFO - Community cards: []
2025-10-31 19:06:38,335 - poker_game - INFO -   P0(Agent0): chips=32, bet=20, status=folded
2025-10-31 19:06:38,335 - poker_game - INFO -   P1(Agent1): chips=8057, bet=120, status=active
2025-10-31 19:06:38,336 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:38,336 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=folded
2025-10-31 19:06:38,337 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:38,341 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 19:06:38,342 - poker_game - INFO - ==================================================
2025-10-31 19:06:38,343 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:38,344 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:38,345 - poker_game - DEBUG - Active players: [1]
2025-10-31 19:06:38,345 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:06:38,346 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:38,346 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:38,347 - poker_game - DEBUG - Active: 1, All-in: 0
2025-10-31 19:06:38,347 - poker_game - INFO - Betting complete: Only 1 or fewer players remaining
2025-10-31 19:06:38,348 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:38,348 - poker_game - INFO - Hand #26, Phase: preflop
2025-10-31 19:06:38,348 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:06:38,349 - poker_game - INFO - Pot: 160, Current bet: 120
2025-10-31 19:06:38,349 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:38,349 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:38,349 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:06:38,350 - poker_game - INFO - Community cards: []
2025-10-31 19:06:38,350 - poker_game - INFO -   P0(Agent0): chips=32, bet=20, status=folded
2025-10-31 19:06:38,350 - poker_game - INFO -   P1(Agent1): chips=8057, bet=120, status=active
2025-10-31 19:06:38,351 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:38,351 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=folded
2025-10-31 19:06:38,352 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:38,352 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:06:38,352 - poker_game - INFO - ==================================================
2025-10-31 19:06:38,458 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 19:06:38,458 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:38,459 - poker_game - INFO - Remaining players: 1
2025-10-31 19:06:38,459 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:06:38,459 - poker_game - INFO - Going to SHOWDOWN - only 1 or fewer players remaining
2025-10-31 19:06:38,460 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 19:06:38,460 - poker_game - INFO - Hand #26, Phase: showdown
2025-10-31 19:06:38,461 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:06:38,461 - poker_game - INFO - Pot: 160, Current bet: 120
2025-10-31 19:06:38,461 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:38,462 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:38,462 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:06:38,462 - poker_game - INFO - Community cards: []
2025-10-31 19:06:38,463 - poker_game - INFO -   P0(Agent0): chips=32, bet=20, status=folded
2025-10-31 19:06:38,463 - poker_game - INFO -   P1(Agent1): chips=8057, bet=120, status=active
2025-10-31 19:06:38,463 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:38,464 - poker_game - INFO -   P3(Agent3): chips=1751, bet=20, status=folded
2025-10-31 19:06:38,464 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:38,464 - poker_game - INFO - ==================================================
2025-10-31 19:06:38,465 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 19:06:38,466 - poker_game - INFO - Pot: 160, Community cards: []
2025-10-31 19:06:38,466 - poker_game - INFO -   Player 1 status=active cards=['A♦', 'A♣']
2025-10-31 19:06:38,467 - poker_game - INFO - Showdown winner by default: Player 1 awarded 160
2025-10-31 19:06:38,468 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 19:06:38,468 - poker_game - INFO - === STARTING NEW HAND #27 ===
2025-10-31 19:06:38,469 - poker_game - INFO - Active players for new hand: 3
2025-10-31 19:06:38,469 - poker_game - INFO - Moving dealer button
2025-10-31 19:06:38,470 - poker_game - INFO - Posting blinds
2025-10-31 19:06:38,495 - poker_game - INFO - Dealing hole cards
2025-10-31 19:06:38,496 - poker_game - INFO - Setting first actor for preflop
2025-10-31 19:06:38,507 - poker_game - INFO - Started new hand in database: hand_id=27
2025-10-31 19:06:38,507 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 19:06:38,508 - poker_game - INFO - Hand #27, Phase: preflop
2025-10-31 19:06:38,508 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:38,509 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:38,509 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:38,510 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:38,511 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:38,511 - poker_game - INFO - Community cards: []
2025-10-31 19:06:38,512 - poker_game - INFO -   P0(Agent0): chips=12, bet=20, status=active
2025-10-31 19:06:38,512 - poker_game - INFO -   P1(Agent1): chips=8217, bet=0, status=active
2025-10-31 19:06:38,512 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:38,513 - poker_game - INFO -   P3(Agent3): chips=1741, bet=10, status=active
2025-10-31 19:06:38,513 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:38,514 - poker_game - INFO - ==================================================
2025-10-31 19:06:38,515 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "5♦",
    "10♥"
  ],
  "community": [],
  "your_chips": 8217,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 12,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1741,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (8217)"
  ],
  "history": [
    "Player 0 raised to 60",
    "Player 1 raised to 210",
    "Player 0 called 150",
    "Flop dealt: 10♠, 9♠, 7♣",
    "Player 0 folded",
    "Showdown: Player 1 won 430",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 called 20",
    "Player 1 raised to 120",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 160",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20"
  ]
}
2025-10-31 19:06:38,526 - poker_game - DEBUG - Create Session: {'id': '5963ce6b-32e9-4410-8616-996430c5ee26', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905198.5238008}
2025-10-31 19:06:40,751 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップ（最初のカードが配られた後、コミュニティカードがまだない段階）では、5♦10♥は標準的なハンドです。ポットにはすでに30があり、コールするには20必要です。これは、ポットオッズ（ポットのサイズに対して、コールに必要な金額の比率）が良好であることを意味し、このハンドでコールする価値があります。相手がレイズ（ベット額を増やすこと）していないので、リスクは低いです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 130, 'promptTokenCount': 786, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 786}], 'totalTokenCount': 916}, 'invocationId': 'e-edc0af39-4b79-43a0-9f9a-d4d0b9ce2d34', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Enl1GvNI', 'timestamp': 1761905198.538984}]
2025-10-31 19:06:40,751 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:06:40,752 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップ（最初のカードが配られた後、コミュニティカードがまだない段階）では、5♦10♥は標準的なハンドです。ポットにはすでに30があり、コールするには20必要です。これは、ポットオッズ（ポットのサイズに対して、コールに必要な金額の比率）が良好であることを意味し、このハンドでコールする価値があります。相手がレイズ（ベット額を増やすこと）していないので、リスクは低いです。"
}
```
2025-10-31 19:06:40,752 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:06:40,752 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップ（最初のカードが配られた後、コミュニティカードがまだない段階）では、5♦10♥は標準的なハンドです。ポットにはすでに30があり、コールするには20必要です。これは、ポットオッズ（ポットのサイズに対して、コールに必要な金額の比率）が良好であることを意味し、このハンドでコールする価値があります。相手がレイズ（ベット額を増やすこと）していないので、リスクは低いです。"\n}\n```'
2025-10-31 19:06:40,752 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:06:40,752 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 20,\n  "reasoning": "プリフロップ（最初のカードが配られた後、コミュニティカードがまだない段階）では、5♦10♥は標準的なハンドです。ポットにはすでに30があり、コールするには20必要です。これは、ポットオッズ（ポットのサイズに対して、コールに必要な金額の比率）が良好であることを意味し、このハンドでコールする価値があります。相手がレイズ（ベット額を増やすこと）していないので、リスクは低いです。"\n}'
2025-10-31 19:06:40,752 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 20,
  "reasoning": "プリフロップ（最初のカードが配られた後、コミュニティカードがまだない段階）では、5♦10♥は標準的なハンドです。ポットにはすでに30があり、コールするには20必要です。これは、ポットオッズ（ポットのサイズに対して、コールに必要な金額の比率）が良好であることを意味し、このハンドでコールする価値があります。相手がレイズ（ベット額を増やすこと）していないので、リスクは低いです。"
}
2025-10-31 19:06:40,752 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 20, 'reasoning': 'プリフロップ（最初のカードが配られた後、コミュニティカードがまだない段階）では、5♦10♥は標準的なハンドです。ポットにはすでに30があり、コールするには20必要です。これは、ポットオッズ（ポットのサイズに対して、コールに必要な金額の比率）が良好であることを意味し、このハンドでコールする価値があります。相手がレイズ（ベット額を増やすこと）していないので、リスクは低いです。'}
2025-10-31 19:06:40,753 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 20
2025-10-31 19:06:40,753 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (20)', 'raise (min 40)', 'all-in (8217)']
2025-10-31 19:06:40,753 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (20)': 20
2025-10-31 19:06:40,753 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 20}
2025-10-31 19:06:40,753 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 20, プリフロップ（最初のカードが配られた後、コミュニティカードがまだない段階）では、5♦10♥は標準的なハンドです。ポットにはすでに30があり、コールするには20必要です。これは、ポットオッズ（ポットのサイズに対して、コールに必要な金額の比率）が良好であることを意味し、このハンドでコールする価値があります。相手がレイズ（ベット額を増やすこと）していないので、リスクは低いです。
2025-10-31 19:06:40,754 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 20
2025-10-31 19:06:40,754 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:40,754 - poker_game - INFO - Hand #27, Phase: preflop
2025-10-31 19:06:40,754 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:40,754 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:40,754 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:40,755 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:40,755 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:40,755 - poker_game - INFO - Community cards: []
2025-10-31 19:06:40,755 - poker_game - INFO -   P0(Agent0): chips=12, bet=20, status=active
2025-10-31 19:06:40,755 - poker_game - INFO -   P1(Agent1): chips=8217, bet=0, status=active
2025-10-31 19:06:40,755 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:40,755 - poker_game - INFO -   P3(Agent3): chips=1741, bet=10, status=active
2025-10-31 19:06:40,755 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:40,756 - poker_game - INFO - ==================================================
2025-10-31 19:06:40,756 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 20
2025-10-31 19:06:40,770 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:40,771 - poker_game - INFO - Hand #27, Phase: preflop
2025-10-31 19:06:40,771 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:40,771 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:06:40,771 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:40,771 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:40,772 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:40,772 - poker_game - INFO - Community cards: []
2025-10-31 19:06:40,772 - poker_game - INFO -   P0(Agent0): chips=12, bet=20, status=active
2025-10-31 19:06:40,772 - poker_game - INFO -   P1(Agent1): chips=8197, bet=20, status=active
2025-10-31 19:06:40,772 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:40,772 - poker_game - INFO -   P3(Agent3): chips=1741, bet=10, status=active
2025-10-31 19:06:40,772 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:40,773 - poker_game - INFO - Extra: Action: Player 1 called 20
2025-10-31 19:06:40,773 - poker_game - INFO - ==================================================
2025-10-31 19:06:40,773 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:40,773 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:40,773 - poker_game - DEBUG - Active players: [0, 1, 3]
2025-10-31 19:06:40,773 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:06:40,773 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:40,774 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:40,774 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:06:40,774 - poker_game - DEBUG - Player bets: [20, 20, 10], Current bet: 20, All same: False
2025-10-31 19:06:40,774 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:06:40,774 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:40,774 - poker_game - INFO - Hand #27, Phase: preflop
2025-10-31 19:06:40,774 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:40,775 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:06:40,775 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:40,775 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:40,775 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:40,775 - poker_game - INFO - Community cards: []
2025-10-31 19:06:40,776 - poker_game - INFO -   P0(Agent0): chips=12, bet=20, status=active
2025-10-31 19:06:40,776 - poker_game - INFO -   P1(Agent1): chips=8197, bet=20, status=active
2025-10-31 19:06:40,776 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:40,776 - poker_game - INFO -   P3(Agent3): chips=1741, bet=10, status=active
2025-10-31 19:06:40,776 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:40,776 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:40,777 - poker_game - INFO - ==================================================
2025-10-31 19:06:40,878 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "A♠",
    "9♦"
  ],
  "community": [],
  "your_chips": 1741,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 50,
  "to_call": 10,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 12,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 8197,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (1741)"
  ],
  "history": [
    "Player 1 raised to 210",
    "Player 0 called 150",
    "Flop dealt: 10♠, 9♠, 7♣",
    "Player 0 folded",
    "Showdown: Player 1 won 430",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 called 20",
    "Player 1 raised to 120",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 160",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20"
  ]
}
2025-10-31 19:06:40,889 - poker_game - DEBUG - Create Session: {'id': '4e1277a1-6bde-4623-b46e-a8edac18ab64', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905200.8870811}
2025-10-31 19:06:40,044 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "A♠9♦はプリフロップでそこそこ強いハンドです。ポットはすでに大きくなっており、コールするためのコストは10です。相手のプレイヤーはまだアクションを起こしていないため、プリフロップでコールしてフロップを見てみるのが合理的です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 86, 'promptTokenCount': 786, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 786}], 'totalTokenCount': 872}, 'invocationId': 'e-d01d057a-0452-4955-ac63-6796414cf35c', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'zPBH0ZJB', 'timestamp': 1761905200.897292}]
2025-10-31 19:06:40,044 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:06:40,044 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 10,
  "reasoning": "A♠9♦はプリフロップでそこそこ強いハンドです。ポットはすでに大きくなっており、コールするためのコストは10です。相手のプレイヤーはまだアクションを起こしていないため、プリフロップでコールしてフロップを見てみるのが合理的です。"
}
```
2025-10-31 19:06:40,045 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:06:40,045 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "A♠9♦はプリフロップでそこそこ強いハンドです。ポットはすでに大きくなっており、コールするためのコストは10です。相手のプレイヤーはまだアクションを起こしていないため、プリフロップでコールしてフロップを見てみるのが合理的です。"\n}\n```'
2025-10-31 19:06:40,045 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:06:40,045 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 10,\n  "reasoning": "A♠9♦はプリフロップでそこそこ強いハンドです。ポットはすでに大きくなっており、コールするためのコストは10です。相手のプレイヤーはまだアクションを起こしていないため、プリフロップでコールしてフロップを見てみるのが合理的です。"\n}'
2025-10-31 19:06:40,045 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 10,
  "reasoning": "A♠9♦はプリフロップでそこそこ強いハンドです。ポットはすでに大きくなっており、コールするためのコストは10です。相手のプレイヤーはまだアクションを起こしていないため、プリフロップでコールしてフロップを見てみるのが合理的です。"
}
2025-10-31 19:06:40,045 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 10, 'reasoning': 'A♠9♦はプリフロップでそこそこ強いハンドです。ポットはすでに大きくなっており、コールするためのコストは10です。相手のプレイヤーはまだアクションを起こしていないため、プリフロップでコールしてフロップを見てみるのが合理的です。'}
2025-10-31 19:06:40,045 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 10
2025-10-31 19:06:40,045 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'call (10)', 'raise (min 40)', 'all-in (1741)']
2025-10-31 19:06:40,045 - poker_game - DEBUG - [Agent3] Call amount extracted from 'call (10)': 10
2025-10-31 19:06:40,045 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 10}
2025-10-31 19:06:40,045 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 10, A♠9♦はプリフロップでそこそこ強いハンドです。ポットはすでに大きくなっており、コールするためのコストは10です。相手のプレイヤーはまだアクションを起こしていないため、プリフロップでコールしてフロップを見てみるのが合理的です。
2025-10-31 19:06:40,046 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 10
2025-10-31 19:06:40,046 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:40,046 - poker_game - INFO - Hand #27, Phase: preflop
2025-10-31 19:06:40,046 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:40,047 - poker_game - INFO - Pot: 50, Current bet: 20
2025-10-31 19:06:40,047 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:40,047 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:40,047 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:40,048 - poker_game - INFO - Community cards: []
2025-10-31 19:06:40,048 - poker_game - INFO -   P0(Agent0): chips=12, bet=20, status=active
2025-10-31 19:06:40,048 - poker_game - INFO -   P1(Agent1): chips=8197, bet=20, status=active
2025-10-31 19:06:40,048 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:40,048 - poker_game - INFO -   P3(Agent3): chips=1741, bet=10, status=active
2025-10-31 19:06:40,048 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:40,049 - poker_game - INFO - ==================================================
2025-10-31 19:06:40,049 - poker_game - INFO - ACTION_EXECUTED: Player 3 called 10
2025-10-31 19:06:40,059 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:40,059 - poker_game - INFO - Hand #27, Phase: preflop
2025-10-31 19:06:40,060 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:40,060 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 19:06:40,060 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:40,060 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:40,060 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:40,061 - poker_game - INFO - Community cards: []
2025-10-31 19:06:40,061 - poker_game - INFO -   P0(Agent0): chips=12, bet=20, status=active
2025-10-31 19:06:40,061 - poker_game - INFO -   P1(Agent1): chips=8197, bet=20, status=active
2025-10-31 19:06:40,061 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:40,061 - poker_game - INFO -   P3(Agent3): chips=1731, bet=20, status=active
2025-10-31 19:06:40,061 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:40,061 - poker_game - INFO - Extra: Action: Player 3 called 10
2025-10-31 19:06:40,062 - poker_game - INFO - ==================================================
2025-10-31 19:06:40,062 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:40,062 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:40,062 - poker_game - DEBUG - Active players: [0, 1, 3]
2025-10-31 19:06:40,062 - poker_game - INFO - Advanced from player 3 to player 0 (seat order)
2025-10-31 19:06:40,063 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:40,063 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:40,063 - poker_game - DEBUG - Active: 3, All-in: 0
2025-10-31 19:06:40,063 - poker_game - DEBUG - Player bets: [20, 20, 20], Current bet: 20, All same: True
2025-10-31 19:06:40,063 - poker_game - DEBUG - Active player indices: [0, 1, 3]
2025-10-31 19:06:40,063 - poker_game - DEBUG - Last raiser index: 0
2025-10-31 19:06:40,063 - poker_game - DEBUG - Current player index: 0
2025-10-31 19:06:40,063 - poker_game - DEBUG - Next after last raiser 0: 1
2025-10-31 19:06:40,064 - poker_game - DEBUG - Betting continues: Current player 0 != next after raiser 1
2025-10-31 19:06:40,064 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:40,064 - poker_game - INFO - Hand #27, Phase: preflop
2025-10-31 19:06:40,064 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:06:40,064 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 19:06:40,064 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:40,065 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:40,065 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:40,065 - poker_game - INFO - Community cards: []
2025-10-31 19:06:40,065 - poker_game - INFO -   P0(Agent0): chips=12, bet=20, status=active
2025-10-31 19:06:40,065 - poker_game - INFO -   P1(Agent1): chips=8197, bet=20, status=active
2025-10-31 19:06:40,065 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:40,066 - poker_game - INFO -   P3(Agent3): chips=1731, bet=20, status=active
2025-10-31 19:06:40,066 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:40,066 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:40,066 - poker_game - INFO - ==================================================
2025-10-31 19:06:40,167 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "8♥",
    "Q♠"
  ],
  "community": [],
  "your_chips": 12,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 8197,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1731,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "all-in (12)"
  ],
  "history": [
    "Player 0 called 150",
    "Flop dealt: 10♠, 9♠, 7♣",
    "Player 0 folded",
    "Showdown: Player 1 won 430",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 called 20",
    "Player 1 raised to 120",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 160",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 called 10"
  ]
}
2025-10-31 19:06:40,179 - poker_game - DEBUG - Create Session: {'id': '2f392a24-e1d7-4c03-aabc-2feaec5a1b30', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905200.1772823}
2025-10-31 19:06:42,025 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後、フロップが開く前）の段階で、あなたの手札はQ8オフスート（同じスートではない）です。これは強い手札とは言えません。ポットは60で、コールには0必要ですが、あなたは既に20ベットしており、追加のベットの選択肢がありません。あなたのチップは12しか残っておらず、All-in（全額ベット）以外の選択肢は実質的にありません。しかし、相手のベット額が不明確なため、また手札の弱さを考慮して、フォールド（降りる）のが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 165, 'promptTokenCount': 768, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 768}], 'totalTokenCount': 933}, 'invocationId': 'e-3fa0ec47-8da8-4759-adcb-a1e679f250b8', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'yA4IzMWk', 'timestamp': 1761905200.187259}]
2025-10-31 19:06:42,025 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:06:42,026 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後、フロップが開く前）の段階で、あなたの手札はQ8オフスート（同じスートではない）です。これは強い手札とは言えません。ポットは60で、コールには0必要ですが、あなたは既に20ベットしており、追加のベットの選択肢がありません。あなたのチップは12しか残っておらず、All-in（全額ベット）以外の選択肢は実質的にありません。しかし、相手のベット額が不明確なため、また手札の弱さを考慮して、フォールド（降りる）のが最善です。"
}
```
2025-10-31 19:06:42,026 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:06:42,026 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後、フロップが開く前）の段階で、あなたの手札はQ8オフスート（同じスートではない）です。これは強い手札とは言えません。ポットは60で、コールには0必要ですが、あなたは既に20ベットしており、追加のベットの選択肢がありません。あなたのチップは12しか残っておらず、All-in（全額ベット）以外の選択肢は実質的にありません。しかし、相手のベット額が不明確なため、また手札の弱さを考慮して、フォールド（降りる）のが最善です。"\n}\n```'
2025-10-31 19:06:42,027 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:06:42,027 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（最初のカードが配られた後、フロップが開く前）の段階で、あなたの手札はQ8オフスート（同じスートではない）です。これは強い手札とは言えません。ポットは60で、コールには0必要ですが、あなたは既に20ベットしており、追加のベットの選択肢がありません。あなたのチップは12しか残っておらず、All-in（全額ベット）以外の選択肢は実質的にありません。しかし、相手のベット額が不明確なため、また手札の弱さを考慮して、フォールド（降りる）のが最善です。"\n}'
2025-10-31 19:06:42,027 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（最初のカードが配られた後、フロップが開く前）の段階で、あなたの手札はQ8オフスート（同じスートではない）です。これは強い手札とは言えません。ポットは60で、コールには0必要ですが、あなたは既に20ベットしており、追加のベットの選択肢がありません。あなたのチップは12しか残っておらず、All-in（全額ベット）以外の選択肢は実質的にありません。しかし、相手のベット額が不明確なため、また手札の弱さを考慮して、フォールド（降りる）のが最善です。"
}
2025-10-31 19:06:42,028 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（最初のカードが配られた後、フロップが開く前）の段階で、あなたの手札はQ8オフスート（同じスートではない）です。これは強い手札とは言えません。ポットは60で、コールには0必要ですが、あなたは既に20ベットしており、追加のベットの選択肢がありません。あなたのチップは12しか残っておらず、All-in（全額ベット）以外の選択肢は実質的にありません。しかし、相手のベット額が不明確なため、また手札の弱さを考慮して、フォールド（降りる）のが最善です。'}
2025-10-31 19:06:42,028 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 19:06:42,028 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 19:06:42,028 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:06:42,028 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップ（最初のカードが配られた後、フロップが開く前）の段階で、あなたの手札はQ8オフスート（同じスートではない）です。これは強い手札とは言えません。ポットは60で、コールには0必要ですが、あなたは既に20ベットしており、追加のベットの選択肢がありません。あなたのチップは12しか残っておらず、All-in（全額ベット）以外の選択肢は実質的にありません。しかし、相手のベット額が不明確なため、また手札の弱さを考慮して、フォールド（降りる）のが最善です。
2025-10-31 19:06:42,029 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 19:06:42,030 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:42,030 - poker_game - INFO - Hand #27, Phase: preflop
2025-10-31 19:06:42,030 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:06:42,031 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 19:06:42,031 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:42,031 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:42,032 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:42,032 - poker_game - INFO - Community cards: []
2025-10-31 19:06:42,032 - poker_game - INFO -   P0(Agent0): chips=12, bet=20, status=active
2025-10-31 19:06:42,033 - poker_game - INFO -   P1(Agent1): chips=8197, bet=20, status=active
2025-10-31 19:06:42,033 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:42,034 - poker_game - INFO -   P3(Agent3): chips=1731, bet=20, status=active
2025-10-31 19:06:42,034 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:42,035 - poker_game - INFO - ==================================================
2025-10-31 19:06:42,035 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 19:06:42,054 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:42,055 - poker_game - INFO - Hand #27, Phase: preflop
2025-10-31 19:06:42,056 - poker_game - INFO - Current player: 0, Dealer: 1
2025-10-31 19:06:42,057 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 19:06:42,057 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:42,057 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:42,058 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:42,059 - poker_game - INFO - Community cards: []
2025-10-31 19:06:42,060 - poker_game - INFO -   P0(Agent0): chips=12, bet=20, status=folded
2025-10-31 19:06:42,060 - poker_game - INFO -   P1(Agent1): chips=8197, bet=20, status=active
2025-10-31 19:06:42,061 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:42,061 - poker_game - INFO -   P3(Agent3): chips=1731, bet=20, status=active
2025-10-31 19:06:42,062 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:42,062 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 19:06:42,063 - poker_game - INFO - ==================================================
2025-10-31 19:06:42,063 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:42,064 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:42,065 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:06:42,065 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:06:42,066 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:42,066 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:42,068 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:42,068 - poker_game - DEBUG - Player bets: [20, 20], Current bet: 20, All same: True
2025-10-31 19:06:42,068 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 19:06:42,069 - poker_game - DEBUG - Last raiser index: 0
2025-10-31 19:06:42,069 - poker_game - DEBUG - Current player index: 1
2025-10-31 19:06:42,069 - poker_game - INFO - Betting complete: Last raiser 0 is no longer active
2025-10-31 19:06:42,071 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:42,072 - poker_game - INFO - Hand #27, Phase: preflop
2025-10-31 19:06:42,072 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:42,072 - poker_game - INFO - Pot: 60, Current bet: 20
2025-10-31 19:06:42,072 - poker_game - INFO - Last raiser: 0
2025-10-31 19:06:42,073 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:42,073 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:42,073 - poker_game - INFO - Community cards: []
2025-10-31 19:06:42,074 - poker_game - INFO -   P0(Agent0): chips=12, bet=20, status=folded
2025-10-31 19:06:42,074 - poker_game - INFO -   P1(Agent1): chips=8197, bet=20, status=active
2025-10-31 19:06:42,075 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:42,075 - poker_game - INFO -   P3(Agent3): chips=1731, bet=20, status=active
2025-10-31 19:06:42,075 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:42,075 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:06:42,076 - poker_game - INFO - ==================================================
2025-10-31 19:06:42,180 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 19:06:42,181 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:42,182 - poker_game - INFO - Remaining players: 2
2025-10-31 19:06:42,182 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:06:42,183 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:06:42,183 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 19:06:42,197 - poker_game - INFO - Starting new betting round
2025-10-31 19:06:42,197 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:06:42,198 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:06:42,198 - poker_game - DEBUG - Active players for new betting round: [1, 3]
2025-10-31 19:06:42,198 - poker_game - DEBUG - Dealer button: 1
2025-10-31 19:06:42,199 - poker_game - INFO - First actor: Player 3 (by phase rule), was 1
2025-10-31 19:06:42,199 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:06:42,199 - poker_game - INFO - Hand #27, Phase: flop
2025-10-31 19:06:42,200 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:42,201 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 19:06:42,201 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:42,202 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:42,202 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:42,203 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣']
2025-10-31 19:06:42,203 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:42,203 - poker_game - INFO -   P1(Agent1): chips=8197, bet=0, status=active
2025-10-31 19:06:42,204 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:42,204 - poker_game - INFO -   P3(Agent3): chips=1731, bet=0, status=active
2025-10-31 19:06:42,205 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:42,205 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 19:06:42,206 - poker_game - INFO - ==================================================
2025-10-31 19:06:42,207 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "flop",
  "your_cards": [
    "A♠",
    "9♦"
  ],
  "community": [
    "J♠",
    "K♠",
    "Q♣"
  ],
  "your_chips": 1731,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 60,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 12,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 8197,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1731)"
  ],
  "history": [
    "Player 0 folded",
    "Showdown: Player 1 won 430",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 called 20",
    "Player 1 raised to 120",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 160",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 called 10",
    "Player 0 folded",
    "Flop dealt: J♠, K♠, Q♣"
  ]
}
2025-10-31 19:06:42,223 - poker_game - DEBUG - Create Session: {'id': 'c1b7d1b3-0dd0-436a-881a-be3ec0b80453', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905202.22034}
2025-10-31 19:06:44,724 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、A♠K♠Q♠J♠とストレート（連続した数字の役）のフラッシュドロー（あと1枚でフラッシュになる役）が完成しました。これは非常に強い役になる可能性があり、相手のベット（賭け金）をコールするだけではポット（賭け金が集まった山）を大きくできません。相手がこの強い役を恐れてフォールド（降りる）するか、あるいはより強い役を持っている場合にコールやレイズ（さらに賭け金を上げる）をしてくることが期待できます。ここでは、ポットを大きくするために、相手のベット額（to_callが0なので、相手はまだベットしていません。これはチェックやレイズができる状況です）を考慮して、60にレイズします。これは「ベット」または「レイズ」とも言え、相手にアクションを促し、ポットを大きくする目的があります。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 228, 'promptTokenCount': 789, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 789}], 'totalTokenCount': 1017}, 'invocationId': 'e-6c93fd51-5a6f-44bc-bfd8-8ae48662ba76', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '9nKlbhGW', 'timestamp': 1761905202.2382}]
2025-10-31 19:06:44,724 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:06:44,724 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 60,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、A♠K♠Q♠J♠とストレート（連続した数字の役）のフラッシュドロー（あと1枚でフラッシュになる役）が完成しました。これは非常に強い役になる可能性があり、相手のベット（賭け金）をコールするだけではポット（賭け金が集まった山）を大きくできません。相手がこの強い役を恐れてフォールド（降りる）するか、あるいはより強い役を持っている場合にコールやレイズ（さらに賭け金を上げる）をしてくることが期待できます。ここでは、ポットを大きくするために、相手のベット額（to_callが0なので、相手はまだベットしていません。これはチェックやレイズができる状況です）を考慮して、60にレイズします。これは「ベット」または「レイズ」とも言え、相手にアクションを促し、ポットを大きくする目的があります。"
}
```
2025-10-31 19:06:44,725 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:06:44,725 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、A♠K♠Q♠J♠とストレート（連続した数字の役）のフラッシュドロー（あと1枚でフラッシュになる役）が完成しました。これは非常に強い役になる可能性があり、相手のベット（賭け金）をコールするだけではポット（賭け金が集まった山）を大きくできません。相手がこの強い役を恐れてフォールド（降りる）するか、あるいはより強い役を持っている場合にコールやレイズ（さらに賭け金を上げる）をしてくることが期待できます。ここでは、ポットを大きくするために、相手のベット額（to_callが0なので、相手はまだベットしていません。これはチェックやレイズができる状況です）を考慮して、60にレイズします。これは「ベット」または「レイズ」とも言え、相手にアクションを促し、ポットを大きくする目的があります。"\n}\n```'
2025-10-31 19:06:44,725 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:06:44,725 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 60,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、A♠K♠Q♠J♠とストレート（連続した数字の役）のフラッシュドロー（あと1枚でフラッシュになる役）が完成しました。これは非常に強い役になる可能性があり、相手のベット（賭け金）をコールするだけではポット（賭け金が集まった山）を大きくできません。相手がこの強い役を恐れてフォールド（降りる）するか、あるいはより強い役を持っている場合にコールやレイズ（さらに賭け金を上げる）をしてくることが期待できます。ここでは、ポットを大きくするために、相手のベット額（to_callが0なので、相手はまだベットしていません。これはチェックやレイズができる状況です）を考慮して、60にレイズします。これは「ベット」または「レイズ」とも言え、相手にアクションを促し、ポットを大きくする目的があります。"\n}'
2025-10-31 19:06:44,725 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "raise",
  "amount": 60,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、A♠K♠Q♠J♠とストレート（連続した数字の役）のフラッシュドロー（あと1枚でフラッシュになる役）が完成しました。これは非常に強い役になる可能性があり、相手のベット（賭け金）をコールするだけではポット（賭け金が集まった山）を大きくできません。相手がこの強い役を恐れてフォールド（降りる）するか、あるいはより強い役を持っている場合にコールやレイズ（さらに賭け金を上げる）をしてくることが期待できます。ここでは、ポットを大きくするために、相手のベット額（to_callが0なので、相手はまだベットしていません。これはチェックやレイズができる状況です）を考慮して、60にレイズします。これは「ベット」または「レイズ」とも言え、相手にアクションを促し、ポットを大きくする目的があります。"
}
2025-10-31 19:06:44,726 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'raise', 'amount': 60, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）で、A♠K♠Q♠J♠とストレート（連続した数字の役）のフラッシュドロー（あと1枚でフラッシュになる役）が完成しました。これは非常に強い役になる可能性があり、相手のベット（賭け金）をコールするだけではポット（賭け金が集まった山）を大きくできません。相手がこの強い役を恐れてフォールド（降りる）するか、あるいはより強い役を持っている場合にコールやレイズ（さらに賭け金を上げる）をしてくることが期待できます。ここでは、ポットを大きくするために、相手のベット額（to_callが0なので、相手はまだベットしていません。これはチェックやレイズができる状況です）を考慮して、60にレイズします。これは「ベット」または「レイズ」とも言え、相手にアクションを促し、ポットを大きくする目的があります。'}
2025-10-31 19:06:44,726 - poker_game - DEBUG - [Agent3] Extracted values - action: 'raise', amount: 60
2025-10-31 19:06:44,726 - poker_game - DEBUG - [Agent3] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1731)']
2025-10-31 19:06:44,726 - poker_game - DEBUG - [Agent3] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 19:06:44,726 - poker_game - DEBUG - [Agent3] Raise amount 60 is valid (min: 20)
2025-10-31 19:06:44,726 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'raise', 'amount': 60}
2025-10-31 19:06:44,727 - poker_game - INFO - [Agent3] Successfully parsed decision: raise, 60, フロップ（最初の3枚のコミュニティカード）で、A♠K♠Q♠J♠とストレート（連続した数字の役）のフラッシュドロー（あと1枚でフラッシュになる役）が完成しました。これは非常に強い役になる可能性があり、相手のベット（賭け金）をコールするだけではポット（賭け金が集まった山）を大きくできません。相手がこの強い役を恐れてフォールド（降りる）するか、あるいはより強い役を持っている場合にコールやレイズ（さらに賭け金を上げる）をしてくることが期待できます。ここでは、ポットを大きくするために、相手のベット額（to_callが0なので、相手はまだベットしていません。これはチェックやレイズができる状況です）を考慮して、60にレイズします。これは「ベット」または「レイズ」とも言え、相手にアクションを促し、ポットを大きくする目的があります。
2025-10-31 19:06:44,728 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'raise' with amount 60
2025-10-31 19:06:44,728 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:44,729 - poker_game - INFO - Hand #27, Phase: flop
2025-10-31 19:06:44,729 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:44,729 - poker_game - INFO - Pot: 60, Current bet: 0
2025-10-31 19:06:44,730 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:44,730 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:44,731 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:44,731 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣']
2025-10-31 19:06:44,732 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:44,734 - poker_game - INFO -   P1(Agent1): chips=8197, bet=0, status=active
2025-10-31 19:06:44,734 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:44,735 - poker_game - INFO -   P3(Agent3): chips=1731, bet=0, status=active
2025-10-31 19:06:44,735 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:44,735 - poker_game - INFO - ==================================================
2025-10-31 19:06:44,736 - poker_game - INFO - ACTION_EXECUTED: Player 3 raised to 60
2025-10-31 19:06:44,748 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:44,748 - poker_game - INFO - Hand #27, Phase: flop
2025-10-31 19:06:44,749 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:44,749 - poker_game - INFO - Pot: 120, Current bet: 60
2025-10-31 19:06:44,750 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:44,750 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:44,751 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:44,751 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣']
2025-10-31 19:06:44,752 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:44,752 - poker_game - INFO -   P1(Agent1): chips=8197, bet=0, status=active
2025-10-31 19:06:44,752 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:44,753 - poker_game - INFO -   P3(Agent3): chips=1671, bet=60, status=active
2025-10-31 19:06:44,753 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:44,754 - poker_game - INFO - Extra: Action: Player 3 raised to 60
2025-10-31 19:06:44,754 - poker_game - INFO - ==================================================
2025-10-31 19:06:44,754 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:44,755 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:44,755 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:06:44,755 - poker_game - INFO - Advanced from player 3 to player 1 (seat order)
2025-10-31 19:06:44,756 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:44,757 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:44,757 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:44,757 - poker_game - DEBUG - Player bets: [0, 60], Current bet: 60, All same: False
2025-10-31 19:06:44,758 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:06:44,758 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:44,758 - poker_game - INFO - Hand #27, Phase: flop
2025-10-31 19:06:44,758 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:44,759 - poker_game - INFO - Pot: 120, Current bet: 60
2025-10-31 19:06:44,760 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:44,760 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:44,761 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:44,761 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣']
2025-10-31 19:06:44,762 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:44,762 - poker_game - INFO -   P1(Agent1): chips=8197, bet=0, status=active
2025-10-31 19:06:44,763 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:44,764 - poker_game - INFO -   P3(Agent3): chips=1671, bet=60, status=active
2025-10-31 19:06:44,764 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:44,765 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:44,765 - poker_game - INFO - ==================================================
2025-10-31 19:06:44,873 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "flop",
  "your_cards": [
    "5♦",
    "10♥"
  ],
  "community": [
    "J♠",
    "K♠",
    "Q♣"
  ],
  "your_chips": 8197,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 20,
  "pot": 120,
  "to_call": 60,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 12,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1671,
      "bet": 60,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (60)",
    "raise (min 80)",
    "all-in (8197)"
  ],
  "history": [
    "Showdown: Player 1 won 430",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 called 20",
    "Player 1 raised to 120",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 160",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 called 10",
    "Player 0 folded",
    "Flop dealt: J♠, K♠, Q♣",
    "Player 3 raised to 60"
  ]
}
2025-10-31 19:06:44,886 - poker_game - DEBUG - Create Session: {'id': '75e6c8cf-5337-40dc-b6fa-cd45ec012dfc', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905204.8843222}
2025-10-31 19:06:46,753 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "フロップ（コミュニティカードが開かれた最初の段階）で、J、K、Qというストレート（連続した数字）が揃っています。私の手札は5と10なので、このストレートは完成しません。しかし、相手が60をベットしてきた状況で、コール（相手のベット額と同額を支払ってゲームを続けること）することで、次のカード（ターン）を見ることができます。これ以上レイズ（ベット額を上げる）やフォールド（ゲームから降りること）をするよりは、コールして相手の出方を見るのが最善と考えられます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 153, 'promptTokenCount': 800, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 800}], 'totalTokenCount': 953}, 'invocationId': 'e-3ae22c7c-4222-452d-ac29-f968ef394b70', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'OKc0uZDd', 'timestamp': 1761905204.895296}]
2025-10-31 19:06:46,753 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:06:46,754 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 60,
  "reasoning": "フロップ（コミュニティカードが開かれた最初の段階）で、J、K、Qというストレート（連続した数字）が揃っています。私の手札は5と10なので、このストレートは完成しません。しかし、相手が60をベットしてきた状況で、コール（相手のベット額と同額を支払ってゲームを続けること）することで、次のカード（ターン）を見ることができます。これ以上レイズ（ベット額を上げる）やフォールド（ゲームから降りること）をするよりは、コールして相手の出方を見るのが最善と考えられます。"
}
```
2025-10-31 19:06:46,754 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:06:46,754 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "フロップ（コミュニティカードが開かれた最初の段階）で、J、K、Qというストレート（連続した数字）が揃っています。私の手札は5と10なので、このストレートは完成しません。しかし、相手が60をベットしてきた状況で、コール（相手のベット額と同額を支払ってゲームを続けること）することで、次のカード（ターン）を見ることができます。これ以上レイズ（ベット額を上げる）やフォールド（ゲームから降りること）をするよりは、コールして相手の出方を見るのが最善と考えられます。"\n}\n```'
2025-10-31 19:06:46,754 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:06:46,754 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 60,\n  "reasoning": "フロップ（コミュニティカードが開かれた最初の段階）で、J、K、Qというストレート（連続した数字）が揃っています。私の手札は5と10なので、このストレートは完成しません。しかし、相手が60をベットしてきた状況で、コール（相手のベット額と同額を支払ってゲームを続けること）することで、次のカード（ターン）を見ることができます。これ以上レイズ（ベット額を上げる）やフォールド（ゲームから降りること）をするよりは、コールして相手の出方を見るのが最善と考えられます。"\n}'
2025-10-31 19:06:46,754 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 60,
  "reasoning": "フロップ（コミュニティカードが開かれた最初の段階）で、J、K、Qというストレート（連続した数字）が揃っています。私の手札は5と10なので、このストレートは完成しません。しかし、相手が60をベットしてきた状況で、コール（相手のベット額と同額を支払ってゲームを続けること）することで、次のカード（ターン）を見ることができます。これ以上レイズ（ベット額を上げる）やフォールド（ゲームから降りること）をするよりは、コールして相手の出方を見るのが最善と考えられます。"
}
2025-10-31 19:06:46,762 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 60, 'reasoning': 'フロップ（コミュニティカードが開かれた最初の段階）で、J、K、Qというストレート（連続した数字）が揃っています。私の手札は5と10なので、このストレートは完成しません。しかし、相手が60をベットしてきた状況で、コール（相手のベット額と同額を支払ってゲームを続けること）することで、次のカード（ターン）を見ることができます。これ以上レイズ（ベット額を上げる）やフォールド（ゲームから降りること）をするよりは、コールして相手の出方を見るのが最善と考えられます。'}
2025-10-31 19:06:46,762 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 60
2025-10-31 19:06:46,762 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'call (60)', 'raise (min 80)', 'all-in (8197)']
2025-10-31 19:06:46,763 - poker_game - DEBUG - [Agent1] Call amount extracted from 'call (60)': 60
2025-10-31 19:06:46,763 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 60}
2025-10-31 19:06:46,763 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 60, フロップ（コミュニティカードが開かれた最初の段階）で、J、K、Qというストレート（連続した数字）が揃っています。私の手札は5と10なので、このストレートは完成しません。しかし、相手が60をベットしてきた状況で、コール（相手のベット額と同額を支払ってゲームを続けること）することで、次のカード（ターン）を見ることができます。これ以上レイズ（ベット額を上げる）やフォールド（ゲームから降りること）をするよりは、コールして相手の出方を見るのが最善と考えられます。
2025-10-31 19:06:46,763 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 60
2025-10-31 19:06:46,764 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:46,764 - poker_game - INFO - Hand #27, Phase: flop
2025-10-31 19:06:46,764 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:46,764 - poker_game - INFO - Pot: 120, Current bet: 60
2025-10-31 19:06:46,765 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:46,765 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:46,765 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:46,765 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣']
2025-10-31 19:06:46,765 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:46,766 - poker_game - INFO -   P1(Agent1): chips=8197, bet=0, status=active
2025-10-31 19:06:46,766 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:46,766 - poker_game - INFO -   P3(Agent3): chips=1671, bet=60, status=active
2025-10-31 19:06:46,766 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:46,766 - poker_game - INFO - ==================================================
2025-10-31 19:06:46,766 - poker_game - INFO - ACTION_EXECUTED: Player 1 called 60
2025-10-31 19:06:46,791 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:46,791 - poker_game - INFO - Hand #27, Phase: flop
2025-10-31 19:06:46,792 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:46,792 - poker_game - INFO - Pot: 180, Current bet: 60
2025-10-31 19:06:46,792 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:46,793 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:46,793 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:46,793 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣']
2025-10-31 19:06:46,793 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:46,794 - poker_game - INFO -   P1(Agent1): chips=8137, bet=60, status=active
2025-10-31 19:06:46,794 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:46,794 - poker_game - INFO -   P3(Agent3): chips=1671, bet=60, status=active
2025-10-31 19:06:46,794 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:46,794 - poker_game - INFO - Extra: Action: Player 1 called 60
2025-10-31 19:06:46,794 - poker_game - INFO - ==================================================
2025-10-31 19:06:46,794 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:46,795 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:46,795 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:06:46,795 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:06:46,796 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:46,797 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:46,799 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:46,799 - poker_game - DEBUG - Player bets: [60, 60], Current bet: 60, All same: True
2025-10-31 19:06:46,799 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 19:06:46,799 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:46,799 - poker_game - INFO - Hand #27, Phase: flop
2025-10-31 19:06:46,799 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:46,800 - poker_game - INFO - Pot: 180, Current bet: 60
2025-10-31 19:06:46,800 - poker_game - INFO - Last raiser: 3
2025-10-31 19:06:46,800 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:46,800 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:46,801 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣']
2025-10-31 19:06:46,801 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:46,801 - poker_game - INFO -   P1(Agent1): chips=8137, bet=60, status=active
2025-10-31 19:06:46,801 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:46,801 - poker_game - INFO -   P3(Agent3): chips=1671, bet=60, status=active
2025-10-31 19:06:46,802 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:46,802 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:06:46,802 - poker_game - INFO - ==================================================
2025-10-31 19:06:46,903 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 19:06:46,904 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:46,904 - poker_game - INFO - Remaining players: 2
2025-10-31 19:06:46,905 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:06:46,905 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:06:46,905 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 19:06:46,921 - poker_game - INFO - Starting new betting round
2025-10-31 19:06:46,921 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:06:46,922 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:06:46,922 - poker_game - DEBUG - Active players for new betting round: [1, 3]
2025-10-31 19:06:46,923 - poker_game - DEBUG - Dealer button: 1
2025-10-31 19:06:46,923 - poker_game - INFO - First actor: Player 3 (by phase rule), was 3
2025-10-31 19:06:46,924 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:06:46,927 - poker_game - INFO - Hand #27, Phase: turn
2025-10-31 19:06:46,927 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:46,928 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:46,928 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:46,928 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:46,929 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:46,929 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣']
2025-10-31 19:06:46,929 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:46,929 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:46,929 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:46,930 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:46,930 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:46,930 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 19:06:46,930 - poker_game - INFO - ==================================================
2025-10-31 19:06:46,931 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "turn",
  "your_cards": [
    "A♠",
    "9♦"
  ],
  "community": [
    "J♠",
    "K♠",
    "Q♣",
    "8♣"
  ],
  "your_chips": 1671,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 180,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 12,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 8137,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1671)"
  ],
  "history": [
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 called 20",
    "Player 1 raised to 120",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 160",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 called 10",
    "Player 0 folded",
    "Flop dealt: J♠, K♠, Q♣",
    "Player 3 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 8♣"
  ]
}
2025-10-31 19:06:47,195 - poker_game - DEBUG - Create Session: {'id': 'dc25da4e-032d-4b4e-8c2a-7ef1f8706030', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905207.1925304}
2025-10-31 19:06:49,436 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "あなたの手札（A♠, 9♦）とコミュニティカード（J♠, K♠, Q♣, 8♣）を合わせると、ストレート（10♠, J♠, Q♠, K♠, A♠）が完成しています。これは非常に強いハンドです。現在の状況では、あなたはベットしておらず（your_bet_this_round: 0）、コールすべき金額もありません（to_call: 0）。相手（Player 1）もまだアクションを起こしていないので、チェック（check）をして、相手のアクションを見るのが最善です。これにより、相手がベットしてきた場合に、より多くの情報を得てから、ベット額に応じてコール（call）するか、レイズ（raise）するか、あるいはフォールド（fold）するかを判断できます。相手がチェックしてきた場合は、次のリバー（river）カードを見てから、さらに戦略を練ることができます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 218, 'promptTokenCount': 793, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 793}], 'totalTokenCount': 1011}, 'invocationId': 'e-3c84c671-4fe6-465c-b4cf-5b94edbf690a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '47wjCQja', 'timestamp': 1761905207.205678}]
2025-10-31 19:06:49,436 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:06:49,436 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "あなたの手札（A♠, 9♦）とコミュニティカード（J♠, K♠, Q♣, 8♣）を合わせると、ストレート（10♠, J♠, Q♠, K♠, A♠）が完成しています。これは非常に強いハンドです。現在の状況では、あなたはベットしておらず（your_bet_this_round: 0）、コールすべき金額もありません（to_call: 0）。相手（Player 1）もまだアクションを起こしていないので、チェック（check）をして、相手のアクションを見るのが最善です。これにより、相手がベットしてきた場合に、より多くの情報を得てから、ベット額に応じてコール（call）するか、レイズ（raise）するか、あるいはフォールド（fold）するかを判断できます。相手がチェックしてきた場合は、次のリバー（river）カードを見てから、さらに戦略を練ることができます。"
}
```
2025-10-31 19:06:49,436 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:06:49,437 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "あなたの手札（A♠, 9♦）とコミュニティカード（J♠, K♠, Q♣, 8♣）を合わせると、ストレート（10♠, J♠, Q♠, K♠, A♠）が完成しています。これは非常に強いハンドです。現在の状況では、あなたはベットしておらず（your_bet_this_round: 0）、コールすべき金額もありません（to_call: 0）。相手（Player 1）もまだアクションを起こしていないので、チェック（check）をして、相手のアクションを見るのが最善です。これにより、相手がベットしてきた場合に、より多くの情報を得てから、ベット額に応じてコール（call）するか、レイズ（raise）するか、あるいはフォールド（fold）するかを判断できます。相手がチェックしてきた場合は、次のリバー（river）カードを見てから、さらに戦略を練ることができます。"\n}\n```'
2025-10-31 19:06:49,437 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:06:49,437 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "あなたの手札（A♠, 9♦）とコミュニティカード（J♠, K♠, Q♣, 8♣）を合わせると、ストレート（10♠, J♠, Q♠, K♠, A♠）が完成しています。これは非常に強いハンドです。現在の状況では、あなたはベットしておらず（your_bet_this_round: 0）、コールすべき金額もありません（to_call: 0）。相手（Player 1）もまだアクションを起こしていないので、チェック（check）をして、相手のアクションを見るのが最善です。これにより、相手がベットしてきた場合に、より多くの情報を得てから、ベット額に応じてコール（call）するか、レイズ（raise）するか、あるいはフォールド（fold）するかを判断できます。相手がチェックしてきた場合は、次のリバー（river）カードを見てから、さらに戦略を練ることができます。"\n}'
2025-10-31 19:06:49,437 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "あなたの手札（A♠, 9♦）とコミュニティカード（J♠, K♠, Q♣, 8♣）を合わせると、ストレート（10♠, J♠, Q♠, K♠, A♠）が完成しています。これは非常に強いハンドです。現在の状況では、あなたはベットしておらず（your_bet_this_round: 0）、コールすべき金額もありません（to_call: 0）。相手（Player 1）もまだアクションを起こしていないので、チェック（check）をして、相手のアクションを見るのが最善です。これにより、相手がベットしてきた場合に、より多くの情報を得てから、ベット額に応じてコール（call）するか、レイズ（raise）するか、あるいはフォールド（fold）するかを判断できます。相手がチェックしてきた場合は、次のリバー（river）カードを見てから、さらに戦略を練ることができます。"
}
2025-10-31 19:06:49,437 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'あなたの手札（A♠, 9♦）とコミュニティカード（J♠, K♠, Q♣, 8♣）を合わせると、ストレート（10♠, J♠, Q♠, K♠, A♠）が完成しています。これは非常に強いハンドです。現在の状況では、あなたはベットしておらず（your_bet_this_round: 0）、コールすべき金額もありません（to_call: 0）。相手（Player 1）もまだアクションを起こしていないので、チェック（check）をして、相手のアクションを見るのが最善です。これにより、相手がベットしてきた場合に、より多くの情報を得てから、ベット額に応じてコール（call）するか、レイズ（raise）するか、あるいはフォールド（fold）するかを判断できます。相手がチェックしてきた場合は、次のリバー（river）カードを見てから、さらに戦略を練ることができます。'}
2025-10-31 19:06:49,437 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 19:06:49,437 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 19:06:49,437 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:06:49,437 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, あなたの手札（A♠, 9♦）とコミュニティカード（J♠, K♠, Q♣, 8♣）を合わせると、ストレート（10♠, J♠, Q♠, K♠, A♠）が完成しています。これは非常に強いハンドです。現在の状況では、あなたはベットしておらず（your_bet_this_round: 0）、コールすべき金額もありません（to_call: 0）。相手（Player 1）もまだアクションを起こしていないので、チェック（check）をして、相手のアクションを見るのが最善です。これにより、相手がベットしてきた場合に、より多くの情報を得てから、ベット額に応じてコール（call）するか、レイズ（raise）するか、あるいはフォールド（fold）するかを判断できます。相手がチェックしてきた場合は、次のリバー（river）カードを見てから、さらに戦略を練ることができます。
2025-10-31 19:06:49,438 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 19:06:49,438 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:49,438 - poker_game - INFO - Hand #27, Phase: turn
2025-10-31 19:06:49,439 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:49,439 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:49,439 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:49,439 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:49,439 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:49,439 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣']
2025-10-31 19:06:49,440 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:49,440 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:49,440 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:49,440 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:49,440 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:49,441 - poker_game - INFO - ==================================================
2025-10-31 19:06:49,441 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 19:06:49,460 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:49,460 - poker_game - INFO - Hand #27, Phase: turn
2025-10-31 19:06:49,460 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:49,460 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:49,461 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:49,461 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:49,461 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:49,461 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣']
2025-10-31 19:06:49,462 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:49,462 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:49,462 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:49,462 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:49,462 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:49,463 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 19:06:49,463 - poker_game - INFO - ==================================================
2025-10-31 19:06:49,463 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:49,463 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:49,463 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:06:49,463 - poker_game - INFO - Advanced from player 3 to player 1 (seat order)
2025-10-31 19:06:49,464 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:49,464 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:49,464 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:49,464 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 19:06:49,465 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 19:06:49,465 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:06:49,465 - poker_game - DEBUG - Current player index: 1
2025-10-31 19:06:49,465 - poker_game - DEBUG - First actor index: 3
2025-10-31 19:06:49,465 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 3
2025-10-31 19:06:49,466 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:49,466 - poker_game - INFO - Hand #27, Phase: turn
2025-10-31 19:06:49,466 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:49,466 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:49,466 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:49,466 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:49,468 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:49,469 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣']
2025-10-31 19:06:49,469 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:49,470 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:49,470 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:49,471 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:49,471 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:49,472 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:49,472 - poker_game - INFO - ==================================================
2025-10-31 19:06:49,578 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "turn",
  "your_cards": [
    "5♦",
    "10♥"
  ],
  "community": [
    "J♠",
    "K♠",
    "Q♣",
    "8♣"
  ],
  "your_chips": 8137,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 180,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 12,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1671,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (8137)"
  ],
  "history": [
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 called 20",
    "Player 1 raised to 120",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 160",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 called 10",
    "Player 0 folded",
    "Flop dealt: J♠, K♠, Q♣",
    "Player 3 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 8♣",
    "Player 3 checked"
  ]
}
2025-10-31 19:06:49,757 - poker_game - DEBUG - Create Session: {'id': 'd848f25d-366f-416d-85fa-014154c17822', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905209.7542038}
2025-10-31 19:06:51,406 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップでJ, K, Qが出ている状況で、このカードでストレート（5-6-7-8-9や10-J-Q-K-Aなど）が完成する可能性はありません。しかし、相手はチェックをしたので、さらなるベットなしでこのターンを終了し、リバーカードを見るのが最善です。相手のベットがないため、コール（この場合はチェックと同じ）を選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 122, 'promptTokenCount': 789, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 789}], 'totalTokenCount': 911}, 'invocationId': 'e-d258c306-2341-44e5-af9c-08f83552f4ad', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'UcIqiZlb', 'timestamp': 1761905209.76755}]
2025-10-31 19:06:51,406 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:06:51,406 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "フロップでJ, K, Qが出ている状況で、このカードでストレート（5-6-7-8-9や10-J-Q-K-Aなど）が完成する可能性はありません。しかし、相手はチェックをしたので、さらなるベットなしでこのターンを終了し、リバーカードを見るのが最善です。相手のベットがないため、コール（この場合はチェックと同じ）を選択します。"
}
```
2025-10-31 19:06:51,407 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:06:51,407 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップでJ, K, Qが出ている状況で、このカードでストレート（5-6-7-8-9や10-J-Q-K-Aなど）が完成する可能性はありません。しかし、相手はチェックをしたので、さらなるベットなしでこのターンを終了し、リバーカードを見るのが最善です。相手のベットがないため、コール（この場合はチェックと同じ）を選択します。"\n}\n```'
2025-10-31 19:06:51,407 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:06:51,407 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップでJ, K, Qが出ている状況で、このカードでストレート（5-6-7-8-9や10-J-Q-K-Aなど）が完成する可能性はありません。しかし、相手はチェックをしたので、さらなるベットなしでこのターンを終了し、リバーカードを見るのが最善です。相手のベットがないため、コール（この場合はチェックと同じ）を選択します。"\n}'
2025-10-31 19:06:51,407 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "フロップでJ, K, Qが出ている状況で、このカードでストレート（5-6-7-8-9や10-J-Q-K-Aなど）が完成する可能性はありません。しかし、相手はチェックをしたので、さらなるベットなしでこのターンを終了し、リバーカードを見るのが最善です。相手のベットがないため、コール（この場合はチェックと同じ）を選択します。"
}
2025-10-31 19:06:51,407 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'フロップでJ, K, Qが出ている状況で、このカードでストレート（5-6-7-8-9や10-J-Q-K-Aなど）が完成する可能性はありません。しかし、相手はチェックをしたので、さらなるベットなしでこのターンを終了し、リバーカードを見るのが最善です。相手のベットがないため、コール（この場合はチェックと同じ）を選択します。'}
2025-10-31 19:06:51,407 - poker_game - DEBUG - [Agent1] Extracted values - action: 'call', amount: 0
2025-10-31 19:06:51,407 - poker_game - DEBUG - [Agent1] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (8137)']
2025-10-31 19:06:51,407 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 19:06:51,407 - poker_game - INFO - [Agent1] Successfully parsed decision: call, 0, フロップでJ, K, Qが出ている状況で、このカードでストレート（5-6-7-8-9や10-J-Q-K-Aなど）が完成する可能性はありません。しかし、相手はチェックをしたので、さらなるベットなしでこのターンを終了し、リバーカードを見るのが最善です。相手のベットがないため、コール（この場合はチェックと同じ）を選択します。
2025-10-31 19:06:51,408 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'call' with amount 0
2025-10-31 19:06:51,409 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:51,409 - poker_game - INFO - Hand #27, Phase: turn
2025-10-31 19:06:51,409 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:51,409 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:51,409 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:51,410 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:51,410 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:51,411 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣']
2025-10-31 19:06:51,411 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:51,411 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:51,411 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:51,412 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:51,412 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:51,412 - poker_game - INFO - ==================================================
2025-10-31 19:06:51,412 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 19:06:51,432 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:51,432 - poker_game - INFO - Hand #27, Phase: turn
2025-10-31 19:06:51,432 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:51,433 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:51,433 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:51,433 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:51,433 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:51,433 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣']
2025-10-31 19:06:51,434 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:51,434 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:51,434 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:51,434 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:51,435 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:51,435 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 19:06:51,435 - poker_game - INFO - ==================================================
2025-10-31 19:06:51,435 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:51,435 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:51,435 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:06:51,435 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:06:51,436 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:51,436 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:51,436 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:51,436 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 19:06:51,436 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 19:06:51,436 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:06:51,436 - poker_game - DEBUG - Current player index: 3
2025-10-31 19:06:51,436 - poker_game - DEBUG - First actor index: 3
2025-10-31 19:06:51,436 - poker_game - INFO - Betting complete: Back to first actor 3 (all players have acted)
2025-10-31 19:06:51,437 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:51,437 - poker_game - INFO - Hand #27, Phase: turn
2025-10-31 19:06:51,437 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:51,437 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:51,438 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:51,438 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:51,438 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:51,438 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣']
2025-10-31 19:06:51,438 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:51,438 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:51,439 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:51,439 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:51,439 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:51,439 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:06:51,439 - poker_game - INFO - ==================================================
2025-10-31 19:06:51,540 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 19:06:51,541 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:51,541 - poker_game - INFO - Remaining players: 2
2025-10-31 19:06:51,541 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:06:51,541 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:06:51,541 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 19:06:51,551 - poker_game - INFO - Starting new betting round
2025-10-31 19:06:51,551 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:06:51,552 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:06:51,552 - poker_game - DEBUG - Active players for new betting round: [1, 3]
2025-10-31 19:06:51,552 - poker_game - DEBUG - Dealer button: 1
2025-10-31 19:06:51,553 - poker_game - INFO - First actor: Player 3 (by phase rule), was 3
2025-10-31 19:06:51,553 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:06:51,553 - poker_game - INFO - Hand #27, Phase: river
2025-10-31 19:06:51,554 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:51,554 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:51,554 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:51,554 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:51,555 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:51,555 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣', '6♦']
2025-10-31 19:06:51,555 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:51,556 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:51,556 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:51,556 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:51,556 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:51,557 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 19:06:51,557 - poker_game - INFO - ==================================================
2025-10-31 19:06:51,557 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "river",
  "your_cards": [
    "A♠",
    "9♦"
  ],
  "community": [
    "J♠",
    "K♠",
    "Q♣",
    "8♣",
    "6♦"
  ],
  "your_chips": 1671,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 180,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 12,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 1,
      "chips": 8137,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1671)"
  ],
  "history": [
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 called 20",
    "Player 1 raised to 120",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 160",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 called 10",
    "Player 0 folded",
    "Flop dealt: J♠, K♠, Q♣",
    "Player 3 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 8♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 6♦"
  ]
}
2025-10-31 19:06:51,572 - poker_game - DEBUG - Create Session: {'id': '2b4af0c6-a000-4200-bdd8-4b871a17f026', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905211.5685873}
2025-10-31 19:06:54,199 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況です。あなたの手札はA♠9♦で、コミュニティカードはJ♠K♠Q♣8♣6♦です。これにより、あなたはストレート（8-9-10-J-Q）やフラッシュ（スペードのA, J, K, Q）を作ることはできません。ボードには8♣と6♦があり、あなたの手札の9♦はペアを作ることもできません。しかし、ボードのコミュニティカードはJ, K, Q, 8, 6であり、これらは連続した数字ではありません。あなたの手札のA♠とコミュニティカードのJ♠, K♠, Q♠で、フラッシュ（同じマークのカードが5枚揃うこと）の可能性もありません。あなたの手札は、ボードのカードとの組み合わせで、強い役を作ることはできません。対戦相手はプレイヤー1のみで、彼はアクティブな状態です。ポットは180で、コールする必要はありません（to_callが0）。この状況では、これ以上ベットしても勝てる可能性は低いと判断し、チェック（ベットせずに次のプレイヤーにアクションを渡すこと）を選択するのが最善です。もし相手がベットしてきた場合は、フォールド（手札を捨ててこのハンドから降りること）を検討することになります。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 311, 'promptTokenCount': 796, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 796}], 'totalTokenCount': 1107}, 'invocationId': 'e-eb7d3dbf-02ac-47a0-bf87-1d13bf489b5a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'b3Vmem0f', 'timestamp': 1761905211.581128}]
2025-10-31 19:06:54,200 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:06:54,201 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況です。あなたの手札はA♠9♦で、コミュニティカードはJ♠K♠Q♣8♣6♦です。これにより、あなたはストレート（8-9-10-J-Q）やフラッシュ（スペードのA, J, K, Q）を作ることはできません。ボードには8♣と6♦があり、あなたの手札の9♦はペアを作ることもできません。しかし、ボードのコミュニティカードはJ, K, Q, 8, 6であり、これらは連続した数字ではありません。あなたの手札のA♠とコミュニティカードのJ♠, K♠, Q♠で、フラッシュ（同じマークのカードが5枚揃うこと）の可能性もありません。あなたの手札は、ボードのカードとの組み合わせで、強い役を作ることはできません。対戦相手はプレイヤー1のみで、彼はアクティブな状態です。ポットは180で、コールする必要はありません（to_callが0）。この状況では、これ以上ベットしても勝てる可能性は低いと判断し、チェック（ベットせずに次のプレイヤーにアクションを渡すこと）を選択するのが最善です。もし相手がベットしてきた場合は、フォールド（手札を捨ててこのハンドから降りること）を検討することになります。"
}
```
2025-10-31 19:06:54,201 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:06:54,202 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況です。あなたの手札はA♠9♦で、コミュニティカードはJ♠K♠Q♣8♣6♦です。これにより、あなたはストレート（8-9-10-J-Q）やフラッシュ（スペードのA, J, K, Q）を作ることはできません。ボードには8♣と6♦があり、あなたの手札の9♦はペアを作ることもできません。しかし、ボードのコミュニティカードはJ, K, Q, 8, 6であり、これらは連続した数字ではありません。あなたの手札のA♠とコミュニティカードのJ♠, K♠, Q♠で、フラッシュ（同じマークのカードが5枚揃うこと）の可能性もありません。あなたの手札は、ボードのカードとの組み合わせで、強い役を作ることはできません。対戦相手はプレイヤー1のみで、彼はアクティブな状態です。ポットは180で、コールする必要はありません（to_callが0）。この状況では、これ以上ベットしても勝てる可能性は低いと判断し、チェック（ベットせずに次のプレイヤーにアクションを渡すこと）を選択するのが最善です。もし相手がベットしてきた場合は、フォールド（手札を捨ててこのハンドから降りること）を検討することになります。"\n}\n```'
2025-10-31 19:06:54,202 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:06:54,205 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況です。あなたの手札はA♠9♦で、コミュニティカードはJ♠K♠Q♣8♣6♦です。これにより、あなたはストレート（8-9-10-J-Q）やフラッシュ（スペードのA, J, K, Q）を作ることはできません。ボードには8♣と6♦があり、あなたの手札の9♦はペアを作ることもできません。しかし、ボードのコミュニティカードはJ, K, Q, 8, 6であり、これらは連続した数字ではありません。あなたの手札のA♠とコミュニティカードのJ♠, K♠, Q♠で、フラッシュ（同じマークのカードが5枚揃うこと）の可能性もありません。あなたの手札は、ボードのカードとの組み合わせで、強い役を作ることはできません。対戦相手はプレイヤー1のみで、彼はアクティブな状態です。ポットは180で、コールする必要はありません（to_callが0）。この状況では、これ以上ベットしても勝てる可能性は低いと判断し、チェック（ベットせずに次のプレイヤーにアクションを渡すこと）を選択するのが最善です。もし相手がベットしてきた場合は、フォールド（手札を捨ててこのハンドから降りること）を検討することになります。"\n}'
2025-10-31 19:06:54,207 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最後のコミュニティカードが配られた後）の状況です。あなたの手札はA♠9♦で、コミュニティカードはJ♠K♠Q♣8♣6♦です。これにより、あなたはストレート（8-9-10-J-Q）やフラッシュ（スペードのA, J, K, Q）を作ることはできません。ボードには8♣と6♦があり、あなたの手札の9♦はペアを作ることもできません。しかし、ボードのコミュニティカードはJ, K, Q, 8, 6であり、これらは連続した数字ではありません。あなたの手札のA♠とコミュニティカードのJ♠, K♠, Q♠で、フラッシュ（同じマークのカードが5枚揃うこと）の可能性もありません。あなたの手札は、ボードのカードとの組み合わせで、強い役を作ることはできません。対戦相手はプレイヤー1のみで、彼はアクティブな状態です。ポットは180で、コールする必要はありません（to_callが0）。この状況では、これ以上ベットしても勝てる可能性は低いと判断し、チェック（ベットせずに次のプレイヤーにアクションを渡すこと）を選択するのが最善です。もし相手がベットしてきた場合は、フォールド（手札を捨ててこのハンドから降りること）を検討することになります。"
}
2025-10-31 19:06:54,207 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最後のコミュニティカードが配られた後）の状況です。あなたの手札はA♠9♦で、コミュニティカードはJ♠K♠Q♣8♣6♦です。これにより、あなたはストレート（8-9-10-J-Q）やフラッシュ（スペードのA, J, K, Q）を作ることはできません。ボードには8♣と6♦があり、あなたの手札の9♦はペアを作ることもできません。しかし、ボードのコミュニティカードはJ, K, Q, 8, 6であり、これらは連続した数字ではありません。あなたの手札のA♠とコミュニティカードのJ♠, K♠, Q♠で、フラッシュ（同じマークのカードが5枚揃うこと）の可能性もありません。あなたの手札は、ボードのカードとの組み合わせで、強い役を作ることはできません。対戦相手はプレイヤー1のみで、彼はアクティブな状態です。ポットは180で、コールする必要はありません（to_callが0）。この状況では、これ以上ベットしても勝てる可能性は低いと判断し、チェック（ベットせずに次のプレイヤーにアクションを渡すこと）を選択するのが最善です。もし相手がベットしてきた場合は、フォールド（手札を捨ててこのハンドから降りること）を検討することになります。'}
2025-10-31 19:06:54,207 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 19:06:54,207 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 19:06:54,208 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:06:54,208 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, リバー（最後のコミュニティカードが配られた後）の状況です。あなたの手札はA♠9♦で、コミュニティカードはJ♠K♠Q♣8♣6♦です。これにより、あなたはストレート（8-9-10-J-Q）やフラッシュ（スペードのA, J, K, Q）を作ることはできません。ボードには8♣と6♦があり、あなたの手札の9♦はペアを作ることもできません。しかし、ボードのコミュニティカードはJ, K, Q, 8, 6であり、これらは連続した数字ではありません。あなたの手札のA♠とコミュニティカードのJ♠, K♠, Q♠で、フラッシュ（同じマークのカードが5枚揃うこと）の可能性もありません。あなたの手札は、ボードのカードとの組み合わせで、強い役を作ることはできません。対戦相手はプレイヤー1のみで、彼はアクティブな状態です。ポットは180で、コールする必要はありません（to_callが0）。この状況では、これ以上ベットしても勝てる可能性は低いと判断し、チェック（ベットせずに次のプレイヤーにアクションを渡すこと）を選択するのが最善です。もし相手がベットしてきた場合は、フォールド（手札を捨ててこのハンドから降りること）を検討することになります。
2025-10-31 19:06:54,208 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 19:06:54,209 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:54,210 - poker_game - INFO - Hand #27, Phase: river
2025-10-31 19:06:54,210 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:54,210 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:54,210 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:54,210 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:54,210 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:54,211 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣', '6♦']
2025-10-31 19:06:54,211 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:54,211 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:54,211 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:54,211 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:54,211 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:54,211 - poker_game - INFO - ==================================================
2025-10-31 19:06:54,211 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 19:06:54,231 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:54,231 - poker_game - INFO - Hand #27, Phase: river
2025-10-31 19:06:54,232 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:54,232 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:54,232 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:54,233 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:54,233 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:54,233 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣', '6♦']
2025-10-31 19:06:54,233 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:54,234 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:54,234 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:54,235 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:54,235 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:54,235 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 19:06:54,236 - poker_game - INFO - ==================================================
2025-10-31 19:06:54,236 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:54,236 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:54,237 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:06:54,237 - poker_game - INFO - Advanced from player 3 to player 1 (seat order)
2025-10-31 19:06:54,237 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:54,237 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:54,238 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:54,238 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 19:06:54,238 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 19:06:54,238 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:06:54,239 - poker_game - DEBUG - Current player index: 1
2025-10-31 19:06:54,239 - poker_game - DEBUG - First actor index: 3
2025-10-31 19:06:54,239 - poker_game - DEBUG - Betting continues: Current player 1 != first actor 3
2025-10-31 19:06:54,239 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:54,240 - poker_game - INFO - Hand #27, Phase: river
2025-10-31 19:06:54,240 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:54,240 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:54,241 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:54,241 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:54,242 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:54,243 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣', '6♦']
2025-10-31 19:06:54,243 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:54,244 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:54,244 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:54,245 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:54,245 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:54,245 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:54,246 - poker_game - INFO - ==================================================
2025-10-31 19:06:54,347 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "river",
  "your_cards": [
    "5♦",
    "10♥"
  ],
  "community": [
    "J♠",
    "K♠",
    "Q♣",
    "8♣",
    "6♦"
  ],
  "your_chips": 8137,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 80,
  "pot": 180,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 12,
      "bet": 0,
      "status": "folded"
    },
    {
      "id": 3,
      "chips": 1671,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (8137)"
  ],
  "history": [
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 called 20",
    "Player 1 raised to 120",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 160",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 called 10",
    "Player 0 folded",
    "Flop dealt: J♠, K♠, Q♣",
    "Player 3 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 8♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 6♦",
    "Player 3 checked"
  ]
}
2025-10-31 19:06:54,536 - poker_game - DEBUG - Create Session: {'id': '98845924-44db-4e42-8feb-4e6bfc0589e6', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905214.5322495}
2025-10-31 19:06:56,088 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、コミュニティカード（J♠ K♠ Q♣ 8♣ 6♦）と自分の手札（5♦ 10♥）を合わせて、ストレート（10 J Q K 6）が完成しました。相手（Player 3）はチェックしているので、こちらもチェックして、ポットを失わずにショーダウン（カード公開）に進みます。これは、相手がより強い役を持っている可能性を考慮し、無駄なベットを避けるための戦略です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 138, 'promptTokenCount': 791, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 791}], 'totalTokenCount': 929}, 'invocationId': 'e-d7965d6e-a1e5-4ce6-b36c-e546c6dc13b1', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'v14PJcvf', 'timestamp': 1761905214.548003}]
2025-10-31 19:06:56,088 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:06:56,089 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ラウンド）で、コミュニティカード（J♠ K♠ Q♣ 8♣ 6♦）と自分の手札（5♦ 10♥）を合わせて、ストレート（10 J Q K 6）が完成しました。相手（Player 3）はチェックしているので、こちらもチェックして、ポットを失わずにショーダウン（カード公開）に進みます。これは、相手がより強い役を持っている可能性を考慮し、無駄なベットを避けるための戦略です。"
}
```
2025-10-31 19:06:56,089 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:06:56,089 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、コミュニティカード（J♠ K♠ Q♣ 8♣ 6♦）と自分の手札（5♦ 10♥）を合わせて、ストレート（10 J Q K 6）が完成しました。相手（Player 3）はチェックしているので、こちらもチェックして、ポットを失わずにショーダウン（カード公開）に進みます。これは、相手がより強い役を持っている可能性を考慮し、無駄なベットを避けるための戦略です。"\n}\n```'
2025-10-31 19:06:56,089 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:06:56,090 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最終ラウンド）で、コミュニティカード（J♠ K♠ Q♣ 8♣ 6♦）と自分の手札（5♦ 10♥）を合わせて、ストレート（10 J Q K 6）が完成しました。相手（Player 3）はチェックしているので、こちらもチェックして、ポットを失わずにショーダウン（カード公開）に進みます。これは、相手がより強い役を持っている可能性を考慮し、無駄なベットを避けるための戦略です。"\n}'
2025-10-31 19:06:56,090 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最終ラウンド）で、コミュニティカード（J♠ K♠ Q♣ 8♣ 6♦）と自分の手札（5♦ 10♥）を合わせて、ストレート（10 J Q K 6）が完成しました。相手（Player 3）はチェックしているので、こちらもチェックして、ポットを失わずにショーダウン（カード公開）に進みます。これは、相手がより強い役を持っている可能性を考慮し、無駄なベットを避けるための戦略です。"
}
2025-10-31 19:06:56,090 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最終ラウンド）で、コミュニティカード（J♠ K♠ Q♣ 8♣ 6♦）と自分の手札（5♦ 10♥）を合わせて、ストレート（10 J Q K 6）が完成しました。相手（Player 3）はチェックしているので、こちらもチェックして、ポットを失わずにショーダウン（カード公開）に進みます。これは、相手がより強い役を持っている可能性を考慮し、無駄なベットを避けるための戦略です。'}
2025-10-31 19:06:56,090 - poker_game - DEBUG - [Agent1] Extracted values - action: 'check', amount: 0
2025-10-31 19:06:56,090 - poker_game - DEBUG - [Agent1] Action 'check' normalized - amount set to 0
2025-10-31 19:06:56,090 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:06:56,090 - poker_game - INFO - [Agent1] Successfully parsed decision: check, 0, リバー（最終ラウンド）で、コミュニティカード（J♠ K♠ Q♣ 8♣ 6♦）と自分の手札（5♦ 10♥）を合わせて、ストレート（10 J Q K 6）が完成しました。相手（Player 3）はチェックしているので、こちらもチェックして、ポットを失わずにショーダウン（カード公開）に進みます。これは、相手がより強い役を持っている可能性を考慮し、無駄なベットを避けるための戦略です。
2025-10-31 19:06:56,091 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'check' with amount 0
2025-10-31 19:06:56,091 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:56,092 - poker_game - INFO - Hand #27, Phase: river
2025-10-31 19:06:56,092 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:56,092 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:56,092 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:56,092 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:56,093 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:56,093 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣', '6♦']
2025-10-31 19:06:56,093 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:56,093 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:56,094 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:56,094 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:56,094 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:56,094 - poker_game - INFO - ==================================================
2025-10-31 19:06:56,094 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 19:06:56,101 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:56,102 - poker_game - INFO - Hand #27, Phase: river
2025-10-31 19:06:56,102 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:06:56,102 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:56,103 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:56,103 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:56,103 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:56,104 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣', '6♦']
2025-10-31 19:06:56,104 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:56,104 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:56,104 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:56,105 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:56,105 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:56,105 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 19:06:56,105 - poker_game - INFO - ==================================================
2025-10-31 19:06:56,106 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:56,106 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:56,106 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:06:56,106 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:06:56,107 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:56,107 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:56,107 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:56,107 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 19:06:56,107 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 19:06:56,107 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:06:56,107 - poker_game - DEBUG - Current player index: 3
2025-10-31 19:06:56,107 - poker_game - DEBUG - First actor index: 3
2025-10-31 19:06:56,107 - poker_game - INFO - Betting complete: Back to first actor 3 (all players have acted)
2025-10-31 19:06:56,108 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:56,108 - poker_game - INFO - Hand #27, Phase: river
2025-10-31 19:06:56,108 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:56,108 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:56,109 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:56,109 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:56,109 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:56,110 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣', '6♦']
2025-10-31 19:06:56,110 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:56,110 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:56,111 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:56,111 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:56,111 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:56,111 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:06:56,112 - poker_game - INFO - ==================================================
2025-10-31 19:06:56,213 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 19:06:56,213 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:56,214 - poker_game - INFO - Remaining players: 2
2025-10-31 19:06:56,214 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:06:56,214 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:06:56,215 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 19:06:56,215 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 19:06:56,215 - poker_game - INFO - Hand #27, Phase: showdown
2025-10-31 19:06:56,216 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:06:56,216 - poker_game - INFO - Pot: 180, Current bet: 0
2025-10-31 19:06:56,216 - poker_game - INFO - Last raiser: None
2025-10-31 19:06:56,217 - poker_game - INFO - Betting round complete: True
2025-10-31 19:06:56,217 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:56,217 - poker_game - INFO - Community cards: ['J♠', 'K♠', 'Q♣', '8♣', '6♦']
2025-10-31 19:06:56,218 - poker_game - INFO -   P0(Agent0): chips=12, bet=0, status=folded
2025-10-31 19:06:56,218 - poker_game - INFO -   P1(Agent1): chips=8137, bet=0, status=active
2025-10-31 19:06:56,218 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:56,219 - poker_game - INFO -   P3(Agent3): chips=1671, bet=0, status=active
2025-10-31 19:06:56,219 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:56,220 - poker_game - INFO - ==================================================
2025-10-31 19:06:56,220 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 19:06:56,220 - poker_game - INFO - Pot: 180, Community cards: ['J♠', 'K♠', 'Q♣', '8♣', '6♦']
2025-10-31 19:06:56,221 - poker_game - INFO -   Player 1 status=active cards=['5♦', '10♥']
2025-10-31 19:06:56,222 - poker_game - INFO -   Player 3 status=active cards=['A♠', '9♦']
2025-10-31 19:06:56,225 - poker_game - INFO -   Player 1 hand=High Card: K♠ - K♠, Q♣, J♠, 10♥, 8♣ cards=['5♦', '10♥']
2025-10-31 19:06:56,226 - poker_game - INFO -   Player 3 hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦ cards=['A♠', '9♦']
2025-10-31 19:06:56,227 - poker_game - INFO - Pot layer 0: amount=60, contributors=[0, 1, 3]
2025-10-31 19:06:56,227 - poker_game - INFO - Pot layer 1: amount=120, contributors=[1, 3]
2025-10-31 19:06:56,228 - poker_game - INFO - Showdown total awarded: 180 (game.pot=180)
2025-10-31 19:06:56,229 - poker_game - INFO - Showdown winners (aggregated): [3]
2025-10-31 19:06:56,229 - poker_game - INFO -   Awarded 180 to Player 3 (hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦)
2025-10-31 19:06:56,230 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 19:06:56,259 - poker_game - INFO - === STARTING NEW HAND #28 ===
2025-10-31 19:06:56,260 - poker_game - INFO - Active players for new hand: 3
2025-10-31 19:06:56,261 - poker_game - INFO - Moving dealer button
2025-10-31 19:06:56,261 - poker_game - INFO - Posting blinds
2025-10-31 19:06:56,282 - poker_game - INFO - Dealing hole cards
2025-10-31 19:06:56,283 - poker_game - INFO - Setting first actor for preflop
2025-10-31 19:06:56,292 - poker_game - INFO - Started new hand in database: hand_id=28
2025-10-31 19:06:56,293 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 19:06:56,293 - poker_game - INFO - Hand #28, Phase: preflop
2025-10-31 19:06:56,294 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 19:06:56,294 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:56,295 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:56,295 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:56,296 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:56,296 - poker_game - INFO - Community cards: []
2025-10-31 19:06:56,297 - poker_game - INFO -   P0(Agent0): chips=2, bet=10, status=active
2025-10-31 19:06:56,297 - poker_game - INFO -   P1(Agent1): chips=8117, bet=20, status=active
2025-10-31 19:06:56,297 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:56,298 - poker_game - INFO -   P3(Agent3): chips=1851, bet=0, status=active
2025-10-31 19:06:56,298 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:56,299 - poker_game - INFO - ==================================================
2025-10-31 19:06:56,300 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "A♥",
    "7♣"
  ],
  "community": [],
  "your_chips": 1851,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 3,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 2,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 1,
      "chips": 8117,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (20)",
    "raise (min 40)",
    "all-in (1851)"
  ],
  "history": [
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 called 10",
    "Player 0 folded",
    "Flop dealt: J♠, K♠, Q♣",
    "Player 3 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 8♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 6♦",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♠ - K♠, Q♣, J♠, 10♥, 8♣ cards=5♦, 10♥",
    "Showdown: Player 3 hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦ cards=A♠, 9♦",
    "Side pot layer 0: amount=60, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Side pot layer 1: amount=120, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20"
  ]
}
2025-10-31 19:06:56,313 - poker_game - DEBUG - Create Session: {'id': '7395c54e-7d6b-40f9-b107-31f74d9c07e1', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905216.3112645}
2025-10-31 19:06:59,318 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopでは、A♥7♣は弱いハンドであり、レイズに対してコールするのは不利です。ポットサイズも小さく、リスクに見合うリターンが期待できません。相手のチップ量も多いので、無理せずフォールドします。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 81, 'promptTokenCount': 886, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 886}], 'totalTokenCount': 967}, 'invocationId': 'e-ca137507-1f60-4715-bfba-e8b64ac16173', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'UG5sByoC', 'timestamp': 1761905216.323856}]
2025-10-31 19:06:59,319 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:06:59,319 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "Preflopでは、A♥7♣は弱いハンドであり、レイズに対してコールするのは不利です。ポットサイズも小さく、リスクに見合うリターンが期待できません。相手のチップ量も多いので、無理せずフォールドします。"
}
```
2025-10-31 19:06:59,320 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:06:59,320 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopでは、A♥7♣は弱いハンドであり、レイズに対してコールするのは不利です。ポットサイズも小さく、リスクに見合うリターンが期待できません。相手のチップ量も多いので、無理せずフォールドします。"\n}\n```'
2025-10-31 19:06:59,320 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:06:59,320 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "Preflopでは、A♥7♣は弱いハンドであり、レイズに対してコールするのは不利です。ポットサイズも小さく、リスクに見合うリターンが期待できません。相手のチップ量も多いので、無理せずフォールドします。"\n}'
2025-10-31 19:06:59,320 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "Preflopでは、A♥7♣は弱いハンドであり、レイズに対してコールするのは不利です。ポットサイズも小さく、リスクに見合うリターンが期待できません。相手のチップ量も多いので、無理せずフォールドします。"
}
2025-10-31 19:06:59,321 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'Preflopでは、A♥7♣は弱いハンドであり、レイズに対してコールするのは不利です。ポットサイズも小さく、リスクに見合うリターンが期待できません。相手のチップ量も多いので、無理せずフォールドします。'}
2025-10-31 19:06:59,321 - poker_game - DEBUG - [Agent3] Extracted values - action: 'fold', amount: 0
2025-10-31 19:06:59,321 - poker_game - DEBUG - [Agent3] Action 'fold' normalized - amount set to 0
2025-10-31 19:06:59,321 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:06:59,321 - poker_game - INFO - [Agent3] Successfully parsed decision: fold, 0, Preflopでは、A♥7♣は弱いハンドであり、レイズに対してコールするのは不利です。ポットサイズも小さく、リスクに見合うリターンが期待できません。相手のチップ量も多いので、無理せずフォールドします。
2025-10-31 19:06:59,322 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'fold' with amount 0
2025-10-31 19:06:59,323 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:06:59,323 - poker_game - INFO - Hand #28, Phase: preflop
2025-10-31 19:06:59,324 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 19:06:59,324 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:59,325 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:59,326 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:59,327 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:06:59,328 - poker_game - INFO - Community cards: []
2025-10-31 19:06:59,329 - poker_game - INFO -   P0(Agent0): chips=2, bet=10, status=active
2025-10-31 19:06:59,329 - poker_game - INFO -   P1(Agent1): chips=8117, bet=20, status=active
2025-10-31 19:06:59,330 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:59,330 - poker_game - INFO -   P3(Agent3): chips=1851, bet=0, status=active
2025-10-31 19:06:59,330 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:59,331 - poker_game - INFO - ==================================================
2025-10-31 19:06:59,332 - poker_game - INFO - ACTION_EXECUTED: Player 3 folded
2025-10-31 19:06:59,345 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:06:59,346 - poker_game - INFO - Hand #28, Phase: preflop
2025-10-31 19:06:59,346 - poker_game - INFO - Current player: 3, Dealer: 3
2025-10-31 19:06:59,347 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:59,347 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:59,348 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:59,348 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:59,349 - poker_game - INFO - Community cards: []
2025-10-31 19:06:59,350 - poker_game - INFO -   P0(Agent0): chips=2, bet=10, status=active
2025-10-31 19:06:59,350 - poker_game - INFO -   P1(Agent1): chips=8117, bet=20, status=active
2025-10-31 19:06:59,351 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:59,351 - poker_game - INFO -   P3(Agent3): chips=1851, bet=0, status=folded
2025-10-31 19:06:59,351 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:59,352 - poker_game - INFO - Extra: Action: Player 3 folded
2025-10-31 19:06:59,352 - poker_game - INFO - ==================================================
2025-10-31 19:06:59,353 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:06:59,353 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:06:59,353 - poker_game - DEBUG - Active players: [0, 1]
2025-10-31 19:06:59,354 - poker_game - INFO - Advanced from player 3 to player 0 (seat order)
2025-10-31 19:06:59,354 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:06:59,355 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:06:59,355 - poker_game - DEBUG - Active: 2, All-in: 0
2025-10-31 19:06:59,355 - poker_game - DEBUG - Player bets: [10, 20], Current bet: 20, All same: False
2025-10-31 19:06:59,355 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:06:59,355 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:06:59,356 - poker_game - INFO - Hand #28, Phase: preflop
2025-10-31 19:06:59,356 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:06:59,357 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:06:59,357 - poker_game - INFO - Last raiser: 1
2025-10-31 19:06:59,357 - poker_game - INFO - Betting round complete: False
2025-10-31 19:06:59,358 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:06:59,358 - poker_game - INFO - Community cards: []
2025-10-31 19:06:59,358 - poker_game - INFO -   P0(Agent0): chips=2, bet=10, status=active
2025-10-31 19:06:59,359 - poker_game - INFO -   P1(Agent1): chips=8117, bet=20, status=active
2025-10-31 19:06:59,359 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:06:59,359 - poker_game - INFO -   P3(Agent3): chips=1851, bet=0, status=folded
2025-10-31 19:06:59,360 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:06:59,360 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:06:59,360 - poker_game - INFO - ==================================================
2025-10-31 19:06:59,463 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "Q♠",
    "4♥"
  ],
  "community": [],
  "your_chips": 2,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 30,
  "to_call": 10,
  "dealer_button": 3,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 8117,
      "bet": 20,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1851,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "all-in (2)"
  ],
  "history": [
    "Player 0 posted big blind 20",
    "Player 1 called 20",
    "Player 3 called 10",
    "Player 0 folded",
    "Flop dealt: J♠, K♠, Q♣",
    "Player 3 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 8♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 6♦",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♠ - K♠, Q♣, J♠, 10♥, 8♣ cards=5♦, 10♥",
    "Showdown: Player 3 hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦ cards=A♠, 9♦",
    "Side pot layer 0: amount=60, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Side pot layer 1: amount=120, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded"
  ]
}
2025-10-31 19:06:59,733 - poker_game - DEBUG - Create Session: {'id': '99ea61bd-c32a-4eff-b6eb-94a53afbcd28', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905219.7279954}
2025-10-31 19:07:02,463 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フロップが開かれる前）の状況で、私の手札はQ♠4♥です。これはあまり強いハンドではありません（特にクイーンはそこそこですが、4が弱すぎます）。すでにポットには30ありますが、コールするには10必要で、私はオールイン（2）も選択肢として与えられています。しかし、対戦相手のプレイヤー1は8117チップを持っており、プレイヤー3はすでにフォールドしています。私のチップは2しか残っておらず、オールインしてもほとんど意味がありません。このハンドで勝つ見込みは非常に低いため、フォールドするのが最善の選択です。プリフロップでQハイ（クイーンが一番強いカード）のような弱いハンドでコールしたりレイズしたりするのは、長期的に見るとチップを失う可能性が高いです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 203, 'promptTokenCount': 861, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 861}], 'totalTokenCount': 1064}, 'invocationId': 'e-24ee18ac-2e23-4294-a8cb-667f8326ff29', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'Ng7ywkvw', 'timestamp': 1761905219.764002}]
2025-10-31 19:07:02,464 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:07:02,464 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（フロップが開かれる前）の状況で、私の手札はQ♠4♥です。これはあまり強いハンドではありません（特にクイーンはそこそこですが、4が弱すぎます）。すでにポットには30ありますが、コールするには10必要で、私はオールイン（2）も選択肢として与えられています。しかし、対戦相手のプレイヤー1は8117チップを持っており、プレイヤー3はすでにフォールドしています。私のチップは2しか残っておらず、オールインしてもほとんど意味がありません。このハンドで勝つ見込みは非常に低いため、フォールドするのが最善の選択です。プリフロップでQハイ（クイーンが一番強いカード）のような弱いハンドでコールしたりレイズしたりするのは、長期的に見るとチップを失う可能性が高いです。"
}
```
2025-10-31 19:07:02,464 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:07:02,465 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フロップが開かれる前）の状況で、私の手札はQ♠4♥です。これはあまり強いハンドではありません（特にクイーンはそこそこですが、4が弱すぎます）。すでにポットには30ありますが、コールするには10必要で、私はオールイン（2）も選択肢として与えられています。しかし、対戦相手のプレイヤー1は8117チップを持っており、プレイヤー3はすでにフォールドしています。私のチップは2しか残っておらず、オールインしてもほとんど意味がありません。このハンドで勝つ見込みは非常に低いため、フォールドするのが最善の選択です。プリフロップでQハイ（クイーンが一番強いカード）のような弱いハンドでコールしたりレイズしたりするのは、長期的に見るとチップを失う可能性が高いです。"\n}\n```'
2025-10-31 19:07:02,465 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:07:02,465 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップ（フロップが開かれる前）の状況で、私の手札はQ♠4♥です。これはあまり強いハンドではありません（特にクイーンはそこそこですが、4が弱すぎます）。すでにポットには30ありますが、コールするには10必要で、私はオールイン（2）も選択肢として与えられています。しかし、対戦相手のプレイヤー1は8117チップを持っており、プレイヤー3はすでにフォールドしています。私のチップは2しか残っておらず、オールインしてもほとんど意味がありません。このハンドで勝つ見込みは非常に低いため、フォールドするのが最善の選択です。プリフロップでQハイ（クイーンが一番強いカード）のような弱いハンドでコールしたりレイズしたりするのは、長期的に見るとチップを失う可能性が高いです。"\n}'
2025-10-31 19:07:02,466 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップ（フロップが開かれる前）の状況で、私の手札はQ♠4♥です。これはあまり強いハンドではありません（特にクイーンはそこそこですが、4が弱すぎます）。すでにポットには30ありますが、コールするには10必要で、私はオールイン（2）も選択肢として与えられています。しかし、対戦相手のプレイヤー1は8117チップを持っており、プレイヤー3はすでにフォールドしています。私のチップは2しか残っておらず、オールインしてもほとんど意味がありません。このハンドで勝つ見込みは非常に低いため、フォールドするのが最善の選択です。プリフロップでQハイ（クイーンが一番強いカード）のような弱いハンドでコールしたりレイズしたりするのは、長期的に見るとチップを失う可能性が高いです。"
}
2025-10-31 19:07:02,466 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップ（フロップが開かれる前）の状況で、私の手札はQ♠4♥です。これはあまり強いハンドではありません（特にクイーンはそこそこですが、4が弱すぎます）。すでにポットには30ありますが、コールするには10必要で、私はオールイン（2）も選択肢として与えられています。しかし、対戦相手のプレイヤー1は8117チップを持っており、プレイヤー3はすでにフォールドしています。私のチップは2しか残っておらず、オールインしてもほとんど意味がありません。このハンドで勝つ見込みは非常に低いため、フォールドするのが最善の選択です。プリフロップでQハイ（クイーンが一番強いカード）のような弱いハンドでコールしたりレイズしたりするのは、長期的に見るとチップを失う可能性が高いです。'}
2025-10-31 19:07:02,466 - poker_game - DEBUG - [Agent0] Extracted values - action: 'fold', amount: 0
2025-10-31 19:07:02,466 - poker_game - DEBUG - [Agent0] Action 'fold' normalized - amount set to 0
2025-10-31 19:07:02,466 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:07:02,467 - poker_game - INFO - [Agent0] Successfully parsed decision: fold, 0, プリフロップ（フロップが開かれる前）の状況で、私の手札はQ♠4♥です。これはあまり強いハンドではありません（特にクイーンはそこそこですが、4が弱すぎます）。すでにポットには30ありますが、コールするには10必要で、私はオールイン（2）も選択肢として与えられています。しかし、対戦相手のプレイヤー1は8117チップを持っており、プレイヤー3はすでにフォールドしています。私のチップは2しか残っておらず、オールインしてもほとんど意味がありません。このハンドで勝つ見込みは非常に低いため、フォールドするのが最善の選択です。プリフロップでQハイ（クイーンが一番強いカード）のような弱いハンドでコールしたりレイズしたりするのは、長期的に見るとチップを失う可能性が高いです。
2025-10-31 19:07:02,467 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'fold' with amount 0
2025-10-31 19:07:02,467 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:07:02,467 - poker_game - INFO - Hand #28, Phase: preflop
2025-10-31 19:07:02,468 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:07:02,468 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:07:02,468 - poker_game - INFO - Last raiser: 1
2025-10-31 19:07:02,468 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:02,468 - poker_game - INFO - Active players: 2, All-in: 0, Folded: 1
2025-10-31 19:07:02,468 - poker_game - INFO - Community cards: []
2025-10-31 19:07:02,469 - poker_game - INFO -   P0(Agent0): chips=2, bet=10, status=active
2025-10-31 19:07:02,469 - poker_game - INFO -   P1(Agent1): chips=8117, bet=20, status=active
2025-10-31 19:07:02,469 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:02,469 - poker_game - INFO -   P3(Agent3): chips=1851, bet=0, status=folded
2025-10-31 19:07:02,469 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:02,470 - poker_game - INFO - ==================================================
2025-10-31 19:07:02,470 - poker_game - INFO - ACTION_EXECUTED: Player 0 folded
2025-10-31 19:07:02,480 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:07:02,481 - poker_game - INFO - Hand #28, Phase: preflop
2025-10-31 19:07:02,482 - poker_game - INFO - Current player: 0, Dealer: 3
2025-10-31 19:07:02,487 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:07:02,488 - poker_game - INFO - Last raiser: 1
2025-10-31 19:07:02,489 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:02,489 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:07:02,489 - poker_game - INFO - Community cards: []
2025-10-31 19:07:02,489 - poker_game - INFO -   P0(Agent0): chips=2, bet=10, status=folded
2025-10-31 19:07:02,489 - poker_game - INFO -   P1(Agent1): chips=8117, bet=20, status=active
2025-10-31 19:07:02,489 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:02,490 - poker_game - INFO -   P3(Agent3): chips=1851, bet=0, status=folded
2025-10-31 19:07:02,490 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:02,490 - poker_game - INFO - Extra: Action: Player 0 folded
2025-10-31 19:07:02,490 - poker_game - INFO - ==================================================
2025-10-31 19:07:02,490 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:07:02,490 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:07:02,490 - poker_game - DEBUG - Active players: [1]
2025-10-31 19:07:02,490 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:07:02,490 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:07:02,491 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:07:02,491 - poker_game - DEBUG - Active: 1, All-in: 0
2025-10-31 19:07:02,491 - poker_game - INFO - Betting complete: Only 1 or fewer players remaining
2025-10-31 19:07:02,491 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:07:02,491 - poker_game - INFO - Hand #28, Phase: preflop
2025-10-31 19:07:02,491 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:07:02,491 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:07:02,491 - poker_game - INFO - Last raiser: 1
2025-10-31 19:07:02,491 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:02,492 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:07:02,492 - poker_game - INFO - Community cards: []
2025-10-31 19:07:02,492 - poker_game - INFO -   P0(Agent0): chips=2, bet=10, status=folded
2025-10-31 19:07:02,492 - poker_game - INFO -   P1(Agent1): chips=8117, bet=20, status=active
2025-10-31 19:07:02,492 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:02,492 - poker_game - INFO -   P3(Agent3): chips=1851, bet=0, status=folded
2025-10-31 19:07:02,492 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:02,492 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:07:02,493 - poker_game - INFO - ==================================================
2025-10-31 19:07:02,594 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 19:07:02,594 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:02,595 - poker_game - INFO - Remaining players: 1
2025-10-31 19:07:02,595 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:07:02,595 - poker_game - INFO - Going to SHOWDOWN - only 1 or fewer players remaining
2025-10-31 19:07:02,596 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 19:07:02,596 - poker_game - INFO - Hand #28, Phase: showdown
2025-10-31 19:07:02,596 - poker_game - INFO - Current player: 1, Dealer: 3
2025-10-31 19:07:02,596 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:07:02,597 - poker_game - INFO - Last raiser: 1
2025-10-31 19:07:02,597 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:02,597 - poker_game - INFO - Active players: 1, All-in: 0, Folded: 2
2025-10-31 19:07:02,598 - poker_game - INFO - Community cards: []
2025-10-31 19:07:02,598 - poker_game - INFO -   P0(Agent0): chips=2, bet=10, status=folded
2025-10-31 19:07:02,598 - poker_game - INFO -   P1(Agent1): chips=8117, bet=20, status=active
2025-10-31 19:07:02,599 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:02,599 - poker_game - INFO -   P3(Agent3): chips=1851, bet=0, status=folded
2025-10-31 19:07:02,599 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:02,600 - poker_game - INFO - ==================================================
2025-10-31 19:07:02,600 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 19:07:02,600 - poker_game - INFO - Pot: 30, Community cards: []
2025-10-31 19:07:02,601 - poker_game - INFO -   Player 1 status=active cards=['9♣', '3♥']
2025-10-31 19:07:02,602 - poker_game - INFO - Showdown winner by default: Player 1 awarded 30
2025-10-31 19:07:02,603 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 19:07:02,604 - poker_game - INFO - === STARTING NEW HAND #29 ===
2025-10-31 19:07:02,605 - poker_game - INFO - Active players for new hand: 3
2025-10-31 19:07:02,606 - poker_game - INFO - Moving dealer button
2025-10-31 19:07:02,606 - poker_game - INFO - Posting blinds
2025-10-31 19:07:02,626 - poker_game - INFO - Dealing hole cards
2025-10-31 19:07:02,627 - poker_game - INFO - Setting first actor for preflop
2025-10-31 19:07:02,640 - poker_game - INFO - Started new hand in database: hand_id=29
2025-10-31 19:07:02,640 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 19:07:02,641 - poker_game - INFO - Hand #29, Phase: preflop
2025-10-31 19:07:02,641 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:07:02,642 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:07:02,642 - poker_game - INFO - Last raiser: 3
2025-10-31 19:07:02,643 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:02,643 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:07:02,644 - poker_game - INFO - Community cards: []
2025-10-31 19:07:02,644 - poker_game - INFO -   P0(Agent0): chips=2, bet=0, status=active
2025-10-31 19:07:02,644 - poker_game - INFO -   P1(Agent1): chips=8137, bet=10, status=active
2025-10-31 19:07:02,645 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:02,646 - poker_game - INFO -   P3(Agent3): chips=1831, bet=20, status=active
2025-10-31 19:07:02,647 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:02,648 - poker_game - INFO - ==================================================
2025-10-31 19:07:02,650 - poker_game - DEBUG - LLM Prompt for Agent0: {
  "your_id": 0,
  "phase": "preflop",
  "your_cards": [
    "K♠",
    "K♦"
  ],
  "community": [],
  "your_chips": 2,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 30,
  "to_call": 20,
  "dealer_button": 0,
  "current_turn": 0,
  "players": [
    {
      "id": 1,
      "chips": 8137,
      "bet": 10,
      "status": "active"
    },
    {
      "id": 3,
      "chips": 1831,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "all-in (2)"
  ],
  "history": [
    "Flop dealt: J♠, K♠, Q♣",
    "Player 3 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 8♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 6♦",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♠ - K♠, Q♣, J♠, 10♥, 8♣ cards=5♦, 10♥",
    "Showdown: Player 3 hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦ cards=A♠, 9♦",
    "Side pot layer 0: amount=60, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Side pot layer 1: amount=120, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20"
  ]
}
2025-10-31 19:07:02,664 - poker_game - DEBUG - Create Session: {'id': '2f88f37f-a3a5-485f-aafe-a07d4db81cb2', 'appName': 'beginner_agent', 'userId': 'player_0', 'state': {}, 'events': [], 'lastUpdateTime': 1761905222.6613884}
2025-10-31 19:07:04,741 - poker_game - INFO - LLM raw Response for Agent0: [{'content': {'parts': [{'text': '```json\n{\n  "action": "all_in",\n  "amount": 2,\n  "reasoning": "プリフロップでキング・キング（ペア）という非常に強いハンドを持っています。ポットは30で、コールするために必要なのは20です。しかし、手持ちのチップは2枚しかありません。これは、このハンドで勝つために全額をベットする（オールインする）ことを意味します。相手はすでに20をベットしており、それ以上のベットはできません。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 113, 'promptTokenCount': 865, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 865}], 'totalTokenCount': 978}, 'invocationId': 'e-78f0bc16-f0c0-4e87-9568-7a0be8531f03', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'MtG5H3ST', 'timestamp': 1761905222.678167}]
2025-10-31 19:07:04,742 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent0:
2025-10-31 19:07:04,742 - poker_game - DEBUG - ```json
{
  "action": "all_in",
  "amount": 2,
  "reasoning": "プリフロップでキング・キング（ペア）という非常に強いハンドを持っています。ポットは30で、コールするために必要なのは20です。しかし、手持ちのチップは2枚しかありません。これは、このハンドで勝つために全額をベットする（オールインする）ことを意味します。相手はすでに20をベットしており、それ以上のベットはできません。"
}
```
2025-10-31 19:07:04,743 - poker_game - DEBUG - [Agent0] Starting LLM API response parsing
2025-10-31 19:07:04,743 - poker_game - DEBUG - [Agent0] Raw response content: '```json\n{\n  "action": "all_in",\n  "amount": 2,\n  "reasoning": "プリフロップでキング・キング（ペア）という非常に強いハンドを持っています。ポットは30で、コールするために必要なのは20です。しかし、手持ちのチップは2枚しかありません。これは、このハンドで勝つために全額をベットする（オールインする）ことを意味します。相手はすでに20をベットしており、それ以上のベットはできません。"\n}\n```'
2025-10-31 19:07:04,743 - poker_game - DEBUG - [Agent0] Markdown code block detected
2025-10-31 19:07:04,743 - poker_game - DEBUG - [Agent0] Extracted content from markdown: '{\n  "action": "all_in",\n  "amount": 2,\n  "reasoning": "プリフロップでキング・キング（ペア）という非常に強いハンドを持っています。ポットは30で、コールするために必要なのは20です。しかし、手持ちのチップは2枚しかありません。これは、このハンドで勝つために全額をベットする（オールインする）ことを意味します。相手はすでに20をベットしており、それ以上のベットはできません。"\n}'
2025-10-31 19:07:04,744 - poker_game - DEBUG - [Agent0] JSON pattern found: {
  "action": "all_in",
  "amount": 2,
  "reasoning": "プリフロップでキング・キング（ペア）という非常に強いハンドを持っています。ポットは30で、コールするために必要なのは20です。しかし、手持ちのチップは2枚しかありません。これは、このハンドで勝つために全額をベットする（オールインする）ことを意味します。相手はすでに20をベットしており、それ以上のベットはできません。"
}
2025-10-31 19:07:04,744 - poker_game - DEBUG - [Agent0] JSON parsing successful: {'action': 'all_in', 'amount': 2, 'reasoning': 'プリフロップでキング・キング（ペア）という非常に強いハンドを持っています。ポットは30で、コールするために必要なのは20です。しかし、手持ちのチップは2枚しかありません。これは、このハンドで勝つために全額をベットする（オールインする）ことを意味します。相手はすでに20をベットしており、それ以上のベットはできません。'}
2025-10-31 19:07:04,744 - poker_game - DEBUG - [Agent0] Extracted values - action: 'all_in', amount: 2
2025-10-31 19:07:04,744 - poker_game - DEBUG - [Agent0] Action 'all_in' normalized to 'all_in' - amount set to 2
2025-10-31 19:07:04,744 - poker_game - DEBUG - [Agent0] Final parsed decision: {'action': 'all_in', 'amount': 2}
2025-10-31 19:07:04,744 - poker_game - INFO - [Agent0] Successfully parsed decision: all_in, 2, プリフロップでキング・キング（ペア）という非常に強いハンドを持っています。ポットは30で、コールするために必要なのは20です。しかし、手持ちのチップは2枚しかありません。これは、このハンドで勝つために全額をベットする（オールインする）ことを意味します。相手はすでに20をベットしており、それ以上のベットはできません。
2025-10-31 19:07:04,745 - poker_game - INFO - >>> PROCESS_ACTION: Player 0 attempts 'all_in' with amount 2
2025-10-31 19:07:04,745 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:07:04,746 - poker_game - INFO - Hand #29, Phase: preflop
2025-10-31 19:07:04,746 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:07:04,746 - poker_game - INFO - Pot: 30, Current bet: 20
2025-10-31 19:07:04,746 - poker_game - INFO - Last raiser: 3
2025-10-31 19:07:04,746 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:04,747 - poker_game - INFO - Active players: 3, All-in: 0, Folded: 0
2025-10-31 19:07:04,747 - poker_game - INFO - Community cards: []
2025-10-31 19:07:04,747 - poker_game - INFO -   P0(Agent0): chips=2, bet=0, status=active
2025-10-31 19:07:04,747 - poker_game - INFO -   P1(Agent1): chips=8137, bet=10, status=active
2025-10-31 19:07:04,747 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:04,748 - poker_game - INFO -   P3(Agent3): chips=1831, bet=20, status=active
2025-10-31 19:07:04,748 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:04,748 - poker_game - INFO - ==================================================
2025-10-31 19:07:04,748 - poker_game - INFO - ACTION_EXECUTED: Player 0 went all-in with 2
2025-10-31 19:07:04,761 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:07:04,762 - poker_game - INFO - Hand #29, Phase: preflop
2025-10-31 19:07:04,763 - poker_game - INFO - Current player: 0, Dealer: 0
2025-10-31 19:07:04,763 - poker_game - INFO - Pot: 32, Current bet: 20
2025-10-31 19:07:04,763 - poker_game - INFO - Last raiser: 3
2025-10-31 19:07:04,763 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:04,763 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:04,763 - poker_game - INFO - Community cards: []
2025-10-31 19:07:04,764 - poker_game - INFO -   P0(Agent0): chips=0, bet=2, status=all_in
2025-10-31 19:07:04,764 - poker_game - INFO -   P1(Agent1): chips=8137, bet=10, status=active
2025-10-31 19:07:04,764 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:04,764 - poker_game - INFO -   P3(Agent3): chips=1831, bet=20, status=active
2025-10-31 19:07:04,764 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:04,764 - poker_game - INFO - Extra: Action: Player 0 went all-in with 2
2025-10-31 19:07:04,764 - poker_game - INFO - ==================================================
2025-10-31 19:07:04,765 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:07:04,765 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:07:04,765 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:07:04,765 - poker_game - INFO - Advanced from player 0 to player 1 (seat order)
2025-10-31 19:07:04,765 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:07:04,766 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:07:04,766 - poker_game - DEBUG - Active: 2, All-in: 1
2025-10-31 19:07:04,766 - poker_game - DEBUG - Player bets: [10, 20], Current bet: 20, All same: False
2025-10-31 19:07:04,766 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:07:04,766 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:07:04,767 - poker_game - INFO - Hand #29, Phase: preflop
2025-10-31 19:07:04,767 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:04,767 - poker_game - INFO - Pot: 32, Current bet: 20
2025-10-31 19:07:04,767 - poker_game - INFO - Last raiser: 3
2025-10-31 19:07:04,768 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:04,768 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:04,768 - poker_game - INFO - Community cards: []
2025-10-31 19:07:04,768 - poker_game - INFO -   P0(Agent0): chips=0, bet=2, status=all_in
2025-10-31 19:07:04,769 - poker_game - INFO -   P1(Agent1): chips=8137, bet=10, status=active
2025-10-31 19:07:04,769 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:04,769 - poker_game - INFO -   P3(Agent3): chips=1831, bet=20, status=active
2025-10-31 19:07:04,770 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:04,770 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:07:04,770 - poker_game - INFO - ==================================================
2025-10-31 19:07:04,872 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "4♣",
    "A♥"
  ],
  "community": [],
  "your_chips": 8137,
  "your_bet_this_round": 10,
  "your_total_bet_this_hand": 10,
  "pot": 32,
  "to_call": 10,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 0,
      "bet": 2,
      "status": "all_in"
    },
    {
      "id": 3,
      "chips": 1831,
      "bet": 20,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (10)",
    "raise (min 40)",
    "all-in (8137)"
  ],
  "history": [
    "Player 3 raised to 60",
    "Player 1 called 60",
    "Turn dealt: 8♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 6♦",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♠ - K♠, Q♣, J♠, 10♥, 8♣ cards=5♦, 10♥",
    "Showdown: Player 3 hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦ cards=A♠, 9♦",
    "Side pot layer 0: amount=60, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Side pot layer 1: amount=120, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 went all-in with 2"
  ]
}
2025-10-31 19:07:04,890 - poker_game - DEBUG - Create Session: {'id': 'dcd59845-b0ea-407d-92b2-039a745a805c', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905224.885459}
2025-10-31 19:07:06,943 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 100,\n  "reasoning": "プリフロップでAハイ（エースハイ）は強いハンドです。相手は2人しかおらず、1人はオールイン、もう1人はアクティブです。ポットを大きくし、相手をプレッシャーにかけるためにレイズします。レイズ額は、相手のベット額（20）に、ポット（32）の半分以上を加えて、相手にコールするのをためらわせるのに十分な額にします。ここでは100にレイズします。これは、相手の20のベットに対して、ポット（32）+相手のベット（20）+自分のコール額（20）=72 の、最低でも3倍のベット額（ポットの約3倍）にするのが一般的だからです。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 191, 'promptTokenCount': 887, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 887}], 'totalTokenCount': 1078}, 'invocationId': 'e-955f123c-fdcf-48a0-9b98-7e94db18c7ba', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '8juHwjc9', 'timestamp': 1761905224.903535}]
2025-10-31 19:07:06,944 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:07:06,944 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 100,
  "reasoning": "プリフロップでAハイ（エースハイ）は強いハンドです。相手は2人しかおらず、1人はオールイン、もう1人はアクティブです。ポットを大きくし、相手をプレッシャーにかけるためにレイズします。レイズ額は、相手のベット額（20）に、ポット（32）の半分以上を加えて、相手にコールするのをためらわせるのに十分な額にします。ここでは100にレイズします。これは、相手の20のベットに対して、ポット（32）+相手のベット（20）+自分のコール額（20）=72 の、最低でも3倍のベット額（ポットの約3倍）にするのが一般的だからです。"
}
```
2025-10-31 19:07:06,944 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:07:06,944 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 100,\n  "reasoning": "プリフロップでAハイ（エースハイ）は強いハンドです。相手は2人しかおらず、1人はオールイン、もう1人はアクティブです。ポットを大きくし、相手をプレッシャーにかけるためにレイズします。レイズ額は、相手のベット額（20）に、ポット（32）の半分以上を加えて、相手にコールするのをためらわせるのに十分な額にします。ここでは100にレイズします。これは、相手の20のベットに対して、ポット（32）+相手のベット（20）+自分のコール額（20）=72 の、最低でも3倍のベット額（ポットの約3倍）にするのが一般的だからです。"\n}\n```'
2025-10-31 19:07:06,944 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:07:06,944 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 100,\n  "reasoning": "プリフロップでAハイ（エースハイ）は強いハンドです。相手は2人しかおらず、1人はオールイン、もう1人はアクティブです。ポットを大きくし、相手をプレッシャーにかけるためにレイズします。レイズ額は、相手のベット額（20）に、ポット（32）の半分以上を加えて、相手にコールするのをためらわせるのに十分な額にします。ここでは100にレイズします。これは、相手の20のベットに対して、ポット（32）+相手のベット（20）+自分のコール額（20）=72 の、最低でも3倍のベット額（ポットの約3倍）にするのが一般的だからです。"\n}'
2025-10-31 19:07:06,945 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "raise",
  "amount": 100,
  "reasoning": "プリフロップでAハイ（エースハイ）は強いハンドです。相手は2人しかおらず、1人はオールイン、もう1人はアクティブです。ポットを大きくし、相手をプレッシャーにかけるためにレイズします。レイズ額は、相手のベット額（20）に、ポット（32）の半分以上を加えて、相手にコールするのをためらわせるのに十分な額にします。ここでは100にレイズします。これは、相手の20のベットに対して、ポット（32）+相手のベット（20）+自分のコール額（20）=72 の、最低でも3倍のベット額（ポットの約3倍）にするのが一般的だからです。"
}
2025-10-31 19:07:06,945 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'raise', 'amount': 100, 'reasoning': 'プリフロップでAハイ（エースハイ）は強いハンドです。相手は2人しかおらず、1人はオールイン、もう1人はアクティブです。ポットを大きくし、相手をプレッシャーにかけるためにレイズします。レイズ額は、相手のベット額（20）に、ポット（32）の半分以上を加えて、相手にコールするのをためらわせるのに十分な額にします。ここでは100にレイズします。これは、相手の20のベットに対して、ポット（32）+相手のベット（20）+自分のコール額（20）=72 の、最低でも3倍のベット額（ポットの約3倍）にするのが一般的だからです。'}
2025-10-31 19:07:06,945 - poker_game - DEBUG - [Agent1] Extracted values - action: 'raise', amount: 100
2025-10-31 19:07:06,945 - poker_game - DEBUG - [Agent1] Processing raise action - available actions: ['fold', 'call (10)', 'raise (min 40)', 'all-in (8137)']
2025-10-31 19:07:06,945 - poker_game - DEBUG - [Agent1] Minimum raise amount extracted from 'raise (min 40)': 40
2025-10-31 19:07:06,945 - poker_game - DEBUG - [Agent1] Raise amount 100 is valid (min: 40)
2025-10-31 19:07:06,945 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'raise', 'amount': 100}
2025-10-31 19:07:06,945 - poker_game - INFO - [Agent1] Successfully parsed decision: raise, 100, プリフロップでAハイ（エースハイ）は強いハンドです。相手は2人しかおらず、1人はオールイン、もう1人はアクティブです。ポットを大きくし、相手をプレッシャーにかけるためにレイズします。レイズ額は、相手のベット額（20）に、ポット（32）の半分以上を加えて、相手にコールするのをためらわせるのに十分な額にします。ここでは100にレイズします。これは、相手の20のベットに対して、ポット（32）+相手のベット（20）+自分のコール額（20）=72 の、最低でも3倍のベット額（ポットの約3倍）にするのが一般的だからです。
2025-10-31 19:07:06,946 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'raise' with amount 100
2025-10-31 19:07:06,946 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:07:06,946 - poker_game - INFO - Hand #29, Phase: preflop
2025-10-31 19:07:06,946 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:06,947 - poker_game - INFO - Pot: 32, Current bet: 20
2025-10-31 19:07:06,947 - poker_game - INFO - Last raiser: 3
2025-10-31 19:07:06,947 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:06,947 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:06,947 - poker_game - INFO - Community cards: []
2025-10-31 19:07:06,948 - poker_game - INFO -   P0(Agent0): chips=0, bet=2, status=all_in
2025-10-31 19:07:06,948 - poker_game - INFO -   P1(Agent1): chips=8137, bet=10, status=active
2025-10-31 19:07:06,948 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:06,948 - poker_game - INFO -   P3(Agent3): chips=1831, bet=20, status=active
2025-10-31 19:07:06,948 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:06,949 - poker_game - INFO - ==================================================
2025-10-31 19:07:06,949 - poker_game - INFO - ACTION_EXECUTED: Player 1 raised to 120
2025-10-31 19:07:06,964 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:07:06,965 - poker_game - INFO - Hand #29, Phase: preflop
2025-10-31 19:07:06,965 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:06,965 - poker_game - INFO - Pot: 142, Current bet: 120
2025-10-31 19:07:06,965 - poker_game - INFO - Last raiser: 1
2025-10-31 19:07:06,966 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:06,966 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:06,966 - poker_game - INFO - Community cards: []
2025-10-31 19:07:06,966 - poker_game - INFO -   P0(Agent0): chips=0, bet=2, status=all_in
2025-10-31 19:07:06,966 - poker_game - INFO -   P1(Agent1): chips=8027, bet=120, status=active
2025-10-31 19:07:06,967 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:06,967 - poker_game - INFO -   P3(Agent3): chips=1831, bet=20, status=active
2025-10-31 19:07:06,967 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:06,967 - poker_game - INFO - Extra: Action: Player 1 raised to 120
2025-10-31 19:07:06,967 - poker_game - INFO - ==================================================
2025-10-31 19:07:06,967 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:07:06,967 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:07:06,967 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:07:06,968 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:07:06,968 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:07:06,968 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:07:06,968 - poker_game - DEBUG - Active: 2, All-in: 1
2025-10-31 19:07:06,968 - poker_game - DEBUG - Player bets: [120, 20], Current bet: 120, All same: False
2025-10-31 19:07:06,968 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:07:06,969 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:07:06,969 - poker_game - INFO - Hand #29, Phase: preflop
2025-10-31 19:07:06,969 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:07:06,969 - poker_game - INFO - Pot: 142, Current bet: 120
2025-10-31 19:07:06,969 - poker_game - INFO - Last raiser: 1
2025-10-31 19:07:06,970 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:06,970 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:06,970 - poker_game - INFO - Community cards: []
2025-10-31 19:07:06,970 - poker_game - INFO -   P0(Agent0): chips=0, bet=2, status=all_in
2025-10-31 19:07:06,970 - poker_game - INFO -   P1(Agent1): chips=8027, bet=120, status=active
2025-10-31 19:07:06,970 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:06,971 - poker_game - INFO -   P3(Agent3): chips=1831, bet=20, status=active
2025-10-31 19:07:06,971 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:06,971 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:07:06,971 - poker_game - INFO - ==================================================
2025-10-31 19:07:07,073 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "preflop",
  "your_cards": [
    "2♦",
    "Q♣"
  ],
  "community": [],
  "your_chips": 1831,
  "your_bet_this_round": 20,
  "your_total_bet_this_hand": 20,
  "pot": 142,
  "to_call": 100,
  "dealer_button": 0,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 0,
      "bet": 2,
      "status": "all_in"
    },
    {
      "id": 1,
      "chips": 8027,
      "bet": 120,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (100)",
    "raise (min 140)",
    "all-in (1831)"
  ],
  "history": [
    "Player 1 called 60",
    "Turn dealt: 8♣",
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 6♦",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♠ - K♠, Q♣, J♠, 10♥, 8♣ cards=5♦, 10♥",
    "Showdown: Player 3 hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦ cards=A♠, 9♦",
    "Side pot layer 0: amount=60, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Side pot layer 1: amount=120, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 went all-in with 2",
    "Player 1 raised to 120"
  ]
}
2025-10-31 19:07:07,085 - poker_game - DEBUG - Create Session: {'id': '0f6480f5-a2a6-4b11-8934-94511d4c7524', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905227.0835662}
2025-10-31 19:07:05,887 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 100,\n  "reasoning": "Preflopでは、Q2オフスート（異なるスーツのQと2）は弱いハンドなので、コールしてフロップを見るのが妥当です。相手がレイズした額（120）に対して、コールに必要な額（100）はポットサイズ（142）と比較してもそこまで大きくありません。オールインは、このハンドの強さからするとリスクが高すぎます。フロップを見て、状況が変われば再考します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 128, 'promptTokenCount': 893, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 893}], 'totalTokenCount': 1021}, 'invocationId': 'e-394fe27d-a87c-4afa-aeab-0efd05250a54', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'sAGD7eRX', 'timestamp': 1761905227.094292}]
2025-10-31 19:07:05,887 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:07:05,888 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 100,
  "reasoning": "Preflopでは、Q2オフスート（異なるスーツのQと2）は弱いハンドなので、コールしてフロップを見るのが妥当です。相手がレイズした額（120）に対して、コールに必要な額（100）はポットサイズ（142）と比較してもそこまで大きくありません。オールインは、このハンドの強さからするとリスクが高すぎます。フロップを見て、状況が変われば再考します。"
}
```
2025-10-31 19:07:05,888 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:07:05,888 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 100,\n  "reasoning": "Preflopでは、Q2オフスート（異なるスーツのQと2）は弱いハンドなので、コールしてフロップを見るのが妥当です。相手がレイズした額（120）に対して、コールに必要な額（100）はポットサイズ（142）と比較してもそこまで大きくありません。オールインは、このハンドの強さからするとリスクが高すぎます。フロップを見て、状況が変われば再考します。"\n}\n```'
2025-10-31 19:07:05,888 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:07:05,889 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 100,\n  "reasoning": "Preflopでは、Q2オフスート（異なるスーツのQと2）は弱いハンドなので、コールしてフロップを見るのが妥当です。相手がレイズした額（120）に対して、コールに必要な額（100）はポットサイズ（142）と比較してもそこまで大きくありません。オールインは、このハンドの強さからするとリスクが高すぎます。フロップを見て、状況が変われば再考します。"\n}'
2025-10-31 19:07:05,889 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 100,
  "reasoning": "Preflopでは、Q2オフスート（異なるスーツのQと2）は弱いハンドなので、コールしてフロップを見るのが妥当です。相手がレイズした額（120）に対して、コールに必要な額（100）はポットサイズ（142）と比較してもそこまで大きくありません。オールインは、このハンドの強さからするとリスクが高すぎます。フロップを見て、状況が変われば再考します。"
}
2025-10-31 19:07:05,889 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 100, 'reasoning': 'Preflopでは、Q2オフスート（異なるスーツのQと2）は弱いハンドなので、コールしてフロップを見るのが妥当です。相手がレイズした額（120）に対して、コールに必要な額（100）はポットサイズ（142）と比較してもそこまで大きくありません。オールインは、このハンドの強さからするとリスクが高すぎます。フロップを見て、状況が変われば再考します。'}
2025-10-31 19:07:05,889 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 100
2025-10-31 19:07:05,889 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'call (100)', 'raise (min 140)', 'all-in (1831)']
2025-10-31 19:07:05,890 - poker_game - DEBUG - [Agent3] Call amount extracted from 'call (100)': 100
2025-10-31 19:07:05,890 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 100}
2025-10-31 19:07:05,890 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 100, Preflopでは、Q2オフスート（異なるスーツのQと2）は弱いハンドなので、コールしてフロップを見るのが妥当です。相手がレイズした額（120）に対して、コールに必要な額（100）はポットサイズ（142）と比較してもそこまで大きくありません。オールインは、このハンドの強さからするとリスクが高すぎます。フロップを見て、状況が変われば再考します。
2025-10-31 19:07:05,891 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 100
2025-10-31 19:07:05,891 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:07:05,892 - poker_game - INFO - Hand #29, Phase: preflop
2025-10-31 19:07:05,892 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:07:05,893 - poker_game - INFO - Pot: 142, Current bet: 120
2025-10-31 19:07:05,893 - poker_game - INFO - Last raiser: 1
2025-10-31 19:07:05,895 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:05,895 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:05,896 - poker_game - INFO - Community cards: []
2025-10-31 19:07:05,896 - poker_game - INFO -   P0(Agent0): chips=0, bet=2, status=all_in
2025-10-31 19:07:05,896 - poker_game - INFO -   P1(Agent1): chips=8027, bet=120, status=active
2025-10-31 19:07:05,897 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:05,897 - poker_game - INFO -   P3(Agent3): chips=1831, bet=20, status=active
2025-10-31 19:07:05,898 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:05,898 - poker_game - INFO - ==================================================
2025-10-31 19:07:05,899 - poker_game - INFO - ACTION_EXECUTED: Player 3 called 100
2025-10-31 19:07:05,909 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:07:05,910 - poker_game - INFO - Hand #29, Phase: preflop
2025-10-31 19:07:05,910 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:07:05,910 - poker_game - INFO - Pot: 242, Current bet: 120
2025-10-31 19:07:05,910 - poker_game - INFO - Last raiser: 1
2025-10-31 19:07:05,911 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:05,911 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:05,912 - poker_game - INFO - Community cards: []
2025-10-31 19:07:05,912 - poker_game - INFO -   P0(Agent0): chips=0, bet=2, status=all_in
2025-10-31 19:07:05,912 - poker_game - INFO -   P1(Agent1): chips=8027, bet=120, status=active
2025-10-31 19:07:05,913 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:05,913 - poker_game - INFO -   P3(Agent3): chips=1731, bet=120, status=active
2025-10-31 19:07:05,914 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:05,914 - poker_game - INFO - Extra: Action: Player 3 called 100
2025-10-31 19:07:05,915 - poker_game - INFO - ==================================================
2025-10-31 19:07:05,916 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:07:05,916 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:07:05,917 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:07:05,917 - poker_game - INFO - Advanced from player 3 to player 1 (seat order)
2025-10-31 19:07:05,918 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:07:05,918 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:07:05,918 - poker_game - DEBUG - Active: 2, All-in: 1
2025-10-31 19:07:05,919 - poker_game - DEBUG - Player bets: [120, 120], Current bet: 120, All same: True
2025-10-31 19:07:05,919 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 19:07:05,920 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:07:05,920 - poker_game - INFO - Hand #29, Phase: preflop
2025-10-31 19:07:05,921 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:05,922 - poker_game - INFO - Pot: 242, Current bet: 120
2025-10-31 19:07:05,923 - poker_game - INFO - Last raiser: 1
2025-10-31 19:07:05,923 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:05,923 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:05,924 - poker_game - INFO - Community cards: []
2025-10-31 19:07:05,924 - poker_game - INFO -   P0(Agent0): chips=0, bet=2, status=all_in
2025-10-31 19:07:05,925 - poker_game - INFO -   P1(Agent1): chips=8027, bet=120, status=active
2025-10-31 19:07:05,925 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:05,926 - poker_game - INFO -   P3(Agent3): chips=1731, bet=120, status=active
2025-10-31 19:07:05,926 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:05,926 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:07:05,927 - poker_game - INFO - ==================================================
2025-10-31 19:07:06,028 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 19:07:06,028 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:06,029 - poker_game - INFO - Remaining players: 3
2025-10-31 19:07:06,029 - poker_game - DEBUG -   Remaining P0: Agent0, status: all_in
2025-10-31 19:07:06,029 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:07:06,029 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:07:06,030 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 19:07:06,041 - poker_game - INFO - Starting new betting round
2025-10-31 19:07:06,041 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:07:06,042 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:07:06,042 - poker_game - DEBUG - Active players for new betting round: [1, 3]
2025-10-31 19:07:06,042 - poker_game - DEBUG - Dealer button: 0
2025-10-31 19:07:06,042 - poker_game - INFO - First actor: Player 1 (by phase rule), was 1
2025-10-31 19:07:06,043 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:07:06,043 - poker_game - INFO - Hand #29, Phase: flop
2025-10-31 19:07:06,044 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:06,044 - poker_game - INFO - Pot: 242, Current bet: 0
2025-10-31 19:07:06,045 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:06,045 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:06,046 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:06,046 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥']
2025-10-31 19:07:06,046 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:06,047 - poker_game - INFO -   P1(Agent1): chips=8027, bet=0, status=active
2025-10-31 19:07:06,047 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:06,048 - poker_game - INFO -   P3(Agent3): chips=1731, bet=0, status=active
2025-10-31 19:07:06,048 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:06,049 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 19:07:06,049 - poker_game - INFO - ==================================================
2025-10-31 19:07:06,051 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "flop",
  "your_cards": [
    "4♣",
    "A♥"
  ],
  "community": [
    "5♠",
    "4♦",
    "7♥"
  ],
  "your_chips": 8027,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 120,
  "pot": 242,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 0,
      "bet": 0,
      "status": "all_in"
    },
    {
      "id": 3,
      "chips": 1731,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (8027)"
  ],
  "history": [
    "Player 3 checked",
    "Player 1 checked",
    "River dealt: 6♦",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♠ - K♠, Q♣, J♠, 10♥, 8♣ cards=5♦, 10♥",
    "Showdown: Player 3 hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦ cards=A♠, 9♦",
    "Side pot layer 0: amount=60, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Side pot layer 1: amount=120, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 went all-in with 2",
    "Player 1 raised to 120",
    "Player 3 called 100",
    "Flop dealt: 5♠, 4♦, 7♥"
  ]
}
2025-10-31 19:07:06,072 - poker_game - DEBUG - Create Session: {'id': '4f23f3fd-4e95-4030-ac8b-f8f9a64944a2', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905226.0673983}
2025-10-31 19:07:08,101 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたの手札（4♣, A♥）とコミュニティカード（5♠, 4♦, 7♥）を合わせると、ペア（4が2枚）ができています。これは悪くないハンドですが、最強のハンドではありません。ポットは242で、コール額は0なので、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択するのが合理的です。相手がベットしてきた場合は、ハンドの強さと相手のベット額を考慮して次のアクションを判断します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 150, 'promptTokenCount': 914, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 914}], 'totalTokenCount': 1064}, 'invocationId': 'e-bd12fd6c-4bea-4896-839b-9bd7542f00db', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'WlRFHeDW', 'timestamp': 1761905226.085626}]
2025-10-31 19:07:08,102 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:07:08,103 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたの手札（4♣, A♥）とコミュニティカード（5♠, 4♦, 7♥）を合わせると、ペア（4が2枚）ができています。これは悪くないハンドですが、最強のハンドではありません。ポットは242で、コール額は0なので、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択するのが合理的です。相手がベットしてきた場合は、ハンドの強さと相手のベット額を考慮して次のアクションを判断します。"
}
```
2025-10-31 19:07:08,103 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:07:08,104 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたの手札（4♣, A♥）とコミュニティカード（5♠, 4♦, 7♥）を合わせると、ペア（4が2枚）ができています。これは悪くないハンドですが、最強のハンドではありません。ポットは242で、コール額は0なので、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択するのが合理的です。相手がベットしてきた場合は、ハンドの強さと相手のベット額を考慮して次のアクションを判断します。"\n}\n```'
2025-10-31 19:07:08,104 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:07:08,105 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたの手札（4♣, A♥）とコミュニティカード（5♠, 4♦, 7♥）を合わせると、ペア（4が2枚）ができています。これは悪くないハンドですが、最強のハンドではありません。ポットは242で、コール額は0なので、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択するのが合理的です。相手がベットしてきた場合は、ハンドの強さと相手のベット額を考慮して次のアクションを判断します。"\n}'
2025-10-31 19:07:08,105 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）で、あなたの手札（4♣, A♥）とコミュニティカード（5♠, 4♦, 7♥）を合わせると、ペア（4が2枚）ができています。これは悪くないハンドですが、最強のハンドではありません。ポットは242で、コール額は0なので、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択するのが合理的です。相手がベットしてきた場合は、ハンドの強さと相手のベット額を考慮して次のアクションを判断します。"
}
2025-10-31 19:07:08,105 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）で、あなたの手札（4♣, A♥）とコミュニティカード（5♠, 4♦, 7♥）を合わせると、ペア（4が2枚）ができています。これは悪くないハンドですが、最強のハンドではありません。ポットは242で、コール額は0なので、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択するのが合理的です。相手がベットしてきた場合は、ハンドの強さと相手のベット額を考慮して次のアクションを判断します。'}
2025-10-31 19:07:08,106 - poker_game - DEBUG - [Agent1] Extracted values - action: 'check', amount: 0
2025-10-31 19:07:08,106 - poker_game - DEBUG - [Agent1] Action 'check' normalized - amount set to 0
2025-10-31 19:07:08,106 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:07:08,107 - poker_game - INFO - [Agent1] Successfully parsed decision: check, 0, フロップ（最初の3枚のコミュニティカード）で、あなたの手札（4♣, A♥）とコミュニティカード（5♠, 4♦, 7♥）を合わせると、ペア（4が2枚）ができています。これは悪くないハンドですが、最強のハンドではありません。ポットは242で、コール額は0なので、チェック（ベットせずに次のプレイヤーに番を回すこと）を選択するのが合理的です。相手がベットしてきた場合は、ハンドの強さと相手のベット額を考慮して次のアクションを判断します。
2025-10-31 19:07:08,108 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'check' with amount 0
2025-10-31 19:07:08,109 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:07:08,109 - poker_game - INFO - Hand #29, Phase: flop
2025-10-31 19:07:08,110 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:08,111 - poker_game - INFO - Pot: 242, Current bet: 0
2025-10-31 19:07:08,112 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:08,113 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:08,114 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:08,115 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥']
2025-10-31 19:07:08,116 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:08,117 - poker_game - INFO -   P1(Agent1): chips=8027, bet=0, status=active
2025-10-31 19:07:08,118 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:08,119 - poker_game - INFO -   P3(Agent3): chips=1731, bet=0, status=active
2025-10-31 19:07:08,120 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:08,121 - poker_game - INFO - ==================================================
2025-10-31 19:07:08,121 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 19:07:08,137 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:07:08,137 - poker_game - INFO - Hand #29, Phase: flop
2025-10-31 19:07:08,138 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:08,138 - poker_game - INFO - Pot: 242, Current bet: 0
2025-10-31 19:07:08,139 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:08,139 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:08,140 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:08,140 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥']
2025-10-31 19:07:08,141 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:08,141 - poker_game - INFO -   P1(Agent1): chips=8027, bet=0, status=active
2025-10-31 19:07:08,141 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:08,142 - poker_game - INFO -   P3(Agent3): chips=1731, bet=0, status=active
2025-10-31 19:07:08,142 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:08,143 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 19:07:08,143 - poker_game - INFO - ==================================================
2025-10-31 19:07:08,144 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:07:08,144 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:07:08,144 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:07:08,145 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:07:08,145 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:07:08,145 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:07:08,146 - poker_game - DEBUG - Active: 2, All-in: 1
2025-10-31 19:07:08,146 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 19:07:08,146 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 19:07:08,146 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:07:08,147 - poker_game - DEBUG - Current player index: 3
2025-10-31 19:07:08,147 - poker_game - DEBUG - First actor index: 1
2025-10-31 19:07:08,147 - poker_game - DEBUG - Betting continues: Current player 3 != first actor 1
2025-10-31 19:07:08,147 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:07:08,148 - poker_game - INFO - Hand #29, Phase: flop
2025-10-31 19:07:08,148 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:07:08,148 - poker_game - INFO - Pot: 242, Current bet: 0
2025-10-31 19:07:08,149 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:08,149 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:08,149 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:08,151 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥']
2025-10-31 19:07:08,151 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:08,151 - poker_game - INFO -   P1(Agent1): chips=8027, bet=0, status=active
2025-10-31 19:07:08,151 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:08,152 - poker_game - INFO -   P3(Agent3): chips=1731, bet=0, status=active
2025-10-31 19:07:08,152 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:08,153 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:07:08,153 - poker_game - INFO - ==================================================
2025-10-31 19:07:08,256 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "flop",
  "your_cards": [
    "2♦",
    "Q♣"
  ],
  "community": [
    "5♠",
    "4♦",
    "7♥"
  ],
  "your_chips": 1731,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 120,
  "pot": 242,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 0,
      "bet": 0,
      "status": "all_in"
    },
    {
      "id": 1,
      "chips": 8027,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1731)"
  ],
  "history": [
    "Player 1 checked",
    "River dealt: 6♦",
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♠ - K♠, Q♣, J♠, 10♥, 8♣ cards=5♦, 10♥",
    "Showdown: Player 3 hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦ cards=A♠, 9♦",
    "Side pot layer 0: amount=60, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Side pot layer 1: amount=120, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 went all-in with 2",
    "Player 1 raised to 120",
    "Player 3 called 100",
    "Flop dealt: 5♠, 4♦, 7♥",
    "Player 1 checked"
  ]
}
2025-10-31 19:07:08,267 - poker_game - DEBUG - Create Session: {'id': '06bf6f00-7633-415e-8c0e-fb59b506b4bf', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905228.2641747}
2025-10-31 19:07:09,989 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）が終わった時点で、あなたの手札（2♦, Q♣）とコミュニティカード（5♠, 4♦, 7♥）を合わせても、強い役はできていません。相手（Player 1）がチェックしたため、こちらも相手に有利な状況を与えないためにチェックを選択します。相手の次のアクションを見て、以降の戦略を考えます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 119, 'promptTokenCount': 914, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 914}], 'totalTokenCount': 1033}, 'invocationId': 'e-f436d950-73c3-4cf6-b93e-077a8be5e9d9', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '83NaLnmf', 'timestamp': 1761905228.280782}]
2025-10-31 19:07:09,989 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:07:09,990 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）が終わった時点で、あなたの手札（2♦, Q♣）とコミュニティカード（5♠, 4♦, 7♥）を合わせても、強い役はできていません。相手（Player 1）がチェックしたため、こちらも相手に有利な状況を与えないためにチェックを選択します。相手の次のアクションを見て、以降の戦略を考えます。"
}
```
2025-10-31 19:07:09,990 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:07:09,990 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）が終わった時点で、あなたの手札（2♦, Q♣）とコミュニティカード（5♠, 4♦, 7♥）を合わせても、強い役はできていません。相手（Player 1）がチェックしたため、こちらも相手に有利な状況を与えないためにチェックを選択します。相手の次のアクションを見て、以降の戦略を考えます。"\n}\n```'
2025-10-31 19:07:09,991 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:07:09,991 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "フロップ（最初の3枚のコミュニティカード）が終わった時点で、あなたの手札（2♦, Q♣）とコミュニティカード（5♠, 4♦, 7♥）を合わせても、強い役はできていません。相手（Player 1）がチェックしたため、こちらも相手に有利な状況を与えないためにチェックを選択します。相手の次のアクションを見て、以降の戦略を考えます。"\n}'
2025-10-31 19:07:09,991 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "フロップ（最初の3枚のコミュニティカード）が終わった時点で、あなたの手札（2♦, Q♣）とコミュニティカード（5♠, 4♦, 7♥）を合わせても、強い役はできていません。相手（Player 1）がチェックしたため、こちらも相手に有利な状況を与えないためにチェックを選択します。相手の次のアクションを見て、以降の戦略を考えます。"
}
2025-10-31 19:07:09,991 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'フロップ（最初の3枚のコミュニティカード）が終わった時点で、あなたの手札（2♦, Q♣）とコミュニティカード（5♠, 4♦, 7♥）を合わせても、強い役はできていません。相手（Player 1）がチェックしたため、こちらも相手に有利な状況を与えないためにチェックを選択します。相手の次のアクションを見て、以降の戦略を考えます。'}
2025-10-31 19:07:09,991 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 19:07:09,991 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 19:07:09,991 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:07:09,992 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, フロップ（最初の3枚のコミュニティカード）が終わった時点で、あなたの手札（2♦, Q♣）とコミュニティカード（5♠, 4♦, 7♥）を合わせても、強い役はできていません。相手（Player 1）がチェックしたため、こちらも相手に有利な状況を与えないためにチェックを選択します。相手の次のアクションを見て、以降の戦略を考えます。
2025-10-31 19:07:09,992 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 19:07:09,993 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:07:09,993 - poker_game - INFO - Hand #29, Phase: flop
2025-10-31 19:07:09,993 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:07:09,993 - poker_game - INFO - Pot: 242, Current bet: 0
2025-10-31 19:07:09,993 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:09,993 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:09,993 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:09,993 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥']
2025-10-31 19:07:09,994 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:09,994 - poker_game - INFO -   P1(Agent1): chips=8027, bet=0, status=active
2025-10-31 19:07:09,994 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:09,994 - poker_game - INFO -   P3(Agent3): chips=1731, bet=0, status=active
2025-10-31 19:07:09,994 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:09,994 - poker_game - INFO - ==================================================
2025-10-31 19:07:09,994 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 19:07:10,017 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:07:10,018 - poker_game - INFO - Hand #29, Phase: flop
2025-10-31 19:07:10,018 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:07:10,018 - poker_game - INFO - Pot: 242, Current bet: 0
2025-10-31 19:07:10,018 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:10,019 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:10,019 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:10,019 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥']
2025-10-31 19:07:10,019 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:10,020 - poker_game - INFO -   P1(Agent1): chips=8027, bet=0, status=active
2025-10-31 19:07:10,020 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:10,020 - poker_game - INFO -   P3(Agent3): chips=1731, bet=0, status=active
2025-10-31 19:07:10,020 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:10,020 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 19:07:10,021 - poker_game - INFO - ==================================================
2025-10-31 19:07:10,021 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:07:10,021 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:07:10,021 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:07:10,021 - poker_game - INFO - Advanced from player 3 to player 1 (seat order)
2025-10-31 19:07:10,022 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:07:10,022 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:07:10,022 - poker_game - DEBUG - Active: 2, All-in: 1
2025-10-31 19:07:10,022 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 19:07:10,022 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 19:07:10,022 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:07:10,022 - poker_game - DEBUG - Current player index: 1
2025-10-31 19:07:10,022 - poker_game - DEBUG - First actor index: 1
2025-10-31 19:07:10,023 - poker_game - INFO - Betting complete: Back to first actor 1 (all players have acted)
2025-10-31 19:07:10,023 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:07:10,023 - poker_game - INFO - Hand #29, Phase: flop
2025-10-31 19:07:10,023 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:10,023 - poker_game - INFO - Pot: 242, Current bet: 0
2025-10-31 19:07:10,023 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:10,030 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:10,030 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:10,031 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥']
2025-10-31 19:07:10,031 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:10,031 - poker_game - INFO -   P1(Agent1): chips=8027, bet=0, status=active
2025-10-31 19:07:10,032 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:10,032 - poker_game - INFO -   P3(Agent3): chips=1731, bet=0, status=active
2025-10-31 19:07:10,034 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:10,034 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:07:10,034 - poker_game - INFO - ==================================================
2025-10-31 19:07:10,138 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 19:07:10,138 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:10,139 - poker_game - INFO - Remaining players: 3
2025-10-31 19:07:10,139 - poker_game - DEBUG -   Remaining P0: Agent0, status: all_in
2025-10-31 19:07:10,139 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:07:10,139 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:07:10,140 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 19:07:10,152 - poker_game - INFO - Starting new betting round
2025-10-31 19:07:10,153 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:07:10,153 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:07:10,153 - poker_game - DEBUG - Active players for new betting round: [1, 3]
2025-10-31 19:07:10,153 - poker_game - DEBUG - Dealer button: 0
2025-10-31 19:07:10,154 - poker_game - INFO - First actor: Player 1 (by phase rule), was 1
2025-10-31 19:07:10,154 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:07:10,154 - poker_game - INFO - Hand #29, Phase: turn
2025-10-31 19:07:10,155 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:10,155 - poker_game - INFO - Pot: 242, Current bet: 0
2025-10-31 19:07:10,155 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:10,155 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:10,156 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:10,156 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥']
2025-10-31 19:07:10,156 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:10,157 - poker_game - INFO -   P1(Agent1): chips=8027, bet=0, status=active
2025-10-31 19:07:10,157 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:10,158 - poker_game - INFO -   P3(Agent3): chips=1731, bet=0, status=active
2025-10-31 19:07:10,158 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:10,159 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 19:07:10,160 - poker_game - INFO - ==================================================
2025-10-31 19:07:10,162 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "turn",
  "your_cards": [
    "4♣",
    "A♥"
  ],
  "community": [
    "5♠",
    "4♦",
    "7♥",
    "10♥"
  ],
  "your_chips": 8027,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 120,
  "pot": 242,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 0,
      "bet": 0,
      "status": "all_in"
    },
    {
      "id": 3,
      "chips": 1731,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (8027)"
  ],
  "history": [
    "Player 3 checked",
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♠ - K♠, Q♣, J♠, 10♥, 8♣ cards=5♦, 10♥",
    "Showdown: Player 3 hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦ cards=A♠, 9♦",
    "Side pot layer 0: amount=60, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Side pot layer 1: amount=120, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 went all-in with 2",
    "Player 1 raised to 120",
    "Player 3 called 100",
    "Flop dealt: 5♠, 4♦, 7♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: 10♥"
  ]
}
2025-10-31 19:07:10,174 - poker_game - DEBUG - Create Session: {'id': 'a13cef85-eada-4769-9b44-46f6ad79878a', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905230.170945}
2025-10-31 19:07:13,896 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "raise",\n  "amount": 200,\n  "reasoning": "あなたは「ターン」（Turn）の段階にいます。これは、コミュニティカードが4枚配られた後の状況です。あなたの手札は「4♣」「A♥」で、コミュニティカードは「5♠」「4♦」「7♥」「10♥」です。これにより、あなたはペア（4のペア）ができています。ポットは242で、コール額は0です（あなたはまだベットしていないため）。プレイヤー3はアクティブで、1731チップを持っています。プレイヤー0はオールインしていますが、チップが0なので考慮不要です。プレイヤー3はチェックしているので、あなたはアクションの選択肢として「fold」（フォールド：降りる）、「check」（チェック：ベットせずに次のプレイヤーに権利を移す）、「raise」（レイズ：ベット額を上げる）、「all-in」（オールイン：全額ベット）が可能です。あなたのペアはそこそこ強いですが、相手がより強いペアやストレート、フラッシュ（ハートのフラッシュ）を持っている可能性もあります。しかし、相手はチェックしているので、そこまで強いハンドを持っていない可能性も考えられます。まずは最小限のレイズ（20ベット）で様子を見るのが良いでしょう。相手がコールしてきたら、ポットオッズ（Pot Odds：ポットの大きさに対してコールに必要な金額の比率）を見て、次の「リバー」（River：最後のコミュニティカード）でのプレーを考えます。ここでは、20のベットをして、相手の反応を見ます。相手がコールした場合、20（あなたのベット）+ 20（相手のコール）+ 242（ポット）= 282のポットになります。20のベットは、最小ベット額の20を上回るため、相手のコール額は20になります。相手がコールした場合、合計ベット額は140になります。ここでは、20のレイズをします。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 426, 'promptTokenCount': 922, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 922}], 'totalTokenCount': 1348}, 'invocationId': 'e-d20d8222-29b8-4c2b-bf2f-9d4849f2d60a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'lcLgKTrV', 'timestamp': 1761905230.184916}]
2025-10-31 19:07:13,896 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:07:13,896 - poker_game - DEBUG - ```json
{
  "action": "raise",
  "amount": 200,
  "reasoning": "あなたは「ターン」（Turn）の段階にいます。これは、コミュニティカードが4枚配られた後の状況です。あなたの手札は「4♣」「A♥」で、コミュニティカードは「5♠」「4♦」「7♥」「10♥」です。これにより、あなたはペア（4のペア）ができています。ポットは242で、コール額は0です（あなたはまだベットしていないため）。プレイヤー3はアクティブで、1731チップを持っています。プレイヤー0はオールインしていますが、チップが0なので考慮不要です。プレイヤー3はチェックしているので、あなたはアクションの選択肢として「fold」（フォールド：降りる）、「check」（チェック：ベットせずに次のプレイヤーに権利を移す）、「raise」（レイズ：ベット額を上げる）、「all-in」（オールイン：全額ベット）が可能です。あなたのペアはそこそこ強いですが、相手がより強いペアやストレート、フラッシュ（ハートのフラッシュ）を持っている可能性もあります。しかし、相手はチェックしているので、そこまで強いハンドを持っていない可能性も考えられます。まずは最小限のレイズ（20ベット）で様子を見るのが良いでしょう。相手がコールしてきたら、ポットオッズ（Pot Odds：ポットの大きさに対してコールに必要な金額の比率）を見て、次の「リバー」（River：最後のコミュニティカード）でのプレーを考えます。ここでは、20のベットをして、相手の反応を見ます。相手がコールした場合、20（あなたのベット）+ 20（相手のコール）+ 242（ポット）= 282のポットになります。20のベットは、最小ベット額の20を上回るため、相手のコール額は20になります。相手がコールした場合、合計ベット額は140になります。ここでは、20のレイズをします。"
}
```
2025-10-31 19:07:13,897 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:07:13,897 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "raise",\n  "amount": 200,\n  "reasoning": "あなたは「ターン」（Turn）の段階にいます。これは、コミュニティカードが4枚配られた後の状況です。あなたの手札は「4♣」「A♥」で、コミュニティカードは「5♠」「4♦」「7♥」「10♥」です。これにより、あなたはペア（4のペア）ができています。ポットは242で、コール額は0です（あなたはまだベットしていないため）。プレイヤー3はアクティブで、1731チップを持っています。プレイヤー0はオールインしていますが、チップが0なので考慮不要です。プレイヤー3はチェックしているので、あなたはアクションの選択肢として「fold」（フォールド：降りる）、「check」（チェック：ベットせずに次のプレイヤーに権利を移す）、「raise」（レイズ：ベット額を上げる）、「all-in」（オールイン：全額ベット）が可能です。あなたのペアはそこそこ強いですが、相手がより強いペアやストレート、フラッシュ（ハートのフラッシュ）を持っている可能性もあります。しかし、相手はチェックしているので、そこまで強いハンドを持っていない可能性も考えられます。まずは最小限のレイズ（20ベット）で様子を見るのが良いでしょう。相手がコールしてきたら、ポットオッズ（Pot Odds：ポットの大きさに対してコールに必要な金額の比率）を見て、次の「リバー」（River：最後のコミュニティカード）でのプレーを考えます。ここでは、20のベットをして、相手の反応を見ます。相手がコールした場合、20（あなたのベット）+ 20（相手のコール）+ 242（ポット）= 282のポットになります。20のベットは、最小ベット額の20を上回るため、相手のコール額は20になります。相手がコールした場合、合計ベット額は140になります。ここでは、20のレイズをします。"\n}\n```'
2025-10-31 19:07:13,897 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:07:13,897 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "raise",\n  "amount": 200,\n  "reasoning": "あなたは「ターン」（Turn）の段階にいます。これは、コミュニティカードが4枚配られた後の状況です。あなたの手札は「4♣」「A♥」で、コミュニティカードは「5♠」「4♦」「7♥」「10♥」です。これにより、あなたはペア（4のペア）ができています。ポットは242で、コール額は0です（あなたはまだベットしていないため）。プレイヤー3はアクティブで、1731チップを持っています。プレイヤー0はオールインしていますが、チップが0なので考慮不要です。プレイヤー3はチェックしているので、あなたはアクションの選択肢として「fold」（フォールド：降りる）、「check」（チェック：ベットせずに次のプレイヤーに権利を移す）、「raise」（レイズ：ベット額を上げる）、「all-in」（オールイン：全額ベット）が可能です。あなたのペアはそこそこ強いですが、相手がより強いペアやストレート、フラッシュ（ハートのフラッシュ）を持っている可能性もあります。しかし、相手はチェックしているので、そこまで強いハンドを持っていない可能性も考えられます。まずは最小限のレイズ（20ベット）で様子を見るのが良いでしょう。相手がコールしてきたら、ポットオッズ（Pot Odds：ポットの大きさに対してコールに必要な金額の比率）を見て、次の「リバー」（River：最後のコミュニティカード）でのプレーを考えます。ここでは、20のベットをして、相手の反応を見ます。相手がコールした場合、20（あなたのベット）+ 20（相手のコール）+ 242（ポット）= 282のポットになります。20のベットは、最小ベット額の20を上回るため、相手のコール額は20になります。相手がコールした場合、合計ベット額は140になります。ここでは、20のレイズをします。"\n}'
2025-10-31 19:07:13,897 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "raise",
  "amount": 200,
  "reasoning": "あなたは「ターン」（Turn）の段階にいます。これは、コミュニティカードが4枚配られた後の状況です。あなたの手札は「4♣」「A♥」で、コミュニティカードは「5♠」「4♦」「7♥」「10♥」です。これにより、あなたはペア（4のペア）ができています。ポットは242で、コール額は0です（あなたはまだベットしていないため）。プレイヤー3はアクティブで、1731チップを持っています。プレイヤー0はオールインしていますが、チップが0なので考慮不要です。プレイヤー3はチェックしているので、あなたはアクションの選択肢として「fold」（フォールド：降りる）、「check」（チェック：ベットせずに次のプレイヤーに権利を移す）、「raise」（レイズ：ベット額を上げる）、「all-in」（オールイン：全額ベット）が可能です。あなたのペアはそこそこ強いですが、相手がより強いペアやストレート、フラッシュ（ハートのフラッシュ）を持っている可能性もあります。しかし、相手はチェックしているので、そこまで強いハンドを持っていない可能性も考えられます。まずは最小限のレイズ（20ベット）で様子を見るのが良いでしょう。相手がコールしてきたら、ポットオッズ（Pot Odds：ポットの大きさに対してコールに必要な金額の比率）を見て、次の「リバー」（River：最後のコミュニティカード）でのプレーを考えます。ここでは、20のベットをして、相手の反応を見ます。相手がコールした場合、20（あなたのベット）+ 20（相手のコール）+ 242（ポット）= 282のポットになります。20のベットは、最小ベット額の20を上回るため、相手のコール額は20になります。相手がコールした場合、合計ベット額は140になります。ここでは、20のレイズをします。"
}
2025-10-31 19:07:13,897 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'raise', 'amount': 200, 'reasoning': 'あなたは「ターン」（Turn）の段階にいます。これは、コミュニティカードが4枚配られた後の状況です。あなたの手札は「4♣」「A♥」で、コミュニティカードは「5♠」「4♦」「7♥」「10♥」です。これにより、あなたはペア（4のペア）ができています。ポットは242で、コール額は0です（あなたはまだベットしていないため）。プレイヤー3はアクティブで、1731チップを持っています。プレイヤー0はオールインしていますが、チップが0なので考慮不要です。プレイヤー3はチェックしているので、あなたはアクションの選択肢として「fold」（フォールド：降りる）、「check」（チェック：ベットせずに次のプレイヤーに権利を移す）、「raise」（レイズ：ベット額を上げる）、「all-in」（オールイン：全額ベット）が可能です。あなたのペアはそこそこ強いですが、相手がより強いペアやストレート、フラッシュ（ハートのフラッシュ）を持っている可能性もあります。しかし、相手はチェックしているので、そこまで強いハンドを持っていない可能性も考えられます。まずは最小限のレイズ（20ベット）で様子を見るのが良いでしょう。相手がコールしてきたら、ポットオッズ（Pot Odds：ポットの大きさに対してコールに必要な金額の比率）を見て、次の「リバー」（River：最後のコミュニティカード）でのプレーを考えます。ここでは、20のベットをして、相手の反応を見ます。相手がコールした場合、20（あなたのベット）+ 20（相手のコール）+ 242（ポット）= 282のポットになります。20のベットは、最小ベット額の20を上回るため、相手のコール額は20になります。相手がコールした場合、合計ベット額は140になります。ここでは、20のレイズをします。'}
2025-10-31 19:07:13,898 - poker_game - DEBUG - [Agent1] Extracted values - action: 'raise', amount: 200
2025-10-31 19:07:13,898 - poker_game - DEBUG - [Agent1] Processing raise action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (8027)']
2025-10-31 19:07:13,898 - poker_game - DEBUG - [Agent1] Minimum raise amount extracted from 'raise (min 20)': 20
2025-10-31 19:07:13,898 - poker_game - DEBUG - [Agent1] Raise amount 200 is valid (min: 20)
2025-10-31 19:07:13,898 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'raise', 'amount': 200}
2025-10-31 19:07:13,898 - poker_game - INFO - [Agent1] Successfully parsed decision: raise, 200, あなたは「ターン」（Turn）の段階にいます。これは、コミュニティカードが4枚配られた後の状況です。あなたの手札は「4♣」「A♥」で、コミュニティカードは「5♠」「4♦」「7♥」「10♥」です。これにより、あなたはペア（4のペア）ができています。ポットは242で、コール額は0です（あなたはまだベットしていないため）。プレイヤー3はアクティブで、1731チップを持っています。プレイヤー0はオールインしていますが、チップが0なので考慮不要です。プレイヤー3はチェックしているので、あなたはアクションの選択肢として「fold」（フォールド：降りる）、「check」（チェック：ベットせずに次のプレイヤーに権利を移す）、「raise」（レイズ：ベット額を上げる）、「all-in」（オールイン：全額ベット）が可能です。あなたのペアはそこそこ強いですが、相手がより強いペアやストレート、フラッシュ（ハートのフラッシュ）を持っている可能性もあります。しかし、相手はチェックしているので、そこまで強いハンドを持っていない可能性も考えられます。まずは最小限のレイズ（20ベット）で様子を見るのが良いでしょう。相手がコールしてきたら、ポットオッズ（Pot Odds：ポットの大きさに対してコールに必要な金額の比率）を見て、次の「リバー」（River：最後のコミュニティカード）でのプレーを考えます。ここでは、20のベットをして、相手の反応を見ます。相手がコールした場合、20（あなたのベット）+ 20（相手のコール）+ 242（ポット）= 282のポットになります。20のベットは、最小ベット額の20を上回るため、相手のコール額は20になります。相手がコールした場合、合計ベット額は140になります。ここでは、20のレイズをします。
2025-10-31 19:07:13,899 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'raise' with amount 200
2025-10-31 19:07:13,899 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:07:13,899 - poker_game - INFO - Hand #29, Phase: turn
2025-10-31 19:07:13,899 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:13,900 - poker_game - INFO - Pot: 242, Current bet: 0
2025-10-31 19:07:13,900 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:13,900 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:13,900 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:13,900 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥']
2025-10-31 19:07:13,901 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:13,901 - poker_game - INFO -   P1(Agent1): chips=8027, bet=0, status=active
2025-10-31 19:07:13,901 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:13,901 - poker_game - INFO -   P3(Agent3): chips=1731, bet=0, status=active
2025-10-31 19:07:13,901 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:13,902 - poker_game - INFO - ==================================================
2025-10-31 19:07:13,902 - poker_game - INFO - ACTION_EXECUTED: Player 1 raised to 200
2025-10-31 19:07:13,914 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:07:13,915 - poker_game - INFO - Hand #29, Phase: turn
2025-10-31 19:07:13,915 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:13,915 - poker_game - INFO - Pot: 442, Current bet: 200
2025-10-31 19:07:13,915 - poker_game - INFO - Last raiser: 1
2025-10-31 19:07:13,916 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:13,916 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:13,916 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥']
2025-10-31 19:07:13,916 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:13,916 - poker_game - INFO -   P1(Agent1): chips=7827, bet=200, status=active
2025-10-31 19:07:13,916 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:13,916 - poker_game - INFO -   P3(Agent3): chips=1731, bet=0, status=active
2025-10-31 19:07:13,916 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:13,917 - poker_game - INFO - Extra: Action: Player 1 raised to 200
2025-10-31 19:07:13,917 - poker_game - INFO - ==================================================
2025-10-31 19:07:13,917 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:07:13,917 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:07:13,917 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:07:13,917 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:07:13,917 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:07:13,917 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:07:13,917 - poker_game - DEBUG - Active: 2, All-in: 1
2025-10-31 19:07:13,918 - poker_game - DEBUG - Player bets: [200, 0], Current bet: 200, All same: False
2025-10-31 19:07:13,918 - poker_game - DEBUG - Betting continues: Not all players have same bet
2025-10-31 19:07:13,918 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:07:13,918 - poker_game - INFO - Hand #29, Phase: turn
2025-10-31 19:07:13,918 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:07:13,918 - poker_game - INFO - Pot: 442, Current bet: 200
2025-10-31 19:07:13,918 - poker_game - INFO - Last raiser: 1
2025-10-31 19:07:13,918 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:13,918 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:13,918 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥']
2025-10-31 19:07:13,918 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:13,918 - poker_game - INFO -   P1(Agent1): chips=7827, bet=200, status=active
2025-10-31 19:07:13,918 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:13,918 - poker_game - INFO -   P3(Agent3): chips=1731, bet=0, status=active
2025-10-31 19:07:13,919 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:13,919 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:07:13,919 - poker_game - INFO - ==================================================
2025-10-31 19:07:14,020 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "turn",
  "your_cards": [
    "2♦",
    "Q♣"
  ],
  "community": [
    "5♠",
    "4♦",
    "7♥",
    "10♥"
  ],
  "your_chips": 1731,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 120,
  "pot": 442,
  "to_call": 200,
  "dealer_button": 0,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 0,
      "bet": 0,
      "status": "all_in"
    },
    {
      "id": 1,
      "chips": 7827,
      "bet": 200,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (200)",
    "raise (min 220)",
    "all-in (1731)"
  ],
  "history": [
    "Player 1 checked",
    "Showdown: Player 1 hand=High Card: K♠ - K♠, Q♣, J♠, 10♥, 8♣ cards=5♦, 10♥",
    "Showdown: Player 3 hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦ cards=A♠, 9♦",
    "Side pot layer 0: amount=60, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Side pot layer 1: amount=120, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 went all-in with 2",
    "Player 1 raised to 120",
    "Player 3 called 100",
    "Flop dealt: 5♠, 4♦, 7♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: 10♥",
    "Player 1 raised to 200"
  ]
}
2025-10-31 19:07:14,029 - poker_game - DEBUG - Create Session: {'id': '55207903-7ad4-48f2-bad1-d92c09e72669', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905234.027015}
2025-10-31 19:07:16,275 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 200,\n  "reasoning": "あなたの手札はQハイであり、コミュニティカードにはストレート（5-6-7-8-9）やフラッシュ（♥）はありません。しかし、相手のレイズ額（200）はポット（442）に対してそれほど大きくなく、コールして次のカード（リバー）を見る価値はあります。相手がブラフ（駆け引き）をしている可能性も考慮し、コールを選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 122, 'promptTokenCount': 936, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 936}], 'totalTokenCount': 1058}, 'invocationId': 'e-8ed9c22f-12e8-4d57-8ef3-a16276f0da1c', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'ZRb0PyjB', 'timestamp': 1761905234.036979}]
2025-10-31 19:07:16,276 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:07:16,276 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 200,
  "reasoning": "あなたの手札はQハイであり、コミュニティカードにはストレート（5-6-7-8-9）やフラッシュ（♥）はありません。しかし、相手のレイズ額（200）はポット（442）に対してそれほど大きくなく、コールして次のカード（リバー）を見る価値はあります。相手がブラフ（駆け引き）をしている可能性も考慮し、コールを選択します。"
}
```
2025-10-31 19:07:16,276 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:07:16,276 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 200,\n  "reasoning": "あなたの手札はQハイであり、コミュニティカードにはストレート（5-6-7-8-9）やフラッシュ（♥）はありません。しかし、相手のレイズ額（200）はポット（442）に対してそれほど大きくなく、コールして次のカード（リバー）を見る価値はあります。相手がブラフ（駆け引き）をしている可能性も考慮し、コールを選択します。"\n}\n```'
2025-10-31 19:07:16,276 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:07:16,276 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 200,\n  "reasoning": "あなたの手札はQハイであり、コミュニティカードにはストレート（5-6-7-8-9）やフラッシュ（♥）はありません。しかし、相手のレイズ額（200）はポット（442）に対してそれほど大きくなく、コールして次のカード（リバー）を見る価値はあります。相手がブラフ（駆け引き）をしている可能性も考慮し、コールを選択します。"\n}'
2025-10-31 19:07:16,277 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 200,
  "reasoning": "あなたの手札はQハイであり、コミュニティカードにはストレート（5-6-7-8-9）やフラッシュ（♥）はありません。しかし、相手のレイズ額（200）はポット（442）に対してそれほど大きくなく、コールして次のカード（リバー）を見る価値はあります。相手がブラフ（駆け引き）をしている可能性も考慮し、コールを選択します。"
}
2025-10-31 19:07:16,277 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 200, 'reasoning': 'あなたの手札はQハイであり、コミュニティカードにはストレート（5-6-7-8-9）やフラッシュ（♥）はありません。しかし、相手のレイズ額（200）はポット（442）に対してそれほど大きくなく、コールして次のカード（リバー）を見る価値はあります。相手がブラフ（駆け引き）をしている可能性も考慮し、コールを選択します。'}
2025-10-31 19:07:16,277 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 200
2025-10-31 19:07:16,277 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'call (200)', 'raise (min 220)', 'all-in (1731)']
2025-10-31 19:07:16,277 - poker_game - DEBUG - [Agent3] Call amount extracted from 'call (200)': 200
2025-10-31 19:07:16,277 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 200}
2025-10-31 19:07:16,277 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 200, あなたの手札はQハイであり、コミュニティカードにはストレート（5-6-7-8-9）やフラッシュ（♥）はありません。しかし、相手のレイズ額（200）はポット（442）に対してそれほど大きくなく、コールして次のカード（リバー）を見る価値はあります。相手がブラフ（駆け引き）をしている可能性も考慮し、コールを選択します。
2025-10-31 19:07:16,278 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 200
2025-10-31 19:07:16,278 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:07:16,278 - poker_game - INFO - Hand #29, Phase: turn
2025-10-31 19:07:16,279 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:07:16,279 - poker_game - INFO - Pot: 442, Current bet: 200
2025-10-31 19:07:16,279 - poker_game - INFO - Last raiser: 1
2025-10-31 19:07:16,279 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:16,279 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:16,280 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥']
2025-10-31 19:07:16,280 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:16,280 - poker_game - INFO -   P1(Agent1): chips=7827, bet=200, status=active
2025-10-31 19:07:16,280 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:16,280 - poker_game - INFO -   P3(Agent3): chips=1731, bet=0, status=active
2025-10-31 19:07:16,281 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:16,281 - poker_game - INFO - ==================================================
2025-10-31 19:07:16,281 - poker_game - INFO - ACTION_EXECUTED: Player 3 called 200
2025-10-31 19:07:16,293 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:07:16,293 - poker_game - INFO - Hand #29, Phase: turn
2025-10-31 19:07:16,295 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:07:16,295 - poker_game - INFO - Pot: 642, Current bet: 200
2025-10-31 19:07:16,295 - poker_game - INFO - Last raiser: 1
2025-10-31 19:07:16,296 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:16,296 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:16,297 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥']
2025-10-31 19:07:16,298 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:16,299 - poker_game - INFO -   P1(Agent1): chips=7827, bet=200, status=active
2025-10-31 19:07:16,299 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:16,299 - poker_game - INFO -   P3(Agent3): chips=1531, bet=200, status=active
2025-10-31 19:07:16,300 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:16,300 - poker_game - INFO - Extra: Action: Player 3 called 200
2025-10-31 19:07:16,300 - poker_game - INFO - ==================================================
2025-10-31 19:07:16,300 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:07:16,301 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:07:16,301 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:07:16,301 - poker_game - INFO - Advanced from player 3 to player 1 (seat order)
2025-10-31 19:07:16,301 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:07:16,301 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:07:16,301 - poker_game - DEBUG - Active: 2, All-in: 1
2025-10-31 19:07:16,302 - poker_game - DEBUG - Player bets: [200, 200], Current bet: 200, All same: True
2025-10-31 19:07:16,302 - poker_game - INFO - Betting complete: All players matched after a bet/raise
2025-10-31 19:07:16,302 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:07:16,302 - poker_game - INFO - Hand #29, Phase: turn
2025-10-31 19:07:16,302 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:16,303 - poker_game - INFO - Pot: 642, Current bet: 200
2025-10-31 19:07:16,303 - poker_game - INFO - Last raiser: 1
2025-10-31 19:07:16,303 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:16,303 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:16,304 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥']
2025-10-31 19:07:16,304 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:16,304 - poker_game - INFO -   P1(Agent1): chips=7827, bet=200, status=active
2025-10-31 19:07:16,304 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:16,305 - poker_game - INFO -   P3(Agent3): chips=1531, bet=200, status=active
2025-10-31 19:07:16,305 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:16,305 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:07:16,305 - poker_game - INFO - ==================================================
2025-10-31 19:07:16,406 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 19:07:16,407 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:16,407 - poker_game - INFO - Remaining players: 3
2025-10-31 19:07:16,408 - poker_game - DEBUG -   Remaining P0: Agent0, status: all_in
2025-10-31 19:07:16,408 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:07:16,408 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:07:16,408 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 19:07:16,419 - poker_game - INFO - Starting new betting round
2025-10-31 19:07:16,419 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:07:16,419 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:07:16,420 - poker_game - DEBUG - Active players for new betting round: [1, 3]
2025-10-31 19:07:16,420 - poker_game - DEBUG - Dealer button: 0
2025-10-31 19:07:16,420 - poker_game - INFO - First actor: Player 1 (by phase rule), was 1
2025-10-31 19:07:16,421 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:07:16,421 - poker_game - INFO - Hand #29, Phase: river
2025-10-31 19:07:16,422 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:16,422 - poker_game - INFO - Pot: 642, Current bet: 0
2025-10-31 19:07:16,422 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:16,423 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:16,423 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:16,423 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥', '3♣']
2025-10-31 19:07:16,424 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:16,424 - poker_game - INFO -   P1(Agent1): chips=7827, bet=0, status=active
2025-10-31 19:07:16,424 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:16,425 - poker_game - INFO -   P3(Agent3): chips=1531, bet=0, status=active
2025-10-31 19:07:16,426 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:16,427 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 19:07:16,428 - poker_game - INFO - ==================================================
2025-10-31 19:07:16,429 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "river",
  "your_cards": [
    "4♣",
    "A♥"
  ],
  "community": [
    "5♠",
    "4♦",
    "7♥",
    "10♥",
    "3♣"
  ],
  "your_chips": 7827,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 320,
  "pot": 642,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 0,
      "bet": 0,
      "status": "all_in"
    },
    {
      "id": 3,
      "chips": 1531,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (7827)"
  ],
  "history": [
    "Showdown: Player 3 hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦ cards=A♠, 9♦",
    "Side pot layer 0: amount=60, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Side pot layer 1: amount=120, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 went all-in with 2",
    "Player 1 raised to 120",
    "Player 3 called 100",
    "Flop dealt: 5♠, 4♦, 7♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: 10♥",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "River dealt: 3♣"
  ]
}
2025-10-31 19:07:16,449 - poker_game - DEBUG - Create Session: {'id': '4f3db121-d3ef-46af-bb0b-2fabeab8c4fd', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905236.4462268}
2025-10-31 19:07:18,179 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（ボードの最後のカードが開かれた後）で、あなたの手札はAハイ（A♥、10♥、7♥、5♠、4♦）で、ボードのペア（4♦）を活かせません。相手はオールインしており、ポットはすでに大きくなっています。コールするには相手のベット額が不明なため、チェックで様子を見るのが最善です。もし相手がベットしてきた場合、その額を見てから判断できます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 128, 'promptTokenCount': 903, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 903}], 'totalTokenCount': 1031}, 'invocationId': 'e-80a850a5-a260-458c-a4df-456a58be488a', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'pfMs9akR', 'timestamp': 1761905236.460262}]
2025-10-31 19:07:18,180 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:07:18,181 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（ボードの最後のカードが開かれた後）で、あなたの手札はAハイ（A♥、10♥、7♥、5♠、4♦）で、ボードのペア（4♦）を活かせません。相手はオールインしており、ポットはすでに大きくなっています。コールするには相手のベット額が不明なため、チェックで様子を見るのが最善です。もし相手がベットしてきた場合、その額を見てから判断できます。"
}
```
2025-10-31 19:07:18,181 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:07:18,181 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（ボードの最後のカードが開かれた後）で、あなたの手札はAハイ（A♥、10♥、7♥、5♠、4♦）で、ボードのペア（4♦）を活かせません。相手はオールインしており、ポットはすでに大きくなっています。コールするには相手のベット額が不明なため、チェックで様子を見るのが最善です。もし相手がベットしてきた場合、その額を見てから判断できます。"\n}\n```'
2025-10-31 19:07:18,181 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:07:18,181 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（ボードの最後のカードが開かれた後）で、あなたの手札はAハイ（A♥、10♥、7♥、5♠、4♦）で、ボードのペア（4♦）を活かせません。相手はオールインしており、ポットはすでに大きくなっています。コールするには相手のベット額が不明なため、チェックで様子を見るのが最善です。もし相手がベットしてきた場合、その額を見てから判断できます。"\n}'
2025-10-31 19:07:18,181 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（ボードの最後のカードが開かれた後）で、あなたの手札はAハイ（A♥、10♥、7♥、5♠、4♦）で、ボードのペア（4♦）を活かせません。相手はオールインしており、ポットはすでに大きくなっています。コールするには相手のベット額が不明なため、チェックで様子を見るのが最善です。もし相手がベットしてきた場合、その額を見てから判断できます。"
}
2025-10-31 19:07:18,181 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（ボードの最後のカードが開かれた後）で、あなたの手札はAハイ（A♥、10♥、7♥、5♠、4♦）で、ボードのペア（4♦）を活かせません。相手はオールインしており、ポットはすでに大きくなっています。コールするには相手のベット額が不明なため、チェックで様子を見るのが最善です。もし相手がベットしてきた場合、その額を見てから判断できます。'}
2025-10-31 19:07:18,182 - poker_game - DEBUG - [Agent1] Extracted values - action: 'check', amount: 0
2025-10-31 19:07:18,182 - poker_game - DEBUG - [Agent1] Action 'check' normalized - amount set to 0
2025-10-31 19:07:18,182 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:07:18,182 - poker_game - INFO - [Agent1] Successfully parsed decision: check, 0, リバー（ボードの最後のカードが開かれた後）で、あなたの手札はAハイ（A♥、10♥、7♥、5♠、4♦）で、ボードのペア（4♦）を活かせません。相手はオールインしており、ポットはすでに大きくなっています。コールするには相手のベット額が不明なため、チェックで様子を見るのが最善です。もし相手がベットしてきた場合、その額を見てから判断できます。
2025-10-31 19:07:18,184 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'check' with amount 0
2025-10-31 19:07:18,184 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:07:18,184 - poker_game - INFO - Hand #29, Phase: river
2025-10-31 19:07:18,184 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:18,184 - poker_game - INFO - Pot: 642, Current bet: 0
2025-10-31 19:07:18,185 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:18,185 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:18,185 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:18,185 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥', '3♣']
2025-10-31 19:07:18,185 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:18,185 - poker_game - INFO -   P1(Agent1): chips=7827, bet=0, status=active
2025-10-31 19:07:18,185 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:18,186 - poker_game - INFO -   P3(Agent3): chips=1531, bet=0, status=active
2025-10-31 19:07:18,186 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:18,186 - poker_game - INFO - ==================================================
2025-10-31 19:07:18,186 - poker_game - INFO - ACTION_EXECUTED: Player 1 checked
2025-10-31 19:07:18,199 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:07:18,199 - poker_game - INFO - Hand #29, Phase: river
2025-10-31 19:07:18,199 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:18,200 - poker_game - INFO - Pot: 642, Current bet: 0
2025-10-31 19:07:18,200 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:18,200 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:18,200 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:18,201 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥', '3♣']
2025-10-31 19:07:18,201 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:18,201 - poker_game - INFO -   P1(Agent1): chips=7827, bet=0, status=active
2025-10-31 19:07:18,201 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:18,202 - poker_game - INFO -   P3(Agent3): chips=1531, bet=0, status=active
2025-10-31 19:07:18,202 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:18,202 - poker_game - INFO - Extra: Action: Player 1 checked
2025-10-31 19:07:18,203 - poker_game - INFO - ==================================================
2025-10-31 19:07:18,203 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:07:18,203 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:07:18,203 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:07:18,204 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:07:18,204 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:07:18,204 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:07:18,204 - poker_game - DEBUG - Active: 2, All-in: 1
2025-10-31 19:07:18,204 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 19:07:18,204 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 19:07:18,205 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:07:18,205 - poker_game - DEBUG - Current player index: 3
2025-10-31 19:07:18,206 - poker_game - DEBUG - First actor index: 1
2025-10-31 19:07:18,206 - poker_game - DEBUG - Betting continues: Current player 3 != first actor 1
2025-10-31 19:07:18,206 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:07:18,206 - poker_game - INFO - Hand #29, Phase: river
2025-10-31 19:07:18,206 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:07:18,207 - poker_game - INFO - Pot: 642, Current bet: 0
2025-10-31 19:07:18,207 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:18,207 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:18,208 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:18,208 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥', '3♣']
2025-10-31 19:07:18,208 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:18,209 - poker_game - INFO -   P1(Agent1): chips=7827, bet=0, status=active
2025-10-31 19:07:18,209 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:18,209 - poker_game - INFO -   P3(Agent3): chips=1531, bet=0, status=active
2025-10-31 19:07:18,209 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:18,210 - poker_game - INFO - Extra: Betting complete: False
2025-10-31 19:07:18,210 - poker_game - INFO - ==================================================
2025-10-31 19:07:18,311 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "river",
  "your_cards": [
    "2♦",
    "Q♣"
  ],
  "community": [
    "5♠",
    "4♦",
    "7♥",
    "10♥",
    "3♣"
  ],
  "your_chips": 1531,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 320,
  "pot": 642,
  "to_call": 0,
  "dealer_button": 0,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 0,
      "bet": 0,
      "status": "all_in"
    },
    {
      "id": 1,
      "chips": 7827,
      "bet": 0,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1531)"
  ],
  "history": [
    "Side pot layer 0: amount=60, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Side pot layer 1: amount=120, winners=3 best_hand=High Card: A♠ - A♠, K♠, Q♣, J♠, 9♦",
    "Player 0 posted small blind 10",
    "Player 1 posted big blind 20",
    "Player 3 folded",
    "Player 0 folded",
    "Showdown: Player 1 won 30",
    "Player 1 posted small blind 10",
    "Player 3 posted big blind 20",
    "Player 0 went all-in with 2",
    "Player 1 raised to 120",
    "Player 3 called 100",
    "Flop dealt: 5♠, 4♦, 7♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: 10♥",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "River dealt: 3♣",
    "Player 1 checked"
  ]
}
2025-10-31 19:07:18,331 - poker_game - DEBUG - Create Session: {'id': '31267084-9eba-4985-b7be-cf229854f50e', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905238.326592}
2025-10-31 19:07:20,643 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）で、あなたの手札（2♦, Q♣）とコミュニティカード（5♠, 4♦, 7♥, 10♥, 3♣）を組み合わせても、強い役はできません。あなたのベストハンドはQハイ（クイーンが一番高いカード）です。対戦相手（Player 1）はチェックしたので、あなたもチェックしてショーダウン（役の公開）に進むのが最善です。もしベットされていたら、フォールド（降りる）かコール（相手のベット額と同額を支払う）の選択になりますが、この状況ではベット額によってはコールできない可能性もあります。今回は相手がチェックしたので、追加のベットなしでショーダウンに進みます。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 191, 'promptTokenCount': 870, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 870}], 'totalTokenCount': 1061}, 'invocationId': 'e-767590d2-172f-4b89-bdac-139420ffc0b0', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': '06UrdOMx', 'timestamp': 1761905238.344675}]
2025-10-31 19:07:20,644 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:07:20,644 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最後のコミュニティカードが配られた後）で、あなたの手札（2♦, Q♣）とコミュニティカード（5♠, 4♦, 7♥, 10♥, 3♣）を組み合わせても、強い役はできません。あなたのベストハンドはQハイ（クイーンが一番高いカード）です。対戦相手（Player 1）はチェックしたので、あなたもチェックしてショーダウン（役の公開）に進むのが最善です。もしベットされていたら、フォールド（降りる）かコール（相手のベット額と同額を支払う）の選択になりますが、この状況ではベット額によってはコールできない可能性もあります。今回は相手がチェックしたので、追加のベットなしでショーダウンに進みます。"
}
```
2025-10-31 19:07:20,644 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:07:20,644 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）で、あなたの手札（2♦, Q♣）とコミュニティカード（5♠, 4♦, 7♥, 10♥, 3♣）を組み合わせても、強い役はできません。あなたのベストハンドはQハイ（クイーンが一番高いカード）です。対戦相手（Player 1）はチェックしたので、あなたもチェックしてショーダウン（役の公開）に進むのが最善です。もしベットされていたら、フォールド（降りる）かコール（相手のベット額と同額を支払う）の選択になりますが、この状況ではベット額によってはコールできない可能性もあります。今回は相手がチェックしたので、追加のベットなしでショーダウンに進みます。"\n}\n```'
2025-10-31 19:07:20,644 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:07:20,644 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（最後のコミュニティカードが配られた後）で、あなたの手札（2♦, Q♣）とコミュニティカード（5♠, 4♦, 7♥, 10♥, 3♣）を組み合わせても、強い役はできません。あなたのベストハンドはQハイ（クイーンが一番高いカード）です。対戦相手（Player 1）はチェックしたので、あなたもチェックしてショーダウン（役の公開）に進むのが最善です。もしベットされていたら、フォールド（降りる）かコール（相手のベット額と同額を支払う）の選択になりますが、この状況ではベット額によってはコールできない可能性もあります。今回は相手がチェックしたので、追加のベットなしでショーダウンに進みます。"\n}'
2025-10-31 19:07:20,645 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（最後のコミュニティカードが配られた後）で、あなたの手札（2♦, Q♣）とコミュニティカード（5♠, 4♦, 7♥, 10♥, 3♣）を組み合わせても、強い役はできません。あなたのベストハンドはQハイ（クイーンが一番高いカード）です。対戦相手（Player 1）はチェックしたので、あなたもチェックしてショーダウン（役の公開）に進むのが最善です。もしベットされていたら、フォールド（降りる）かコール（相手のベット額と同額を支払う）の選択になりますが、この状況ではベット額によってはコールできない可能性もあります。今回は相手がチェックしたので、追加のベットなしでショーダウンに進みます。"
}
2025-10-31 19:07:20,645 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（最後のコミュニティカードが配られた後）で、あなたの手札（2♦, Q♣）とコミュニティカード（5♠, 4♦, 7♥, 10♥, 3♣）を組み合わせても、強い役はできません。あなたのベストハンドはQハイ（クイーンが一番高いカード）です。対戦相手（Player 1）はチェックしたので、あなたもチェックしてショーダウン（役の公開）に進むのが最善です。もしベットされていたら、フォールド（降りる）かコール（相手のベット額と同額を支払う）の選択になりますが、この状況ではベット額によってはコールできない可能性もあります。今回は相手がチェックしたので、追加のベットなしでショーダウンに進みます。'}
2025-10-31 19:07:20,645 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 19:07:20,645 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 19:07:20,645 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:07:20,645 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, リバー（最後のコミュニティカードが配られた後）で、あなたの手札（2♦, Q♣）とコミュニティカード（5♠, 4♦, 7♥, 10♥, 3♣）を組み合わせても、強い役はできません。あなたのベストハンドはQハイ（クイーンが一番高いカード）です。対戦相手（Player 1）はチェックしたので、あなたもチェックしてショーダウン（役の公開）に進むのが最善です。もしベットされていたら、フォールド（降りる）かコール（相手のベット額と同額を支払う）の選択になりますが、この状況ではベット額によってはコールできない可能性もあります。今回は相手がチェックしたので、追加のベットなしでショーダウンに進みます。
2025-10-31 19:07:20,646 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 19:07:20,646 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:07:20,646 - poker_game - INFO - Hand #29, Phase: river
2025-10-31 19:07:20,646 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:07:20,647 - poker_game - INFO - Pot: 642, Current bet: 0
2025-10-31 19:07:20,647 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:20,647 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:20,647 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:20,648 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥', '3♣']
2025-10-31 19:07:20,648 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:20,648 - poker_game - INFO -   P1(Agent1): chips=7827, bet=0, status=active
2025-10-31 19:07:20,648 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:20,649 - poker_game - INFO -   P3(Agent3): chips=1531, bet=0, status=active
2025-10-31 19:07:20,649 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:20,649 - poker_game - INFO - ==================================================
2025-10-31 19:07:20,649 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 19:07:20,658 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:07:20,659 - poker_game - INFO - Hand #29, Phase: river
2025-10-31 19:07:20,659 - poker_game - INFO - Current player: 3, Dealer: 0
2025-10-31 19:07:20,659 - poker_game - INFO - Pot: 642, Current bet: 0
2025-10-31 19:07:20,660 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:20,660 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:20,660 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:20,661 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥', '3♣']
2025-10-31 19:07:20,661 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:20,662 - poker_game - INFO -   P1(Agent1): chips=7827, bet=0, status=active
2025-10-31 19:07:20,662 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:20,662 - poker_game - INFO -   P3(Agent3): chips=1531, bet=0, status=active
2025-10-31 19:07:20,663 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:20,663 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 19:07:20,664 - poker_game - INFO - ==================================================
2025-10-31 19:07:20,664 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:07:20,664 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:07:20,665 - poker_game - DEBUG - Active players: [1, 3]
2025-10-31 19:07:20,665 - poker_game - INFO - Advanced from player 3 to player 1 (seat order)
2025-10-31 19:07:20,665 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:07:20,666 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:07:20,666 - poker_game - DEBUG - Active: 2, All-in: 1
2025-10-31 19:07:20,666 - poker_game - DEBUG - Player bets: [0, 0], Current bet: 0, All same: True
2025-10-31 19:07:20,667 - poker_game - DEBUG - Active player indices: [1, 3]
2025-10-31 19:07:20,667 - poker_game - DEBUG - Last raiser index: None
2025-10-31 19:07:20,667 - poker_game - DEBUG - Current player index: 1
2025-10-31 19:07:20,667 - poker_game - DEBUG - First actor index: 1
2025-10-31 19:07:20,667 - poker_game - INFO - Betting complete: Back to first actor 1 (all players have acted)
2025-10-31 19:07:20,667 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:07:20,668 - poker_game - INFO - Hand #29, Phase: river
2025-10-31 19:07:20,668 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:20,668 - poker_game - INFO - Pot: 642, Current bet: 0
2025-10-31 19:07:20,669 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:20,669 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:20,670 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:20,670 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥', '3♣']
2025-10-31 19:07:20,671 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:20,671 - poker_game - INFO -   P1(Agent1): chips=7827, bet=0, status=active
2025-10-31 19:07:20,671 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:20,672 - poker_game - INFO -   P3(Agent3): chips=1531, bet=0, status=active
2025-10-31 19:07:20,672 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:20,672 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:07:20,673 - poker_game - INFO - ==================================================
2025-10-31 19:07:20,774 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 19:07:20,774 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:20,775 - poker_game - INFO - Remaining players: 3
2025-10-31 19:07:20,775 - poker_game - DEBUG -   Remaining P0: Agent0, status: all_in
2025-10-31 19:07:20,775 - poker_game - DEBUG -   Remaining P1: Agent1, status: active
2025-10-31 19:07:20,776 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:07:20,776 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 19:07:20,776 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 19:07:20,776 - poker_game - INFO - Hand #29, Phase: showdown
2025-10-31 19:07:20,777 - poker_game - INFO - Current player: 1, Dealer: 0
2025-10-31 19:07:20,777 - poker_game - INFO - Pot: 642, Current bet: 0
2025-10-31 19:07:20,777 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:20,778 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:20,778 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:20,778 - poker_game - INFO - Community cards: ['5♠', '4♦', '7♥', '10♥', '3♣']
2025-10-31 19:07:20,778 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:20,779 - poker_game - INFO -   P1(Agent1): chips=7827, bet=0, status=active
2025-10-31 19:07:20,779 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:20,780 - poker_game - INFO -   P3(Agent3): chips=1531, bet=0, status=active
2025-10-31 19:07:20,780 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:20,780 - poker_game - INFO - ==================================================
2025-10-31 19:07:20,781 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 19:07:20,781 - poker_game - INFO - Pot: 642, Community cards: ['5♠', '4♦', '7♥', '10♥', '3♣']
2025-10-31 19:07:20,782 - poker_game - INFO -   Player 0 status=all_in cards=['K♠', 'K♦']
2025-10-31 19:07:20,782 - poker_game - INFO -   Player 1 status=active cards=['4♣', 'A♥']
2025-10-31 19:07:20,783 - poker_game - INFO -   Player 3 status=active cards=['2♦', 'Q♣']
2025-10-31 19:07:20,789 - poker_game - INFO -   Player 0 hand=One Pair: Ks - K♠, K♦, 10♥, 7♥, 5♠ cards=['K♠', 'K♦']
2025-10-31 19:07:20,790 - poker_game - INFO -   Player 1 hand=One Pair: 4s - A♥, 10♥, 7♥, 4♣, 4♦ cards=['4♣', 'A♥']
2025-10-31 19:07:20,790 - poker_game - INFO -   Player 3 hand=High Card: Q♣ - Q♣, 10♥, 7♥, 5♠, 4♦ cards=['2♦', 'Q♣']
2025-10-31 19:07:20,791 - poker_game - INFO - Pot layer 0: amount=6, contributors=[0, 1, 3]
2025-10-31 19:07:20,791 - poker_game - INFO - Pot layer 1: amount=636, contributors=[1, 3]
2025-10-31 19:07:20,792 - poker_game - INFO - Showdown total awarded: 642 (game.pot=642)
2025-10-31 19:07:20,793 - poker_game - INFO - Showdown winners (aggregated): [0, 1]
2025-10-31 19:07:20,793 - poker_game - INFO -   Awarded 6 to Player 0 (hand=One Pair: Ks - K♠, K♦, 10♥, 7♥, 5♠)
2025-10-31 19:07:20,794 - poker_game - INFO -   Awarded 636 to Player 1 (hand=One Pair: 4s - A♥, 10♥, 7♥, 4♣, 4♦)
2025-10-31 19:07:20,794 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
2025-10-31 19:07:20,833 - poker_game - INFO - === STARTING NEW HAND #30 ===
2025-10-31 19:07:20,834 - poker_game - INFO - Active players for new hand: 3
2025-10-31 19:07:20,835 - poker_game - INFO - Moving dealer button
2025-10-31 19:07:20,835 - poker_game - INFO - Posting blinds
2025-10-31 19:07:20,857 - poker_game - INFO - Dealing hole cards
2025-10-31 19:07:20,858 - poker_game - INFO - Setting first actor for preflop
2025-10-31 19:07:20,868 - poker_game - INFO - Started new hand in database: hand_id=30
2025-10-31 19:07:20,869 - poker_game - INFO - === HAND_STARTED ===
2025-10-31 19:07:20,870 - poker_game - INFO - Hand #30, Phase: preflop
2025-10-31 19:07:20,870 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:07:20,871 - poker_game - INFO - Pot: 16, Current bet: 6
2025-10-31 19:07:20,871 - poker_game - INFO - Last raiser: 0
2025-10-31 19:07:20,871 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:20,872 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:20,872 - poker_game - INFO - Community cards: []
2025-10-31 19:07:20,873 - poker_game - INFO -   P0(Agent0): chips=0, bet=6, status=all_in
2025-10-31 19:07:20,873 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=active
2025-10-31 19:07:20,873 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:20,874 - poker_game - INFO -   P3(Agent3): chips=1521, bet=10, status=active
2025-10-31 19:07:20,874 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:20,875 - poker_game - INFO - ==================================================
2025-10-31 19:07:20,876 - poker_game - DEBUG - LLM Prompt for Agent1: {
  "your_id": 1,
  "phase": "preflop",
  "your_cards": [
    "5♥",
    "7♠"
  ],
  "community": [],
  "your_chips": 8463,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 0,
  "pot": 16,
  "to_call": 6,
  "dealer_button": 1,
  "current_turn": 1,
  "players": [
    {
      "id": 0,
      "chips": 0,
      "bet": 6,
      "status": "all_in"
    },
    {
      "id": 3,
      "chips": 1521,
      "bet": 10,
      "status": "active"
    }
  ],
  "actions": [
    "fold",
    "call (6)",
    "raise (min 26)",
    "all-in (8463)"
  ],
  "history": [
    "Player 3 posted big blind 20",
    "Player 0 went all-in with 2",
    "Player 1 raised to 120",
    "Player 3 called 100",
    "Flop dealt: 5♠, 4♦, 7♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: 10♥",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "River dealt: 3♣",
    "Player 1 checked",
    "Player 3 checked",
    "Showdown: Player 0 hand=One Pair: Ks - K♠, K♦, 10♥, 7♥, 5♠ cards=K♠, K♦",
    "Showdown: Player 1 hand=One Pair: 4s - A♥, 10♥, 7♥, 4♣, 4♦ cards=4♣, A♥",
    "Showdown: Player 3 hand=High Card: Q♣ - Q♣, 10♥, 7♥, 5♠, 4♦ cards=2♦, Q♣",
    "Side pot layer 0: amount=6, winners=0 best_hand=One Pair: Ks - K♠, K♦, 10♥, 7♥, 5♠",
    "Side pot layer 1: amount=636, winners=1 best_hand=One Pair: 4s - A♥, 10♥, 7♥, 4♣, 4♦",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 6"
  ]
}
2025-10-31 19:07:21,170 - poker_game - DEBUG - Create Session: {'id': '2c3e3647-2cd1-48cb-881a-1aef5a3d5a7a', 'appName': 'beginner_agent', 'userId': 'player_1', 'state': {}, 'events': [], 'lastUpdateTime': 1761905241.1681285}
2025-10-31 19:07:22,877 - poker_game - INFO - LLM raw Response for Agent1: [{'content': {'parts': [{'text': '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでは、5と7は弱いハンドであり、レイズするには強さが足りません。ポットにすでにベットされている金額（6）をコールしても、勝てる可能性は低いです。全プレイヤーがフォールドして、次のハンドに備えるのが最善です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 89, 'promptTokenCount': 938, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 938}], 'totalTokenCount': 1027}, 'invocationId': 'e-ae62b170-6ff0-425f-9b9d-c4708f7d3764', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'dixHZUes', 'timestamp': 1761905241.188808}]
2025-10-31 19:07:22,877 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent1:
2025-10-31 19:07:22,877 - poker_game - DEBUG - ```json
{
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップでは、5と7は弱いハンドであり、レイズするには強さが足りません。ポットにすでにベットされている金額（6）をコールしても、勝てる可能性は低いです。全プレイヤーがフォールドして、次のハンドに備えるのが最善です。"
}
```
2025-10-31 19:07:22,878 - poker_game - DEBUG - [Agent1] Starting LLM API response parsing
2025-10-31 19:07:22,878 - poker_game - DEBUG - [Agent1] Raw response content: '```json\n{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでは、5と7は弱いハンドであり、レイズするには強さが足りません。ポットにすでにベットされている金額（6）をコールしても、勝てる可能性は低いです。全プレイヤーがフォールドして、次のハンドに備えるのが最善です。"\n}\n```'
2025-10-31 19:07:22,878 - poker_game - DEBUG - [Agent1] Markdown code block detected
2025-10-31 19:07:22,878 - poker_game - DEBUG - [Agent1] Extracted content from markdown: '{\n  "action": "fold",\n  "amount": 0,\n  "reasoning": "プリフロップでは、5と7は弱いハンドであり、レイズするには強さが足りません。ポットにすでにベットされている金額（6）をコールしても、勝てる可能性は低いです。全プレイヤーがフォールドして、次のハンドに備えるのが最善です。"\n}'
2025-10-31 19:07:22,878 - poker_game - DEBUG - [Agent1] JSON pattern found: {
  "action": "fold",
  "amount": 0,
  "reasoning": "プリフロップでは、5と7は弱いハンドであり、レイズするには強さが足りません。ポットにすでにベットされている金額（6）をコールしても、勝てる可能性は低いです。全プレイヤーがフォールドして、次のハンドに備えるのが最善です。"
}
2025-10-31 19:07:22,878 - poker_game - DEBUG - [Agent1] JSON parsing successful: {'action': 'fold', 'amount': 0, 'reasoning': 'プリフロップでは、5と7は弱いハンドであり、レイズするには強さが足りません。ポットにすでにベットされている金額（6）をコールしても、勝てる可能性は低いです。全プレイヤーがフォールドして、次のハンドに備えるのが最善です。'}
2025-10-31 19:07:22,878 - poker_game - DEBUG - [Agent1] Extracted values - action: 'fold', amount: 0
2025-10-31 19:07:22,879 - poker_game - DEBUG - [Agent1] Action 'fold' normalized - amount set to 0
2025-10-31 19:07:22,879 - poker_game - DEBUG - [Agent1] Final parsed decision: {'action': 'fold', 'amount': 0}
2025-10-31 19:07:22,879 - poker_game - INFO - [Agent1] Successfully parsed decision: fold, 0, プリフロップでは、5と7は弱いハンドであり、レイズするには強さが足りません。ポットにすでにベットされている金額（6）をコールしても、勝てる可能性は低いです。全プレイヤーがフォールドして、次のハンドに備えるのが最善です。
2025-10-31 19:07:22,879 - poker_game - INFO - >>> PROCESS_ACTION: Player 1 attempts 'fold' with amount 0
2025-10-31 19:07:22,880 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:07:22,880 - poker_game - INFO - Hand #30, Phase: preflop
2025-10-31 19:07:22,880 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:07:22,880 - poker_game - INFO - Pot: 16, Current bet: 6
2025-10-31 19:07:22,881 - poker_game - INFO - Last raiser: 0
2025-10-31 19:07:22,881 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:22,881 - poker_game - INFO - Active players: 2, All-in: 1, Folded: 0
2025-10-31 19:07:22,881 - poker_game - INFO - Community cards: []
2025-10-31 19:07:22,881 - poker_game - INFO -   P0(Agent0): chips=0, bet=6, status=all_in
2025-10-31 19:07:22,881 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=active
2025-10-31 19:07:22,882 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:22,882 - poker_game - INFO -   P3(Agent3): chips=1521, bet=10, status=active
2025-10-31 19:07:22,882 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:22,882 - poker_game - INFO - ==================================================
2025-10-31 19:07:22,882 - poker_game - INFO - ACTION_EXECUTED: Player 1 folded
2025-10-31 19:07:22,894 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:07:22,894 - poker_game - INFO - Hand #30, Phase: preflop
2025-10-31 19:07:22,894 - poker_game - INFO - Current player: 1, Dealer: 1
2025-10-31 19:07:22,895 - poker_game - INFO - Pot: 16, Current bet: 6
2025-10-31 19:07:22,895 - poker_game - INFO - Last raiser: 0
2025-10-31 19:07:22,895 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:22,895 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:22,895 - poker_game - INFO - Community cards: []
2025-10-31 19:07:22,896 - poker_game - INFO -   P0(Agent0): chips=0, bet=6, status=all_in
2025-10-31 19:07:22,896 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:22,896 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:22,896 - poker_game - INFO -   P3(Agent3): chips=1521, bet=10, status=active
2025-10-31 19:07:22,896 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:22,896 - poker_game - INFO - Extra: Action: Player 1 folded
2025-10-31 19:07:22,896 - poker_game - INFO - ==================================================
2025-10-31 19:07:22,897 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:07:22,897 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:07:22,897 - poker_game - DEBUG - Active players: [3]
2025-10-31 19:07:22,897 - poker_game - INFO - Advanced from player 1 to player 3 (seat order)
2025-10-31 19:07:22,897 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:07:22,897 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:07:22,897 - poker_game - DEBUG - Active: 1, All-in: 1
2025-10-31 19:07:22,897 - poker_game - INFO - Betting complete: Single active player has matched the bet
2025-10-31 19:07:22,898 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:07:22,898 - poker_game - INFO - Hand #30, Phase: preflop
2025-10-31 19:07:22,898 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:07:22,898 - poker_game - INFO - Pot: 16, Current bet: 6
2025-10-31 19:07:22,899 - poker_game - INFO - Last raiser: 0
2025-10-31 19:07:22,899 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:22,899 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:22,899 - poker_game - INFO - Community cards: []
2025-10-31 19:07:22,899 - poker_game - INFO -   P0(Agent0): chips=0, bet=6, status=all_in
2025-10-31 19:07:22,900 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:22,900 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:22,900 - poker_game - INFO -   P3(Agent3): chips=1521, bet=10, status=active
2025-10-31 19:07:22,900 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:22,900 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:07:22,901 - poker_game - INFO - ==================================================
2025-10-31 19:07:23,002 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: preflop
2025-10-31 19:07:23,002 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:23,003 - poker_game - INFO - Remaining players: 2
2025-10-31 19:07:23,003 - poker_game - DEBUG -   Remaining P0: Agent0, status: all_in
2025-10-31 19:07:23,003 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:07:23,003 - poker_game - INFO - Phase changed: PREFLOP -> FLOP
2025-10-31 19:07:23,012 - poker_game - INFO - Starting new betting round
2025-10-31 19:07:23,013 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:07:23,013 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:07:23,013 - poker_game - DEBUG - Active players for new betting round: [3]
2025-10-31 19:07:23,014 - poker_game - DEBUG - Dealer button: 1
2025-10-31 19:07:23,014 - poker_game - INFO - First actor: Player 3 (by phase rule), was 3
2025-10-31 19:07:23,014 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:07:23,015 - poker_game - INFO - Hand #30, Phase: flop
2025-10-31 19:07:23,015 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:07:23,015 - poker_game - INFO - Pot: 16, Current bet: 0
2025-10-31 19:07:23,016 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:23,016 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:23,016 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:23,017 - poker_game - INFO - Community cards: ['4♥', '10♥', '3♣']
2025-10-31 19:07:23,017 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:23,017 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:23,018 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:23,018 - poker_game - INFO -   P3(Agent3): chips=1521, bet=0, status=active
2025-10-31 19:07:23,018 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:23,018 - poker_game - INFO - Extra: Phase: preflop -> flop
2025-10-31 19:07:23,019 - poker_game - INFO - ==================================================
2025-10-31 19:07:23,020 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "flop",
  "your_cards": [
    "8♣",
    "10♣"
  ],
  "community": [
    "4♥",
    "10♥",
    "3♣"
  ],
  "your_chips": 1521,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 10,
  "pot": 16,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 0,
      "bet": 0,
      "status": "all_in"
    },
    {
      "id": 1,
      "chips": 8463,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1521)"
  ],
  "history": [
    "Player 1 raised to 120",
    "Player 3 called 100",
    "Flop dealt: 5♠, 4♦, 7♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: 10♥",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "River dealt: 3♣",
    "Player 1 checked",
    "Player 3 checked",
    "Showdown: Player 0 hand=One Pair: Ks - K♠, K♦, 10♥, 7♥, 5♠ cards=K♠, K♦",
    "Showdown: Player 1 hand=One Pair: 4s - A♥, 10♥, 7♥, 4♣, 4♦ cards=4♣, A♥",
    "Showdown: Player 3 hand=High Card: Q♣ - Q♣, 10♥, 7♥, 5♠, 4♦ cards=2♦, Q♣",
    "Side pot layer 0: amount=6, winners=0 best_hand=One Pair: Ks - K♠, K♦, 10♥, 7♥, 5♠",
    "Side pot layer 1: amount=636, winners=1 best_hand=One Pair: 4s - A♥, 10♥, 7♥, 4♣, 4♦",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 6",
    "Player 1 folded",
    "Flop dealt: 4♥, 10♥, 3♣"
  ]
}
2025-10-31 19:07:23,054 - poker_game - DEBUG - Create Session: {'id': '1de3caf9-b6c7-40ca-a06e-da58ea37c348', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905243.0520067}
2025-10-31 19:07:26,215 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（Flop）は、コミュニティカード（誰でも使える共有カード）の最初の3枚です。この状況では、フロップは 4♥, 10♥, 3♣ です。あなたの手札は 8♣, 10♣ で、ペア（同じ数字のカードが2枚）ができています（10が2枚）。これは悪くないハンドですが、相手がこれより強いハンドを持っている可能性もあります。しかし、現在の状況では、あなたのアクションは「チェック」（Check）または「フォールド」（Fold）のいずれかです。なぜなら、他のプレイヤーがまだベット（Bet）していないからです。対戦相手であるプレイヤー0は「all_in」（全チップをベット）しており、プレイヤー1は「folded」（降りた）ため、あなたはポット（Pot - これまでのベット額の合計）をそのまま引き継ぐことができます。ポットは16で、コール（Call - 相手のベット額と同額を支払ってゲームを続けること）する必要はありません。しかし、あなたは先にベットしていないので、チェックを選択できます。ただし、この状況では、相手が all-in しているため、あなたはチェックするか、ベット額にコールするか、または全額ベット（all-in）するかしか選択肢がありません。しかし、相手が all-in しているため、あなたはコールする必要はありません。ポットは16で、あなたはまだベットしていません。ここでは、コールする必要はないので0です。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 334, 'promptTokenCount': 959, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 959}], 'totalTokenCount': 1293}, 'invocationId': 'e-7c9e569c-26d9-450c-958d-ade2456e78da', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'zUYSShLc', 'timestamp': 1761905243.063047}]
2025-10-31 19:07:26,216 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:07:26,216 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "フロップ（Flop）は、コミュニティカード（誰でも使える共有カード）の最初の3枚です。この状況では、フロップは 4♥, 10♥, 3♣ です。あなたの手札は 8♣, 10♣ で、ペア（同じ数字のカードが2枚）ができています（10が2枚）。これは悪くないハンドですが、相手がこれより強いハンドを持っている可能性もあります。しかし、現在の状況では、あなたのアクションは「チェック」（Check）または「フォールド」（Fold）のいずれかです。なぜなら、他のプレイヤーがまだベット（Bet）していないからです。対戦相手であるプレイヤー0は「all_in」（全チップをベット）しており、プレイヤー1は「folded」（降りた）ため、あなたはポット（Pot - これまでのベット額の合計）をそのまま引き継ぐことができます。ポットは16で、コール（Call - 相手のベット額と同額を支払ってゲームを続けること）する必要はありません。しかし、あなたは先にベットしていないので、チェックを選択できます。ただし、この状況では、相手が all-in しているため、あなたはチェックするか、ベット額にコールするか、または全額ベット（all-in）するかしか選択肢がありません。しかし、相手が all-in しているため、あなたはコールする必要はありません。ポットは16で、あなたはまだベットしていません。ここでは、コールする必要はないので0です。"
}
```
2025-10-31 19:07:26,217 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:07:26,217 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（Flop）は、コミュニティカード（誰でも使える共有カード）の最初の3枚です。この状況では、フロップは 4♥, 10♥, 3♣ です。あなたの手札は 8♣, 10♣ で、ペア（同じ数字のカードが2枚）ができています（10が2枚）。これは悪くないハンドですが、相手がこれより強いハンドを持っている可能性もあります。しかし、現在の状況では、あなたのアクションは「チェック」（Check）または「フォールド」（Fold）のいずれかです。なぜなら、他のプレイヤーがまだベット（Bet）していないからです。対戦相手であるプレイヤー0は「all_in」（全チップをベット）しており、プレイヤー1は「folded」（降りた）ため、あなたはポット（Pot - これまでのベット額の合計）をそのまま引き継ぐことができます。ポットは16で、コール（Call - 相手のベット額と同額を支払ってゲームを続けること）する必要はありません。しかし、あなたは先にベットしていないので、チェックを選択できます。ただし、この状況では、相手が all-in しているため、あなたはチェックするか、ベット額にコールするか、または全額ベット（all-in）するかしか選択肢がありません。しかし、相手が all-in しているため、あなたはコールする必要はありません。ポットは16で、あなたはまだベットしていません。ここでは、コールする必要はないので0です。"\n}\n```'
2025-10-31 19:07:26,217 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:07:26,218 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "フロップ（Flop）は、コミュニティカード（誰でも使える共有カード）の最初の3枚です。この状況では、フロップは 4♥, 10♥, 3♣ です。あなたの手札は 8♣, 10♣ で、ペア（同じ数字のカードが2枚）ができています（10が2枚）。これは悪くないハンドですが、相手がこれより強いハンドを持っている可能性もあります。しかし、現在の状況では、あなたのアクションは「チェック」（Check）または「フォールド」（Fold）のいずれかです。なぜなら、他のプレイヤーがまだベット（Bet）していないからです。対戦相手であるプレイヤー0は「all_in」（全チップをベット）しており、プレイヤー1は「folded」（降りた）ため、あなたはポット（Pot - これまでのベット額の合計）をそのまま引き継ぐことができます。ポットは16で、コール（Call - 相手のベット額と同額を支払ってゲームを続けること）する必要はありません。しかし、あなたは先にベットしていないので、チェックを選択できます。ただし、この状況では、相手が all-in しているため、あなたはチェックするか、ベット額にコールするか、または全額ベット（all-in）するかしか選択肢がありません。しかし、相手が all-in しているため、あなたはコールする必要はありません。ポットは16で、あなたはまだベットしていません。ここでは、コールする必要はないので0です。"\n}'
2025-10-31 19:07:26,218 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "フロップ（Flop）は、コミュニティカード（誰でも使える共有カード）の最初の3枚です。この状況では、フロップは 4♥, 10♥, 3♣ です。あなたの手札は 8♣, 10♣ で、ペア（同じ数字のカードが2枚）ができています（10が2枚）。これは悪くないハンドですが、相手がこれより強いハンドを持っている可能性もあります。しかし、現在の状況では、あなたのアクションは「チェック」（Check）または「フォールド」（Fold）のいずれかです。なぜなら、他のプレイヤーがまだベット（Bet）していないからです。対戦相手であるプレイヤー0は「all_in」（全チップをベット）しており、プレイヤー1は「folded」（降りた）ため、あなたはポット（Pot - これまでのベット額の合計）をそのまま引き継ぐことができます。ポットは16で、コール（Call - 相手のベット額と同額を支払ってゲームを続けること）する必要はありません。しかし、あなたは先にベットしていないので、チェックを選択できます。ただし、この状況では、相手が all-in しているため、あなたはチェックするか、ベット額にコールするか、または全額ベット（all-in）するかしか選択肢がありません。しかし、相手が all-in しているため、あなたはコールする必要はありません。ポットは16で、あなたはまだベットしていません。ここでは、コールする必要はないので0です。"
}
2025-10-31 19:07:26,218 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': 'フロップ（Flop）は、コミュニティカード（誰でも使える共有カード）の最初の3枚です。この状況では、フロップは 4♥, 10♥, 3♣ です。あなたの手札は 8♣, 10♣ で、ペア（同じ数字のカードが2枚）ができています（10が2枚）。これは悪くないハンドですが、相手がこれより強いハンドを持っている可能性もあります。しかし、現在の状況では、あなたのアクションは「チェック」（Check）または「フォールド」（Fold）のいずれかです。なぜなら、他のプレイヤーがまだベット（Bet）していないからです。対戦相手であるプレイヤー0は「all_in」（全チップをベット）しており、プレイヤー1は「folded」（降りた）ため、あなたはポット（Pot - これまでのベット額の合計）をそのまま引き継ぐことができます。ポットは16で、コール（Call - 相手のベット額と同額を支払ってゲームを続けること）する必要はありません。しかし、あなたは先にベットしていないので、チェックを選択できます。ただし、この状況では、相手が all-in しているため、あなたはチェックするか、ベット額にコールするか、または全額ベット（all-in）するかしか選択肢がありません。しかし、相手が all-in しているため、あなたはコールする必要はありません。ポットは16で、あなたはまだベットしていません。ここでは、コールする必要はないので0です。'}
2025-10-31 19:07:26,219 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 0
2025-10-31 19:07:26,219 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1521)']
2025-10-31 19:07:26,219 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 19:07:26,219 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 0, フロップ（Flop）は、コミュニティカード（誰でも使える共有カード）の最初の3枚です。この状況では、フロップは 4♥, 10♥, 3♣ です。あなたの手札は 8♣, 10♣ で、ペア（同じ数字のカードが2枚）ができています（10が2枚）。これは悪くないハンドですが、相手がこれより強いハンドを持っている可能性もあります。しかし、現在の状況では、あなたのアクションは「チェック」（Check）または「フォールド」（Fold）のいずれかです。なぜなら、他のプレイヤーがまだベット（Bet）していないからです。対戦相手であるプレイヤー0は「all_in」（全チップをベット）しており、プレイヤー1は「folded」（降りた）ため、あなたはポット（Pot - これまでのベット額の合計）をそのまま引き継ぐことができます。ポットは16で、コール（Call - 相手のベット額と同額を支払ってゲームを続けること）する必要はありません。しかし、あなたは先にベットしていないので、チェックを選択できます。ただし、この状況では、相手が all-in しているため、あなたはチェックするか、ベット額にコールするか、または全額ベット（all-in）するかしか選択肢がありません。しかし、相手が all-in しているため、あなたはコールする必要はありません。ポットは16で、あなたはまだベットしていません。ここでは、コールする必要はないので0です。
2025-10-31 19:07:26,220 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 0
2025-10-31 19:07:26,221 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:07:26,221 - poker_game - INFO - Hand #30, Phase: flop
2025-10-31 19:07:26,221 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:07:26,222 - poker_game - INFO - Pot: 16, Current bet: 0
2025-10-31 19:07:26,222 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:26,223 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:26,223 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:26,223 - poker_game - INFO - Community cards: ['4♥', '10♥', '3♣']
2025-10-31 19:07:26,224 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:26,224 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:26,224 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:26,225 - poker_game - INFO -   P3(Agent3): chips=1521, bet=0, status=active
2025-10-31 19:07:26,226 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:26,226 - poker_game - INFO - ==================================================
2025-10-31 19:07:26,227 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 19:07:26,247 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:07:26,248 - poker_game - INFO - Hand #30, Phase: flop
2025-10-31 19:07:26,248 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:07:26,249 - poker_game - INFO - Pot: 16, Current bet: 0
2025-10-31 19:07:26,249 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:26,249 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:26,250 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:26,250 - poker_game - INFO - Community cards: ['4♥', '10♥', '3♣']
2025-10-31 19:07:26,251 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:26,251 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:26,251 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:26,251 - poker_game - INFO -   P3(Agent3): chips=1521, bet=0, status=active
2025-10-31 19:07:26,252 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:26,252 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 19:07:26,252 - poker_game - INFO - ==================================================
2025-10-31 19:07:26,253 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:07:26,253 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:07:26,253 - poker_game - DEBUG - Active players: [3]
2025-10-31 19:07:26,254 - poker_game - INFO - Advanced from player 3 to player 3 (seat order)
2025-10-31 19:07:26,254 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:07:26,254 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:07:26,254 - poker_game - DEBUG - Active: 1, All-in: 1
2025-10-31 19:07:26,254 - poker_game - INFO - Betting complete: Single active player has matched the bet
2025-10-31 19:07:26,255 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:07:26,255 - poker_game - INFO - Hand #30, Phase: flop
2025-10-31 19:07:26,256 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:07:26,256 - poker_game - INFO - Pot: 16, Current bet: 0
2025-10-31 19:07:26,256 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:26,256 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:26,257 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:26,258 - poker_game - INFO - Community cards: ['4♥', '10♥', '3♣']
2025-10-31 19:07:26,258 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:26,259 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:26,260 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:26,260 - poker_game - INFO -   P3(Agent3): chips=1521, bet=0, status=active
2025-10-31 19:07:26,261 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:26,262 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:07:26,263 - poker_game - INFO - ==================================================
2025-10-31 19:07:26,364 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: flop
2025-10-31 19:07:26,364 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:26,364 - poker_game - INFO - Remaining players: 2
2025-10-31 19:07:26,365 - poker_game - DEBUG -   Remaining P0: Agent0, status: all_in
2025-10-31 19:07:26,365 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:07:26,365 - poker_game - INFO - Phase changed: FLOP -> TURN
2025-10-31 19:07:26,376 - poker_game - INFO - Starting new betting round
2025-10-31 19:07:26,376 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:07:26,377 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:07:26,377 - poker_game - DEBUG - Active players for new betting round: [3]
2025-10-31 19:07:26,377 - poker_game - DEBUG - Dealer button: 1
2025-10-31 19:07:26,377 - poker_game - INFO - First actor: Player 3 (by phase rule), was 3
2025-10-31 19:07:26,378 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:07:26,378 - poker_game - INFO - Hand #30, Phase: turn
2025-10-31 19:07:26,378 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:07:26,379 - poker_game - INFO - Pot: 16, Current bet: 0
2025-10-31 19:07:26,379 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:26,379 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:26,380 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:26,380 - poker_game - INFO - Community cards: ['4♥', '10♥', '3♣', 'A♣']
2025-10-31 19:07:26,381 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:26,381 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:26,382 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:26,382 - poker_game - INFO -   P3(Agent3): chips=1521, bet=0, status=active
2025-10-31 19:07:26,383 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:26,384 - poker_game - INFO - Extra: Phase: flop -> turn
2025-10-31 19:07:26,384 - poker_game - INFO - ==================================================
2025-10-31 19:07:26,386 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "turn",
  "your_cards": [
    "8♣",
    "10♣"
  ],
  "community": [
    "4♥",
    "10♥",
    "3♣",
    "A♣"
  ],
  "your_chips": 1521,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 10,
  "pot": 16,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 0,
      "bet": 0,
      "status": "all_in"
    },
    {
      "id": 1,
      "chips": 8463,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1521)"
  ],
  "history": [
    "Flop dealt: 5♠, 4♦, 7♥",
    "Player 1 checked",
    "Player 3 checked",
    "Turn dealt: 10♥",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "River dealt: 3♣",
    "Player 1 checked",
    "Player 3 checked",
    "Showdown: Player 0 hand=One Pair: Ks - K♠, K♦, 10♥, 7♥, 5♠ cards=K♠, K♦",
    "Showdown: Player 1 hand=One Pair: 4s - A♥, 10♥, 7♥, 4♣, 4♦ cards=4♣, A♥",
    "Showdown: Player 3 hand=High Card: Q♣ - Q♣, 10♥, 7♥, 5♠, 4♦ cards=2♦, Q♣",
    "Side pot layer 0: amount=6, winners=0 best_hand=One Pair: Ks - K♠, K♦, 10♥, 7♥, 5♠",
    "Side pot layer 1: amount=636, winners=1 best_hand=One Pair: 4s - A♥, 10♥, 7♥, 4♣, 4♦",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 6",
    "Player 1 folded",
    "Flop dealt: 4♥, 10♥, 3♣",
    "Player 3 checked",
    "Turn dealt: A♣"
  ]
}
2025-10-31 19:07:26,404 - poker_game - DEBUG - Create Session: {'id': 'ccd7b824-3a9f-4325-8870-49f255152bac', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905246.4012744}
2025-10-31 19:07:29,143 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況はターン（Turn）で、コミュニティカードにA♣, 10♥, 3♣, 4♥があります。あなたの手札は8♣, 10♣で、ペア（10のペア）ができています。また、フラッシュ（♣）のドロー（あと1枚♣が出ればフラッシュが完成する状態）でもあります。ポットは16で、コール（Call）すべき金額は0です。これは、あなたのアクションの番になる前に、前のプレイヤーがチェック（Check）したためです。この状況では、より良いハンド（役）を持っている可能性は低いですが、チェック（Check）して次のカード（リバー）を見るのが最善です。なぜなら、ベット（Bet）して相手を降ろすほどの強いハンドではないが、コール（Call）やレイズ（Raise）をするほどの強さもないからです。しかし、提供された情報では「to_call: 0」となっており、これはあなたがチェックできることを意味します。したがって、チェック（Check）を選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 252, 'promptTokenCount': 957, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 957}], 'totalTokenCount': 1209}, 'invocationId': 'e-ccdd86a1-6fa9-46c6-bc04-837b1efcaef2', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'NIW6VcrB', 'timestamp': 1761905246.417221}]
2025-10-31 19:07:29,143 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:07:29,144 - poker_game - DEBUG - ```json
{
  "action": "call",
  "amount": 0,
  "reasoning": "現在の状況はターン（Turn）で、コミュニティカードにA♣, 10♥, 3♣, 4♥があります。あなたの手札は8♣, 10♣で、ペア（10のペア）ができています。また、フラッシュ（♣）のドロー（あと1枚♣が出ればフラッシュが完成する状態）でもあります。ポットは16で、コール（Call）すべき金額は0です。これは、あなたのアクションの番になる前に、前のプレイヤーがチェック（Check）したためです。この状況では、より良いハンド（役）を持っている可能性は低いですが、チェック（Check）して次のカード（リバー）を見るのが最善です。なぜなら、ベット（Bet）して相手を降ろすほどの強いハンドではないが、コール（Call）やレイズ（Raise）をするほどの強さもないからです。しかし、提供された情報では「to_call: 0」となっており、これはあなたがチェックできることを意味します。したがって、チェック（Check）を選択します。"
}
```
2025-10-31 19:07:29,144 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:07:29,145 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況はターン（Turn）で、コミュニティカードにA♣, 10♥, 3♣, 4♥があります。あなたの手札は8♣, 10♣で、ペア（10のペア）ができています。また、フラッシュ（♣）のドロー（あと1枚♣が出ればフラッシュが完成する状態）でもあります。ポットは16で、コール（Call）すべき金額は0です。これは、あなたのアクションの番になる前に、前のプレイヤーがチェック（Check）したためです。この状況では、より良いハンド（役）を持っている可能性は低いですが、チェック（Check）して次のカード（リバー）を見るのが最善です。なぜなら、ベット（Bet）して相手を降ろすほどの強いハンドではないが、コール（Call）やレイズ（Raise）をするほどの強さもないからです。しかし、提供された情報では「to_call: 0」となっており、これはあなたがチェックできることを意味します。したがって、チェック（Check）を選択します。"\n}\n```'
2025-10-31 19:07:29,145 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:07:29,145 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "call",\n  "amount": 0,\n  "reasoning": "現在の状況はターン（Turn）で、コミュニティカードにA♣, 10♥, 3♣, 4♥があります。あなたの手札は8♣, 10♣で、ペア（10のペア）ができています。また、フラッシュ（♣）のドロー（あと1枚♣が出ればフラッシュが完成する状態）でもあります。ポットは16で、コール（Call）すべき金額は0です。これは、あなたのアクションの番になる前に、前のプレイヤーがチェック（Check）したためです。この状況では、より良いハンド（役）を持っている可能性は低いですが、チェック（Check）して次のカード（リバー）を見るのが最善です。なぜなら、ベット（Bet）して相手を降ろすほどの強いハンドではないが、コール（Call）やレイズ（Raise）をするほどの強さもないからです。しかし、提供された情報では「to_call: 0」となっており、これはあなたがチェックできることを意味します。したがって、チェック（Check）を選択します。"\n}'
2025-10-31 19:07:29,146 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "call",
  "amount": 0,
  "reasoning": "現在の状況はターン（Turn）で、コミュニティカードにA♣, 10♥, 3♣, 4♥があります。あなたの手札は8♣, 10♣で、ペア（10のペア）ができています。また、フラッシュ（♣）のドロー（あと1枚♣が出ればフラッシュが完成する状態）でもあります。ポットは16で、コール（Call）すべき金額は0です。これは、あなたのアクションの番になる前に、前のプレイヤーがチェック（Check）したためです。この状況では、より良いハンド（役）を持っている可能性は低いですが、チェック（Check）して次のカード（リバー）を見るのが最善です。なぜなら、ベット（Bet）して相手を降ろすほどの強いハンドではないが、コール（Call）やレイズ（Raise）をするほどの強さもないからです。しかし、提供された情報では「to_call: 0」となっており、これはあなたがチェックできることを意味します。したがって、チェック（Check）を選択します。"
}
2025-10-31 19:07:29,146 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'call', 'amount': 0, 'reasoning': '現在の状況はターン（Turn）で、コミュニティカードにA♣, 10♥, 3♣, 4♥があります。あなたの手札は8♣, 10♣で、ペア（10のペア）ができています。また、フラッシュ（♣）のドロー（あと1枚♣が出ればフラッシュが完成する状態）でもあります。ポットは16で、コール（Call）すべき金額は0です。これは、あなたのアクションの番になる前に、前のプレイヤーがチェック（Check）したためです。この状況では、より良いハンド（役）を持っている可能性は低いですが、チェック（Check）して次のカード（リバー）を見るのが最善です。なぜなら、ベット（Bet）して相手を降ろすほどの強いハンドではないが、コール（Call）やレイズ（Raise）をするほどの強さもないからです。しかし、提供された情報では「to_call: 0」となっており、これはあなたがチェックできることを意味します。したがって、チェック（Check）を選択します。'}
2025-10-31 19:07:29,147 - poker_game - DEBUG - [Agent3] Extracted values - action: 'call', amount: 0
2025-10-31 19:07:29,147 - poker_game - DEBUG - [Agent3] Processing call action - available actions: ['fold', 'check', 'raise (min 20)', 'all-in (1521)']
2025-10-31 19:07:29,147 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'call', 'amount': 0}
2025-10-31 19:07:29,147 - poker_game - INFO - [Agent3] Successfully parsed decision: call, 0, 現在の状況はターン（Turn）で、コミュニティカードにA♣, 10♥, 3♣, 4♥があります。あなたの手札は8♣, 10♣で、ペア（10のペア）ができています。また、フラッシュ（♣）のドロー（あと1枚♣が出ればフラッシュが完成する状態）でもあります。ポットは16で、コール（Call）すべき金額は0です。これは、あなたのアクションの番になる前に、前のプレイヤーがチェック（Check）したためです。この状況では、より良いハンド（役）を持っている可能性は低いですが、チェック（Check）して次のカード（リバー）を見るのが最善です。なぜなら、ベット（Bet）して相手を降ろすほどの強いハンドではないが、コール（Call）やレイズ（Raise）をするほどの強さもないからです。しかし、提供された情報では「to_call: 0」となっており、これはあなたがチェックできることを意味します。したがって、チェック（Check）を選択します。
2025-10-31 19:07:29,148 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'call' with amount 0
2025-10-31 19:07:29,149 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:07:29,149 - poker_game - INFO - Hand #30, Phase: turn
2025-10-31 19:07:29,150 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:07:29,151 - poker_game - INFO - Pot: 16, Current bet: 0
2025-10-31 19:07:29,151 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:29,152 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:29,153 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:29,154 - poker_game - INFO - Community cards: ['4♥', '10♥', '3♣', 'A♣']
2025-10-31 19:07:29,154 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:29,155 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:29,155 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:29,156 - poker_game - INFO -   P3(Agent3): chips=1521, bet=0, status=active
2025-10-31 19:07:29,156 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:29,157 - poker_game - INFO - ==================================================
2025-10-31 19:07:29,158 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 19:07:29,170 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:07:29,171 - poker_game - INFO - Hand #30, Phase: turn
2025-10-31 19:07:29,171 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:07:29,172 - poker_game - INFO - Pot: 16, Current bet: 0
2025-10-31 19:07:29,172 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:29,173 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:29,173 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:29,173 - poker_game - INFO - Community cards: ['4♥', '10♥', '3♣', 'A♣']
2025-10-31 19:07:29,174 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:29,174 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:29,175 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:29,175 - poker_game - INFO -   P3(Agent3): chips=1521, bet=0, status=active
2025-10-31 19:07:29,176 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:29,176 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 19:07:29,177 - poker_game - INFO - ==================================================
2025-10-31 19:07:29,177 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:07:29,177 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:07:29,177 - poker_game - DEBUG - Active players: [3]
2025-10-31 19:07:29,178 - poker_game - INFO - Advanced from player 3 to player 3 (seat order)
2025-10-31 19:07:29,178 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:07:29,178 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:07:29,179 - poker_game - DEBUG - Active: 1, All-in: 1
2025-10-31 19:07:29,179 - poker_game - INFO - Betting complete: Single active player has matched the bet
2025-10-31 19:07:29,179 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:07:29,180 - poker_game - INFO - Hand #30, Phase: turn
2025-10-31 19:07:29,181 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:07:29,182 - poker_game - INFO - Pot: 16, Current bet: 0
2025-10-31 19:07:29,182 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:29,183 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:29,184 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:29,185 - poker_game - INFO - Community cards: ['4♥', '10♥', '3♣', 'A♣']
2025-10-31 19:07:29,185 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:29,186 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:29,186 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:29,187 - poker_game - INFO -   P3(Agent3): chips=1521, bet=0, status=active
2025-10-31 19:07:29,188 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:29,188 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:07:29,189 - poker_game - INFO - ==================================================
2025-10-31 19:07:29,290 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: turn
2025-10-31 19:07:29,291 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:29,291 - poker_game - INFO - Remaining players: 2
2025-10-31 19:07:29,292 - poker_game - DEBUG -   Remaining P0: Agent0, status: all_in
2025-10-31 19:07:29,292 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:07:29,292 - poker_game - INFO - Phase changed: TURN -> RIVER
2025-10-31 19:07:29,303 - poker_game - INFO - Starting new betting round
2025-10-31 19:07:29,304 - poker_game - DEBUG - _start_new_betting_round called
2025-10-31 19:07:29,305 - poker_game - INFO - Reset: current_bet=0, betting_round_complete=False, last_raiser_index=None
2025-10-31 19:07:29,305 - poker_game - DEBUG - Active players for new betting round: [3]
2025-10-31 19:07:29,305 - poker_game - DEBUG - Dealer button: 1
2025-10-31 19:07:29,306 - poker_game - INFO - First actor: Player 3 (by phase rule), was 3
2025-10-31 19:07:29,306 - poker_game - INFO - === NEW_BETTING_ROUND_STARTED ===
2025-10-31 19:07:29,309 - poker_game - INFO - Hand #30, Phase: river
2025-10-31 19:07:29,310 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:07:29,311 - poker_game - INFO - Pot: 16, Current bet: 0
2025-10-31 19:07:29,311 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:29,312 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:29,312 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:29,313 - poker_game - INFO - Community cards: ['4♥', '10♥', '3♣', 'A♣', '4♠']
2025-10-31 19:07:29,313 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:29,313 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:29,314 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:29,314 - poker_game - INFO -   P3(Agent3): chips=1521, bet=0, status=active
2025-10-31 19:07:29,315 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:29,315 - poker_game - INFO - Extra: Phase: turn -> river
2025-10-31 19:07:29,316 - poker_game - INFO - ==================================================
2025-10-31 19:07:29,316 - poker_game - DEBUG - LLM Prompt for Agent3: {
  "your_id": 3,
  "phase": "river",
  "your_cards": [
    "8♣",
    "10♣"
  ],
  "community": [
    "4♥",
    "10♥",
    "3♣",
    "A♣",
    "4♠"
  ],
  "your_chips": 1521,
  "your_bet_this_round": 0,
  "your_total_bet_this_hand": 10,
  "pot": 16,
  "to_call": 0,
  "dealer_button": 1,
  "current_turn": 3,
  "players": [
    {
      "id": 0,
      "chips": 0,
      "bet": 0,
      "status": "all_in"
    },
    {
      "id": 1,
      "chips": 8463,
      "bet": 0,
      "status": "folded"
    }
  ],
  "actions": [
    "fold",
    "check",
    "raise (min 20)",
    "all-in (1521)"
  ],
  "history": [
    "Player 3 checked",
    "Turn dealt: 10♥",
    "Player 1 raised to 200",
    "Player 3 called 200",
    "River dealt: 3♣",
    "Player 1 checked",
    "Player 3 checked",
    "Showdown: Player 0 hand=One Pair: Ks - K♠, K♦, 10♥, 7♥, 5♠ cards=K♠, K♦",
    "Showdown: Player 1 hand=One Pair: 4s - A♥, 10♥, 7♥, 4♣, 4♦ cards=4♣, A♥",
    "Showdown: Player 3 hand=High Card: Q♣ - Q♣, 10♥, 7♥, 5♠, 4♦ cards=2♦, Q♣",
    "Side pot layer 0: amount=6, winners=0 best_hand=One Pair: Ks - K♠, K♦, 10♥, 7♥, 5♠",
    "Side pot layer 1: amount=636, winners=1 best_hand=One Pair: 4s - A♥, 10♥, 7♥, 4♣, 4♦",
    "Player 3 posted small blind 10",
    "Player 0 posted big blind 6",
    "Player 1 folded",
    "Flop dealt: 4♥, 10♥, 3♣",
    "Player 3 checked",
    "Turn dealt: A♣",
    "Player 3 checked",
    "River dealt: 4♠"
  ]
}
2025-10-31 19:07:29,328 - poker_game - DEBUG - Create Session: {'id': 'a5f1e6c1-3d07-4af5-9e1b-1a5aeaac34bc', 'appName': 'beginner_agent', 'userId': 'player_3', 'state': {}, 'events': [], 'lastUpdateTime': 1761905249.3255208}
2025-10-31 19:07:32,025 - poker_game - INFO - LLM raw Response for Agent3: [{'content': {'parts': [{'text': '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（River）の段階で、あなたの手札は「10♣、8♣」で、コミュニティカードは「4♥、10♥、3♣、A♣、4♠」です。これで完成する役は、コミュニティカードの「10♥」と「4♠」とペアになり、あなたの「10♣」と合わせて「ツーペア：10のペアと4のペア（Ten and Four）」になります。しかし、ボードにA♣があり、相手がAを持っている可能性もあります。また、相手の「Player 0」はすでにオールインしており、「Player 1」はフォールドしています。現在、ポットは16で、コール額は0です。これ以上のベットはリスクが高いため、チェック（check）して、現状の役で勝負するのが最善です。オールイン（all-in）の選択肢もありますが、相手がさらに強い役を持っている可能性も考慮すると、リスクを最小限に抑えるためにチェックを選択します。"\n}\n```'}], 'role': 'model'}, 'usageMetadata': {'candidatesTokenCount': 242, 'promptTokenCount': 954, 'promptTokensDetails': [{'modality': 'TEXT', 'tokenCount': 954}], 'totalTokenCount': 1196}, 'invocationId': 'e-feb21d8d-f49b-4019-9a7f-e3e10610dd63', 'author': 'beginner_poker_agent', 'actions': {'stateDelta': {}, 'artifactDelta': {}, 'requestedAuthConfigs': {}}, 'id': 'KSjMtznK', 'timestamp': 1761905249.339767}]
2025-10-31 19:07:32,025 - poker_game - DEBUG - LLM [-1]['content']['parts'][0]['text'] for Agent3:
2025-10-31 19:07:32,026 - poker_game - DEBUG - ```json
{
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（River）の段階で、あなたの手札は「10♣、8♣」で、コミュニティカードは「4♥、10♥、3♣、A♣、4♠」です。これで完成する役は、コミュニティカードの「10♥」と「4♠」とペアになり、あなたの「10♣」と合わせて「ツーペア：10のペアと4のペア（Ten and Four）」になります。しかし、ボードにA♣があり、相手がAを持っている可能性もあります。また、相手の「Player 0」はすでにオールインしており、「Player 1」はフォールドしています。現在、ポットは16で、コール額は0です。これ以上のベットはリスクが高いため、チェック（check）して、現状の役で勝負するのが最善です。オールイン（all-in）の選択肢もありますが、相手がさらに強い役を持っている可能性も考慮すると、リスクを最小限に抑えるためにチェックを選択します。"
}
```
2025-10-31 19:07:32,026 - poker_game - DEBUG - [Agent3] Starting LLM API response parsing
2025-10-31 19:07:32,026 - poker_game - DEBUG - [Agent3] Raw response content: '```json\n{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（River）の段階で、あなたの手札は「10♣、8♣」で、コミュニティカードは「4♥、10♥、3♣、A♣、4♠」です。これで完成する役は、コミュニティカードの「10♥」と「4♠」とペアになり、あなたの「10♣」と合わせて「ツーペア：10のペアと4のペア（Ten and Four）」になります。しかし、ボードにA♣があり、相手がAを持っている可能性もあります。また、相手の「Player 0」はすでにオールインしており、「Player 1」はフォールドしています。現在、ポットは16で、コール額は0です。これ以上のベットはリスクが高いため、チェック（check）して、現状の役で勝負するのが最善です。オールイン（all-in）の選択肢もありますが、相手がさらに強い役を持っている可能性も考慮すると、リスクを最小限に抑えるためにチェックを選択します。"\n}\n```'
2025-10-31 19:07:32,026 - poker_game - DEBUG - [Agent3] Markdown code block detected
2025-10-31 19:07:32,026 - poker_game - DEBUG - [Agent3] Extracted content from markdown: '{\n  "action": "check",\n  "amount": 0,\n  "reasoning": "リバー（River）の段階で、あなたの手札は「10♣、8♣」で、コミュニティカードは「4♥、10♥、3♣、A♣、4♠」です。これで完成する役は、コミュニティカードの「10♥」と「4♠」とペアになり、あなたの「10♣」と合わせて「ツーペア：10のペアと4のペア（Ten and Four）」になります。しかし、ボードにA♣があり、相手がAを持っている可能性もあります。また、相手の「Player 0」はすでにオールインしており、「Player 1」はフォールドしています。現在、ポットは16で、コール額は0です。これ以上のベットはリスクが高いため、チェック（check）して、現状の役で勝負するのが最善です。オールイン（all-in）の選択肢もありますが、相手がさらに強い役を持っている可能性も考慮すると、リスクを最小限に抑えるためにチェックを選択します。"\n}'
2025-10-31 19:07:32,026 - poker_game - DEBUG - [Agent3] JSON pattern found: {
  "action": "check",
  "amount": 0,
  "reasoning": "リバー（River）の段階で、あなたの手札は「10♣、8♣」で、コミュニティカードは「4♥、10♥、3♣、A♣、4♠」です。これで完成する役は、コミュニティカードの「10♥」と「4♠」とペアになり、あなたの「10♣」と合わせて「ツーペア：10のペアと4のペア（Ten and Four）」になります。しかし、ボードにA♣があり、相手がAを持っている可能性もあります。また、相手の「Player 0」はすでにオールインしており、「Player 1」はフォールドしています。現在、ポットは16で、コール額は0です。これ以上のベットはリスクが高いため、チェック（check）して、現状の役で勝負するのが最善です。オールイン（all-in）の選択肢もありますが、相手がさらに強い役を持っている可能性も考慮すると、リスクを最小限に抑えるためにチェックを選択します。"
}
2025-10-31 19:07:32,027 - poker_game - DEBUG - [Agent3] JSON parsing successful: {'action': 'check', 'amount': 0, 'reasoning': 'リバー（River）の段階で、あなたの手札は「10♣、8♣」で、コミュニティカードは「4♥、10♥、3♣、A♣、4♠」です。これで完成する役は、コミュニティカードの「10♥」と「4♠」とペアになり、あなたの「10♣」と合わせて「ツーペア：10のペアと4のペア（Ten and Four）」になります。しかし、ボードにA♣があり、相手がAを持っている可能性もあります。また、相手の「Player 0」はすでにオールインしており、「Player 1」はフォールドしています。現在、ポットは16で、コール額は0です。これ以上のベットはリスクが高いため、チェック（check）して、現状の役で勝負するのが最善です。オールイン（all-in）の選択肢もありますが、相手がさらに強い役を持っている可能性も考慮すると、リスクを最小限に抑えるためにチェックを選択します。'}
2025-10-31 19:07:32,027 - poker_game - DEBUG - [Agent3] Extracted values - action: 'check', amount: 0
2025-10-31 19:07:32,027 - poker_game - DEBUG - [Agent3] Action 'check' normalized - amount set to 0
2025-10-31 19:07:32,027 - poker_game - DEBUG - [Agent3] Final parsed decision: {'action': 'check', 'amount': 0}
2025-10-31 19:07:32,027 - poker_game - INFO - [Agent3] Successfully parsed decision: check, 0, リバー（River）の段階で、あなたの手札は「10♣、8♣」で、コミュニティカードは「4♥、10♥、3♣、A♣、4♠」です。これで完成する役は、コミュニティカードの「10♥」と「4♠」とペアになり、あなたの「10♣」と合わせて「ツーペア：10のペアと4のペア（Ten and Four）」になります。しかし、ボードにA♣があり、相手がAを持っている可能性もあります。また、相手の「Player 0」はすでにオールインしており、「Player 1」はフォールドしています。現在、ポットは16で、コール額は0です。これ以上のベットはリスクが高いため、チェック（check）して、現状の役で勝負するのが最善です。オールイン（all-in）の選択肢もありますが、相手がさらに強い役を持っている可能性も考慮すると、リスクを最小限に抑えるためにチェックを選択します。
2025-10-31 19:07:32,028 - poker_game - INFO - >>> PROCESS_ACTION: Player 3 attempts 'check' with amount 0
2025-10-31 19:07:32,028 - poker_game - INFO - === BEFORE_ACTION ===
2025-10-31 19:07:32,028 - poker_game - INFO - Hand #30, Phase: river
2025-10-31 19:07:32,028 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:07:32,029 - poker_game - INFO - Pot: 16, Current bet: 0
2025-10-31 19:07:32,029 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:32,029 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:32,029 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:32,029 - poker_game - INFO - Community cards: ['4♥', '10♥', '3♣', 'A♣', '4♠']
2025-10-31 19:07:32,030 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:32,030 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:32,030 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:32,030 - poker_game - INFO -   P3(Agent3): chips=1521, bet=0, status=active
2025-10-31 19:07:32,030 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:32,030 - poker_game - INFO - ==================================================
2025-10-31 19:07:32,030 - poker_game - INFO - ACTION_EXECUTED: Player 3 checked
2025-10-31 19:07:32,042 - poker_game - INFO - === AFTER_ACTION ===
2025-10-31 19:07:32,042 - poker_game - INFO - Hand #30, Phase: river
2025-10-31 19:07:32,042 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:07:32,042 - poker_game - INFO - Pot: 16, Current bet: 0
2025-10-31 19:07:32,043 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:32,043 - poker_game - INFO - Betting round complete: False
2025-10-31 19:07:32,043 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:32,043 - poker_game - INFO - Community cards: ['4♥', '10♥', '3♣', 'A♣', '4♠']
2025-10-31 19:07:32,044 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:32,044 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:32,044 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:32,044 - poker_game - INFO -   P3(Agent3): chips=1521, bet=0, status=active
2025-10-31 19:07:32,044 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:32,044 - poker_game - INFO - Extra: Action: Player 3 checked
2025-10-31 19:07:32,045 - poker_game - INFO - ==================================================
2025-10-31 19:07:32,045 - poker_game - INFO - >>> ADVANCING to next player
2025-10-31 19:07:32,045 - poker_game - DEBUG - _advance_to_next_player called
2025-10-31 19:07:32,045 - poker_game - DEBUG - Active players: [3]
2025-10-31 19:07:32,045 - poker_game - INFO - Advanced from player 3 to player 3 (seat order)
2025-10-31 19:07:32,046 - poker_game - INFO - >>> CHECKING betting round completion
2025-10-31 19:07:32,046 - poker_game - DEBUG - _check_betting_round_complete called
2025-10-31 19:07:32,046 - poker_game - DEBUG - Active: 1, All-in: 1
2025-10-31 19:07:32,046 - poker_game - INFO - Betting complete: Single active player has matched the bet
2025-10-31 19:07:32,046 - poker_game - INFO - === AFTER_BETTING_CHECK ===
2025-10-31 19:07:32,047 - poker_game - INFO - Hand #30, Phase: river
2025-10-31 19:07:32,047 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:07:32,047 - poker_game - INFO - Pot: 16, Current bet: 0
2025-10-31 19:07:32,047 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:32,047 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:32,048 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:32,048 - poker_game - INFO - Community cards: ['4♥', '10♥', '3♣', 'A♣', '4♠']
2025-10-31 19:07:32,048 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:32,048 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:32,049 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:32,049 - poker_game - INFO -   P3(Agent3): chips=1521, bet=0, status=active
2025-10-31 19:07:32,049 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:32,050 - poker_game - INFO - Extra: Betting complete: True
2025-10-31 19:07:32,050 - poker_game - INFO - ==================================================
2025-10-31 19:07:32,151 - poker_game - INFO - >>> ADVANCE_TO_NEXT_PHASE called - Current phase: river
2025-10-31 19:07:32,151 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:32,152 - poker_game - INFO - Remaining players: 2
2025-10-31 19:07:32,152 - poker_game - DEBUG -   Remaining P0: Agent0, status: all_in
2025-10-31 19:07:32,152 - poker_game - DEBUG -   Remaining P3: Agent3, status: active
2025-10-31 19:07:32,152 - poker_game - INFO - Phase changed: RIVER -> SHOWDOWN
2025-10-31 19:07:32,152 - poker_game - INFO - === PHASE_CHANGED_TO_SHOWDOWN ===
2025-10-31 19:07:32,153 - poker_game - INFO - Hand #30, Phase: showdown
2025-10-31 19:07:32,153 - poker_game - INFO - Current player: 3, Dealer: 1
2025-10-31 19:07:32,153 - poker_game - INFO - Pot: 16, Current bet: 0
2025-10-31 19:07:32,153 - poker_game - INFO - Last raiser: None
2025-10-31 19:07:32,154 - poker_game - INFO - Betting round complete: True
2025-10-31 19:07:32,154 - poker_game - INFO - Active players: 1, All-in: 1, Folded: 1
2025-10-31 19:07:32,154 - poker_game - INFO - Community cards: ['4♥', '10♥', '3♣', 'A♣', '4♠']
2025-10-31 19:07:32,155 - poker_game - INFO -   P0(Agent0): chips=0, bet=0, status=all_in
2025-10-31 19:07:32,155 - poker_game - INFO -   P1(Agent1): chips=8463, bet=0, status=folded
2025-10-31 19:07:32,155 - poker_game - INFO -   P2(Agent2): chips=0, bet=0, status=busted
2025-10-31 19:07:32,156 - poker_game - INFO -   P3(Agent3): chips=1521, bet=0, status=active
2025-10-31 19:07:32,156 - poker_game - INFO -   P4(Agent4): chips=0, bet=0, status=busted
2025-10-31 19:07:32,156 - poker_game - INFO - ==================================================
2025-10-31 19:07:32,156 - poker_game - INFO - === SHOWDOWN_STARTED ===
2025-10-31 19:07:32,157 - poker_game - INFO - Pot: 16, Community cards: ['4♥', '10♥', '3♣', 'A♣', '4♠']
2025-10-31 19:07:32,157 - poker_game - INFO -   Player 0 status=all_in cards=['2♦', '6♣']
2025-10-31 19:07:32,158 - poker_game - INFO -   Player 3 status=active cards=['8♣', '10♣']
2025-10-31 19:07:32,161 - poker_game - INFO -   Player 0 hand=One Pair: 4s - A♣, 10♥, 6♣, 4♥, 4♠ cards=['2♦', '6♣']
2025-10-31 19:07:32,161 - poker_game - INFO -   Player 3 hand=Two Pair: 10s and 4s - A♣, 10♣, 10♥, 4♥, 4♠ cards=['8♣', '10♣']
2025-10-31 19:07:32,163 - poker_game - INFO - Pot layer 0: amount=12, contributors=[0, 3]
2025-10-31 19:07:32,163 - poker_game - INFO - Pot layer 1: amount=4, contributors=[3]
2025-10-31 19:07:32,164 - poker_game - INFO - Showdown total awarded: 16 (game.pot=16)
2025-10-31 19:07:32,164 - poker_game - INFO - Showdown winners (aggregated): [3]
2025-10-31 19:07:32,164 - poker_game - INFO -   Awarded 16 to Player 3 (hand=Two Pair: 10s and 4s - A♣, 10♣, 10♥, 4♥, 4♠)
2025-10-31 19:07:32,165 - poker_game - INFO - === SHOWDOWN_RESULTS_RECORDED ===
